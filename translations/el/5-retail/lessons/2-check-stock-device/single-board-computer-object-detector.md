<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "a3fdfec1d1e2cb645ea11c2930b51299",
  "translation_date": "2025-08-27T21:40:16+00:00",
  "source_file": "5-retail/lessons/2-check-stock-device/single-board-computer-object-detector.md",
  "language_code": "el"
}
-->
# Καλέστε τον ανιχνευτή αντικειμένων από τη συσκευή IoT σας - Εικονικό IoT Hardware και Raspberry Pi

Μόλις δημοσιευθεί ο ανιχνευτής αντικειμένων σας, μπορεί να χρησιμοποιηθεί από τη συσκευή IoT σας.

## Αντιγράψτε το έργο του ταξινομητή εικόνων

Το μεγαλύτερο μέρος του ανιχνευτή αποθεμάτων σας είναι ίδιο με τον ταξινομητή εικόνων που δημιουργήσατε σε προηγούμενο μάθημα.

### Εργασία - αντιγράψτε το έργο του ταξινομητή εικόνων

1. Δημιουργήστε έναν φάκελο με όνομα `stock-counter` είτε στον υπολογιστή σας αν χρησιμοποιείτε εικονική συσκευή IoT, είτε στο Raspberry Pi σας. Αν χρησιμοποιείτε εικονική συσκευή IoT, βεβαιωθείτε ότι έχετε ρυθμίσει ένα εικονικό περιβάλλον.

1. Ρυθμίστε το υλικό της κάμερας.

    * Αν χρησιμοποιείτε Raspberry Pi, θα χρειαστεί να τοποθετήσετε την PiCamera. Ίσως θελήσετε επίσης να σταθεροποιήσετε την κάμερα σε μια συγκεκριμένη θέση, για παράδειγμα, κρεμώντας το καλώδιο πάνω από ένα κουτί ή κονσέρβα, ή στερεώνοντας την κάμερα σε ένα κουτί με διπλής όψης ταινία.
    * Αν χρησιμοποιείτε εικονική συσκευή IoT, θα χρειαστεί να εγκαταστήσετε το CounterFit και το CounterFit PyCamera shim. Αν πρόκειται να χρησιμοποιήσετε στατικές εικόνες, τότε τραβήξτε μερικές εικόνες που ο ανιχνευτής αντικειμένων σας δεν έχει δει ακόμα. Αν πρόκειται να χρησιμοποιήσετε την κάμερα του υπολογιστή σας, βεβαιωθείτε ότι είναι τοποθετημένη έτσι ώστε να βλέπει το απόθεμα που ανιχνεύετε.

1. Αναπαράγετε τα βήματα από [το μάθημα 2 του έργου κατασκευής](../../../4-manufacturing/lessons/2-check-fruit-from-device/README.md#task---capture-an-image-using-an-iot-device) για να τραβήξετε εικόνες από την κάμερα.

1. Αναπαράγετε τα βήματα από [το μάθημα 2 του έργου κατασκευής](../../../4-manufacturing/lessons/2-check-fruit-from-device/README.md#task---classify-images-from-your-iot-device) για να καλέσετε τον ταξινομητή εικόνων. Το μεγαλύτερο μέρος αυτού του κώδικα θα επαναχρησιμοποιηθεί για την ανίχνευση αντικειμένων.

## Αλλάξτε τον κώδικα από ταξινομητή σε ανιχνευτή εικόνων

Ο κώδικας που χρησιμοποιήσατε για την ταξινόμηση εικόνων είναι πολύ παρόμοιος με τον κώδικα για την ανίχνευση αντικειμένων. Η κύρια διαφορά είναι η μέθοδος που καλείται στο Custom Vision SDK και τα αποτελέσματα της κλήσης.

### Εργασία - αλλάξτε τον κώδικα από ταξινομητή σε ανιχνευτή εικόνων

1. Διαγράψτε τις τρεις γραμμές κώδικα που ταξινομούν την εικόνα και επεξεργάζονται τις προβλέψεις:

    ```python
    results = predictor.classify_image(project_id, iteration_name, image)
    
    for prediction in results.predictions:
        print(f'{prediction.tag_name}:\t{prediction.probability * 100:.2f}%')
    ```

    Αφαιρέστε αυτές τις τρεις γραμμές.

1. Προσθέστε τον παρακάτω κώδικα για να ανιχνεύσετε αντικείμενα στην εικόνα:

    ```python
    results = predictor.detect_image(project_id, iteration_name, image)

    threshold = 0.3
    
    predictions = list(prediction for prediction in results.predictions if prediction.probability > threshold)
    
    for prediction in predictions:
        print(f'{prediction.tag_name}:\t{prediction.probability * 100:.2f}%')
    ```

    Αυτός ο κώδικας καλεί τη μέθοδο `detect_image` στον predictor για να εκτελέσει τον ανιχνευτή αντικειμένων. Στη συνέχεια, συγκεντρώνει όλες τις προβλέψεις με πιθανότητα πάνω από ένα όριο, εκτυπώνοντάς τες στην κονσόλα.

    Σε αντίθεση με έναν ταξινομητή εικόνων που επιστρέφει μόνο ένα αποτέλεσμα ανά ετικέτα, ο ανιχνευτής αντικειμένων θα επιστρέψει πολλαπλά αποτελέσματα, οπότε οποιαδήποτε με χαμηλή πιθανότητα πρέπει να φιλτραριστούν.

1. Εκτελέστε αυτόν τον κώδικα και θα τραβήξει μια εικόνα, θα τη στείλει στον ανιχνευτή αντικειμένων και θα εκτυπώσει τα ανιχνευμένα αντικείμενα. Αν χρησιμοποιείτε εικονική συσκευή IoT, βεβαιωθείτε ότι έχετε ορίσει μια κατάλληλη εικόνα στο CounterFit ή ότι η κάμερα του υπολογιστή σας είναι επιλεγμένη. Αν χρησιμοποιείτε Raspberry Pi, βεβαιωθείτε ότι η κάμερά σας δείχνει αντικείμενα σε ένα ράφι.

    ```output
    pi@raspberrypi:~/stock-counter $ python3 app.py 
    tomato paste:   34.13%
    tomato paste:   33.95%
    tomato paste:   35.05%
    tomato paste:   32.80%
    ```

    > 💁 Ίσως χρειαστεί να προσαρμόσετε το `threshold` σε μια κατάλληλη τιμή για τις εικόνες σας.

    Θα μπορείτε να δείτε την εικόνα που τραβήχτηκε και αυτές τις τιμές στην καρτέλα **Predictions** στο Custom Vision.

    ![4 κονσέρβες τοματοπολτού σε ένα ράφι με προβλέψεις για τις 4 ανιχνεύσεις: 35.8%, 33.5%, 25.7% και 16.6%](../../../../../translated_images/custom-vision-stock-prediction.942266ab1bcca3410ecdf23643b9f5f570cfab2345235074e24c51f285777613.el.png)

> 💁 Μπορείτε να βρείτε αυτόν τον κώδικα στον φάκελο [code-detect/pi](../../../../../5-retail/lessons/2-check-stock-device/code-detect/pi) ή [code-detect/virtual-iot-device](../../../../../5-retail/lessons/2-check-stock-device/code-detect/virtual-iot-device).

😀 Το πρόγραμμα καταμέτρησης αποθεμάτων σας ήταν επιτυχές!

---

**Αποποίηση ευθύνης**:  
Αυτό το έγγραφο έχει μεταφραστεί χρησιμοποιώντας την υπηρεσία αυτόματης μετάφρασης [Co-op Translator](https://github.com/Azure/co-op-translator). Παρόλο που καταβάλλουμε προσπάθειες για ακρίβεια, παρακαλούμε να έχετε υπόψη ότι οι αυτοματοποιημένες μεταφράσεις ενδέχεται να περιέχουν σφάλματα ή ανακρίβειες. Το πρωτότυπο έγγραφο στη μητρική του γλώσσα θα πρέπει να θεωρείται η αυθεντική πηγή. Για κρίσιμες πληροφορίες, συνιστάται επαγγελματική ανθρώπινη μετάφραση. Δεν φέρουμε ευθύνη για τυχόν παρεξηγήσεις ή εσφαλμένες ερμηνείες που προκύπτουν από τη χρήση αυτής της μετάφρασης.