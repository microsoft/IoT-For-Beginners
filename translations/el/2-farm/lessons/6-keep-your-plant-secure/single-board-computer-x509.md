<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "9aea84bcc7520222b0e1c50469d62d6a",
  "translation_date": "2025-08-27T21:56:44+00:00",
  "source_file": "2-farm/lessons/6-keep-your-plant-secure/single-board-computer-x509.md",
  "language_code": "el"
}
-->
# Χρησιμοποιήστε το πιστοποιητικό X.509 στον κώδικα της συσκευής σας - Εικονικό IoT Hardware και Raspberry Pi

Σε αυτό το μέρος του μαθήματος, θα συνδέσετε την εικονική συσκευή IoT ή το Raspberry Pi σας με το IoT Hub χρησιμοποιώντας το πιστοποιητικό X.509.

## Συνδέστε τη συσκευή σας με το IoT Hub

Το επόμενο βήμα είναι να συνδέσετε τη συσκευή σας με το IoT Hub χρησιμοποιώντας τα πιστοποιητικά X.509.

### Εργασία - σύνδεση με το IoT Hub

1. Αντιγράψτε τα αρχεία κλειδιού και πιστοποιητικού στον φάκελο που περιέχει τον κώδικα της συσκευής IoT σας. Εάν χρησιμοποιείτε Raspberry Pi μέσω του VS Code Remote SSH και δημιουργήσατε τα κλειδιά στον υπολογιστή ή το Mac σας, μπορείτε να σύρετε και να αποθέσετε τα αρχεία στον εξερευνητή του VS Code για να τα αντιγράψετε.

1. Ανοίξτε το αρχείο `app.py`

1. Για να συνδεθείτε χρησιμοποιώντας ένα πιστοποιητικό X.509, θα χρειαστείτε το όνομα του host του IoT Hub και το πιστοποιητικό X.509. Ξεκινήστε δημιουργώντας μια μεταβλητή που περιέχει το όνομα του host προσθέτοντας τον παρακάτω κώδικα πριν δημιουργηθεί ο client της συσκευής:

    ```python
    host_name = "<host_name>"
    ```

    Αντικαταστήστε το `<host_name>` με το όνομα του host του IoT Hub σας. Μπορείτε να το βρείτε στην ενότητα `HostName` μέσα στο `connection_string`. Θα είναι το όνομα του IoT Hub σας, που τελειώνει με `.azure-devices.net`.

1. Κάτω από αυτό, δηλώστε μια μεταβλητή με το ID της συσκευής:

    ```python
    device_id = "soil-moisture-sensor-x509"
    ```

1. Θα χρειαστείτε μια instance της κλάσης `X509` που περιέχει τα αρχεία X.509. Προσθέστε το `X509` στη λίστα των κλάσεων που εισάγονται από το module `azure.iot.device`:

    ```python
    from azure.iot.device import IoTHubDeviceClient, Message, MethodResponse, X509
    ```

1. Δημιουργήστε μια instance της κλάσης `X509` χρησιμοποιώντας τα αρχεία πιστοποιητικού και κλειδιού σας προσθέτοντας αυτόν τον κώδικα κάτω από τη δήλωση του `host_name`:

    ```python
    x509 = X509("./soil-moisture-sensor-x509-cert.pem", "./soil-moisture-sensor-x509-key.pem")
    ```

    Αυτό θα δημιουργήσει την κλάση `X509` χρησιμοποιώντας τα αρχεία `soil-moisture-sensor-x509-cert.pem` και `soil-moisture-sensor-x509-key.pem` που δημιουργήθηκαν νωρίτερα.

1. Αντικαταστήστε τη γραμμή κώδικα που δημιουργεί τον `device_client` από ένα connection string με την εξής:

    ```python
    device_client = IoTHubDeviceClient.create_from_x509_certificate(x509, host_name, device_id)
    ```

    Αυτό θα συνδέσει χρησιμοποιώντας το πιστοποιητικό X.509 αντί για ένα connection string.

1. Διαγράψτε τη γραμμή με τη μεταβλητή `connection_string`.

1. Εκτελέστε τον κώδικά σας. Παρακολουθήστε τα μηνύματα που αποστέλλονται στο IoT Hub και στείλτε αιτήματα direct method όπως πριν. Θα δείτε τη συσκευή να συνδέεται και να στέλνει μετρήσεις υγρασίας εδάφους, καθώς και να λαμβάνει αιτήματα direct method.

> 💁 Μπορείτε να βρείτε αυτόν τον κώδικα στον φάκελο [code/pi](../../../../../2-farm/lessons/6-keep-your-plant-secure/code/pi) ή [code/virtual-device](../../../../../2-farm/lessons/6-keep-your-plant-secure/code/virtual-device).

😀 Το πρόγραμμα του αισθητήρα υγρασίας εδάφους σας είναι συνδεδεμένο με το IoT Hub χρησιμοποιώντας ένα πιστοποιητικό X.509!

---

**Αποποίηση ευθύνης**:  
Αυτό το έγγραφο έχει μεταφραστεί χρησιμοποιώντας την υπηρεσία αυτόματης μετάφρασης [Co-op Translator](https://github.com/Azure/co-op-translator). Παρόλο που καταβάλλουμε προσπάθειες για ακρίβεια, παρακαλούμε να έχετε υπόψη ότι οι αυτοματοποιημένες μεταφράσεις ενδέχεται να περιέχουν λάθη ή ανακρίβειες. Το πρωτότυπο έγγραφο στη μητρική του γλώσσα θα πρέπει να θεωρείται η αυθεντική πηγή. Για κρίσιμες πληροφορίες, συνιστάται επαγγελματική ανθρώπινη μετάφραση. Δεν φέρουμε ευθύνη για τυχόν παρεξηγήσεις ή εσφαλμένες ερμηνείες που προκύπτουν από τη χρήση αυτής της μετάφρασης.