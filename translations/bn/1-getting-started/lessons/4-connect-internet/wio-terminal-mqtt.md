<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "d6faf0e8d3c2d6d20c0aef2a305dab18",
  "translation_date": "2025-08-27T12:32:37+00:00",
  "source_file": "1-getting-started/lessons/4-connect-internet/wio-terminal-mqtt.md",
  "language_code": "bn"
}
-->
# ржЗржирзНржЯрж╛рж░ржирзЗржЯрзЗрж░ ржорж╛ржзрзНржпржорзЗ ржЖржкржирж╛рж░ ржирж╛ржЗржЯрж▓рж╛ржЗржЯ ржирж┐ржпрж╝ржирзНрждрзНрж░ржг ржХрж░рзБржи - Wio Terminal

IoT ржбрж┐ржнрж╛ржЗрж╕ржЯрж┐ *test.mosquitto.org* ржПрж░ рж╕рж╛ржерзЗ MQTT ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржпрзЛржЧрж╛ржпрзЛржЧ ржХрж░рж╛рж░ ржЬржирзНржп ржХрзЛржб ржХрж░рж╛ ржкрзНрж░ржпрж╝рзЛржЬржи, ржпрж╛рждрзЗ ржПржЯрж┐ рж▓рж╛ржЗржЯ рж╕рзЗржирзНрж╕рж░рзЗрж░ рж░рж┐ржбрж┐ржВ рж╕рж╣ ржЯрзЗрж▓рж┐ржорзЗржЯрзНрж░рж┐ ржорж╛ржи ржкрж╛ржарж╛рждрзЗ ржкрж╛рж░рзЗ ржПржмржВ LED ржирж┐ржпрж╝ржирзНрждрзНрж░ржгрзЗрж░ ржЬржирзНржп ржХржорж╛ржирзНржб ржЧрзНрж░рж╣ржг ржХрж░рждрзЗ ржкрж╛рж░рзЗред

ржПржЗ ржкрж╛ржарзЗрж░ ржЕржВрж╢рзЗ, ржЖржкржирж┐ ржЖржкржирж╛рж░ Wio Terminal-ржХрзЗ ржПржХржЯрж┐ MQTT ржмрзНрж░рзЛржХрж╛рж░рзЗрж░ рж╕рж╛ржерзЗ рж╕ржВржпрзБржХрзНржд ржХрж░ржмрзЗржиред

## WiFi ржПржмржВ MQTT Arduino рж▓рж╛ржЗржмрзНрж░рзЗрж░рж┐ ржЗржирж╕рзНржЯрж▓ ржХрж░рзБржи

MQTT ржмрзНрж░рзЛржХрж╛рж░рзЗрж░ рж╕рж╛ржерзЗ ржпрзЛржЧрж╛ржпрзЛржЧ ржХрж░рждрзЗ, ржЖржкржирж╛ржХрзЗ ржХрж┐ржЫрзБ Arduino рж▓рж╛ржЗржмрзНрж░рзЗрж░рж┐ ржЗржирж╕рзНржЯрж▓ ржХрж░рждрзЗ рж╣ржмрзЗ ржпрж╛ Wio Terminal-ржПрж░ WiFi ржЪрж┐ржк ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржПржмржВ MQTT ржПрж░ рж╕рж╛ржерзЗ ржпрзЛржЧрж╛ржпрзЛржЧ ржХрж░рзЗред Arduino ржбрж┐ржнрж╛ржЗрж╕рзЗрж░ ржЬржирзНржп ржбрзЗржнрзЗрж▓ржк ржХрж░рж╛рж░ рж╕ржоржпрж╝, ржЖржкржирж┐ ржмрж┐ржнрж┐ржирзНржи рж▓рж╛ржЗржмрзНрж░рзЗрж░рж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░рзЗржи ржпрж╛ ржУржкрзЗржи-рж╕рзЛрж░рзНрж╕ ржХрзЛржб ржзрж╛рж░ржг ржХрж░рзЗ ржПржмржВ ржЕржирзЗржХ ржХрзНрж╖ржорждрж╛ ржмрж╛рж╕рзНрждржмрж╛ржпрж╝ржи ржХрж░рзЗред Seeed Wio Terminal-ржПрж░ ржЬржирзНржп рж▓рж╛ржЗржмрзНрж░рзЗрж░рж┐ ржкрзНрж░ржХрж╛рж╢ ржХрж░рзЗ ржпрж╛ ржПржЯрж┐ WiFi ржПрж░ ржорж╛ржзрзНржпржорзЗ ржпрзЛржЧрж╛ржпрзЛржЧ ржХрж░рждрзЗ рж╕ржХрзНрж╖ржо ржХрж░рзЗред ржЕржирзНржпрж╛ржирзНржп ржбрзЗржнрзЗрж▓ржкрж╛рж░рж░рж╛ MQTT ржмрзНрж░рзЛржХрж╛рж░рзЗрж░ рж╕рж╛ржерзЗ ржпрзЛржЧрж╛ржпрзЛржЧ ржХрж░рж╛рж░ ржЬржирзНржп рж▓рж╛ржЗржмрзНрж░рзЗрж░рж┐ ржкрзНрж░ржХрж╛рж╢ ржХрж░рзЗржЫрзЗржи, ржПржмржВ ржЖржкржирж┐ ржПржЧрзБрж▓рж┐ ржЖржкржирж╛рж░ ржбрж┐ржнрж╛ржЗрж╕рзЗрж░ рж╕рж╛ржерзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЗржиред

ржПржЗ рж▓рж╛ржЗржмрзНрж░рзЗрж░рж┐ржЧрзБрж▓рж┐ рж╕рзЛрж░рзНрж╕ ржХрзЛржб рж╣рж┐рж╕рж╛ржмрзЗ рж╕рж░ржмрж░рж╛рж╣ ржХрж░рж╛ рж╣ржпрж╝ ржпрж╛ PlatformIO-рждрзЗ рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ржнрж╛ржмрзЗ ржЖржоржжрж╛ржирж┐ ржХрж░рж╛ ржпрж╛ржпрж╝ ржПржмржВ ржЖржкржирж╛рж░ ржбрж┐ржнрж╛ржЗрж╕рзЗрж░ ржЬржирзНржп ржХржорзНржкрж╛ржЗрж▓ ржХрж░рж╛ ржпрж╛ржпрж╝ред ржПржЗржнрж╛ржмрзЗ Arduino рж▓рж╛ржЗржмрзНрж░рзЗрж░рж┐ржЧрзБрж▓рж┐ ржпрзЗ ржХрзЛржиржУ ржбрж┐ржнрж╛ржЗрж╕рзЗ ржХрж╛ржЬ ржХрж░ржмрзЗ ржпрж╛ Arduino ржлрзНрж░рзЗржоржУржпрж╝рж╛рж░рзНржХ рж╕ржорж░рзНржержи ржХрж░рзЗ, ржпржжрж┐ ржбрж┐ржнрж╛ржЗрж╕ржЯрж┐рж░ рж╕рзЗржЗ рж▓рж╛ржЗржмрзНрж░рзЗрж░рж┐рж░ ржЬржирзНржп ржкрзНрж░ржпрж╝рзЛржЬржирзАржпрж╝ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ рж╣рж╛рж░рзНржбржУржпрж╝рзНржпрж╛рж░ ржерж╛ржХрзЗред ржХрж┐ржЫрзБ рж▓рж╛ржЗржмрзНрж░рзЗрж░рж┐, ржпрзЗржоржи Seeed WiFi рж▓рж╛ржЗржмрзНрж░рзЗрж░рж┐, ржирж┐рж░рзНржжрж┐рж╖рзНржЯ рж╣рж╛рж░рзНржбржУржпрж╝рзНржпрж╛рж░рзЗрж░ ржЬржирзНржп ржмрж┐рж╢рзЗрж╖ржнрж╛ржмрзЗ рждрзИрж░рж┐ред

рж▓рж╛ржЗржмрзНрж░рзЗрж░рж┐ржЧрзБрж▓рж┐ ржЧрзНрж▓рзЛржмрж╛рж▓рж┐ ржЗржирж╕рзНржЯрж▓ ржХрж░рж╛ ржПржмржВ ржкрзНрж░ржпрж╝рзЛржЬржирзЗ ржХржорзНржкрж╛ржЗрж▓ ржХрж░рж╛ ржпрзЗрждрзЗ ржкрж╛рж░рзЗ, ржЕржержмрж╛ ржПржХржЯрж┐ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржкрзНрж░ржЬрзЗржХрзНржЯрзЗред ржПржЗ ржЕрзНржпрж╛рж╕рж╛ржЗржиржорзЗржирзНржЯрзЗрж░ ржЬржирзНржп, рж▓рж╛ржЗржмрзНрж░рзЗрж░рж┐ржЧрзБрж▓рж┐ ржкрзНрж░ржЬрзЗржХрзНржЯрзЗ ржЗржирж╕рзНржЯрж▓ ржХрж░рж╛ рж╣ржмрзЗред

тЬЕ рж▓рж╛ржЗржмрзНрж░рзЗрж░рж┐ ржорзНржпрж╛ржирзЗржЬржорзЗржирзНржЯ ржПржмржВ ржХрзАржнрж╛ржмрзЗ рж▓рж╛ржЗржмрзНрж░рзЗрж░рж┐ ржЦрзБржБржЬрзЗ ржПржмржВ ржЗржирж╕рзНржЯрж▓ ржХрж░рждрзЗ рж╣ржпрж╝ рж╕рзЗ рж╕ржорзНржкрж░рзНржХрзЗ ржЖрж░ржУ ржЬрж╛ржирждрзЗ ржкрж╛рж░рзЗржи [PlatformIO рж▓рж╛ржЗржмрзНрж░рзЗрж░рж┐ ржбржХрзБржорзЗржирзНржЯрзЗрж╢ржи](https://docs.platformio.org/en/latest/librarymanager/index.html) ржерзЗржХрзЗред

### ржЯрж╛рж╕рзНржХ - WiFi ржПржмржВ MQTT Arduino рж▓рж╛ржЗржмрзНрж░рзЗрж░рж┐ ржЗржирж╕рзНржЯрж▓ ржХрж░рзБржи

Arduino рж▓рж╛ржЗржмрзНрж░рзЗрж░рж┐ ржЗржирж╕рзНржЯрж▓ ржХрж░рзБржиред

1. VS Code-ржП ржирж╛ржЗржЯрж▓рж╛ржЗржЯ ржкрзНрж░ржЬрзЗржХрзНржЯ ржЦрзБрж▓рзБржиред

1. `platformio.ini` ржлрж╛ржЗрж▓рзЗрж░ рж╢рзЗрж╖рзЗ ржирж┐ржорзНржирж▓рж┐ржЦрж┐ржд ржпрзЛржЧ ржХрж░рзБржи:

    ```ini
    lib_deps =
        seeed-studio/Seeed Arduino rpcWiFi @ 1.0.5
        seeed-studio/Seeed Arduino FS @ 2.1.1
        seeed-studio/Seeed Arduino SFUD @ 2.0.2
        seeed-studio/Seeed Arduino rpcUnified @ 2.1.3
        seeed-studio/Seeed_Arduino_mbedtls @ 3.0.1
    ```

    ржПржЯрж┐ Seeed WiFi рж▓рж╛ржЗржмрзНрж░рзЗрж░рж┐ ржЖржоржжрж╛ржирж┐ ржХрж░рзЗред `@ <number>` рж╕рж┐ржиржЯрзНржпрж╛ржХрзНрж╕ржЯрж┐ рж▓рж╛ржЗржмрзНрж░рзЗрж░рж┐рж░ ржПржХржЯрж┐ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ рж╕ржВрж╕рзНржХрж░ржг ржиржорзНржмрж░ржХрзЗ ржирж┐рж░рзНржжрзЗрж╢ ржХрж░рзЗред

    > ЁЯТБ ржЖржкржирж┐ рж╕рж░рзНржмржжрж╛ рж▓рж╛ржЗржмрзНрж░рзЗрж░рж┐рж░ рж╕рж░рзНржмрж╢рзЗрж╖ рж╕ржВрж╕рзНржХрж░ржг ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ `@ <number>` рж╕рж░рж┐ржпрж╝рзЗ ржлрзЗрж▓рждрзЗ ржкрж╛рж░рзЗржи, рждржмрзЗ ржкрж░ржмрж░рзНрждрзА рж╕ржВрж╕рзНржХрж░ржгржЧрзБрж▓рж┐ ржирзАржЪрзЗрж░ ржХрзЛржбрзЗрж░ рж╕рж╛ржерзЗ ржХрж╛ржЬ ржХрж░ржмрзЗ рждрж╛рж░ ржХрзЛржиржУ ржЧрзНржпрж╛рж░рж╛ржирзНржЯрж┐ ржирзЗржЗред ржПржЦрж╛ржирзЗ ржХрзЛржбржЯрж┐ ржПржЗ рж▓рж╛ржЗржмрзНрж░рзЗрж░рж┐рж░ рж╕ржВрж╕рзНржХрж░ржгрзЗрж░ рж╕рж╛ржерзЗ ржкрж░рзАржХрзНрж╖рж╛ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗред

    рж▓рж╛ржЗржмрзНрж░рзЗрж░рж┐ ржпрзЛржЧ ржХрж░рж╛рж░ ржЬржирзНржп ржПржЯрзБржХрзБржЗ ржпржерзЗрж╖рзНржЯред ржкрж░ржмрж░рзНрждрзАржмрж╛рж░ PlatformIO ржкрзНрж░ржЬрзЗржХрзНржЯржЯрж┐ рждрзИрж░рж┐ ржХрж░рж▓рзЗ ржПржЯрж┐ ржПржЗ рж▓рж╛ржЗржмрзНрж░рзЗрж░рж┐ржЧрзБрж▓рж┐рж░ рж╕рзЛрж░рзНрж╕ ржХрзЛржб ржбрж╛ржЙржирж▓рзЛржб ржХрж░ржмрзЗ ржПржмржВ ржЖржкржирж╛рж░ ржкрзНрж░ржЬрзЗржХрзНржЯрзЗ ржХржорзНржкрж╛ржЗрж▓ ржХрж░ржмрзЗред

1. `lib_deps`-ржП ржирж┐ржорзНржирж▓рж┐ржЦрж┐ржд ржпрзЛржЧ ржХрж░рзБржи:

    ```ini
    knolleary/PubSubClient @ 2.8
    ```

    ржПржЯрж┐ [PubSubClient](https://github.com/knolleary/pubsubclient), ржПржХржЯрж┐ Arduino MQTT ржХрзНрж▓рж╛ржпрж╝рзЗржирзНржЯ ржЖржоржжрж╛ржирж┐ ржХрж░рзЗред

## WiFi-рждрзЗ рж╕ржВржпрзБржХрзНржд ржХрж░рзБржи

ржПржЦржи Wio Terminal-ржХрзЗ WiFi-рждрзЗ рж╕ржВржпрзБржХрзНржд ржХрж░рж╛ ржпрж╛ржмрзЗред

### ржЯрж╛рж╕рзНржХ - WiFi-рждрзЗ рж╕ржВржпрзБржХрзНржд ржХрж░рзБржи

Wio Terminal-ржХрзЗ WiFi-рждрзЗ рж╕ржВржпрзБржХрзНржд ржХрж░рзБржиред

1. `src` ржлрзЛрж▓рзНржбрж╛рж░рзЗ ржПржХржЯрж┐ ржирждрзБржи ржлрж╛ржЗрж▓ рждрзИрж░рж┐ ржХрж░рзБржи ржпрж╛рж░ ржирж╛ржо `config.h`ред ржПржЯрж┐ ржХрж░рждрзЗ, `src` ржлрзЛрж▓рзНржбрж╛рж░ ржмрж╛ рждрж╛рж░ ржнрж┐рждрж░рзЗ ржерж╛ржХрж╛ `main.cpp` ржлрж╛ржЗрж▓ржЯрж┐ ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзБржи ржПржмржВ ржПржХрзНрж╕ржкрзНрж▓рзЛрж░рж╛рж░рзЗ **New file** ржмрзЛрждрж╛ржоржЯрж┐ ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзБржиред ржПржЗ ржмрзЛрждрж╛ржоржЯрж┐ рж╢рзБржзрзБржорж╛рждрзНрж░ рждржЦржиржЗ ржкрзНрж░ржжрж░рзНрж╢рж┐ржд рж╣ржпрж╝ ржпржЦржи ржЖржкржирж╛рж░ ржХрж╛рж░рзНрж╕рж░ ржПржХрзНрж╕ржкрзНрж▓рзЛрж░рж╛рж░рзЗрж░ ржЙржкрж░ ржерж╛ржХрзЗред

    ![ржирждрзБржи ржлрж╛ржЗрж▓ ржмрзЛрждрж╛ржо](../../../../../translated_images/vscode-new-file-button.182702340fe6723c8cbb4cfa1a9a9fb0d0a5227643b4e46b91ff67b07a39a92f.bn.png)

1. ржПржЗ ржлрж╛ржЗрж▓рзЗ ржирж┐ржорзНржирж▓рж┐ржЦрж┐ржд ржХрзЛржб ржпрзЛржЧ ржХрж░рзБржи ржпрж╛ ржЖржкржирж╛рж░ WiFi ржХрзНрж░рзЗржбрзЗржирж╢рж┐ржпрж╝рж╛рж▓рзЗрж░ ржЬржирзНржп ржХржирж╕рзНржЯрзНржпрж╛ржирзНржЯ рж╕ржВржЬрзНржЮрж╛ржпрж╝рж┐ржд ржХрж░рзЗ:

    ```cpp
    #pragma once

    #include <string>
    
    using namespace std;
    
    // WiFi credentials
    const char *SSID = "<SSID>";
    const char *PASSWORD = "<PASSWORD>";
    ```

    `<SSID>`-ржПрж░ ржЬрж╛ржпрж╝ржЧрж╛ржпрж╝ ржЖржкржирж╛рж░ WiFi-ржПрж░ SSID рж▓рж┐ржЦрзБржиред `<PASSWORD>`-ржПрж░ ржЬрж╛ржпрж╝ржЧрж╛ржпрж╝ ржЖржкржирж╛рж░ WiFi ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб рж▓рж┐ржЦрзБржиред

1. `main.cpp` ржлрж╛ржЗрж▓ржЯрж┐ ржЦрзБрж▓рзБржиред

1. ржлрж╛ржЗрж▓рзЗрж░ рж╢рзАрж░рзНрж╖рзЗ ржирж┐ржорзНржирж▓рж┐ржЦрж┐ржд `#include` ржирж┐рж░рзНржжрзЗрж╢ржЧрзБрж▓рж┐ ржпрзЛржЧ ржХрж░рзБржи:

    ```cpp
    #include <PubSubClient.h>
    #include <rpcWiFi.h>
    #include <SPI.h>
    
    #include "config.h"
    ```

    ржПржЯрж┐ ржкрзВрж░рзНржмрзЗ ржпрзЛржЧ ржХрж░рж╛ рж▓рж╛ржЗржмрзНрж░рзЗрж░рж┐ржЧрзБрж▓рж┐рж░ ржЬржирзНржп рж╣рзЗржбрж╛рж░ ржлрж╛ржЗрж▓ржЧрзБрж▓рж┐ ржЕржирзНрждрж░рзНржнрзБржХрзНржд ржХрж░рзЗ, ржкрж╛рж╢рж╛ржкрж╛рж╢рж┐ ржХржиржлрж┐ржЧ рж╣рзЗржбрж╛рж░ ржлрж╛ржЗрж▓ред ржПржЗ рж╣рзЗржбрж╛рж░ ржлрж╛ржЗрж▓ржЧрзБрж▓рж┐ PlatformIO-ржХрзЗ рж▓рж╛ржЗржмрзНрж░рзЗрж░рж┐ржЧрзБрж▓рж┐рж░ ржХрзЛржб ржЖржирждрзЗ ржмрж▓рзЗред ржПржЗ рж╣рзЗржбрж╛рж░ ржлрж╛ржЗрж▓ржЧрзБрж▓рж┐ рж╕рзНржкрж╖рзНржЯржнрж╛ржмрзЗ ржЕржирзНрждрж░рзНржнрзБржХрзНржд ржирж╛ ржХрж░рж▓рзЗ, ржХрж┐ржЫрзБ ржХрзЛржб ржХржорзНржкрж╛ржЗрж▓ ржХрж░рж╛ рж╣ржмрзЗ ржирж╛ ржПржмржВ ржЖржкржирж┐ ржХржорзНржкрж╛ржЗрж▓рж╛рж░ рждрзНрж░рзБржЯрж┐ ржкрж╛ржмрзЗржиред

1. `setup` ржлрж╛ржВрж╢ржирзЗрж░ ржЙржкрж░рзЗ ржирж┐ржорзНржирж▓рж┐ржЦрж┐ржд ржХрзЛржб ржпрзЛржЧ ржХрж░рзБржи:

    ```cpp
    void connectWiFi()
    {
        while (WiFi.status() != WL_CONNECTED)
        {
            Serial.println("Connecting to WiFi..");
            WiFi.begin(SSID, PASSWORD);
            delay(500);
        }
    
        Serial.println("Connected!");
    }
    ```

    ржПржЗ ржХрзЛржбржЯрж┐ ржбрж┐ржнрж╛ржЗрж╕ржЯрж┐ WiFi-рждрзЗ рж╕ржВржпрзБржХрзНржд ржирж╛ ржерж╛ржХрж╛ ржкрж░рзНржпржирзНржд рж▓рзБржк ржХрж░рзЗ ржПржмржВ ржХржиржлрж┐ржЧ рж╣рзЗржбрж╛рж░ ржлрж╛ржЗрж▓ ржерзЗржХрзЗ SSID ржПржмржВ ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ рж╕ржВржпрзЛржЧ ржХрж░рж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзЗред

1. ржкрж┐ржиржЧрзБрж▓рж┐ ржХржиржлрж┐ржЧрж╛рж░ ржХрж░рж╛рж░ ржкрж░рзЗ `setup` ржлрж╛ржВрж╢ржирзЗрж░ рж╢рзЗрж╖рзЗ ржПржЗ ржлрж╛ржВрж╢ржиржЯрж┐ ржХрж▓ ржХрж░рзБржиред

    ```cpp
    connectWiFi();
    ```

1. ржЖржкржирж╛рж░ ржбрж┐ржнрж╛ржЗрж╕рзЗ ржПржЗ ржХрзЛржб ржЖржкрж▓рзЛржб ржХрж░рзБржи ржПржмржВ ржжрзЗржЦрзБржи WiFi рж╕ржВржпрзЛржЧ ржХрж╛ржЬ ржХрж░ржЫрзЗ ржХрж┐ржирж╛ред ржЖржкржирж┐ ржПржЯрж┐ рж╕рж┐рж░рж┐ржпрж╝рж╛рж▓ ржоржирж┐ржЯрж░рзЗ ржжрзЗржЦрждрзЗ ржкрж╛ржмрзЗржиред

    ```output
    > Executing task: platformio device monitor <
    
    --- Available filters and text transformations: colorize, debug, default, direct, hexlify, log2file, nocontrol, printable, send_on_enter, time
    --- More details at http://bit.ly/pio-monitor-filters
    --- Miniterm on /dev/cu.usbmodem1101  9600,8,N,1 ---
    --- Quit: Ctrl+C | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H ---
    Connecting to WiFi..
    Connected!
    ```

## MQTT-рждрзЗ рж╕ржВржпрзБржХрзНржд ржХрж░рзБржи

Wio Terminal WiFi-рждрзЗ рж╕ржВржпрзБржХрзНржд рж╣ржУржпрж╝рж╛рж░ ржкрж░рзЗ, ржПржЯрж┐ MQTT ржмрзНрж░рзЛржХрж╛рж░рзЗрж░ рж╕рж╛ржерзЗ рж╕ржВржпрзБржХрзНржд рж╣рждрзЗ ржкрж╛рж░рзЗред

### ржЯрж╛рж╕рзНржХ - MQTT-рждрзЗ рж╕ржВржпрзБржХрзНржд ржХрж░рзБржи

MQTT ржмрзНрж░рзЛржХрж╛рж░рзЗрж░ рж╕рж╛ржерзЗ рж╕ржВржпрзБржХрзНржд ржХрж░рзБржиред

1. MQTT ржмрзНрж░рзЛржХрж╛рж░рзЗрж░ рж╕ржВржпрзЛржЧрзЗрж░ ржмрж┐ржмрж░ржг рж╕ржВржЬрзНржЮрж╛ржпрж╝рж┐ржд ржХрж░рждрзЗ `config.h` ржлрж╛ржЗрж▓рзЗрж░ рж╢рзЗрж╖рзЗ ржирж┐ржорзНржирж▓рж┐ржЦрж┐ржд ржХрзЛржб ржпрзЛржЧ ржХрж░рзБржи:

    ```cpp
    // MQTT settings
    const string ID = "<ID>";
    
    const string BROKER = "test.mosquitto.org";
    const string CLIENT_NAME = ID + "nightlight_client";
    ```

    `<ID>`-ржПрж░ ржЬрж╛ржпрж╝ржЧрж╛ржпрж╝ ржПржХржЯрж┐ ржЗржЙржирж┐ржХ ржЖржЗржбрж┐ рж▓рж┐ржЦрзБржи ржпрж╛ ржПржЗ ржбрж┐ржнрж╛ржЗрж╕ ржХрзНрж▓рж╛ржпрж╝рзЗржирзНржЯрзЗрж░ ржирж╛ржо рж╣рж┐рж╕рзЗржмрзЗ ржмрзНржпржмрж╣рзГржд рж╣ржмрзЗ ржПржмржВ ржкрж░рзЗ ржПржЗ ржбрж┐ржнрж╛ржЗрж╕ржЯрж┐ ржпрзЗ ржЯржкрж┐ржХржЧрзБрж▓рж┐ ржкрзНрж░ржХрж╛рж╢ ржПржмржВ рж╕рж╛ржмрж╕рзНржХрзНрж░рж╛ржЗржм ржХрж░ржмрзЗ рждрж╛рж░ ржЬржирзНржпред *test.mosquitto.org* ржмрзНрж░рзЛржХрж╛рж░ржЯрж┐ ржкрж╛ржмрж▓рж┐ржХ ржПржмржВ ржЕржирзЗржХ рж▓рзЛржХ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ, ржпрж╛рж░ ржоржзрзНржпрзЗ ржПржЗ ржЕрзНржпрж╛рж╕рж╛ржЗржиржорзЗржирзНржЯрзЗ ржХрж╛ржЬ ржХрж░рж╛ ржЕржирзНржпрж╛ржирзНржп рж╢рж┐ржХрзНрж╖рж╛рж░рзНржерзАрж░рж╛ржУ рж░ржпрж╝рзЗржЫрзЗред ржПржХржЯрж┐ ржЗржЙржирж┐ржХ MQTT ржХрзНрж▓рж╛ржпрж╝рзЗржирзНржЯ ржирж╛ржо ржПржмржВ ржЯржкрж┐ржХ ржирж╛ржо ржерж╛ржХрж╛ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзЗ ржпрзЗ ржЖржкржирж╛рж░ ржХрзЛржб ржЕржирзНржп ржХрж╛рж░ржУ рж╕рж╛ржерзЗ рж╕ржВржШрж░рзНрж╖ ржХрж░ржмрзЗ ржирж╛ред ржЖржкржирж┐ ржПржЗ ржЕрзНржпрж╛рж╕рж╛ржЗржиржорзЗржирзНржЯрзЗ ржкрж░рзЗ рж╕рж╛рж░рзНржнрж╛рж░ ржХрзЛржб рждрзИрж░рж┐ ржХрж░рж╛рж░ рж╕ржоржпрж╝ржУ ржПржЗ ржЖржЗржбрж┐ ржкрзНрж░ржпрж╝рзЛржЬржи рж╣ржмрзЗред

    > ЁЯТБ ржЖржкржирж┐ ржПржХржЯрж┐ ржУржпрж╝рзЗржмрж╕рж╛ржЗржЯ ржпрзЗржоржи [GUIDGen](https://www.guidgen.com) ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржПржХржЯрж┐ ржЗржЙржирж┐ржХ ржЖржЗржбрж┐ рждрзИрж░рж┐ ржХрж░рждрзЗ ржкрж╛рж░рзЗржиред

    `BROKER` рж╣рж▓ MQTT ржмрзНрж░рзЛржХрж╛рж░рзЗрж░ URLред

    `CLIENT_NAME` рж╣рж▓ ржПржЗ MQTT ржХрзНрж▓рж╛ржпрж╝рзЗржирзНржЯрзЗрж░ ржЬржирзНржп ржмрзНрж░рзЛржХрж╛рж░рзЗ ржПржХржЯрж┐ ржЗржЙржирж┐ржХ ржирж╛ржоред

1. `main.cpp` ржлрж╛ржЗрж▓ржЯрж┐ ржЦрзБрж▓рзБржи ржПржмржВ `connectWiFi` ржлрж╛ржВрж╢ржирзЗрж░ ржирж┐ржЪрзЗ ржПржмржВ `setup` ржлрж╛ржВрж╢ржирзЗрж░ ржЙржкрж░рзЗ ржирж┐ржорзНржирж▓рж┐ржЦрж┐ржд ржХрзЛржб ржпрзЛржЧ ржХрж░рзБржи:

    ```cpp
    WiFiClient wioClient;
    PubSubClient client(wioClient);
    ```

    ржПржЗ ржХрзЛржбржЯрж┐ Wio Terminal WiFi рж▓рж╛ржЗржмрзНрж░рзЗрж░рж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржПржХржЯрж┐ WiFi ржХрзНрж▓рж╛ржпрж╝рзЗржирзНржЯ рждрзИрж░рж┐ ржХрж░рзЗ ржПржмржВ ржПржЯрж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржПржХржЯрж┐ MQTT ржХрзНрж▓рж╛ржпрж╝рзЗржирзНржЯ рждрзИрж░рж┐ ржХрж░рзЗред

1. ржПржЗ ржХрзЛржбрзЗрж░ ржирж┐ржЪрзЗ ржирж┐ржорзНржирж▓рж┐ржЦрж┐ржд ржпрзЛржЧ ржХрж░рзБржи:

    ```cpp
    void reconnectMQTTClient()
    {
        while (!client.connected())
        {
            Serial.print("Attempting MQTT connection...");
    
            if (client.connect(CLIENT_NAME.c_str()))
            {
                Serial.println("connected");
            }
            else
            {
                Serial.print("Retying in 5 seconds - failed, rc=");
                Serial.println(client.state());
                
                delay(5000);
            }
        }
    }
    ```

    ржПржЗ ржлрж╛ржВрж╢ржиржЯрж┐ MQTT ржмрзНрж░рзЛржХрж╛рж░рзЗрж░ рж╕рж╛ржерзЗ рж╕ржВржпрзЛржЧ ржкрж░рзАржХрзНрж╖рж╛ ржХрж░рзЗ ржПржмржВ рж╕ржВржпрзБржХрзНржд ржирж╛ ржерж╛ржХрж▓рзЗ ржкрзБржирж░рж╛ржпрж╝ рж╕ржВржпрзЛржЧ ржХрж░рзЗред ржПржЯрж┐ рж▓рзБржк ржХрж░рзЗ ржпрждржХрзНрж╖ржг ржирж╛ ржПржЯрж┐ рж╕ржВржпрзБржХрзНржд рж╣ржпрж╝ ржПржмржВ ржХржиржлрж┐ржЧ рж╣рзЗржбрж╛рж░ ржлрж╛ржЗрж▓рзЗрж░ ржЗржЙржирж┐ржХ ржХрзНрж▓рж╛ржпрж╝рзЗржирзНржЯ ржирж╛ржо ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ рж╕ржВржпрзЛржЧ ржХрж░рж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзЗред

    ржпржжрж┐ рж╕ржВржпрзЛржЧ ржмрзНржпрж░рзНрже рж╣ржпрж╝, ржПржЯрж┐ рзл рж╕рзЗржХрзЗржирзНржб ржкрж░рзЗ ржкрзБржирж░рж╛ржпрж╝ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзЗред

1. `reconnectMQTTClient` ржлрж╛ржВрж╢ржирзЗрж░ ржирж┐ржЪрзЗ ржирж┐ржорзНржирж▓рж┐ржЦрж┐ржд ржХрзЛржб ржпрзЛржЧ ржХрж░рзБржи:

    ```cpp
    void createMQTTClient()
    {
        client.setServer(BROKER.c_str(), 1883);
        reconnectMQTTClient();
    }
    ```

    ржПржЗ ржХрзЛржбржЯрж┐ ржХрзНрж▓рж╛ржпрж╝рзЗржирзНржЯрзЗрж░ ржЬржирзНржп MQTT ржмрзНрж░рзЛржХрж╛рж░ рж╕рзЗржЯ ржХрж░рзЗ, ржкрж╛рж╢рж╛ржкрж╛рж╢рж┐ ржПржХржЯрж┐ ржХрж▓ржмрзНржпрж╛ржХ рж╕рзЗржЯ ржХрж░рзЗ ржпржЦржи ржПржХржЯрж┐ ржмрж╛рж░рзНрждрж╛ ржЧрзНрж░рж╣ржг ржХрж░рж╛ рж╣ржпрж╝ред ржПржЯрж┐ ржмрзНрж░рзЛржХрж╛рж░рзЗрж░ рж╕рж╛ржерзЗ рж╕ржВржпрзЛржЧ ржХрж░рж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзЗред

1. WiFi рж╕ржВржпрзБржХрзНржд рж╣ржУржпрж╝рж╛рж░ ржкрж░рзЗ `setup` ржлрж╛ржВрж╢ржирзЗ `createMQTTClient` ржлрж╛ржВрж╢ржиржЯрж┐ ржХрж▓ ржХрж░рзБржиред

1. ржкрзБрж░рзЛ `loop` ржлрж╛ржВрж╢ржиржЯрж┐ ржирж┐ржорзНржирж▓рж┐ржЦрж┐ржд ржжрж┐ржпрж╝рзЗ ржкрзНрж░рждрж┐рж╕рзНржерж╛ржкржи ржХрж░рзБржи:

    ```cpp
    void loop()
    {
        reconnectMQTTClient();
        client.loop();
    
        delay(2000);
    }
    ```

    ржПржЗ ржХрзЛржбржЯрж┐ MQTT ржмрзНрж░рзЛржХрж╛рж░рзЗрж░ рж╕рж╛ржерзЗ ржкрзБржирж░рж╛ржпрж╝ рж╕ржВржпрзЛржЧ ржжрж┐ржпрж╝рзЗ рж╢рзБрж░рзБ ржХрж░рзЗред ржПржЗ рж╕ржВржпрзЛржЧржЧрзБрж▓рж┐ рж╕рж╣ржЬрзЗржЗ ржнрзЗржЩрзЗ ржпрзЗрждрзЗ ржкрж╛рж░рзЗ, рждрж╛ржЗ ржирж┐ржпрж╝ржорж┐рждржнрж╛ржмрзЗ ржкрж░рзАржХрзНрж╖рж╛ ржХрж░рж╛ ржПржмржВ ржкрзНрж░ржпрж╝рзЛржЬржи рж╣рж▓рзЗ ржкрзБржирж░рж╛ржпрж╝ рж╕ржВржпрзЛржЧ ржХрж░рж╛ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржгред ржПржЯрж┐ рждрж╛рж░ржкрж░рзЗ MQTT ржХрзНрж▓рж╛ржпрж╝рзЗржирзНржЯрзЗрж░ `loop` ржорзЗржержб ржХрж▓ ржХрж░рзЗ ржпрзЗ ржХрзЛржиржУ ржмрж╛рж░рзНрждрж╛ ржкрзНрж░ржХрзНрж░рж┐ржпрж╝рж╛ ржХрж░рждрзЗ ржпрж╛ рж╕рж╛ржмрж╕рзНржХрзНрж░рж╛ржЗржм ржХрж░рж╛ ржЯржкрж┐ржХрзЗ ржЖрж╕ржЫрзЗред ржПржЗ ржЕрзНржпрж╛ржкржЯрж┐ рж╕рж┐ржЩрзНржЧрзЗрж▓-ржерзНрж░рзЗржбрзЗржб, рждрж╛ржЗ ржмрж╛рж░рзНрждрж╛ржЧрзБрж▓рж┐ ржмрзНржпрж╛ржХржЧрзНрж░рж╛ржЙржирзНржб ржерзНрж░рзЗржбрзЗ ржЧрзНрж░рж╣ржг ржХрж░рж╛ ржпрж╛ржмрзЗ ржирж╛, рждрж╛ржЗ ржкрзНрж░ржзрж╛ржи ржерзНрж░рзЗржбрзЗ ржирзЗржЯржУржпрж╝рж╛рж░рзНржХ рж╕ржВржпрзЛржЧрзЗ ржЕржкрзЗржХрзНрж╖ржорж╛ржг ржмрж╛рж░рзНрждрж╛ржЧрзБрж▓рж┐ ржкрзНрж░ржХрзНрж░рж┐ржпрж╝рж╛ ржХрж░рж╛рж░ ржЬржирзНржп рж╕ржоржпрж╝ ржмрж░рж╛ржжрзНржж ржХрж░рждрзЗ рж╣ржмрзЗред

    ржЕржмрж╢рзЗрж╖рзЗ, рзи рж╕рзЗржХрзЗржирзНржбрзЗрж░ ржПржХржЯрж┐ ржмрж┐рж▓ржорзНржм ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзЗ ржпрзЗ рж▓рж╛ржЗржЯ рж▓рзЗржнрзЗрж▓ржЧрзБрж▓рж┐ ржЦрзБржм ржШржи ржШржи ржкрж╛ржарж╛ржирзЛ рж╣ржЪрзНржЫрзЗ ржирж╛ ржПржмржВ ржбрж┐ржнрж╛ржЗрж╕рзЗрж░ ржкрж╛ржУржпрж╝рж╛рж░ ржХржиржЬрж╛ржорзНржкрж╢ржи ржХржорж╛ржпрж╝ред

1. ржЖржкржирж╛рж░ Wio Terminal-ржП ржХрзЛржб ржЖржкрж▓рзЛржб ржХрж░рзБржи ржПржмржВ рж╕рж┐рж░рж┐ржпрж╝рж╛рж▓ ржоржирж┐ржЯрж░ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржбрж┐ржнрж╛ржЗрж╕ржЯрж┐ WiFi ржПржмржВ MQTT-рждрзЗ рж╕ржВржпрзБржХрзНржд рж╣ржЪрзНржЫрзЗ ржХрж┐ржирж╛ ржжрзЗржЦрзБржиред

    ```output
    > Executing task: platformio device monitor <
    
    source /Users/jimbennett/GitHub/IoT-For-Beginners/1-getting-started/lessons/4-connect-internet/code-mqtt/wio-terminal/nightlight/.venv/bin/activate
    --- Available filters and text transformations: colorize, debug, default, direct, hexlify, log2file, nocontrol, printable, send_on_enter, time
    --- More details at http://bit.ly/pio-monitor-filters
    --- Miniterm on /dev/cu.usbmodem1201  9600,8,N,1 ---
    --- Quit: Ctrl+C | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H ---
    Connecting to WiFi..
    Connected!
    Attempting MQTT connection...connected
    ```

> ЁЯТБ ржЖржкржирж┐ ржПржЗ ржХрзЛржбржЯрж┐ [code-mqtt/wio-terminal](../../../../../1-getting-started/lessons/4-connect-internet/code-mqtt/wio-terminal) ржлрзЛрж▓рзНржбрж╛рж░рзЗ ржЦрзБржБржЬрзЗ ржкрзЗрждрзЗ ржкрж╛рж░рзЗржиред

ЁЯША ржЖржкржирж┐ рж╕ржлрж▓ржнрж╛ржмрзЗ ржЖржкржирж╛рж░ ржбрж┐ржнрж╛ржЗрж╕ржХрзЗ ржПржХржЯрж┐ MQTT ржмрзНрж░рзЛржХрж╛рж░рзЗрж░ рж╕рж╛ржерзЗ рж╕ржВржпрзБржХрзНржд ржХрж░рзЗржЫрзЗржиред

---

**ржЕрж╕рзНржмрзАржХрзГрждрж┐**:  
ржПржЗ ржиржерж┐ржЯрж┐ AI ржЕржирзБржмрж╛ржж ржкрж░рж┐рж╖рзЗржмрж╛ [Co-op Translator](https://github.com/Azure/co-op-translator) ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЕржирзБржмрж╛ржж ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗред ржЖржорж░рж╛ ржпржерж╛рж╕ржорзНржнржм рж╕ржарж┐ржХ ржЕржирзБржмрж╛ржжрзЗрж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рж┐, рждржмрзЗ ржЕржирзБржЧрзНрж░рж╣ ржХрж░рзЗ ржоржирзЗ рж░рж╛ржЦржмрзЗржи ржпрзЗ рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ ржЕржирзБржмрж╛ржжрзЗ рждрзНрж░рзБржЯрж┐ ржмрж╛ ржЕрж╕ржЩрзНржЧрждрж┐ ржерж╛ржХрждрзЗ ржкрж╛рж░рзЗред ржиржерж┐ржЯрж┐рж░ ржорзВрж▓ ржнрж╛рж╖рж╛ржпрж╝ ржерж╛ржХрж╛ рж╕ржВрж╕рзНржХрж░ржгржЯрж┐ржХрзЗржЗ ржкрзНрж░рж╛ржорж╛ржгрж┐ржХ ржЙрзОрж╕ рж╣рж┐рж╕рзЗржмрзЗ ржмрж┐ржмрзЗржЪржирж╛ ржХрж░рж╛ ржЙржЪрж┐рждред ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг рждржерзНржпрзЗрж░ ржЬржирзНржп, ржкрзЗрж╢рж╛ржжрж╛рж░ ржорж╛ржиржм ржЕржирзБржмрж╛ржж ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛рж░ ржкрж░рж╛ржорж░рзНрж╢ ржжрзЗржУржпрж╝рж╛ рж╣ржпрж╝ред ржПржЗ ржЕржирзБржмрж╛ржж ржмрзНржпржмрж╣рж╛рж░рзЗрж░ ржлрж▓рзЗ рж╕рзГрж╖рзНржЯ ржХрзЛржирзЛ ржнрзБрж▓ ржмрзЛржЭрж╛ржмрзБржЭрж┐ ржмрж╛ ржнрзБрж▓ ржмрзНржпрж╛ржЦрзНржпрж╛рж░ ржЬржирзНржп ржЖржорж░рж╛ ржжрж╛ржпрж╝рзА ржиржЗред