<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "0ac0afcfb40cb5970ef4cb74f01c32e9",
  "translation_date": "2025-08-27T14:00:41+00:00",
  "source_file": "6-consumer/lessons/1-speech-recognition/pi-audio.md",
  "language_code": "bn"
}
-->
# ржЕржбрж┐ржУ рж░рзЗржХрж░рзНржб ржХрж░рзБржи - рж░тАМрзНржпрж╛рж╕рзНржкржмрзЗрж░рж┐ ржкрж╛ржЗ

ржПржЗ ржкрж╛ржарзЗрж░ ржПржЗ ржЕржВрж╢рзЗ, ржЖржкржирж┐ рж░тАМрзНржпрж╛рж╕рзНржкржмрзЗрж░рж┐ ржкрж╛ржЗ-ржП ржЕржбрж┐ржУ рж░рзЗржХрж░рзНржб ржХрж░рж╛рж░ ржЬржирзНржп ржХрзЛржб рж▓рж┐ржЦржмрзЗржиред ржПржХржЯрж┐ ржмрзЛрждрж╛ржорзЗрж░ ржорж╛ржзрзНржпржорзЗ ржЕржбрж┐ржУ рж░рзЗржХрж░рзНржбрж┐ржВ ржирж┐ржпрж╝ржирзНрждрзНрж░ржг ржХрж░рж╛ рж╣ржмрзЗред

## рж╣рж╛рж░рзНржбржУржпрж╝рзНржпрж╛рж░

рж░тАМрзНржпрж╛рж╕рзНржкржмрзЗрж░рж┐ ржкрж╛ржЗ-ржП ржЕржбрж┐ржУ рж░рзЗржХрж░рзНржбрж┐ржВ ржирж┐ржпрж╝ржирзНрждрзНрж░ржгрзЗрж░ ржЬржирзНржп ржПржХржЯрж┐ ржмрзЛрждрж╛ржо ржкрзНрж░ржпрж╝рзЛржЬржиред

ржЖржкржирж┐ ржпрзЗ ржмрзЛрждрж╛ржоржЯрж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЗржи рждрж╛ рж╣рж▓рзЛ ржПржХржЯрж┐ ржЧрзНрж░рзЛржн ржмрзЛрждрж╛ржоред ржПржЯрж┐ ржПржХржЯрж┐ ржбрж┐ржЬрж┐ржЯрж╛рж▓ рж╕рзЗржирзНрж╕рж░ ржпрж╛ ржПржХржЯрж┐ рж╕ржВржХрзЗржд ржЪрж╛рж▓рзБ ржмрж╛ ржмржирзНржз ржХрж░рзЗред ржПржЗ ржмрзЛрждрж╛ржоржЧрзБрж▓рзЛ ржПржоржиржнрж╛ржмрзЗ ржХржиржлрж┐ржЧрж╛рж░ ржХрж░рж╛ ржпрж╛ржпрж╝ ржпрж╛рждрзЗ ржмрзЛрждрж╛ржо ржЪрж╛ржкрж▓рзЗ ржПржХржЯрж┐ ржЙржЪрзНржЪ рж╕ржВржХрзЗржд ржкрж╛ржарж╛ржпрж╝ ржПржмржВ ржирж╛ ржЪрж╛ржкрж▓рзЗ ржирж┐ржорзНржи рж╕ржВржХрзЗржд ржкрж╛ржарж╛ржпрж╝, ржЕржержмрж╛ ржЙрж▓рзНржЯрзЛржЯрж╛ред

ржпржжрж┐ ржЖржкржирж┐ ржорж╛ржЗржХрзНрж░рзЛржлрзЛржи рж╣рж┐рж╕рзЗржмрзЗ ReSpeaker 2-Mics Pi HAT ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗржи, рждрж╛рж╣рж▓рзЗ ржмрзЛрждрж╛ржо рж╕ржВржпрзЛржЧ ржХрж░рж╛рж░ ржкрзНрж░ржпрж╝рзЛржЬржи ржирзЗржЗ ржХрж╛рж░ржг ржПржЗ HAT-ржП ржПржХржЯрж┐ ржмрзЛрждрж╛ржо ржЗрждрж┐ржоржзрзНржпрзЗржЗ рж╕ржВржпрзБржХрзНржд ржерж╛ржХрзЗред ржкрж░ржмрж░рзНрждрзА ржЕржВрж╢рзЗ ржпрж╛ржиред

### ржмрзЛрждрж╛ржо рж╕ржВржпрзЛржЧ ржХрж░рзБржи

ржмрзЛрждрж╛ржоржЯрж┐ ржЧрзНрж░рзЛржн ржмрзЗрж╕ рж╣рзНржпрж╛ржЯрзЗрж░ рж╕рж╛ржерзЗ рж╕ржВржпрзБржХрзНржд ржХрж░рж╛ ржпрзЗрждрзЗ ржкрж╛рж░рзЗред

#### ржХрж╛ржЬ - ржмрзЛрждрж╛ржо рж╕ржВржпрзЛржЧ ржХрж░рзБржи

![ржПржХржЯрж┐ ржЧрзНрж░рзЛржн ржмрзЛрждрж╛ржо](../../../../../translated_images/grove-button.a70cfbb809a8563681003250cf5b06d68cdcc68624f9e2f493d5a534ae2da1e5.bn.png)

1. ржЧрзНрж░рзЛржн ржХрзЗржмрж▓рзЗрж░ ржПржХ ржкрзНрж░рж╛ржирзНржд ржмрзЛрждрж╛ржо ржоржбрж┐ржЙрж▓рзЗрж░ рж╕ржХрзЗржЯрзЗ ржкрзНрж░ржмрзЗрж╢ ржХрж░рж╛ржиред ржПржЯрж┐ рж╢рзБржзрзБржорж╛рждрзНрж░ ржПржХржЯрж┐ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржжрж┐ржХрзЗржЗ ржкрзНрж░ржмрзЗрж╢ ржХрж░ржмрзЗред

1. рж░тАМрзНржпрж╛рж╕рзНржкржмрзЗрж░рж┐ ржкрж╛ржЗ ржмржирзНржз ржЕржмрж╕рзНржерж╛ржпрж╝, ржЧрзНрж░рзЛржн ржХрзЗржмрж▓рзЗрж░ ржЕржирзНржп ржкрзНрж░рж╛ржирзНрждржЯрж┐ ржкрж╛ржЗ-ржПрж░ рж╕рж╛ржерзЗ рж╕ржВржпрзБржХрзНржд ржЧрзНрж░рзЛржн ржмрзЗрж╕ рж╣рзНржпрж╛ржЯрзЗрж░ **D5** ржЪрж┐рж╣рзНржирж┐ржд ржбрж┐ржЬрж┐ржЯрж╛рж▓ рж╕ржХрзЗржЯрзЗ рж╕ржВржпрзБржХрзНржд ржХрж░рзБржиред ржПржЗ рж╕ржХрзЗржЯржЯрж┐ GPIO ржкрж┐ржирзЗрж░ ржкрж╛рж╢рзЗ ржерж╛ржХрж╛ рж╕ржХрзЗржЯрзЗрж░ рж╕рж╛рж░рж┐рж░ ржмрж╛ржо ржжрж┐ржХ ржерзЗржХрзЗ ржжрзНржмрж┐рждрзАржпрж╝ред

![ржЧрзНрж░рзЛржн ржмрзЛрждрж╛ржо D5 рж╕ржХрзЗржЯрзЗ рж╕ржВржпрзБржХрзНржд](../../../../../translated_images/pi-button.c7a1a4f55943341ce1baf1057658e9a205804d4131d258e820c93f951df0abf3.bn.png)

## ржЕржбрж┐ржУ рж░рзЗржХрж░рзНржб ржХрж░рзБржи

ржЖржкржирж┐ ржорж╛ржЗржХрзНрж░рзЛржлрзЛржи ржерзЗржХрзЗ ржкрж╛ржЗржержи ржХрзЛржб ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЕржбрж┐ржУ рж░рзЗржХрж░рзНржб ржХрж░рждрзЗ ржкрж╛рж░рзЗржиред

### ржХрж╛ржЬ - ржЕржбрж┐ржУ рж░рзЗржХрж░рзНржб ржХрж░рзБржи

1. ржкрж╛ржЗ ржЪрж╛рж▓рзБ ржХрж░рзБржи ржПржмржВ ржПржЯрж┐ ржмрзБржЯ рж╣ржУржпрж╝рж╛рж░ ржЬржирзНржп ржЕржкрзЗржХрзНрж╖рж╛ ржХрж░рзБржиред

1. ржнрж┐ржПрж╕ ржХрзЛржб ржЪрж╛рж▓рзБ ржХрж░рзБржи, рж╣ржпрж╝ рж╕рж░рж╛рж╕рж░рж┐ ржкрж╛ржЗ-ржП, ржЕржержмрж╛ рж░рж┐ржорзЛржЯ SSH ржПржХрзНрж╕ржЯрзЗржирж╢ржирзЗрж░ ржорж╛ржзрзНржпржорзЗ рж╕ржВржпрзЛржЧ ржХрж░рзЗред

1. PyAudio Pip ржкрзНржпрж╛ржХрзЗржЬрзЗ ржЕржбрж┐ржУ рж░рзЗржХрж░рзНржб ржПржмржВ ржкрзНрж▓рзЗржмрзНржпрж╛ржХ ржХрж░рж╛рж░ ржлрж╛ржВрж╢ржи рж░ржпрж╝рзЗржЫрзЗред ржПржЗ ржкрзНржпрж╛ржХрзЗржЬржЯрж┐ ржХрж┐ржЫрзБ ржЕржбрж┐ржУ рж▓рж╛ржЗржмрзНрж░рзЗрж░рж┐рж░ ржЙржкрж░ ржирж┐рж░рзНржнрж░ ржХрж░рзЗ ржпрж╛ ржкрзНрж░ржержорзЗ ржЗржирж╕рзНржЯрж▓ ржХрж░рждрзЗ рж╣ржмрзЗред ржЯрж╛рж░рзНржорж┐ржирж╛рж▓рзЗ ржирж┐ржорзНржирж▓рж┐ржЦрж┐ржд ржХржорж╛ржирзНржбржЧрзБрж▓рзЛ ржЪрж╛рж▓рж╛ржи:

    ```sh
    sudo apt update
    sudo apt install libportaudio0 libportaudio2 libportaudiocpp0 portaudio19-dev libasound2-plugins --yes 
    ```

1. PyAudio Pip ржкрзНржпрж╛ржХрзЗржЬ ржЗржирж╕рзНржЯрж▓ ржХрж░рзБржиред

    ```sh
    pip3 install pyaudio
    ```

1. `smart-timer` ржирж╛ржорзЗ ржПржХржЯрж┐ ржирждрзБржи ржлрзЛрж▓рзНржбрж╛рж░ рждрзИрж░рж┐ ржХрж░рзБржи ржПржмржВ ржПржЗ ржлрзЛрж▓рзНржбрж╛рж░рзЗ `app.py` ржирж╛ржорзЗ ржПржХржЯрж┐ ржлрж╛ржЗрж▓ ржпрзЛржЧ ржХрж░рзБржиред

1. ржПржЗ ржлрж╛ржЗрж▓рзЗрж░ ржЙржкрж░рзЗ ржирж┐ржорзНржирж▓рж┐ржЦрж┐ржд ржЗржоржкрзЛрж░рзНржЯржЧрзБрж▓рзЛ ржпрзЛржЧ ржХрж░рзБржи:

    ```python
    import io
    import pyaudio
    import time
    import wave
    
    from grove.factory import Factory
    ```

    ржПржЯрж┐ `pyaudio` ржоржбрж┐ржЙрж▓, ржУржпрж╝рзЗржн ржлрж╛ржЗрж▓ ржкрж░рж┐ржЪрж╛рж▓ржирж╛рж░ ржЬржирзНржп ржХрж┐ржЫрзБ рж╕рзНржЯрзНржпрж╛ржирзНржбрж╛рж░рзНржб ржкрж╛ржЗржержи ржоржбрж┐ржЙрж▓, ржПржмржВ `grove.factory` ржоржбрж┐ржЙрж▓ ржерзЗржХрзЗ ржПржХржЯрж┐ ржмрзЛрждрж╛ржо ржХрзНрж▓рж╛рж╕ рждрзИрж░рж┐ ржХрж░рж╛рж░ ржЬржирзНржп `Factory` ржЗржоржкрзЛрж░рзНржЯ ржХрж░рзЗред

1. ржПрж░ ржирж┐ржЪрзЗ, ржПржХржЯрж┐ ржЧрзНрж░рзЛржн ржмрзЛрждрж╛ржо рждрзИрж░рж┐ ржХрж░рж╛рж░ ржЬржирзНржп ржХрзЛржб ржпрзЛржЧ ржХрж░рзБржиред

    ржпржжрж┐ ржЖржкржирж┐ ReSpeaker 2-Mics Pi HAT ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗржи, рждрж╛рж╣рж▓рзЗ ржирж┐ржорзНржирж▓рж┐ржЦрж┐ржд ржХрзЛржб ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи:

    ```python
    # The button on the ReSpeaker 2-Mics Pi HAT
    button = Factory.getButton("GPIO-LOW", 17)
    ```

    ржПржЯрж┐ **D17** ржкрзЛрж░рзНржЯрзЗ ржПржХржЯрж┐ ржмрзЛрждрж╛ржо рждрзИрж░рж┐ ржХрж░рзЗ, ржпрзЗржЦрж╛ржирзЗ ReSpeaker 2-Mics Pi HAT-ржПрж░ ржмрзЛрждрж╛ржо рж╕ржВржпрзБржХрзНржд ржерж╛ржХрзЗред ржПржЗ ржмрзЛрждрж╛ржоржЯрж┐ ржЪрж╛ржкрж▓рзЗ ржирж┐ржорзНржи рж╕ржВржХрзЗржд ржкрж╛ржарж╛ржирзЛрж░ ржЬржирзНржп рж╕рзЗржЯ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗред

    ржпржжрж┐ ржЖржкржирж┐ ReSpeaker 2-Mics Pi HAT ржмрзНржпржмрж╣рж╛рж░ ржирж╛ ржХрж░рзЗржи ржПржмржВ ржЧрзНрж░рзЛржн ржмрзЛрждрж╛ржо ржмрзЗрж╕ рж╣рзНржпрж╛ржЯрзЗ рж╕ржВржпрзБржХрзНржд ржХрж░рзЗржи, рждрж╛рж╣рж▓рзЗ ржПржЗ ржХрзЛржб ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржиред

    ```python
    button = Factory.getButton("GPIO-HIGH", 5)
    ```

    ржПржЯрж┐ **D5** ржкрзЛрж░рзНржЯрзЗ ржПржХржЯрж┐ ржмрзЛрждрж╛ржо рждрзИрж░рж┐ ржХрж░рзЗ ржпрж╛ ржЪрж╛ржкрж▓рзЗ ржЙржЪрзНржЪ рж╕ржВржХрзЗржд ржкрж╛ржарж╛ржирзЛрж░ ржЬржирзНржп рж╕рзЗржЯ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗред

1. ржПрж░ ржирж┐ржЪрзЗ, ржЕржбрж┐ржУ ржкрж░рж┐ржЪрж╛рж▓ржирж╛рж░ ржЬржирзНржп PyAudio ржХрзНрж▓рж╛рж╕рзЗрж░ ржПржХржЯрж┐ ржЗржирж╕рзНржЯрзНржпрж╛ржирзНрж╕ рждрзИрж░рж┐ ржХрж░рзБржи:

    ```python
    audio = pyaudio.PyAudio()
    ```

1. ржорж╛ржЗржХрзНрж░рзЛржлрзЛржи ржПржмржВ рж╕рзНржкрж┐ржХрж╛рж░рзЗрж░ ржЬржирзНржп рж╣рж╛рж░рзНржбржУржпрж╝рзНржпрж╛рж░ ржХрж╛рж░рзНржб ржиржорзНржмрж░ ржШрзЛрж╖ржгрж╛ ржХрж░рзБржиред ржПржЯрж┐ рж╕рзЗржЗ ржиржорзНржмрж░ ржпрж╛ ржЖржкржирж┐ ржПржЗ ржкрж╛ржарзЗрж░ ржЖржЧрзЗ `arecord -l` ржПржмржВ `aplay -l` ржЪрж╛рж▓рж┐ржпрж╝рзЗ ржкрзЗржпрж╝рзЗржЫрж┐рж▓рзЗржиред

    ```python
    microphone_card_number = <microphone card number>
    speaker_card_number = <speaker card number>
    ```

    `<microphone card number>`-ржПрж░ ржЬрж╛ржпрж╝ржЧрж╛ржпрж╝ ржЖржкржирж╛рж░ ржорж╛ржЗржХрзНрж░рзЛржлрзЛржирзЗрж░ ржХрж╛рж░рзНржб ржиржорзНржмрж░ ржмрж╕рж╛ржиред

    `<speaker card number>`-ржПрж░ ржЬрж╛ржпрж╝ржЧрж╛ржпрж╝ ржЖржкржирж╛рж░ рж╕рзНржкрж┐ржХрж╛рж░рзЗрж░ ржХрж╛рж░рзНржб ржиржорзНржмрж░ ржмрж╕рж╛ржи, ржпрж╛ ржЖржкржирж┐ `alsa.conf` ржлрж╛ржЗрж▓рзЗ рж╕рзЗржЯ ржХрж░рзЗржЫрж┐рж▓рзЗржиред

1. ржПрж░ ржирж┐ржЪрзЗ, ржЕржбрж┐ржУ рж░рзЗржХрж░рзНржб ржПржмржВ ржкрзНрж▓рзЗржмрзНржпрж╛ржХрзЗрж░ ржЬржирзНржп рж╕рзНржпрж╛ржорзНржкрж▓ рж░рзЗржЯ ржШрзЛрж╖ржгрж╛ ржХрж░рзБржиред ржЖржкржирж┐ ржпрзЗ рж╣рж╛рж░рзНржбржУржпрж╝рзНржпрж╛рж░ ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржЫрзЗржи рждрж╛рж░ ржЙржкрж░ ржирж┐рж░рзНржнрж░ ржХрж░рзЗ ржПржЯрж┐ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рждрзЗ рж╣рждрзЗ ржкрж╛рж░рзЗред

    ```python
    rate = 48000 #48KHz
    ```

    ржпржжрж┐ ржкрж░рзЗ ржПржЗ ржХрзЛржб ржЪрж╛рж▓рж╛ржирзЛрж░ рж╕ржоржпрж╝ рж╕рзНржпрж╛ржорзНржкрж▓ рж░рзЗржЯ рж╕ржВржХрзНрж░рж╛ржирзНржд рждрзНрж░рзБржЯрж┐ ржкрж╛ржи, рждрж╛рж╣рж▓рзЗ ржПржЗ ржорж╛ржиржЯрж┐ `44100` ржмрж╛ `16000`-ржП ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рзБржиред ржорж╛ржи ржпржд ржмрзЗрж╢рж┐ рж╣ржмрзЗ, рж╢ржмрзНржжрзЗрж░ ржЧрзБржгржорж╛ржи рждржд ржнрж╛рж▓рзЛ рж╣ржмрзЗред

1. ржПрж░ ржирж┐ржЪрзЗ, `capture_audio` ржирж╛ржорзЗ ржПржХржЯрж┐ ржирждрзБржи ржлрж╛ржВрж╢ржи рждрзИрж░рж┐ ржХрж░рзБржиред ржПржЯрж┐ ржорж╛ржЗржХрзНрж░рзЛржлрзЛржи ржерзЗржХрзЗ ржЕржбрж┐ржУ рж░рзЗржХрж░рзНржб ржХрж░рж╛рж░ ржЬржирзНржп ржбрж╛ржХрж╛ рж╣ржмрзЗ:

    ```python
    def capture_audio():
    ```

1. ржПржЗ ржлрж╛ржВрж╢ржирзЗрж░ ржнрж┐рждрж░рзЗ, ржЕржбрж┐ржУ рж░рзЗржХрж░рзНржб ржХрж░рж╛рж░ ржЬржирзНржп ржирж┐ржорзНржирж▓рж┐ржЦрж┐ржд ржХрзЛржб ржпрзЛржЧ ржХрж░рзБржи:

    ```python
    stream = audio.open(format = pyaudio.paInt16,
                        rate = rate,
                        channels = 1, 
                        input_device_index = microphone_card_number,
                        input = True,
                        frames_per_buffer = 4096)

    frames = []

    while button.is_pressed():
        frames.append(stream.read(4096))

    stream.stop_stream()
    stream.close()
    ```

    ржПржЗ ржХрзЛржбржЯрж┐ PyAudio ржЕржмржЬрзЗржХрзНржЯ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржПржХржЯрж┐ ржЕржбрж┐ржУ ржЗржиржкрзБржЯ рж╕рзНржЯрзНрж░рж┐ржо ржЦрзБрж▓ржмрзЗред ржПржЗ рж╕рзНржЯрзНрж░рж┐ржоржЯрж┐ ржорж╛ржЗржХрзНрж░рзЛржлрзЛржи ржерзЗржХрзЗ 16KHz-ржП ржЕржбрж┐ржУ рж░рзЗржХрж░рзНржб ржХрж░ржмрзЗ, ржпрж╛ 4096 ржмрж╛ржЗржЯрзЗрж░ ржмрж╛ржлрж╛рж░рзЗ ржзрж╛рж░ржг ржХрж░рж╛ рж╣ржмрзЗред

    ржХрзЛржбржЯрж┐ ржЧрзНрж░рзЛржн ржмрзЛрждрж╛ржо ржЪрж╛ржкрж╛ ржерж╛ржХрж╛ ржЕржмрж╕рзНржерж╛ржпрж╝ рж▓рзБржк ржХрж░ржмрзЗ ржПржмржВ ржкрзНрж░рждрж┐ржмрж╛рж░ 4096 ржмрж╛ржЗржЯрзЗрж░ ржмрж╛ржлрж╛рж░ржЧрзБрж▓рзЛ ржПржХржЯрж┐ ржЕрзНржпрж╛рж░рзЗрждрзЗ ржкржбрж╝ржмрзЗред

    > ЁЯТБ `open` ржорзЗржержбрзЗ ржкрж╛рж╕ ржХрж░рж╛ ржЕржкрж╢ржиржЧрзБрж▓рзЛ рж╕ржорзНржкрж░рзНржХрзЗ ржЖрж░ржУ ржЬрж╛ржирждрзЗ [PyAudio ржбржХрзБржорзЗржирзНржЯрзЗрж╢ржи](https://people.csail.mit.edu/hubert/pyaudio/docs/) ржжрзЗржЦрзБржиред

    ржмрзЛрждрж╛ржо ржЫрзЗржбрж╝рзЗ ржжрж┐рж▓рзЗ, рж╕рзНржЯрзНрж░рж┐ржоржЯрж┐ ржмржирзНржз рж╣ржпрж╝рзЗ ржпрж╛ржмрзЗред

1. ржПржЗ ржлрж╛ржВрж╢ржирзЗрж░ рж╢рзЗрж╖рзЗ ржирж┐ржорзНржирж▓рж┐ржЦрж┐ржд ржХрзЛржб ржпрзЛржЧ ржХрж░рзБржи:

    ```python
    wav_buffer = io.BytesIO()
    with wave.open(wav_buffer, 'wb') as wavefile:
        wavefile.setnchannels(1)
        wavefile.setsampwidth(audio.get_sample_size(pyaudio.paInt16))
        wavefile.setframerate(rate)
        wavefile.writeframes(b''.join(frames))
        wav_buffer.seek(0)

    return wav_buffer
    ```

    ржПржЗ ржХрзЛржбржЯрж┐ ржПржХржЯрж┐ ржмрж╛ржЗржирж╛рж░рж┐ ржмрж╛ржлрж╛рж░ рждрзИрж░рж┐ ржХрж░рзЗ ржПржмржВ рж╕ржорж╕рзНржд рж░рзЗржХрж░рзНржб ржХрж░рж╛ ржЕржбрж┐ржУ ржПржХржЯрж┐ [WAV ржлрж╛ржЗрж▓](https://wikipedia.org/wiki/WAV) рж╣рж┐рж╕рзЗржмрзЗ ржПрждрзЗ рж▓рж┐ржЦрзЗред ржПржЯрж┐ ржПржХржЯрж┐ рж╕рзНржЯрзНржпрж╛ржирзНржбрж╛рж░рзНржб ржкржжрзНржзрждрж┐ ржпрж╛ ржЖржиржХржоржкрзНрж░рзЗрж╕ржб ржЕржбрж┐ржУ ржПржХржЯрж┐ ржлрж╛ржЗрж▓рзЗ рж▓рзЗржЦрж╛рж░ ржЬржирзНржп ржмрзНржпржмрж╣рзГржд рж╣ржпрж╝ред ржПржЗ ржмрж╛ржлрж╛рж░ржЯрж┐ ржкрж░рзЗ рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рж╛ рж╣ржпрж╝ред

1. ржЕржбрж┐ржУ ржмрж╛ржлрж╛рж░ ржкрзНрж▓рзЗржмрзНржпрж╛ржХ ржХрж░рж╛рж░ ржЬржирзНржп `play_audio` ржлрж╛ржВрж╢ржиржЯрж┐ ржпрзЛржЧ ржХрж░рзБржи:

    ```python
    def play_audio(buffer):
        stream = audio.open(format = pyaudio.paInt16,
                            rate = rate,
                            channels = 1,
                            output_device_index = speaker_card_number,
                            output = True)
    
        with wave.open(buffer, 'rb') as wf:
            data = wf.readframes(4096)
    
            while len(data) > 0:
                stream.write(data)
                data = wf.readframes(4096)
    
            stream.close()
    ```

    ржПржЗ ржлрж╛ржВрж╢ржиржЯрж┐ ржПржХржЯрж┐ ржЖржЙржЯржкрзБржЯ рж╕рзНржЯрзНрж░рж┐ржо ржЦрзБрж▓ржмрзЗ, ржпрж╛ ржЕржбрж┐ржУ ржкрзНрж▓рзЗржмрзНржпрж╛ржХрзЗрж░ ржЬржирзНржп ржмрзНржпржмрж╣рзГржд рж╣ржмрзЗред ржПржЯрж┐ ржЗржиржкрзБржЯ рж╕рзНржЯрзНрж░рж┐ржорзЗрж░ ржорждрзЛ ржПржХржЗ рж╕рзЗржЯрж┐ржВрж╕ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗред ржмрж╛ржлрж╛рж░ржЯрж┐ ржПржХржЯрж┐ ржУржпрж╝рзЗржн ржлрж╛ржЗрж▓ рж╣рж┐рж╕рзЗржмрзЗ ржЦрзЛрж▓рж╛ рж╣ржпрж╝ ржПржмржВ 4096 ржмрж╛ржЗржЯрзЗрж░ ржЪрж╛ржЩрзНржХрзЗ ржЖржЙржЯржкрзБржЯ рж╕рзНржЯрзНрж░рж┐ржорзЗ рж▓рзЗржЦрж╛ рж╣ржпрж╝, ржпрж╛ ржЕржбрж┐ржУ ржкрзНрж▓рзЗ ржХрж░рзЗред ржПрж░ржкрж░ рж╕рзНржЯрзНрж░рж┐ржоржЯрж┐ ржмржирзНржз рж╣ржпрж╝рзЗ ржпрж╛ржпрж╝ред

1. `capture_audio` ржлрж╛ржВрж╢ржирзЗрж░ ржирж┐ржЪрзЗ ржирж┐ржорзНржирж▓рж┐ржЦрж┐ржд ржХрзЛржб ржпрзЛржЧ ржХрж░рзБржи ржпрж╛ ржмрзЛрждрж╛ржо ржЪрж╛ржкрж╛ ржкрж░рзНржпржирзНржд рж▓рзБржк ржХрж░ржмрзЗред ржмрзЛрждрж╛ржо ржЪрж╛ржкрж▓рзЗ ржЕржбрж┐ржУ рж░рзЗржХрж░рзНржб рж╣ржмрзЗ ржПржмржВ ржкрж░рзЗ ржкрзНрж▓рзЗ рж╣ржмрзЗред

    ```python
    while True:
        while not button.is_pressed():
            time.sleep(.1)
        
        buffer = capture_audio()
        play_audio(buffer)
    ```

1. ржХрзЛржбржЯрж┐ ржЪрж╛рж▓рж╛ржиред ржмрзЛрждрж╛ржо ржЪрж╛ржкрзБржи ржПржмржВ ржорж╛ржЗржХрзНрж░рзЛржлрзЛржирзЗ ржХржерж╛ ржмрж▓рзБржиред ржХрж╛ржЬ рж╢рзЗрж╖ рж╣рж▓рзЗ ржмрзЛрждрж╛ржо ржЫрзЗржбрж╝рзЗ ржжрж┐ржи, ржПржмржВ ржЖржкржирж┐ рж░рзЗржХрж░рзНржбрж┐ржВ рж╢рзБржирждрзЗ ржкрж╛ржмрзЗржиред

    PyAudio ржЗржирж╕рзНржЯрзНржпрж╛ржирзНрж╕ рждрзИрж░рж┐ ржХрж░рж╛рж░ рж╕ржоржпрж╝ ржЖржкржирж┐ ржХрж┐ржЫрзБ ALSA рждрзНрж░рзБржЯрж┐ ржкрзЗрждрзЗ ржкрж╛рж░рзЗржиред ржПржЯрж┐ ржкрж╛ржЗ-ржПрж░ ржЕржбрж┐ржУ ржбрж┐ржнрж╛ржЗрж╕рзЗрж░ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржирзЗрж░ ржХрж╛рж░ржгрзЗ ржпрж╛ ржЖржкржирж╛рж░ ржХрж╛ржЫрзЗ ржирзЗржЗред ржПржЗ рждрзНрж░рзБржЯрж┐ржЧрзБрж▓рзЛ ржЙржкрзЗржХрзНрж╖рж╛ ржХрж░рждрзЗ ржкрж╛рж░рзЗржиред

    ```output
    pi@raspberrypi:~/smart-timer $ python3 app.py 
    ALSA lib pcm.c:2565:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.front
    ALSA lib pcm.c:2565:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.rear
    ALSA lib pcm.c:2565:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.center_lfe
    ALSA lib pcm.c:2565:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.side
    ```

    ржпржжрж┐ ржЖржкржирж┐ ржирж┐ржорзНржирж▓рж┐ржЦрж┐ржд рждрзНрж░рзБржЯрж┐ ржкрж╛ржи:

    ```output
    OSError: [Errno -9997] Invalid sample rate
    ```

    рждрж╛рж╣рж▓рзЗ `rate`-ржХрзЗ 44100 ржмрж╛ 16000-ржП ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рзБржиред

> ЁЯТБ ржЖржкржирж┐ ржПржЗ ржХрзЛржбржЯрж┐ [code-record/pi](../../../../../6-consumer/lessons/1-speech-recognition/code-record/pi) ржлрзЛрж▓рзНржбрж╛рж░рзЗ ржЦрзБржБржЬрзЗ ржкрзЗрждрзЗ ржкрж╛рж░рзЗржиред

ЁЯША ржЖржкржирж╛рж░ ржЕржбрж┐ржУ рж░рзЗржХрж░рзНржбрж┐ржВ ржкрзНрж░рзЛржЧрзНрж░рж╛ржо рж╕ржлрж▓ рж╣ржпрж╝рзЗржЫрзЗ!

---

**ржЕрж╕рзНржмрзАржХрзГрждрж┐**:  
ржПржЗ ржиржерж┐ржЯрж┐ AI ржЕржирзБржмрж╛ржж ржкрж░рж┐рж╖рзЗржмрж╛ [Co-op Translator](https://github.com/Azure/co-op-translator) ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЕржирзБржмрж╛ржж ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗред ржЖржорж░рж╛ ржпржерж╛рж╕ржорзНржнржм рж╕ржарж┐ржХрждрж╛рж░ ржЬржирзНржп ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рж┐, рждржмрзЗ ржЕржирзБржЧрзНрж░рж╣ ржХрж░рзЗ ржоржирзЗ рж░рж╛ржЦржмрзЗржи ржпрзЗ рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ ржЕржирзБржмрж╛ржжрзЗ рждрзНрж░рзБржЯрж┐ ржмрж╛ ржЕрж╕ржЩрзНржЧрждрж┐ ржерж╛ржХрждрзЗ ржкрж╛рж░рзЗред ржорзВрж▓ ржнрж╛рж╖рж╛ржпрж╝ ржерж╛ржХрж╛ ржиржерж┐ржЯрж┐ржХрзЗ ржкрзНрж░рж╛ржорж╛ржгрж┐ржХ ржЙрзОрж╕ рж╣рж┐рж╕рзЗржмрзЗ ржмрж┐ржмрзЗржЪржирж╛ ржХрж░рж╛ ржЙржЪрж┐рждред ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг рждржерзНржпрзЗрж░ ржЬржирзНржп, ржкрзЗрж╢рж╛ржжрж╛рж░ ржорж╛ржиржм ржЕржирзБржмрж╛ржж рж╕рзБржкрж╛рж░рж┐рж╢ ржХрж░рж╛ рж╣ржпрж╝ред ржПржЗ ржЕржирзБржмрж╛ржж ржмрзНржпржмрж╣рж╛рж░рзЗрж░ ржлрж▓рзЗ ржХрзЛржирзЛ ржнрзБрж▓ ржмрзЛржЭрж╛ржмрзБржЭрж┐ ржмрж╛ ржнрзБрж▓ ржмрзНржпрж╛ржЦрзНржпрж╛ рж╣рж▓рзЗ ржЖржорж░рж╛ ржжрж╛ржпрж╝ржмржжрзНржз ржерж╛ржХржм ржирж╛ред