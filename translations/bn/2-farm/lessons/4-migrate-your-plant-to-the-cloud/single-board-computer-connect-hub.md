<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "3ac42e284a7222c0e83d2d43231a364f",
  "translation_date": "2025-08-27T12:02:19+00:00",
  "source_file": "2-farm/lessons/4-migrate-your-plant-to-the-cloud/single-board-computer-connect-hub.md",
  "language_code": "bn"
}
-->
# ржЖржкржирж╛рж░ IoT ржбрж┐ржнрж╛ржЗрж╕ржХрзЗ ржХрзНрж▓рж╛ржЙржбрзЗрж░ рж╕рж╛ржерзЗ рж╕ржВржпрзБржХрзНржд ржХрж░рзБржи - ржнрж╛рж░рзНржЪрзБржпрж╝рж╛рж▓ IoT рж╣рж╛рж░рзНржбржУржпрж╝рзНржпрж╛рж░ ржПржмржВ Raspberry Pi

ржПржЗ ржкрж╛ржарзЗрж░ ржПржЗ ржЕржВрж╢рзЗ, ржЖржкржирж┐ ржЖржкржирж╛рж░ ржнрж╛рж░рзНржЪрзБржпрж╝рж╛рж▓ IoT ржбрж┐ржнрж╛ржЗрж╕ ржмрж╛ Raspberry Pi-ржХрзЗ IoT Hub-ржПрж░ рж╕рж╛ржерзЗ рж╕ржВржпрзБржХрзНржд ржХрж░ржмрзЗржи, ржЯрзЗрж▓рж┐ржорзЗржЯрзНрж░рж┐ ржкрж╛ржарж╛ржирзЛрж░ ржПржмржВ ржХржорж╛ржирзНржб ржЧрзНрж░рж╣ржг ржХрж░рж╛рж░ ржЬржирзНржпред

## ржЖржкржирж╛рж░ ржбрж┐ржнрж╛ржЗрж╕ржХрзЗ IoT Hub-ржПрж░ рж╕рж╛ржерзЗ рж╕ржВржпрзБржХрзНржд ржХрж░рзБржи

ржкрж░ржмрж░рзНрждрзА ржзрж╛ржкржЯрж┐ рж╣рж▓рзЛ ржЖржкржирж╛рж░ ржбрж┐ржнрж╛ржЗрж╕ржХрзЗ IoT Hub-ржПрж░ рж╕рж╛ржерзЗ рж╕ржВржпрзБржХрзНржд ржХрж░рж╛ред

### ржХрж╛ржЬ - IoT Hub-ржПрж░ рж╕рж╛ржерзЗ рж╕ржВржпрзБржХрзНржд ржХрж░рзБржи

1. VS Code-ржП `soil-moisture-sensor` ржлрзЛрж▓рзНржбрж╛рж░ржЯрж┐ ржЦрзБрж▓рзБржиред ржпржжрж┐ ржЖржкржирж┐ ржнрж╛рж░рзНржЪрзБржпрж╝рж╛рж▓ IoT ржбрж┐ржнрж╛ржЗрж╕ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗржи, рждржмрзЗ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзБржи ржпрзЗ ржЯрж╛рж░рзНржорж┐ржирж╛рж▓рзЗ ржнрж╛рж░рзНржЪрзБржпрж╝рж╛рж▓ ржкрж░рж┐ржмрзЗрж╢ржЯрж┐ ржЪрж╛рж▓рзБ рж░ржпрж╝рзЗржЫрзЗред

1. ржХрж┐ржЫрзБ ржЕрждрж┐рж░рж┐ржХрзНржд Pip ржкрзНржпрж╛ржХрзЗржЬ ржЗржирж╕рзНржЯрж▓ ржХрж░рзБржи:

    ```sh
    pip3 install azure-iot-device
    ```

    `azure-iot-device` рж╣рж▓рзЛ ржПржХржЯрж┐ рж▓рж╛ржЗржмрзНрж░рзЗрж░рж┐ ржпрж╛ ржЖржкржирж╛рж░ IoT Hub-ржПрж░ рж╕рж╛ржерзЗ ржпрзЛржЧрж╛ржпрзЛржЧ ржХрж░рждрзЗ ржмрзНржпржмрж╣рзГржд рж╣ржпрж╝ред

1. `app.py` ржлрж╛ржЗрж▓рзЗрж░ рж╢рзАрж░рзНрж╖рзЗ, ржмрж┐ржжрзНржпржорж╛ржи ржЗржоржкрзЛрж░рзНржЯржЧрзБрж▓рж┐рж░ ржирж┐ржЪрзЗ ржирж┐ржорзНржирж▓рж┐ржЦрж┐ржд ржЗржоржкрзЛрж░рзНржЯржЧрзБрж▓рж┐ ржпрзЛржЧ ржХрж░рзБржи:

    ```python
    from azure.iot.device import IoTHubDeviceClient, Message, MethodResponse
    ```

    ржПржЗ ржХрзЛржбржЯрж┐ IoT Hub-ржПрж░ рж╕рж╛ржерзЗ ржпрзЛржЧрж╛ржпрзЛржЧ ржХрж░рж╛рж░ ржЬржирзНржп SDK ржЗржоржкрзЛрж░рзНржЯ ржХрж░рзЗред

1. `import paho.mqtt.client as mqtt` рж▓рж╛ржЗржиржЯрж┐ рж╕рж░рж┐ржпрж╝рзЗ ржлрзЗрж▓рзБржи ржХрж╛рж░ржг ржПржЗ рж▓рж╛ржЗржмрзНрж░рзЗрж░рж┐ ржЖрж░ ржкрзНрж░ржпрж╝рзЛржЬржи ржирзЗржЗред рж╕ржорж╕рзНржд MQTT ржХрзЛржб, ржпрж╛рж░ ржоржзрзНржпрзЗ ржЯржкрж┐ржХ ржирж╛ржо, `mqtt_client` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржХрзЛржб ржПржмржВ `handle_command` ржЕржирзНрждрж░рзНржнрзБржХрзНржд, рж╕рж░рж┐ржпрж╝рзЗ ржлрзЗрж▓рзБржиред `while True:` рж▓рзБржкржЯрж┐ рж░рж╛ржЦрзБржи, рж╢рзБржзрзБ ржПржЗ рж▓рзБржкрзЗрж░ `mqtt_client.publish` рж▓рж╛ржЗржиржЯрж┐ ржорзБржЫрзЗ ржлрзЗрж▓рзБржиред

1. ржЗржоржкрзЛрж░рзНржЯ рж╕рзНржЯрзЗржЯржорзЗржирзНржЯржЧрзБрж▓рж┐рж░ ржирж┐ржЪрзЗ ржирж┐ржорзНржирж▓рж┐ржЦрж┐ржд ржХрзЛржб ржпрзЛржЧ ржХрж░рзБржи:

    ```python
    connection_string = "<connection string>"
    ```

    `<connection string>`-ржПрж░ ржЬрж╛ржпрж╝ржЧрж╛ржпрж╝ ржПржЗ ржкрж╛ржарзЗрж░ ржЖржЧрзЗ ржбрж┐ржнрж╛ржЗрж╕рзЗрж░ ржЬржирзНржп ржкрзНрж░рж╛ржкрзНржд рж╕ржВржпрзЛржЧ рж╕рзНржЯрзНрж░рж┐ржВржЯрж┐ ржкрзНрж░рждрж┐рж╕рзНржерж╛ржкржи ржХрж░рзБржиред

    > ЁЯТБ ржПржЯрж┐ рж╕рзЗрж░рж╛ ржкржжрзНржзрждрж┐ ржиржпрж╝ред рж╕ржВржпрзЛржЧ рж╕рзНржЯрзНрж░рж┐ржВ ржХржЦржирзЛржЗ рж╕рзЛрж░рзНрж╕ ржХрзЛржбрзЗ рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рж╛ ржЙржЪрж┐ржд ржиржпрж╝, ржХрж╛рж░ржг ржПржЯрж┐ рж╕рзЛрж░рзНрж╕ ржХрзЛржб ржХржирзНржЯрзНрж░рзЛрж▓рзЗ ржЪрзЗржХ ржЗржи ржХрж░рж╛ ржпрзЗрждрзЗ ржкрж╛рж░рзЗ ржПржмржВ ржпрзЗ ржХрзЗржЙ ржПржЯрж┐ ржЦрзБржБржЬрзЗ ржкрзЗрждрзЗ ржкрж╛рж░рзЗред ржЖржорж░рж╛ ржПржЦрж╛ржирзЗ рж╕рж░рж▓рждрж╛рж░ ржЬржирзНржп ржПржЯрж┐ ржХрж░ржЫрж┐ред ржЖржжрж░рзНрж╢ржнрж╛ржмрзЗ, ржЖржкржирж┐ ржкрж░рж┐ржмрзЗрж╢ ржнрзЗрж░рж┐ржпрж╝рзЗржмрж▓ ржПржмржВ [`python-dotenv`](https://pypi.org/project/python-dotenv/) ржПрж░ ржорждрзЛ ржПржХржЯрж┐ ржЯрзБрж▓ ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЗржиред ржЖржкржирж┐ ржПржЯрж┐ рж╕ржорзНржкрж░рзНржХрзЗ ржПржХржЯрж┐ ржЖрж╕ржирзНржи ржкрж╛ржарзЗ ржЖрж░ржУ рж╢рж┐ржЦржмрзЗржиред

1. ржПржЗ ржХрзЛржбрзЗрж░ ржирж┐ржЪрзЗ, IoT Hub-ржПрж░ рж╕рж╛ржерзЗ ржпрзЛржЧрж╛ржпрзЛржЧ ржХрж░рждрзЗ ржкрж╛рж░рзЗ ржПржоржи ржПржХржЯрж┐ ржбрж┐ржнрж╛ржЗрж╕ ржХрзНрж▓рж╛ржпрж╝рзЗржирзНржЯ ржЕржмржЬрзЗржХрзНржЯ рждрзИрж░рж┐ ржХрж░рждрзЗ ржПржмржВ ржПржЯрж┐ рж╕ржВржпрзБржХрзНржд ржХрж░рждрзЗ ржирж┐ржорзНржирж▓рж┐ржЦрж┐ржд ржХрзЛржб ржпрзЛржЧ ржХрж░рзБржи:

    ```python
    device_client = IoTHubDeviceClient.create_from_connection_string(connection_string)

    print('Connecting')
    device_client.connect()
    print('Connected')
    ```

1. ржПржЗ ржХрзЛржбржЯрж┐ ржЪрж╛рж▓рж╛ржиред ржЖржкржирж┐ ржжрзЗржЦрждрзЗ ржкрж╛ржмрзЗржи ржЖржкржирж╛рж░ ржбрж┐ржнрж╛ржЗрж╕ рж╕ржВржпрзБржХрзНржд рж╣ржпрж╝рзЗржЫрзЗред

    ```output
    pi@raspberrypi:~/soil-moisture-sensor $ python3 app.py 
    Connecting
    Connected
    Soil moisture: 379
    ```

## ржЯрзЗрж▓рж┐ржорзЗржЯрзНрж░рж┐ ржкрж╛ржарж╛ржи

ржПржЦржи ржЖржкржирж╛рж░ ржбрж┐ржнрж╛ржЗрж╕ рж╕ржВржпрзБржХрзНржд рж╣ржпрж╝рзЗржЫрзЗ, ржЖржкржирж┐ MQTT ржмрзНрж░рзЛржХрж╛рж░рзЗрж░ ржкрж░рж┐ржмрж░рзНрждрзЗ IoT Hub-ржП ржЯрзЗрж▓рж┐ржорзЗржЯрзНрж░рж┐ ржкрж╛ржарж╛рждрзЗ ржкрж╛рж░рзЗржиред

### ржХрж╛ржЬ - ржЯрзЗрж▓рж┐ржорзЗржЯрзНрж░рж┐ ржкрж╛ржарж╛ржи

1. `while True` рж▓рзБржкрзЗрж░ ржнрж┐рждрж░рзЗ, рж╕рзНрж▓рж┐ржкрзЗрж░ ржарж┐ржХ ржЖржЧрзЗ ржирж┐ржорзНржирж▓рж┐ржЦрж┐ржд ржХрзЛржб ржпрзЛржЧ ржХрж░рзБржи:

    ```python
    message = Message(json.dumps({ 'soil_moisture': soil_moisture }))
    device_client.send_message(message)
    ```

    ржПржЗ ржХрзЛржбржЯрж┐ ржПржХржЯрж┐ IoT Hub `Message` рждрзИрж░рж┐ ржХрж░рзЗ ржпрж╛ ржорж╛ржЯрж┐рж░ ржЖрж░рзНржжрзНрж░рждрж╛рж░ рж░рж┐ржбрж┐ржВржХрзЗ JSON рж╕рзНржЯрзНрж░рж┐ржВ рж╣рж┐рж╕рзЗржмрзЗ ржзрж╛рж░ржг ржХрж░рзЗ, рждрж╛рж░ржкрж░ ржПржЯрж┐ IoT Hub-ржП ржбрж┐ржнрж╛ржЗрж╕ ржерзЗржХрзЗ ржХрзНрж▓рж╛ржЙржб ржорзЗрж╕рзЗржЬ рж╣рж┐рж╕рзЗржмрзЗ ржкрж╛ржарж╛ржпрж╝ред

## ржХржорж╛ржирзНржб ржкрж░рж┐ржЪрж╛рж▓ржирж╛ ржХрж░рзБржи

ржЖржкржирж╛рж░ ржбрж┐ржнрж╛ржЗрж╕ржХрзЗ рж╕рж╛рж░рзНржнрж╛рж░ ржХрзЛржб ржерзЗржХрзЗ ржПржХржЯрж┐ ржХржорж╛ржирзНржб ржкрж░рж┐ржЪрж╛рж▓ржирж╛ ржХрж░рждрзЗ рж╣ржмрзЗ ржпрж╛ рж░рж┐рж▓рзЗ ржирж┐ржпрж╝ржирзНрждрзНрж░ржг ржХрж░рзЗред ржПржЯрж┐ ржПржХржЯрж┐ ржбрж╛ржЗрж░рзЗржХрзНржЯ ржорзЗржержб рж░рж┐ржХрзЛржпрж╝рзЗрж╕рзНржЯ рж╣рж┐рж╕рзЗржмрзЗ ржкрж╛ржарж╛ржирзЛ рж╣ржпрж╝ред

## ржХрж╛ржЬ - ржПржХржЯрж┐ ржбрж╛ржЗрж░рзЗржХрзНржЯ ржорзЗржержб рж░рж┐ржХрзЛржпрж╝рзЗрж╕рзНржЯ ржкрж░рж┐ржЪрж╛рж▓ржирж╛ ржХрж░рзБржи

1. `while True` рж▓рзБржкрзЗрж░ ржЖржЧрзЗ ржирж┐ржорзНржирж▓рж┐ржЦрж┐ржд ржХрзЛржб ржпрзЛржЧ ржХрж░рзБржи:

    ```python
    def handle_method_request(request):
        print("Direct method received - ", request.name)
    
        if request.name == "relay_on":
            relay.on()
        elif request.name == "relay_off":
            relay.off()    
    ```

    ржПржЯрж┐ ржПржХржЯрж┐ ржорзЗржержб, `handle_method_request`, рж╕ржВржЬрзНржЮрж╛ржпрж╝рж┐ржд ржХрж░рзЗ ржпрж╛ IoT Hub ржжрзНржмрж╛рж░рж╛ ржПржХржЯрж┐ ржбрж╛ржЗрж░рзЗржХрзНржЯ ржорзЗржержб ржХрж▓ ржХрж░рж╛ рж╣рж▓рзЗ ржбрж╛ржХрж╛ рж╣ржмрзЗред ржкрзНрж░рждрж┐ржЯрж┐ ржбрж╛ржЗрж░рзЗржХрзНржЯ ржорзЗржержбрзЗрж░ ржПржХржЯрж┐ ржирж╛ржо ржерж╛ржХрзЗ, ржПржмржВ ржПржЗ ржХрзЛржбржЯрж┐ `relay_on` ржирж╛ржоржХ ржПржХржЯрж┐ ржорзЗржержб ржЖрж╢рж╛ ржХрж░рзЗ рж░рж┐рж▓рзЗ ржЪрж╛рж▓рзБ ржХрж░рждрзЗ, ржПржмржВ `relay_off` ржирж╛ржоржХ ржПржХржЯрж┐ ржорзЗржержб ржЖрж╢рж╛ ржХрж░рзЗ рж░рж┐рж▓рзЗ ржмржирзНржз ржХрж░рждрзЗред

    > ЁЯТБ ржПржЯрж┐ ржПржХржЯрж┐ ржПржХржХ ржбрж╛ржЗрж░рзЗржХрзНржЯ ржорзЗржержб рж░рж┐ржХрзЛржпрж╝рзЗрж╕рзНржЯрзЗ ржмрж╛рж╕рзНрждржмрж╛ржпрж╝рж┐ржд рж╣рждрзЗ ржкрж╛рж░рзЗ, ржпрзЗржЦрж╛ржирзЗ рж░рж┐рж▓рзЗрж░ ржХрж╛ржЩрзНржХрзНрж╖рж┐ржд ржЕржмрж╕рзНржерж╛ржЯрж┐ ржПржХржЯрж┐ ржкрзЗ-рж▓рзЛржбрзЗ ржкрж╛рж╕ ржХрж░рж╛ рж╣ржпрж╝ ржпрж╛ ржорзЗржержб рж░рж┐ржХрзЛржпрж╝рзЗрж╕рзНржЯрзЗрж░ рж╕рж╛ржерзЗ ржкрж╛рж╕ ржХрж░рж╛ ржпрж╛ржпрж╝ ржПржмржВ `request` ржЕржмржЬрзЗржХрзНржЯ ржерзЗржХрзЗ ржкрж╛ржУржпрж╝рж╛ ржпрж╛ржпрж╝ред

1. ржбрж╛ржЗрж░рзЗржХрзНржЯ ржорзЗржержбржЧрзБрж▓рж┐рж░ ржПржХржЯрж┐ рж░рзЗрж╕ржкржирзНрж╕ ржкрзНрж░ржпрж╝рзЛржЬржи ржпрж╛ ржХрж▓рж┐ржВ ржХрзЛржбржХрзЗ ржЬрж╛ржирж╛ржпрж╝ ржпрзЗ ржПржЯрж┐ ржкрж░рж┐ржЪрж╛рж▓рж┐ржд рж╣ржпрж╝рзЗржЫрзЗред `handle_method_request` ржлрж╛ржВрж╢ржирзЗрж░ рж╢рзЗрж╖рзЗ ржирж┐ржорзНржирж▓рж┐ржЦрж┐ржд ржХрзЛржб ржпрзЛржЧ ржХрж░рзБржи ржпрж╛ рж░рж┐ржХрзЛржпрж╝рзЗрж╕рзНржЯрзЗрж░ ржЬржирзНржп ржПржХржЯрж┐ рж░рзЗрж╕ржкржирзНрж╕ рждрзИрж░рж┐ ржХрж░рзЗ:

    ```python
    method_response = MethodResponse.create_from_method_request(request, 200)
    device_client.send_method_response(method_response)
    ```

    ржПржЗ ржХрзЛржбржЯрж┐ ржПржХржЯрж┐ HTTP рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕ ржХрзЛржб 200 рж╕рж╣ ржбрж╛ржЗрж░рзЗржХрзНржЯ ржорзЗржержб рж░рж┐ржХрзЛржпрж╝рзЗрж╕рзНржЯрзЗрж░ ржЬржирзНржп ржПржХржЯрж┐ рж░рзЗрж╕ржкржирзНрж╕ ржкрж╛ржарж╛ржпрж╝ ржПржмржВ ржПржЯрж┐ IoT Hub-ржП ржлрзЗрж░ржд ржкрж╛ржарж╛ржпрж╝ред

1. ржПржЗ ржлрж╛ржВрж╢ржи рж╕ржВржЬрзНржЮрж╛рж░ ржирж┐ржЪрзЗ ржирж┐ржорзНржирж▓рж┐ржЦрж┐ржд ржХрзЛржб ржпрзЛржЧ ржХрж░рзБржи:

    ```python
    device_client.on_method_request_received = handle_method_request
    ```

    ржПржЗ ржХрзЛржбржЯрж┐ IoT Hub ржХрзНрж▓рж╛ржпрж╝рзЗржирзНржЯржХрзЗ ржмрж▓рзЗ ржпрзЗ ржПржХржЯрж┐ ржбрж╛ржЗрж░рзЗржХрзНржЯ ржорзЗржержб ржХрж▓ ржХрж░рж╛ рж╣рж▓рзЗ `handle_method_request` ржлрж╛ржВрж╢ржиржЯрж┐ ржХрж▓ ржХрж░рждрзЗред

> ЁЯТБ ржЖржкржирж┐ ржПржЗ ржХрзЛржбржЯрж┐ [code/pi](../../../../../2-farm/lessons/4-migrate-your-plant-to-the-cloud/code/pi) ржмрж╛ [code/virtual-device](../../../../../2-farm/lessons/4-migrate-your-plant-to-the-cloud/code/virtual-device) ржлрзЛрж▓рзНржбрж╛рж░рзЗ ржЦрзБржБржЬрзЗ ржкрзЗрждрзЗ ржкрж╛рж░рзЗржиред

ЁЯША ржЖржкржирж╛рж░ ржорж╛ржЯрж┐рж░ ржЖрж░рзНржжрзНрж░рждрж╛ рж╕рзЗржирзНрж╕рж░ ржкрзНрж░рзЛржЧрзНрж░рж╛ржоржЯрж┐ IoT Hub-ржПрж░ рж╕рж╛ржерзЗ рж╕ржВржпрзБржХрзНржд рж╣ржпрж╝рзЗржЫрзЗ!

---

**ржЕрж╕рзНржмрзАржХрзГрждрж┐**:  
ржПржЗ ржиржерж┐ржЯрж┐ AI ржЕржирзБржмрж╛ржж ржкрж░рж┐рж╖рзЗржмрж╛ [Co-op Translator](https://github.com/Azure/co-op-translator) ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЕржирзБржмрж╛ржж ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗред ржЖржорж░рж╛ ржпржерж╛рж╕рж╛ржзрзНржп рж╕ржарж┐ржХрждрж╛ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рж┐, рждржмрзЗ ржЕржирзБржЧрзНрж░рж╣ ржХрж░рзЗ ржоржирзЗ рж░рж╛ржЦржмрзЗржи ржпрзЗ рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ ржЕржирзБржмрж╛ржжрзЗ рждрзНрж░рзБржЯрж┐ ржмрж╛ ржЕрж╕ржЩрзНржЧрждрж┐ ржерж╛ржХрждрзЗ ржкрж╛рж░рзЗред ржорзВрж▓ ржнрж╛рж╖рж╛ржпрж╝ ржерж╛ржХрж╛ ржиржерж┐ржЯрж┐ржХрзЗ ржкрзНрж░рж╛ржорж╛ржгрж┐ржХ ржЙрзОрж╕ рж╣рж┐рж╕рзЗржмрзЗ ржмрж┐ржмрзЗржЪржирж╛ ржХрж░рж╛ ржЙржЪрж┐рждред ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг рждржерзНржпрзЗрж░ ржЬржирзНржп, ржкрзЗрж╢рж╛ржжрж╛рж░ ржорж╛ржиржм ржЕржирзБржмрж╛ржж рж╕рзБржкрж╛рж░рж┐рж╢ ржХрж░рж╛ рж╣ржпрж╝ред ржПржЗ ржЕржирзБржмрж╛ржж ржмрзНржпржмрж╣рж╛рж░рзЗрж░ ржлрж▓рзЗ ржХрзЛржирзЛ ржнрзБрж▓ ржмрзЛржЭрж╛ржмрзБржЭрж┐ ржмрж╛ ржнрзБрж▓ ржмрзНржпрж╛ржЦрзНржпрж╛ рж╣рж▓рзЗ ржЖржорж░рж╛ ржжрж╛ржпрж╝ржмржжрзНржз ржерж╛ржХржм ржирж╛ред