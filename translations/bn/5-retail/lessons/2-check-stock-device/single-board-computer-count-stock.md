<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "9c4320311c0f2c1884a6a21265d98a51",
  "translation_date": "2025-08-27T09:56:42+00:00",
  "source_file": "5-retail/lessons/2-check-stock-device/single-board-computer-count-stock.md",
  "language_code": "bn"
}
-->
# ржЖржкржирж╛рж░ IoT ржбрж┐ржнрж╛ржЗрж╕ ржерзЗржХрзЗ рж╕рзНржЯржХ ржЧржгржирж╛ ржХрж░рзБржи - ржнрж╛рж░рзНржЪрзБржпрж╝рж╛рж▓ IoT рж╣рж╛рж░рзНржбржУржпрж╝рзНржпрж╛рж░ ржПржмржВ рж░рж╛рж╕рзНржкржмрзЗрж░рж┐ ржкрж╛ржЗ

ржПржХржЯрж┐ ржЫржмрж┐рждрзЗ рж╕рзНржЯржХ ржЧржгржирж╛рж░ ржЬржирзНржп ржнржмрж┐рж╖рзНржпржжрзНржмрж╛ржгрзА ржПржмржВ рждрж╛ржжрзЗрж░ ржмрж╛ржЙржирзНржбрж┐ржВ ржмржХрзНрж╕рзЗрж░ рж╕ржВржорж┐рж╢рзНрж░ржг ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржпрзЗрждрзЗ ржкрж╛рж░рзЗред

## ржмрж╛ржЙржирзНржбрж┐ржВ ржмржХрзНрж╕ ржжрзЗржЦрж╛ржи

ржбрж┐ржмрж╛ржЧрж┐ржВржпрж╝рзЗрж░ ржПржХржЯрж┐ рж╕рж╣рж╛ржпрж╝ржХ ржзрж╛ржк рж╣рж┐рж╕рзЗржмрзЗ, ржЖржкржирж┐ рж╢рзБржзрзБ ржмрж╛ржЙржирзНржбрж┐ржВ ржмржХрзНрж╕ ржкрзНрж░рж┐ржирзНржЯ ржХрж░рж╛ржЗ ржиржпрж╝, ржмрж░ржВ ржЫржмрж┐рждрзЗ ржмрж╛ржЙржирзНржбрж┐ржВ ржмржХрзНрж╕ ржЖржБржХрждрзЗржУ ржкрж╛рж░рзЗржи ржпрж╛ ржЫржмрж┐ ржХрзНржпрж╛ржкржЪрж╛рж░ ржХрж░рж╛рж░ рж╕ржоржпрж╝ ржбрж┐рж╕рзНржХрзЗ рж▓рзЗржЦрж╛ рж╣ржпрж╝рзЗржЫрж┐рж▓ред

### ржХрж╛ржЬ - ржмрж╛ржЙржирзНржбрж┐ржВ ржмржХрзНрж╕ ржкрзНрж░рж┐ржирзНржЯ ржХрж░рзБржи

1. ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзБржи ржпрзЗ `stock-counter` ржкрзНрж░ржХрж▓рзНржкржЯрж┐ VS Code-ржП ржЦрзЛрж▓рж╛ ржЖржЫрзЗ ржПржмржВ ржЖржкржирж┐ ржпржжрж┐ ржнрж╛рж░рзНржЪрзБржпрж╝рж╛рж▓ IoT ржбрж┐ржнрж╛ржЗрж╕ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗржи рждржмрзЗ ржнрж╛рж░рзНржЪрзБржпрж╝рж╛рж▓ ржкрж░рж┐ржмрзЗрж╢ржЯрж┐ рж╕ржХрзНрж░рж┐ржпрж╝ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗред

1. `for` рж▓рзБржкрзЗрж░ ржоржзрзНржпрзЗ `print` рж╕рзНржЯрзЗржЯржорзЗржирзНржЯржЯрж┐ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рзЗ ржирж┐ржорзНржирж▓рж┐ржЦрж┐ржд ржХрзЛржбржЯрж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи, ржпрж╛рждрзЗ ржмрж╛ржЙржирзНржбрж┐ржВ ржмржХрзНрж╕ржЧрзБрж▓рзЛ ржХржирж╕рзЛрж▓рзЗ ржкрзНрж░рж┐ржирзНржЯ рж╣ржпрж╝:

    ```python
    print(f'{prediction.tag_name}:\t{prediction.probability * 100:.2f}%\t{prediction.bounding_box}')
    ```

1. ржЕрзНржпрж╛ржкржЯрж┐ ржЪрж╛рж▓рж╛ржи ржПржмржВ ржХрзНржпрж╛ржорзЗрж░рж╛ рждрж╛ржХ ржХрж░рзБржи рж╢рзЗрж▓ржлрзЗ ржерж╛ржХрж╛ ржХрж┐ржЫрзБ рж╕рзНржЯржХрзЗрж░ ржжрж┐ржХрзЗред ржмрж╛ржЙржирзНржбрж┐ржВ ржмржХрзНрж╕ржЧрзБрж▓рзЛ ржХржирж╕рзЛрж▓рзЗ ржкрзНрж░рж┐ржирзНржЯ рж╣ржмрзЗ, ржпрзЗржЦрж╛ржирзЗ ржмрж╛ржо, ржЙржкрж░рзЗрж░, ржкрзНрж░рж╕рзНрже ржПржмржВ ржЙржЪрзНржЪрждрж╛рж░ ржорж╛ржи 0-1 ржПрж░ ржоржзрзНржпрзЗ ржерж╛ржХржмрзЗред

    ```output
    pi@raspberrypi:~/stock-counter $ python3 app.py 
    tomato paste:   33.42%  {'additional_properties': {}, 'left': 0.3455171, 'top': 0.09916268, 'width': 0.14175442, 'height': 0.29405564}
    tomato paste:   34.41%  {'additional_properties': {}, 'left': 0.48283678, 'top': 0.10242918, 'width': 0.11782813, 'height': 0.27467814}
    tomato paste:   31.25%  {'additional_properties': {}, 'left': 0.4923783, 'top': 0.35007596, 'width': 0.13668466, 'height': 0.28304994}
    tomato paste:   31.05%  {'additional_properties': {}, 'left': 0.36416405, 'top': 0.37494493, 'width': 0.14024884, 'height': 0.26880276}
    ```

### ржХрж╛ржЬ - ржЫржмрж┐рждрзЗ ржмрж╛ржЙржирзНржбрж┐ржВ ржмржХрзНрж╕ ржЖржБржХрзБржи

1. Pip ржкрзНржпрж╛ржХрзЗржЬ [Pillow](https://pypi.org/project/Pillow/) ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЫржмрж┐рждрзЗ ржЖржБржХрж╛ рж╕ржорзНржнржмред ржПржЯрж┐ ржЗржирж╕рзНржЯрж▓ ржХрж░рждрзЗ ржирж┐ржорзНржирж▓рж┐ржЦрж┐ржд ржХржорж╛ржирзНржбржЯрж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзБржи:

    ```sh
    pip3 install pillow
    ```

    ржЖржкржирж┐ ржпржжрж┐ ржнрж╛рж░рзНржЪрзБржпрж╝рж╛рж▓ IoT ржбрж┐ржнрж╛ржЗрж╕ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗржи, рждржмрзЗ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзБржи ржпрзЗ ржПржЯрж┐ рж╕ржХрзНрж░рж┐ржпрж╝ ржнрж╛рж░рзНржЪрзБржпрж╝рж╛рж▓ ржкрж░рж┐ржмрзЗрж╢рзЗрж░ ржнрж┐рждрж░ ржерзЗржХрзЗ ржЪрж╛рж▓рж╛ржирзЛ рж╣ржпрж╝рзЗржЫрзЗред

1. `app.py` ржлрж╛ржЗрж▓рзЗрж░ рж╢рзАрж░рзНрж╖рзЗ ржирж┐ржорзНржирж▓рж┐ржЦрж┐ржд ржЗржоржкрзЛрж░рзНржЯ рж╕рзНржЯрзЗржЯржорзЗржирзНржЯ ржпрзЛржЧ ржХрж░рзБржи:

    ```python
    from PIL import Image, ImageDraw, ImageColor
    ```

    ржПржЯрж┐ ржЫржмрж┐рж░ рж╕ржорзНржкрж╛ржжржирж╛рж░ ржЬржирзНржп ржкрзНрж░ржпрж╝рзЛржЬржирзАржпрж╝ ржХрзЛржб ржЗржоржкрзЛрж░рзНржЯ ржХрж░рзЗред

1. `app.py` ржлрж╛ржЗрж▓рзЗрж░ рж╢рзЗрж╖рзЗ ржирж┐ржорзНржирж▓рж┐ржЦрж┐ржд ржХрзЛржб ржпрзЛржЧ ржХрж░рзБржи:

    ```python
    with Image.open('image.jpg') as im:
        draw = ImageDraw.Draw(im)
    
        for prediction in predictions:
            scale_left = prediction.bounding_box.left
            scale_top = prediction.bounding_box.top
            scale_right = prediction.bounding_box.left + prediction.bounding_box.width
            scale_bottom = prediction.bounding_box.top + prediction.bounding_box.height
            
            left = scale_left * im.width
            top = scale_top * im.height
            right = scale_right * im.width
            bottom = scale_bottom * im.height
    
            draw.rectangle([left, top, right, bottom], outline=ImageColor.getrgb('red'), width=2)
    
        im.save('image.jpg')
    ```

    ржПржЗ ржХрзЛржбржЯрж┐ ржкрзВрж░рзНржмрзЗ рж╕ржВрж░ржХрзНрж╖рж┐ржд ржЫржмрж┐ржЯрж┐ рж╕ржорзНржкрж╛ржжржирж╛рж░ ржЬржирзНржп ржЦрзБрж▓рзЗред ржПржЯрж┐ ржнржмрж┐рж╖рзНржпржжрзНржмрж╛ржгрзАржЧрзБрж▓рзЛрж░ ржоржзрзНржп ржжрж┐ржпрж╝рзЗ рж▓рзБржк ржХрж░рзЗ ржмрж╛ржЙржирзНржбрж┐ржВ ржмржХрзНрж╕ржЧрзБрж▓рзЛ ржкрж╛ржпрж╝ ржПржмржВ 0-1 ржПрж░ ржорж╛ржи ржерзЗржХрзЗ ржирж┐ржЪрзЗрж░ ржбрж╛ржиржжрж┐ржХрзЗрж░ ржХрзЛржЕрж░рзНржбрж┐ржирзЗржЯ ржЧржгржирж╛ ржХрж░рзЗред ржПржЧрзБрж▓рзЛ ржЫржмрж┐рж░ ржХрзЛржЕрж░рзНржбрж┐ржирзЗржЯрзЗ рж░рзВржкрж╛ржирзНрждрж░рж┐ржд рж╣ржпрж╝ ржЫржмрж┐рж░ ржкрзНрж░рж╛рж╕ржЩрзНржЧрж┐ржХ ржорж╛рждрзНрж░рж╛рж░ рж╕рж╛ржерзЗ ржЧрзБржг ржХрж░рзЗред ржЙржжрж╛рж╣рж░ржгрж╕рзНржмрж░рзВржк, ржпржжрж┐ ржмрж╛ржо ржорж╛ржиржЯрж┐ 0.5 рж╣ржпрж╝ ржПржмржВ ржЫржмрж┐ржЯрж┐ 600 ржкрж┐ржХрзНрж╕рзЗрж▓ ржЪржУржбрж╝рж╛ рж╣ржпрж╝, ржПржЯрж┐ 300-ржП рж░рзВржкрж╛ржирзНрждрж░рж┐ржд рж╣ржмрзЗ (0.5 x 600 = 300)ред

    ржкрзНрж░рждрж┐ржЯрж┐ ржмрж╛ржЙржирзНржбрж┐ржВ ржмржХрзНрж╕ ржЫржмрж┐рждрзЗ ржПржХржЯрж┐ рж▓рж╛рж▓ рж░рзЗржЦрж╛ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЖржБржХрж╛ рж╣ржпрж╝ред рж╢рзЗрж╖рзЗ рж╕ржорзНржкрж╛ржжрж┐ржд ржЫржмрж┐ржЯрж┐ рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рж╛ рж╣ржпрж╝, ржорзВрж▓ ржЫржмрж┐рж░ ржЙржкрж░ рж▓рж┐ржЦрзЗред

1. ржЕрзНржпрж╛ржкржЯрж┐ ржЪрж╛рж▓рж╛ржи ржПржмржВ ржХрзНржпрж╛ржорзЗрж░рж╛ рждрж╛ржХ ржХрж░рзБржи рж╢рзЗрж▓ржлрзЗ ржерж╛ржХрж╛ ржХрж┐ржЫрзБ рж╕рзНржЯржХрзЗрж░ ржжрж┐ржХрзЗред ржЖржкржирж┐ VS Code ржПржХрзНрж╕ржкрзНрж▓рзЛрж░рж╛рж░рзЗ `image.jpg` ржлрж╛ржЗрж▓ржЯрж┐ ржжрзЗржЦрждрзЗ ржкрж╛ржмрзЗржи ржПржмржВ ржПржЯрж┐ ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзЗ ржмрж╛ржЙржирзНржбрж┐ржВ ржмржХрзНрж╕ржЧрзБрж▓рзЛ ржжрзЗржЦрждрзЗ ржкрж╛рж░ржмрзЗржиред

    ![4ржЯрж┐ ржЯржорзЗржЯрзЛ ржкрзЗрж╕рзНржЯрзЗрж░ ржХрзНржпрж╛ржи, ржкрзНрж░рждрж┐ржЯрж┐рж░ ржЪрж╛рж░ржкрж╛рж╢рзЗ ржмрж╛ржЙржирзНржбрж┐ржВ ржмржХрзНрж╕](../../../../../translated_images/rpi-stock-with-bounding-boxes.b5540e2ecb7cd49f1271828d3be412671d950e87625c5597ea97c90f11e01097.bn.jpg)

## рж╕рзНржЯржХ ржЧржгржирж╛ ржХрж░рзБржи

ржЙржкрж░рзЗрж░ ржЫржмрж┐рждрзЗ, ржмрж╛ржЙржирзНржбрж┐ржВ ржмржХрзНрж╕ржЧрзБрж▓рзЛ рж╕рж╛ржорж╛ржирзНржп ржУржнрж╛рж░рж▓рзНржпрж╛ржк ржХрж░рзЗржЫрзЗред ржпржжрж┐ ржПржЗ ржУржнрж╛рж░рж▓рзНржпрж╛ржк ржЕржирзЗржХ ржмрзЗрж╢рж┐ рж╣ржпрж╝, рждрж╛рж╣рж▓рзЗ ржмрж╛ржЙржирзНржбрж┐ржВ ржмржХрзНрж╕ржЧрзБрж▓рзЛ ржПржХржЗ ржмрж╕рзНрждрзБ ржирж┐рж░рзНржжрзЗрж╢ ржХрж░рждрзЗ ржкрж╛рж░рзЗред рж╕ржарж┐ржХржнрж╛ржмрзЗ ржмрж╕рзНрждрзБржЧрзБрж▓рзЛ ржЧржгржирж╛ ржХрж░рждрзЗ, ржЖржкржирж╛ржХрзЗ ржЙрж▓рзНрж▓рзЗржЦржпрзЛржЧрзНржп ржУржнрж╛рж░рж▓рзНржпрж╛ржкржпрзБржХрзНржд ржмржХрзНрж╕ржЧрзБрж▓рзЛ ржЙржкрзЗржХрзНрж╖рж╛ ржХрж░рждрзЗ рж╣ржмрзЗред

### ржХрж╛ржЬ - ржУржнрж╛рж░рж▓рзНржпрж╛ржк ржЙржкрзЗржХрзНрж╖рж╛ ржХрж░рзЗ рж╕рзНржЯржХ ржЧржгржирж╛ ржХрж░рзБржи

1. Pip ржкрзНржпрж╛ржХрзЗржЬ [Shapely](https://pypi.org/project/Shapely/) ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЗржирзНржЯрж╛рж░рж╕рзЗржХрж╢ржи ржЧржгржирж╛ ржХрж░рж╛ рж╕ржорзНржнржмред ржЖржкржирж┐ ржпржжрж┐ рж░рж╛рж╕рзНржкржмрзЗрж░рж┐ ржкрж╛ржЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗржи, рждржмрзЗ ржкрзНрж░ржержорзЗ ржПржХржЯрж┐ рж▓рж╛ржЗржмрзНрж░рзЗрж░рж┐ ржбрж┐ржкрзЗржиржбрзЗржирзНрж╕рж┐ ржЗржирж╕рзНржЯрж▓ ржХрж░рждрзЗ рж╣ржмрзЗ:

    ```sh
    sudo apt install libgeos-dev
    ```

1. Shapely Pip ржкрзНржпрж╛ржХрзЗржЬ ржЗржирж╕рзНржЯрж▓ ржХрж░рзБржи:

    ```sh
    pip3 install shapely
    ```

    ржЖржкржирж┐ ржпржжрж┐ ржнрж╛рж░рзНржЪрзБржпрж╝рж╛рж▓ IoT ржбрж┐ржнрж╛ржЗрж╕ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗржи, рждржмрзЗ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзБржи ржпрзЗ ржПржЯрж┐ рж╕ржХрзНрж░рж┐ржпрж╝ ржнрж╛рж░рзНржЪрзБржпрж╝рж╛рж▓ ржкрж░рж┐ржмрзЗрж╢рзЗрж░ ржнрж┐рждрж░ ржерзЗржХрзЗ ржЪрж╛рж▓рж╛ржирзЛ рж╣ржпрж╝рзЗржЫрзЗред

1. `app.py` ржлрж╛ржЗрж▓рзЗрж░ рж╢рзАрж░рзНрж╖рзЗ ржирж┐ржорзНржирж▓рж┐ржЦрж┐ржд ржЗржоржкрзЛрж░рзНржЯ рж╕рзНржЯрзЗржЯржорзЗржирзНржЯ ржпрзЛржЧ ржХрж░рзБржи:

    ```python
    from shapely.geometry import Polygon
    ```

    ржПржЯрж┐ ржУржнрж╛рж░рж▓рзНржпрж╛ржк ржЧржгржирж╛рж░ ржЬржирзНржп ржкрж▓рж┐ржЧржи рждрзИрж░рж┐ ржХрж░рждрзЗ ржкрзНрж░ржпрж╝рзЛржЬржирзАржпрж╝ ржХрзЛржб ржЗржоржкрзЛрж░рзНржЯ ржХрж░рзЗред

1. ржмрж╛ржЙржирзНржбрж┐ржВ ржмржХрзНрж╕ ржЖржБржХрж╛рж░ ржХрзЛржбрзЗрж░ ржЙржкрж░рзЗ ржирж┐ржорзНржирж▓рж┐ржЦрж┐ржд ржХрзЛржб ржпрзЛржЧ ржХрж░рзБржи:

    ```python
    overlap_threshold = 0.20
    ```

    ржПржЯрж┐ ржУржнрж╛рж░рж▓рзНржпрж╛ржкрзЗрж░ ржЕржирзБржорзЛржжрж┐ржд рж╢рждрж╛ржВрж╢ рж╕ржВржЬрзНржЮрж╛ржпрж╝рж┐ржд ржХрж░рзЗ, ржпрж╛ ржмрж╛ржЙржирзНржбрж┐ржВ ржмржХрзНрж╕ржЧрзБрж▓рзЛ ржПржХржЗ ржмрж╕рзНрждрзБ рж╣рж┐рж╕рзЗржмрзЗ ржмрж┐ржмрзЗржЪрж┐ржд рж╣ржмрзЗред 0.20 ржорж╛ржирзЗ 20% ржУржнрж╛рж░рж▓рзНржпрж╛ржкред

1. Shapely ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржУржнрж╛рж░рж▓рзНржпрж╛ржк ржЧржгржирж╛ ржХрж░рждрзЗ, ржмрж╛ржЙржирзНржбрж┐ржВ ржмржХрзНрж╕ржЧрзБрж▓рзЛржХрзЗ Shapely ржкрж▓рж┐ржЧржирзЗ рж░рзВржкрж╛ржирзНрждрж░ ржХрж░рждрзЗ рж╣ржмрзЗред ржПржЯрж┐ ржХрж░рж╛рж░ ржЬржирзНржп ржирж┐ржорзНржирж▓рж┐ржЦрж┐ржд ржлрж╛ржВрж╢ржи ржпрзЛржЧ ржХрж░рзБржи:

    ```python
    def create_polygon(prediction):
        scale_left = prediction.bounding_box.left
        scale_top = prediction.bounding_box.top
        scale_right = prediction.bounding_box.left + prediction.bounding_box.width
        scale_bottom = prediction.bounding_box.top + prediction.bounding_box.height
    
        return Polygon([(scale_left, scale_top), (scale_right, scale_top), (scale_right, scale_bottom), (scale_left, scale_bottom)])
    ```

    ржПржЯрж┐ ржПржХржЯрж┐ ржнржмрж┐рж╖рзНржпржжрзНржмрж╛ржгрзАрж░ ржмрж╛ржЙржирзНржбрж┐ржВ ржмржХрзНрж╕ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржПржХржЯрж┐ ржкрж▓рж┐ржЧржи рждрзИрж░рж┐ ржХрж░рзЗред

1. ржУржнрж╛рж░рж▓рзНржпрж╛ржкржпрзБржХрзНржд ржмрж╕рзНрждрзБржЧрзБрж▓рзЛ рж╕рж░рж╛ржирзЛрж░ рж▓ржЬрж┐ржХржЯрж┐ рж╕ржорж╕рзНржд ржмрж╛ржЙржирзНржбрж┐ржВ ржмржХрзНрж╕ рждрзБрж▓ржирж╛ ржХрж░рзЗред ржпржжрж┐ ржХрзЛржирзЛ ржЬрзЛржбрж╝рж╛ ржнржмрж┐рж╖рзНржпржжрзНржмрж╛ржгрзАрж░ ржмрж╛ржЙржирзНржбрж┐ржВ ржмржХрзНрж╕ржЧрзБрж▓рзЛ ржУржнрж╛рж░рж▓рзНржпрж╛ржк ржерзНрж░рзЗрж╢рж╣рзЛрж▓рзНржбрзЗрж░ ржЪрзЗржпрж╝рзЗ ржмрзЗрж╢рж┐ рж╣ржпрж╝, рждрж╛рж╣рж▓рзЗ ржПржХржЯрж┐ ржнржмрж┐рж╖рзНржпржжрзНржмрж╛ржгрзА ржорзБржЫрзЗ ржлрзЗрж▓рж╛ рж╣ржпрж╝ред рждрзБрж▓ржирж╛ ржХрж░рж╛рж░ ржЬржирзНржп, ржкрзНрж░ржержо ржнржмрж┐рж╖рзНржпржжрзНржмрж╛ржгрзАржЯрж┐ ржжрзНржмрж┐рждрзАржпрж╝, рждрзГрждрзАржпрж╝, ржЪрждрзБрж░рзНрже ржЗрждрзНржпрж╛ржжрж┐рж░ рж╕рж╛ржерзЗ рждрзБрж▓ржирж╛ ржХрж░рж╛ рж╣ржпрж╝, рждрж╛рж░ржкрж░ ржжрзНржмрж┐рждрзАржпрж╝ржЯрж┐ рждрзГрждрзАржпрж╝, ржЪрждрзБрж░рзНрже ржЗрждрзНржпрж╛ржжрж┐рж░ рж╕рж╛ржерзЗред ржирж┐ржорзНржирж▓рж┐ржЦрж┐ржд ржХрзЛржб ржПржЯрж┐ ржХрж░рзЗ:

    ```python
    to_delete = []

    for i in range(0, len(predictions)):
        polygon_1 = create_polygon(predictions[i])
    
        for j in range(i+1, len(predictions)):
            polygon_2 = create_polygon(predictions[j])
            overlap = polygon_1.intersection(polygon_2).area

            smallest_area = min(polygon_1.area, polygon_2.area)
    
            if overlap > (overlap_threshold * smallest_area):
                to_delete.append(predictions[i])
                break
    
    for d in to_delete:
        predictions.remove(d)

    print(f'Counted {len(predictions)} stock items')
    ```

    ржУржнрж╛рж░рж▓рзНржпрж╛ржкржЯрж┐ Shapely-ржПрж░ `Polygon.intersection` ржорзЗржержб ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЧржгржирж╛ ржХрж░рж╛ рж╣ржпрж╝, ржпрж╛ ржУржнрж╛рж░рж▓рзНржпрж╛ржкржпрзБржХрзНржд ржПржХржЯрж┐ ржкрж▓рж┐ржЧржи ржкрзНрж░ржжрж╛ржи ржХрж░рзЗред ржПржЗ ржкрж▓рж┐ржЧржи ржерзЗржХрзЗ ржПрж▓рж╛ржХрж╛ ржЧржгржирж╛ ржХрж░рж╛ рж╣ржпрж╝ред ржПржЗ ржУржнрж╛рж░рж▓рзНржпрж╛ржк ржерзНрж░рзЗрж╢рж╣рзЛрж▓рзНржбржЯрж┐ ржПржХржЯрж┐ ржкрж░ржо ржорж╛ржи ржиржпрж╝, ржмрж░ржВ ржПржЯрж┐ ржмрж╛ржЙржирзНржбрж┐ржВ ржмржХрзНрж╕рзЗрж░ рж╢рждрж╛ржВрж╢ рж╣рждрзЗ рж╣ржмрзЗред рждрж╛ржЗ рж╕ржмржЪрзЗржпрж╝рзЗ ржЫрзЛржЯ ржмрж╛ржЙржирзНржбрж┐ржВ ржмржХрзНрж╕ржЯрж┐ ржЦрзБржБржЬрзЗ ржмрзЗрж░ ржХрж░рж╛ рж╣ржпрж╝ ржПржмржВ ржУржнрж╛рж░рж▓рзНржпрж╛ржк ржерзНрж░рзЗрж╢рж╣рзЛрж▓рзНржб ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЧржгржирж╛ ржХрж░рж╛ рж╣ржпрж╝ ржпрзЗ ржУржнрж╛рж░рж▓рзНржпрж╛ржкржЯрж┐ ржХрждржЯрж╛ ржПрж▓рж╛ржХрж╛ рж╣рждрзЗ ржкрж╛рж░рзЗ ржпрж╛рждрзЗ ржПржЯрж┐ рж╕ржмржЪрзЗржпрж╝рзЗ ржЫрзЛржЯ ржмрж╛ржЙржирзНржбрж┐ржВ ржмржХрзНрж╕рзЗрж░ рж╢рждрж╛ржВрж╢ ржУржнрж╛рж░рж▓рзНржпрж╛ржк ржерзНрж░рзЗрж╢рж╣рзЛрж▓рзНржб ржЕрждрж┐ржХрзНрж░ржо ржирж╛ ржХрж░рзЗред ржпржжрж┐ ржУржнрж╛рж░рж▓рзНржпрж╛ржк ржПржЯрж┐ ржЕрждрж┐ржХрзНрж░ржо ржХрж░рзЗ, рждрж╛рж╣рж▓рзЗ ржнржмрж┐рж╖рзНржпржжрзНржмрж╛ржгрзАржЯрж┐ ржорзБржЫрзЗ ржлрзЗрж▓рж╛рж░ ржЬржирзНржп ржЪрж┐рж╣рзНржирж┐ржд ржХрж░рж╛ рж╣ржпрж╝ред

    ржПржХржмрж╛рж░ ржПржХржЯрж┐ ржнржмрж┐рж╖рзНржпржжрзНржмрж╛ржгрзА ржорзБржЫрзЗ ржлрзЗрж▓рж╛рж░ ржЬржирзНржп ржЪрж┐рж╣рзНржирж┐ржд ржХрж░рж╛ рж╣рж▓рзЗ, ржПржЯрж┐ ржЖржмрж╛рж░ ржкрж░рзАржХрзНрж╖рж╛ ржХрж░рж╛рж░ ржкрзНрж░ржпрж╝рзЛржЬржи ржирзЗржЗред рждрж╛ржЗ ржЕржнрзНржпржирзНрждрж░рзАржг рж▓рзБржкржЯрж┐ ржкрж░ржмрж░рзНрждрзА ржнржмрж┐рж╖рзНржпржжрзНржмрж╛ржгрзА ржкрж░рзАржХрзНрж╖рж╛ ржХрж░рж╛рж░ ржЬржирзНржп ржмрзЗрж░рж┐ржпрж╝рзЗ ржпрж╛ржпрж╝ред ржЖржкржирж┐ рждрж╛рж▓рж┐ржХрж╛ ржерзЗржХрзЗ ржЖржЗржЯрзЗржо ржорзБржЫрзЗ ржлрзЗрж▓рждрзЗ ржкрж╛рж░ржмрзЗржи ржирж╛ ржпржЦржи ржПрж░ ржоржзрзНржп ржжрж┐ржпрж╝рзЗ рж▓рзБржк ржХрж░ржЫрзЗржиред рждрж╛ржЗ ржУржнрж╛рж░рж▓рзНржпрж╛ржк ржерзНрж░рзЗрж╢рж╣рзЛрж▓рзНржб ржЕрждрж┐ржХрзНрж░ржо ржХрж░рж╛ ржмрж╛ржЙржирзНржбрж┐ржВ ржмржХрзНрж╕ржЧрзБрж▓рзЛ `to_delete` рждрж╛рж▓рж┐ржХрж╛ржпрж╝ ржпрзЛржЧ ржХрж░рж╛ рж╣ржпрж╝ ржПржмржВ рж╢рзЗрж╖рзЗ ржорзБржЫрзЗ ржлрзЗрж▓рж╛ рж╣ржпрж╝ред

    рж╢рзЗрж╖рзЗ рж╕рзНржЯржХ ржЧржгржирж╛ ржХржирж╕рзЛрж▓рзЗ ржкрзНрж░рж┐ржирзНржЯ ржХрж░рж╛ рж╣ржпрж╝ред ржПржЯрж┐ IoT рж╕рж╛рж░рзНржнрж┐рж╕рзЗ ржкрж╛ржарж╛ржирзЛ ржпрзЗрждрзЗ ржкрж╛рж░рзЗ ржпржжрж┐ рж╕рзНржЯржХ рж╕рзНрждрж░ ржХржо ржерж╛ржХрзЗред ржПржЗ рж╕ржорж╕рзНржд ржХрзЛржб ржмрж╛ржЙржирзНржбрж┐ржВ ржмржХрзНрж╕ ржЖржБржХрж╛рж░ ржЖржЧрзЗ ржерж╛ржХрзЗ, рждрж╛ржЗ ржЖржкржирж┐ ржУржнрж╛рж░рж▓рзНржпрж╛ржк ржЫрж╛ржбрж╝рж╛ рж╕рзНржЯржХ ржнржмрж┐рж╖рзНржпржжрзНржмрж╛ржгрзАржЧрзБрж▓рзЛ рждрзИрж░рж┐ рж╣ржУржпрж╝рж╛ ржЫржмрж┐рждрзЗ ржжрзЗржЦрждрзЗ ржкрж╛рж░ржмрзЗржиред

    > ЁЯТБ ржПржЯрж┐ ржУржнрж╛рж░рж▓рзНржпрж╛ржк рж╕рж░рж╛ржирзЛрж░ ржПржХржЯрж┐ ржЦрзБржм рж╕рж╛ржзрж╛рж░ржг ржкржжрзНржзрждрж┐, ржпрзЗржЦрж╛ржирзЗ рж╢рзБржзрзБ ржПржХржЯрж┐ ржЬрзЛржбрж╝рж╛рж░ ржкрзНрж░ржержоржЯрж┐ рж╕рж░рж╛ржирзЛ рж╣ржпрж╝ред ржкрзНрж░рзЛржбрж╛ржХрж╢ржи ржХрзЛржбрзЗрж░ ржЬржирзНржп, ржПржЦрж╛ржирзЗ ржЖрж░ржУ рж▓ржЬрж┐ржХ ржпрзЛржЧ ржХрж░рж╛ ржЙржЪрж┐ржд, ржпрзЗржоржи ржПржХрж╛ржзрж┐ржХ ржмрж╕рзНрждрзБрж░ ржоржзрзНржпрзЗ ржУржнрж╛рж░рж▓рзНржпрж╛ржк ржмрж┐ржмрзЗржЪржирж╛ ржХрж░рж╛, ржЕржержмрж╛ ржпржжрж┐ ржПржХржЯрж┐ ржмрж╛ржЙржирзНржбрж┐ржВ ржмржХрзНрж╕ ржЕржирзНржпржЯрж┐рж░ ржоржзрзНржпрзЗ ржерж╛ржХрзЗред

1. ржЕрзНржпрж╛ржкржЯрж┐ ржЪрж╛рж▓рж╛ржи ржПржмржВ ржХрзНржпрж╛ржорзЗрж░рж╛ рждрж╛ржХ ржХрж░рзБржи рж╢рзЗрж▓ржлрзЗ ржерж╛ржХрж╛ ржХрж┐ржЫрзБ рж╕рзНржЯржХрзЗрж░ ржжрж┐ржХрзЗред ржЖржЙржЯржкрзБржЯржЯрж┐ ржУржнрж╛рж░рж▓рзНржпрж╛ржк ржерзНрж░рзЗрж╢рж╣рзЛрж▓рзНржб ржЕрждрж┐ржХрзНрж░ржо ржирж╛ ржХрж░рж╛ ржмрж╛ржЙржирзНржбрж┐ржВ ржмржХрзНрж╕ржЧрзБрж▓рзЛрж░ рж╕ржВржЦрзНржпрж╛ ржирж┐рж░рзНржжрзЗрж╢ ржХрж░ржмрзЗред `overlap_threshold` ржорж╛ржиржЯрж┐ рж╕рж╛ржоржЮрзНржЬрж╕рзНржп ржХрж░рзЗ ржжрзЗржЦрзБржи ржнржмрж┐рж╖рзНржпржжрзНржмрж╛ржгрзАржЧрзБрж▓рзЛ ржХрзАржнрж╛ржмрзЗ ржЙржкрзЗржХрзНрж╖рж╛ ржХрж░рж╛ рж╣ржпрж╝ред

> ЁЯТБ ржЖржкржирж┐ ржПржЗ ржХрзЛржбржЯрж┐ [code-count/pi](../../../../../5-retail/lessons/2-check-stock-device/code-count/pi) ржЕржержмрж╛ [code-count/virtual-iot-device](../../../../../5-retail/lessons/2-check-stock-device/code-count/virtual-iot-device) ржлрзЛрж▓рзНржбрж╛рж░рзЗ ржЦрзБржБржЬрзЗ ржкрзЗрждрзЗ ржкрж╛рж░рзЗржиред

ЁЯША ржЖржкржирж╛рж░ рж╕рзНржЯржХ ржХрж╛ржЙржирзНржЯрж╛рж░ ржкрзНрж░рзЛржЧрзНрж░рж╛ржо рж╕ржлрж▓ рж╣ржпрж╝рзЗржЫрзЗ!

---

**ржЕрж╕рзНржмрзАржХрзГрждрж┐**:  
ржПржЗ ржиржерж┐ржЯрж┐ AI ржЕржирзБржмрж╛ржж ржкрж░рж┐рж╖рзЗржмрж╛ [Co-op Translator](https://github.com/Azure/co-op-translator) ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЕржирзБржмрж╛ржж ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗред ржЖржорж░рж╛ ржпржерж╛рж╕рж╛ржзрзНржп рж╕ржарж┐ржХрждрж╛рж░ ржЬржирзНржп ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рж┐, рждржмрзЗ ржЕржирзБржЧрзНрж░рж╣ ржХрж░рзЗ ржоржирзЗ рж░рж╛ржЦржмрзЗржи ржпрзЗ рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ ржЕржирзБржмрж╛ржжрзЗ рждрзНрж░рзБржЯрж┐ ржмрж╛ ржЕрж╕ржЩрзНржЧрждрж┐ ржерж╛ржХрждрзЗ ржкрж╛рж░рзЗред ржорзВрж▓ ржнрж╛рж╖рж╛ржпрж╝ ржерж╛ржХрж╛ ржиржерж┐ржЯрж┐ржХрзЗ ржкрзНрж░рж╛ржорж╛ржгрж┐ржХ ржЙрзОрж╕ рж╣рж┐рж╕рзЗржмрзЗ ржмрж┐ржмрзЗржЪржирж╛ ржХрж░рж╛ ржЙржЪрж┐рждред ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг рждржерзНржпрзЗрж░ ржЬржирзНржп, ржкрзЗрж╢рж╛ржжрж╛рж░ ржорж╛ржиржм ржЕржирзБржмрж╛ржж рж╕рзБржкрж╛рж░рж┐рж╢ ржХрж░рж╛ рж╣ржпрж╝ред ржПржЗ ржЕржирзБржмрж╛ржж ржмрзНржпржмрж╣рж╛рж░рзЗрж░ ржлрж▓рзЗ ржХрзЛржирзЛ ржнрзБрж▓ ржмрзЛржЭрж╛ржмрзБржЭрж┐ ржмрж╛ ржнрзБрж▓ ржмрзНржпрж╛ржЦрзНржпрж╛ рж╣рж▓рзЗ ржЖржорж░рж╛ ржжрж╛ржпрж╝ржмржжрзНржз ржерж╛ржХржм ржирж╛ред