<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "4cf1421420a6fab9ab4f2c391bd523b7",
  "translation_date": "2025-08-25T20:48:55+00:00",
  "source_file": "5-retail/lessons/2-check-stock-device/wio-terminal-object-detector.md",
  "language_code": "fa"
}
-->
# ูุฑุงุฎูุงู ุขุดฺฉุงุฑุณุงุฒ ุงุดุงุก ุงุฒ ุฏุณุชฺฏุงู IoT - Wio Terminal

ูพุณ ุงุฒ ุงูุชุดุงุฑ ุขุดฺฉุงุฑุณุงุฒ ุงุดุงุกุ ูโุชูุงูุฏ ุขู ุฑุง ุงุฒ ุฏุณุชฺฏุงู IoT ุฎูุฏ ุงุณุชูุงุฏู ฺฉูุฏ.

## ฺฉูพ ฺฉุฑุฏู ูพุฑูฺู ุทุจููโุจูุฏ ุชุตูุฑ

ุจุฎุด ุนูุฏูโุง ุงุฒ ุขุดฺฉุงุฑุณุงุฒ ููุฌูุฏ ุดูุง ูุดุงุจู ุทุจููโุจูุฏ ุชุตูุฑ ุงุณุช ฺฉู ุฏุฑ ุฏุฑุณ ูุจู ุงุฌุงุฏ ฺฉุฑุฏุฏ.

### ูุธูู - ฺฉูพ ฺฉุฑุฏู ูพุฑูฺู ุทุจููโุจูุฏ ุชุตูุฑ

1. ุฏูุฑุจู ArduCam ุฎูุฏ ุฑุง ุจู Wio Terminal ูุชุตู ฺฉูุฏุ ุจุง ุฏูุจุงู ฺฉุฑุฏู ูุฑุงุญู [ุฏุฑุณ ฒ ุงุฒ ูพุฑูฺู ุชููุฏ](../../../4-manufacturing/lessons/2-check-fruit-from-device/wio-terminal-camera.md#task---connect-the-camera).

    ููฺฉู ุงุณุช ุจุฎูุงูุฏ ุฏูุฑุจู ุฑุง ุฏุฑ ฺฉ ูููุนุช ุซุงุจุช ูุฑุงุฑ ุฏูุฏุ ุจุฑุง ูุซุงูุ ุจุง ุขูุฒุงู ฺฉุฑุฏู ฺฉุงุจู ุฑู ฺฉ ุฌุนุจู ุง ููุทุ ุง ฺุณุจุงูุฏู ุฏูุฑุจู ุจู ฺฉ ุฌุนุจู ุจุง ููุงุฑ ฺุณุจ ุฏูุทุฑูู.

1. ฺฉ ูพุฑูฺู ุฌุฏุฏ Wio Terminal ุจุง ุงุณุชูุงุฏู ุงุฒ PlatformIO ุงุฌุงุฏ ฺฉูุฏ. ุงู ูพุฑูฺู ุฑุง `stock-counter` ูุงูโฺฏุฐุงุฑ ฺฉูุฏ.

1. ูุฑุงุญู [ุฏุฑุณ ฒ ุงุฒ ูพุฑูฺู ุชููุฏ](../../../4-manufacturing/lessons/2-check-fruit-from-device/README.md#task---capture-an-image-using-an-iot-device) ุฑุง ุจุฑุง ฺฏุฑูุชู ุชุตุงูุฑ ุงุฒ ุฏูุฑุจู ุชฺฉุฑุงุฑ ฺฉูุฏ.

1. ูุฑุงุญู [ุฏุฑุณ ฒ ุงุฒ ูพุฑูฺู ุชููุฏ](../../../4-manufacturing/lessons/2-check-fruit-from-device/README.md#task---classify-images-from-your-iot-device) ุฑุง ุจุฑุง ูุฑุงุฎูุงู ุทุจููโุจูุฏ ุชุตูุฑ ุชฺฉุฑุงุฑ ฺฉูุฏ. ุจุฎุด ุนูุฏูโุง ุงุฒ ุงู ฺฉุฏ ุจุฑุง ุขุดฺฉุงุฑุณุงุฒ ุงุดุงุก ูุฌุฏุฏุงู ุงุณุชูุงุฏู ุฎูุงูุฏ ุดุฏ.

## ุชุบุฑ ฺฉุฏ ุงุฒ ุทุจููโุจูุฏโฺฉููุฏู ุจู ุขุดฺฉุงุฑุณุงุฒ ุชุตูุฑ

ฺฉุฏ ฺฉู ุจุฑุง ุทุจููโุจูุฏ ุชุตุงูุฑ ุงุณุชูุงุฏู ฺฉุฑุฏุฏ ุจุณุงุฑ ูุดุงุจู ฺฉุฏ ุงุณุช ฺฉู ุจุฑุง ุขุดฺฉุงุฑุณุงุฒ ุงุดุงุก ุงุณุชูุงุฏู ูโุดูุฏ. ุชูุงูุช ุงุตู ุฏุฑ URL ุงุณุช ฺฉู ุงุฒ Custom Vision ุฏุฑุงูุช ฺฉุฑุฏุฏ ู ูุชุงุฌ ูุฑุงุฎูุงู.

### ูุธูู - ุชุบุฑ ฺฉุฏ ุงุฒ ุทุจููโุจูุฏโฺฉููุฏู ุจู ุขุดฺฉุงุฑุณุงุฒ ุชุตูุฑ

1. ุฏุณุชูุฑ include ุฒุฑ ุฑุง ุจู ุจุงูุง ูุงู `main.cpp` ุงุถุงูู ฺฉูุฏ:

    ```cpp
    #include <vector>
    ```

1. ุชุงุจุน `classifyImage` ุฑุง ุจู `detectStock` ุชุบุฑ ูุงู ุฏูุฏุ ูู ูุงู ุชุงุจุน ู ูู ูุฑุงุฎูุงู ุขู ุฏุฑ ุชุงุจุน `buttonPressed`.

1. ุจุงูุง ุชุงุจุน `detectStock`ุ ฺฉ ุขุณุชุงูู ุจุฑุง ููุชุฑ ฺฉุฑุฏู ูุฑฺฏููู ุขุดฺฉุงุฑุณุงุฒ ุจุง ุงุญุชูุงู ูพุงู ุงุนูุงู ฺฉูุฏ:

    ```cpp
    const float threshold = 0.3f;
    ```

    ุจุฑุฎูุงู ุทุจููโุจูุฏโฺฉููุฏู ุชุตูุฑ ฺฉู ููุท ฺฉ ูุชุฌู ุจุฑุง ูุฑ ุจุฑฺุณุจ ุจุงุฒูโฺฏุฑุฏุงูุฏุ ุขุดฺฉุงุฑุณุงุฒ ุงุดุงุก ฺูุฏู ูุชุฌู ุจุงุฒูโฺฏุฑุฏุงูุฏุ ุจูุงุจุฑุงู ูุฑ ูุชุฌู ุจุง ุงุญุชูุงู ูพุงู ุจุงุฏ ููุชุฑ ุดูุฏ.

1. ุจุงูุง ุชุงุจุน `detectStock`ุ ฺฉ ุชุงุจุน ุจุฑุง ูพุฑุฏุงุฒุด ูพุดโุจูโูุง ุงุนูุงู ฺฉูุฏ:

    ```cpp
    void processPredictions(std::vector<JsonVariant> &predictions)
    {
        for(JsonVariant prediction : predictions)
        {
            String tag = prediction["tagName"].as<String>();
            float probability = prediction["probability"].as<float>();
    
            char buff[32];
            sprintf(buff, "%s:\t%.2f%%", tag.c_str(), probability * 100.0);
            Serial.println(buff);
        }
    }
    ```

    ุงู ุชุงุจุน ูุณุช ุงุฒ ูพุดโุจูโูุง ุฑุง ุฏุฑุงูุช ฺฉุฑุฏู ู ุขููุง ุฑุง ุฏุฑ ูุงูุชูุฑ ุณุฑุงู ฺุงูพ ูโฺฉูุฏ.

1. ุฏุฑ ุชุงุจุน `detectStock`ุ ูุญุชูุง ุญููู `for` ฺฉู ูพุดโุจูโูุง ุฑุง ูุฑูุฑ ูโฺฉูุฏ ุจุง ููุงุฑุฏ ุฒุฑ ุฌุงฺฏุฒู ฺฉูุฏ:

    ```cpp
    std::vector<JsonVariant> passed_predictions;

    for(JsonVariant prediction : predictions) 
    {
        float probability = prediction["probability"].as<float>();
        if (probability > threshold)
        {
            passed_predictions.push_back(prediction);
        }
    }

    processPredictions(passed_predictions);
    ```

    ุงู ุญููู ูพุดโุจูโูุง ุฑุง ูุฑูุฑ ฺฉุฑุฏู ู ุงุญุชูุงู ุขููุง ุฑุง ุจุง ุขุณุชุงูู ููุงุณู ูโฺฉูุฏ. ุชูุงู ูพุดโุจูโูุง ฺฉู ุงุญุชูุงู ุจุงูุงุชุฑ ุงุฒ ุขุณุชุงูู ุฏุงุฑูุฏ ุจู ฺฉ `list` ุงุถุงูู ุดุฏู ู ุจู ุชุงุจุน `processPredictions` ุงุฑุณุงู ูโุดููุฏ.

1. ฺฉุฏ ุฎูุฏ ุฑุง ุขูพููุฏ ู ุงุฌุฑุง ฺฉูุฏ. ุฏูุฑุจู ุฑุง ุจู ุณูุช ุงุดุงุก ุฑู ฺฉ ููุณู ุจฺฏุฑุฏ ู ุฏฺฉูู C ุฑุง ูุดุงุฑ ุฏูุฏ. ุฎุฑูุฌ ุฑุง ุฏุฑ ูุงูุชูุฑ ุณุฑุงู ูุดุงูุฏู ุฎูุงูุฏ ฺฉุฑุฏ:

    ```output
    Connecting to WiFi..
    Connected!
    Image captured
    Image read to buffer with length 17416
    tomato paste:   35.84%
    tomato paste:   35.87%
    tomato paste:   34.11%
    tomato paste:   35.16%
    ```

    > ๐ ููฺฉู ุงุณุช ูุงุฒ ุจุงุดุฏ ููุฏุงุฑ `threshold` ุฑุง ุจุฑุง ุชุตุงูุฑ ุฎูุฏ ุชูุธู ฺฉูุฏ.

    ุดูุง ูุงุฏุฑ ุฎูุงูุฏ ุจูุฏ ุชุตูุฑ ฺฉู ฺฏุฑูุชู ุดุฏู ู ุงู ููุงุฏุฑ ุฑุง ุฏุฑ ุชุจ **Predictions** ุฏุฑ Custom Vision ูุดุงูุฏู ฺฉูุฏ.

    ![4 ููุท ุฑุจ ฺฏูุฌูโูุฑูฺฏ ุฑู ฺฉ ููุณู ุจุง ูพุดโุจูโูุง ุจุฑุง 4 ุขุดฺฉุงุฑุณุงุฒ ุจุง ุฏุฑุตุฏูุง 35.8%ุ 33.5%ุ 25.7% ู 16.6%](../../../../../translated_images/custom-vision-stock-prediction.942266ab1bcca3410ecdf23643b9f5f570cfab2345235074e24c51f285777613.fa.png)

> ๐ ูโุชูุงูุฏ ุงู ฺฉุฏ ุฑุง ุฏุฑ ูพูุดู [code-detect/wio-terminal](../../../../../5-retail/lessons/2-check-stock-device/code-detect/wio-terminal) ูพุฏุง ฺฉูุฏ.

๐ ุจุฑูุงูู ุดูุงุฑูุฏู ููุฌูุฏ ุดูุง ููููุชโุขูุฒ ุจูุฏ!

**ุณูุจ ูุณุฆููุช**:  
ุงู ุณูุฏ ุจุง ุงุณุชูุงุฏู ุงุฒ ุณุฑูุณ ุชุฑุฌูู ููุด ูุตููุน [Co-op Translator](https://github.com/Azure/co-op-translator) ุชุฑุฌูู ุดุฏู ุงุณุช. ุฏุฑ ุญุงู ฺฉู ูุง ุชูุงุด ูโฺฉูู ุฏูุช ุฑุง ุญูุธ ฺฉููุ ูุทูุงู ุชูุฌู ุฏุงุดุชู ุจุงุดุฏ ฺฉู ุชุฑุฌููโูุง ุฎูุฏฺฉุงุฑ ููฺฉู ุงุณุช ุดุงูู ุฎุทุงูุง ุง ูุงุฏุฑุณุชโูุง ุจุงุดูุฏ. ุณูุฏ ุงุตู ุจู ุฒุจุงู ุงุตู ุขู ุจุงุฏ ุจู ุนููุงู ููุจุน ูุนุชุจุฑ ุฏุฑ ูุธุฑ ฺฏุฑูุชู ุดูุฏ. ุจุฑุง ุงุทูุงุนุงุช ุญุณุงุณุ ุชูุตู ูโุดูุฏ ุงุฒ ุชุฑุฌูู ุญุฑููโุง ุงูุณุงู ุงุณุชูุงุฏู ฺฉูุฏ. ูุง ูุณุฆููุช ุฏุฑ ูุจุงู ุณูุก ุชูุงููโูุง ุง ุชูุณุฑูุง ูุงุฏุฑุณุช ูุงุด ุงุฒ ุงุณุชูุงุฏู ุงุฒ ุงู ุชุฑุฌูู ูุฏุงุฑู.