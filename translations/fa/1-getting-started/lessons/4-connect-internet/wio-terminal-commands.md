<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "6754c915dae64ba70fcd5e52c37f3adf",
  "translation_date": "2025-08-25T22:01:49+00:00",
  "source_file": "1-getting-started/lessons/4-connect-internet/wio-terminal-commands.md",
  "language_code": "fa"
}
-->
# ฺฉูุชุฑู ฺุฑุงุบ ุฎูุงุจ ุฎูุฏ ุงุฒ ุทุฑู ุงูุชุฑูุช - Wio Terminal

ุฏุฑ ุงู ุจุฎุด ุงุฒ ุฏุฑุณุ ุดูุง ุจู ุฏุณุชูุฑุงุช ุงุฑุณุงู ุดุฏู ุงุฒ ฺฉ MQTT broker ุจู Wio Terminal ุฎูุฏ ุงุดุชุฑุงฺฉ ุฎูุงูุฏ ุฏุงุฏ.

## ุงุดุชุฑุงฺฉ ุฏุฑ ุฏุณุชูุฑุงุช

ูุฑุญูู ุจุนุฏ ุงุดุชุฑุงฺฉ ุฏุฑ ุฏุณุชูุฑุงุช ุงุฑุณุงู ุดุฏู ุงุฒ MQTT broker ู ูพุงุณุฎ ุฏุงุฏู ุจู ุขููุง ุงุณุช.

### ูุธูู

ุงุดุชุฑุงฺฉ ุฏุฑ ุฏุณุชูุฑุงุช.

1. ูพุฑูฺู ฺุฑุงุบ ุฎูุงุจ ุฑุง ุฏุฑ VS Code ุจุงุฒ ฺฉูุฏ.

1. ฺฉุฏ ุฒุฑ ุฑุง ุจู ุงูุชูุง ูุงู `config.h` ุงุถุงูู ฺฉูุฏ ุชุง ูุงู ููุถูุน ุจุฑุง ุฏุณุชูุฑุงุช ุชุนุฑู ุดูุฏ:

    ```cpp
    const string SERVER_COMMAND_TOPIC = ID + "/commands";
    ```

    `SERVER_COMMAND_TOPIC` ููุถูุน ุงุณุช ฺฉู ุฏุณุชฺฏุงู ุจุฑุง ุฏุฑุงูุช ุฏุณุชูุฑุงุช LED ุจู ุขู ุงุดุชุฑุงฺฉ ุฎูุงูุฏ ุฏุงุฏ.

1. ุฎุท ุฒุฑ ุฑุง ุจู ุงูุชูุง ุชุงุจุน `reconnectMQTTClient` ุงุถุงูู ฺฉูุฏ ุชุง ููฺฏุงู ุงุชุตุงู ูุฌุฏุฏ MQTT client ุจู ููุถูุน ุฏุณุชูุฑุงุช ุงุดุชุฑุงฺฉ ุฏุงุฏู ุดูุฏ:

    ```cpp
    client.subscribe(SERVER_COMMAND_TOPIC.c_str());
    ```

1. ฺฉุฏ ุฒุฑ ุฑุง ุฒุฑ ุชุงุจุน `reconnectMQTTClient` ุงุถุงูู ฺฉูุฏ.

    ```cpp
    void clientCallback(char *topic, uint8_t *payload, unsigned int length)
    {
        char buff[length + 1];
        for (int i = 0; i < length; i++)
        {
            buff[i] = (char)payload[i];
        }
        buff[length] = '\0';
    
        Serial.print("Message received:");
        Serial.println(buff);
    
        DynamicJsonDocument doc(1024);
        deserializeJson(doc, buff);
        JsonObject obj = doc.as<JsonObject>();
    
        bool led_on = obj["led_on"];
    
        if (led_on)
            digitalWrite(D0, HIGH);
        else
            digitalWrite(D0, LOW);
    }
    ```

    ุงู ุชุงุจุน ุจู ุนููุงู callback ุชูุณุท MQTT client ูุฑุงุฎูุงู ูโุดูุฏ ุฒูุงู ฺฉู ูพุงู ุงุฒ ุณุฑูุฑ ุฏุฑุงูุช ูโฺฉูุฏ.

    ูพุงู ุจู ุตูุฑุช ุขุฑุงูโุง ุงุฒ ุงุนุฏุงุฏ ุตุญุญ ธ ุจุช ุจุฏูู ุนูุงูุช ุฏุฑุงูุช ูโุดูุฏุ ุจูุงุจุฑุงู ุจุงุฏ ุจู ุขุฑุงูโุง ุงุฒ ฺฉุงุฑุงฺฉุชุฑูุง ุชุจุฏู ุดูุฏ ุชุง ุจู ุนููุงู ูุชู ูพุฑุฏุงุฒุด ุดูุฏ.

    ูพุงู ุดุงูู ฺฉ ุณูุฏ JSON ุงุณุช ู ุจุง ุงุณุชูุงุฏู ุงุฒ ฺฉุชุงุจุฎุงูู ArduinoJson ุฑูุฒฺฏุดุง ูโุดูุฏ. ูฺฺฏ `led_on` ุงุฒ ุณูุฏ JSON ุฎูุงูุฏู ูโุดูุฏ ู ุจุณุชู ุจู ููุฏุงุฑ ุขู LED ุฑูุดู ุง ุฎุงููุด ูโุดูุฏ.

1. ฺฉุฏ ุฒุฑ ุฑุง ุจู ุชุงุจุน `createMQTTClient` ุงุถุงูู ฺฉูุฏ:

    ```cpp
    client.setCallback(clientCallback);
    ```

    ุงู ฺฉุฏ `clientCallback` ุฑุง ุจู ุนููุงู callback ุชูุธู ูโฺฉูุฏ ุชุง ุฒูุงู ฺฉู ูพุงู ุงุฒ MQTT broker ุฏุฑุงูุช ุดูุฏ ูุฑุงุฎูุงู ุดูุฏ.

    > ๐ ููุฏูุฑ `clientCallback` ุจุฑุง ุชูุงู ููุถูุนุงุช ฺฉู ุจู ุขููุง ุงุดุชุฑุงฺฉ ุฏุงุฏู ุดุฏู ูุฑุงุฎูุงู ูโุดูุฏ. ุงฺฏุฑ ุจุนุฏุงู ฺฉุฏ ุจููุณุฏ ฺฉู ุจู ฺูุฏู ููุถูุน ฺฏูุด ุฏูุฏุ ูโุชูุงูุฏ ููุถูุน ฺฉู ูพุงู ุจู ุขู ุงุฑุณุงู ุดุฏู ุฑุง ุงุฒ ูพุงุฑุงูุชุฑ `topic` ฺฉู ุจู ุชุงุจุน callback ุงุฑุณุงู ูโุดูุฏ ุฏุฑุงูุช ฺฉูุฏ.

1. ฺฉุฏ ุฑุง ุจู Wio Terminal ุฎูุฏ ุขูพููุฏ ฺฉูุฏ ู ุงุฒ Serial Monitor ุจุฑุง ูุดุงูุฏู ุณุทุญ ููุฑ ุงุฑุณุงู ุดุฏู ุจู MQTT broker ุงุณุชูุงุฏู ฺฉูุฏ.

1. ุณุทุญ ููุฑ ุชุดุฎุต ุฏุงุฏู ุดุฏู ุชูุณุท ุฏุณุชฺฏุงู ูุฒฺฉ ุง ูุฌุงุฒ ุฎูุฏ ุฑุง ุชูุธู ฺฉูุฏ. ุฎูุงูุฏ ุฏุฏ ฺฉู ูพุงูโูุง ุฏุฑุงูุช ูโุดููุฏ ู ุฏุณุชูุฑุงุช ุฏุฑ ุชุฑููุงู ุงุฑุณุงู ูโุดููุฏ. ููฺูู ุฎูุงูุฏ ุฏุฏ ฺฉู LED ุจุณุชู ุจู ุณุทุญ ููุฑ ุฑูุดู ู ุฎุงููุด ูโุดูุฏ.

> ๐ ูโุชูุงูุฏ ุงู ฺฉุฏ ุฑุง ุฏุฑ ูพูุดู [code-commands/wio-terminal](../../../../../1-getting-started/lessons/4-connect-internet/code-commands/wio-terminal) ูพุฏุง ฺฉูุฏ.

๐ ุดูุง ุจุง ููููุช ุฏุณุชฺฏุงู ุฎูุฏ ุฑุง ุจุฑุง ูพุงุณุฎ ุฏุงุฏู ุจู ุฏุณุชูุฑุงุช ุงุฒ ฺฉ MQTT broker ฺฉุฏููุณ ฺฉุฑุฏุฏ.

**ุณูุจ ูุณุฆููุช**:  
ุงู ุณูุฏ ุจุง ุงุณุชูุงุฏู ุงุฒ ุณุฑูุณ ุชุฑุฌูู ููุด ูุตููุน [Co-op Translator](https://github.com/Azure/co-op-translator) ุชุฑุฌูู ุดุฏู ุงุณุช. ุฏุฑ ุญุงู ฺฉู ูุง ุชูุงุด ูโฺฉูู ุฏูุช ุฑุง ุญูุธ ฺฉููุ ูุทูุงู ุชูุฌู ุฏุงุดุชู ุจุงุดุฏ ฺฉู ุชุฑุฌููโูุง ุฎูุฏฺฉุงุฑ ููฺฉู ุงุณุช ุดุงูู ุฎุทุงูุง ุง ูุงุฏุฑุณุชโูุง ุจุงุดูุฏ. ุณูุฏ ุงุตู ุจู ุฒุจุงู ุงุตู ุขู ุจุงุฏ ุจู ุนููุงู ููุจุน ูุนุชุจุฑ ุฏุฑ ูุธุฑ ฺฏุฑูุชู ุดูุฏ. ุจุฑุง ุงุทูุงุนุงุช ุญุณุงุณุ ุชูุตู ูโุดูุฏ ุงุฒ ุชุฑุฌูู ุญุฑููโุง ุงูุณุงู ุงุณุชูุงุฏู ฺฉูุฏ. ูุง ูุณุฆููุช ุฏุฑ ูุจุงู ุณูุก ุชูุงููโูุง ุง ุชูุณุฑูุง ูุงุฏุฑุณุช ูุงุด ุงุฒ ุงุณุชูุงุฏู ุงุฒ ุงู ุชุฑุฌูู ูุฏุงุฑู.