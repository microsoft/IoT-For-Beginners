<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "ea733bd0cdf2479e082373f765a08678",
  "translation_date": "2025-08-25T22:02:28+00:00",
  "source_file": "1-getting-started/lessons/3-sensors-and-actuators/pi-sensor.md",
  "language_code": "fa"
}
-->
# ساخت یک چراغ شب - رزبری پای

در این بخش از درس، شما یک حسگر نور به رزبری پای خود اضافه خواهید کرد.

## سخت‌افزار

حسگری که در این درس استفاده می‌شود یک **حسگر نور** است که از یک [فوتودیود](https://wikipedia.org/wiki/Photodiode) برای تبدیل نور به سیگنال الکتریکی استفاده می‌کند. این حسگر آنالوگ است و یک مقدار عددی بین ۰ تا ۱۰۰۰ ارسال می‌کند که نشان‌دهنده میزان نسبی نور است و به هیچ واحد استانداردی مانند [لوکس](https://wikipedia.org/wiki/Lux) مرتبط نیست.

حسگر نور یک حسگر Grove خارجی است و باید به کلاهک پایه Grove روی رزبری پای متصل شود.

### اتصال حسگر نور

حسگر نور Grove که برای تشخیص سطح نور استفاده می‌شود باید به رزبری پای متصل شود.

#### وظیفه - اتصال حسگر نور

حسگر نور را متصل کنید.

![یک حسگر نور Grove](../../../../../translated_images/grove-light-sensor.b8127b7c434e632d6bcdb57587a14e9ef69a268a22df95d08628f62b8fa5505c.fa.png)

1. یک سر کابل Grove را به سوکت روی ماژول حسگر نور وارد کنید. این کابل فقط از یک جهت وارد می‌شود.

1. با خاموش بودن رزبری پای، سر دیگر کابل Grove را به سوکت آنالوگ با علامت **A0** روی کلاهک پایه Grove که به رزبری پای متصل است، وصل کنید. این سوکت دومین سوکت از سمت راست در ردیف سوکت‌های کنار پین‌های GPIO است.

![حسگر نور Grove متصل به سوکت A0](../../../../../translated_images/pi-light-sensor.66cc1e31fa48cd7d5f23400d4b2119aa41508275cb7c778053a7923b4e972d7e.fa.png)

## برنامه‌نویسی حسگر نور

اکنون می‌توانید دستگاه را با استفاده از حسگر نور Grove برنامه‌نویسی کنید.

### وظیفه - برنامه‌نویسی حسگر نور

دستگاه را برنامه‌نویسی کنید.

1. رزبری پای را روشن کنید و منتظر بمانید تا بوت شود.

1. پروژه چراغ شب را در VS Code باز کنید که در بخش قبلی این تمرین ایجاد کرده‌اید، چه به‌صورت مستقیم روی رزبری پای اجرا شود یا با استفاده از افزونه Remote SSH متصل شده باشد.

1. فایل `app.py` را باز کنید و تمام کدهای موجود در آن را حذف کنید.

1. کد زیر را به فایل `app.py` اضافه کنید تا برخی از کتابخانه‌های موردنیاز وارد شوند:

    ```python
    import time
    from grove.grove_light_sensor_v1_2 import GroveLightSensor
    ```

    دستور `import time` ماژول `time` را وارد می‌کند که در ادامه این تمرین استفاده خواهد شد.

    دستور `from grove.grove_light_sensor_v1_2 import GroveLightSensor` کلاس `GroveLightSensor` را از کتابخانه‌های پایتون Grove وارد می‌کند. این کتابخانه شامل کدی برای تعامل با حسگر نور Grove است و در طول تنظیمات رزبری پای به‌صورت کلی نصب شده است.

1. کد زیر را بعد از کد بالا اضافه کنید تا یک نمونه از کلاسی که حسگر نور را مدیریت می‌کند، ایجاد شود:

    ```python
    light_sensor = GroveLightSensor(0)
    ```

    خط `light_sensor = GroveLightSensor(0)` یک نمونه از کلاس `GroveLightSensor` ایجاد می‌کند که به پین **A0** متصل است - پین آنالوگ Grove که حسگر نور به آن متصل شده است.

1. یک حلقه بی‌نهایت بعد از کد بالا اضافه کنید تا مقدار حسگر نور را بخواند و در کنسول چاپ کند:

    ```python
    while True:
        light = light_sensor.light
        print('Light level:', light)
    ```

    این کد سطح نور فعلی را در مقیاس ۰ تا ۱۰۲۳ با استفاده از ویژگی `light` کلاس `GroveLightSensor` می‌خواند. این ویژگی مقدار آنالوگ را از پین می‌خواند. سپس این مقدار در کنسول چاپ می‌شود.

1. یک توقف کوتاه یک‌ثانیه‌ای در انتهای حلقه اضافه کنید، زیرا نیازی به بررسی مداوم سطح نور نیست. توقف باعث کاهش مصرف انرژی دستگاه می‌شود.

    ```python
    time.sleep(1)
    ```

1. از ترمینال VS Code، دستور زیر را اجرا کنید تا برنامه پایتون خود را اجرا کنید:

    ```sh
    python3 app.py
    ```

    مقادیر نور در کنسول نمایش داده می‌شوند. حسگر نور را بپوشانید و باز کنید، و مقادیر تغییر خواهند کرد:

    ```output
    pi@raspberrypi:~/nightlight $ python3 app.py 
    Light level: 634
    Light level: 634
    Light level: 634
    Light level: 230
    Light level: 104
    Light level: 290
    ```

> 💁 می‌توانید این کد را در پوشه [code-sensor/pi](../../../../../1-getting-started/lessons/3-sensors-and-actuators/code-sensor/pi) پیدا کنید.

😀 اضافه کردن یک حسگر به برنامه چراغ شب شما موفقیت‌آمیز بود!

**سلب مسئولیت**:  
این سند با استفاده از سرویس ترجمه هوش مصنوعی [Co-op Translator](https://github.com/Azure/co-op-translator) ترجمه شده است. در حالی که ما تلاش می‌کنیم دقت را حفظ کنیم، لطفاً توجه داشته باشید که ترجمه‌های خودکار ممکن است شامل خطاها یا نادرستی‌ها باشند. سند اصلی به زبان اصلی آن باید به عنوان منبع معتبر در نظر گرفته شود. برای اطلاعات حساس، توصیه می‌شود از ترجمه انسانی حرفه‌ای استفاده کنید. ما مسئولیتی در قبال سوء تفاهم‌ها یا تفسیرهای نادرست ناشی از استفاده از این ترجمه نداریم.