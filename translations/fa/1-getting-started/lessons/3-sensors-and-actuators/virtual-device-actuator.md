<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "9c640f93263fd9adbfda920739e09feb",
  "translation_date": "2025-08-25T22:08:14+00:00",
  "source_file": "1-getting-started/lessons/3-sensors-and-actuators/virtual-device-actuator.md",
  "language_code": "fa"
}
-->
# ساخت چراغ خواب - سخت‌افزار مجازی IoT

در این بخش از درس، شما یک LED به دستگاه IoT مجازی خود اضافه می‌کنید و از آن برای ایجاد یک چراغ خواب استفاده می‌کنید.

## سخت‌افزار مجازی

چراغ خواب به یک عملگر نیاز دارد که در برنامه CounterFit ایجاد می‌شود.

عملگر یک **LED** است. در یک دستگاه IoT فیزیکی، این یک [دیود نورافشان](https://wikipedia.org/wiki/Light-emitting_diode) خواهد بود که با عبور جریان از آن نور تولید می‌کند. این یک عملگر دیجیتال است که دو حالت دارد: روشن و خاموش. ارسال مقدار 1 LED را روشن می‌کند و مقدار 0 آن را خاموش می‌کند.

منطق چراغ خواب به صورت شبه‌کد:

```output
Check the light level.
If the light is less than 300
    Turn the LED on
Otherwise
    Turn the LED off
```

### افزودن عملگر به CounterFit

برای استفاده از LED مجازی، باید آن را به برنامه CounterFit اضافه کنید.

#### وظیفه - افزودن عملگر به CounterFit

LED را به برنامه CounterFit اضافه کنید.

1. مطمئن شوید که برنامه وب CounterFit از بخش قبلی این تمرین در حال اجرا است. اگر اجرا نمی‌شود، آن را راه‌اندازی کنید و حسگر نور را دوباره اضافه کنید.

1. یک LED ایجاد کنید:

    1. در کادر *Create actuator* در بخش *Actuator*، از منوی کشویی *Actuator type* گزینه *LED* را انتخاب کنید.

    1. مقدار *Pin* را روی *5* تنظیم کنید.

    1. دکمه **Add** را انتخاب کنید تا LED روی پین 5 ایجاد شود.

    ![تنظیمات LED](../../../../../translated_images/counterfit-create-led.ba9db1c9b8c622a635d6dfae5cdc4e70c2b250635bd4f0601c6cf0bd22b7ba46.fa.png)

    LED ایجاد شده و در لیست عملگرها ظاهر می‌شود.

    ![LED ایجاد شده](../../../../../translated_images/counterfit-led.c0ab02de6d256ad84d9bad4d67a7faa709f0ea83e410cfe9b5561ef0cef30b1c.fa.png)

    پس از ایجاد LED، می‌توانید رنگ آن را با استفاده از انتخابگر *Color* تغییر دهید. دکمه **Set** را انتخاب کنید تا پس از انتخاب رنگ، آن را تغییر دهید.

### برنامه‌نویسی چراغ خواب

اکنون می‌توانید چراغ خواب را با استفاده از حسگر نور و LED در CounterFit برنامه‌نویسی کنید.

#### وظیفه - برنامه‌نویسی چراغ خواب

چراغ خواب را برنامه‌نویسی کنید.

1. پروژه چراغ خواب را در VS Code باز کنید که در بخش قبلی این تمرین ایجاد کرده‌اید. اگر لازم است، ترمینال را متوقف کرده و دوباره ایجاد کنید تا مطمئن شوید که با استفاده از محیط مجازی اجرا می‌شود.

1. فایل `app.py` را باز کنید.

1. کد زیر را به فایل `app.py` اضافه کنید تا یک کتابخانه مورد نیاز وارد شود. این کد باید در بالای فایل، زیر خطوط دیگر `import` اضافه شود.

    ```python
    from counterfit_shims_grove.grove_led import GroveLed
    ```

    دستور `from counterfit_shims_grove.grove_led import GroveLed` کتابخانه `GroveLed` را از کتابخانه‌های شیم CounterFit Grove برای پایتون وارد می‌کند. این کتابخانه شامل کدی برای تعامل با LED ایجاد شده در برنامه CounterFit است.

1. کد زیر را بعد از اعلان `light_sensor` اضافه کنید تا یک نمونه از کلاسی که LED را مدیریت می‌کند ایجاد شود:

    ```python
    led = GroveLed(5)
    ```

    خط `led = GroveLed(5)` یک نمونه از کلاس `GroveLed` ایجاد می‌کند که به پین **5** متصل است - پین Grove در CounterFit که LED به آن متصل است.

1. یک بررسی داخل حلقه `while` و قبل از `time.sleep` اضافه کنید تا سطح نور را بررسی کرده و LED را روشن یا خاموش کنید:

    ```python
    if light < 300:
        led.on()
    else:
        led.off()
    ```

    این کد مقدار `light` را بررسی می‌کند. اگر این مقدار کمتر از 300 باشد، متد `on` کلاس `GroveLed` را فراخوانی می‌کند که مقدار دیجیتال 1 را به LED ارسال کرده و آن را روشن می‌کند. اگر مقدار نور برابر یا بیشتر از 300 باشد، متد `off` را فراخوانی می‌کند که مقدار دیجیتال 0 را ارسال کرده و LED را خاموش می‌کند.

    > 💁 این کد باید به همان سطح خط `print('Light level:', light)` تورفتگی داشته باشد تا داخل حلقه while قرار گیرد!

1. از ترمینال VS Code، دستور زیر را اجرا کنید تا برنامه پایتون خود را اجرا کنید:

    ```sh
    python3 app.py
    ```

    مقادیر نور در کنسول نمایش داده می‌شود.

    ```output
    (.venv) ➜  GroveTest python3 app.py 
    Light level: 143
    Light level: 244
    Light level: 246
    Light level: 253
    ```

1. تنظیمات *Value* یا *Random* را تغییر دهید تا سطح نور را بالاتر و پایین‌تر از 300 تغییر دهید. LED روشن و خاموش خواهد شد.

![LED در برنامه CounterFit که با تغییر سطح نور روشن و خاموش می‌شود](../../../../../images/virtual-device-running-assignment-1-1.gif)

> 💁 شما می‌توانید این کد را در پوشه [code-actuator/virtual-device](../../../../../1-getting-started/lessons/3-sensors-and-actuators/code-actuator/virtual-device) پیدا کنید.

😀 برنامه چراغ خواب شما موفقیت‌آمیز بود!

**سلب مسئولیت**:  
این سند با استفاده از سرویس ترجمه هوش مصنوعی [Co-op Translator](https://github.com/Azure/co-op-translator) ترجمه شده است. در حالی که ما تلاش می‌کنیم دقت را حفظ کنیم، لطفاً توجه داشته باشید که ترجمه‌های خودکار ممکن است حاوی خطاها یا نادرستی‌هایی باشند. سند اصلی به زبان اصلی آن باید به عنوان منبع معتبر در نظر گرفته شود. برای اطلاعات حساس، ترجمه حرفه‌ای انسانی توصیه می‌شود. ما هیچ مسئولیتی در قبال سوءتفاهم‌ها یا تفسیرهای نادرست ناشی از استفاده از این ترجمه نداریم.