<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "9d4d00a47d5d0f3e6ce42c0d1020064a",
  "translation_date": "2025-08-25T21:41:50+00:00",
  "source_file": "2-farm/lessons/2-detect-soil-moisture/pi-soil-moisture.md",
  "language_code": "fa"
}
-->
# اندازه‌گیری رطوبت خاک - رزبری پای

در این بخش از درس، شما یک حسگر رطوبت خاک خازنی به رزبری پای اضافه می‌کنید و مقادیر آن را می‌خوانید.

## سخت‌افزار

رزبری پای به یک حسگر رطوبت خاک خازنی نیاز دارد.

حسگری که استفاده می‌کنید [حسگر رطوبت خاک خازنی](https://www.seeedstudio.com/Grove-Capacitive-Moisture-Sensor-Corrosion-Resistant.html) است که رطوبت خاک را با تشخیص ظرفیت خازنی خاک اندازه‌گیری می‌کند، خاصیتی که با تغییر رطوبت خاک تغییر می‌کند. با افزایش رطوبت خاک، ولتاژ کاهش می‌یابد.

این حسگر آنالوگ است، بنابراین از یک پین آنالوگ و مبدل آنالوگ به دیجیتال 10 بیتی در Grove Base Hat روی رزبری پای استفاده می‌کند تا ولتاژ را به یک سیگنال دیجیتال از 1 تا 1023 تبدیل کند. سپس این سیگنال از طریق پین‌های GPIO روی رزبری پای ارسال می‌شود.

### اتصال حسگر رطوبت خاک

حسگر رطوبت خاک Grove می‌تواند به رزبری پای متصل شود.

#### وظیفه - اتصال حسگر رطوبت خاک

حسگر رطوبت خاک را وصل کنید.

![یک حسگر رطوبت خاک Grove](../../../../../translated_images/grove-capacitive-soil-moisture-sensor.e7f0776cce30e78be5cc5a07839385fd6718857f31b5bf5ad3d0c73c83b2f0ef.fa.png)

1. یک سر کابل Grove را به سوکت روی حسگر رطوبت خاک وارد کنید. این کابل فقط به یک شکل وارد می‌شود.

1. با خاموش بودن رزبری پای، سر دیگر کابل Grove را به سوکت آنالوگ با علامت **A0** روی Grove Base Hat متصل به رزبری پای وصل کنید. این سوکت دومین سوکت از سمت راست در ردیف سوکت‌های کنار پین‌های GPIO است.

![حسگر رطوبت خاک Grove متصل به سوکت A0](../../../../../translated_images/pi-soil-moisture-sensor.fdd7eb2393792cf6739cacf1985d9f55beda16d372f30d0b5a51d586f978a870.fa.png)

1. حسگر رطوبت خاک را در خاک قرار دهید. این حسگر دارای یک "خط بالاترین موقعیت" است - یک خط سفید روی حسگر. حسگر را تا این خط وارد کنید اما از آن عبور نکنید.

![حسگر رطوبت خاک Grove در خاک](../../../../../translated_images/soil-moisture-sensor-in-soil.bfad91002bda5e960f8c51ee64b02ee59b32c8c717e3515a2c945f33e614e403.fa.png)

## برنامه‌نویسی حسگر رطوبت خاک

اکنون می‌توانید رزبری پای را برای استفاده از حسگر رطوبت خاک متصل شده برنامه‌نویسی کنید.

### وظیفه - برنامه‌نویسی حسگر رطوبت خاک

دستگاه را برنامه‌نویسی کنید.

1. رزبری پای را روشن کنید و منتظر بمانید تا بوت شود.

1. VS Code را اجرا کنید، یا مستقیماً روی رزبری پای یا از طریق افزونه Remote SSH متصل شوید.

    > ⚠️ می‌توانید به [دستورالعمل‌های تنظیم و اجرای VS Code در درس چراغ شب - درس 1 در صورت نیاز مراجعه کنید](../../../1-getting-started/lessons/1-introduction-to-iot/pi.md).

1. از ترمینال، یک پوشه جدید در دایرکتوری خانگی کاربر `pi` به نام `soil-moisture-sensor` ایجاد کنید. یک فایل در این پوشه به نام `app.py` ایجاد کنید.

1. این پوشه را در VS Code باز کنید.

1. کد زیر را به فایل `app.py` اضافه کنید تا برخی کتابخانه‌های مورد نیاز وارد شوند:

    ```python
    import time
    from grove.adc import ADC
    ```

    دستور `import time` ماژول `time` را وارد می‌کند که در ادامه این تمرین استفاده خواهد شد.

    دستور `from grove.adc import ADC` کلاس `ADC` را از کتابخانه‌های پایتون Grove وارد می‌کند. این کتابخانه شامل کدی برای تعامل با مبدل آنالوگ به دیجیتال روی Grove Base Hat و خواندن ولتاژ از حسگرهای آنالوگ است.

1. کد زیر را در پایین این بخش اضافه کنید تا یک نمونه از کلاس `ADC` ایجاد شود:

    ```python
    adc = ADC()
    ```

1. یک حلقه بی‌نهایت اضافه کنید که از این ADC روی پین A0 بخواند و نتیجه را در کنسول بنویسد. این حلقه می‌تواند بین خواندن‌ها به مدت 10 ثانیه متوقف شود.

    ```python
    while True:
        soil_moisture = adc.read(0)
        print("Soil moisture:", soil_moisture)

        time.sleep(10)
    ```

1. برنامه پایتون را اجرا کنید. خواهید دید که اندازه‌گیری‌های رطوبت خاک در کنسول نوشته می‌شوند. مقداری آب به خاک اضافه کنید یا حسگر را از خاک خارج کنید و تغییر مقدار را مشاهده کنید.

    ```output
    pi@raspberrypi:~/soil-moisture-sensor $ python3 app.py 
    Soil moisture: 615
    Soil moisture: 612
    Soil moisture: 498
    Soil moisture: 493
    Soil moisture: 490
    Soil Moisture: 388
    ```

    در خروجی نمونه بالا، می‌توانید کاهش ولتاژ را هنگام اضافه کردن آب مشاهده کنید.

> 💁 می‌توانید این کد را در پوشه [code/pi](../../../../../2-farm/lessons/2-detect-soil-moisture/code/pi) پیدا کنید.

😀 برنامه حسگر رطوبت خاک شما موفقیت‌آمیز بود!

**سلب مسئولیت**:  
این سند با استفاده از سرویس ترجمه هوش مصنوعی [Co-op Translator](https://github.com/Azure/co-op-translator) ترجمه شده است. در حالی که ما تلاش می‌کنیم دقت را حفظ کنیم، لطفاً توجه داشته باشید که ترجمه‌های خودکار ممکن است شامل خطاها یا نادرستی‌ها باشند. سند اصلی به زبان اصلی آن باید به عنوان منبع معتبر در نظر گرفته شود. برای اطلاعات حساس، توصیه می‌شود از ترجمه حرفه‌ای انسانی استفاده کنید. ما مسئولیتی در قبال سوء تفاهم‌ها یا تفسیرهای نادرست ناشی از استفاده از این ترجمه نداریم.