<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "078ae664c7b686bf069545e9a5fc95b2",
  "translation_date": "2025-08-25T22:54:49+00:00",
  "source_file": "3-transport/lessons/4-geofences/README.md",
  "language_code": "fa"
}
-->
# ุญุตุงุฑูุง ุฌุบุฑุงูุง

![ููุง ฺฉู ุฏุฑุณ ุจู ุตูุฑุช ุงุณฺฉฺโููุช](../../../../../translated_images/lesson-14.63980c5150ae3c153e770fb71d044c1845dce79248d86bed9fc525adf3ede73c.fa.jpg)

> ุงุณฺฉฺโููุช ุชูุณุท [ูุชุง ูุงุฑุงุณููุงู](https://github.com/nitya). ุจุฑุง ูุดุงูุฏู ูุณุฎู ุจุฒุฑฺฏโุชุฑ ุฑู ุชุตูุฑ ฺฉูฺฉ ฺฉูุฏ.

ุงู ูุฏู ููุง ฺฉู ุงุฒ ุญุตุงุฑูุง ุฌุบุฑุงูุง ู ูุญูู ุงุณุชูุงุฏู ุงุฒ ุขููุง ุฏุฑ Azure Maps ุฑุง ุงุฑุงุฆู ูโุฏูุฏุ ููุถูุนุงุช ฺฉู ุฏุฑ ุงู ุฏุฑุณ ูพูุดุด ุฏุงุฏู ุฎูุงููุฏ ุดุฏ:

[![ุญุตุงุฑูุง ุฌุบุฑุงูุง ุจุง Azure Maps ุงุฒ ุจุฑูุงูู Microsoft Developer IoT](https://img.youtube.com/vi/nsrgYhaYNVY/0.jpg)](https://www.youtube.com/watch?v=nsrgYhaYNVY)

> ๐ฅ ุจุฑุง ูุดุงูุฏู ูุฏู ุฑู ุชุตูุฑ ุจุงูุง ฺฉูฺฉ ฺฉูุฏ

## ุขุฒููู ูพุด ุงุฒ ุฏุฑุณ

[ุขุฒููู ูพุด ุงุฒ ุฏุฑุณ](https://black-meadow-040d15503.1.azurestaticapps.net/quiz/27)

## ููุฏูู

ุฏุฑ ุณู ุฏุฑุณ ฺฏุฐุดุชูุ ุดูุง ุงุฒ ุงูุชุฑูุช ุงุดุง (IoT) ุจุฑุง ุฑุฏุงุจ ฺฉุงูููโูุง ฺฉู ูุญุตููุงุช ุดูุง ุฑุง ุงุฒ ูุฒุฑุนู ุจู ูุฑฺฉุฒ ูพุฑุฏุงุฒุด ุญูู ูโฺฉููุฏ ุงุณุชูุงุฏู ฺฉุฑุฏูโุงุฏ. ุฏุงุฏูโูุง GPS ุฑุง ุฌูุนโุขูุฑ ฺฉุฑุฏูุ ุจู ูุถุง ุงุจุฑ ุงุฑุณุงู ฺฉุฑุฏู ู ุขููุง ุฑุง ุฑู ููุดู ููุงุด ุฏุงุฏูโุงุฏ. ฺฏุงู ุจุนุฏ ุจุฑุง ุงูุฒุงุด ฺฉุงุฑุง ุฒูุฌุฑู ุชุฃูู ุดูุง ุงู ุงุณุช ฺฉู ููฺฏุงู ฺฉู ฺฉ ฺฉุงููู ุฏุฑ ุขุณุชุงูู ุฑุณุฏู ุจู ูุฑฺฉุฒ ูพุฑุฏุงุฒุด ุงุณุชุ ูุดุฏุงุฑ ุฏุฑุงูุช ฺฉูุฏ ุชุง ุชู ุชุฎูู ุจุชูุงูุฏ ุจุง ููุชุฑุงฺฉโูุง ู ุชุฌูุฒุงุช ุฏฺฏุฑ ุขูุงุฏู ุจุงุดุฏ ู ุจู ูุญุถ ุฑุณุฏู ูุณูู ููููุ ุชุฎูู ุณุฑุน ุงูุฌุงู ุดูุฏ. ุจู ุงู ุชุฑุชุจุ ุฒูุงู ุงูุชุธุงุฑ ฺฉุงููู ู ุฑุงููุฏู ฺฉุงูุด ูโุงุจุฏ.

ุฏุฑ ุงู ุฏุฑุณุ ุดูุง ุฏุฑุจุงุฑู ุญุตุงุฑูุง ุฌุบุฑุงูุง ุงุฏ ุฎูุงูุฏ ฺฏุฑูุช - ููุงุทู ุฌุบุฑุงูุง ุชุนุฑูโุดุฏู ูุงููุฏ ููุทููโุง ุฏุฑ ูุงุตูู ฒ ฺฉูููุชุฑ ุงุฒ ูุฑฺฉุฒ ูพุฑุฏุงุฒุด - ู ูุญูู ุขุฒูุงุด ุงูฺฉู ุขุง ูุฎุชุตุงุช GPS ุฏุงุฎู ุง ุฎุงุฑุฌ ฺฉ ุญุตุงุฑ ุฌุบุฑุงูุง ูุฑุงุฑ ุฏุงุฑูุฏุ ุชุง ุจุชูุงูุฏ ุจุจูุฏ ุขุง ุญุณฺฏุฑ GPS ุดูุง ูุงุฑุฏ ุง ุฎุงุฑุฌ ฺฉ ููุทูู ุดุฏู ุงุณุช.

ุฏุฑ ุงู ุฏุฑุณ ููุงุฑุฏ ุฒุฑ ุฑุง ูพูุดุด ุฎูุงูู ุฏุงุฏ:

* [ุญุตุงุฑูุง ุฌุบุฑุงูุง ฺุณุชูุฏ](../../../../../3-transport/lessons/4-geofences)
* [ุชุนุฑู ฺฉ ุญุตุงุฑ ุฌุบุฑุงูุง](../../../../../3-transport/lessons/4-geofences)
* [ุขุฒูุงุด ููุงุท ุฏุฑ ุจุฑุงุจุฑ ฺฉ ุญุตุงุฑ ุฌุบุฑุงูุง](../../../../../3-transport/lessons/4-geofences)
* [ุงุณุชูุงุฏู ุงุฒ ุญุตุงุฑูุง ุฌุบุฑุงูุง ุฏุฑ ฺฉุฏ ุจุฏูู ุณุฑูุฑ](../../../../../3-transport/lessons/4-geofences)

> ๐ ุงู ุขุฎุฑู ุฏุฑุณ ุฏุฑ ุงู ูพุฑูฺู ุงุณุชุ ุจูุงุจุฑุงู ูพุณ ุงุฒ ุชฺฉูู ุงู ุฏุฑุณ ู ุชฺฉููุ ูุฑุงููุด ูฺฉูุฏ ฺฉู ุฎุฏูุงุช ุงุจุฑ ุฎูุฏ ุฑุง ูพุงฺฉ ฺฉูุฏ. ุดูุง ุจุฑุง ุชฺฉูู ุชฺฉูู ุจู ุงู ุฎุฏูุงุช ูุงุฒ ุฏุงุฑุฏุ ุจูุงุจุฑุงู ุงุจุชุฏุง ูุทูุฆู ุดูุฏ ฺฉู ุชฺฉูู ุฑุง ฺฉุงูู ฺฉุฑุฏูโุงุฏ.
>
> ุฏุฑ ุตูุฑุช ูุงุฒุ ุจู [ุฑุงูููุง ูพุงฺฉุณุงุฒ ูพุฑูฺู](../../../clean-up.md) ูุฑุงุฌุนู ฺฉูุฏ.

## ุญุตุงุฑูุง ุฌุบุฑุงูุง ฺุณุชูุฏ

ุญุตุงุฑ ุฌุบุฑุงูุง ฺฉ ูุญุท ูุฌุงุฒ ุจุฑุง ฺฉ ููุทูู ุฌุบุฑุงูุง ูุงูุน ุงุณุช. ุญุตุงุฑูุง ุฌุบุฑุงูุง ูโุชูุงููุฏ ุฏุงุฑูโูุง ุจุงุดูุฏ ฺฉู ุจู ุนููุงู ฺฉ ููุทู ู ุดุนุงุน ุชุนุฑู ุดุฏูโุงูุฏ (ุจุฑุง ูุซุงู ฺฉ ุฏุงุฑู ุจู ุนุฑุถ ฑฐฐ ูุชุฑ ุงุทุฑุงู ฺฉ ุณุงุฎุชูุงู)ุ ุง ฺฉ ฺูุฏุถูุน ฺฉู ููุทููโุง ูุงููุฏ ูุญุฏูุฏู ูุฏุฑุณูุ ูุฑุฒูุง ุดูุฑุ ุง ูพุฑุฏุณ ุฏุงูุดฺฏุงู ุง ุฏูุชุฑ ุฑุง ูพูุดุด ูโุฏูุฏ.

![ูููููโูุง ุงุฒ ุญุตุงุฑูุง ุฌุบุฑุงูุง ฺฉู ฺฉ ุญุตุงุฑ ุฏุงุฑูโุง ุงุทุฑุงู ูุฑูุดฺฏุงู ุดุฑฺฉุช ูุงฺฉุฑูุณุงูุช ู ฺฉ ุญุตุงุฑ ฺูุฏุถูุน ุงุทุฑุงู ูพุฑุฏุณ ุบุฑุจ ูุงฺฉุฑูุณุงูุช ุฑุง ูุดุงู ูโุฏููุฏ](../../../../../translated_images/geofence-examples.172fbc534665769f6e1a1ddcf75e3b25183cd10354c80cc603ba44b635390e1a.fa.png)

> ๐ ููฺฉู ุงุณุช ูุจูุงู ุจุฏูู ุงูฺฉู ุจุฏุงูุฏ ุงุฒ ุญุตุงุฑูุง ุฌุบุฑุงูุง ุงุณุชูุงุฏู ฺฉุฑุฏู ุจุงุดุฏ. ุงฺฏุฑ ุจุง ุงุณุชูุงุฏู ุงุฒ ุงูพูฺฉุดู ุงุฏุขูุฑ iOS ุง Google Keep ุจุฑ ุงุณุงุณ ฺฉ ูฺฉุงู ุงุฏุขูุฑ ุชูุธู ฺฉุฑุฏูโุงุฏุ ุงุฒ ุญุตุงุฑ ุฌุบุฑุงูุง ุงุณุชูุงุฏู ฺฉุฑุฏูโุงุฏ. ุงู ุงูพูฺฉุดูโูุง ุจุฑ ุงุณุงุณ ูฺฉุงู ุฏุงุฏูโุดุฏู ฺฉ ุญุตุงุฑ ุฌุบุฑุงูุง ุชูุธู ูโฺฉููุฏ ู ููฺฏุงู ฺฉู ุชููู ุดูุง ูุงุฑุฏ ุญุตุงุฑ ุฌุบุฑุงูุง ูโุดูุฏุ ุจู ุดูุง ูุดุฏุงุฑ ูโุฏููุฏ.

ุฏูุงู ุฒุงุฏ ูุฌูุฏ ุฏุงุฑุฏ ฺฉู ุจุฎูุงูุฏ ุจุฏุงูุฏ ฺฉ ูุณูู ูููู ุฏุงุฎู ุง ุฎุงุฑุฌ ฺฉ ุญุตุงุฑ ุฌุบุฑุงูุง ุงุณุช:

* ุขูุงุฏูโุณุงุฒ ุจุฑุง ุชุฎูู - ุฏุฑุงูุช ฺฉ ุงุนูุงู ฺฉู ูุณูู ูููู ุจู ูุญู ุฑุณุฏู ุงุณุช ุจู ุชู ุงุฌุงุฒู ูโุฏูุฏ ุชุง ุจุฑุง ุชุฎูู ูุณูู ูููู ุขูุงุฏู ุดููุฏุ ุฒูุงู ุงูุชุธุงุฑ ูุณูู ูููู ุฑุง ฺฉุงูุด ุฏููุฏ. ุงู ูโุชูุงูุฏ ุจู ุฑุงููุฏู ุงุฌุงุฒู ุฏูุฏ ุฏุฑ ฺฉ ุฑูุฒ ุชุญููโูุง ุจุดุชุฑ ุงูุฌุงู ุฏูุฏ.
* ุฑุนุงุช ูุงูุงุช - ุจุฑุฎ ฺฉุดูุฑูุงุ ูุงููุฏ ููุฒููุฏุ ูุงูุงุช ุฌุงุฏูโุง ุจุฑุง ูุณุงู ูููู ุฏุฒู ุจุฑ ุงุณุงุณ ูุฒู ูุณูู ูููู ููุท ููฺฏุงู ุฑุงููุฏฺฏ ุฏุฑ ุฌุงุฏูโูุง ุนููู ุฏุฑุงูุช ูโฺฉููุฏ. ุงุณุชูุงุฏู ุงุฒ ุญุตุงุฑูุง ุฌุบุฑุงูุง ุจู ุดูุง ุงูฺฉุงู ูโุฏูุฏ ูุณุงูุช ุทโุดุฏู ุฏุฑ ุฌุงุฏูโูุง ุนููู ุฑุง ุฏุฑ ููุงุจู ุฌุงุฏูโูุง ุฎุตูุต ุฏุฑ ูฺฉุงูโูุง ูุงููุฏ ูุฒุงุฑุน ุง ููุงุทู ุฌูฺฏู ุฑุฏุงุจ ฺฉูุฏ.
* ูุธุงุฑุช ุจุฑ ุณุฑูุช - ุงฺฏุฑ ูุณูู ูููู ุจุงุฏ ููุท ุฏุฑ ฺฉ ููุทูู ุฎุงุต ูุงููุฏ ฺฉ ูุฒุฑุนู ุจุงู ุจูุงูุฏ ู ุงุฒ ุญุตุงุฑ ุฌุบุฑุงูุง ุฎุงุฑุฌ ุดูุฏุ ููฺฉู ุงุณุช ุฏุฒุฏุฏู ุดุฏู ุจุงุดุฏ.
* ุฑุนุงุช ูฺฉุงู - ุจุฑุฎ ูุณูุชโูุง ฺฉ ุณุงุช ฺฉุงุฑุ ูุฒุฑุนู ุง ฺฉุงุฑุฎุงูู ููฺฉู ุงุณุช ุจุฑุง ูุณุงู ูููู ุฎุงุต ููููุน ุจุงุดุฏุ ูุงููุฏ ุฏูุฑ ูฺฏู ุฏุงุดุชู ูุณุงู ูููู ุญุงูู ฺฉูุฏูุง ูุตููุน ู ุขูุชโฺฉุดโูุง ุงุฒ ูุฒุงุฑุน ุชููุฏ ูุญุตููุงุช ุงุฑฺฏุงูฺฉ. ุงฺฏุฑ ฺฉ ุญุตุงุฑ ุฌุบุฑุงูุง ูุงุฑุฏ ุดูุฏุ ูุณูู ูููู ุฎุงุฑุฌ ุงุฒ ุฑุนุงุช ููุงูู ุงุณุช ู ูโุชูุงู ุจู ุฑุงููุฏู ุงุทูุงุน ุฏุงุฏ.

โ ุขุง ูโุชูุงูุฏ ุจู ฺฉุงุฑุจุฑุฏูุง ุฏฺฏุฑ ุจุฑุง ุญุตุงุฑูุง ุฌุบุฑุงูุง ูฺฉุฑ ฺฉูุฏุ

Azure Mapsุ ุณุฑูุณ ฺฉู ุฏุฑ ุฏุฑุณ ูุจู ุจุฑุง ููุงุด ุฏุงุฏูโูุง GPS ุงุณุชูุงุฏู ฺฉุฑุฏุฏุ ุจู ุดูุง ุงูฺฉุงู ูโุฏูุฏ ุญุตุงุฑูุง ุฌุบุฑุงูุง ุชุนุฑู ฺฉูุฏ ู ุณูพุณ ุขุฒูุงุด ฺฉูุฏ ฺฉู ุขุง ฺฉ ููุทู ุฏุงุฎู ุง ุฎุงุฑุฌ ุญุตุงุฑ ุฌุบุฑุงูุง ุงุณุช.

## ุชุนุฑู ฺฉ ุญุตุงุฑ ุฌุบุฑุงูุง

ุญุตุงุฑูุง ุฌุบุฑุงูุง ุจุง ุงุณุชูุงุฏู ุงุฒ GeoJSON ุชุนุฑู ูโุดููุฏุ ููุงูุทูุฑ ฺฉู ููุงุท ฺฉู ุฏุฑ ุฏุฑุณ ูุจู ุจู ููุดู ุงุถุงูู ุดุฏูุฏ. ุฏุฑ ุงู ููุฑุฏุ ุจู ุฌุง ุงูฺฉู ฺฉ `FeatureCollection` ุงุฒ ููุงุฏุฑ `Point` ุจุงุดุฏุ ฺฉ `FeatureCollection` ุดุงูู ฺฉ `Polygon` ุงุณุช.

```json
{
   "type": "FeatureCollection",
   "features": [
     {
       "type": "Feature",
       "geometry": {
         "type": "Polygon",
         "coordinates": [
           [
             [
               -122.13393688201903,
               47.63829579223815
             ],
             [
               -122.13389128446579,
               47.63782047131512
             ],
             [
               -122.13240802288054,
               47.63783312249837
             ],
             [
               -122.13238388299942,
               47.63829037035086
             ],
             [
               -122.13393688201903,
               47.63829579223815
             ]
           ]
         ]
       },
       "properties": {
         "geometryId": "1"
       }
     }
   ]
}
```

ูุฑ ููุทู ุฑู ฺูุฏุถูุน ุจู ุนููุงู ฺฉ ุฌูุช ุทูู ู ุนุฑุถ ุฌุบุฑุงูุง ุฏุฑ ฺฉ ุขุฑุงู ุชุนุฑู ุดุฏู ุงุณุชุ ู ุงู ููุงุท ุฏุฑ ฺฉ ุขุฑุงู ูุฑุงุฑ ุฏุงุฑูุฏ ฺฉู ุจู ุนููุงู `coordinates` ุชูุธู ุดุฏู ุงุณุช. ุฏุฑ ฺฉ `Point` ุฏุฑ ุฏุฑุณ ูุจูุ `coordinates` ฺฉ ุขุฑุงู ุดุงูู ฒ ููุฏุงุฑุ ุนุฑุถ ู ุทูู ุฌุบุฑุงูุง ุจูุฏุ ุจุฑุง ฺฉ `Polygon` ุงู ฺฉ ุขุฑุงู ุงุฒ ุขุฑุงูโูุง ุดุงูู ฒ ููุฏุงุฑุ ุทูู ู ุนุฑุถ ุฌุบุฑุงูุง ุงุณุช.

> ๐ ุจู ุงุฏ ุฏุงุดุชู ุจุงุดุฏุ GeoJSON ุงุฒ `ุทููุ ุนุฑุถ ุฌุบุฑุงูุง` ุจุฑุง ููุงุท ุงุณุชูุงุฏู ูโฺฉูุฏุ ูู `ุนุฑุถุ ุทูู ุฌุบุฑุงูุง`

ุขุฑุงู ูุฎุชุตุงุช ฺูุฏุถูุน ููุดู ฺฉ ูุฑูุฏ ุจุดุชุฑ ุงุฒ ุชุนุฏุงุฏ ููุงุท ุฑู ฺูุฏุถูุน ุฏุงุฑุฏุ ุจุง ูุฑูุฏ ุขุฎุฑ ฺฉู ููุงู ููุทู ุงูู ุงุณุชุ ฺูุฏุถูุน ุฑุง ูโุจูุฏุฏ. ุจุฑุง ูุซุงูุ ุจุฑุง ฺฉ ูุณุชุทู ต ููุทู ูุฌูุฏ ุฎูุงูุฏ ุฏุงุดุช.

![ฺฉ ูุณุชุทู ุจุง ูุฎุชุตุงุช](../../../../../translated_images/polygon-points.302193da381cb415f46c2c7a98496ee4be05d6c73d21238a89721ad93e121233.fa.png)

ุฏุฑ ุชุตูุฑ ุจุงูุงุ ฺฉ ูุณุชุทู ูุฌูุฏ ุฏุงุฑุฏ. ูุฎุชุตุงุช ฺูุฏุถูุน ุงุฒ ฺฏูุดู ุจุงูุง-ฺูพ ุฏุฑ ดทุ-ฑฒฒ ุดุฑูุน ูโุดูุฏุ ุณูพุณ ุจู ุฑุงุณุช ุจู ดทุ-ฑฒฑ ุญุฑฺฉุช ูโฺฉูุฏุ ุณูพุณ ุจู ูพุงู ุจู ดถุ-ฑฒฑุ ุณูพุณ ุจู ฺูพ ุจู ดถุ-ฑฒฒุ ุณูพุณ ุจู ููุทู ุดุฑูุน ุฏุฑ ดทุ-ฑฒฒ ุจุงุฒูโฺฏุฑุฏุฏ. ุงู ุจู ฺูุฏุถูุน ต ููุทู ูโุฏูุฏ - ุจุงูุง-ฺูพุ ุจุงูุง-ุฑุงุณุชุ ูพุงู-ุฑุงุณุชุ ูพุงู-ฺูพุ ุณูพุณ ุจุงูุง-ฺูพ ุจุฑุง ุจุณุชู ุขู.

โ ุณุน ฺฉูุฏ ฺฉ ฺูุฏุถูุน GeoJSON ุงุทุฑุงู ุฎุงูู ุง ูุฏุฑุณู ุฎูุฏ ุงุฌุงุฏ ฺฉูุฏ. ุงุฒ ุงุจุฒุงุฑ ูุงููุฏ [GeoJSON.io](https://geojson.io/) ุงุณุชูุงุฏู ฺฉูุฏ.

### ูุธูู - ุชุนุฑู ฺฉ ุญุตุงุฑ ุฌุบุฑุงูุง

ุจุฑุง ุงุณุชูุงุฏู ุงุฒ ฺฉ ุญุตุงุฑ ุฌุบุฑุงูุง ุฏุฑ Azure Mapsุ ุงุจุชุฏุง ุจุงุฏ ุจู ุญุณุงุจ Azure Maps ุดูุง ุขูพููุฏ ุดูุฏ. ูพุณ ุงุฒ ุขูพููุฏุ ฺฉ ุดูุงุณู ููุญุตุฑ ุจู ูุฑุฏ ุฏุฑุงูุช ุฎูุงูุฏ ฺฉุฑุฏ ฺฉู ูโุชูุงูุฏ ุงุฒ ุขู ุจุฑุง ุขุฒูุงุด ฺฉ ููุทู ุฏุฑ ุจุฑุงุจุฑ ุญุตุงุฑ ุฌุบุฑุงูุง ุงุณุชูุงุฏู ฺฉูุฏ. ุจุฑุง ุขูพููุฏ ุญุตุงุฑูุง ุฌุบุฑุงูุง ุจู Azure Mapsุ ุจุงุฏ ุงุฒ API ูุจ ููุดูโูุง ุงุณุชูุงุฏู ฺฉูุฏ. ุดูุง ูโุชูุงูุฏ API ูุจ Azure Maps ุฑุง ุจุง ุงุณุชูุงุฏู ุงุฒ ุงุจุฒุงุฑ ุจู ูุงู [curl](https://curl.se) ูุฑุงุฎูุงู ฺฉูุฏ.

> ๐ Curl ฺฉ ุงุจุฒุงุฑ ุฎุท ูุฑูุงู ุจุฑุง ุงูุฌุงู ุฏุฑุฎูุงุณุชโูุง ุจู ููุงุท ูพุงุงู ูุจ ุงุณุช

1. ุงฺฏุฑ ุงุฒ ูููฺฉุณุ macOSุ ุง ูุณุฎู ุงุฎุฑ ููุฏูุฒ ฑฐ ุงุณุชูุงุฏู ูโฺฉูุฏุ ุงุญุชูุงูุงู curl ุงุฒ ูุจู ูุตุจ ุดุฏู ุงุณุช. ุฏุณุชูุฑ ุฒุฑ ุฑุง ุงุฒ ุชุฑููุงู ุง ุฎุท ูุฑูุงู ุฎูุฏ ุงุฌุฑุง ฺฉูุฏ ุชุง ุจุฑุฑุณ ฺฉูุฏ:

    ```sh
    curl --version
    ```

    ุงฺฏุฑ ุงุทูุงุนุงุช ูุณุฎู curl ุฑุง ูุดุงูุฏู ูฺฉุฑุฏุฏุ ุจุงุฏ ุขู ุฑุง ุงุฒ [ุตูุญู ุฏุงูููุฏ curl](https://curl.se/download.html) ูุตุจ ฺฉูุฏ.

    > ๐ ุงฺฏุฑ ุจุง Postman ุชุฌุฑุจู ุฏุงุฑุฏุ ูโุชูุงูุฏ ุจู ุฌุง ุขู ุงุฒ ุงู ุงุจุฒุงุฑ ุงุณุชูุงุฏู ฺฉูุฏ.

1. ฺฉ ูุงู GeoJSON ุญุงู ฺฉ ฺูุฏุถูุน ุงุฌุงุฏ ฺฉูุฏ. ุดูุง ุงู ูุงู ุฑุง ุจุง ุงุณุชูุงุฏู ุงุฒ ุญุณฺฏุฑ GPS ุฎูุฏ ุขุฒูุงุด ุฎูุงูุฏ ฺฉุฑุฏุ ุจูุงุจุฑุงู ฺฉ ฺูุฏุถูุน ุงุทุฑุงู ูฺฉุงู ูุนู ุฎูุฏ ุงุฌุงุฏ ฺฉูุฏ. ูโุชูุงูุฏ ฺฉ ุฑุง ุจู ุตูุฑุช ุฏุณุช ุจุง ูุฑุงุด ูุซุงู GeoJSON ุฏุงุฏูโุดุฏู ุฏุฑ ุจุงูุง ุงุฌุงุฏ ฺฉูุฏุ ุง ุงุฒ ุงุจุฒุงุฑ ูุงููุฏ [GeoJSON.io](https://geojson.io/) ุงุณุชูุงุฏู ฺฉูุฏ.

    GeoJSON ุจุงุฏ ุดุงูู ฺฉ `FeatureCollection` ุจุงุดุฏ ฺฉู ุดุงูู ฺฉ `Feature` ุจุง ฺฉ `geometry` ุงุฒ ููุน `Polygon` ุงุณุช.

    ุดูุง **ุจุงุฏ** ููฺูู ฺฉ ุนูุตุฑ `properties` ุฏุฑ ููุงู ุณุทุญ ุนูุตุฑ `geometry` ุงุถุงูู ฺฉูุฏุ ู ุงู ุจุงุฏ ุดุงูู ฺฉ `geometryId` ุจุงุดุฏ:

    ```json
    "properties": {
        "geometryId": "1"
    }
    ```

    ุงฺฏุฑ ุงุฒ [GeoJSON.io](https://geojson.io/) ุงุณุชูุงุฏู ูโฺฉูุฏุ ุจุงุฏ ุงู ุขุชู ุฑุง ุจู ุตูุฑุช ุฏุณุช ุจู ุนูุตุฑ ุฎุงู `properties` ุงุถุงูู ฺฉูุฏุ ุง ูพุณ ุงุฒ ุฏุงูููุฏ ูุงู JSONุ ุง ุฏุฑ ูุฑุงุดฺฏุฑ JSON ุฏุฑ ุงูพูฺฉุดู.

    ุงู `geometryId` ุจุงุฏ ุฏุฑ ุงู ูุงู ููุญุตุฑ ุจู ูุฑุฏ ุจุงุดุฏ. ุดูุง ูโุชูุงูุฏ ฺูุฏู ุญุตุงุฑ ุฌุบุฑุงูุง ุฑุง ุจู ุนููุงู ฺูุฏู `Feature` ุฏุฑ `FeatureCollection` ุฏุฑ ููุงู ูุงู GeoJSON ุขูพููุฏ ฺฉูุฏุ ุจู ุดุฑุท ฺฉู ูุฑ ฺฉุฏุงู ฺฉ `geometryId` ูุชูุงูุช ุฏุงุดุชู ุจุงุดูุฏ. ฺูุฏุถูุนโูุง ูโุชูุงููุฏ ููุงู `geometryId` ุฑุง ุฏุงุดุชู ุจุงุดูุฏ ุงฺฏุฑ ุงุฒ ฺฉ ูุงู ูุชูุงูุช ุฏุฑ ุฒูุงู ูุชูุงูุช ุขูพููุฏ ุดููุฏ.

1. ุงู ูุงู ุฑุง ุจู ูุงู `geofence.json` ุฐุฎุฑู ฺฉูุฏ ู ุฏุฑ ุชุฑููุงู ุง ฺฉูุณูู ุฎูุฏ ุจู ูุญู ุฐุฎุฑู ุขู ุจุฑูุฏ.

1. ุฏุณุชูุฑ curl ุฒุฑ ุฑุง ุจุฑุง ุงุฌุงุฏ ุญุตุงุฑ ุฌุบุฑุงูุง ุงุฌุฑุง ฺฉูุฏ:

    ```sh
    curl --request POST 'https://atlas.microsoft.com/mapData/upload?api-version=1.0&dataFormat=geojson&subscription-key=<subscription_key>' \
         --header 'Content-Type: application/json' \
         --include \
         --data @geofence.json
    ```

    `<subscription_key>` ุฑุง ุฏุฑ URL ุจุง ฺฉูุฏ API ุญุณุงุจ Azure Maps ุฎูุฏ ุฌุงฺฏุฒู ฺฉูุฏ.

    URL ุจุฑุง ุขูพููุฏ ุฏุงุฏูโูุง ููุดู ุงุฒ ุทุฑู API `https://atlas.microsoft.com/mapData/upload` ุงุณุชูุงุฏู ูโุดูุฏ. ุงู ูุฑุงุฎูุงู ุดุงูู ฺฉ ูพุงุฑุงูุชุฑ `api-version` ุจุฑุง ูุดุฎุต ฺฉุฑุฏู ูุณุฎู API Azure Maps ุงุณุชุ ุงู ุจุฑุง ุงุฌุงุฒู ุชุบุฑ API ุฏุฑ ุทูู ุฒูุงู ุงูุง ุญูุธ ุณุงุฒฺฏุงุฑ ุจุง ูุณุฎูโูุง ูุจู ุงุณุช. ูุฑูุช ุฏุงุฏูโุง ฺฉู ุขูพููุฏ ูโุดูุฏ ุจู `geojson` ุชูุธู ุดุฏู ุงุณุช.

    ุงู ุฏุฑุฎูุงุณุช POST ุฑุง ุจู API ุขูพููุฏ ุงุฌุฑุง ูโฺฉูุฏ ู ูุณุช ุงุฒ ูุฏุฑูุง ูพุงุณุฎ ุฑุง ุจุงุฒูโฺฏุฑุฏุงูุฏ ฺฉู ุดุงูู ฺฉ ูุฏุฑ ุจู ูุงู `location` ุงุณุช.

    ```output
    content-type: application/json
    location: https://us.atlas.microsoft.com/mapData/operations/1560ced6-3a80-46f2-84b2-5b1531820eab?api-version=1.0
    x-ms-azuremaps-region: West US 2
    x-content-type-options: nosniff
    strict-transport-security: max-age=31536000; includeSubDomains
    x-cache: CONFIG_NOCACHE
    date: Sat, 22 May 2021 21:34:57 GMT
    content-length: 0
    ```

    > ๐ ููฺฏุงู ูุฑุงุฎูุงู ฺฉ ููุทู ูพุงุงู ูุจุ ูโุชูุงูุฏ ูพุงุฑุงูุชุฑูุง ุฑุง ุจุง ุงูุฒูุฏู `?` ู ุณูพุณ ุฌูุชโูุง ฺฉูุฏ-ููุฏุงุฑ ุจู ุตูุฑุช `key=value`ุ ุฌุฏุง ฺฉุฑุฏู ุฌูุชโูุง ฺฉูุฏ-ููุฏุงุฑ ุจุง `&`ุ ุจู ูุฑุงุฎูุงู ุงุถุงูู ฺฉูุฏ.

1. Azure Maps ุงู ุฑุง ุจูุงูุงุตูู ูพุฑุฏุงุฒุด ููโฺฉูุฏุ ุจูุงุจุฑุงู ุจุงุฏ ุจุฑุฑุณ ฺฉูุฏ ฺฉู ุขุง ุฏุฑุฎูุงุณุช ุขูพููุฏ ุจู ูพุงุงู ุฑุณุฏู ุงุณุช ุง ุฎุฑุ ุจุง ุงุณุชูุงุฏู ุงุฒ URL ุฏุงุฏูโุดุฏู ุฏุฑ ูุฏุฑ `location`. ฺฉ ุฏุฑุฎูุงุณุช GET ุจู ุงู ูฺฉุงู ุงูุฌุงู ุฏูุฏ ุชุง ูุถุนุช ุฑุง ุจุจูุฏ. ุดูุง ุจุงุฏ ฺฉูุฏ ุงุดุชุฑุงฺฉ ุฎูุฏ ุฑุง ุจู ุงูุชูุง URL `location` ุงุถุงูู ฺฉูุฏุ ุจุง ุงูุฒูุฏู `&subscription-key=<subscription_key>` ุจู ุงูุชูุงุ `<subscription_key>` ุฑุง ุจุง ฺฉูุฏ API ุญุณุงุจ Azure Maps ุฎูุฏ ุฌุงฺฏุฒู ฺฉูุฏ. ุฏุณุชูุฑ ุฒุฑ ุฑุง ุงุฌุฑุง ฺฉูุฏ:

    ```sh
    curl --request GET '<location>&subscription-key=<subscription_key>'
    ```

    `<location>` ุฑุง ุจุง ููุฏุงุฑ ูุฏุฑ `location` ู `<subscription_key>` ุฑุง ุจุง ฺฉูุฏ API ุญุณุงุจ Azure Maps ุฎูุฏ ุฌุงฺฏุฒู ฺฉูุฏ.

1. ููุฏุงุฑ `status` ุฏุฑ ูพุงุณุฎ ุฑุง ุจุฑุฑุณ ฺฉูุฏ. ุงฺฏุฑ `Succeeded` ูุณุชุ ฺฉ ุฏููู ุตุจุฑ ฺฉูุฏ ู ุฏูุจุงุฑู ุงูุชุญุงู ฺฉูุฏ.

1. ููฺฏุงู ฺฉู ูุถุนุช ุจู ุตูุฑุช `Succeeded` ุจุงุฒูโฺฏุฑุฏุฏุ ุจู `resourceLocation` ุงุฒ ูพุงุณุฎ ูฺฏุงู ฺฉูุฏ. ุงู ุดุงูู ุฌุฒุฆุงุช ุดูุงุณู ููุญุตุฑ ุจู ูุฑุฏ (UDID) ุจุฑุง ุดุก GeoJSON ุงุณุช. UDID ููุฏุงุฑ ุงุณุช ฺฉู ุจุนุฏ ุงุฒ `metadata/` ูุฑุงุฑ ุฏุงุฑุฏ ู ุดุงูู `api-version` ููโุดูุฏ. ุจุฑุง ูุซุงูุ ุงฺฏุฑ `resourceLocation` ุจู ุตูุฑุช ุฒุฑ ุจูุฏ:

    ```json
    {
      "resourceLocation": "https://us.atlas.microsoft.com/mapData/metadata/7c3776eb-da87-4c52-ae83-caadf980323a?api-version=1.0"
    }
    ```

    ุณูพุณ UDID ุจู ุตูุฑุช `7c3776eb-da87-4c52-ae83-caadf980323a` ุฎูุงูุฏ ุจูุฏ.

    ฺฉ ูุณุฎู ุงุฒ ุงู UDID ุฑุง ูฺฏู ุฏุงุฑุฏ ุฒุฑุง ุจุฑุง ุขุฒูุงุด ุญุตุงุฑ ุฌุบุฑุงูุง ุจู ุขู ูุงุฒ ุฎูุงูุฏ ุฏุงุดุช.

## ุขุฒูุงุด ููุงุท ุฏุฑ ุจุฑุงุจุฑ ฺฉ ุญุตุงุฑ ุฌุบุฑุงูุง

ูพุณ ุงุฒ ุขูพููุฏ ฺูุฏุถูุน ุจู Azure Mapsุ ูโุชูุงูุฏ ฺฉ ููุทู ุฑุง ุขุฒูุงุด ฺฉูุฏ ุชุง ุจุจูุฏ ุขุง ุฏุงุฎู ุง ุฎุงุฑุฌ ุญุตุงุฑ ุฌุบุฑุงูุง ุงุณุช. ุงู ฺฉุงุฑ ุฑุง ุจุง ุงูุฌุงู ฺฉ ุฏุฑุฎูุงุณุช API ูุจุ ุงุฑุณุงู UDID ุญุตุงุฑ ุฌุบุฑุงูุง ู ุนุฑุถ ู ุทูู ุฌุบุฑุงูุง ููุทู ุจุฑุง ุขุฒูุงุด ุงูุฌุงู ูโุฏูุฏ.

ููฺฏุงู ุงูุฌุงู ุงู ุฏุฑุฎูุงุณุชุ ูโุชูุงูุฏ ููุฏุงุฑ ุจู ูุงู `searchBuffer` ุฑุง ูุฒ ุงุฑุณุงู ฺฉูุฏ. ุงู ููุฏุงุฑ ุจู API Maps ูโฺฏูุฏ ฺฉู ฺูุฏุฑ ุฏูู ุจุงุดุฏ ููฺฏุงู ุจุงุฒฺฏุฑุฏุงูุฏู ูุชุงุฌ. ุฏูู ุงู ุงูุฑ ุงู ุงุณุช ฺฉู GPS ฺฉุงููุงู ุฏูู ูุณุช ู ฺฏุงู ุงููุงุช ูฺฉุงูโูุง ูโุชูุงููุฏ ฺูุฏ ูุชุฑ ุง ุจุดุชุฑ ุฎุงุฑุฌ ุจุงุดูุฏ. ููุฏุงุฑ ูพุดโูุฑุถ ุจุฑุง search buffer ุจุฑุงุจุฑ ุจุง ตฐ ูุชุฑ ุงุณุชุ ุงูุง ูโุชูุงูุฏ ููุงุฏุฑ ุจู ฐ ูุชุฑ ุชุง ตฐฐ ูุชุฑ ุชูุธู ฺฉูุฏ.

ููฺฏุงู ุจุงุฒฺฏุฑุฏุงูุฏู ูุชุงุฌ ุงุฒ ูุฑุงุฎูุงู APIุ ฺฉ ุงุฒ ุจุฎุดโูุง ูุชุฌู ฺฉ `distance` ุงุณุช ฺฉู ุจู ูุฒุฏฺฉโุชุฑู ููุทู ุฑู ูุจู ุญุตุงุฑ ุฌุบุฑุงูุง ุงูุฏุงุฒูโฺฏุฑ ุดุฏู ุงุณุชุ ุจุง ููุฏุงุฑ ูุซุจุช ุงฺฏุฑ ููุทู ุฎุงุฑุฌ ุญุตุงุฑ ุฌุบุฑุงูุง ุจุงุดุฏุ ู ููุฏุงุฑ ููู ุงฺฏุฑ ุฏุงุฎู ุญุตุงุฑ ุฌุบุฑุงูุง ุจุงุดุฏ. ุงฺฏุฑ ุงู ูุงุตูู ฺฉูุชุฑ ุงุฒ search buffer ุจุงุดุฏุ ูุงุตูู ูุงูุน ุจู ูุชุฑ ุจุงุฒฺฏุฑุฏุงูุฏู ูโุดูุฏุ ุฏุฑ ุบุฑ ุงู ุตูุฑุช ููุฏุงุฑ นนน ุง -นนน ุจุงุฒฺฏุฑุฏุงูุฏู ูโุดูุฏ. นนน ุจู ุงู ูุนู ุงุณุช ฺฉู ููุทู ุฎุงุฑุฌ ุญุตุงุฑ ุฌุบุฑุงูุง ุงุณุช ู ุจุด ุงุฒ search buffer ูุงุตูู ุฏุงุฑุฏุ -นนน ุจู ุงู ูุนู ุงุณุช ฺฉู ููุทู ุฏุงุฎู ุญุตุงุฑ ุฌุบุฑุงูุง ุงุณุช ู ุจุด ุงุฒ search buffer ูุงุตูู ุฏุงุฑุฏ.

![ฺฉ ุญุตุงุฑ ุฌุบุฑุงูุง ุจุง ฺฉ search buffer ตฐ ูุชุฑ ุงุทุฑุงู ุขู](../../../../../translated_images/search-buffer-and-distance.e6a79af3898183c7b2ef6fbf12271b8b34afd23969bb946962b1b18d3d2635e8.fa.png)

ุฏุฑ ุชุตูุฑ ุจุงูุงุ ุญุตุงุฑ ุฌุบุฑุงูุง ฺฉ search buffer ตฐ ูุชุฑ ุฏุงุฑุฏ.

* ฺฉ ููุทู ุฏุฑ ูุฑฺฉุฒ ุญุตุงุฑ ุฌุบุฑุงูุงุ ฺฉุงููุงู ุฏุงุฎู search buffer ุฏุงุฑุง ูุงุตูู **-นนน** ุงุณุช.
* ฺฉ ููุทู ฺฉุงููุงู ุฎุงุฑุฌ search buffer ุฏุงุฑุง ูุงุตูู **นนน** ุงุณุช.
* ฺฉ ููุทู ุฏุงุฎู ุญุตุงุฑ ุฌุบุฑุงูุง ู ุฏุงุฎู search bufferุ ถ ูุชุฑ ุงุฒ ุญุตุงุฑ ุฌุบุฑุงูุง ูุงุตูู ุฏุงุฑุฏุ ุฏุงุฑุง ูุงุตูู **ถ ูุชุฑ** ุงุณุช.
* ฺฉ ููุทู ุฎุงุฑุฌ ุญุตุงุฑ ุฌุบุฑุงูุง ู ุฏุงุฎู search bufferุ ณน ูุชุฑ ุงุฒ ุญุตุงุฑ ุฌุบุฑุงูุง ูุงุตูู ุฏุงุฑุฏุ ุฏุงุฑุง ูุงุตูู **ณน ูุชุฑ** ุงุณุช.

ููู ุงุณุช ฺฉู ูุงุตูู ุชุง ูุจู ุญุตุงุฑ ุฌุบุฑุงูุง ุฑุง ุจุฏุงูุฏ ู ุงู ุฑุง ุจุง ุงุทูุงุนุงุช ุฏฺฏุฑ ูุงููุฏ ูุฑุงุฆุชโูุง ุฏฺฏุฑ GPSุ ุณุฑุนุช ู ุฏุงุฏูโูุง ุฌุงุฏู ุชุฑฺฉุจ ฺฉูุฏ ููฺฏุงู ุชุตููโฺฏุฑ ุจุฑ ุงุณุงุณ ูฺฉุงู ูุณูู ูููู.

ุจุฑุง ูุซุงูุ ุชุตูุฑ ฺฉูุฏ ูุฑุงุฆุชโูุง GPS ูุดุงู ูโุฏููุฏ ฺฉู ฺฉ ูุณูู ูููู ุฏุฑ ุญุงู ุฑุงููุฏฺฏ ุฏุฑ ุงูุชุฏุงุฏ ุฌุงุฏูโุง ุงุณุช ฺฉู ุฏุฑ ููุงุช ุฏุฑ ฺฉูุงุฑ ฺฉ ุญุตุงุฑ ุฌุบุฑุงูุง ูุฑุงุฑ ุฏุงุฑุฏ. ุงฺฏุฑ ฺฉ ููุฏุงุฑ GPS ูููุฑุฏ ูุงุฏุฑุณุช ุจุงุดุฏ ู ูุณูู ูููู ุฑุง ุฏุงุฎู ุญุตุงุฑ ุฌุบุฑุงูุง ูุฑุงุฑ ุฏูุฏุ ุจุง ูุฌูุฏ ุงูฺฉู ุฏุณุชุฑุณ ูุณุงู ูููู ูุฌูุฏ ูุฏุงุฑุฏุ ูโุชูุงู ุขู ุฑุง ูุงุฏุฏู ฺฏุฑูุช.

![ฺฉ ูุณุฑ GPS ฺฉู ูุดุงู ูโุฏูุฏ ูุณูู ูููู ุงุฒ ฺฉูุงุฑ ูพุฑุฏุณ ูุงฺฉุฑูุณุงูุช ุฏุฑ ุฌุงุฏู ตฒฐ ุนุจูุฑ ูโฺฉูุฏุ ุจุง ูุฑุงุฆุชโูุง GPS ุฏุฑ ุงูุชุฏุงุฏ ุฌุงุฏู ุจู ุฌุฒ ฺฉ ุฏุฑ ูพุฑุฏุณุ ุฏุงุฎู ฺฉ ุญุตุงุฑ ุฌุบุฑุงูุง](../../../../../translated_images/geofence-crossing-inaccurate-gps.6a3ed911202ad9cabb66d3964888cec03a42c61d5b8f536ad5bdc99716b370f5.fa.png)
ุฏุฑ ุชุตูุฑ ุจุงูุงุ ฺฉ ูุญุฏูุฏู ุฌุบุฑุงูุง (Geofence) ุจุฑ ุฑู ุจุฎุด ุงุฒ ูพุฑุฏุณ ูุงฺฉุฑูุณุงูุช ูุฑุงุฑ ุฏุงุฑุฏ. ุฎุท ูุฑูุฒ ูุดุงูโุฏููุฏู ุญุฑฺฉุช ฺฉ ฺฉุงููู ุฏุฑ ุงูุชุฏุงุฏ ุจุฒุฑฺฏุฑุงู 520 ุงุณุชุ ู ุฏุงุฑูโูุง ูุดุงูโุฏููุฏู ุฏุงุฏูโูุง GPS ูุณุชูุฏ. ุจุดุชุฑ ุงู ุฏุงุฏูโูุง ุฏูู ุจูุฏู ู ุฏุฑ ุงูุชุฏุงุฏ ุจุฒุฑฺฏุฑุงู 520 ูุฑุงุฑ ุฏุงุฑูุฏุ ุงูุง ฺฉ ุฏุงุฏู ูุงุฏุฑุณุช ุฏุฑ ุฏุงุฎู ูุญุฏูุฏู ุฌุบุฑุงูุง ุซุจุช ุดุฏู ุงุณุช. ุงู ุฏุงุฏู ููโุชูุงูุฏ ุฏุฑุณุช ุจุงุดุฏ - ูฺ ุฌุงุฏูโุง ูุฌูุฏ ูุฏุงุฑุฏ ฺฉู ฺฉุงููู ุจุชูุงูุฏ ูุงฺฏูุงู ุงุฒ ุจุฒุฑฺฏุฑุงู 520 ุจู ุฏุงุฎู ูพุฑุฏุณ ููุญุฑู ุดูุฏ ู ุณูพุณ ุฏูุจุงุฑู ุจู ุจุฒุฑฺฏุฑุงู 520 ุจุงุฒฺฏุฑุฏุฏ. ฺฉุฏ ฺฉู ุงู ูุญุฏูุฏู ุฌุบุฑุงูุง ุฑุง ุจุฑุฑุณ ูโฺฉูุฏุ ุจุงุฏ ุฏุงุฏูโูุง ูุจู ุฑุง ุฏุฑ ูุธุฑ ุจฺฏุฑุฏ ูุจู ุงุฒ ุงูฺฉู ุจุฑ ุงุณุงุณ ูุชุงุฌ ุขุฒูุงุด ูุญุฏูุฏู ุฌุบุฑุงูุง ุนูู ฺฉูุฏ.

โ ฺู ุฏุงุฏูโูุง ุงุถุงู ูุงุฒ ุฏุงุฑุฏ ุชุง ุจุฑุฑุณ ฺฉูุฏ ฺฉู ุขุง ฺฉ ุฏุงุฏู GPS ูโุชูุงูุฏ ุตุญุญ ุฏุฑ ูุธุฑ ฺฏุฑูุชู ุดูุฏุ

### ูุธูู - ุขุฒูุงุด ููุงุท ุฏุฑ ุจุฑุงุจุฑ ฺฉ ูุญุฏูุฏู ุฌุบุฑุงูุง

1. ุงุจุชุฏุง URL ูุฑุจูุท ุจู ูพุฑุณโูุฌู API ูุจ ุฑุง ุจุณุงุฒุฏ. ูุฑูุช ุขู ุจู ุตูุฑุช ุฒุฑ ุงุณุช:

    ```output
    https://atlas.microsoft.com/spatial/geofence/json?api-version=1.0&deviceId=gps-sensor&subscription-key=<subscription-key>&udid=<UDID>&lat=<lat>&lon=<lon>
    ```

    ููุฏุงุฑ `<subscription_key>` ุฑุง ุจุง ฺฉูุฏ API ุญุณุงุจ Azure Maps ุฎูุฏ ุฌุงฺฏุฒู ฺฉูุฏ.

    ููุฏุงุฑ `<UDID>` ุฑุง ุจุง UDID ูุญุฏูุฏู ุฌุบุฑุงูุง ุงุฒ ูุธูู ูุจู ุฌุงฺฏุฒู ฺฉูุฏ.

    ููุฏุงุฑ `<lat>` ู `<lon>` ุฑุง ุจุง ุนุฑุถ ู ุทูู ุฌุบุฑุงูุง ฺฉู ูโุฎูุงูุฏ ุขุฒูุงุด ฺฉูุฏ ุฌุงฺฏุฒู ฺฉูุฏ.

    ุงู URL ุงุฒ API `https://atlas.microsoft.com/spatial/geofence/json` ุจุฑุง ูพุฑุณโูุฌู ฺฉ ูุญุฏูุฏู ุฌุบุฑุงูุง ุชุนุฑูโุดุฏู ุจุง ุงุณุชูุงุฏู ุงุฒ GeoJSON ุงุณุชูุงุฏู ูโฺฉูุฏ. ุงู API ูุณุฎู `1.0` ุฑุง ูุฏู ูุฑุงุฑ ูโุฏูุฏ. ูพุงุฑุงูุชุฑ `deviceId` ุงูุฒุงู ุงุณุช ู ุจุงุฏ ูุงู ุฏุณุชฺฏุงู ุจุงุดุฏ ฺฉู ุนุฑุถ ู ุทูู ุฌุบุฑุงูุง ุงุฒ ุขู ฺฏุฑูุชู ุดุฏู ุงุณุช.

    ุจุงูุฑ ุฌุณุชุฌู ูพุดโูุฑุถ 50 ูุชุฑ ุงุณุช ู ูโุชูุงูุฏ ุงู ููุฏุงุฑ ุฑุง ุจุง ุงุถุงูู ฺฉุฑุฏู ูพุงุฑุงูุชุฑ ุงุถุงู `searchBuffer=<distance>` ุชุบุฑ ุฏูุฏ ู `<distance>` ุฑุง ุจู ูุงุตูู ุจุงูุฑ ุฌุณุชุฌู ุจุฑ ุญุณุจ ูุชุฑ (ุงุฒ 0 ุชุง 500) ุชูุธู ฺฉูุฏ.

1. ุงุฒ curl ุจุฑุง ุงุฑุณุงู ุฏุฑุฎูุงุณุช GET ุจู ุงู URL ุงุณุชูุงุฏู ฺฉูุฏ:

    ```sh
    curl --request GET '<URL>'
    ```

    > ๐ ุงฺฏุฑ ฺฉุฏ ูพุงุณุฎ `BadRequest` ุฏุฑุงูุช ฺฉุฑุฏุฏุ ุจุง ุฎุทุง ุฒุฑ:
    >
    > ```output
    > Invalid GeoJSON: All feature properties should contain a geometryId, which is used for identifying the geofence.
    > ```
    >
    > ุงู ุจุฏุงู ูุนูุงุณุช ฺฉู GeoJSON ุดูุง ุจุฎุด `properties` ุจุง `geometryId` ุฑุง ูุฏุงุฑุฏ. ุจุงุฏ GeoJSON ุฎูุฏ ุฑุง ุงุตูุงุญ ฺฉูุฏุ ุณูพุณ ูุฑุงุญู ุจุงูุง ุฑุง ุชฺฉุฑุงุฑ ฺฉุฑุฏู ู ฺฉ UDID ุฌุฏุฏ ุฏุฑุงูุช ฺฉูุฏ.

1. ูพุงุณุฎ ุดุงูู ูุณุช ุงุฒ `geometries` ุฎูุงูุฏ ุจูุฏุ ฺฉ ุจุฑุง ูุฑ ฺูุฏุถูุน ุชุนุฑูโุดุฏู ุฏุฑ GeoJSON ฺฉู ุจุฑุง ุงุฌุงุฏ ูุญุฏูุฏู ุฌุบุฑุงูุง ุงุณุชูุงุฏู ุดุฏู ุงุณุช. ูุฑ geometry ุฏุงุฑุง 3 ููุฏ ููู ุงุณุช: `distance`ุ `nearestLat` ู `nearestLon`.

    ```output
    {
        "geometries": [
            {
                "deviceId": "gps-sensor",
                "udId": "7c3776eb-da87-4c52-ae83-caadf980323a",
                "geometryId": "1",
                "distance": 999.0,
                "nearestLat": 47.645875,
                "nearestLon": -122.142713
            }
        ],
        "expiredGeofenceGeometryId": [],
        "invalidPeriodGeofenceGeometryId": []
    }
    ```

    * `nearestLat` ู `nearestLon` ุนุฑุถ ู ุทูู ุฌุบุฑุงูุง ููุทูโุง ุฏุฑ ูุจู ูุญุฏูุฏู ุฌุบุฑุงูุง ูุณุชูุฏ ฺฉู ูุฒุฏฺฉโุชุฑู ููุทู ุจู ูฺฉุงู ุขุฒูุงุดโุดุฏู ุงุณุช.

    * `distance` ูุงุตูู ูฺฉุงู ุขุฒูุงุดโุดุฏู ุชุง ูุฒุฏฺฉโุชุฑู ููุทู ุฏุฑ ูุจู ูุญุฏูุฏู ุฌุบุฑุงูุง ุงุณุช. ุงุนุฏุงุฏ ููู ุจู ูุนูุง ุฏุงุฎู ูุญุฏูุฏู ุฌุบุฑุงูุง ู ุงุนุฏุงุฏ ูุซุจุช ุจู ูุนูุง ุฎุงุฑุฌ ุงุฒ ุขู ูุณุชูุฏ. ุงู ููุฏุงุฑ ฺฉูุชุฑ ุงุฒ 50 (ุจุงูุฑ ุฌุณุชุฌู ูพุดโูุฑุถ) ุง 999 ุฎูุงูุฏ ุจูุฏ.

1. ุงู ูุฑุงุญู ุฑุง ฺูุฏู ุจุงุฑ ุจุง ูฺฉุงูโูุง ุฏุงุฎู ู ุฎุงุฑุฌ ุงุฒ ูุญุฏูุฏู ุฌุบุฑุงูุง ุชฺฉุฑุงุฑ ฺฉูุฏ.

## ุงุณุชูุงุฏู ุงุฒ ูุญุฏูุฏูโูุง ุฌุบุฑุงูุง ุฏุฑ ฺฉุฏ ุจุฏูู ุณุฑูุฑ

ุงฺฉููู ูโุชูุงูุฏ ฺฉ ุชุฑฺฏุฑ ุฌุฏุฏ ุจู ุจุฑูุงูู Functions ุฎูุฏ ุงุถุงูู ฺฉูุฏ ุชุง ุฏุงุฏูโูุง GPS ุฑูุฏุงุฏ IoT Hub ุฑุง ุฏุฑ ุจุฑุงุจุฑ ูุญุฏูุฏู ุฌุบุฑุงูุง ุขุฒูุงุด ฺฉูุฏ.

### ฺฏุฑููโูุง ูุตุฑูโฺฉููุฏู

ููุงูโุทูุฑ ฺฉู ุงุฒ ุฏุฑุณโูุง ูุจู ุจู ุงุฏ ุฏุงุฑุฏุ IoT Hub ุจู ุดูุง ุงุฌุงุฒู ูโุฏูุฏ ุฑูุฏุงุฏูุง ุฑุง ฺฉู ุชูุณุท ูุงุจ ุฏุฑุงูุช ุดุฏู ุงูุง ูพุฑุฏุงุฒุด ูุดุฏูโุงูุฏุ ุฏูุจุงุฑู ูพุฎุด ฺฉูุฏ. ุงูุง ุงฺฏุฑ ฺูุฏู ุชุฑฺฏุฑ ูุชุตู ุดููุฏ ฺู ุงุชูุงู ูโุงูุชุฏุ ฺฺฏููู ูโุฏุงูุฏ ฺฉุฏุงู ฺฉ ุงุฒ ุฑูุฏุงุฏูุง ูพุฑุฏุงุฒุด ุดุฏูโุงูุฏุ

ูพุงุณุฎ ุงู ุงุณุช ฺฉู ููโุชูุงูุฏ! ุฏุฑ ุนูุถุ ูโุชูุงูุฏ ฺูุฏู ุงุชุตุงู ุฌุฏุงฺฏุงูู ุจุฑุง ุฎูุงูุฏู ุฑูุฏุงุฏูุง ุชุนุฑู ฺฉูุฏ ู ูุฑ ฺฉุฏุงู ูโุชูุงููุฏ ูุฏุฑุช ุจุงุฒูพุฎุด ูพุงูโูุง ุฎูุงูุฏูโูุดุฏู ุฑุง ุงูุฌุงู ุฏููุฏ. ุงูโูุง ุจู ุนููุงู *ฺฏุฑููโูุง ูุตุฑูโฺฉููุฏู* ุดูุงุฎุชู ูโุดููุฏ. ููุช ุจู ููุทู ูพุงุงู ูุชุตู ูโุดูุฏุ ูโุชูุงูุฏ ูุดุฎุต ฺฉูุฏ ฺฉู ุจู ฺฉุฏุงู ฺฏุฑูู ูุตุฑูโฺฉููุฏู ูโุฎูุงูุฏ ูุชุตู ุดูุฏ. ูุฑ ุฌุฒุก ุงุฒ ุจุฑูุงูู ุดูุง ุจู ฺฉ ฺฏุฑูู ูุตุฑูโฺฉููุฏู ูุชูุงูุช ูุชุตู ุฎูุงูุฏ ุดุฏ.

![ฺฉ IoT Hub ุจุง 3 ฺฏุฑูู ูุตุฑูโฺฉููุฏู ฺฉู ููุงู ูพุงูโูุง ุฑุง ุจู 3 ุจุฑูุงูู ูุฎุชูู Functions ุชูุฒุน ูโฺฉููุฏ](../../../../../translated_images/consumer-groups.a3262e26fc27ba2092863678ad57af15c7223416e388a23f330c058cf4358630.fa.png)

ุฏุฑ ุชุฆูุฑุ ุญุฏุงฺฉุซุฑ 5 ุจุฑูุงูู ูโุชูุงููุฏ ุจู ูุฑ ฺฏุฑูู ูุตุฑูโฺฉููุฏู ูุชุตู ุดููุฏ ู ููู ุขูโูุง ูพุงูโูุง ุฑุง ููฺฏุงู ุฑุณุฏู ุฏุฑุงูุช ุฎูุงููุฏ ฺฉุฑุฏ. ุจูุชุฑู ุฑูุด ุงู ุงุณุช ฺฉู ููุท ฺฉ ุจุฑูุงูู ุจู ูุฑ ฺฏุฑูู ูุตุฑูโฺฉููุฏู ุฏุณุชุฑุณ ุฏุงุดุชู ุจุงุดุฏ ุชุง ุงุฒ ูพุฑุฏุงุฒุด ุชฺฉุฑุงุฑ ูพุงูโูุง ุฌููฺฏุฑ ุดูุฏ ู ุงุทููุงู ุญุงุตู ุดูุฏ ฺฉู ููฺฏุงู ุฑุงูโุงูุฏุงุฒ ูุฌุฏุฏุ ููู ูพุงูโูุง ุตูโุดุฏู ุจู ุฏุฑุณุช ูพุฑุฏุงุฒุด ูโุดููุฏ. ุจุฑุง ูุซุงูุ ุงฺฏุฑ ุจุฑูุงูู Functions ุฎูุฏ ุฑุง ุจู ุตูุฑุช ูุญู ุงุฌุฑุง ฺฉูุฏ ู ููฺูู ุขู ุฑุง ุฏุฑ ูุถุง ุงุจุฑ ุงุฌุฑุง ฺฉูุฏุ ูุฑ ุฏู ูพุงูโูุง ุฑุง ูพุฑุฏุงุฒุด ูโฺฉููุฏ ฺฉู ููุฌุฑ ุจู ุฐุฎุฑูโุณุงุฒ ุชฺฉุฑุงุฑ ุฏุฑ ุญุณุงุจ ุฐุฎุฑูโุณุงุฒ ูโุดูุฏ.

ุงฺฏุฑ ูุงู `function.json` ูุฑุจูุท ุจู ุชุฑฺฏุฑ IoT Hub ฺฉู ุฏุฑ ุฏุฑุณ ูุจู ุงุฌุงุฏ ฺฉุฑุฏุฏ ุฑุง ุจุฑุฑุณ ฺฉูุฏุ ฺฏุฑูู ูุตุฑูโฺฉููุฏู ุฑุง ุฏุฑ ุจุฎุด ุงุชุตุงู ุชุฑฺฏุฑ Event Hub ุฎูุงูุฏ ุฏุฏ:

```json
"consumerGroup": "$Default"
```

ููุช ฺฉ IoT Hub ุงุฌุงุฏ ูโฺฉูุฏุ ฺฏุฑูู ูุตุฑูโฺฉููุฏู `$Default` ุจู ุทูุฑ ูพุดโูุฑุถ ุงุฌุงุฏ ูโุดูุฏ. ุงฺฏุฑ ุจุฎูุงูุฏ ฺฉ ุชุฑฺฏุฑ ุงุถุงู ุงุถุงูู ฺฉูุฏุ ูโุชูุงูุฏ ุงู ฺฉุงุฑ ุฑุง ุจุง ุงุณุชูุงุฏู ุงุฒ ฺฉ ฺฏุฑูู ูุตุฑูโฺฉููุฏู ุฌุฏุฏ ุงูุฌุงู ุฏูุฏ.

> ๐ ุฏุฑ ุงู ุฏุฑุณุ ุงุฒ ฺฉ ุชุงุจุน ูุชูุงูุช ุจุฑุง ุขุฒูุงุด ูุญุฏูุฏู ุฌุบุฑุงูุง ูุณุจุช ุจู ุชุงุจุน ฺฉู ุจุฑุง ุฐุฎุฑู ุฏุงุฏูโูุง GPS ุงุณุชูุงุฏู ูโุดูุฏุ ุงุณุชูุงุฏู ุฎูุงูุฏ ฺฉุฑุฏ. ุงู ฺฉุงุฑ ุจุฑุง ูุดุงู ุฏุงุฏู ูุญูู ุงุณุชูุงุฏู ุงุฒ ฺฏุฑููโูุง ูุตุฑูโฺฉููุฏู ู ุฌุฏุง ฺฉุฑุฏู ฺฉุฏ ุจุฑุง ุฎูุงูุง ู ุฏุฑฺฉ ุจูุชุฑ ุงูุฌุงู ูโุดูุฏ. ุฏุฑ ฺฉ ุจุฑูุงูู ุชููุฏุ ุฑูุดโูุง ูุฎุชูู ุจุฑุง ุทุฑุงุญ ุงู ฺฉุงุฑ ูุฌูุฏ ุฏุงุฑุฏ - ูุฑุงุฑ ุฏุงุฏู ูุฑ ุฏู ุฏุฑ ฺฉ ุชุงุจุนุ ุงุณุชูุงุฏู ุงุฒ ุชุฑฺฏุฑ ุฏุฑ ุญุณุงุจ ุฐุฎุฑูโุณุงุฒ ุจุฑุง ุงุฌุฑุง ฺฉ ุชุงุจุน ุจุฑุง ุจุฑุฑุณ ูุญุฏูุฏู ุฌุบุฑุงูุงุ ุง ุงุณุชูุงุฏู ุงุฒ ฺูุฏู ุชุงุจุน. ูฺ "ุฑูุด ุฏุฑุณุช" ูุฌูุฏ ูุฏุงุฑุฏุ ุงู ุจุณุชฺฏ ุจู ุจูู ุจุฑูุงูู ู ูุงุฒูุง ุดูุง ุฏุงุฑุฏ.

### ูุธูู - ุงุฌุงุฏ ฺฉ ฺฏุฑูู ูุตุฑูโฺฉููุฏู ุฌุฏุฏ

1. ุฏุณุชูุฑ ุฒุฑ ุฑุง ุจุฑุง ุงุฌุงุฏ ฺฉ ฺฏุฑูู ูุตุฑูโฺฉููุฏู ุฌุฏุฏ ุจู ูุงู `geofence` ุจุฑุง IoT Hub ุฎูุฏ ุงุฌุฑุง ฺฉูุฏ:

    ```sh
    az iot hub consumer-group create --name geofence \
                                     --hub-name <hub_name>
    ```

    ููุฏุงุฑ `<hub_name>` ุฑุง ุจุง ูุงู ฺฉู ุจุฑุง IoT Hub ุฎูุฏ ุงุณุชูุงุฏู ฺฉุฑุฏูโุงุฏ ุฌุงฺฏุฒู ฺฉูุฏ.

1. ุงฺฏุฑ ูโุฎูุงูุฏ ููู ฺฏุฑููโูุง ูุตุฑูโฺฉููุฏู ุจุฑุง ฺฉ IoT Hub ุฑุง ุจุจูุฏุ ุฏุณุชูุฑ ุฒุฑ ุฑุง ุงุฌุฑุง ฺฉูุฏ:

    ```sh
    az iot hub consumer-group list --output table \
                                   --hub-name <hub_name>
    ```

    ููุฏุงุฑ `<hub_name>` ุฑุง ุจุง ูุงู ฺฉู ุจุฑุง IoT Hub ุฎูุฏ ุงุณุชูุงุฏู ฺฉุฑุฏูโุงุฏ ุฌุงฺฏุฒู ฺฉูุฏ. ุงู ุฏุณุชูุฑ ููู ฺฏุฑููโูุง ูุตุฑูโฺฉููุฏู ุฑุง ูุณุช ูโฺฉูุฏ.

    ```output
    Name      ResourceGroup
    --------  ---------------
    $Default  gps-sensor
    geofence  gps-sensor
    ```

> ๐ ููุช ุฏุฑ ุฏุฑุณ ูุจู ูุงูุชูุฑ ุฑูุฏุงุฏ IoT Hub ุฑุง ุงุฌุฑุง ฺฉุฑุฏุฏุ ุจู ฺฏุฑูู ูุตุฑูโฺฉููุฏู `$Default` ูุชุตู ุดุฏ. ุจู ููู ุฏูู ููโุชูุงูุฏ ูุงูุชูุฑ ุฑูุฏุงุฏ ู ฺฉ ุชุฑฺฏุฑ ุฑูุฏุงุฏ ุฑุง ููุฒูุงู ุงุฌุฑุง ฺฉูุฏ. ุงฺฏุฑ ูโุฎูุงูุฏ ูุฑ ุฏู ุฑุง ุงุฌุฑุง ฺฉูุฏุ ูโุชูุงูุฏ ุงุฒ ฺฏุฑููโูุง ูุตุฑูโฺฉููุฏู ุฏฺฏุฑ ุจุฑุง ููู ุจุฑูุงููโูุง ุชุงุจุน ุฎูุฏ ุงุณุชูุงุฏู ฺฉูุฏ ู `$Default` ุฑุง ุจุฑุง ูุงูุชูุฑ ุฑูุฏุงุฏ ูฺฏู ุฏุงุฑุฏ.

### ูุธูู - ุงุฌุงุฏ ฺฉ ุชุฑฺฏุฑ ุฌุฏุฏ IoT Hub

1. ฺฉ ุชุฑฺฏุฑ ุฑูุฏุงุฏ IoT Hub ุฌุฏุฏ ุจู ุจุฑูุงูู `gps-trigger` ฺฉู ุฏุฑ ุฏุฑุณ ูุจู ุงุฌุงุฏ ฺฉุฑุฏุฏ ุงุถุงูู ฺฉูุฏ. ุงู ุชุงุจุน ุฑุง `geofence-trigger` ุจูุงูุฏ.

    > โ๏ธ ูโุชูุงูุฏ ุจู [ุฏุณุชูุฑุงูุนููโูุง ุงุฌุงุฏ ฺฉ ุชุฑฺฏุฑ ุฑูุฏุงุฏ IoT Hub ุงุฒ ูพุฑูฺู 2ุ ุฏุฑุณ 5 ุฏุฑ ุตูุฑุช ูุงุฒ ูุฑุงุฌุนู ฺฉูุฏ](../../../2-farm/lessons/5-migrate-application-to-the-cloud/README.md#create-an-iot-hub-event-trigger).

1. ุฑุดุชู ุงุชุตุงู IoT Hub ุฑุง ุฏุฑ ูุงู `function.json` ูพฺฉุฑุจูุฏ ฺฉูุฏ. ูุงู `local.settings.json` ุจู ููู ุชุฑฺฏุฑูุง ุฏุฑ ุจุฑูุงูู Function ุจู ุงุดุชุฑุงฺฉ ฺฏุฐุงุดุชู ูโุดูุฏ.

1. ููุฏุงุฑ `consumerGroup` ุฑุง ุฏุฑ ูุงู `function.json` ุจู ฺฏุฑูู ูุตุฑูโฺฉููุฏู ุฌุฏุฏ `geofence` ุชุบุฑ ุฏูุฏ:

    ```json
    "consumerGroup": "geofence"
    ```

1. ุจุฑุง ุงุณุชูุงุฏู ุงุฒ ฺฉูุฏ ุงุดุชุฑุงฺฉ Azure Maps ุฏุฑ ุงู ุชุฑฺฏุฑุ ฺฉ ูุฑูุฏ ุฌุฏุฏ ุจู ูุงู `local.settings.json` ุจุง ูุงู `MAPS_KEY` ุงุถุงูู ฺฉูุฏ.

1. ุจุฑูุงูู Functions ุฑุง ุงุฌุฑุง ฺฉูุฏ ุชุง ูุทูุฆู ุดูุฏ ฺฉู ุจู ุฏุฑุณุช ูุชุตู ุดุฏู ู ูพุงูโูุง ุฑุง ูพุฑุฏุงุฒุด ูโฺฉูุฏ. ุชุฑฺฏุฑ `iot-hub-trigger` ุงุฒ ุฏุฑุณ ูุจู ูุฒ ุงุฌุฑุง ุดุฏู ู ุจููฺฉโูุง ุฑุง ุฏุฑ ุฐุฎุฑูโุณุงุฒ ุขูพููุฏ ูโฺฉูุฏ.

    > ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุฎูุงูุฏู ุชฺฉุฑุงุฑ ุฏุงุฏูโูุง GPS ุฏุฑ ุฐุฎุฑูโุณุงุฒ ุจููฺฉุ ูโุชูุงูุฏ ุจุฑูุงูู Functions ุฎูุฏ ุฑุง ฺฉู ุฏุฑ ูุถุง ุงุจุฑ ุงุฌุฑุง ูโุดูุฏ ูุชููู ฺฉูุฏ. ุจุฑุง ุงูุฌุงู ุงู ฺฉุงุฑุ ุงุฒ ุฏุณุชูุฑ ุฒุฑ ุงุณุชูุงุฏู ฺฉูุฏ:
    >
    > ```sh
    > az functionapp stop --resource-group gps-sensor \
    >                     --name <functions_app_name>
    > ```
    >
    > ููุฏุงุฑ `<functions_app_name>` ุฑุง ุจุง ูุงู ฺฉู ุจุฑุง ุจุฑูุงูู Functions ุฎูุฏ ุงุณุชูุงุฏู ฺฉุฑุฏูโุงุฏ ุฌุงฺฏุฒู ฺฉูุฏ.
    >
    > ูโุชูุงูุฏ ุจุนุฏุงู ุขู ุฑุง ุจุง ุฏุณุชูุฑ ุฒุฑ ุฏูุจุงุฑู ุฑุงูโุงูุฏุงุฒ ฺฉูุฏ:
    >
    > ```sh
    > az functionapp start --resource-group gps-sensor \
    >                     --name <functions_app_name>
    > ```
    >
    > ููุฏุงุฑ `<functions_app_name>` ุฑุง ุจุง ูุงู ฺฉู ุจุฑุง ุจุฑูุงูู Functions ุฎูุฏ ุงุณุชูุงุฏู ฺฉุฑุฏูโุงุฏ ุฌุงฺฏุฒู ฺฉูุฏ.

### ูุธูู - ุขุฒูุงุด ูุญุฏูุฏู ุฌุบุฑุงูุง ุงุฒ ุชุฑฺฏุฑ

ุฏุฑ ุงูุงู ุงู ุฏุฑุณุ ุงุฒ curl ุจุฑุง ูพุฑุณโูุฌู ฺฉ ูุญุฏูุฏู ุฌุบุฑุงูุง ุงุณุชูุงุฏู ฺฉุฑุฏุฏ ุชุง ุจุจูุฏ ุขุง ฺฉ ููุทู ุฏุงุฎู ุง ุฎุงุฑุฌ ุงุฒ ุขู ูุฑุงุฑ ุฏุงุฑุฏ. ูโุชูุงูุฏ ฺฉ ุฏุฑุฎูุงุณุช ูุจ ูุดุงุจู ุงุฒ ุฏุงุฎู ุชุฑฺฏุฑ ุฎูุฏ ุงุฑุณุงู ฺฉูุฏ.

1. ุจุฑุง ูพุฑุณโูุฌู ูุญุฏูุฏู ุฌุบุฑุงูุงุ ุจู UDID ุขู ูุงุฒ ุฏุงุฑุฏ. ฺฉ ูุฑูุฏ ุฌุฏุฏ ุจู ูุงู `local.settings.json` ุจุง ูุงู `GEOFENCE_UDID` ู ุงู ููุฏุงุฑ ุงุถุงูู ฺฉูุฏ.

1. ูุงู `__init__.py` ุฑุง ุงุฒ ุชุฑฺฏุฑ ุฌุฏุฏ `geofence-trigger` ุจุงุฒ ฺฉูุฏ.

1. ูุงุฑุฏ ฺฉุฑุฏู ุฒุฑ ุฑุง ุจู ุจุงูุง ูุงู ุงุถุงูู ฺฉูุฏ:

    ```python
    import json
    import os
    import requests
    ```

    ุจุณุชู `requests` ุจู ุดูุง ุงูฺฉุงู ูโุฏูุฏ ุฏุฑุฎูุงุณุชโูุง API ูุจ ุงุฑุณุงู ฺฉูุฏ. Azure Maps ฺฉ SDK ุจุฑุง ูพุงุชูู ูุฏุงุฑุฏุ ุจูุงุจุฑุงู ุจุงุฏ ุงุฒ ุทุฑู ุฏุฑุฎูุงุณุชโูุง ูุจ ุงุฒ ุขู ุงุณุชูุงุฏู ฺฉูุฏ.

1. ุฏู ุฎุท ุฒุฑ ุฑุง ุจู ุงุจุชุฏุง ูุชุฏ `main` ุงุถุงูู ฺฉูุฏ ุชุง ฺฉูุฏ ุงุดุชุฑุงฺฉ Maps ุฑุง ุฏุฑุงูุช ฺฉูุฏ:

    ```python
    maps_key = os.environ['MAPS_KEY']
    geofence_udid = os.environ['GEOFENCE_UDID']    
    ```

1. ุฏุงุฎู ุญููู `for event in events`ุ ฺฉุฏ ุฒุฑ ุฑุง ุจุฑุง ุฏุฑุงูุช ุนุฑุถ ู ุทูู ุฌุบุฑุงูุง ุงุฒ ูุฑ ุฑูุฏุงุฏ ุงุถุงูู ฺฉูุฏ:

    ```python
    event_body = json.loads(event.get_body().decode('utf-8'))
    lat = event_body['gps']['lat']
    lon = event_body['gps']['lon']
    ```

    ุงู ฺฉุฏ JSON ุงุฒ ุจุฏูู ุฑูุฏุงุฏ ุฑุง ุจู ฺฉ ุฏฺฉุดูุฑ ุชุจุฏู ูโฺฉูุฏ ู ุณูพุณ `lat` ู `lon` ุฑุง ุงุฒ ููุฏ `gps` ุงุณุชุฎุฑุงุฌ ูโฺฉูุฏ.

1. ููฺฏุงู ุงุณุชูุงุฏู ุงุฒ `requests`ุ ุจู ุฌุง ุณุงุฎุชู ฺฉ URL ุทููุงู ููุงูโุทูุฑ ฺฉู ุจุง curl ุงูุฌุงู ุฏุงุฏุฏุ ูโุชูุงูุฏ ููุท ุงุฒ ุจุฎุด URL ุงุณุชูุงุฏู ฺฉูุฏ ู ูพุงุฑุงูุชุฑูุง ุฑุง ุจู ุตูุฑุช ฺฉ ุฏฺฉุดูุฑ ุงุฑุณุงู ฺฉูุฏ. ฺฉุฏ ุฒุฑ ุฑุง ุจุฑุง ุชุนุฑู URL ู ูพฺฉุฑุจูุฏ ูพุงุฑุงูุชุฑูุง ุงุถุงูู ฺฉูุฏ:

    ```python
    url = 'https://atlas.microsoft.com/spatial/geofence/json'

    params = {
        'api-version': 1.0,
        'deviceId': 'gps-sensor',
        'subscription-key': maps_key,
        'udid' : geofence_udid,
        'lat' : lat,
        'lon' : lon
    }
    ```

    ุขุชูโูุง ุฏฺฉุดูุฑ `params` ุจุง ฺฉูุฏ-ููุฏุงุฑูุง ฺฉู ููฺฏุงู ูุฑุงุฎูุงู API ูุจ ุงุฒ ุทุฑู curl ุงุณุชูุงุฏู ฺฉุฑุฏุฏ ูุทุงุจูุช ุฏุงุฑูุฏ.

1. ุฎุทูุท ฺฉุฏ ุฒุฑ ุฑุง ุจุฑุง ูุฑุงุฎูุงู API ูุจ ุงุถุงูู ฺฉูุฏ:

    ```python
    response = requests.get(url, params=params)
    response_body = json.loads(response.text)
    ```

    ุงู ฺฉุฏ URL ุฑุง ุจุง ูพุงุฑุงูุชุฑูุง ูุฑุงุฎูุงู ฺฉุฑุฏู ู ฺฉ ุดุก ูพุงุณุฎ ุฏุฑุงูุช ูโฺฉูุฏ.

1. ฺฉุฏ ุฒุฑ ุฑุง ุฏุฑ ุฒุฑ ุงู ุจุฎุด ุงุถุงูู ฺฉูุฏ:

    ```python
    distance = response_body['geometries'][0]['distance']

    if distance == 999:
        logging.info('Point is outside geofence')
    elif distance > 0:
        logging.info(f'Point is just outside geofence by a distance of {distance}m')
    elif distance == -999:
        logging.info(f'Point is inside geofence')
    else:
        logging.info(f'Point is just inside geofence by a distance of {distance}m')
    ```

    ุงู ฺฉุฏ ูุฑุถ ูโฺฉูุฏ ฺฉู ฺฉ geometry ูุฌูุฏ ุฏุงุฑุฏ ู ูุงุตูู ุฑุง ุงุฒ ุขู ุงุณุชุฎุฑุงุฌ ูโฺฉูุฏ. ุณูพุณ ุจุฑ ุงุณุงุณ ูุงุตููุ ูพุงูโูุง ูุฎุชูู ุฑุง ุซุจุช ูโฺฉูุฏ.

1. ุงู ฺฉุฏ ุฑุง ุงุฌุฑุง ฺฉูุฏ. ุฏุฑ ุฎุฑูุฌ ูุงฺฏ ุฎูุงูุฏ ุฏุฏ ฺฉู ุขุง ูุฎุชุตุงุช GPS ุฏุงุฎู ุง ุฎุงุฑุฌ ุงุฒ ูุญุฏูุฏู ุฌุบุฑุงูุง ูุณุชูุฏุ ููุฑุงู ุจุง ูุงุตูู ุงฺฏุฑ ููุทู ุฏุฑ ูุญุฏูุฏู 50 ูุชุฑ ุจุงุดุฏ. ุงู ฺฉุฏ ุฑุง ุจุง ูุญุฏูุฏูโูุง ุฌุบุฑุงูุง ูุฎุชูู ุจุฑ ุงุณุงุณ ูฺฉุงู ุญุณฺฏุฑ GPS ุฎูุฏ ุงูุชุญุงู ฺฉูุฏุ ุญุณฺฏุฑ ุฑุง ุฌุงุจูโุฌุง ฺฉูุฏ (ุจุฑุง ูุซุงู ุจุง ุงุชุตุงู ุจู WiFi ุงุฒ ฺฉ ุชููู ููุฑุงูุ ุง ุจุง ูุฎุชุตุงุช ูุฎุชูู ุฑู ุฏุณุชฺฏุงู IoT ูุฌุงุฒ) ุชุง ุชุบุฑุงุช ุฑุง ูุดุงูุฏู ฺฉูุฏ.

1. ููุช ุขูุงุฏู ุดุฏุฏุ ุงู ฺฉุฏ ุฑุง ุจู ุจุฑูุงูู Functions ุฎูุฏ ุฏุฑ ูุถุง ุงุจุฑ ูุณุชูุฑ ฺฉูุฏ. ูุฑุงููุด ูฺฉูุฏ ฺฉู ุชูุธูุงุช ุจุฑูุงูู ุฌุฏุฏ ุฑุง ูุณุชูุฑ ฺฉูุฏ.

    > โ๏ธ ูโุชูุงูุฏ ุจู [ุฏุณุชูุฑุงูุนููโูุง ุขูพููุฏ ุชูุธูุงุช ุจุฑูุงูู ุงุฒ ูพุฑูฺู 2ุ ุฏุฑุณ 5 ุฏุฑ ุตูุฑุช ูุงุฒ ูุฑุงุฌุนู ฺฉูุฏ](../../../2-farm/lessons/5-migrate-application-to-the-cloud/README.md#task---upload-your-application-settings).

    > โ๏ธ ูโุชูุงูุฏ ุจู [ุฏุณุชูุฑุงูุนููโูุง ุงุณุชูุฑุงุฑ ุจุฑูุงูู Functions ุฎูุฏ ุงุฒ ูพุฑูฺู 2ุ ุฏุฑุณ 5 ุฏุฑ ุตูุฑุช ูุงุฒ ูุฑุงุฌุนู ฺฉูุฏ](../../../2-farm/lessons/5-migrate-application-to-the-cloud/README.md#task---deploy-your-functions-app-to-the-cloud).

> ๐ ูโุชูุงูุฏ ุงู ฺฉุฏ ุฑุง ุฏุฑ ูพูุดู [code/functions](../../../../../3-transport/lessons/4-geofences/code/functions) ูพุฏุง ฺฉูุฏ.

---

## ๐ ฺุงูุด

ุฏุฑ ุงู ุฏุฑุณุ ฺฉ ูุญุฏูุฏู ุฌุบุฑุงูุง ุจุง ุงุณุชูุงุฏู ุงุฒ ฺฉ ูุงู GeoJSON ุจุง ฺฉ ฺูุฏุถูุน ุงุถุงูู ฺฉุฑุฏุฏ. ูโุชูุงูุฏ ฺูุฏุถูุนโูุง ูุชุนุฏุฏ ุฑุง ุจู ุทูุฑ ููุฒูุงู ุขูพููุฏ ฺฉูุฏุ ุจู ุดุฑุท ฺฉู ููุงุฏุฑ `geometryId` ุฏุฑ ุจุฎุด `properties` ูุชูุงูุช ุจุงุดูุฏ.

ุณุน ฺฉูุฏ ฺฉ ูุงู GeoJSON ุจุง ฺูุฏู ฺูุฏุถูุน ุขูพููุฏ ฺฉูุฏ ู ฺฉุฏ ุฎูุฏ ุฑุง ุชูุธู ฺฉูุฏ ุชุง ูุดุฎุต ฺฉูุฏ ฺฉุฏุงู ฺูุฏุถูุน ุจู ูุฎุชุตุงุช GPS ูุฒุฏฺฉโุชุฑ ุงุณุช ุง ุฏุฑ ุขู ูุฑุงุฑ ุฏุงุฑุฏ.

## ุขุฒููู ูพุณ ุงุฒ ุฏุฑุณ

[ุขุฒููู ูพุณ ุงุฒ ุฏุฑุณ](https://black-meadow-040d15503.1.azurestaticapps.net/quiz/28)

## ูุฑูุฑ ู ูุทุงูุนู ุดุฎุต

* ุฏุฑุจุงุฑู ูุญุฏูุฏูโูุง ุฌุบุฑุงูุง ู ุจุฑุฎ ุงุฒ ููุงุฑุฏ ุงุณุชูุงุฏู ุขูโูุง ุฏุฑ [ุตูุญู Geofencing ุฏุฑ ูฺฉโูพุฏุง](https://en.wikipedia.org/wiki/Geo-fence) ุจุดุชุฑ ุจุฎูุงูุฏ.
* ุฏุฑุจุงุฑู API ูุญุฏูุฏู ุฌุบุฑุงูุง Azure Maps ุฏุฑ [ูุณุชูุฏุงุช Microsoft Azure Maps Spatial - Get Geofence](https://docs.microsoft.com/rest/api/maps/spatial/getgeofence?WT.mc_id=academic-17441-jabenn) ุจุดุชุฑ ุจุฎูุงูุฏ.
* ุฏุฑุจุงุฑู ฺฏุฑููโูุง ูุตุฑูโฺฉููุฏู ุฏุฑ [ูฺฺฏโูุง ู ุงุตุทูุงุญุงุช ุฏุฑ Azure Event Hubs - ูุณุชูุฏุงุช ูุตุฑูโฺฉููุฏฺฏุงู ุฑูุฏุงุฏ ุฏุฑ Microsoft Docs](https://docs.microsoft.com/azure/event-hubs/event-hubs-features?WT.mc_id=academic-17441-jabenn#event-consumers) ุจุดุชุฑ ุจุฎูุงูุฏ.

## ุชฺฉูู

[ุงุฑุณุงู ุงุนูุงูโูุง ุจุง ุงุณุชูุงุฏู ุงุฒ Twilio](assignment.md)

**ุณูุจ ูุณุฆููุช**:  
ุงู ุณูุฏ ุจุง ุงุณุชูุงุฏู ุงุฒ ุณุฑูุณ ุชุฑุฌูู ููุด ูุตููุน [Co-op Translator](https://github.com/Azure/co-op-translator) ุชุฑุฌูู ุดุฏู ุงุณุช. ุฏุฑ ุญุงู ฺฉู ูุง ุชูุงุด ูโฺฉูู ุฏูุช ุฑุง ุญูุธ ฺฉููุ ูุทูุงู ุชูุฌู ุฏุงุดุชู ุจุงุดุฏ ฺฉู ุชุฑุฌููโูุง ุฎูุฏฺฉุงุฑ ููฺฉู ุงุณุช ุดุงูู ุฎุทุงูุง ุง ูุงุฏุฑุณุชโูุง ุจุงุดูุฏ. ุณูุฏ ุงุตู ุจู ุฒุจุงู ุงุตู ุขู ุจุงุฏ ุจู ุนููุงู ููุจุน ูุนุชุจุฑ ุฏุฑ ูุธุฑ ฺฏุฑูุชู ุดูุฏ. ุจุฑุง ุงุทูุงุนุงุช ุญุณุงุณุ ุชูุตู ูโุดูุฏ ุงุฒ ุชุฑุฌูู ุงูุณุงู ุญุฑููโุง ุงุณุชูุงุฏู ฺฉูุฏ. ูุง ูุณุฆููุช ุฏุฑ ูุจุงู ุณูุก ุชูุงููโูุง ุง ุชูุณุฑูุง ูุงุฏุฑุณุช ูุงุด ุงุฒ ุงุณุชูุงุฏู ุงุฒ ุงู ุชุฑุฌูู ูุฏุงุฑู.