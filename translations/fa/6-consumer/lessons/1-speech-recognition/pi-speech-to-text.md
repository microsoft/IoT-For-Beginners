<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "af249a24d4fe4f4de4806adbc3bc9d86",
  "translation_date": "2025-08-25T22:51:24+00:00",
  "source_file": "6-consumer/lessons/1-speech-recognition/pi-speech-to-text.md",
  "language_code": "fa"
}
-->
# ุชุจุฏู ฺฏูุชุงุฑ ุจู ูุชู - ุฑุฒุจุฑ ูพุง

ุฏุฑ ุงู ุจุฎุด ุงุฒ ุฏุฑุณุ ุดูุง ฺฉุฏ ุฎูุงูุฏ ููุดุช ฺฉู ฺฏูุชุงุฑ ุถุจุทโุดุฏู ุฏุฑ ูุงู ุตูุช ุฑุง ุจู ูุชู ุชุจุฏู ฺฉูุฏุ ุจุง ุงุณุชูุงุฏู ุงุฒ ุณุฑูุณ ฺฏูุชุงุฑ.

## ุงุฑุณุงู ูุงู ุตูุช ุจู ุณุฑูุณ ฺฏูุชุงุฑ

ูุงู ุตูุช ูโุชูุงูุฏ ุจุง ุงุณุชูุงุฏู ุงุฒ REST API ุจู ุณุฑูุณ ฺฏูุชุงุฑ ุงุฑุณุงู ุดูุฏ. ุจุฑุง ุงุณุชูุงุฏู ุงุฒ ุณุฑูุณ ฺฏูุชุงุฑุ ุงุจุชุฏุง ุจุงุฏ ฺฉ ุชูฺฉู ุฏุณุชุฑุณ ุฏุฑุฎูุงุณุช ฺฉูุฏ ู ุณูพุณ ุงุฒ ุขู ุชูฺฉู ุจุฑุง ุฏุณุชุฑุณ ุจู REST API ุงุณุชูุงุฏู ฺฉูุฏ. ุงู ุชูฺฉูโูุง ุฏุณุชุฑุณ ูพุณ ุงุฒ ฑฐ ุฏููู ูููุถ ูโุดููุฏุ ุจูุงุจุฑุงู ฺฉุฏ ุดูุง ุจุงุฏ ุจู ุทูุฑ ููุธู ุชูฺฉู ุฌุฏุฏ ุฏุฑุฎูุงุณุช ฺฉูุฏ ุชุง ููุดู ุจูโุฑูุฒ ุจุงุดุฏ.

### ูุธูู - ุฏุฑุงูุช ุชูฺฉู ุฏุณุชุฑุณ

1. ูพุฑูฺู `smart-timer` ุฑุง ุฑู ุฑุฒุจุฑ ูพุง ุฎูุฏ ุจุงุฒ ฺฉูุฏ.

1. ุชุงุจุน `play_audio` ุฑุง ุญุฐู ฺฉูุฏ. ุฏฺฏุฑ ูุงุฒ ุจู ุงู ุชุงุจุน ูุณุชุ ุฒุฑุง ููโุฎูุงูุฏ ุชุงูุฑ ููุดููุฏ ุขูฺู ุฑุง ฺฉู ฺฏูุชุฏ ุจู ุดูุง ุจุงุฒฺฏู ฺฉูุฏ.

1. ูุงุฑุฏ ุฒุฑ ุฑุง ุจู ุจุงูุง ูุงู `app.py` ุงุถุงูู ฺฉูุฏ:

    ```python
    import requests
    ```

1. ฺฉุฏ ุฒุฑ ุฑุง ุจุงูุง ุญููู `while True` ุงุถุงูู ฺฉูุฏ ุชุง ุจุฑุฎ ุชูุธูุงุช ุจุฑุง ุณุฑูุณ ฺฏูุชุงุฑ ุชุนุฑู ุดูุฏ:

    ```python
    speech_api_key = '<key>'
    location = '<location>'
    language = '<language>'
    ```

    `<key>` ุฑุง ุจุง ฺฉูุฏ API ุจุฑุง ููุจุน ุณุฑูุณ ฺฏูุชุงุฑ ุฎูุฏ ุฌุงฺฏุฒู ฺฉูุฏ. `<location>` ุฑุง ุจุง ูฺฉุงู ฺฉู ููฺฏุงู ุงุฌุงุฏ ููุจุน ุณุฑูุณ ฺฏูุชุงุฑ ุงุณุชูุงุฏู ฺฉุฑุฏุฏ ุฌุงฺฏุฒู ฺฉูุฏ.

    `<language>` ุฑุง ุจุง ูุงู ูุญู ุฒุจุงู ููุฑุฏ ูุธุฑ ุฎูุฏ ุฌุงฺฏุฒู ฺฉูุฏุ ุจุฑุง ูุซุงู `en-GB` ุจุฑุง ุงูฺฏูุณ ุง `zn-HK` ุจุฑุง ฺฉุงูุชูู. ูโุชูุงูุฏ ูุณุช ุงุฒ ุฒุจุงูโูุง ูพุดุชุจุงูโุดุฏู ู ูุงูโูุง ูุญู ุขูโูุง ุฑุง ุฏุฑ [ูุณุชูุฏุงุช ูพุดุชุจุงู ุฒุจุงู ู ุตุฏุง ุฏุฑ Microsoft Docs](https://docs.microsoft.com/azure/cognitive-services/speech-service/language-support?WT.mc_id=academic-17441-jabenn#speech-to-text) ูพุฏุง ฺฉูุฏ.

1. ุฒุฑ ุงู ุจุฎุดุ ุชุงุจุน ุฒุฑ ุฑุง ุจุฑุง ุฏุฑุงูุช ุชูฺฉู ุฏุณุชุฑุณ ุงุถุงูู ฺฉูุฏ:

    ```python
    def get_access_token():
        headers = {
            'Ocp-Apim-Subscription-Key': speech_api_key
        }
    
        token_endpoint = f'https://{location}.api.cognitive.microsoft.com/sts/v1.0/issuetoken'
        response = requests.post(token_endpoint, headers=headers)
        return str(response.text)
    ```

    ุงู ุชุงุจุน ฺฉ ููุทู ูพุงุงู ุตุฏูุฑ ุชูฺฉู ุฑุง ูุฑุงุฎูุงู ูโฺฉูุฏ ู ฺฉูุฏ API ุฑุง ุจู ุนููุงู ูุฏุฑ ุงุฑุณุงู ูโฺฉูุฏ. ุงู ูุฑุงุฎูุงู ฺฉ ุชูฺฉู ุฏุณุชุฑุณ ุจุงุฒูโฺฏุฑุฏุงูุฏ ฺฉู ูโุชูุงู ุงุฒ ุขู ุจุฑุง ูุฑุงุฎูุงู ุณุฑูุณโูุง ฺฏูุชุงุฑ ุงุณุชูุงุฏู ฺฉุฑุฏ.

1. ุฒุฑ ุงู ุจุฎุดุ ฺฉ ุชุงุจุน ุจุฑุง ุชุจุฏู ฺฏูุชุงุฑ ุถุจุทโุดุฏู ุฏุฑ ูุงู ุตูุช ุจู ูุชู ุจุง ุงุณุชูุงุฏู ุงุฒ REST API ุชุนุฑู ฺฉูุฏ:

    ```python
    def convert_speech_to_text(buffer):
    ```

1. ุฏุงุฎู ุงู ุชุงุจุนุ URL ู ูุฏุฑูุง REST API ุฑุง ุชูุธู ฺฉูุฏ:

    ```python
    url = f'https://{location}.stt.speech.microsoft.com/speech/recognition/conversation/cognitiveservices/v1'

    headers = {
        'Authorization': 'Bearer ' + get_access_token(),
        'Content-Type': f'audio/wav; codecs=audio/pcm; samplerate={rate}',
        'Accept': 'application/json;text/xml'
    }

    params = {
        'language': language
    }
    ```

    ุงู ฺฉุฏ ฺฉ URL ุจุง ุงุณุชูุงุฏู ุงุฒ ูฺฉุงู ููุจุน ุณุฑูุณ ฺฏูุชุงุฑ ุงุฌุงุฏ ูโฺฉูุฏ. ุณูพุณ ูุฏุฑูุง ุฑุง ุจุง ุชูฺฉู ุฏุณุชุฑุณ ุงุฒ ุชุงุจุน `get_access_token`ุ ุจู ููุฑุงู ูุฑุฎ ูููููโุจุฑุฏุงุฑ ุงุณุชูุงุฏูโุดุฏู ุจุฑุง ุถุจุท ูุงู ุตูุชุ ูพุฑ ูโฺฉูุฏ. ุฏุฑ ููุงุชุ ุจุฑุฎ ูพุงุฑุงูุชุฑูุง ุฑุง ุจุฑุง ุงุฑุณุงู ููุฑุงู ุจุง URL ุชุนุฑู ูโฺฉูุฏ ฺฉู ุดุงูู ุฒุจุงู ูุงู ุตูุช ุงุณุช.

1. ุฒุฑ ุงู ุจุฎุดุ ฺฉุฏ ุฒุฑ ุฑุง ุจุฑุง ูุฑุงุฎูุงู REST API ู ุฏุฑุงูุช ูุชู ุงุถุงูู ฺฉูุฏ:

    ```python
    response = requests.post(url, headers=headers, params=params, data=buffer)
    response_json = response.json()

    if response_json['RecognitionStatus'] == 'Success':
        return response_json['DisplayText']
    else:
        return ''
    ```

    ุงู ฺฉุฏ URL ุฑุง ูุฑุงุฎูุงู ูโฺฉูุฏ ู ููุฏุงุฑ JSON ฺฉู ุฏุฑ ูพุงุณุฎ ุฏุฑุงูุช ูโุดูุฏ ุฑุง ุฑูุฒฺฏุดุง ูโฺฉูุฏ. ููุฏุงุฑ `RecognitionStatus` ุฏุฑ ูพุงุณุฎ ูุดุงู ูโุฏูุฏ ฺฉู ุขุง ูุฑุงุฎูุงู ุชูุงูุณุชู ุงุณุช ฺฏูุชุงุฑ ุฑุง ุจุง ููููุช ุจู ูุชู ุชุจุฏู ฺฉูุฏ ุง ุฎุฑุ ู ุงฺฏุฑ ุงู ููุฏุงุฑ `Success` ุจุงุดุฏุ ูุชู ุงุฒ ุชุงุจุน ุจุงุฒฺฏุฑุฏุงูุฏู ูโุดูุฏุ ุฏุฑ ุบุฑ ุงู ุตูุฑุช ฺฉ ุฑุดุชู ุฎุงู ุจุงุฒฺฏุฑุฏุงูุฏู ูโุดูุฏ.

1. ุจุงูุง ุญููู `while True:`ุ ฺฉ ุชุงุจุน ุจุฑุง ูพุฑุฏุงุฒุด ูุชู ุจุงุฒฺฏุฑุฏุงูุฏูโุดุฏู ุงุฒ ุณุฑูุณ ุชุจุฏู ฺฏูุชุงุฑ ุจู ูุชู ุชุนุฑู ฺฉูุฏ. ุงู ุชุงุจุน ูุนูุงู ููุท ูุชู ุฑุง ุฏุฑ ฺฉูุณูู ฺุงูพ ูโฺฉูุฏ.

    ```python
    def process_text(text):
        print(text)
    ```

1. ุฏุฑ ููุงุชุ ูุฑุงุฎูุงู `play_audio` ุฏุฑ ุญููู `while True` ุฑุง ุจุง ูุฑุงุฎูุงู ุชุงุจุน `convert_speech_to_text` ุฌุงฺฏุฒู ฺฉูุฏ ู ูุชู ุฑุง ุจู ุชุงุจุน `process_text` ุงุฑุณุงู ฺฉูุฏ:

    ```python
    text = convert_speech_to_text(buffer)
    process_text(text)
    ```

1. ฺฉุฏ ุฑุง ุงุฌุฑุง ฺฉูุฏ. ุฏฺฉูู ุฑุง ูุดุงุฑ ุฏูุฏ ู ุฏุฑ ูฺฉุฑูููู ุตุญุจุช ฺฉูุฏ. ููุช ุตุญุจุชุชุงู ุชูุงู ุดุฏุ ุฏฺฉูู ุฑุง ุฑูุง ฺฉูุฏ ู ูุงู ุตูุช ุจู ูุชู ุชุจุฏู ุดุฏู ู ุฏุฑ ฺฉูุณูู ฺุงูพ ุฎูุงูุฏ ุดุฏ.

    ```output
    pi@raspberrypi:~/smart-timer $ python3 app.py 
    Hello world.
    Welcome to IoT for beginners.
    ```

    ุฌููุงุช ูุฎุชูู ุฑุง ุงูุชุญุงู ฺฉูุฏุ ููุฑุงู ุจุง ุฌููุงุช ฺฉู ฺฉููุงุช ูุดุงุจู ุฏุงุฑูุฏ ุงูุง ูุนุงู ูุชูุงูุช ุฏุงุฑูุฏ. ุจุฑุง ูุซุงูุ ุงฺฏุฑ ุจู ุฒุจุงู ุงูฺฏูุณ ุตุญุจุช ูโฺฉูุฏุ ุจฺฏูุฏ "I want to buy two bananas and an apple too"ุ ู ุชูุฌู ฺฉูุฏ ฺฉู ฺฺฏููู ุงุฒ ฺฉููุงุช ุตุญุญ "to"ุ "two" ู "too" ุจุฑ ุงุณุงุณ ุฒููู ฺฉููู ุงุณุชูุงุฏู ูโฺฉูุฏุ ูู ููุท ุตุฏุง ุขู.

> ๐ ุดูุง ูโุชูุงูุฏ ุงู ฺฉุฏ ุฑุง ุฏุฑ ูพูุดู [code-speech-to-text/pi](../../../../../6-consumer/lessons/1-speech-recognition/code-speech-to-text/pi) ูพุฏุง ฺฉูุฏ.

๐ ุจุฑูุงูู ุชุจุฏู ฺฏูุชุงุฑ ุจู ูุชู ุดูุง ููููุชโุขูุฒ ุจูุฏ!

**ุณูุจ ูุณุฆููุช**:  
ุงู ุณูุฏ ุจุง ุงุณุชูุงุฏู ุงุฒ ุณุฑูุณ ุชุฑุฌูู ููุด ูุตููุน [Co-op Translator](https://github.com/Azure/co-op-translator) ุชุฑุฌูู ุดุฏู ุงุณุช. ุฏุฑ ุญุงู ฺฉู ูุง ุชูุงุด ูโฺฉูู ุฏูุช ุฑุง ุญูุธ ฺฉููุ ูุทูุงู ุชูุฌู ุฏุงุดุชู ุจุงุดุฏ ฺฉู ุชุฑุฌููโูุง ุฎูุฏฺฉุงุฑ ููฺฉู ุงุณุช ุดุงูู ุฎุทุงูุง ุง ูุงุฏุฑุณุชโูุง ุจุงุดูุฏ. ุณูุฏ ุงุตู ุจู ุฒุจุงู ุงุตู ุขู ุจุงุฏ ุจู ุนููุงู ููุจุน ูุนุชุจุฑ ุฏุฑ ูุธุฑ ฺฏุฑูุชู ุดูุฏ. ุจุฑุง ุงุทูุงุนุงุช ุญุณุงุณุ ุชูุตู ูโุดูุฏ ุงุฒ ุชุฑุฌูู ุงูุณุงู ุญุฑููโุง ุงุณุชูุงุฏู ฺฉูุฏ. ูุง ูุณุฆููุช ุฏุฑ ูุจุงู ุณูุก ุชูุงููโูุง ุง ุชูุณุฑูุง ูุงุฏุฑุณุช ูุงุด ุงุฒ ุงุณุชูุงุฏู ุงุฒ ุงู ุชุฑุฌูู ูุฏุงุฑู.