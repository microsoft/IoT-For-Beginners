<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "606f3af1c78e3741e48ce77c31cea626",
  "translation_date": "2025-08-25T22:38:03+00:00",
  "source_file": "6-consumer/lessons/3-spoken-feedback/pi-text-to-speech.md",
  "language_code": "fa"
}
-->
# ุชุจุฏู ูุชู ุจู ฺฏูุชุงุฑ - ุฑุฒุจุฑ ูพุง

ุฏุฑ ุงู ุจุฎุด ุงุฒ ุฏุฑุณุ ุดูุง ฺฉุฏ ุฎูุงูุฏ ููุดุช ฺฉู ูุชู ุฑุง ุจุง ุงุณุชูุงุฏู ุงุฒ ุณุฑูุณ ฺฏูุชุงุฑ ุจู ฺฏูุชุงุฑ ุชุจุฏู ฺฉูุฏ.

## ุชุจุฏู ูุชู ุจู ฺฏูุชุงุฑ ุจุง ุงุณุชูุงุฏู ุงุฒ ุณุฑูุณ ฺฏูุชุงุฑ

ูุชู ูโุชูุงูุฏ ุจุง ุงุณุชูุงุฏู ุงุฒ API REST ุจู ุณุฑูุณ ฺฏูุชุงุฑ ุงุฑุณุงู ุดูุฏ ุชุง ุจู ุตูุฑุช ฺฉ ูุงู ุตูุช ุฏุฑุงูุช ุดูุฏ ฺฉู ูโุชูุงู ุขู ุฑุง ุฑู ุฏุณุชฺฏุงู IoT ุดูุง ูพุฎุด ฺฉุฑุฏ. ููฺฏุงู ุฏุฑุฎูุงุณุช ฺฏูุชุงุฑุ ุจุงุฏ ุตุฏุง ฺฉู ูโุฎูุงูุฏ ุงุณุชูุงุฏู ฺฉูุฏ ุฑุง ูุดุฎุต ฺฉูุฏุ ุฒุฑุง ฺฏูุชุงุฑ ูโุชูุงูุฏ ุจุง ุงุณุชูุงุฏู ุงุฒ ุงููุงุน ูุฎุชูู ุตุฏุงูุง ุชููุฏ ุดูุฏ.

ูุฑ ุฒุจุงู ุงุฒ ูุฌููุนูโุง ุงุฒ ุตุฏุงูุง ูุฎุชูู ูพุดุชุจุงู ูโฺฉูุฏ ู ุดูุง ูโุชูุงูุฏ ฺฉ ุฏุฑุฎูุงุณุช REST ุจู ุณุฑูุณ ฺฏูุชุงุฑ ุงุฑุณุงู ฺฉูุฏ ุชุง ูุณุช ุตุฏุงูุง ูพุดุชุจุงูโุดุฏู ุจุฑุง ูุฑ ุฒุจุงู ุฑุง ุฏุฑุงูุช ฺฉูุฏ.

### ูุธูู - ุฏุฑุงูุช ฺฉ ุตุฏุง

1. ูพุฑูฺู `smart-timer` ุฑุง ุฏุฑ VS Code ุจุงุฒ ฺฉูุฏ.

1. ฺฉุฏ ุฒุฑ ุฑุง ุจุงูุง ุชุงุจุน `say` ุงุถุงูู ฺฉูุฏ ุชุง ูุณุช ุตุฏุงูุง ุจุฑุง ฺฉ ุฒุจุงู ุฏุฑุฎูุงุณุช ุดูุฏ:

    ```python
    def get_voice():
        url = f'https://{location}.tts.speech.microsoft.com/cognitiveservices/voices/list'
    
        headers = {
            'Authorization': 'Bearer ' + get_access_token()
        }
    
        response = requests.get(url, headers=headers)
        voices_json = json.loads(response.text)
    
        first_voice = next(x for x in voices_json if x['Locale'].lower() == language.lower() and x['VoiceType'] == 'Neural')
        return first_voice['ShortName']
    
    voice = get_voice()
    print(f'Using voice {voice}')
    ```

    ุงู ฺฉุฏ ฺฉ ุชุงุจุน ุจู ูุงู `get_voice` ุชุนุฑู ูโฺฉูุฏ ฺฉู ุงุฒ ุณุฑูุณ ฺฏูุชุงุฑ ุจุฑุง ุฏุฑุงูุช ูุณุช ุตุฏุงูุง ุงุณุชูุงุฏู ูโฺฉูุฏ. ุณูพุณ ุงููู ุตุฏุง ฺฉู ุจุง ุฒุจุงู ููุฑุฏ ุงุณุชูุงุฏู ูุทุงุจูุช ุฏุงุฑุฏ ุฑุง ูพุฏุง ูโฺฉูุฏ.

    ุงู ุชุงุจุน ุณูพุณ ูุฑุงุฎูุงู ูโุดูุฏ ุชุง ุงููู ุตุฏุง ุฐุฎุฑู ุดูุฏ ู ูุงู ุตุฏุง ุฏุฑ ฺฉูุณูู ฺุงูพ ุดูุฏ. ุงู ุตุฏุง ูโุชูุงูุฏ ฺฉ ุจุงุฑ ุฏุฑุฎูุงุณุช ุดูุฏ ู ููุฏุงุฑ ุขู ุจุฑุง ูุฑ ูุฑุงุฎูุงู ุจู ููุธูุฑ ุชุจุฏู ูุชู ุจู ฺฏูุชุงุฑ ุงุณุชูุงุฏู ุดูุฏ.

    > ๐ ุดูุง ูโุชูุงูุฏ ูุณุช ฺฉุงูู ุตุฏุงูุง ูพุดุชุจุงูโุดุฏู ุฑุง ุงุฒ [ูุณุชูุฏุงุช ูพุดุชุจุงู ุฒุจุงู ู ุตุฏุง ุฏุฑ Microsoft Docs](https://docs.microsoft.com/azure/cognitive-services/speech-service/language-support?WT.mc_id=academic-17441-jabenn#text-to-speech) ุฏุฑุงูุช ฺฉูุฏ. ุงฺฏุฑ ูโุฎูุงูุฏ ุงุฒ ฺฉ ุตุฏุง ุฎุงุต ุงุณุชูุงุฏู ฺฉูุฏุ ูโุชูุงูุฏ ุงู ุชุงุจุน ุฑุง ุญุฐู ฺฉุฑุฏู ู ูุงู ุตุฏุง ุฑุง ุงุฒ ุงู ูุณุชูุฏุงุช ุจู ุตูุฑุช ุซุงุจุช ูุงุฑุฏ ฺฉูุฏ. ุจุฑุง ูุซุงู:
    >
    > ```python
    > voice = 'hi-IN-SwaraNeural'
    > ```

### ูุธูู - ุชุจุฏู ูุชู ุจู ฺฏูุชุงุฑ

1. ุฏุฑ ุฒุฑ ุงู ุจุฎุดุ ฺฉ ุซุงุจุช ุจุฑุง ูุฑูุช ุตูุช ฺฉู ุงุฒ ุณุฑูุณ ฺฏูุชุงุฑ ุฏุฑุงูุช ูโุดูุฏ ุชุนุฑู ฺฉูุฏ. ููฺฏุงู ุฏุฑุฎูุงุณุช ุตูุชุ ูโุชูุงูุฏ ุขู ุฑุง ุฏุฑ ูุงูุจโูุง ูุฎุชูู ุฏุฑุงูุช ฺฉูุฏ.

    ```python
    playback_format = 'riff-48khz-16bit-mono-pcm'
    ```

    ูุฑูุช ููุฑุฏ ุงุณุชูุงุฏู ุดูุง ุจู ุณุฎุชโุงูุฒุงุฑ ุดูุง ุจุณุชฺฏ ุฏุงุฑุฏ. ุงฺฏุฑ ููฺฏุงู ูพุฎุด ุตูุช ุฎุทุงูุง ูุงููุฏ `Invalid sample rate` ุฏุฑุงูุช ฺฉุฑุฏุฏุ ุงู ููุฏุงุฑ ุฑุง ุจู ููุฏุงุฑ ุฏฺฏุฑ ุชุบุฑ ุฏูุฏ. ูุณุช ููุงุฏุฑ ูพุดุชุจุงูโุดุฏู ุฑุง ูโุชูุงูุฏ ุฏุฑ [ูุณุชูุฏุงุช API REST ุชุจุฏู ูุชู ุจู ฺฏูุชุงุฑ ุฏุฑ Microsoft Docs](https://docs.microsoft.com/azure/cognitive-services/speech-service/rest-text-to-speech?WT.mc_id=academic-17441-jabenn#audio-outputs) ูพุฏุง ฺฉูุฏ. ุดูุง ุจุงุฏ ุงุฒ ูุฑูุช ุตูุช `riff` ุงุณุชูุงุฏู ฺฉูุฏ ู ููุงุฏุฑ ูุงุจู ุงูุชุญุงู ุนุจุงุฑุชูุฏ ุงุฒ `riff-16khz-16bit-mono-pcm`ุ `riff-24khz-16bit-mono-pcm` ู `riff-48khz-16bit-mono-pcm`.

1. ุฏุฑ ุฒุฑ ุงู ุจุฎุดุ ฺฉ ุชุงุจุน ุจู ูุงู `get_speech` ุชุนุฑู ฺฉูุฏ ฺฉู ูุชู ุฑุง ุจุง ุงุณุชูุงุฏู ุงุฒ API REST ุณุฑูุณ ฺฏูุชุงุฑ ุจู ฺฏูุชุงุฑ ุชุจุฏู ฺฉูุฏ:

    ```python
    def get_speech(text):
    ```

1. ุฏุฑ ุชุงุจุน `get_speech`ุ URL ูุฑุงุฎูุงู ู ูุฏุฑูุง ฺฉู ุจุงุฏ ุงุฑุณุงู ุดููุฏ ุฑุง ุชุนุฑู ฺฉูุฏ:

    ```python
        url = f'https://{location}.tts.speech.microsoft.com/cognitiveservices/v1'
    
        headers = {
            'Authorization': 'Bearer ' + get_access_token(),
            'Content-Type': 'application/ssml+xml',
            'X-Microsoft-OutputFormat': playback_format
        }
    ```

    ุงู ุจุฎุด ูุฏุฑูุง ุฑุง ุชูุธู ูโฺฉูุฏ ุชุง ุงุฒ ฺฉ ุชูฺฉู ุฏุณุชุฑุณ ุชููุฏโุดุฏู ุงุณุชูุงุฏู ฺฉูุฏุ ูุญุชูุง ุฑุง ุจู SSML ุชูุธู ฺฉูุฏ ู ูุฑูุช ุตูุช ููุฑุฏ ูุงุฒ ุฑุง ุชุนุฑู ฺฉูุฏ.

1. ุฏุฑ ุฒุฑ ุงู ุจุฎุดุ SSML ุฑุง ฺฉู ุจุงุฏ ุจู API REST ุงุฑุณุงู ุดูุฏ ุชุนุฑู ฺฉูุฏ:

    ```python
    ssml =  f'<speak version=\'1.0\' xml:lang=\'{language}\'>'
    ssml += f'<voice xml:lang=\'{language}\' name=\'{voice}\'>'
    ssml += text
    ssml += '</voice>'
    ssml += '</speak>'
    ```

    ุงู SSML ุฒุจุงู ู ุตุฏุง ููุฑุฏ ุงุณุชูุงุฏู ุฑุง ุชูุธู ูโฺฉูุฏุ ููุฑุงู ุจุง ูุชู ฺฉู ุจุงุฏ ุชุจุฏู ุดูุฏ.

1. ุฏุฑ ููุงุชุ ฺฉุฏ ุฏุฑ ุงู ุชุงุจุน ุงุถุงูู ฺฉูุฏ ุชุง ุฏุฑุฎูุงุณุช REST ุงูุฌุงู ุดูุฏ ู ุฏุงุฏูโูุง ุตูุช ุจุงูุฑ ุจุงุฒฺฏุฑุฏุงูุฏู ุดูุฏ:

    ```python
    response = requests.post(url, headers=headers, data=ssml.encode('utf-8'))
    return io.BytesIO(response.content)
    ```

### ูุธูู - ูพุฎุด ุตูุช

1. ุฏุฑ ุฒุฑ ุชุงุจุน `get_speech`ุ ฺฉ ุชุงุจุน ุฌุฏุฏ ุจุฑุง ูพุฎุด ุตูุช ุจุงุฒฺฏุฑุฏุงูุฏูโุดุฏู ุชูุณุท ูุฑุงุฎูุงู API REST ุชุนุฑู ฺฉูุฏ:

    ```python
    def play_speech(speech):
    ```

1. ุตูุช ฺฉู ุจู ุงู ุชุงุจุน ุงุฑุณุงู ูโุดูุฏ ุฏุงุฏูโูุง ุตูุช ุจุงูุฑ ุจุงุฒฺฏุฑุฏุงูุฏูโุดุฏู ุงุฒ API REST ุฎูุงูุฏ ุจูุฏ. ุงุฒ ฺฉุฏ ุฒุฑ ุงุณุชูุงุฏู ฺฉูุฏ ุชุง ุงู ุฏุงุฏูโูุง ุฑุง ุจู ุนููุงู ฺฉ ูุงู wave ุจุงุฒ ฺฉูุฏ ู ุขู ุฑุง ุจู PyAudio ุงุฑุณุงู ฺฉูุฏ ุชุง ุตูุช ูพุฎุด ุดูุฏ:

    ```python
    def play_speech(speech):
        with wave.open(speech, 'rb') as wave_file:
            stream = audio.open(format=audio.get_format_from_width(wave_file.getsampwidth()),
                                channels=wave_file.getnchannels(),
                                rate=wave_file.getframerate(),
                                output_device_index=speaker_card_number,
                                output=True)

            data = wave_file.readframes(4096)

            while len(data) > 0:
                stream.write(data)
                data = wave_file.readframes(4096)

            stream.stop_stream()
            stream.close()
    ```

    ุงู ฺฉุฏ ุงุฒ ฺฉ ุฌุฑุงู PyAudio ุงุณุชูุงุฏู ูโฺฉูุฏุ ูุดุงุจู ุถุจุท ุตูุช. ุชูุงูุช ุงูุฌุง ุงู ุงุณุช ฺฉู ุฌุฑุงู ุจู ุนููุงู ฺฉ ุฌุฑุงู ุฎุฑูุฌ ุชูุธู ุดุฏู ุงุณุช ู ุฏุงุฏูโูุง ุงุฒ ุฏุงุฏูโูุง ุตูุช ุฎูุงูุฏู ุดุฏู ู ุจู ุฌุฑุงู ุงุฑุณุงู ูโุดููุฏ.

    ุจู ุฌุง ุชูุธู ุฌุฒุฆุงุช ุฌุฑุงู ูุงููุฏ ูุฑุฎ ูููููโุจุฑุฏุงุฑ ุจู ุตูุฑุช ุซุงุจุชุ ุงู ุฌุฒุฆุงุช ุงุฒ ุฏุงุฏูโูุง ุตูุช ุฎูุงูุฏู ูโุดูุฏ.

1. ูุญุชูุง ุชุงุจุน `say` ุฑุง ุจุง ฺฉุฏ ุฒุฑ ุฌุงฺฏุฒู ฺฉูุฏ:

    ```python
    speech = get_speech(text)
    play_speech(speech)
    ```

    ุงู ฺฉุฏ ูุชู ุฑุง ุจู ฺฏูุชุงุฑ ุจู ุตูุฑุช ุฏุงุฏูโูุง ุตูุช ุจุงูุฑ ุชุจุฏู ูโฺฉูุฏ ู ุตูุช ุฑุง ูพุฎุด ูโฺฉูุฏ.

1. ุจุฑูุงูู ุฑุง ุงุฌุฑุง ฺฉูุฏ ู ูุทูุฆู ุดูุฏ ฺฉู ุจุฑูุงูู ุชุงุจุน ูุฒ ุฏุฑ ุญุงู ุงุฌุฑุง ุงุณุช. ฺูุฏ ุชุงูุฑ ุชูุธู ฺฉูุฏ ู ุฎูุงูุฏ ุดูุฏ ฺฉู ฺฉ ูพุงุณุฎ ุตูุช ูโฺฏูุฏ ุชุงูุฑ ุดูุง ุชูุธู ุดุฏู ุงุณุชุ ุณูพุณ ฺฉ ูพุงุณุฎ ุตูุช ุฏฺฏุฑ ุฒูุงู ฺฉู ุชุงูุฑ ฺฉุงูู ุดุฏ.

    ุงฺฏุฑ ุฎุทุงูุง ูุงููุฏ `Invalid sample rate` ุฏุฑุงูุช ฺฉุฑุฏุฏุ `playback_format` ุฑุง ููุงูุทูุฑ ฺฉู ุฏุฑ ุจุงูุง ุชูุถุญ ุฏุงุฏู ุดุฏ ุชุบุฑ ุฏูุฏ.

> ๐ ุดูุง ูโุชูุงูุฏ ุงู ฺฉุฏ ุฑุง ุฏุฑ ูพูุดู [code-spoken-response/pi](../../../../../6-consumer/lessons/3-spoken-feedback/code-spoken-response/pi) ูพุฏุง ฺฉูุฏ.

๐ ุจุฑูุงูู ุชุงูุฑ ุดูุง ููููุชโุขูุฒ ุจูุฏ!

**ุณูุจ ูุณุฆููุช**:  
ุงู ุณูุฏ ุจุง ุงุณุชูุงุฏู ุงุฒ ุณุฑูุณ ุชุฑุฌูู ููุด ูุตููุน [Co-op Translator](https://github.com/Azure/co-op-translator) ุชุฑุฌูู ุดุฏู ุงุณุช. ุฏุฑ ุญุงู ฺฉู ูุง ุชูุงุด ูโฺฉูู ุฏูุช ุฑุง ุญูุธ ฺฉููุ ูุทูุงู ุชูุฌู ุฏุงุดุชู ุจุงุดุฏ ฺฉู ุชุฑุฌููโูุง ุฎูุฏฺฉุงุฑ ููฺฉู ุงุณุช ุดุงูู ุฎุทุงูุง ุง ูุงุฏุฑุณุชโูุง ุจุงุดูุฏ. ุณูุฏ ุงุตู ุจู ุฒุจุงู ุงุตู ุขู ุจุงุฏ ุจู ุนููุงู ููุจุน ูุนุชุจุฑ ุฏุฑ ูุธุฑ ฺฏุฑูุชู ุดูุฏ. ุจุฑุง ุงุทูุงุนุงุช ุญุณุงุณุ ุชูุตู ูโุดูุฏ ุงุฒ ุชุฑุฌูู ุญุฑููโุง ุงูุณุงู ุงุณุชูุงุฏู ฺฉูุฏ. ูุง ูุณุฆููุช ุฏุฑ ูุจุงู ุณูุก ุชูุงููโูุง ุง ุชูุณุฑูุง ูุงุฏุฑุณุช ูุงุด ุงุฒ ุงุณุชูุงุฏู ุงุฒ ุงู ุชุฑุฌูู ูุฏุงุฑู.