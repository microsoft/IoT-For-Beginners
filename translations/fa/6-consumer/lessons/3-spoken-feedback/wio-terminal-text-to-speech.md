<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "a202fa5889790a3777bfc33dd9f4b459",
  "translation_date": "2025-08-25T22:39:32+00:00",
  "source_file": "6-consumer/lessons/3-spoken-feedback/wio-terminal-text-to-speech.md",
  "language_code": "fa"
}
-->
# ุชุจุฏู ูุชู ุจู ฺฏูุชุงุฑ - Wio Terminal

ุฏุฑ ุงู ุจุฎุด ุงุฒ ุฏุฑุณุ ูุชู ุฑุง ุจู ฺฏูุชุงุฑ ุชุจุฏู ุฎูุงูุฏ ฺฉุฑุฏ ุชุง ุจุงุฒุฎูุฑุฏ ุตูุช ุงุฑุงุฆู ุฏูุฏ.

## ุชุจุฏู ูุชู ุจู ฺฏูุชุงุฑ

SDK ุฎุฏูุงุช ฺฏูุชุงุฑ ฺฉู ุฏุฑ ุฏุฑุณ ูุจู ุจุฑุง ุชุจุฏู ฺฏูุชุงุฑ ุจู ูุชู ุงุณุชูุงุฏู ฺฉุฑุฏุฏุ ูโุชูุงูุฏ ุจุฑุง ุชุจุฏู ูุชู ุจู ฺฏูุชุงุฑ ูุฒ ุงุณุชูุงุฏู ุดูุฏ.

## ุฏุฑุงูุช ูุณุช ุตุฏุงูุง

ููฺฏุงู ุฏุฑุฎูุงุณุช ฺฏูุชุงุฑุ ุจุงุฏ ุตุฏุง ฺฉู ูโุฎูุงูุฏ ุงุณุชูุงุฏู ฺฉูุฏ ุฑุง ูุดุฎุต ฺฉูุฏุ ุฒุฑุง ฺฏูุชุงุฑ ูโุชูุงูุฏ ุจุง ุงุณุชูุงุฏู ุงุฒ ุงููุงุน ูุฎุชูู ุตุฏุงูุง ุชููุฏ ุดูุฏ. ูุฑ ุฒุจุงู ุงุฒ ูุฌููุนูโุง ุงุฒ ุตุฏุงูุง ูุฎุชูู ูพุดุชุจุงู ูโฺฉูุฏ ู ูโุชูุงูุฏ ูุณุช ุตุฏุงูุง ูพุดุชุจุงูโุดุฏู ุจุฑุง ูุฑ ุฒุจุงู ุฑุง ุงุฒ SDK ุฎุฏูุงุช ฺฏูุชุงุฑ ุฏุฑุงูุช ฺฉูุฏ. ูุญุฏูุฏุชโูุง ูฺฉุฑูฺฉูุชุฑูุฑูุง ุฏุฑ ุงูุฌุง ูุงุฑุฏ ุนูู ูโุดููุฏ - ุฏุฑุฎูุงุณุช ูุณุช ุตุฏุงูุง ูพุดุชุจุงูโุดุฏู ุชูุณุท ุฎุฏูุงุช ุชุจุฏู ูุชู ุจู ฺฏูุชุงุฑ ฺฉ ุณูุฏ JSON ุจุง ุญุฌู ุจุด ุงุฒ 77 ฺฉููุจุงุช ุงุณุช ฺฉู ุจุฑุง ูพุฑุฏุงุฒุด ุชูุณุท Wio Terminal ุจุณุงุฑ ุจุฒุฑฺฏ ุงุณุช. ุฏุฑ ุฒูุงู ูฺฏุงุฑุด ุงู ูุชูุ ูุณุช ฺฉุงูู ุดุงูู 215 ุตุฏุง ุงุณุช ฺฉู ูุฑ ฺฉุฏุงู ุชูุณุท ฺฉ ุณูุฏ JSON ูุงููุฏ ุฒุฑ ุชุนุฑู ุดุฏูโุงูุฏ:

```json
{
    "Name": "Microsoft Server Speech Text to Speech Voice (en-US, AriaNeural)",
    "DisplayName": "Aria",
    "LocalName": "Aria",
    "ShortName": "en-US-AriaNeural",
    "Gender": "Female",
    "Locale": "en-US",
    "StyleList": [
        "chat",
        "customerservice",
        "narration-professional",
        "newscast-casual",
        "newscast-formal",
        "cheerful",
        "empathetic"
    ],
    "SampleRateHertz": "24000",
    "VoiceType": "Neural",
    "Status": "GA"
}
```

ุงู JSON ูุฑุจูุท ุจู ุตุฏุง **Aria** ุงุณุช ฺฉู ุฏุงุฑุง ุณุจฺฉโูุง ูุฎุชูู ุตุฏุง ุงุณุช. ุชููุง ฺุฒ ฺฉู ุจุฑุง ุชุจุฏู ูุชู ุจู ฺฏูุชุงุฑ ูุงุฒู ุงุณุชุ ูุงู ฺฉูุชุงูุ `en-US-AriaNeural` ุงุณุช.

ุจู ุฌุง ุฏุงูููุฏ ู ุฑูุฒฺฏุดุง ุงู ูุณุช ฺฉุงูู ุฏุฑ ูฺฉุฑูฺฉูุชุฑูุฑ ุฎูุฏุ ุจุงุฏ ฺฉุฏ ุจุฏูู ุณุฑูุฑ ุจููุณุฏ ุชุง ูุณุช ุตุฏุงูุง ุฒุจุงู ููุฑุฏ ุงุณุชูุงุฏู ุฎูุฏ ุฑุง ุจุงุฒุงุจ ฺฉูุฏ ู ุงู ฺฉุฏ ุฑุง ุงุฒ Wio Terminal ุฎูุฏ ูุฑุงุฎูุงู ฺฉูุฏ. ุณูพุณ ฺฉุฏ ุดูุง ูโุชูุงูุฏ ฺฉ ุตุฏุง ููุงุณุจ ุงุฒ ูุณุช ุงูุชุฎุงุจ ฺฉูุฏุ ูุงููุฏ ุงููู ุตุฏุง ฺฉู ูพุฏุง ูโฺฉูุฏ.

### ูุธูู - ุงุฌุงุฏ ฺฉ ุชุงุจุน ุจุฏูู ุณุฑูุฑ ุจุฑุง ุฏุฑุงูุช ูุณุช ุตุฏุงูุง

1. ูพุฑูฺู `smart-timer-trigger` ุฎูุฏ ุฑุง ุฏุฑ VS Code ุจุงุฒ ฺฉูุฏ ู ุชุฑููุงู ุฑุง ุจุงุฒ ฺฉูุฏ ู ูุทูุฆู ุดูุฏ ฺฉู ูุญุท ูุฌุงุฒ ูุนุงู ุดุฏู ุงุณุช. ุงฺฏุฑ ูุนุงู ูุณุชุ ุชุฑููุงู ุฑุง ุจุจูุฏุฏ ู ุฏูุจุงุฑู ุงุฌุงุฏ ฺฉูุฏ.

1. ูุงู `local.settings.json` ุฑุง ุจุงุฒ ฺฉูุฏ ู ุชูุธูุงุช ูุฑุจูุท ุจู ฺฉูุฏ API ฺฏูุชุงุฑ ู ูฺฉุงู ุฑุง ุงุถุงูู ฺฉูุฏ:

    ```json
    "SPEECH_KEY": "<key>",
    "SPEECH_LOCATION": "<location>"
    ```

    `<key>` ุฑุง ุจุง ฺฉูุฏ API ุจุฑุง ููุจุน ุฎุฏูุงุช ฺฏูุชุงุฑ ุฎูุฏ ุฌุงฺฏุฒู ฺฉูุฏ. `<location>` ุฑุง ุจุง ูฺฉุงู ฺฉู ููฺฏุงู ุงุฌุงุฏ ููุจุน ุฎุฏูุงุช ฺฏูุชุงุฑ ุงุณุชูุงุฏู ฺฉุฑุฏุฏ ุฌุงฺฏุฒู ฺฉูุฏ.

1. ฺฉ HTTP trigger ุฌุฏุฏ ุจู ุงู ุจุฑูุงูู ุงุถุงูู ฺฉูุฏ ุจู ูุงู `get-voices` ุจุง ุงุณุชูุงุฏู ุงุฒ ุฏุณุชูุฑ ุฒุฑ ุงุฒ ุฏุงุฎู ุชุฑููุงู VS Code ุฏุฑ ูพูุดู ุงุตู ูพุฑูฺู ุจุฑูุงูู ุชูุงุจุน:

    ```sh
    func new --name get-voices --template "HTTP trigger"
    ```

    ุงู ฺฉ HTTP trigger ุจู ูุงู `get-voices` ุงุฌุงุฏ ุฎูุงูุฏ ฺฉุฑุฏ.

1. ูุญุชูุง ูุงู `__init__.py` ุฏุฑ ูพูุดู `get-voices` ุฑุง ุจุง ููุงุฑุฏ ุฒุฑ ุฌุงฺฏุฒู ฺฉูุฏ:

    ```python
    import json
    import os
    import requests
    
    import azure.functions as func
    
    def main(req: func.HttpRequest) -> func.HttpResponse:
        location = os.environ['SPEECH_LOCATION']
        speech_key = os.environ['SPEECH_KEY']
    
        req_body = req.get_json()
        language = req_body['language']
    
        url = f'https://{location}.tts.speech.microsoft.com/cognitiveservices/voices/list'
    
        headers = {
            'Ocp-Apim-Subscription-Key': speech_key
        }
    
        response = requests.get(url, headers=headers)
        voices_json = json.loads(response.text)
    
        voices = filter(lambda x: x['Locale'].lower() == language.lower(), voices_json)
        voices = map(lambda x: x['ShortName'], voices)
    
        return func.HttpResponse(json.dumps(list(voices)), status_code=200)
    ```

    ุงู ฺฉุฏ ฺฉ ุฏุฑุฎูุงุณุช HTTP ุจู ููุทู ูพุงุงู ุจุฑุง ุฏุฑุงูุช ุตุฏุงูุง ุงุฌุงุฏ ูโฺฉูุฏ. ุงู ูุณุช ุตุฏุงูุง ฺฉ ุจููฺฉ ุจุฒุฑฺฏ JSON ุจุง ุตุฏุงูุง ููู ุฒุจุงูโูุง ุงุณุชุ ุจูุงุจุฑุงู ุตุฏุงูุง ุฒุจุงู ุงุฑุณุงูโุดุฏู ุฏุฑ ุจุฏูู ุฏุฑุฎูุงุณุช ููุชุฑ ูโุดููุฏุ ุณูพุณ ูุงู ฺฉูุชุงู ุงุณุชุฎุฑุงุฌ ุดุฏู ู ุจู ุตูุฑุช ฺฉ ูุณุช JSON ุจุงุฒฺฏุฑุฏุงูุฏู ูโุดูุฏ. ูุงู ฺฉูุชุงู ููุงู ููุฏุงุฑ ุงุณุช ฺฉู ุจุฑุง ุชุจุฏู ูุชู ุจู ฺฏูุชุงุฑ ูุงุฒู ุงุณุชุ ุจูุงุจุฑุงู ููุท ุงู ููุฏุงุฑ ุจุงุฒฺฏุฑุฏุงูุฏู ูโุดูุฏ.

    > ๐ ูโุชูุงูุฏ ููุชุฑ ุฑุง ุจู ุฏูุฎูุงู ุชุบุฑ ุฏูุฏ ุชุง ููุท ุตุฏุงูุง ฺฉู ูโุฎูุงูุฏ ุงูุชุฎุงุจ ุดููุฏ.

    ุงู ุญุฌู ุฏุงุฏู ุฑุง ุงุฒ 77 ฺฉููุจุงุช (ุฏุฑ ุฒูุงู ูฺฏุงุฑุด) ุจู ฺฉ ุณูุฏ JSON ุจุณุงุฑ ฺฉูฺฺฉโุชุฑ ฺฉุงูุด ูโุฏูุฏ. ุจู ุนููุงู ูุซุงูุ ุจุฑุง ุตุฏุงูุง ุงุงูุงุช ูุชุญุฏู ุงู ุญุฌู 408 ุจุงุช ุงุณุช.

1. ุจุฑูุงูู ุชูุงุจุน ุฎูุฏ ุฑุง ุจู ุตูุฑุช ูุญู ุงุฌุฑุง ฺฉูุฏ. ุณูพุณ ูโุชูุงูุฏ ุจุง ุงุณุชูุงุฏู ุงุฒ ุงุจุฒุงุฑ ูุงููุฏ curl ุงู ุฑุง ูุฑุงุฎูุงู ฺฉูุฏุ ููุงูุทูุฑ ฺฉู HTTP trigger `text-to-timer` ุฎูุฏ ุฑุง ุขุฒูุงุด ฺฉุฑุฏุฏ. ูุทูุฆู ุดูุฏ ฺฉู ุฒุจุงู ุฎูุฏ ุฑุง ุจู ุนููุงู ฺฉ ุจุฏูู JSON ุงุฑุณุงู ฺฉูุฏ:

    ```json
    {
        "language":"<language>"
    }
    ```

    `<language>` ุฑุง ุจุง ุฒุจุงู ุฎูุฏ ุฌุงฺฏุฒู ฺฉูุฏุ ูุงููุฏ `en-GB` ุง `zh-CN`.

> ๐ ูโุชูุงูุฏ ุงู ฺฉุฏ ุฑุง ุฏุฑ ูพูุดู [code-spoken-response/functions](../../../../../6-consumer/lessons/3-spoken-feedback/code-spoken-response/functions) ูพุฏุง ฺฉูุฏ.

### ูุธูู - ุจุงุฒุงุจ ุตุฏุง ุงุฒ Wio Terminal ุฎูุฏ

1. ูพุฑูฺู `smart-timer` ุฎูุฏ ุฑุง ุฏุฑ VS Code ุจุงุฒ ฺฉูุฏ ุงฺฏุฑ ูููุฒ ุจุงุฒ ูุดุฏู ุงุณุช.

1. ูุงู ูุฏุฑ `config.h` ุฑุง ุจุงุฒ ฺฉูุฏ ู URL ุจุฑูุงูู ุชูุงุจุน ุฎูุฏ ุฑุง ุงุถุงูู ฺฉูุฏ:

    ```cpp
    const char *GET_VOICES_FUNCTION_URL = "<URL>";
    ```

    `<URL>` ุฑุง ุจุง URL ุจุฑุง HTTP trigger `get-voices` ุฏุฑ ุจุฑูุงูู ุชูุงุจุน ุฎูุฏ ุฌุงฺฏุฒู ฺฉูุฏ. ุงู ููุฏุงุฑ ููุงู ููุฏุงุฑ `TEXT_TO_TIMER_FUNCTION_URL` ุฎูุงูุฏ ุจูุฏุ ุจู ุฌุฒ ุจุง ูุงู ุชุงุจุน `get-voices` ุจู ุฌุง `text-to-timer`.

1. ฺฉ ูุงู ุฌุฏุฏ ุฏุฑ ูพูุดู `src` ุงุฌุงุฏ ฺฉูุฏ ุจู ูุงู `text_to_speech.h`. ุงู ูุงู ุจุฑุง ุชุนุฑู ฺฉ ฺฉูุงุณ ุจุฑุง ุชุจุฏู ูุชู ุจู ฺฏูุชุงุฑ ุงุณุชูุงุฏู ุฎูุงูุฏ ุดุฏ.

1. ุฏุณุชูุฑุงุช include ุฒุฑ ุฑุง ุจู ุจุงูุง ูุงู ุฌุฏุฏ `text_to_speech.h` ุงุถุงูู ฺฉูุฏ:

    ```cpp
    #pragma once

    #include <Arduino.h>
    #include <ArduinoJson.h>
    #include <HTTPClient.h>
    #include <Seeed_FS.h>
    #include <SD/Seeed_SD.h>
    #include <WiFiClient.h>
    #include <WiFiClientSecure.h>
    
    #include "config.h"
    #include "speech_to_text.h"
    ```

1. ฺฉุฏ ุฒุฑ ุฑุง ุฏุฑ ุฒุฑ ุงู ุฏุณุชูุฑุงุช ุงุถุงูู ฺฉูุฏ ุชุง ฺฉูุงุณ `TextToSpeech` ุฑุง ุงุนูุงู ฺฉูุฏุ ููุฑุงู ุจุง ฺฉ ููููู ฺฉู ูโุชูุงูุฏ ุฏุฑ ุจูู ุจุฑูุงูู ุงุณุชูุงุฏู ุดูุฏ:

    ```cpp
    class TextToSpeech
    {
    public:
    private:
    };
    
    TextToSpeech textToSpeech;
    ```

1. ุจุฑุง ูุฑุงุฎูุงู ุจุฑูุงูู ุชูุงุจุน ุฎูุฏุ ุจุงุฏ ฺฉ WiFi client ุงุนูุงู ฺฉูุฏ. ููุงุฑุฏ ุฒุฑ ุฑุง ุจู ุจุฎุด `private` ฺฉูุงุณ ุงุถุงูู ฺฉูุฏ:

    ```cpp
    WiFiClient _client;
    ```

1. ุฏุฑ ุจุฎุด `private`ุ ฺฉ ููุฏ ุจุฑุง ุตุฏุง ุงูุชุฎุงุจโุดุฏู ุงุถุงูู ฺฉูุฏ:

    ```cpp
    String _voice;
    ```

1. ุจู ุจุฎุด `public`ุ ฺฉ ุชุงุจุน `init` ุงุถุงูู ฺฉูุฏ ฺฉู ุงููู ุตุฏุง ุฑุง ุฏุฑุงูุช ฺฉูุฏ:

    ```cpp
    void init()
    {
    }
    ```

1. ุจุฑุง ุฏุฑุงูุช ุตุฏุงูุงุ ฺฉ ุณูุฏ JSON ุจุงุฏ ุจู ุจุฑูุงูู ุชูุงุจุน ุงุฑุณุงู ุดูุฏ ฺฉู ุฒุจุงู ุฑุง ูุดุฎุต ฺฉูุฏ. ฺฉุฏ ุฒุฑ ุฑุง ุจู ุชุงุจุน `init` ุงุถุงูู ฺฉูุฏ ุชุง ุงู ุณูุฏ JSON ุงุฌุงุฏ ุดูุฏ:

    ```cpp
    DynamicJsonDocument doc(1024);
    doc["language"] = LANGUAGE;

    String body;
    serializeJson(doc, body);
    ```

1. ุณูพุณ ฺฉ `HTTPClient` ุงุฌุงุฏ ฺฉูุฏ ู ุงุฒ ุขู ุจุฑุง ูุฑุงุฎูุงู ุจุฑูุงูู ุชูุงุจุน ุจุฑุง ุฏุฑุงูุช ุตุฏุงูุง ุงุณุชูุงุฏู ฺฉูุฏุ ุณูุฏ JSON ุฑุง ุงุฑุณุงู ฺฉูุฏ:

    ```cpp
    HTTPClient httpClient;
    httpClient.begin(_client, GET_VOICES_FUNCTION_URL);

    int httpResponseCode = httpClient.POST(body);
    ```

1. ุฒุฑ ุงู ฺฉุฏุ ฺฉุฏ ุงุถุงูู ฺฉูุฏ ุชุง ฺฉุฏ ูพุงุณุฎ ุฑุง ุจุฑุฑุณ ฺฉูุฏุ ู ุงฺฏุฑ 200 (ููููุช) ุจูุฏุ ูุณุช ุตุฏุงูุง ุงุณุชุฎุฑุงุฌ ุดูุฏ ู ุงููู ุตุฏุง ุงุฒ ูุณุช ุจุงุฒุงุจ ุดูุฏ:

    ```cpp
    if (httpResponseCode == 200)
    {
        String result = httpClient.getString();
        Serial.println(result);

        DynamicJsonDocument doc(1024);
        deserializeJson(doc, result.c_str());

        JsonArray obj = doc.as<JsonArray>();
        _voice = obj[0].as<String>();

        Serial.print("Using voice ");
        Serial.println(_voice);
    }
    else
    {
        Serial.print("Failed to get voices - error ");
        Serial.println(httpResponseCode);
    }
    ```

1. ูพุณ ุงุฒ ุงูุ ุงุชุตุงู HTTP client ุฑุง ูพุงุงู ุฏูุฏ:

    ```cpp
    httpClient.end();
    ```

1. ูุงู `main.cpp` ุฑุง ุจุงุฒ ฺฉูุฏ ู ุฏุณุชูุฑ include ุฒุฑ ุฑุง ุจู ุจุงูุง ูุงู ุงุถุงูู ฺฉูุฏ ุชุง ุงู ูุงู ูุฏุฑ ุฌุฏุฏ ุฑุง ุดุงูู ุดูุฏ:

    ```cpp
    #include "text_to_speech.h"
    ```

1. ุฏุฑ ุชุงุจุน `setup`ุ ุฒุฑ ูุฑุงุฎูุงู `speechToText.init();`ุ ููุงุฑุฏ ุฒุฑ ุฑุง ุงุถุงูู ฺฉูุฏ ุชุง ฺฉูุงุณ `TextToSpeech` ุฑุง ููุฏุงุฑุฏู ุงููู ฺฉูุฏ:

    ```cpp
    textToSpeech.init();
    ```

1. ฺฉุฏ ุฑุง ุจุณุงุฒุฏุ ุขู ุฑุง ุจู Wio Terminal ุฎูุฏ ุขูพููุฏ ฺฉูุฏ ู ุงุฒ ุทุฑู ูุงูุชูุฑ ุณุฑุงู ุขู ุฑุง ุขุฒูุงุด ฺฉูุฏ. ูุทูุฆู ุดูุฏ ฺฉู ุจุฑูุงูู ุชูุงุจุน ุดูุง ุฏุฑ ุญุงู ุงุฌุฑุง ุงุณุช.

    ูุณุช ุตุฏุงูุง ููุฌูุฏ ฺฉู ุงุฒ ุจุฑูุงูู ุชูุงุจุน ุจุงุฒฺฏุฑุฏุงูุฏู ุดุฏูโุงูุฏุ ููุฑุงู ุจุง ุตุฏุง ุงูุชุฎุงุจโุดุฏู ุฑุง ูุดุงูุฏู ุฎูุงูุฏ ฺฉุฑุฏ.

    ```output
    --- Available filters and text transformations: colorize, debug, default, direct, hexlify, log2file, nocontrol, printable, send_on_enter, time
    --- More details at http://bit.ly/pio-monitor-filters
    --- Miniterm on /dev/cu.usbmodem1101  9600,8,N,1 ---
    --- Quit: Ctrl+C | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H ---
    Connecting to WiFi..
    Connected!
    Got access token.
    ["en-US-JennyNeural", "en-US-JennyMultilingualNeural", "en-US-GuyNeural", "en-US-AriaNeural", "en-US-AmberNeural", "en-US-AnaNeural", "en-US-AshleyNeural", "en-US-BrandonNeural", "en-US-ChristopherNeural", "en-US-CoraNeural", "en-US-ElizabethNeural", "en-US-EricNeural", "en-US-JacobNeural", "en-US-MichelleNeural", "en-US-MonicaNeural", "en-US-AriaRUS", "en-US-BenjaminRUS", "en-US-GuyRUS", "en-US-ZiraRUS"]
    Using voice en-US-JennyNeural
    Ready.
    ```

## ุชุจุฏู ูุชู ุจู ฺฏูุชุงุฑ

ูพุณ ุงุฒ ุฏุงุดุชู ฺฉ ุตุฏุง ุจุฑุง ุงุณุชูุงุฏูุ ูโุชูุงู ุงุฒ ุขู ุจุฑุง ุชุจุฏู ูุชู ุจู ฺฏูุชุงุฑ ุงุณุชูุงุฏู ฺฉุฑุฏ. ูุญุฏูุฏุชโูุง ุญุงูุธู ูุดุงุจู ุจุง ุตุฏุงูุง ููฺฏุงู ุชุจุฏู ฺฏูุชุงุฑ ุจู ูุชู ูุฒ ุงุนูุงู ูโุดููุฏุ ุจูุงุจุฑุงู ุจุงุฏ ฺฏูุชุงุฑ ุฑุง ุฑู ฺฉ ฺฉุงุฑุช SD ุฐุฎุฑู ฺฉูุฏ ุชุง ุจุชูุงู ุขู ุฑุง ุงุฒ ุทุฑู ReSpeaker ูพุฎุด ฺฉุฑุฏ.

> ๐ ุฏุฑ ุฏุฑุณโูุง ูุจู ุงู ูพุฑูฺู ุงุฒ ุญุงูุธู ููุด ุจุฑุง ุฐุฎุฑู ฺฏูุชุงุฑ ุถุจุทโุดุฏู ุงุฒ ูฺฉุฑูููู ุงุณุชูุงุฏู ฺฉุฑุฏุฏ. ุงู ุฏุฑุณ ุงุฒ ฺฉุงุฑุช SD ุงุณุชูุงุฏู ูโฺฉูุฏ ุฒุฑุง ูพุฎุด ุตุฏุง ุงุฒ ุขู ุจุง ุงุณุชูุงุฏู ุงุฒ ฺฉุชุงุจุฎุงููโูุง ุตูุช Seeed ุขุณุงูโุชุฑ ุงุณุช.

ููฺูู ูุญุฏูุฏุช ุฏฺฏุฑ ูุฌูุฏ ุฏุงุฑุฏ ฺฉู ุจุงุฏ ุฏุฑ ูุธุฑ ฺฏุฑูุชู ุดูุฏุ ุฏุงุฏูโูุง ุตูุช ููุฌูุฏ ุงุฒ ุฎุฏูุงุช ฺฏูุชุงุฑ ู ูุฑูุชโูุง ฺฉู Wio Terminal ูพุดุชุจุงู ูโฺฉูุฏ. ุจุฑุฎูุงู ฺฉุงููพูุชุฑูุง ฺฉุงููุ ฺฉุชุงุจุฎุงููโูุง ุตูุช ุจุฑุง ูฺฉุฑูฺฉูุชุฑูุฑูุง ููฺฉู ุงุณุช ุจุณุงุฑ ูุญุฏูุฏ ุจุงุดูุฏ. ุจู ุนููุงู ูุซุงูุ ฺฉุชุงุจุฎุงูู ุตูุช Seeed Arduino ฺฉู ูโุชูุงูุฏ ุตุฏุง ุฑุง ุงุฒ ุทุฑู ReSpeaker ูพุฎุด ฺฉูุฏุ ููุท ุงุฒ ุตุฏุง ุจุง ูุฑุฎ ูููููโุจุฑุฏุงุฑ 44.1KHz ูพุดุชุจุงู ูโฺฉูุฏ. ุฎุฏูุงุช ฺฏูุชุงุฑ Azure ูโุชูุงููุฏ ุตุฏุง ุฑุง ุฏุฑ ฺูุฏู ูุฑูุช ุงุฑุงุฆู ุฏููุฏุ ุงูุง ูฺโฺฉุฏุงู ุงุฒ ุขูโูุง ุงุฒ ุงู ูุฑุฎ ูููููโุจุฑุฏุงุฑ ุงุณุชูุงุฏู ููโฺฉููุฏุ ุขูโูุง ููุท 8KHzุ 16KHzุ 24KHz ู 48KHz ุงุฑุงุฆู ูโุฏููุฏ. ุงู ุจุฏุงู ูุนูุงุณุช ฺฉู ุตุฏุง ุจุงุฏ ุจู 44.1KHz ุจุงุฒูููููโุจุฑุฏุงุฑ ุดูุฏุ ฺุฒ ฺฉู ุจู ููุงุจุน ุจุดุชุฑ ูุณุจุช ุจู Wio Terminal ูุงุฒ ุฏุงุฑุฏุ ุจู ูฺู ุญุงูุธู.

ููฺฏุงู ูุงุฒ ุจู ุฏุณุชฺฉุงุฑ ุฏุงุฏูโูุง ูุงููุฏ ุงูุ ุงุบูุจ ุจูุชุฑ ุงุณุช ุงุฒ ฺฉุฏ ุจุฏูู ุณุฑูุฑ ุงุณุชูุงุฏู ฺฉูุฏุ ุจู ูฺู ุงฺฏุฑ ุฏุงุฏูโูุง ุงุฒ ุทุฑู ฺฉ ูุฑุงุฎูุงู ูุจ ุฏุฑุงูุช ุดููุฏ. Wio Terminal ูโุชูุงูุฏ ฺฉ ุชุงุจุน ุจุฏูู ุณุฑูุฑ ุฑุง ูุฑุงุฎูุงู ฺฉูุฏุ ูุชู ุฑุง ุจุฑุง ุชุจุฏู ุงุฑุณุงู ฺฉูุฏุ ู ุชุงุจุน ุจุฏูู ุณุฑูุฑ ูโุชูุงูุฏ ูู ุฎุฏูุงุช ฺฏูุชุงุฑ ุฑุง ุจุฑุง ุชุจุฏู ูุชู ุจู ฺฏูุชุงุฑ ูุฑุงุฎูุงู ฺฉูุฏ ู ูู ุตุฏุง ุฑุง ุจู ูุฑุฎ ูููููโุจุฑุฏุงุฑ ููุฑุฏ ูุงุฒ ุจุงุฒูููููโุจุฑุฏุงุฑ ฺฉูุฏ. ุณูพุณ ูโุชูุงูุฏ ุตุฏุง ุฑุง ุจู ุดฺฉู ฺฉู Wio Terminal ูุงุฒ ุฏุงุฑุฏ ุจุงุฒฺฏุฑุฏุงูุฏ ุชุง ุฑู ฺฉุงุฑุช SD ุฐุฎุฑู ุดูุฏ ู ุงุฒ ุทุฑู ReSpeaker ูพุฎุด ุดูุฏ.

### ูุธูู - ุงุฌุงุฏ ฺฉ ุชุงุจุน ุจุฏูู ุณุฑูุฑ ุจุฑุง ุชุจุฏู ูุชู ุจู ฺฏูุชุงุฑ

1. ูพุฑูฺู `smart-timer-trigger` ุฎูุฏ ุฑุง ุฏุฑ VS Code ุจุงุฒ ฺฉูุฏ ู ุชุฑููุงู ุฑุง ุจุงุฒ ฺฉูุฏ ู ูุทูุฆู ุดูุฏ ฺฉู ูุญุท ูุฌุงุฒ ูุนุงู ุดุฏู ุงุณุช. ุงฺฏุฑ ูุนุงู ูุณุชุ ุชุฑููุงู ุฑุง ุจุจูุฏุฏ ู ุฏูุจุงุฑู ุงุฌุงุฏ ฺฉูุฏ.

1. ฺฉ HTTP trigger ุฌุฏุฏ ุจู ุงู ุจุฑูุงูู ุงุถุงูู ฺฉูุฏ ุจู ูุงู `text-to-speech` ุจุง ุงุณุชูุงุฏู ุงุฒ ุฏุณุชูุฑ ุฒุฑ ุงุฒ ุฏุงุฎู ุชุฑููุงู VS Code ุฏุฑ ูพูุดู ุงุตู ูพุฑูฺู ุจุฑูุงูู ุชูุงุจุน:

    ```sh
    func new --name text-to-speech --template "HTTP trigger"
    ```

    ุงู ฺฉ HTTP trigger ุจู ูุงู `text-to-speech` ุงุฌุงุฏ ุฎูุงูุฏ ฺฉุฑุฏ.

1. ุจุณุชู Pip [librosa](https://librosa.org) ุฏุงุฑุง ุชูุงุจุน ุจุฑุง ุจุงุฒูููููโุจุฑุฏุงุฑ ุตุฏุง ุงุณุชุ ุจูุงุจุฑุงู ุขู ุฑุง ุจู ูุงู `requirements.txt` ุงุถุงูู ฺฉูุฏ:

    ```sh
    librosa
    ```

    ูพุณ ุงุฒ ุงุถุงูู ฺฉุฑุฏู ุงู ููุฑุฏุ ุจุณุชูโูุง Pip ุฑุง ุจุง ุงุณุชูุงุฏู ุงุฒ ุฏุณุชูุฑ ุฒุฑ ุงุฒ ุชุฑููุงู VS Code ูุตุจ ฺฉูุฏ:

    ```sh
    pip install -r requirements.txt
    ```

    > โ๏ธ ุงฺฏุฑ ุงุฒ ูููฺฉุณุ ุงุฒ ุฌููู Raspberry Pi OS ุงุณุชูุงุฏู ูโฺฉูุฏุ ููฺฉู ุงุณุช ูุงุฒ ุจู ูุตุจ `libsndfile` ุจุง ุฏุณุชูุฑ ุฒุฑ ุฏุงุดุชู ุจุงุดุฏ:
    >
    > ```sh
    > sudo apt update
    > sudo apt install libsndfile1-dev
    > ```

1. ุจุฑุง ุชุจุฏู ูุชู ุจู ฺฏูุชุงุฑุ ููโุชูุงูุฏ ูุณุชููุงู ุงุฒ ฺฉูุฏ API ฺฏูุชุงุฑ ุงุณุชูุงุฏู ฺฉูุฏุ ุจูฺฉู ุจุงุฏ ฺฉ ุชูฺฉู ุฏุณุชุฑุณ ุฏุฑุฎูุงุณุช ฺฉูุฏุ ุจุง ุงุณุชูุงุฏู ุงุฒ ฺฉูุฏ API ุจุฑุง ุงุญุฑุงุฒ ููุช ุฏุฑุฎูุงุณุช ุชูฺฉู ุฏุณุชุฑุณ. ูุงู `__init__.py` ุฑุง ุงุฒ ูพูุดู `text-to-speech` ุจุงุฒ ฺฉูุฏ ู ุชูุงู ฺฉุฏ ููุฌูุฏ ุฏุฑ ุขู ุฑุง ุจุง ููุงุฑุฏ ุฒุฑ ุฌุงฺฏุฒู ฺฉูุฏ:

    ```python
    import io
    import os
    import requests
    
    import librosa
    import soundfile as sf
    import azure.functions as func
    
    location = os.environ['SPEECH_LOCATION']
    speech_key = os.environ['SPEECH_KEY']
    
    def get_access_token():
        headers = {
            'Ocp-Apim-Subscription-Key': speech_key
        }
    
        token_endpoint = f'https://{location}.api.cognitive.microsoft.com/sts/v1.0/issuetoken'
        response = requests.post(token_endpoint, headers=headers)
        return str(response.text)
    ```

    ุงู ุซุงุจุชโูุง ุจุฑุง ูฺฉุงู ู ฺฉูุฏ ฺฏูุชุงุฑ ุชุนุฑู ูโฺฉูุฏ ฺฉู ุงุฒ ุชูุธูุงุช ุฎูุงูุฏู ูโุดููุฏ. ุณูพุณ ุชุงุจุน `get_access_token` ุฑุง ุชุนุฑู ูโฺฉูุฏ ฺฉู ฺฉ ุชูฺฉู ุฏุณุชุฑุณ ุจุฑุง ุฎุฏูุงุช ฺฏูุชุงุฑ ุจุงุฒุงุจ ูโฺฉูุฏ.

1. ุฒุฑ ุงู ฺฉุฏุ ููุงุฑุฏ ุฒุฑ ุฑุง ุงุถุงูู ฺฉูุฏ:

    ```python
    playback_format = 'riff-48khz-16bit-mono-pcm'

    def main(req: func.HttpRequest) -> func.HttpResponse:
        req_body = req.get_json()
        language = req_body['language']
        voice = req_body['voice']
        text = req_body['text']
    
        url = f'https://{location}.tts.speech.microsoft.com/cognitiveservices/v1'
    
        headers = {
            'Authorization': 'Bearer ' + get_access_token(),
            'Content-Type': 'application/ssml+xml',
            'X-Microsoft-OutputFormat': playback_format
        }
    
        ssml =  f'<speak version=\'1.0\' xml:lang=\'{language}\'>'
        ssml += f'<voice xml:lang=\'{language}\' name=\'{voice}\'>'
        ssml += text
        ssml += '</voice>'
        ssml += '</speak>'
    
        response = requests.post(url, headers=headers, data=ssml.encode('utf-8'))
    
        raw_audio, sample_rate = librosa.load(io.BytesIO(response.content), sr=48000)
        resampled = librosa.resample(raw_audio, sample_rate, 44100)
        
        output_buffer = io.BytesIO()
        sf.write(output_buffer, resampled, 44100, 'PCM_16', format='wav')
        output_buffer.seek(0)
    
        return func.HttpResponse(output_buffer.read(), status_code=200)
    ```

    ุงู HTTP trigger ุฑุง ุชุนุฑู ูโฺฉูุฏ ฺฉู ูุชู ุฑุง ุจู ฺฏูุชุงุฑ ุชุจุฏู ูโฺฉูุฏ. ูุชู ุจุฑุง ุชุจุฏูุ ุฒุจุงู ู ุตุฏุง ุงุฒ ุจุฏูู JSON ุงุฑุณุงูโุดุฏู ุจู ุฏุฑุฎูุงุณุช ุงุณุชุฎุฑุงุฌ ูโุดูุฏุ ููุฏุงุฑ SSML ุจุฑุง ุฏุฑุฎูุงุณุช ฺฏูุชุงุฑ ุงุฌุงุฏ ูโฺฉูุฏุ ุณูพุณ REST API ูุฑุจูุทู ุฑุง ุจุง ุงุญุฑุงุฒ ููุช ุจุง ุงุณุชูุงุฏู ุงุฒ ุชูฺฉู ุฏุณุชุฑุณ ูุฑุงุฎูุงู ูโฺฉูุฏ. ุงู ูุฑุงุฎูุงู REST API ุตุฏุง ุฑุง ุจู ุตูุฑุช ูุงู WAV ูููู 16 ุจุชุ 48KHz ุฑูุฒฺฏุฐุงุฑโุดุฏู ุจุงุฒูโฺฏุฑุฏุงูุฏุ ฺฉู ุชูุณุท ููุฏุงุฑ `playback_format` ุชุนุฑู ุดุฏู ุงุณุช ฺฉู ุจู ูุฑุงุฎูุงู REST API ุงุฑุณุงู ูโุดูุฏ.

    ุณูพุณ ุงู ุตุฏุง ุชูุณุท `librosa` ุงุฒ ูุฑุฎ ูููููโุจุฑุฏุงุฑ 48KHz ุจู ูุฑุฎ ูููููโุจุฑุฏุงุฑ 44.1KHz ุจุงุฒูููููโุจุฑุฏุงุฑ ูโุดูุฏุ ุณูพุณ ุงู ุตุฏุง ุฏุฑ ฺฉ ุจุงูุฑ ุจุงูุฑ ุฐุฎุฑู ูโุดูุฏ ฺฉู ุณูพุณ ุจุงุฒฺฏุฑุฏุงูุฏู ูโุดูุฏ.

1. ุจุฑูุงูู ุชูุงุจุน ุฎูุฏ ุฑุง ุจู ุตูุฑุช ูุญู ุงุฌุฑุง ฺฉูุฏ ุง ุขู ุฑุง ุฏุฑ ูุถุง ุงุจุฑ ูุณุชูุฑ ฺฉูุฏ. ุณูพุณ ูโุชูุงูุฏ ุจุง ุงุณุชูุงุฏู ุงุฒ ุงุจุฒุงุฑ ูุงููุฏ curl ุงู ุฑุง ูุฑุงุฎูุงู ฺฉูุฏุ ููุงูุทูุฑ ฺฉู HTTP trigger `text-to-timer` ุฎูุฏ ุฑุง ุขุฒูุงุด ฺฉุฑุฏุฏ. ูุทูุฆู ุดูุฏ ฺฉู ุฒุจุงูุ ุตุฏุง ู ูุชู ุฑุง ุจู ุนููุงู ุจุฏูู JSON ุงุฑุณุงู ฺฉูุฏ:

    ```json
    {
        "language": "<language>",
        "voice": "<voice>",
        "text": "<text>"
    }
    ```

    `<language>` ุฑุง ุจุง ุฒุจุงู ุฎูุฏ ุฌุงฺฏุฒู ฺฉูุฏุ ูุงููุฏ `en-GB` ุง `zh-CN`. `<voice>` ุฑุง ุจุง ุตุฏุง ฺฉู ูโุฎูุงูุฏ ุงุณุชูุงุฏู ฺฉูุฏ ุฌุงฺฏุฒู ฺฉูุฏ. `<text>` ุฑุง ุจุง ูุชู ฺฉู ูโุฎูุงูุฏ ุจู ฺฏูุชุงุฑ ุชุจุฏู ฺฉูุฏ ุฌุงฺฏุฒู ฺฉูุฏ. ูโุชูุงูุฏ ุฎุฑูุฌ ุฑุง ุฏุฑ ฺฉ ูุงู ุฐุฎุฑู ฺฉูุฏ ู ุขู ุฑุง ุจุง ูุฑ ูพุฎุดโฺฉููุฏู ุตูุช ฺฉู ูโุชูุงูุฏ ูุงูโูุง WAV ุฑุง ูพุฎุด ฺฉูุฏุ ูพุฎุด ฺฉูุฏ.

    ุจู ุนููุงู ูุซุงูุ ุจุฑุง ุชุจุฏู "Hello" ุจู ฺฏูุชุงุฑ ุจุง ุงุณุชูุงุฏู ุงุฒ ุงูฺฏูุณ ุขูุฑฺฉุง ุจุง ุตุฏุง Jenny Neuralุ ุจุง ุจุฑูุงูู ุชูุงุจุน ุฏุฑ ุญุงู ุงุฌุฑุง ุจู ุตูุฑุช ูุญูุ ูโุชูุงูุฏ ุงุฒ ุฏุณุชูุฑ curl ุฒุฑ ุงุณุชูุงุฏู ฺฉูุฏ:

    ```sh
    curl -X GET 'http://localhost:7071/api/text-to-speech' \
         -H 'Content-Type: application/json' \
         -o hello.wav \
         -d '{
           "language":"en-US",
           "voice": "en-US-JennyNeural",
           "text": "Hello"
         }'
    ```

    ุงู ุตุฏุง ุฑุง ุฏุฑ ูุงู `hello.wav` ุฏุฑ ุฏุงุฑฺฉุชูุฑ ูุนู ุฐุฎุฑู ุฎูุงูุฏ ฺฉุฑุฏ.

> ๐ ูโุชูุงูุฏ ุงู ฺฉุฏ ุฑุง ุฏุฑ ูพูุดู [code-spoken-response/functions](../../../../../6-consumer/lessons/3-spoken-feedback/code-spoken-response/functions) ูพุฏุง ฺฉูุฏ.

### ูุธูู - ุจุงุฒุงุจ ฺฏูุชุงุฑ ุงุฒ Wio Terminal ุฎูุฏ

1. ูพุฑูฺู `smart-timer` ุฎูุฏ ุฑุง ุฏุฑ VS Code ุจุงุฒ ฺฉูุฏ ุงฺฏุฑ ูููุฒ ุจุงุฒ ูุดุฏู ุงุณุช.

1. ูุงู ูุฏุฑ `config.h` ุฑุง ุจุงุฒ ฺฉูุฏ ู URL ุจุฑูุงูู ุชูุงุจุน ุฎูุฏ ุฑุง ุงุถุงูู ฺฉูุฏ:

    ```cpp
    const char *TEXT_TO_SPEECH_FUNCTION_URL = "<URL>";
    ```

    `<URL>` ุฑุง ุจุง URL ุจุฑุง HTTP trigger `text-to-speech` ุฏุฑ ุจุฑูุงูู ุชูุงุจุน ุฎูุฏ ุฌุงฺฏุฒู ฺฉูุฏ. ุงู ููุฏุงุฑ ููุงู ููุฏุงุฑ `TEXT_TO_TIMER_FUNCTION_URL` ุฎูุงูุฏ ุจูุฏุ ุจู ุฌุฒ ุจุง ูุงู ุชุงุจุน `text-to-speech` ุจู ุฌุง `text-to-timer`.

1. ูุงู ูุฏุฑ `text_to_speech.h` ุฑุง ุจุงุฒ ฺฉูุฏ ู ุฑูุด ุฒุฑ ุฑุง ุจู ุจุฎุด `public` ฺฉูุงุณ `TextToSpeech` ุงุถุงูู ฺฉูุฏ:

    ```cpp
    void convertTextToSpeech(String text)
    {
    }
    ```

1. ุจู ุฑูุด `convertTextToSpeech`ุ ฺฉุฏ ุฒุฑ ุฑุง ุงุถุงูู ฺฉูุฏ ุชุง JSON ุจุฑุง ุงุฑุณุงู ุจู ุจุฑูุงูู ุชูุงุจุน ุงุฌุงุฏ ุดูุฏ:

    ```cpp
    DynamicJsonDocument doc(1024);
    doc["language"] = LANGUAGE;
    doc["voice"] = _voice;
    doc["text"] = text;

    String body;
    serializeJson(doc, body);
    ```

    ุงู ุฒุจุงูุ ุตุฏุง ู ูุชู ุฑุง ุจู ุณูุฏ JSON ูโููุณุฏุ ุณูพุณ ุขู ุฑุง ุจู ฺฉ ุฑุดุชู ุณุฑุงูโุณุงุฒ ูโฺฉูุฏ.

1. ุฒุฑ ุงูุ ฺฉุฏ ุฒุฑ ุฑุง ุงุถุงูู ฺฉูุฏ ุชุง ุจุฑูุงูู ุชูุงุจุน ุฑุง ูุฑุงุฎูุงู ฺฉูุฏ:

    ```cpp
    HTTPClient httpClient;
    httpClient.begin(_client, TEXT_TO_SPEECH_FUNCTION_URL);

    int httpResponseCode = httpClient.POST(body);
    ```

    ุงู ฺฉ HTTPClient ุงุฌุงุฏ ูโฺฉูุฏุ ุณูพุณ ฺฉ ุฏุฑุฎูุงุณุช POST ุจุง ุงุณุชูุงุฏู ุงุฒ ุณูุฏ JSON ุจู HTTP trigger ุชุจุฏู ูุชู ุจู ฺฏูุชุงุฑ ุงุฑุณุงู ูโฺฉูุฏ.

1. ุงฺฏุฑ ูุฑุงุฎูุงู ููููุชโุขูุฒ ุจุงุดุฏุ ุฏุงุฏูโูุง ุจุงูุฑ ุฎุงู ุจุงุฒฺฏุฑุฏุงูุฏูโุดุฏู ุงุฒ ูุฑุงุฎูุงู ุจุฑูุงูู ุชูุงุจุน ูโุชูุงูุฏ ุจู ฺฉ ูุงู ุฑู ฺฉุงุฑุช SD ุฌุฑุงู ุฏุงุฏู ุดูุฏ. ฺฉุฏ ุฒุฑ ุฑุง ุงุถุงูู ฺฉูุฏ ุชุง ุงู ฺฉุงุฑ ุงูุฌุงู ุดูุฏ:

    ```cpp
    if (httpResponseCode == 200)
    {            
        File wav_file = SD.open("SPEECH.WAV", FILE_WRITE);
        httpClient.writeToStream(&wav_file);
        wav_file.close();
    }
    else
    {
        Serial.print("Failed to get speech - error ");
        Serial.println(httpResponseCode);
    }
    ```

    ุงู ฺฉุฏ ูพุงุณุฎ ุฑุง ุจุฑุฑุณ ูโฺฉูุฏ ู ุงฺฏุฑ 200 (ููููุช) ุจูุฏุ ุฏุงุฏูโูุง ุจุงูุฑ ุจู ฺฉ ูุงู ุฏุฑ ุฑุดู ฺฉุงุฑุช SD ุจู ูุงู `SPEECH.WAV` ุฌุฑุงู ุฏุงุฏู ูโุดูุฏ.

1. ุฏุฑ ุงูุชูุง ุงู ุฑูุดุ ุงุชุตุงู HTTP ุฑุง ุจุจูุฏุฏ:

    ```cpp
    httpClient.end();
    ```

1. ุงฺฉููู ูุชู ุจุฑุง ฺฏูุชู ูโุชูุงูุฏ ุจู ุตุฏุง ุชุจุฏู ุดูุฏ. ุฏุฑ ูุงู `main.cpp`ุ ุฎุท ุฒุฑ ุฑุง ุจู ุงูุชูุง ุชุงุจุน `say` ุงุถุงูู ฺฉูุฏ ุชุง ูุชู ุจุฑุง ฺฏูุชู ุจู ุตุฏุง ุชุจุฏู ุดูุฏ:
```cpp
    textToSpeech.convertTextToSpeech(text);
    ```

### ูุธูู - ูพุฎุด ุตุฏุง ุงุฒ Wio Terminal

**ุจู ุฒูุฏ**

## ุงุณุชูุฑุงุฑ ุจุฑูุงูู ุชูุงุจุน ุฏุฑ ูุถุง ุงุจุฑ

ุฏูู ุงุฌุฑุง ุจุฑูุงูู ุชูุงุจุน ุจู ุตูุฑุช ูุญู ุงู ุงุณุช ฺฉู ุจุณุชู `librosa` ุฏุฑ ูููฺฉุณ ุจู ฺฉุชุงุจุฎุงููโุง ูุงุจุณุชู ุงุณุช ฺฉู ุจู ุตูุฑุช ูพุดโูุฑุถ ูุตุจ ูุดุฏู ู ุจุงุฏ ูุจู ุงุฒ ุงุฌุฑุง ุจุฑูุงูู ุชูุงุจุน ูุตุจ ุดูุฏ. ุจุฑูุงููโูุง ุชูุงุจุน ุจุฏูู ุณุฑูุฑ ูุณุชูุฏ - ุนู ุณุฑูุฑ ูุฌูุฏ ูุฏุงุฑุฏ ฺฉู ุจุชูุงูุฏ ุฎูุฏุชุงู ูุฏุฑุช ฺฉูุฏุ ุจูุงุจุฑุงู ุฑุงู ุจุฑุง ูุตุจ ุงู ฺฉุชุงุจุฎุงูู ุงุฒ ูุจู ูุฌูุฏ ูุฏุงุฑุฏ.

ุฑุงูโุญู ุงู ุงุณุช ฺฉู ุจุฑูุงูู ุชูุงุจุน ุฎูุฏ ุฑุง ุจุง ุงุณุชูุงุฏู ุงุฒ ฺฉ ฺฉุงูุชูุฑ Docker ูุณุชูุฑ ฺฉูุฏ. ุงู ฺฉุงูุชูุฑ ุชูุณุท ูุถุง ุงุจุฑ ูุฑ ุฒูุงู ฺฉู ูุงุฒ ุจู ุงุฌุงุฏ ฺฉ ููููู ุฌุฏุฏ ุงุฒ ุจุฑูุงูู ุชูุงุจุน ุดูุง ุจุงุดุฏ (ูุงููุฏ ุฒูุงู ฺฉู ุชูุงุถุง ุงุฒ ููุงุจุน ููุฌูุฏ ุจุดุชุฑ ุดูุฏุ ุง ุงฺฏุฑ ุจุฑูุงูู ุชูุงุจุน ุจุฑุง ูุฏุช ุงุณุชูุงุฏู ูุดุฏู ู ุจุณุชู ุดุฏู ุจุงุดุฏ) ูุณุชูุฑ ูโุดูุฏ.

ูโุชูุงูุฏ ุฏุณุชูุฑุงูุนููโูุง ุงุฌุงุฏ ฺฉ ุจุฑูุงูู ุชูุงุจุน ู ุงุณุชูุฑุงุฑ ุขู ุงุฒ ุทุฑู Docker ุฑุง ุฏุฑ [ูุณุชูุฏุงุช ุงุฌุงุฏ ฺฉ ุชุงุจุน ุฏุฑ ูููฺฉุณ ุจุง ุงุณุชูุงุฏู ุงุฒ ฺฉ ฺฉุงูุชูุฑ ุณูุงุฑุด ุฏุฑ Microsoft Docs](https://docs.microsoft.com/azure/azure-functions/functions-create-function-linux-custom-image?WT.mc_id=academic-17441-jabenn&tabs=bash%2Cazurecli&pivots=programming-language-python) ูพุฏุง ฺฉูุฏ.

ูพุณ ุงุฒ ุงุณุชูุฑุงุฑุ ูโุชูุงูุฏ ฺฉุฏ Wio Terminal ุฎูุฏ ุฑุง ุจุฑุง ุฏุณุชุฑุณ ุจู ุงู ุชุงุจุน ููุชูู ฺฉูุฏ:

1. ฺฏูุงู Azure Functions ุฑุง ุจู `config.h` ุงุถุงูู ฺฉูุฏ:

    ```cpp
    const char *FUNCTIONS_CERTIFICATE =
        "-----BEGIN CERTIFICATE-----\r\n"
        "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\r\n"
        "-----END CERTIFICATE-----\r\n";
    ```

1. ุชูุงู ููุงุฑุฏ ุดุงูู `<WiFiClient.h>` ุฑุง ุจู `<WiFiClientSecure.h>` ุชุบุฑ ุฏูุฏ.

1. ุชูุงู ููุฏูุง `WiFiClient` ุฑุง ุจู `WiFiClientSecure` ุชุบุฑ ุฏูุฏ.

1. ุฏุฑ ูุฑ ฺฉูุงุณ ฺฉู ฺฉ ููุฏ `WiFiClientSecure` ุฏุงุฑุฏุ ฺฉ ุณุงุฒูุฏู ุงุถุงูู ฺฉูุฏ ู ฺฏูุงู ุฑุง ุฏุฑ ุขู ุณุงุฒูุฏู ุชูุธู ฺฉูุฏ:

    ```cpp
    _client.setCACert(FUNCTIONS_CERTIFICATE);
    ```

**ุณูุจ ูุณุฆููุช**:  
ุงู ุณูุฏ ุจุง ุงุณุชูุงุฏู ุงุฒ ุณุฑูุณ ุชุฑุฌูู ููุด ูุตููุน [Co-op Translator](https://github.com/Azure/co-op-translator) ุชุฑุฌูู ุดุฏู ุงุณุช. ุฏุฑ ุญุงู ฺฉู ูุง ุชูุงุด ูโฺฉูู ุฏูุช ุฑุง ุญูุธ ฺฉููุ ูุทูุงู ุชูุฌู ุฏุงุดุชู ุจุงุดุฏ ฺฉู ุชุฑุฌููโูุง ุฎูุฏฺฉุงุฑ ููฺฉู ุงุณุช ุดุงูู ุฎุทุงูุง ุง ูุงุฏุฑุณุชโูุง ุจุงุดูุฏ. ุณูุฏ ุงุตู ุจู ุฒุจุงู ุงุตู ุขู ุจุงุฏ ุจู ุนููุงู ููุจุน ูุนุชุจุฑ ุฏุฑ ูุธุฑ ฺฏุฑูุชู ุดูุฏ. ุจุฑุง ุงุทูุงุนุงุช ุญุณุงุณุ ุชูุตู ูโุดูุฏ ุงุฒ ุชุฑุฌูู ุญุฑููโุง ุงูุณุงู ุงุณุชูุงุฏู ฺฉูุฏ. ูุง ูุณุฆููุช ุฏุฑ ูุจุงู ุณูุก ุชูุงููโูุง ุง ุชูุณุฑูุง ูุงุฏุฑุณุช ูุงุด ุงุฒ ุงุณุชูุงุฏู ุงุฒ ุงู ุชุฑุฌูู ูุฏุงุฑู.