<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "24dc783a600e20251211987b36370e93",
  "translation_date": "2025-08-25T21:08:38+00:00",
  "source_file": "4-manufacturing/lessons/3-run-fruit-detector-edge/vm-iotedge.md",
  "language_code": "fa"
}
-->
# ุงุฌุงุฏ ฺฉ ูุงุดู ูุฌุงุฒ ุจุง IoT Edge

ุฏุฑ Azureุ ูโุชูุงูุฏ ฺฉ ูุงุดู ูุฌุงุฒ ุงุฌุงุฏ ฺฉูุฏ - ฺฉ ฺฉุงููพูุชุฑ ุฏุฑ ูุถุง ุงุจุฑ ฺฉู ูโุชูุงูุฏ ุขู ุฑุง ุจู ูุฑ ุดฺฉู ฺฉู ูโุฎูุงูุฏ ูพฺฉุฑุจูุฏ ฺฉูุฏ ู ูุฑูโุงูุฒุงุฑ ุฎูุฏ ุฑุง ุฑู ุขู ุงุฌุฑุง ฺฉูุฏ.

> ๐ ูโุชูุงูุฏ ุงุทูุงุนุงุช ุจุดุชุฑ ุฏุฑุจุงุฑู ูุงุดูโูุง ูุฌุงุฒ ุฏุฑ [ุตูุญู ูุงุดู ูุฌุงุฒ ุฏุฑ ูฺฉโูพุฏุง](https://wikipedia.org/wiki/Virtual_machine) ุจุฎูุงูุฏ.

## ูุธูู - ุฑุงูโุงูุฏุงุฒ ฺฉ ูุงุดู ูุฌุงุฒ IoT Edge

1. ุฏุณุชูุฑ ุฒุฑ ุฑุง ุงุฌุฑุง ฺฉูุฏ ุชุง ฺฉ ูุงุดู ูุฌุงุฒ ุงุฌุงุฏ ฺฉูุฏ ฺฉู Azure IoT Edge ุงุฒ ูุจู ุฑู ุขู ูุตุจ ุดุฏู ุจุงุดุฏ:

    ```sh
    az deployment group create \
                --resource-group fruit-quality-detector \
                --template-uri https://raw.githubusercontent.com/Azure/iotedge-vm-deploy/1.2.0/edgeDeploy.json \
                --parameters dnsLabelPrefix=<vm_name> \
                --parameters adminUsername=<username> \
                --parameters deviceConnectionString="<connection_string>" \
                --parameters authenticationType=password \
                --parameters adminPasswordOrKey="<password>"
    ```

    `<vm_name>` ุฑุง ุจุง ฺฉ ูุงู ุจุฑุง ุงู ูุงุดู ูุฌุงุฒ ุฌุงฺฏุฒู ฺฉูุฏ. ุงู ูุงู ุจุงุฏ ุจู ุตูุฑุช ุฌูุงู ฺฉุชุง ุจุงุดุฏุ ุจูุงุจุฑุงู ุงุฒ ฺุฒ ูุงููุฏ `fruit-quality-detector-vm-` ุจู ููุฑุงู ูุงู ุฎูุฏุชุงู ุง ฺฉ ููุฏุงุฑ ุฏฺฏุฑ ุฏุฑ ุงูุชูุง ุงุณุชูุงุฏู ฺฉูุฏ.

    `<username>` ู `<password>` ุฑุง ุจุง ฺฉ ูุงู ฺฉุงุฑุจุฑ ู ุฑูุฒ ุนุจูุฑ ุจุฑุง ูุฑูุฏ ุจู ูุงุดู ูุฌุงุฒ ุฌุงฺฏุฒู ฺฉูุฏ. ุงู ููุงุฏุฑ ุจุงุฏ ูุณุจุชุงู ุงูู ุจุงุดูุฏุ ุจูุงุจุฑุงู ููโุชูุงูุฏ ุงุฒ admin/password ุงุณุชูุงุฏู ฺฉูุฏ.

    `<connection_string>` ุฑุง ุจุง ุฑุดุชู ุงุชุตุงู ุฏุณุชฺฏุงู IoT Edge ุฎูุฏ ุจู ูุงู `fruit-quality-detector-edge` ุฌุงฺฏุฒู ฺฉูุฏ.

    ุงู ุฏุณุชูุฑ ฺฉ ูุงุดู ูุฌุงุฒ ุจุง ูพฺฉุฑุจูุฏ `DS1 v2` ุงุฌุงุฏ ูโฺฉูุฏ. ุงู ุฏุณุชูโุจูุฏโูุง ูุดุงูโุฏููุฏู ูุฏุฑุช ูุงุดู ู ุฏุฑ ูุชุฌู ูุฒูู ุขู ูุณุชูุฏ. ุงู ูุงุดู ูุฌุงุฒ ุฏุงุฑุง 1 CPU ู 3.5 ฺฏฺฏุงุจุงุช RAM ุงุณุช.

    > ๐ฐ ูโุชูุงูุฏ ููุช ูุนู ุงู ูุงุดูโูุง ูุฌุงุฒ ุฑุง ุฏุฑ [ุฑุงูููุง ููุชโฺฏุฐุงุฑ ูุงุดูโูุง ูุฌุงุฒ Azure](https://azure.microsoft.com/pricing/details/virtual-machines/linux/?WT.mc_id=academic-17441-jabenn) ูุดุงูุฏู ฺฉูุฏ.

    ูพุณ ุงุฒ ุงุฌุงุฏ ูุงุดู ูุฌุงุฒุ IoT Edge runtime ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ูุตุจ ูโุดูุฏ ู ุจุฑุง ุงุชุตุงู ุจู IoT Hub ุดูุง ุจู ุนููุงู ุฏุณุชฺฏุงู `fruit-quality-detector-edge` ูพฺฉุฑุจูุฏ ูโุดูุฏ.

1. ุจุฑุง ูุฑุงุฎูุงู ุทุจููโุจูุฏโฺฉููุฏู ุชุตูุฑ ุงุฒ ุงู ูุงุดูุ ุจู ุขุฏุฑุณ IP ุง ูุงู DNS ูุงุดู ูุฌุงุฒ ูุงุฒ ุฏุงุฑุฏ. ุฏุณุชูุฑ ุฒุฑ ุฑุง ุงุฌุฑุง ฺฉูุฏ ุชุง ุงู ุงุทูุงุนุงุช ุฑุง ุฏุฑุงูุช ฺฉูุฏ:

    ```sh
    az vm list --resource-group fruit-quality-detector \
               --output table \
               --show-details
    ```

    ููุฏุงุฑ ููุฏ `PublicIps` ุง ููุฏ `Fqdns` ุฑุง ฺฉูพ ฺฉูุฏ.

1. ูุงุดูโูุง ูุฌุงุฒ ูุฒูู ุฏุงุฑูุฏ. ุฏุฑ ุฒูุงู ูฺฏุงุฑุด ุงู ูุชูุ ฺฉ ูุงุดู DS1 ุญุฏูุฏ 0.06 ุฏูุงุฑ ุฏุฑ ุณุงุนุช ูุฒูู ุฏุงุฑุฏ. ุจุฑุง ฺฉุงูุด ูุฒููโูุงุ ุจุงุฏ ูุงุดู ูุฌุงุฒ ุฑุง ุฒูุงู ฺฉู ุงุฒ ุขู ุงุณุชูุงุฏู ููโฺฉูุฏ ุฎุงููุด ฺฉูุฏ ู ูพุณ ุงุฒ ุงุชูุงู ูพุฑูฺู ุขู ุฑุง ุญุฐู ฺฉูุฏ.

    ูโุชูุงูุฏ ูุงุดู ูุฌุงุฒ ุฎูุฏ ุฑุง ุทูุฑ ูพฺฉุฑุจูุฏ ฺฉูุฏ ฺฉู ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุฏุฑ ฺฉ ุฒูุงู ูุดุฎุต ูุฑ ุฑูุฒ ุฎุงููุด ุดูุฏ. ุงู ฺฉุงุฑ ุจุงุนุซ ูโุดูุฏ ุงฺฏุฑ ูุฑุงููุด ฺฉุฑุฏุฏ ุขู ุฑุง ุฎุงููุด ฺฉูุฏุ ูุฒููโุง ุจุดุชุฑ ุงุฒ ุฒูุงู ุชุง ุฎุงููุด ุฎูุฏฺฉุงุฑ ูพุฑุฏุงุฎุช ูฺฉูุฏ. ุงุฒ ุฏุณุชูุฑ ุฒุฑ ุจุฑุง ุชูุธู ุงู ฺฉุงุฑ ุงุณุชูุงุฏู ฺฉูุฏ:

    ```sh
    az vm auto-shutdown --resource-group fruit-quality-detector \
                        --name <vm_name> \
                        --time <shutdown_time_utc>
    ```

    `<vm_name>` ุฑุง ุจุง ูุงู ูุงุดู ูุฌุงุฒ ุฎูุฏ ุฌุงฺฏุฒู ฺฉูุฏ.

    `<shutdown_time_utc>` ุฑุง ุจุง ุฒูุงู UTC ฺฉู ูโุฎูุงูุฏ ูุงุดู ูุฌุงุฒ ุฎุงููุด ุดูุฏ ุฌุงฺฏุฒู ฺฉูุฏ. ุงู ุฒูุงู ุจุงุฏ ุจู ุตูุฑุช 4 ุฑูู ุจู ุดฺฉู HHMM ุจุงุดุฏ. ุจุฑุง ูุซุงูุ ุงฺฏุฑ ูโุฎูุงูุฏ ุฏุฑ ูููโุดุจ UTC ุฎุงููุด ุดูุฏุ ููุฏุงุฑ `0000` ุฑุง ุชูุธู ฺฉูุฏ. ุจุฑุง ุณุงุนุช 7:30 ุนุตุฑ ุฏุฑ ุณุงุญู ุบุฑุจ ุขูุฑฺฉุงุ ููุฏุงุฑ `0230` ุฑุง ูุงุฑุฏ ฺฉูุฏ (7:30 ุนุตุฑ ุฏุฑ ุณุงุญู ุบุฑุจ ุขูุฑฺฉุง ุจุฑุงุจุฑ ุจุง 2:30 ุตุจุญ UTC ุงุณุช).

1. ุทุจููโุจูุฏโฺฉููุฏู ุชุตูุฑ ุดูุง ุฑู ุงู ุฏุณุชฺฏุงู Edge ุงุฌุฑุง ุฎูุงูุฏ ุดุฏ ู ุจู ูพูุฑุช 80 (ูพูุฑุช ุงุณุชุงูุฏุงุฑุฏ HTTP) ฺฏูุด ูโุฏูุฏ. ุจู ุทูุฑ ูพุดโูุฑุถุ ูพูุฑุชโูุง ูุฑูุฏ ุฏุฑ ูุงุดูโูุง ูุฌุงุฒ ูุณุฏูุฏ ูุณุชูุฏุ ุจูุงุจุฑุงู ุจุงุฏ ูพูุฑุช 80 ุฑุง ูุนุงู ฺฉูุฏ. ูพูุฑุชโูุง ุฏุฑ ฺฏุฑููโูุง ุงููุช ุดุจฺฉู ูุนุงู ูโุดููุฏุ ุจูุงุจุฑุงู ุงุจุชุฏุง ุจุงุฏ ูุงู ฺฏุฑูู ุงููุช ุดุจฺฉู ูุงุดู ูุฌุงุฒ ุฎูุฏ ุฑุง ุจุฏุงูุฏ ฺฉู ูโุชูุงูุฏ ุจุง ุฏุณุชูุฑ ุฒุฑ ูพุฏุง ฺฉูุฏ:

    ```sh
    az network nsg list --resource-group fruit-quality-detector \
                        --output table
    ```

    ููุฏุงุฑ ููุฏ `Name` ุฑุง ฺฉูพ ฺฉูุฏ.

1. ุฏุณุชูุฑ ุฒุฑ ุฑุง ุงุฌุฑุง ฺฉูุฏ ุชุง ฺฉ ูุงููู ุจุฑุง ุจุงุฒ ฺฉุฑุฏู ูพูุฑุช 80 ุฏุฑ ฺฏุฑูู ุงููุช ุดุจฺฉู ุงุถุงูู ฺฉูุฏ:

    ```sh
    az network nsg rule create \
                        --resource-group fruit-quality-detector \
                        --name Port_80 \
                        --protocol tcp \
                        --priority 1010 \
                        --destination-port-range 80 \
                        --nsg-name <nsg name>
    ```

    `<nsg name>` ุฑุง ุจุง ูุงู ฺฏุฑูู ุงููุช ุดุจฺฉู ุงุฒ ูุฑุญูู ูุจู ุฌุงฺฏุฒู ฺฉูุฏ.

### ูุธูู - ูุฏุฑุช ูุงุดู ูุฌุงุฒ ุจุฑุง ฺฉุงูุด ูุฒููโูุง

1. ุฒูุงู ฺฉู ุงุฒ ูุงุดู ูุฌุงุฒ ุฎูุฏ ุงุณุชูุงุฏู ููโฺฉูุฏุ ุจุงุฏ ุขู ุฑุง ุฎุงููุด ฺฉูุฏ. ุจุฑุง ุฎุงููุด ฺฉุฑุฏู ูุงุดู ูุฌุงุฒุ ุงุฒ ุฏุณุชูุฑ ุฒุฑ ุงุณุชูุงุฏู ฺฉูุฏ:

    ```sh
    az vm deallocate --resource-group fruit-quality-detector \
                     --name <vm_name>
    ```

    `<vm_name>` ุฑุง ุจุง ูุงู ูุงุดู ูุฌุงุฒ ุฎูุฏ ุฌุงฺฏุฒู ฺฉูุฏ.

    > ๐ ฺฉ ุฏุณุชูุฑ `az vm stop` ูุฌูุฏ ุฏุงุฑุฏ ฺฉู ูุงุดู ูุฌุงุฒ ุฑุง ูุชููู ูโฺฉูุฏุ ุงูุง ฺฉุงููพูุชุฑ ููฺูุงู ุจู ุดูุง ุงุฎุชุตุงุต ุฏุงุฏู ูโุดูุฏุ ุจูุงุจุฑุงู ููฺูุงู ูุฒููโุง ูุดุงุจู ุฒูุงู ฺฉู ุฏุฑ ุญุงู ุงุฌุฑุง ุงุณุช ูพุฑุฏุงุฎุช ูโฺฉูุฏ.

1. ุจุฑุง ุฑุงูโุงูุฏุงุฒ ูุฌุฏุฏ ูุงุดู ูุฌุงุฒุ ุงุฒ ุฏุณุชูุฑ ุฒุฑ ุงุณุชูุงุฏู ฺฉูุฏ:

    ```sh
    az vm start --resource-group fruit-quality-detector \
                --name <vm_name>
    ```

    `<vm_name>` ุฑุง ุจุง ูุงู ูุงุดู ูุฌุงุฒ ุฎูุฏ ุฌุงฺฏุฒู ฺฉูุฏ.

**ุณูุจ ูุณุฆููุช**:  
ุงู ุณูุฏ ุจุง ุงุณุชูุงุฏู ุงุฒ ุณุฑูุณ ุชุฑุฌูู ููุด ูุตููุน [Co-op Translator](https://github.com/Azure/co-op-translator) ุชุฑุฌูู ุดุฏู ุงุณุช. ุฏุฑ ุญุงู ฺฉู ูุง ุชูุงุด ูโฺฉูู ุฏูุช ุฑุง ุญูุธ ฺฉููุ ูุทูุงู ุชูุฌู ุฏุงุดุชู ุจุงุดุฏ ฺฉู ุชุฑุฌููโูุง ุฎูุฏฺฉุงุฑ ููฺฉู ุงุณุช ุดุงูู ุฎุทุงูุง ุง ูุงุฏุฑุณุชโูุง ุจุงุดูุฏ. ุณูุฏ ุงุตู ุจู ุฒุจุงู ุงุตู ุขู ุจุงุฏ ุจู ุนููุงู ููุจุน ูุนุชุจุฑ ุฏุฑ ูุธุฑ ฺฏุฑูุชู ุดูุฏ. ุจุฑุง ุงุทูุงุนุงุช ุญุณุงุณุ ุชูุตู ูโุดูุฏ ุงุฒ ุชุฑุฌูู ุญุฑููโุง ุงูุณุงู ุงุณุชูุงุฏู ฺฉูุฏ. ูุง ูุณุฆููุช ุฏุฑ ูุจุงู ุณูุก ุชูุงููโูุง ุง ุชูุณุฑูุง ูุงุฏุฑุณุช ูุงุด ุงุฒ ุงุณุชูุงุฏู ุงุฒ ุงู ุชุฑุฌูู ูุฏุงุฑู.