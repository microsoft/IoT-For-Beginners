<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "160be8c0f558687f6686dca64f10f739",
  "translation_date": "2025-08-25T21:03:09+00:00",
  "source_file": "4-manufacturing/lessons/2-check-fruit-from-device/wio-terminal-camera.md",
  "language_code": "fa"
}
-->
# ฺฏุฑูุชู ุชุตูุฑ - Wio Terminal

ุฏุฑ ุงู ุจุฎุด ุงุฒ ุฏุฑุณุ ุดูุง ฺฉ ุฏูุฑุจู ุจู Wio Terminal ุฎูุฏ ุงุถุงูู ูโฺฉูุฏ ู ุชุตุงูุฑ ุฑุง ุงุฒ ุขู ุซุจุช ูโฺฉูุฏ.

## ุณุฎุชโุงูุฒุงุฑ

Wio Terminal ุจู ฺฉ ุฏูุฑุจู ูุงุฒ ุฏุงุฑุฏ.

ุฏูุฑุจู ฺฉู ุงุณุชูุงุฏู ูโฺฉูุฏ [ArduCam Mini 2MP Plus](https://www.arducam.com/product/arducam-2mp-spi-camera-b0067-arduino/) ุงุณุช. ุงู ฺฉ ุฏูุฑุจู ฒ ูฺฏุงูพฺฉุณู ุงุณุช ฺฉู ุจุฑ ุงุณุงุณ ุญุณฺฏุฑ ุชุตูุฑ OV2640 ุณุงุฎุชู ุดุฏู ุงุณุช. ุงู ุฏูุฑุจู ุงุฒ ุทุฑู ุฑุงุจุท SPI ุจุฑุง ุซุจุช ุชุตุงูุฑ ุงุฑุชุจุงุท ุจุฑูุฑุงุฑ ูโฺฉูุฏ ู ุงุฒ I2C ุจุฑุง ูพฺฉุฑุจูุฏ ุญุณฺฏุฑ ุงุณุชูุงุฏู ูโฺฉูุฏ.

## ุงุชุตุงู ุฏูุฑุจู

ArduCam ุณูฺฉุช Grove ูุฏุงุฑุฏ ู ุจู ุฌุง ุขู ุงุฒ ุทุฑู ูพูโูุง GPIO ุฑู Wio Terminal ุจู ุจุงุณโูุง SPI ู I2C ูุชุตู ูโุดูุฏ.

### ูุธูู - ุงุชุตุงู ุฏูุฑุจู

ุฏูุฑุจู ุฑุง ูุชุตู ฺฉูุฏ.

![ฺฉ ุญุณฺฏุฑ ArduCam](../../../../../translated_images/arducam.20e4e4cbb268296570b5914e20d6c349fc42ddac9ed4e1b9deba2188204eebae.fa.png)

1. ูพูโูุง ูพุงู ArduCam ุจุงุฏ ุจู ูพูโูุง GPIO ุฑู Wio Terminal ูุชุตู ุดููุฏ. ุจุฑุง ุฑุงุญุชโุชุฑ ูพุฏุง ฺฉุฑุฏู ูพูโูุง ุฏุฑุณุชุ ุจุฑฺุณุจ ูพู GPIO ฺฉู ููุฑุงู Wio Terminal ุงุณุช ุฑุง ุฏูุฑ ูพูโูุง ุจฺุณุจุงูุฏ:

    ![Wio Terminal ุจุง ุจุฑฺุณุจ ูพู GPIO](../../../../../translated_images/wio-terminal-pin-sticker.b90b1535937b84bd00d853f0004aea74fac2aec04b43f14b887796b2633f855e.fa.png)

1. ุจุง ุงุณุชูุงุฏู ุงุฒ ุณูโูุง ุฌุงููพุฑุ ุงุชุตุงูุงุช ุฒุฑ ุฑุง ุงูุฌุงู ุฏูุฏ:

    | ูพู ArduCAM | ูพู Wio Terminal | ุชูุถุญุงุช                                  |
    | ----------- | ---------------- | ---------------------------------------- |
    | CS          | 24 (SPI_CS)      | ุงูุชุฎุงุจ ุชุฑุงุดู SPI                         |
    | MOSI        | 19 (SPI_MOSI)    | ุฎุฑูุฌ ฺฉูุชุฑูุฑ SPIุ ูุฑูุฏ ุฌุงูุจ            |
    | MISO        | 21 (SPI_MISO)    | ูุฑูุฏ ฺฉูุชุฑูุฑ SPIุ ุฎุฑูุฌ ุฌุงูุจ            |
    | SCK         | 23 (SPI_SCLK)    | ุณุงุนุช ุณุฑุงู SPI                           |
    | GND         | 6 (GND)          | ุฒูู - ฐ ููุช                             |
    | VCC         | 4 (5V)           | ููุจุน ุชุบุฐู ต ููุช                         |
    | SDA         | 3 (I2C1_SDA)     | ุฏุงุฏู ุณุฑุงู I2C                           |
    | SCL         | 5 (I2C1_SCL)     | ุณุงุนุช ุณุฑุงู I2C                           |

    ![Wio Terminal ูุชุตู ุจู ArduCam ุจุง ุณูโูุง ุฌุงููพุฑ](../../../../../translated_images/arducam-wio-terminal-connections.a4d5a4049bdb5ab800a2877389fc6ecf5e4ff307e6451ff56c517e6786467d0a.fa.png)

    ุงุชุตุงูุงุช GND ู VCC ููุจุน ุชุบุฐู ต ููุช ุฑุง ุจู ArduCam ุงุฑุงุฆู ูโุฏููุฏ. ุงู ุฏูุฑุจู ุจุง ต ููุช ฺฉุงุฑ ูโฺฉูุฏุ ุจุฑุฎูุงู ุญุณฺฏุฑูุง Grove ฺฉู ุจุง ณ ููุช ฺฉุงุฑ ูโฺฉููุฏ. ุงู ุชูุงู ูุณุชููุงู ุงุฒ ุงุชุตุงู USB-C ฺฉู ุฏุณุชฺฏุงู ุฑุง ุชุบุฐู ูโฺฉูุฏ ุชุฃูู ูโุดูุฏ.

    > ๐ ุจุฑุง ุงุชุตุงู SPIุ ุจุฑฺุณุจโูุง ูพู ุฑู ArduCam ู ูุงูโูุง ูพู Wio Terminal ฺฉู ุฏุฑ ฺฉุฏ ุงุณุชูุงุฏู ูโุดููุฏ ููฺูุงู ุงุฒ ูุงูโฺฏุฐุงุฑ ูุฏู ุงุณุชูุงุฏู ูโฺฉููุฏ. ุฏุณุชูุฑุงูุนููโูุง ุงู ุฏุฑุณ ุงุฒ ูุงูโฺฏุฐุงุฑ ุฌุฏุฏ ุงุณุชูุงุฏู ูโฺฉููุฏุ ูฺฏุฑ ุฒูุงู ฺฉู ูุงู ูพูโูุง ุฏุฑ ฺฉุฏ ุงุณุชูุงุฏู ุดููุฏ.

1. ุงฺฉููู ูโุชูุงูุฏ Wio Terminal ุฑุง ุจู ฺฉุงููพูุชุฑ ุฎูุฏ ูุชุตู ฺฉูุฏ.

## ุจุฑูุงููโุฑุฒ ุฏุณุชฺฏุงู ุจุฑุง ุงุชุตุงู ุจู ุฏูุฑุจู

ุงฺฉููู ูโุชูุงูุฏ Wio Terminal ุฑุง ุจุฑุง ุงุณุชูุงุฏู ุงุฒ ุฏูุฑุจู ArduCAM ูุชุตู ุดุฏู ุจุฑูุงููโุฑุฒ ฺฉูุฏ.

### ูุธูู - ุจุฑูุงููโุฑุฒ ุฏุณุชฺฏุงู ุจุฑุง ุงุชุตุงู ุจู ุฏูุฑุจู

1. ฺฉ ูพุฑูฺู ุฌุฏุฏ Wio Terminal ุจุง ุงุณุชูุงุฏู ุงุฒ PlatformIO ุงุฌุงุฏ ฺฉูุฏ. ุงู ูพุฑูฺู ุฑุง `fruit-quality-detector` ุจูุงูุฏ. ฺฉุฏ ุฏุฑ ุชุงุจุน `setup` ุงุถุงูู ฺฉูุฏ ุชุง ูพูุฑุช ุณุฑุงู ุฑุง ูพฺฉุฑุจูุฏ ฺฉูุฏ.

1. ฺฉุฏ ุจุฑุง ุงุชุตุงู ุจู WiFi ุงุถุงูู ฺฉูุฏุ ุจุง ุงุทูุงุนุงุช WiFi ุฎูุฏ ุฏุฑ ูุงู ุจู ูุงู `config.h`. ูุฑุงููุด ูฺฉูุฏ ฺฉู ฺฉุชุงุจุฎุงููโูุง ููุฑุฏ ูุงุฒ ุฑุง ุจู ูุงู `platformio.ini` ุงุถุงูู ฺฉูุฏ.

1. ฺฉุชุงุจุฎุงูู ArduCam ุจู ุนููุงู ฺฉ ฺฉุชุงุจุฎุงูู Arduino ฺฉู ูโุชูุงู ุงุฒ ูุงู `platformio.ini` ูุตุจ ฺฉุฑุฏ ุฏุฑ ุฏุณุชุฑุณ ูุณุช. ุฏุฑ ุนูุถ ุจุงุฏ ุงุฒ ููุจุน ุขู ุฏุฑ ุตูุญู GitHub ูุตุจ ุดูุฏ. ูโุชูุงูุฏ ุงู ฺฉุงุฑ ุฑุง ุจู ฺฉ ุงุฒ ุฑูุดโูุง ุฒุฑ ุงูุฌุงู ุฏูุฏ:

    * ฺฉููู ฺฉุฑุฏู ูุฎุฒู ุงุฒ [https://github.com/ArduCAM/Arduino.git](https://github.com/ArduCAM/Arduino.git)
    * ุฑูุชู ุจู ูุฎุฒู ุฏุฑ GitHub ุฏุฑ [github.com/ArduCAM/Arduino](https://github.com/ArduCAM/Arduino) ู ุฏุงูููุฏ ฺฉุฏ ุจู ุตูุฑุช ฺฉ ูุงู zip ุงุฒ ุฏฺฉูู **Code**

1. ุดูุง ููุท ุจู ูพูุดู `ArduCAM` ุงุฒ ุงู ฺฉุฏ ูุงุฒ ุฏุงุฑุฏ. ฺฉู ูพูุดู ุฑุง ุจู ูพูุดู `lib` ุฏุฑ ูพุฑูฺู ุฎูุฏ ฺฉูพ ฺฉูุฏ.

    > โ๏ธ ฺฉู ูพูุดู ุจุงุฏ ฺฉูพ ุดูุฏุ ุจูุงุจุฑุงู ฺฉุฏ ุฏุฑ `lib/ArduCam` ูุฑุงุฑ ฺฏุฑุฏ. ููุท ูุญุชูุง ูพูุดู `ArduCam` ุฑุง ุจู ูพูุดู `lib` ฺฉูพ ูฺฉูุฏุ ุจูฺฉู ฺฉู ูพูุดู ุฑุง ููุชูู ฺฉูุฏ.

1. ฺฉุฏ ฺฉุชุงุจุฎุงูู ArduCam ุจุฑุง ุงููุงุน ูุฎุชูู ุฏูุฑุจู ฺฉุงุฑ ูโฺฉูุฏ. ููุน ุฏูุฑุจู ฺฉู ูโุฎูุงูุฏ ุงุณุชูุงุฏู ฺฉูุฏ ุจุง ุงุณุชูุงุฏู ุงุฒ ููฺฏโูุง ฺฉุงููพุงูุฑ ูพฺฉุฑุจูุฏ ูโุดูุฏ - ุงู ฺฉุงุฑ ุจุงุนุซ ูโุดูุฏ ฺฉุชุงุจุฎุงูู ุณุงุฎุชู ุดุฏู ุชุง ุญุฏ ููฺฉู ฺฉูฺฺฉ ุจุงุดุฏ ู ฺฉุฏ ูุฑุจูุท ุจู ุฏูุฑุจูโูุง ฺฉู ุงุณุชูุงุฏู ููโฺฉูุฏ ุญุฐู ุดูุฏ. ุจุฑุง ูพฺฉุฑุจูุฏ ฺฉุชุงุจุฎุงูู ุจุฑุง ุฏูุฑุจู OV2640ุ ููุงุฑุฏ ุฒุฑ ุฑุง ุจู ุงูุชูุง ูุงู `platformio.ini` ุงุถุงูู ฺฉูุฏ:

    ```ini
    build_flags =
        -DARDUCAM_SHIELD_V2
        -DOV2640_CAM
    ```

    ุงู ุฏู ููฺฏ ฺฉุงููพุงูุฑ ุฑุง ุชูุธู ูโฺฉูุฏ:

      * `ARDUCAM_SHIELD_V2` ุจุฑุง ุงุทูุงุน ุฏุงุฏู ุจู ฺฉุชุงุจุฎุงูู ฺฉู ุฏูุฑุจู ุฑู ฺฉ ุจุฑุฏ Arduino ุงุณุชุ ฺฉู ุจู ุนููุงู ฺฉ ุดูุฏ ุดูุงุฎุชู ูโุดูุฏ.
      * `OV2640_CAM` ุจุฑุง ุงุทูุงุน ุฏุงุฏู ุจู ฺฉุชุงุจุฎุงูู ฺฉู ููุท ฺฉุฏ ูุฑุจูุท ุจู ุฏูุฑุจู OV2640 ุฑุง ุดุงูู ุดูุฏ.

1. ฺฉ ูุงู ูุฏุฑ ุจู ูุงู `camera.h` ุจู ูพูุดู `src` ุงุถุงูู ฺฉูุฏ. ุงู ูุงู ุดุงูู ฺฉุฏ ุจุฑุง ุงุฑุชุจุงุท ุจุง ุฏูุฑุจู ุฎูุงูุฏ ุจูุฏ. ฺฉุฏ ุฒุฑ ุฑุง ุจู ุงู ูุงู ุงุถุงูู ฺฉูุฏ:

    ```cpp
    #pragma once
    
    #include <ArduCAM.h>
    #include <Wire.h>
    
    class Camera
    {
    public:
        Camera(int format, int image_size) : _arducam(OV2640, PIN_SPI_SS)
        {
            _format = format;
            _image_size = image_size;
        }
    
        bool init()
        {
            // Reset the CPLD
            _arducam.write_reg(0x07, 0x80);
            delay(100);
    
            _arducam.write_reg(0x07, 0x00);
            delay(100);
    
            // Check if the ArduCAM SPI bus is OK
            _arducam.write_reg(ARDUCHIP_TEST1, 0x55);
            if (_arducam.read_reg(ARDUCHIP_TEST1) != 0x55)
            {
                return false;
            }
                
            // Change MCU mode
            _arducam.set_mode(MCU2LCD_MODE);
    
            uint8_t vid, pid;
    
            // Check if the camera module type is OV2640
            _arducam.wrSensorReg8_8(0xff, 0x01);
            _arducam.rdSensorReg8_8(OV2640_CHIPID_HIGH, &vid);
            _arducam.rdSensorReg8_8(OV2640_CHIPID_LOW, &pid);
            if ((vid != 0x26) && ((pid != 0x41) || (pid != 0x42)))
            {
                return false;
            }
            
            _arducam.set_format(_format);
            _arducam.InitCAM();
            _arducam.OV2640_set_JPEG_size(_image_size);
            _arducam.OV2640_set_Light_Mode(Auto);
            _arducam.OV2640_set_Special_effects(Normal);
            delay(1000);
    
            return true;
        }
    
        void startCapture()
        {
            _arducam.flush_fifo();
            _arducam.clear_fifo_flag();
            _arducam.start_capture();
        }
    
        bool captureReady()
        {
            return _arducam.get_bit(ARDUCHIP_TRIG, CAP_DONE_MASK);
        }
    
        bool readImageToBuffer(byte **buffer, uint32_t &buffer_length)
        {
            if (!captureReady()) return false;
    
            // Get the image file length
            uint32_t length = _arducam.read_fifo_length();
            buffer_length = length;
    
            if (length >= MAX_FIFO_SIZE)
            {
                return false;
            }
            if (length == 0)
            {
                return false;
            }
    
            // create the buffer
            byte *buf = new byte[length];
    
            uint8_t temp = 0, temp_last = 0;
            int i = 0;
            uint32_t buffer_pos = 0;
            bool is_header = false;
    
            _arducam.CS_LOW();
            _arducam.set_fifo_burst();
            
            while (length--)
            {
                temp_last = temp;
                temp = SPI.transfer(0x00);
                //Read JPEG data from FIFO
                if ((temp == 0xD9) && (temp_last == 0xFF)) //If find the end ,break while,
                {
                    buf[buffer_pos] = temp;
    
                    buffer_pos++;
                    i++;
                    
                    _arducam.CS_HIGH();
                }
                if (is_header == true)
                {
                    //Write image data to buffer if not full
                    if (i < 256)
                    {
                        buf[buffer_pos] = temp;
                        buffer_pos++;
                        i++;
                    }
                    else
                    {
                        _arducam.CS_HIGH();
    
                        i = 0;
                        buf[buffer_pos] = temp;
    
                        buffer_pos++;
                        i++;
    
                        _arducam.CS_LOW();
                        _arducam.set_fifo_burst();
                    }
                }
                else if ((temp == 0xD8) & (temp_last == 0xFF))
                {
                    is_header = true;
    
                    buf[buffer_pos] = temp_last;
                    buffer_pos++;
                    i++;
    
                    buf[buffer_pos] = temp;
                    buffer_pos++;
                    i++;
                }
            }
            
            _arducam.clear_fifo_flag();
    
            _arducam.set_format(_format);
            _arducam.InitCAM();
            _arducam.OV2640_set_JPEG_size(_image_size);
    
            // return the buffer
            *buffer = buf;
        }
    
    private:
        ArduCAM _arducam;
        int _format;
        int _image_size;
    };
    ```

    ุงู ฺฉุฏ ุณุทุญ ูพุงู ุฏูุฑุจู ุฑุง ุจุง ุงุณุชูุงุฏู ุงุฒ ฺฉุชุงุจุฎุงููโูุง ArduCam ูพฺฉุฑุจูุฏ ูโฺฉูุฏ ู ุชุตุงูุฑ ุฑุง ุฏุฑ ุตูุฑุช ูุงุฒ ุจุง ุงุณุชูุงุฏู ุงุฒ ุจุงุณ SPI ุงุณุชุฎุฑุงุฌ ูโฺฉูุฏ. ุงู ฺฉุฏ ุจุณุงุฑ ุฎุงุต ArduCam ุงุณุชุ ุจูุงุจุฑุงู ูุงุฒ ูุณุช ุฏุฑ ุงู ูุฑุญูู ูฺฏุฑุงู ูุญูู ฺฉุงุฑ ุขู ุจุงุดุฏ.

1. ุฏุฑ `main.cpp`ุ ฺฉุฏ ุฒุฑ ุฑุง ุฒุฑ ุณุงุฑ ุฏุณุชูุฑุงุช `include` ุงุถุงูู ฺฉูุฏ ุชุง ุงู ูุงู ุฌุฏุฏ ุฑุง ุดุงูู ุดูุฏ ู ฺฉ ููููู ุงุฒ ฺฉูุงุณ ุฏูุฑุจู ุงุฌุงุฏ ฺฉูุฏ:

    ```cpp
    #include "camera.h"

    Camera camera = Camera(JPEG, OV2640_640x480);
    ```

    ุงู ฺฉ `Camera` ุงุฌุงุฏ ูโฺฉูุฏ ฺฉู ุชุตุงูุฑ ุฑุง ุจู ุตูุฑุช JPEG ุจุง ูุถูุญ 640 ุฏุฑ 480 ุฐุฎุฑู ูโฺฉูุฏ. ุงฺฏุฑฺู ูุถูุญโูุง ุจุงูุงุชุฑ ูพุดุชุจุงู ูโุดููุฏ (ุชุง 3280x2464)ุ ุงูุง ุทุจููโุจูุฏโฺฉููุฏู ุชุตูุฑ ุฑู ุชุตุงูุฑ ุจุณุงุฑ ฺฉูฺฺฉโุชุฑ (227x227) ฺฉุงุฑ ูโฺฉูุฏุ ุจูุงุจุฑุงู ูุงุฒ ุจู ุซุจุช ู ุงุฑุณุงู ุชุตุงูุฑ ุจุฒุฑฺฏโุชุฑ ูุณุช.

1. ฺฉุฏ ุฒุฑ ุฑุง ุฒุฑ ุงู ุจุฎุด ุงุถุงูู ฺฉูุฏ ุชุง ฺฉ ุชุงุจุน ุจุฑุง ุฑุงูโุงูุฏุงุฒ ุฏูุฑุจู ุชุนุฑู ุดูุฏ:

    ```cpp
    void setupCamera()
    {
        pinMode(PIN_SPI_SS, OUTPUT);
        digitalWrite(PIN_SPI_SS, HIGH);
    
        Wire.begin();
        SPI.begin();
    
        if (!camera.init())
        {
            Serial.println("Error setting up the camera!");
        }
    }
    ```

    ุงู ุชุงุจุน `setupCamera` ุจุง ูพฺฉุฑุจูุฏ ูพู ุงูุชุฎุงุจ ุชุฑุงุดู SPI (`PIN_SPI_SS`) ุจู ุนููุงู ุจุงูุง ุดุฑูุน ูโุดูุฏ ู Wio Terminal ุฑุง ุจู ุนููุงู ฺฉูุชุฑูุฑ SPI ุชูุธู ูโฺฉูุฏ. ุณูพุณ ุจุงุณโูุง I2C ู SPI ุฑุง ุฑุงูโุงูุฏุงุฒ ูโฺฉูุฏ. ุฏุฑ ููุงุช ฺฉูุงุณ ุฏูุฑุจู ุฑุง ููุฏุงุฑุฏู ุงููู ูโฺฉูุฏ ฺฉู ุชูุธูุงุช ุญุณฺฏุฑ ุฏูุฑุจู ุฑุง ูพฺฉุฑุจูุฏ ฺฉุฑุฏู ู ุงุทููุงู ุญุงุตู ูโฺฉูุฏ ฺฉู ููู ฺุฒ ุจู ุฏุฑุณุช ูุชุตู ุดุฏู ุงุณุช.

1. ุงู ุชุงุจุน ุฑุง ุฏุฑ ุงูุชูุง ุชุงุจุน `setup` ูุฑุงุฎูุงู ฺฉูุฏ:

    ```cpp
    setupCamera();
    ```

1. ฺฉุฏ ุฑุง ุจุณุงุฒุฏ ู ุขูพููุฏ ฺฉูุฏ ู ุฎุฑูุฌ ูุงูุชูุฑ ุณุฑุงู ุฑุง ุจุฑุฑุณ ฺฉูุฏ. ุงฺฏุฑ ูพุงู `Error setting up the camera!` ุฑุง ูุดุงูุฏู ฺฉุฑุฏุฏุ ุงุชุตุงูุงุช ุฑุง ุจุฑุฑุณ ฺฉูุฏ ุชุง ูุทูุฆู ุดูุฏ ููู ฺฉุงุจูโูุง ูพูโูุง ุฏุฑุณุช ุฑู ArduCam ุฑุง ุจู ูพูโูุง ุฏุฑุณุช GPIO ุฑู Wio Terminal ูุชุตู ฺฉุฑุฏูโุงูุฏ ู ููู ุณูโูุง ุฌุงููพุฑ ุจู ุฏุฑุณุช ุฌุง ุงูุชุงุฏูโุงูุฏ.

## ุซุจุช ุชุตูุฑ

ุงฺฉููู ูโุชูุงูุฏ Wio Terminal ุฑุง ุจุฑุง ุซุจุช ุชุตูุฑ ููฺฏุงู ูุดุงุฑ ุฏุงุฏู ฺฉ ุฏฺฉูู ุจุฑูุงููโุฑุฒ ฺฉูุฏ.

### ูุธูู - ุซุจุช ุชุตูุฑ

1. ูฺฉุฑูฺฉูุชุฑูุฑูุง ฺฉุฏ ุดูุง ุฑุง ุจู ุทูุฑ ูุฏุงูู ุงุฌุฑุง ูโฺฉููุฏุ ุจูุงุจุฑุงู ุฑุงู ุขุณุงู ุจุฑุง ุงูุฌุงู ุนูู ูุงููุฏ ฺฏุฑูุชู ุนฺฉุณ ุจุฏูู ูุงฺฉูุด ุจู ฺฉ ุญุณฺฏุฑ ูุฌูุฏ ูุฏุงุฑุฏ. Wio Terminal ุฏฺฉููโูุง ุฏุงุฑุฏุ ุจูุงุจุฑุงู ูโุชูุงู ุฏูุฑุจู ุฑุง ุทูุฑ ุชูุธู ฺฉุฑุฏ ฺฉู ุจุง ฺฉ ุงุฒ ุฏฺฉููโูุง ูุนุงู ุดูุฏ. ฺฉุฏ ุฒุฑ ุฑุง ุจู ุงูุชูุง ุชุงุจุน `setup` ุงุถุงูู ฺฉูุฏ ุชุง ุฏฺฉูู C (ฺฉ ุงุฒ ุณู ุฏฺฉูู ุจุงูุงุ ูุฒุฏฺฉโุชุฑู ุฏฺฉูู ุจู ฺฉูุฏ ูพุงูุฑ) ูพฺฉุฑุจูุฏ ุดูุฏ.

    ![ุฏฺฉูู C ุฏุฑ ุจุงูุง ุฏุณุชฺฏุงู ูุฒุฏฺฉ ฺฉูุฏ ูพุงูุฑ](../../../../../translated_images/wio-terminal-c-button.73df3cb1c1445ea07ee98316af0e7925fcb43135df0abed58d3d4822b2589c3b.fa.png)

    ```cpp
    pinMode(WIO_KEY_C, INPUT_PULLUP);
    ```

    ุญุงูุช `INPUT_PULLUP` ุงุณุงุณุงู ฺฉ ูุฑูุฏ ุฑุง ูุนฺฉูุณ ูโฺฉูุฏ. ุจู ุนููุงู ูุซุงูุ ุจู ุทูุฑ ูุนููู ฺฉ ุฏฺฉูู ููุช ูุดุงุฑ ุฏุงุฏู ููโุดูุฏ ุณฺฏูุงู ูพุงู ุงุฑุณุงู ูโฺฉูุฏ ู ููุช ูุดุงุฑ ุฏุงุฏู ูโุดูุฏ ุณฺฏูุงู ุจุงูุง ุงุฑุณุงู ูโฺฉูุฏ. ููุช ุจู `INPUT_PULLUP` ุชูุธู ุดูุฏุ ููุช ูุดุงุฑ ุฏุงุฏู ููโุดูุฏ ุณฺฏูุงู ุจุงูุง ุงุฑุณุงู ูโฺฉูุฏ ู ููุช ูุดุงุฑ ุฏุงุฏู ูโุดูุฏ ุณฺฏูุงู ูพุงู ุงุฑุณุงู ูโฺฉูุฏ.

1. ฺฉ ุชุงุจุน ุฎุงู ุจุฑุง ูพุงุณุฎ ุจู ูุดุงุฑ ุฏฺฉูู ูุจู ุงุฒ ุชุงุจุน `loop` ุงุถุงูู ฺฉูุฏ:

    ```cpp
    void buttonPressed()
    {
        
    }
    ```

1. ุงู ุชุงุจุน ุฑุง ุฏุฑ ูุชุฏ `loop` ุฒูุงู ฺฉู ุฏฺฉูู ูุดุงุฑ ุฏุงุฏู ูโุดูุฏ ูุฑุงุฎูุงู ฺฉูุฏ:

    ```cpp
    void loop()
    {
        if (digitalRead(WIO_KEY_C) == LOW)
        {
            buttonPressed();
            delay(2000);
        }
    
        delay(200);
    }
    ```

    ุงู ฺฉูุฏ ุจุฑุฑุณ ูโฺฉูุฏ ฺฉู ุขุง ุฏฺฉูู ูุดุงุฑ ุฏุงุฏู ุดุฏู ุงุณุช ุง ุฎุฑ. ุงฺฏุฑ ูุดุงุฑ ุฏุงุฏู ุดุฏู ุจุงุดุฏุ ุชุงุจุน `buttonPressed` ูุฑุงุฎูุงู ูโุดูุฏ ู ุญููู ุจู ูุฏุช ฒ ุซุงูู ุชุฃุฎุฑ ูโุงูุฏุงุฒุฏ. ุงู ฺฉุงุฑ ุจุฑุง ุงู ุงุณุช ฺฉู ุฒูุงู ฺฉุงู ุจุฑุง ุฑูุง ุดุฏู ุฏฺฉูู ูุฌูุฏ ุฏุงุดุชู ุจุงุดุฏ ุชุง ฺฉ ูุดุงุฑ ุทููุงู ุฏูุจุงุฑ ุซุจุช ูุดูุฏ.

    > ๐ ุฏฺฉูู ุฑู Wio Terminal ุจู `INPUT_PULLUP` ุชูุธู ุดุฏู ุงุณุชุ ุจูุงุจุฑุงู ููุช ูุดุงุฑ ุฏุงุฏู ููโุดูุฏ ุณฺฏูุงู ุจุงูุง ุงุฑุณุงู ูโฺฉูุฏ ู ููุช ูุดุงุฑ ุฏุงุฏู ูโุดูุฏ ุณฺฏูุงู ูพุงู ุงุฑุณุงู ูโฺฉูุฏ.

1. ฺฉุฏ ุฒุฑ ุฑุง ุจู ุชุงุจุน `buttonPressed` ุงุถุงูู ฺฉูุฏ:

    ```cpp
    camera.startCapture();
 
    while (!camera.captureReady())
        delay(100);

    Serial.println("Image captured");

    byte *buffer;
    uint32_t length;

    if (camera.readImageToBuffer(&buffer, length))
    {
        Serial.print("Image read to buffer with length ");
        Serial.println(length);

        delete(buffer);
    }
    ```

    ุงู ฺฉุฏ ุจุง ูุฑุงุฎูุงู `startCapture` ุซุจุช ุชุตูุฑ ุฑุง ุขุบุงุฒ ูโฺฉูุฏ. ุณุฎุชโุงูุฒุงุฑ ุฏูุฑุจู ุจู ุงู ุตูุฑุช ฺฉุงุฑ ููโฺฉูุฏ ฺฉู ุฏุงุฏูโูุง ุฑุง ููฺฏุงู ุฏุฑุฎูุงุณุช ุจุงุฒฺฏุฑุฏุงูุฏุ ุจูฺฉู ุดูุง ุฏุณุชูุฑ ุจุฑุง ุดุฑูุน ุซุจุช ุงุฑุณุงู ูโฺฉูุฏ ู ุฏูุฑุจู ุฏุฑ ูพุณโุฒููู ฺฉุงุฑ ูโฺฉูุฏ ุชุง ุชุตูุฑ ุฑุง ุซุจุช ฺฉูุฏุ ุขู ุฑุง ุจู JPEG ุชุจุฏู ฺฉูุฏ ู ุฏุฑ ฺฉ ุจุงูุฑ ูุญู ุฑู ุฎูุฏ ุฏูุฑุจู ุฐุฎุฑู ฺฉูุฏ. ุณูพุณ ูุฑุงุฎูุงู `captureReady` ุจุฑุฑุณ ูโฺฉูุฏ ฺฉู ุขุง ุซุจุช ุชุตูุฑ ุจู ูพุงุงู ุฑุณุฏู ุงุณุช ุง ุฎุฑ.

    ูพุณ ุงุฒ ุงุชูุงู ุซุจุชุ ุฏุงุฏูโูุง ุชุตูุฑ ุจุง ูุฑุงุฎูุงู `readImageToBuffer` ุงุฒ ุจุงูุฑ ุฑู ุฏูุฑุจู ุจู ฺฉ ุจุงูุฑ ูุญู (ุขุฑุงูโุง ุงุฒ ุจุงุชโูุง) ฺฉูพ ูโุดููุฏ. ุทูู ุจุงูุฑ ุณูพุณ ุจู ูุงูุชูุฑ ุณุฑุงู ุงุฑุณุงู ูโุดูุฏ.

1. ฺฉุฏ ุฑุง ุจุณุงุฒุฏ ู ุขูพููุฏ ฺฉูุฏ ู ุฎุฑูุฌ ุฑุง ุฑู ูุงูุชูุฑ ุณุฑุงู ุจุฑุฑุณ ฺฉูุฏ. ูุฑ ุจุงุฑ ฺฉู ุฏฺฉูู C ุฑุง ูุดุงุฑ ุฏูุฏุ ฺฉ ุชุตูุฑ ุซุจุช ูโุดูุฏ ู ุงูุฏุงุฒู ุชุตูุฑ ุจู ูุงูุชูุฑ ุณุฑุงู ุงุฑุณุงู ูโุดูุฏ.

    ```output
    Connecting to WiFi..
    Connected!
    Image captured
    Image read to buffer with length 9224
    Image captured
    Image read to buffer with length 11272
    ```

    ุชุตุงูุฑ ูุฎุชูู ุงูุฏุงุฒูโูุง ูุชูุงูุช ุฎูุงููุฏ ุฏุงุดุช. ุขูโูุง ุจู ุตูุฑุช JPEG ูุดุฑุฏู ุดุฏูโุงูุฏ ู ุงูุฏุงุฒู ฺฉ ูุงู JPEG ุจุฑุง ฺฉ ูุถูุญ ูุดุฎุต ุจู ูุญุชูุง ุชุตูุฑ ุจุณุชฺฏ ุฏุงุฑุฏ.

> ๐ ูโุชูุงูุฏ ุงู ฺฉุฏ ุฑุง ุฏุฑ ูพูุดู [code-camera/wio-terminal](../../../../../4-manufacturing/lessons/2-check-fruit-from-device/code-camera/wio-terminal) ูพุฏุง ฺฉูุฏ.

๐ ุดูุง ุจุง ููููุช ุชุตุงูุฑ ุฑุง ุจุง Wio Terminal ุฎูุฏ ุซุจุช ฺฉุฑุฏุฏ.

## ุงุฎุชุงุฑ - ุจุฑุฑุณ ุชุตุงูุฑ ุฏูุฑุจู ุจุง ุงุณุชูุงุฏู ุงุฒ ฺฉุงุฑุช SD

ุณุงุฏูโุชุฑู ุฑุงู ุจุฑุง ูุดุงูุฏู ุชุตุงูุฑ ฺฉู ุชูุณุท ุฏูุฑุจู ุซุจุช ุดุฏูโุงูุฏุ ููุดุชู ุขูโูุง ุฑู ฺฉ ฺฉุงุฑุช SD ุฏุฑ Wio Terminal ู ุณูพุณ ูุดุงูุฏู ุขูโูุง ุฑู ฺฉุงููพูุชุฑ ุงุณุช. ุงู ูุฑุญูู ุฑุง ุงูุฌุงู ุฏูุฏ ุงฺฏุฑ ฺฉ ฺฉุงุฑุช microSD ุงุถุงู ู ฺฉ ุณูฺฉุช ฺฉุงุฑุช microSD ุฏุฑ ฺฉุงููพูุชุฑ ุฎูุฏ ุง ฺฉ ุขุฏุงูพุชูุฑ ุฏุงุฑุฏ.

Wio Terminal ููุท ุงุฒ ฺฉุงุฑุชโูุง microSD ุจุง ุญุฏุงฺฉุซุฑ ุธุฑูุช 16GB ูพุดุชุจุงู ูโฺฉูุฏ. ุงฺฏุฑ ฺฉุงุฑุช SD ุจุฒุฑฺฏโุชุฑ ุฏุงุฑุฏุ ฺฉุงุฑ ูุฎูุงูุฏ ฺฉุฑุฏ.

### ูุธูู - ุจุฑุฑุณ ุชุตุงูุฑ ุฏูุฑุจู ุจุง ุงุณุชูุงุฏู ุงุฒ ฺฉุงุฑุช SD

1. ฺฉ ฺฉุงุฑุช microSD ุฑุง ุจู ุตูุฑุช FAT32 ุง exFAT ุจุง ุงุณุชูุงุฏู ุงุฒ ุจุฑูุงููโูุง ูุฑุจูุทู ุฑู ฺฉุงููพูุชุฑ ุฎูุฏ (Disk Utility ุฏุฑ macOSุ File Explorer ุฏุฑ ููุฏูุฒุ ุง ุงุณุชูุงุฏู ุงุฒ ุงุจุฒุงุฑูุง ุฎุท ูุฑูุงู ุฏุฑ ูููฺฉุณ) ูุฑูุช ฺฉูุฏ.

1. ฺฉุงุฑุช microSD ุฑุง ุฏุฑ ุณูฺฉุช ุฒุฑ ฺฉูุฏ ูพุงูุฑ ูุฑุงุฑ ุฏูุฏ. ูุทูุฆู ุดูุฏ ฺฉู ุชุง ุงูุชูุง ูุงุฑุฏ ุดุฏู ู ฺฉูฺฉ ฺฉุฑุฏู ู ุฏุฑ ุฌุง ุฎูุฏ ุจุงู ูโูุงูุฏ. ููฺฉู ุงุณุช ูุงุฒ ุจุงุดุฏ ุจุง ูุงุฎู ุง ฺฉ ุงุจุฒุงุฑ ูุงุฒฺฉ ุขู ุฑุง ูุดุงุฑ ุฏูุฏ.

1. ุฏุณุชูุฑุงุช `include` ุฒุฑ ุฑุง ุจู ุจุงูุง ูุงู `main.cpp` ุงุถุงูู ฺฉูุฏ:

    ```cpp
    #include "SD/Seeed_SD.h"
    #include <Seeed_FS.h>
    ```

1. ุชุงุจุน ุฒุฑ ุฑุง ูุจู ุงุฒ ุชุงุจุน `setup` ุงุถุงูู ฺฉูุฏ:

    ```cpp
    void setupSDCard()
    {
        while (!SD.begin(SDCARD_SS_PIN, SDCARD_SPI))
        {
            Serial.println("SD Card Error");
        }
    }
    ```

    ุงู ุชุงุจุน ฺฉุงุฑุช SD ุฑุง ุจุง ุงุณุชูุงุฏู ุงุฒ ุจุงุณ SPI ูพฺฉุฑุจูุฏ ูโฺฉูุฏ.

1. ุงู ุชุงุจุน ุฑุง ุงุฒ ุฏุงุฎู ุชุงุจุน `setup` ูุฑุงุฎูุงู ฺฉูุฏ:

    ```cpp
    setupSDCard();
    ```

1. ฺฉุฏ ุฒุฑ ุฑุง ุจุงูุง ุชุงุจุน `buttonPressed` ุงุถุงูู ฺฉูุฏ:

    ```cpp
    int fileNum = 1;

    void saveToSDCard(byte *buffer, uint32_t length)
    {
        char buff[16];
        sprintf(buff, "%d.jpg", fileNum);
        fileNum++;
    
        File outFile = SD.open(buff, FILE_WRITE );
        outFile.write(buffer, length);
        outFile.close();

        Serial.print("Image written to file ");
        Serial.println(buff);
    }
    ```

    ุงู ฺฉุฏ ฺฉ ูุชุบุฑ ุณุฑุงุณุฑ ุจุฑุง ุดูุงุฑุด ูุงู ุชุนุฑู ูโฺฉูุฏ. ุงู ูุชุบุฑ ุจุฑุง ูุงู ูุงูโูุง ุชุตูุฑ ุงุณุชูุงุฏู ูโุดูุฏ ุชุง ฺูุฏู ุชุตูุฑ ุจุง ูุงูโูุง ุงูุฒุงุด ุซุจุช ุดููุฏ - `1.jpg`ุ `2.jpg` ู ุจู ููู ุชุฑุชุจ.

    ุณูพุณ ุชุงุจุน `saveToSDCard` ุชุนุฑู ูโุดูุฏ ฺฉู ฺฉ ุจุงูุฑ ุงุฒ ุฏุงุฏูโูุง ุจุงุช ู ุทูู ุจุงูุฑ ุฑุง ูโฺฏุฑุฏ. ฺฉ ูุงู ูุงู ุจุง ุงุณุชูุงุฏู ุงุฒ ุดูุงุฑุด ูุงู ุงุฌุงุฏ ูโุดูุฏ ู ุดูุงุฑุด ูุงู ุจุฑุง ูุงู ุจุนุฏ ุงูุฒุงุด ูโุงุจุฏ. ุฏุงุฏูโูุง ุจุงูุฑ ุงุฒ ุจุงูุฑ ุจู ูุงู ููุดุชู ูโุดููุฏ.

1. ุชุงุจุน `saveToSDCard` ุฑุง ุงุฒ ุฏุงุฎู ุชุงุจุน `buttonPressed` ูุฑุงุฎูุงู ฺฉูุฏ. ุงู ูุฑุงุฎูุงู ุจุงุฏ **ูุจู ุงุฒ** ุญุฐู ุจุงูุฑ ุจุงุดุฏ:

    ```cpp
    Serial.print("Image read to buffer with length ");
    Serial.println(length);

    saveToSDCard(buffer, length);
    
    delete(buffer);
    ```

1. ฺฉุฏ ุฑุง ุจุณุงุฒุฏ ู ุขูพููุฏ ฺฉูุฏ ู ุฎุฑูุฌ ุฑุง ุฑู ูุงูุชูุฑ ุณุฑุงู ุจุฑุฑุณ ฺฉูุฏ. ูุฑ ุจุงุฑ ฺฉู ุฏฺฉูู C ุฑุง ูุดุงุฑ ุฏูุฏุ ฺฉ ุชุตูุฑ ุซุจุช ุดุฏู ู ุฑู ฺฉุงุฑุช SD ุฐุฎุฑู ูโุดูุฏ.

    ```output
    Connecting to WiFi..
    Connected!
    Image captured
    Image read to buffer with length 16392
    Image written to file 1.jpg
    Image captured
    Image read to buffer with length 14344
    Image written to file 2.jpg
    ```

1. ฺฉุงุฑุช microSD ุฑุง ุฎุงููุด ฺฉุฑุฏู ู ุจุง ูุดุงุฑ ุฏุงุฏู ฺฉู ู ุฑูุง ฺฉุฑุฏู ุขู ุฑุง ุฎุงุฑุฌ ฺฉูุฏุ ู ฺฉุงุฑุช ุจุฑูู ูโุขุฏ. ููฺฉู ุงุณุช ูุงุฒ ุจุงุดุฏ ุงุฒ ฺฉ ุงุจุฒุงุฑ ูุงุฒฺฉ ุจุฑุง ุงู ฺฉุงุฑ ุงุณุชูุงุฏู ฺฉูุฏ. ฺฉุงุฑุช microSD ุฑุง ุจู ฺฉุงููพูุชุฑ ุฎูุฏ ูุชุตู ฺฉูุฏ ุชุง ุชุตุงูุฑ ุฑุง ูุดุงูุฏู ฺฉูุฏ.

    ![ุชุตูุฑ ุงุฒ ฺฉ ููุฒ ฺฉู ุจุง ุงุณุชูุงุฏู ุงุฒ ArduCam ุซุจุช ุดุฏู ุงุณุช](../../../../../translated_images/banana-arducam.be1b32d4267a8194b0fd042362e56faa431da9cd4af172051b37243ea9be0256.fa.jpg)
๐ ููฺฉู ุงุณุช ฺูุฏ ุชุตูุฑ ุทูู ุจฺฉุดุฏ ุชุง ุชุฑุงุฒ ุณูุฏ ุฏูุฑุจู ุชูุธู ุดูุฏ. ุดูุง ุงู ุฑุง ุจุฑ ุงุณุงุณ ุฑูฺฏ ุชุตุงูุฑ ฺฏุฑูุชู ุดุฏู ูุชูุฌู ุฎูุงูุฏ ุดุฏุ ฺูุฏ ุชุตูุฑ ุงูู ููฺฉู ุงุณุช ุฑูฺฏ ุบุฑุนุงุฏ ุฏุงุดุชู ุจุงุดูุฏ. ุดูุง ููุดู ูโุชูุงูุฏ ุจุง ุชุบุฑ ฺฉุฏ ุจุฑุง ฺฏุฑูุชู ฺูุฏ ุชุตูุฑ ฺฉู ุฏุฑ ุชุงุจุน `setup` ูุงุฏุฏู ฺฏุฑูุชู ูโุดููุฏุ ุงู ูุดฺฉู ุฑุง ุญู ฺฉูุฏ.


**ุณูุจ ูุณุฆููุช**:  
ุงู ุณูุฏ ุจุง ุงุณุชูุงุฏู ุงุฒ ุณุฑูุณ ุชุฑุฌูู ููุด ูุตููุน [Co-op Translator](https://github.com/Azure/co-op-translator) ุชุฑุฌูู ุดุฏู ุงุณุช. ุฏุฑ ุญุงู ฺฉู ูุง ุชูุงุด ูโฺฉูู ุฏูุช ุฑุง ุญูุธ ฺฉููุ ูุทูุงู ุชูุฌู ุฏุงุดุชู ุจุงุดุฏ ฺฉู ุชุฑุฌููโูุง ุฎูุฏฺฉุงุฑ ููฺฉู ุงุณุช ุดุงูู ุฎุทุงูุง ุง ูุงุฏุฑุณุชโูุง ุจุงุดูุฏ. ุณูุฏ ุงุตู ุจู ุฒุจุงู ุงุตู ุขู ุจุงุฏ ุจู ุนููุงู ููุจุน ูุนุชุจุฑ ุฏุฑ ูุธุฑ ฺฏุฑูุชู ุดูุฏ. ุจุฑุง ุงุทูุงุนุงุช ุญุณุงุณุ ุชูุตู ูโุดูุฏ ุงุฒ ุชุฑุฌูู ุญุฑููโุง ุงูุณุงู ุงุณุชูุงุฏู ฺฉูุฏ. ูุง ูุณุฆููุช ุฏุฑ ูุจุงู ุณูุก ุชูุงููโูุง ุง ุชูุณุฑูุง ูุงุฏุฑุณุช ูุงุด ุงุฒ ุงุณุชูุงุฏู ุงุฒ ุงู ุชุฑุฌูู ูุฏุงุฑู.