<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "5f2d2f4a5a023c93ab34a0cc5b47c0c4",
  "translation_date": "2025-08-27T11:31:36+00:00",
  "source_file": "2-farm/lessons/5-migrate-application-to-the-cloud/README.md",
  "language_code": "ne"
}
-->
# рдЖрдлреНрдиреЛ рдПрдкреНрд▓рд┐рдХреЗрд╕рдирдХреЛ рддрд░реНрдХрд▓рд╛рдИ рдХреНрд▓рд╛рдЙрдбрдорд╛ рд╕рд╛рд░реНрдиреБрд╣реЛрд╕реН

![рдпрд╕ рдкрд╛рдардХреЛ рд╕реНрдХреЗрдЪ рдиреЛрдЯ](../../../../../translated_images/lesson-9.dfe99c8e891f48e179724520da9f5794392cf9a625079281ccdcbf09bd85e1b6.ne.jpg)

> рд╕реНрдХреЗрдЪ рдиреЛрдЯ [рдирд┐рддреНрдпрд╛ рдирд░рд╕рд┐рдореНрд╣рди](https://github.com/nitya) рджреНрд╡рд╛рд░рд╛ред рдареВрд▓реЛ рд╕рдВрд╕реНрдХрд░рдгрдХреЛ рд▓рд╛рдЧрд┐ рддрд╕реНрдмрд┐рд░рдорд╛ рдХреНрд▓рд┐рдХ рдЧрд░реНрдиреБрд╣реЛрд╕реНред

рдпреЛ рдкрд╛рда [IoT for Beginners Project 2 - Digital Agriculture series](https://youtube.com/playlist?list=PLmsFUfdnGr3yCutmcVg6eAUEfsGiFXgcx) рдЕрдиреНрддрд░реНрдЧрдд [Microsoft Reactor](https://developer.microsoft.com/reactor/?WT.mc_id=academic-17441-jabenn) рдмрд╛рдЯ рд╕рд┐рдХрд╛рдЗрдПрдХреЛ рдерд┐рдпреЛред

[![рддрдкрд╛рдИрдВрдХреЛ IoT рдЙрдкрдХрд░рдгрд▓рд╛рдИ serverless рдХреЛрдбрд▓реЗ рдирд┐рдпрдиреНрддреНрд░рдг рдЧрд░реНрдиреБрд╣реЛрд╕реН](https://img.youtube.com/vi/VVZDcs5u1_I/0.jpg)](https://youtu.be/VVZDcs5u1_I)

## рдкрд╛рда рдЕрдШрд┐ рдХреНрд╡рд┐рдЬ

[рдкрд╛рда рдЕрдШрд┐ рдХреНрд╡рд┐рдЬ](https://black-meadow-040d15503.1.azurestaticapps.net/quiz/17)

## рдкрд░рд┐рдЪрдп

рдЕрдШрд┐рд▓реНрд▓реЛ рдкрд╛рдардорд╛, рддрдкрд╛рдИрдВрд▓реЗ рдЖрдлреНрдиреЛ рдмрд┐рд░реБрд╡рд╛рдХреЛ рдорд╛рдЯреЛрдХреЛ рдЪрд┐рд╕реНрдпрд╛рди рдЕрдиреБрдЧрдорди рд░ рд░рд┐рд▓реЗ рдирд┐рдпрдиреНрддреНрд░рдгрд▓рд╛рдИ рдХреНрд▓рд╛рдЙрдб-рдЖрдзрд╛рд░рд┐рдд IoT рд╕реЗрд╡рд╛рд╕рдБрдЧ рдХрд╕рд░реА рдЬрдбрд╛рди рдЧрд░реНрдиреЗ рднрдиреЗрд░ рд╕рд┐рдХреНрдиреБрднрдпреЛред рдЕрд░реНрдХреЛ рдЪрд░рдг рднрдиреЗрдХреЛ рд░рд┐рд▓реЗрдХреЛ рд╕рдордп рдирд┐рдпрдиреНрддреНрд░рдг рдЧрд░реНрдиреЗ рд╕рд░реНрднрд░ рдХреЛрдбрд▓рд╛рдИ рдХреНрд▓рд╛рдЙрдбрдорд╛ рд╕рд╛рд░реНрдиреБ рд╣реЛред рдпрд╕ рдкрд╛рдардорд╛, рддрдкрд╛рдИрдВрд▓реЗ serverless functions рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрд░ рдпреЛ рдХрд╕рд░реА рдЧрд░реНрдиреЗ рднрдиреЗрд░ рд╕рд┐рдХреНрдиреБрд╣реБрдиреЗрдЫред

рдпрд╕ рдкрд╛рдардорд╛ рд╣рд╛рдореА рдирд┐рдореНрди рд╡рд┐рд╖рдпрд╣рд░реВ рд╕рдореЗрдЯреНрдиреЗрдЫреМрдВ:

* [Serverless рдХреЗ рд╣реЛ?](../../../../../2-farm/lessons/5-migrate-application-to-the-cloud)
* [Serverless рдПрдкреНрд▓рд┐рдХреЗрд╕рди рдмрдирд╛рдЙрдиреБрд╣реЛрд╕реН](../../../../../2-farm/lessons/5-migrate-application-to-the-cloud)
* [IoT Hub рдЗрднреЗрдиреНрдЯ рдЯреНрд░рд┐рдЧрд░ рдмрдирд╛рдЙрдиреБрд╣реЛрд╕реН](../../../../../2-farm/lessons/5-migrate-application-to-the-cloud)
* [Serverless рдХреЛрдбрдмрд╛рдЯ рдкреНрд░рддреНрдпрдХреНрд╖ рд╡рд┐рдзрд┐ рдЕрдиреБрд░реЛрдзрд╣рд░реВ рдкрдард╛рдЙрдиреБрд╣реЛрд╕реН](../../../../../2-farm/lessons/5-migrate-application-to-the-cloud)
* [рддрдкрд╛рдИрдВрдХреЛ serverless рдХреЛрдбрд▓рд╛рдИ рдХреНрд▓рд╛рдЙрдбрдорд╛ рдбрд┐рдкреНрд▓реЛрдп рдЧрд░реНрдиреБрд╣реЛрд╕реН](../../../../../2-farm/lessons/5-migrate-application-to-the-cloud)

## Serverless рдХреЗ рд╣реЛ?

Serverless, рд╡рд╛ serverless computing, рднрдиреЗрдХреЛ рд╕рд╛рдирд╛ рдХреЛрдб рдмреНрд▓рдХрд╣рд░реВ рдмрдирд╛рдЙрдиреБ рд╣реЛ, рдЬреБрди рд╡рд┐рднрд┐рдиреНрди рдкреНрд░рдХрд╛рд░рдХрд╛ рдШрдЯрдирд╛рд╣рд░реВрдХреЛ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛рдорд╛ рдХреНрд▓рд╛рдЙрдбрдорд╛ рдЪрд▓реНрдЫред рдЬрдм рдШрдЯрдирд╛ рд╣реБрдиреНрдЫ, рддрдкрд╛рдИрдВрдХреЛ рдХреЛрдб рдЪрд▓реНрдЫ, рд░ рдпрд╕рд▓рд╛рдИ рдШрдЯрдирд╛рдХреЛ рдмрд╛рд░реЗрдорд╛ рдбреЗрдЯрд╛ рдкрд╛рд╕ рдЧрд░рд┐рдиреНрдЫред рдпреА рдШрдЯрдирд╛рд╣рд░реВ рд╡реЗрдм рдЕрдиреБрд░реЛрдзрд╣рд░реВ, рдХрддрд╛рд░рдорд╛ рд░рд╛рдЦрд┐рдПрдХрд╛ рд╕рдиреНрджреЗрд╢рд╣рд░реВ, рдбрд╛рдЯрд╛рдмреЗрд╕рдорд╛ рднрдПрдХрд╛ рдкрд░рд┐рд╡рд░реНрддрдирд╣рд░реВ, рд╡рд╛ IoT рдЙрдкрдХрд░рдгрд╣рд░реВрд▓реЗ IoT рд╕реЗрд╡рд╛рдорд╛ рдкрдард╛рдПрдХрд╛ рд╕рдиреНрджреЗрд╢рд╣рд░реВ рдЬрд╕реНрддрд╛ рдзреЗрд░реИ рдЪреАрдЬрд╣рд░реВрдмрд╛рдЯ рд╣реБрди рд╕рдХреНрдЫрдиреНред

![IoT рд╕реЗрд╡рд╛рдмрд╛рдЯ serverless рд╕реЗрд╡рд╛рдорд╛ рдкрдард╛рдЗрдПрдХрд╛ рдШрдЯрдирд╛рд╣рд░реВ, рд╕рдмреИ рдПрдХреИ рд╕рдордпрдорд╛ рдзреЗрд░реИ functions рджреНрд╡рд╛рд░рд╛ рдкреНрд░рд╢реЛрдзрди рднрдЗрд░рд╣реЗрдХреЛ](../../../../../translated_images/iot-messages-to-serverless.0194da1cc0732bb7d0f823aed3fce54735c6b1ad3bf36089804d8aaefc0a774f.ne.png)

> ЁЯТБ рдпрджрд┐ рддрдкрд╛рдИрдВрд▓реЗ рдкрд╣рд┐рд▓реЗ рдбрд╛рдЯрд╛рдмреЗрд╕ рдЯреНрд░рд┐рдЧрд░рд╣рд░реВ рдкреНрд░рдпреЛрдЧ рдЧрд░реНрдиреБрднрдПрдХреЛ рдЫ рднрдиреЗ, рддрдкрд╛рдИрдВ рдпрд╕рд▓рд╛рдИ рддреНрдпрд╕реНрддреИ рд╕реЛрдЪреНрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫ, рдХреЛрдб рдХреБрдиреИ рдШрдЯрдирд╛рд▓реЗ рдЯреНрд░рд┐рдЧрд░ рдЧрд░реНрджрд╛ рдЪрд▓реНрдЫ, рдЬрд╕реНрддреИ рдкрдЩреНрдХреНрддрд┐ рдердкреНрджрд╛ред

![рдЬрдм рдзреЗрд░реИ рдШрдЯрдирд╛рд╣рд░реВ рдПрдХреИ рд╕рдордпрдорд╛ рдкрдард╛рдЗрдиреНрдЫ, serverless рд╕реЗрд╡рд╛ рд╕реНрдХреЗрд▓ рд╣реБрдиреНрдЫ рд░ рд╕рдмреИрд▓рд╛рдИ рдПрдХреИ рд╕рдордпрдорд╛ рдЪрд▓рд╛рдЙрдБрдЫ](../../../../../translated_images/serverless-scaling.f8c769adf0413fd17be1af4f07ff63016b347e2ff869be6c4abb211f9e93909d.ne.png)

рддрдкрд╛рдИрдВрдХреЛ рдХреЛрдб рдХреЗрд╡рд▓ рдШрдЯрдирд╛ рд╣реБрдБрджрд╛ рдорд╛рддреНрд░ рдЪрд▓реНрдЫ, рдЕрдиреНрдп рд╕рдордпрдорд╛ рддрдкрд╛рдИрдВрдХреЛ рдХреЛрдб рд╕рдХреНрд░рд┐рдп рд╣реБрдБрджреИрдиред рдШрдЯрдирд╛ рд╣реБрдиреНрдЫ, рддрдкрд╛рдИрдВрдХреЛ рдХреЛрдб рд▓реЛрдб рд╣реБрдиреНрдЫ рд░ рдЪрд▓реНрдЫред рдпрд╕рд▓реЗ serverless рд▓рд╛рдИ рдзреЗрд░реИ рд╕реНрдХреЗрд▓реЗрдмрд▓ рдмрдирд╛рдЙрдБрдЫ - рдпрджрд┐ рдзреЗрд░реИ рдШрдЯрдирд╛рд╣рд░реВ рдПрдХреИ рд╕рдордпрдорд╛ рд╣реБрдиреНрдЫрдиреН рднрдиреЗ, рдХреНрд▓рд╛рдЙрдб рдкреНрд░рджрд╛рдпрдХрд▓реЗ рддрдкрд╛рдИрдВрдХреЛ function рд▓рд╛рдИ рдЖрд╡рд╢реНрдпрдХрддрд╛рдЕрдиреБрд╕рд╛рд░ рдзреЗрд░реИ рдкрдЯрдХ рдЪрд▓рд╛рдЙрди рд╕рдХреНрдЫред рдпрд╕рдХреЛ рдирдХрд╛рд░рд╛рддреНрдордХ рдкрдХреНрд╖ рднрдиреЗрдХреЛ рдпрджрд┐ рддрдкрд╛рдИрдВрд▓реЗ рдШрдЯрдирд╛рд╣рд░реВ рдмреАрдЪ рдЬрд╛рдирдХрд╛рд░реА рд╕рд╛рдЭрд╛ рдЧрд░реНрди рдЖрд╡рд╢реНрдпрдХ рдЫ рднрдиреЗ, рддрдкрд╛рдИрдВрд▓реЗ рдпрд╕рд▓рд╛рдИ рдореЗрдореЛрд░реАрдорд╛ рднрдгреНрдбрд╛рд░рдг рдЧрд░реНрдиреБрдХреЛ рд╕рдЯреНрдЯрд╛ рдбрд╛рдЯрд╛рдмреЗрд╕рдорд╛ рд╕реБрд░рдХреНрд╖рд┐рдд рдЧрд░реНрдиреБрдкрд░реНрдиреЗ рд╣реБрдиреНрдЫред

рддрдкрд╛рдИрдВрдХреЛ рдХреЛрдб рдПрдЙрдЯрд╛ function рдХреЛ рд░реВрдкрдорд╛ рд▓реЗрдЦрд┐рдиреНрдЫ, рдЬрд╕рд▓реЗ рдШрдЯрдирд╛рдХреЛ рд╡рд┐рд╡рд░рдгрд▓рд╛рдИ рдПрдЙрдЯрд╛ рдкреНрдпрд╛рд░рд╛рдорд┐рдЯрд░рдХреЛ рд░реВрдкрдорд╛ рд▓рд┐рдиреНрдЫред рдпреА serverless functions рд▓реЗрдЦреНрди рддрдкрд╛рдИрдВрд▓реЗ рдзреЗрд░реИ рдкреНрд░рдХрд╛рд░рдХрд╛ рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдЩ рднрд╛рд╖рд╛рд╣рд░реВ рдкреНрд░рдпреЛрдЧ рдЧрд░реНрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫред

> ЁЯОУ Serverless рд▓рд╛рдИ Functions as a Service (FaaS) рдкрдирд┐ рднрдирд┐рдиреНрдЫ, рдХрд┐рдирднрдиреЗ рдкреНрд░рддреНрдпреЗрдХ рдЗрднреЗрдиреНрдЯ рдЯреНрд░рд┐рдЧрд░рд▓рд╛рдИ рдХреЛрдбрдорд╛ function рдХреЛ рд░реВрдкрдорд╛ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдЧрд░рд┐рдиреНрдЫред

рдирд╛рдорд▓реЗ рд╕рдВрдХреЗрдд рдЧрд░реЗ рдкрдирд┐, serverless рд▓реЗ рд╡рд╛рд╕реНрддрд╡рдорд╛ рд╕рд░реНрднрд░рд╣рд░реВ рдкреНрд░рдпреЛрдЧ рдЧрд░реНрдЫред рдирд╛рдорд╛рдХрд░рдг рдпрд╕рдХрд╛рд░рдг рдЧрд░рд┐рдПрдХреЛ рд╣реЛ рдХрд┐ рддрдкрд╛рдИрдВ, рдПрдХ рд╡рд┐рдХрд╛рд╕рдХрд░реНрддрд╛, рддрдкрд╛рдИрдВрдХреЛ рдХреЛрдб рдЪрд▓рд╛рдЙрди рдЖрд╡рд╢реНрдпрдХ рд╕рд░реНрднрд░рд╣рд░реВрдХреЛ рдмрд╛рд░реЗрдорд╛ рдЪрд┐рдиреНрддрд╛ рдЧрд░реНрдиреБрд╣реБрдиреНрди, рддрдкрд╛рдИрдВрд▓рд╛рдИ рдХреЗрд╡рд▓ рдпреЛ рдерд╛рд╣рд╛ рдЫ рдХрд┐ рддрдкрд╛рдИрдВрдХреЛ рдХреЛрдб рдШрдЯрдирд╛ рд╣реБрдБрджрд╛ рдЪрд▓реНрдЫред рдХреНрд▓рд╛рдЙрдб рдкреНрд░рджрд╛рдпрдХрд╕рдБрдЧ serverless *runtime* рд╣реБрдиреНрдЫ, рдЬрд╕рд▓реЗ рд╕рд░реНрднрд░рд╣рд░реВ, рдиреЗрдЯрд╡рд░реНрдХрд┐рдЩ, рднрдгреНрдбрд╛рд░рдг, CPU, рдореЗрдореЛрд░реА рд░ рддрдкрд╛рдИрдВрдХреЛ рдХреЛрдб рдЪрд▓рд╛рдЙрди рдЖрд╡рд╢реНрдпрдХ рд╕рдмреИ рдХреБрд░рд╛ рд╡реНрдпрд╡рд╕реНрдерд╛рдкрди рдЧрд░реНрдЫред рдпрд╕ рдореЛрдбреЗрд▓рд▓реЗ рддрдкрд╛рдИрдВрд▓рд╛рдИ рд╕рд░реНрднрд░рдХреЛ рдЖрдзрд╛рд░рдорд╛ рд╢реБрд▓реНрдХ рддрд┐рд░реНрди рдЕрдиреБрдорддрд┐ рджрд┐рдБрджреИрди, рдХрд┐рдирднрдиреЗ рдпрд╣рд╛рдБ рдХреБрдиреИ рд╕рд░реНрднрд░ рдЫреИрдиред рдпрд╕рдХреЛ рд╕рдЯреНрдЯрд╛, рддрдкрд╛рдИрдВрдХреЛ рдХреЛрдб рдЪрд▓рд┐рд░рд╣реЗрдХреЛ рд╕рдордп рд░ рдкреНрд░рдпреЛрдЧ рдЧрд░рд┐рдПрдХреЛ рдореЗрдореЛрд░реАрдХреЛ рдЖрдзрд╛рд░рдорд╛ рд╢реБрд▓реНрдХ рд▓рд╛рдЧреНрдЫред

> ЁЯТ░ Serverless рдХреНрд▓рд╛рдЙрдбрдорд╛ рдХреЛрдб рдЪрд▓рд╛рдЙрдиреЗ рд╕рдмреИрднрдиреНрджрд╛ рд╕рд╕реНрддреЛ рддрд░рд┐рдХрд╛рдордзреНрдпреЗ рдПрдХ рд╣реЛред рдЙрджрд╛рд╣рд░рдгрдХрд╛ рд▓рд╛рдЧрд┐, рд▓реЗрдЦреНрдиреЗ рд╕рдордпрдорд╛, рдПрдХ рдХреНрд▓рд╛рдЙрдб рдкреНрд░рджрд╛рдпрдХрд▓реЗ рддрдкрд╛рдИрдВрдХреЛ рд╕рдмреИ serverless functions рд▓рд╛рдИ рдорд╣рд┐рдирд╛рдорд╛ 1,000,000 рдкрдЯрдХ рдЪрд▓рд╛рдЙрди рдЕрдиреБрдорддрд┐ рджрд┐рдиреНрдЫ, рддреНрдпрд╕рдкрдЫрд┐ рдорд╛рддреНрд░ рд╢реБрд▓реНрдХ рд▓рд╛рдЧреНрдЫ, рд░ рддреНрдпрд╕рдкрдЫрд┐ рдкреНрд░рддреНрдпреЗрдХ 1,000,000 рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрдирдХреЛ рд▓рд╛рдЧрд┐ US$0.20 рдЪрд╛рд░реНрдЬ рдЧрд░реНрдЫред рдЬрдм рддрдкрд╛рдИрдВрдХреЛ рдХреЛрдб рдЪрд▓рд┐рд░рд╣реЗрдХреЛ рд╣реБрдБрджреИрди, рддрдкрд╛рдИрдВрд▓реЗ рд╢реБрд▓реНрдХ рддрд┐рд░реНрдиреБ рдкрд░реНрджреИрдиред

IoT рд╡рд┐рдХрд╛рд╕рдХрд░реНрддрд╛рдХреЛ рд░реВрдкрдорд╛, serverless рдореЛрдбреЗрд▓ рдЖрджрд░реНрд╢ рд╣реЛред рддрдкрд╛рдИрдВрд▓реЗ function рд▓реЗрдЦреНрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫ, рдЬреБрди рддрдкрд╛рдИрдВрдХреЛ рдХреНрд▓рд╛рдЙрдб-рд╣реЛрд╕реНрдЯ рдЧрд░рд┐рдПрдХреЛ IoT рд╕реЗрд╡рд╛рдорд╛ рдЬрдбрд╛рди рднрдПрдХрд╛ рдХреБрдиреИ рдкрдирд┐ IoT рдЙрдкрдХрд░рдгрдмрд╛рдЯ рдкрдард╛рдЗрдПрдХрд╛ рд╕рдиреНрджреЗрд╢рд╣рд░реВрдХреЛ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛рдорд╛ рдмреЛрд▓рд╛рдЗрдиреНрдЫред рддрдкрд╛рдИрдВрдХреЛ рдХреЛрдбрд▓реЗ рдкрдард╛рдЗрдПрдХрд╛ рд╕рдмреИ рд╕рдиреНрджреЗрд╢рд╣рд░реВрд▓рд╛рдИ рд╣реНрдпрд╛рдиреНрдбрд▓ рдЧрд░реНрдиреЗрдЫ, рддрд░ рдЖрд╡рд╢реНрдпрдХ рдкрд░реНрджрд╛ рдорд╛рддреНрд░ рдЪрд▓реНрдиреЗрдЫред

тЬЕ рддрдкрд╛рдИрдВрд▓реЗ MQTT рдорд╛рд░реНрдлрдд рд╕рдиреНрджреЗрд╢рд╣рд░реВ рд╕реБрдиреНрдиреЗ server рдХреЛрдб рд▓реЗрдЦреНрдиреБрднрдПрдХреЛ рдХреЛрдбрд▓рд╛рдИ рдлрд┐рд░реНрддрд╛ рд╣реЗрд░реНрдиреБрд╣реЛрд╕реНред рдпреЛ serverless рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрд░ рдХреНрд▓рд╛рдЙрдбрдорд╛ рдХрд╕рд░реА рдЪрд▓реНрди рд╕рдХреНрдЫ? serverless computing рд╕рдорд░реНрдерди рдЧрд░реНрди рдХреЛрдбрд▓рд╛рдИ рдХрд╕рд░реА рдкрд░рд┐рд╡рд░реНрддрди рдЧрд░реНрди рд╕рдХрд┐рдиреНрдЫ рдЬрд╕реНрддреЛ рд▓рд╛рдЧреНрдЫ?

> ЁЯТБ Serverless рдореЛрдбреЗрд▓ рдЕрдиреНрдп рдХреНрд▓рд╛рдЙрдб рд╕реЗрд╡рд╛рд╣рд░реВрдорд╛ рдкрдирд┐ рд╡рд┐рд╕реНрддрд╛рд░ рднрдЗрд░рд╣реЗрдХреЛ рдЫ, рдХреЛрдб рдЪрд▓рд╛рдЙрдиреБ рдмрд╛рд╣реЗрдХред рдЙрджрд╛рд╣рд░рдгрдХрд╛ рд▓рд╛рдЧрд┐, serverless рдбрд╛рдЯрд╛рдмреЗрд╕рд╣рд░реВ рдХреНрд▓рд╛рдЙрдбрдорд╛ рдЙрдкрд▓рдмреНрдз рдЫрдиреН, рдЬрд╕рд▓реЗ serverless рдореВрд▓реНрдп рдирд┐рд░реНрдзрд╛рд░рдг рдореЛрдбреЗрд▓ рдкреНрд░рдпреЛрдЧ рдЧрд░реНрдЫрдиреН, рдЬрд╣рд╛рдБ рддрдкрд╛рдИрдВрд▓реЗ рдбрд╛рдЯрд╛рдмреЗрд╕рдорд╛ рдЧрд░рд┐рдПрдХреЛ рдЕрдиреБрд░реЛрдзрд╣рд░реВрдХреЛ рдЖрдзрд╛рд░рдорд╛ рд╢реБрд▓реНрдХ рддрд┐рд░реНрдиреБрд╣реБрдиреНрдЫ, рдЬрд╕реНрддреИ рдХреНрд╡реЗрд░реА рд╡рд╛ рдЗрдирд╕рд░реНрдЯред рдЙрджрд╛рд╣рд░рдгрдХрд╛ рд▓рд╛рдЧрд┐, рдкреНрд░рд╛рдердорд┐рдХ рдХреБрдЮреНрдЬреАрдХреЛ рд╡рд┐рд░реБрджреНрдзрдорд╛ рдПрдЙрдЯрд╛ рдкрдЩреНрдХреНрддрд┐ рдЪрдпрди рдЧрд░реНрджрд╛ рдЬрдЯрд┐рд▓ рдЕрдкрд░реЗрд╕рдирдХреЛ рддреБрд▓рдирд╛рдорд╛ рдХрдо рд▓рд╛рдЧрдд рд▓рд╛рдЧреНрдЫ, рдЬрд╕рд▓реЗ рдзреЗрд░реИ рддрд╛рд▓рд┐рдХрд╛рд╣рд░реВрд▓рд╛рдИ рдЬреЛрдбреНрдЫ рд░ рд╣рдЬрд╛рд░реМрдВ рдкрдЩреНрдХреНрддрд┐рд╣рд░реВ рдлрд┐рд░реНрддрд╛ рдЧрд░реНрдЫред

## Serverless рдПрдкреНрд▓рд┐рдХреЗрд╕рди рдмрдирд╛рдЙрдиреБрд╣реЛрд╕реН

Microsoft рдХреЛ serverless computing рд╕реЗрд╡рд╛ Azure Functions рд╣реЛред

![Azure Functions рдХреЛ рд▓реЛрдЧреЛ](../../../../../translated_images/azure-functions-logo.1cfc8e3204c9c44aaf80fcf406fc8544d80d7f00f8d3e8ed6fed764563e17564.ne.png)

рддрд▓рдХреЛ рдЫреЛрдЯреЛ рднрд┐рдбрд┐рдпреЛрдорд╛ Azure Functions рдХреЛ рдмрд╛рд░реЗрдорд╛ рдПрдХ рдЭрд▓рдХ рдЫред

[![Azure Functions рдХреЛ рдЭрд▓рдХ рднрд┐рдбрд┐рдпреЛ](https://img.youtube.com/vi/8-jz5f_JyEQ/0.jpg)](https://www.youtube.com/watch?v=8-jz5f_JyEQ)

> ЁЯОе рдорд╛рдерд┐рдХреЛ рддрд╕реНрдмрд┐рд░рдорд╛ рдХреНрд▓рд┐рдХ рдЧрд░реЗрд░ рднрд┐рдбрд┐рдпреЛ рд╣реЗрд░реНрдиреБрд╣реЛрд╕реНред

тЬЕ рдХреЗрд╣реА рд╕рдордп рд▓рд┐рдиреБрд╣реЛрд╕реН рд░ [Microsoft Azure Functions рдХреЛ рджрд╕реНрддрд╛рд╡реЗрдЬ](https://docs.microsoft.com/azure/azure-functions/functions-overview?WT.mc_id=academic-17441-jabenn) рдорд╛ Azure Functions рдХреЛ рдЭрд▓рдХ рдкрдвреНрдиреБрд╣реЛрд╕реНред

Azure Functions рд▓реЗрдЦреНрди, рддрдкрд╛рдИрдВрд▓реЗ рдЖрдлреНрдиреЛ рд░реЛрдЬрд╛рдЗрдХреЛ рднрд╛рд╖рд╛рдорд╛ Azure Functions рдПрдк рд╕реБрд░реБ рдЧрд░реНрдиреБрд╣реБрдиреНрдЫред Azure Functions рд▓реЗ Python, JavaScript, TypeScript, C#, F#, Java, рд░ Powershell рд▓рд╛рдИ рд╕рдорд░реНрдерди рдЧрд░реНрджрдЫред рдпрд╕ рдкрд╛рдардорд╛, рддрдкрд╛рдИрдВрд▓реЗ Python рдорд╛ Azure Functions рдПрдк рд▓реЗрдЦреНрди рд╕рд┐рдХреНрдиреБрд╣реБрдиреЗрдЫред

> ЁЯТБ Azure Functions рд▓реЗ рдХрд╕реНрдЯрдо рд╣реНрдпрд╛рдиреНрдбрд▓рд░рд╣рд░реВрд▓рд╛рдИ рдкрдирд┐ рд╕рдорд░реНрдерди рдЧрд░реНрджрдЫ, рдЬрд╕рд▓реЗ HTTP рдЕрдиреБрд░реЛрдзрд╣рд░реВрд▓рд╛рдИ рд╕рдорд░реНрдерди рдЧрд░реНрдиреЗ рдХреБрдиреИ рдкрдирд┐ рднрд╛рд╖рд╛рдорд╛ рддрдкрд╛рдИрдВрдХреЛ functions рд▓реЗрдЦреНрди рдЕрдиреБрдорддрд┐ рджрд┐рдиреНрдЫ, рдкреБрд░рд╛рдирд╛ рднрд╛рд╖рд╛рд╣рд░реВ рдЬрд╕реНрддреИ COBOL рд╕рдореЗрддред

Functions рдПрдкрд╣рд░реВрдорд╛ рдПрдХ рд╡рд╛ рдмрдвреА *triggers* рд╣реБрдиреНрдЫрдиреН - functions рдЬрд╕рд▓реЗ рдШрдЯрдирд╛рд╣рд░реВрдХреЛ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛рдорд╛ рдХрд╛рдо рдЧрд░реНрдЫрдиреНред рддрдкрд╛рдИрдВрдХреЛ Functions рдПрдкрдорд╛ рдзреЗрд░реИ triggers рд╣реБрди рд╕рдХреНрдЫрдиреН, рдЬрд╕рд▓реЗ рд╕рд╛рдЭрд╛ рдХрдиреНрдлрд┐рдЧрд░реЗрд╕рди рдкреНрд░рдпреЛрдЧ рдЧрд░реНрдЫрдиреНред рдЙрджрд╛рд╣рд░рдгрдХрд╛ рд▓рд╛рдЧрд┐, рддрдкрд╛рдИрдВрдХреЛ Functions рдПрдкрдХреЛ рдХрдиреНрдлрд┐рдЧрд░реЗрд╕рди рдлрд╛рдЗрд▓рдорд╛ рддрдкрд╛рдИрдВрдХреЛ IoT Hub рдХреЛ рдЬрдбрд╛рди рд╡рд┐рд╡рд░рдгрд╣рд░реВ рд╣реБрди рд╕рдХреНрдЫрдиреН, рд░ рдПрдкрдХрд╛ рд╕рдмреИ functions рд▓реЗ рдпрд╕рд▓рд╛рдИ рдЬрдбрд╛рди рдЧрд░реНрди рд░ рдШрдЯрдирд╛рд╣рд░реВ рд╕реБрдиреНрди рдкреНрд░рдпреЛрдЧ рдЧрд░реНрди рд╕рдХреНрдЫрдиреНред

### рдХрд╛рд░реНрдп - Azure Functions рдЙрдкрдХрд░рдг рд╕реНрдерд╛рдкрдирд╛ рдЧрд░реНрдиреБрд╣реЛрд╕реН

> рд▓реЗрдЦреНрдиреЗ рд╕рдордпрдорд╛, Azure Functions рдХреЛрдб рдЙрдкрдХрд░рдгрд╣рд░реВ Python рдкреНрд░реЛрдЬреЗрдХреНрдЯрд╣рд░реВрд╕рдБрдЧ Apple Silicon рдорд╛ рдкреВрд░реНрдг рд░реВрдкрдорд╛ рдХрд╛рдо рдЧрд░рд┐рд░рд╣реЗрдХрд╛ рдЫреИрдирдиреНред рддрдкрд╛рдИрдВрд▓реЗ Intel-рдЖрдзрд╛рд░рд┐рдд Mac, Windows PC, рд╡рд╛ Linux PC рдкреНрд░рдпреЛрдЧ рдЧрд░реНрдиреБрдкрд░реНрдиреЗрдЫред

Azure Functions рдХреЛ рдПрдХ рдЙрддреНрдХреГрд╖реНрдЯ рд╡рд┐рд╢реЗрд╖рддрд╛ рднрдиреЗрдХреЛ рддрдкрд╛рдИрдВрд▓реЗ рдпрд╕рд▓рд╛рдИ рд╕реНрдерд╛рдиреАрдп рд░реВрдкрдорд╛ рдЪрд▓рд╛рдЙрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫред рдХреНрд▓рд╛рдЙрдбрдорд╛ рдкреНрд░рдпреЛрдЧ рд╣реБрдиреЗ рдЙрд╕реНрддреИ runtime рддрдкрд╛рдИрдВрдХреЛ рдХрдореНрдкреНрдпреБрдЯрд░рдорд╛ рдЪрд▓рд╛рдЙрди рд╕рдХрд┐рдиреНрдЫ, рдЬрд╕рд▓реЗ рддрдкрд╛рдИрдВрд▓рд╛рдИ IoT рд╕рдиреНрджреЗрд╢рд╣рд░реВрдХреЛ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛рдорд╛ рдХреЛрдб рд▓реЗрдЦреНрди рд░ рд╕реНрдерд╛рдиреАрдп рд░реВрдкрдорд╛ рдЪрд▓рд╛рдЙрди рдЕрдиреБрдорддрд┐ рджрд┐рдиреНрдЫред рддрдкрд╛рдИрдВрд▓реЗ рдШрдЯрдирд╛рд╣рд░реВ рд╣реНрдпрд╛рдиреНрдбрд▓ рдЧрд░реНрджрд╛ рдЖрдлреНрдиреЛ рдХреЛрдб рдбрд┐рдмрдЧ рдкрдирд┐ рдЧрд░реНрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫред рдЬрдм рддрдкрд╛рдИрдВ рдЖрдлреНрдиреЛ рдХреЛрдбрд╕рдБрдЧ рд╕рдиреНрддреБрд╖реНрдЯ рд╣реБрдиреБрд╣реБрдиреНрдЫ, рдпрд╕рд▓рд╛рдИ рдХреНрд▓рд╛рдЙрдбрдорд╛ рдбрд┐рдкреНрд▓реЛрдп рдЧрд░реНрди рд╕рдХрд┐рдиреНрдЫред

Azure Functions рдЙрдкрдХрд░рдг CLI рдХреЛ рд░реВрдкрдорд╛ рдЙрдкрд▓рдмреНрдз рдЫ, рдЬрд╕рд▓рд╛рдИ Azure Functions Core Tools рднрдирд┐рдиреНрдЫред

1. [Azure Functions Core Tools рдХреЛ рджрд╕реНрддрд╛рд╡реЗрдЬ](https://docs.microsoft.com/azure/azure-functions/functions-run-local?WT.mc_id=academic-17441-jabenn) рдорд╛ рджрд┐рдЗрдПрдХрд╛ рдирд┐рд░реНрджреЗрд╢рдирд╣рд░реВ рдкрд╛рд▓рдирд╛ рдЧрд░реЗрд░ Azure Functions рдХреЛрд░ рдЙрдкрдХрд░рдгрд╣рд░реВ рд╕реНрдерд╛рдкрдирд╛ рдЧрд░реНрдиреБрд╣реЛрд╕реНред

1. VS Code рдХрд╛ рд▓рд╛рдЧрд┐ Azure Functions рд╡рд┐рд╕реНрддрд╛рд░ рд╕реНрдерд╛рдкрдирд╛ рдЧрд░реНрдиреБрд╣реЛрд╕реНред рдпреЛ рд╡рд┐рд╕реНрддрд╛рд░рд▓реЗ Azure functions рд╕рд┐рд░реНрдЬрдирд╛, рдбрд┐рдмрдЧ рд░ рдбрд┐рдкреНрд▓реЛрдп рдЧрд░реНрди рд╕рдорд░реНрдерди рдкреНрд░рджрд╛рди рдЧрд░реНрджрдЫред [Azure Functions рд╡рд┐рд╕реНрддрд╛рд░рдХреЛ рджрд╕реНрддрд╛рд╡реЗрдЬ](https://marketplace.visualstudio.com/items?WT.mc_id=academic-17441-jabenn&itemName=ms-azuretools.vscode-azurefunctions) рдорд╛ VS Code рдорд╛ рдпреЛ рд╡рд┐рд╕реНрддрд╛рд░ рд╕реНрдерд╛рдкрдирд╛ рдЧрд░реНрдиреЗ рдирд┐рд░реНрджреЗрд╢рдирд╣рд░реВ рд╣реЗрд░реНрдиреБрд╣реЛрд╕реНред

рдЬрдм рддрдкрд╛рдИрдВ рдЖрдлреНрдиреЛ Azure Functions рдПрдкрд▓рд╛рдИ рдХреНрд▓рд╛рдЙрдбрдорд╛ рдбрд┐рдкреНрд▓реЛрдп рдЧрд░реНрдиреБрд╣реБрдиреНрдЫ, рдпрд╕рд▓реЗ рдПрдкреНрд▓рд┐рдХреЗрд╕рди рдлрд╛рдЗрд▓рд╣рд░реВ рд░ рд▓рдЧ рдлрд╛рдЗрд▓рд╣рд░реВ рдЬрд╕реНрддрд╛ рдЪреАрдЬрд╣рд░реВ рднрдгреНрдбрд╛рд░рдг рдЧрд░реНрди рд╕рд╛рдиреЛ рдорд╛рддреНрд░рд╛рдорд╛ рдХреНрд▓рд╛рдЙрдб рднрдгреНрдбрд╛рд░рдг рдкреНрд░рдпреЛрдЧ рдЧрд░реНрди рдЖрд╡рд╢реНрдпрдХ рдЫред рдЬрдм рддрдкрд╛рдИрдВ рдЖрдлреНрдиреЛ Functions рдПрдкрд▓рд╛рдИ рд╕реНрдерд╛рдиреАрдп рд░реВрдкрдорд╛ рдЪрд▓рд╛рдЙрдиреБрд╣реБрдиреНрдЫ, рддрдкрд╛рдИрдВрд▓реЗ рдЕрдЭреИ рдкрдирд┐ рдХреНрд▓рд╛рдЙрдб рднрдгреНрдбрд╛рд░рдгрдорд╛ рдЬрдбрд╛рди рдЧрд░реНрди рдЖрд╡рд╢реНрдпрдХ рдЫ, рддрд░ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдХреНрд▓рд╛рдЙрдб рднрдгреНрдбрд╛рд░рдг рдкреНрд░рдпреЛрдЧ рдЧрд░реНрдиреБрдХреЛ рд╕рдЯреНрдЯрд╛, рддрдкрд╛рдИрдВрд▓реЗ [Azurite](https://github.com/Azure/Azurite) рдирд╛рдордХ рднрдгреНрдбрд╛рд░рдг рдЗрдореНрдпреБрд▓реЗрдЯрд░ рдкреНрд░рдпреЛрдЧ рдЧрд░реНрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫред рдпреЛ рд╕реНрдерд╛рдиреАрдп рд░реВрдкрдорд╛ рдЪрд▓реНрдЫ рддрд░ рдХреНрд▓рд╛рдЙрдб рднрдгреНрдбрд╛рд░рдг рдЬрд╕реНрддреИ рд╡реНрдпрд╡рд╣рд╛рд░ рдЧрд░реНрдЫред

> ЁЯОУ Azure рдорд╛, Azure Functions рд▓реЗ рдкреНрд░рдпреЛрдЧ рдЧрд░реНрдиреЗ рднрдгреНрдбрд╛рд░рдг Azure Storage Account рд╣реЛред рдпреА рдЦрд╛рддрд╛рд╣рд░реВрд▓реЗ рдлрд╛рдЗрд▓рд╣рд░реВ, рдмреНрд▓рдмрд╣рд░реВ, рддрд╛рд▓рд┐рдХрд╛рд╣рд░реВрдорд╛ рдбреЗрдЯрд╛, рд╡рд╛ рдХрддрд╛рд░рдорд╛ рдбреЗрдЯрд╛ рднрдгреНрдбрд╛рд░рдг рдЧрд░реНрди рд╕рдХреНрдЫрдиреНред рддрдкрд╛рдИрдВрд▓реЗ рдзреЗрд░реИ рдПрдкрд╣рд░реВ, рдЬрд╕реНрддреИ Functions рдПрдк рд░ рд╡реЗрдм рдПрдк, рдмреАрдЪрдорд╛ рдПрдЙрдЯреИ рднрдгреНрдбрд╛рд░рдг рдЦрд╛рддрд╛ рд╕рд╛рдЭрд╛ рдЧрд░реНрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫред

1. Azurite рдПрдХ Node.js рдПрдк рд╣реЛ, рддреНрдпрд╕реИрд▓реЗ рддрдкрд╛рдИрдВрд▓реЗ Node.js рд╕реНрдерд╛рдкрдирд╛ рдЧрд░реНрдиреБрдкрд░реНрдиреЗрдЫред [Node.js рд╡реЗрдмрд╕рд╛рдЗрдЯ](https://nodejs.org/) рдорд╛ рдбрд╛рдЙрдирд▓реЛрдб рд░ рд╕реНрдерд╛рдкрдирд╛ рдирд┐рд░реНрджреЗрд╢рдирд╣рд░реВ рдлреЗрд▓рд╛ рдкрд╛рд░реНрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫред рдпрджрд┐ рддрдкрд╛рдИрдВ Mac рдкреНрд░рдпреЛрдЧ рдЧрд░реНрджреИ рд╣реБрдиреБрд╣реБрдиреНрдЫ рднрдиреЗ, рддрдкрд╛рдИрдВрд▓реЗ рдпрд╕рд▓рд╛рдИ [Homebrew](https://formulae.brew.sh/formula/node) рдмрд╛рдЯ рдкрдирд┐ рд╕реНрдерд╛рдкрдирд╛ рдЧрд░реНрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫред

1. рдирд┐рдореНрди рдЖрджреЗрд╢ рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрд░ Azurite рд╕реНрдерд╛рдкрдирд╛ рдЧрд░реНрдиреБрд╣реЛрд╕реН (`npm` Node.js рд╕реНрдерд╛рдкрдирд╛ рдЧрд░реНрджрд╛ рд╕реНрдерд╛рдкрдирд╛ рд╣реБрдиреЗ рдЙрдкрдХрд░рдг рд╣реЛ):

    ```sh
    npm install -g azurite
    ```

1. Azurite рд▓рд╛рдИ рдбреЗрдЯрд╛ рднрдгреНрдбрд╛рд░рдг рдЧрд░реНрди рдкреНрд░рдпреЛрдЧ рдЧрд░реНрди `azurite` рдирд╛рдордХ рдлреЛрд▓реНрдбрд░ рдмрдирд╛рдЙрдиреБрд╣реЛрд╕реН:

    ```sh
    mkdir azurite
    ```

1. Azurite рдЪрд▓рд╛рдЙрдиреБрд╣реЛрд╕реН, рдпрд╕ рдирдпрд╛рдБ рдлреЛрд▓реНрдбрд░рд▓рд╛рдИ рдкрд╛рд╕ рдЧрд░реНрджреИ:

    ```sh
    azurite --location azurite
    ```

    Azurite рднрдгреНрдбрд╛рд░рдг рдЗрдореНрдпреБрд▓реЗрдЯрд░ рд╕реБрд░реБ рд╣реБрдиреЗрдЫ рд░ рд╕реНрдерд╛рдиреАрдп Functions runtime рдЬрдбрд╛рди рдЧрд░реНрди рддрдпрд╛рд░ рд╣реБрдиреЗрдЫред

    ```output
    тЮЬ  ~ azurite --location azurite  
    Azurite Blob service is starting at http://127.0.0.1:10000
    Azurite Blob service is successfully listening at http://127.0.0.1:10000
    Azurite Queue service is starting at http://127.0.0.1:10001
    Azurite Queue service is successfully listening at http://127.0.0.1:10001
    Azurite Table service is starting at http://127.0.0.1:10002
    Azurite Table service is successfully listening at http://127.0.0.1:10002
    ```

### рдХрд╛рд░реНрдп - Azure Functions рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдмрдирд╛рдЙрдиреБрд╣реЛрд╕реН

Azure Functions CLI рд▓рд╛рдИ рдирдпрд╛рдБ Functions рдПрдк рдмрдирд╛рдЙрди рдкреНрд░рдпреЛрдЧ рдЧрд░реНрди рд╕рдХрд┐рдиреНрдЫред

1. рдЖрдлреНрдиреЛ Functions рдПрдкрдХреЛ рд▓рд╛рдЧрд┐ рдлреЛрд▓реНрдбрд░ рдмрдирд╛рдЙрдиреБрд╣реЛрд╕реН рд░ рдпрд╕рдорд╛ рдЬрд╛рдиреБрд╣реЛрд╕реНред рдпрд╕рд▓рд╛рдИ `soil-moisture-trigger` рдирд╛рдо рджрд┐рдиреБрд╣реЛрд╕реН:

    ```sh
    mkdir soil-moisture-trigger
    cd soil-moisture-trigger
    ```

1. рдпрд╕ рдлреЛрд▓реНрдбрд░рднрд┐рддреНрд░ Python рднрд░реНрдЪреБрдЕрд▓ рд╡рд╛рддрд╛рд╡рд░рдг рдмрдирд╛рдЙрдиреБрд╣реЛрд╕реН:

    ```sh
    python3 -m venv .venv
    ```

1. рднрд░реНрдЪреБрдЕрд▓ рд╡рд╛рддрд╛рд╡рд░рдг рд╕рдХреНрд░рд┐рдп рдЧрд░реНрдиреБрд╣реЛрд╕реН:

    * Windows рдорд╛:
        * рдпрджрд┐ рддрдкрд╛рдИрдВ Command Prompt, рд╡рд╛ Windows Terminal рдорд╛рд░реНрдлрдд Command Prompt рдкреНрд░рдпреЛрдЧ рдЧрд░реНрджреИ рд╣реБрдиреБрд╣реБрдиреНрдЫ рднрдиреЗ, рдирд┐рдореНрди рдЖрджреЗрд╢ рдЪрд▓рд╛рдЙрдиреБрд╣реЛрд╕реН:

            ```cmd
            .venv\Scripts\activate.bat
            ```

        * рдпрджрд┐ рддрдкрд╛рдИрдВ PowerShell рдкреНрд░рдпреЛрдЧ рдЧрд░реНрджреИ рд╣реБрдиреБрд╣реБрдиреНрдЫ рднрдиреЗ, рдирд┐рдореНрди рдЖрджреЗрд╢ рдЪрд▓рд╛рдЙрдиреБрд╣реЛрд╕реН:

            ```powershell
            .\.venv\Scripts\Activate.ps1
            ```

    * macOS рд╡рд╛ Linux рдорд╛, рдирд┐рдореНрди рдЖрджреЗрд╢ рдЪрд▓рд╛рдЙрдиреБрд╣реЛрд╕реН:

        ```cmd
        source ./.venv/bin/activate
        ```

    > ЁЯТБ рдпреА рдЖрджреЗрд╢рд╣рд░реВ рддрдкрд╛рдИрдВрд▓реЗ рднрд░реНрдЪреБрдЕрд▓ рд╡рд╛рддрд╛рд╡рд░рдг рдмрдирд╛рдПрдХреЛ рд╕реНрдерд╛рдирдмрд╛рдЯ рдЪрд▓рд╛рдЙрдиреБрдкрд░реНрдЫред рддрдкрд╛рдИрдВрд▓реЗ `.venv` рдлреЛрд▓реНрдбрд░рдорд╛ рдХрд╣рд┐рд▓реНрдпреИ рдЬрд╛рдиреБ рдкрд░реНрджреИрди, рддрдкрд╛рдИрдВрд▓реЗ рд╕рдзреИрдВ рд╕рдХреНрд░рд┐рдп рдЖрджреЗрд╢ рд░ рдкреНрдпрд╛рдХреЗрдЬрд╣рд░реВ рд╕реНрдерд╛рдкрдирд╛ рдЧрд░реНрди рд╡рд╛ рдХреЛрдб рдЪрд▓рд╛рдЙрди рдЖрджреЗрд╢рд╣рд░реВ рдЪрд▓рд╛рдЙрдиреБ рдкрд░реНрдиреЗ рдлреЛрд▓реНрдбрд░рдмрд╛рдЯ рдЪрд▓рд╛рдЙрдиреБрд╣реЛрд╕реНред

1. рдирд┐рдореНрди рдЖрджреЗрд╢ рдЪрд▓рд╛рдПрд░ рдпрд╕ рдлреЛрд▓реНрдбрд░рдорд╛ Functions рдПрдк рдмрдирд╛рдЙрдиреБрд╣реЛрд╕реН:

    ```sh
    func init --worker-runtime python soil-moisture-trigger
    ```

    рдпрд╕рд▓реЗ рд╣рд╛рд▓рдХреЛ рдлреЛрд▓реНрдбрд░рднрд┐рддреНрд░ рддреАрди рдлрд╛рдЗрд▓рд╣рд░реВ рдмрдирд╛рдЙрдиреЗрдЫ:

    * `host.json` - рдпреЛ JSON рджрд╕реНрддрд╛рд╡реЗрдЬрд▓реЗ рддрдкрд╛рдИрдВрдХреЛ Functions рдПрдкрдХрд╛ рд╕реЗрдЯрд┐рдЩрд╣рд░реВ рд╕рдорд╛рд╡реЗрд╢ рдЧрд░реНрджрдЫред рддрдкрд╛рдИрдВрд▓рд╛рдИ рдпреА рд╕реЗрдЯрд┐рдЩрд╣рд░реВ рдкрд░рд┐рдорд╛рд░реНрдЬрди рдЧрд░реНрди рдЖрд╡рд╢реНрдпрдХ рдкрд░реНрджреИрдиред
    * `local.settings.json` - рдпреЛ JSON рджрд╕реНрддрд╛рд╡реЗрдЬрд▓реЗ рддрдкрд╛рдИрдВрдХреЛ рдПрдкрд▓реЗ рд╕реНрдерд╛рдиреАрдп рд░реВрдкрдорд╛ рдЪрд▓реНрджрд╛ рдкреНрд░рдпреЛрдЧ рдЧрд░реНрдиреЗ рд╕реЗрдЯрд┐рдЩрд╣рд░реВ рд╕рдорд╛рд╡реЗрд╢ рдЧрд░реНрджрдЫ, рдЬрд╕реНрддреИ рддрдкрд╛рдИрдВрдХреЛ IoT Hub рдХрд╛ рд▓рд╛рдЧрд┐ рдЬрдбрд╛рди рд╕реНрдЯреНрд░рд┐рдЩрд╣рд░реВред рдпреА рд╕реЗрдЯрд┐рдЩрд╣рд░реВ рд╕реНрдерд╛рдиреАрдп рдорд╛рддреНрд░ рд╣реБрдиреН, рд░ рд╕реНрд░реЛрдд рдХреЛрдб рдирд┐рдпрдиреНрддреНрд░рдгрдорд╛ рдердкрд┐рдиреБ рд╣реБрдБрджреИрдиред рдЬрдм рддрдкрд╛рдИрдВ рдПрдкрд▓рд╛рдИ рдХреНрд▓рд╛рдЙрдбрдорд╛ рдбрд┐рдкреНрд▓реЛрдп рдЧрд░реНрдиреБрд╣реБрдиреНрдЫ, рдпреА рд╕реЗрдЯрд┐рдЩрд╣рд░реВ рдбрд┐рдкреНрд▓реЛрдп рд╣реБрдБрджреИрдирдиреН, рдпрд╕рдХреЛ рд╕рдЯреНрдЯрд╛ рддрдкрд╛рдИрдВрдХрд╛ рд╕реЗрдЯрд┐рдЩрд╣рд░реВ рдПрдкреНрд▓рд┐рдХреЗрд╕рди рд╕реЗрдЯрд┐рдЩрд╣рд░реВрдмрд╛рдЯ рд▓реЛрдб рд╣реБрдиреНрдЫрдиреНред рдпреЛ рдкрд╛рдардорд╛ рдкрдЫрд┐ рдпреЛ рдХрднрд░ рдЧрд░рд┐рдиреЗрдЫред
    * `requirements.txt` - рдпреЛ [Pip requirements рдлрд╛рдЗрд▓](https://pip.pypa.io/en/stable/user_guide/#requirements-files) рд╣реЛ, рдЬрд╕рд▓реЗ рддрдкрд╛рдИрдВрдХреЛ Functions рдПрдк рдЪрд▓рд╛рдЙрди рдЖрд╡рд╢реНрдпрдХ Pip рдкреНрдпрд╛рдХреЗрдЬрд╣рд░реВ рд╕рдорд╛рд╡реЗрд╢ рдЧрд░реНрджрдЫред

1. `local.settings.json` рдлрд╛рдЗрд▓рдорд╛ Functions рдПрдкрд▓реЗ рдкреНрд░рдпреЛрдЧ рдЧрд░реНрдиреЗ рднрдгреНрдбрд╛рд░рдг рдЦрд╛рддрд╛рдХреЛ рд▓рд╛рдЧрд┐ рд╕реЗрдЯрд┐рдЩ рдЫред рдпреЛ рдбрд┐рдлрд▓реНрдЯ рд░реВрдкрдорд╛ рдЦрд╛рд▓реА рд╕реЗрдЯрд┐рдЩрдорд╛ рд╣реБрдиреНрдЫ, рддреНрдпрд╕реИрд▓реЗ рдпрд╕рд▓рд╛рдИ рд╕реЗрдЯ рдЧрд░реНрди рдЖрд╡рд╢реНрдпрдХ рдЫред Azurite рд╕реНрдерд╛рдиреАрдп рднрдгреНрдбрд╛рд░рдг рдЗрдореНрдпреБрд▓реЗрдЯрд░рдорд╛ рдЬрдбрд╛рди рдЧрд░реНрди, рдпреЛ рдорд╛рдирд▓рд╛рдИ рдирд┐рдореНрдирдорд╛ рд╕реЗрдЯ рдЧрд░реНрдиреБрд╣реЛрд╕реН:

    ```json
    "AzureWebJobsStorage": "UseDevelopmentStorage=true",
    ```

1. рдЖрд╡рд╢реНрдпрдХ Pip рдкреНрдпрд╛рдХреЗрдЬрд╣рд░реВ requirements рдлрд╛рдЗрд▓ рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрд░ рд╕реНрдерд╛рдкрдирд╛ рдЧрд░реНрдиреБрд╣реЛрд╕реН:

    ```sh
    pip install -r requirements.txt
    ```

    > ЁЯТБ рдЖрд╡рд╢реНрдпрдХ Pip рдкреНрдпрд╛рдХреЗрдЬрд╣рд░реВ рдпреЛ рдлрд╛рдЗрд▓рдорд╛ рд╣реБрдиреБрдкрд░реНрдЫ, рддрд╛рдХрд┐ рдЬрдм Functions рдПрдк рдХреНрд▓рд╛рдЙрдбрдорд╛ рдбрд┐рдкреНрд▓реЛрдп рд╣реБрдиреНрдЫ, runtime рд▓реЗ рд╕рд╣реА рдкреНрдпрд╛рдХреЗрдЬрд╣рд░реВ рд╕реНрдерд╛рдкрдирд╛ рдЧрд░реНрди рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдЧрд░реНрди рд╕рдХреНрдЫред

1. рд╕рдмреИ рдХреБрд░рд╛ рд╕рд╣реА рд░реВрдкрдорд╛ рдХрд╛рдо рдЧрд░рд┐рд░рд╣реЗрдХреЛ рдЫ рдХрд┐ рдЫреИрди рдкрд░реАрдХреНрд╖рдг рдЧрд░реНрди, рддрдкрд╛рдИрдВ Functions runtime рд╕реБрд░реБ рдЧрд░реНрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫред рдпреЛ рдЧрд░реНрди рдирд┐рдореНрди рдЖрджреЗрд╢ рдЪрд▓рд╛рдЙрдиреБрд╣реЛрд╕реН:

    ```sh
    func start
    ```

    рддрдкрд╛рдИрдВрд▓реЗ runtime рд╕реБрд░реБ рднрдПрдХреЛ рджреЗрдЦреНрдиреБрд╣реБрдиреЗрдЫ рд░ рдпрд╕рд▓реЗ рдХреБрдиреИ рдкрдирд┐ job functions (triggers) рдлреЗрд▓рд╛ рдкрд╛рд░реЗрди рднрдиреЗрд░ рд░рд┐рдкреЛрд░реНрдЯ рдЧрд░реНрдиреЗрдЫред

    ```output
    (.venv) тЮЬ  soil-moisture-trigger func start
    Found Python version 3.9.1 (python3).
    
    Azure Functions Core Tools
    Core Tools Version:       3.0.3442 Commit hash: 6bfab24b2743f8421475d996402c398d2fe4a9e0  (64-bit)
    Function Runtime Version: 3.0.15417.0
    
    [2021-05-05T01:24:46.795Z] No job functions found.
    ```
> тЪая╕П рдпрджрд┐ рддрдкрд╛рдИрдВрд▓рд╛рдИ рдлрд╛рдпрд░рд╡рд╛рд▓ рд╕реВрдЪрдирд╛ рдкреНрд░рд╛рдкреНрдд рд╣реБрдиреНрдЫ, рдкрд╣реБрдБрдЪ рдЕрдиреБрдорддрд┐ рджрд┐рдиреБрд╣реЛрд╕реН рдХрд┐рдирднрдиреЗ `func` рдПрдкреНрд▓рд┐рдХреЗрд╢рдирд▓реЗ рддрдкрд╛рдИрдВрдХреЛ рдиреЗрдЯрд╡рд░реНрдХрдорд╛ рдкрдвреНрди рд░ рд▓реЗрдЦреНрди рд╕рдХреНрд╖рдо рд╣реБрди рдЖрд╡рд╢реНрдпрдХ рдЫред
> тЪая╕П рдпрджрд┐ рддрдкрд╛рдИрдВ macOS рдкреНрд░рдпреЛрдЧ рдЧрд░реНрджреИ рд╣реБрдиреБрд╣реБрдиреНрдЫ рднрдиреЗ, рдЖрдЙрдЯрдкреБрдЯрдорд╛ рдЪреЗрддрд╛рд╡рдиреАрд╣рд░реВ рджреЗрдЦрд┐рди рд╕рдХреНрдЫ:
>
> ```output
    > (.venv) тЮЬ  soil-moisture-trigger func start
    > Found Python version 3.9.1 (python3).
    >
    > Azure Functions Core Tools
    > Core Tools Version:       3.0.3442 Commit hash: 6bfab24b2743f8421475d996402c398d2fe4a9e0  (64-bit)
    > Function Runtime Version: 3.0.15417.0
    >
    > [2021-06-16T08:18:28.315Z] Cannot create directory for shared memory usage: /dev/shm/AzureFunctions
    > [2021-06-16T08:18:28.316Z] System.IO.FileSystem: Access to the path '/dev/shm/AzureFunctions' is denied. Operation not permitted.
    > [2021-06-16T08:18:30.361Z] No job functions found.
    > ```
>
> рдЬрдмрд╕рдореНрдо Functions рдПрдк рд╕рд╣реА рд░реВрдкрдорд╛ рд╕реБрд░реБ рд╣реБрдиреНрдЫ рд░ рдЪрд▓рд┐рд░рд╣реЗрдХреЛ functions рджреЗрдЦрд╛рдЙрдБрдЫ, рдпреА рдЪреЗрддрд╛рд╡рдиреАрд╣рд░реВрд▓рд╛рдИ рдмреЗрд╡рд╛рд╕реНрддрд╛ рдЧрд░реНрди рд╕рдХрд┐рдиреНрдЫред [Microsoft Docs Q&A рдорд╛ рдпреЛ рдкреНрд░рд╢реНрди](https://docs.microsoft.com/answers/questions/396617/azure-functions-core-tools-error-osx-devshmazurefu.html?WT.mc_id=academic-17441-jabenn) рдЕрдиреБрд╕рд╛рд░, рдпрд╕рд▓рд╛рдИ рдмреЗрд╡рд╛рд╕реНрддрд╛ рдЧрд░реНрди рд╕рдХрд┐рдиреНрдЫред

1. `ctrl+c` рдерд┐рдЪреЗрд░ Functions рдПрдк рдмрдиреНрдж рдЧрд░реНрдиреБрд╣реЛрд╕реНред

1. рд╣рд╛рд▓рдХреЛ рдлреЛрд▓реНрдбрд░рд▓рд╛рдИ VS Code рдорд╛ рдЦреЛрд▓реНрдиреБрд╣реЛрд╕реНред рдпреЛ VS Code рдЦреЛрд▓реЗрд░ рдлреЛрд▓реНрдбрд░ рдЦреЛрд▓реНрдиреЗ рд╡рд╛ рдирд┐рдореНрди рдХрдорд╛рдгреНрдб рдЪрд▓рд╛рдПрд░ рдЧрд░реНрди рд╕рдХрд┐рдиреНрдЫ:

    ```sh
    code .
    ```

    VS Code рд▓реЗ рддрдкрд╛рдИрдВрдХреЛ Functions рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдкрддреНрддрд╛ рд▓рдЧрд╛рдЙрдиреЗрдЫ рд░ рдирд┐рдореНрди рд╕реВрдЪрдирд╛ рджреЗрдЦрд╛рдЙрдиреЗрдЫ:

    ```output
    Detected an Azure Functions Project in folder "soil-moisture-trigger" that may have been created outside of
    VS Code. Initialize for optimal use with VS Code?
    ```

    ![рд╕реВрдЪрдирд╛](../../../../../translated_images/vscode-azure-functions-init-notification.bd19b49229963edb5311fb3a79445ea469424759d2917ee2f2eb6f92d65d5086.ne.png)

    рдпрд╕ рд╕реВрдЪрдирд╛рдмрд╛рдЯ **Yes** рдЪрдпрди рдЧрд░реНрдиреБрд╣реЛрд╕реНред

1. рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдЧрд░реНрдиреБрд╣реЛрд╕реН рдХрд┐ Python рднрд░реНрдЪреБрдЕрд▓ рд╡рд╛рддрд╛рд╡рд░рдг VS Code рдЯрд░реНрдорд┐рдирд▓рдорд╛ рдЪрд▓рд┐рд░рд╣реЗрдХреЛ рдЫред рдЖрд╡рд╢реНрдпрдХ рдкрд░реЗрдорд╛ рдпрд╕рд▓рд╛рдИ рдмрдиреНрдж рдЧрд░реЗрд░ рдкреБрдирдГ рд╕реБрд░реБ рдЧрд░реНрдиреБрд╣реЛрд╕реНред

## IoT Hub рдЗрднреЗрдиреНрдЯ рдЯреНрд░рд┐рдЧрд░ рд╕рд┐рд░реНрдЬрдирд╛ рдЧрд░реНрдиреБрд╣реЛрд╕реН

Functions рдПрдк рддрдкрд╛рдИрдВрдХреЛ serverless рдХреЛрдбрдХреЛ рдЦреЛрд▓ рд╣реЛред IoT Hub рдЗрднреЗрдиреНрдЯрд╣рд░реВрдорд╛ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рджрд┐рди, рддрдкрд╛рдИрдВ рдпрд╕ рдПрдкрдорд╛ IoT Hub рдЯреНрд░рд┐рдЧрд░ рдердкреНрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫред рдпреЛ рдЯреНрд░рд┐рдЧрд░рд▓реЗ IoT Hub рдорд╛ рдкрдард╛рдЗрдПрдХрд╛ рд╕рдиреНрджреЗрд╢рд╣рд░реВрдХреЛ рд╕реНрдЯреНрд░рд┐рдордорд╛ рдЬрдбрд╛рди рдЧрд░реНрди рд░ рддрд┐рдиреАрд╣рд░реВрдорд╛ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рджрд┐рди рдЖрд╡рд╢реНрдпрдХ рдЫред рд╕рдиреНрджреЗрд╢рд╣рд░реВрдХреЛ рдпреЛ рд╕реНрдЯреНрд░рд┐рдо рдкреНрд░рд╛рдкреНрдд рдЧрд░реНрди, рддрдкрд╛рдИрдВрдХреЛ рдЯреНрд░рд┐рдЧрд░рд▓реЗ IoT Hub рдХреЛ *event hub compatible endpoint* рдорд╛ рдЬрдбрд╛рди рдЧрд░реНрди рдЖрд╡рд╢реНрдпрдХ рдЫред

IoT Hub рдЕрд░реНрдХреЛ Azure рд╕реЗрд╡рд╛ Azure Event Hubs рдорд╛ рдЖрдзрд╛рд░рд┐рдд рдЫред Event Hubs рдПрдХ рд╕реЗрд╡рд╛ рд╣реЛ рдЬрд╕рд▓реЗ рд╕рдиреНрджреЗрд╢рд╣рд░реВ рдкрдард╛рдЙрди рд░ рдкреНрд░рд╛рдкреНрдд рдЧрд░реНрди рдЕрдиреБрдорддрд┐ рджрд┐рдиреНрдЫред IoT Hub рд▓реЗ IoT рдЙрдкрдХрд░рдгрд╣рд░реВрдХреЛ рд▓рд╛рдЧрд┐ рд╕реБрд╡рд┐рдзрд╛рд╣рд░реВ рдердкреНрди рдпрд╕рд▓рд╛рдИ рд╡рд┐рд╕реНрддрд╛рд░ рдЧрд░реНрджрдЫред IoT Hub рдмрд╛рдЯ рд╕рдиреНрджреЗрд╢рд╣рд░реВ рдкрдвреНрди рдЬрдбрд╛рди рдЧрд░реНрдиреЗ рддрд░рд┐рдХрд╛ Event Hubs рдкреНрд░рдпреЛрдЧ рдЧрд░реНрджрд╛ рдЬрд╕реНрддреИ рд╣реЛред

тЬЕ рдЕрдиреБрд╕рдиреНрдзрд╛рди рдЧрд░реНрдиреБрд╣реЛрд╕реН: [Azure Event Hubs рдбрдХреБрдореЗрдиреНрдЯреЗрд╢рди](https://docs.microsoft.com/azure/event-hubs/event-hubs-about?WT.mc_id=academic-17441-jabenn) рдорд╛ Event Hubs рдХреЛ рдЕрд╡рд▓реЛрдХрди рдкрдвреНрдиреБрд╣реЛрд╕реНред рдЖрдзрд╛рд░рднреВрдд рд╕реБрд╡рд┐рдзрд╛рд╣рд░реВ IoT Hub рд╕рдБрдЧ рдХрд╕рд░реА рддреБрд▓рдирд╛ рд╣реБрдиреНрдЫрдиреН?

IoT рдЙрдкрдХрд░рдгрд▓реЗ IoT Hub рдорд╛ рдЬрдбрд╛рди рдЧрд░реНрди, рдпрд╕рд▓реЗ рдЧреЛрдкреНрдп рдХреБрдЮреНрдЬреА рдкреНрд░рдпреЛрдЧ рдЧрд░реНрдиреБрдкрд░реНрдЫ рдЬрд╕рд▓реЗ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдЧрд░реНрджрдЫ рдХрд┐ рдХреЗрд╡рд▓ рдЕрдиреБрдорддрд┐ рдкреНрд░рд╛рдкреНрдд рдЙрдкрдХрд░рдгрд╣рд░реВрд▓реЗ рдЬрдбрд╛рди рдЧрд░реНрди рд╕рдХреНрдЫред рд╕рдиреНрджреЗрд╢рд╣рд░реВ рдкрдвреНрди рдЬрдбрд╛рди рдЧрд░реНрджрд╛ рдкрдирд┐ рдпрд╣реА рд▓рд╛рдЧреВ рд╣реБрдиреНрдЫред рддрдкрд╛рдИрдВрдХреЛ рдХреЛрдбрд▓рд╛рдИ рдЧреЛрдкреНрдп рдХреБрдЮреНрдЬреА рд╕рд╣рд┐рддрдХреЛ рдЬрдбрд╛рди рд╕реНрдЯреНрд░рд┐рдЩ рдЪрд╛рд╣рд┐рдиреНрдЫ, рд╕рд╛рдереИ IoT Hub рдХреЛ рд╡рд┐рд╡рд░рдгред

> ЁЯТБ рддрдкрд╛рдИрдВрд▓реЗ рдкреНрд░рд╛рдкреНрдд рдЧрд░реНрдиреЗ рдбрд┐рдлрд▓реНрдЯ рдЬрдбрд╛рди рд╕реНрдЯреНрд░рд┐рдЩрдорд╛ **iothubowner** рдЕрдиреБрдорддрд┐ рд╣реБрдиреНрдЫ, рдЬрд╕рд▓реЗ рдпрд╕рд▓рд╛рдИ рдкреНрд░рдпреЛрдЧ рдЧрд░реНрдиреЗ рдХреБрдиреИ рдкрдирд┐ рдХреЛрдбрд▓рд╛рдИ IoT Hub рдорд╛ рдкреВрд░реНрдг рдЕрдиреБрдорддрд┐ рджрд┐рдиреНрдЫред рдЖрджрд░реНрд╢ рд░реВрдкрдорд╛, рддрдкрд╛рдИрдВрд▓реЗ рдЖрд╡рд╢реНрдпрдХ рдиреНрдпреВрдирддрдо рд╕реНрддрд░рдХреЛ рдЕрдиреБрдорддрд┐ рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрд░ рдЬрдбрд╛рди рдЧрд░реНрдиреБрдкрд░реНрдЫред рдпреЛ рдЕрд░реНрдХреЛ рдкрд╛рдардорд╛ рд╕рдореЗрдЯрд┐рдиреЗрдЫред

рдПрдХрдкрдЯрдХ рддрдкрд╛рдИрдВрдХреЛ рдЯреНрд░рд┐рдЧрд░ рдЬрдбрд╛рди рднрдПрдкрдЫрд┐, IoT Hub рдорд╛ рдкрдард╛рдЗрдПрдХрд╛ рдкреНрд░рддреНрдпреЗрдХ рд╕рдиреНрджреЗрд╢рдХреЛ рд▓рд╛рдЧрд┐ рдлрдЩреНрдХреНрд╕рди рднрд┐рддреНрд░рдХреЛ рдХреЛрдбрд▓рд╛рдИ рдХрд▓ рдЧрд░рд┐рдиреЗрдЫ, рдЪрд╛рд╣реЗ рдХреБрди рдЙрдкрдХрд░рдгрд▓реЗ рдкрдард╛рдПрдХреЛ рд╣реЛред рдЯреНрд░рд┐рдЧрд░рд▓реЗ рд╕рдиреНрджреЗрд╢рд▓рд╛рдИ рдкреНрдпрд╛рд░рд╛рдорд┐рдЯрд░рдХреЛ рд░реВрдкрдорд╛ рдкрд╛рд╕ рдЧрд░реНрдиреЗрдЫред

### рдХрд╛рд░реНрдп - Event Hub compatible endpoint рдЬрдбрд╛рди рд╕реНрдЯреНрд░рд┐рдЩ рдкреНрд░рд╛рдкреНрдд рдЧрд░реНрдиреБрд╣реЛрд╕реН

1. VS Code рдЯрд░реНрдорд┐рдирд▓рдмрд╛рдЯ рдирд┐рдореНрди рдХрдорд╛рдгреНрдб рдЪрд▓рд╛рдЙрдиреБрд╣реЛрд╕реН рддрд╛рдХрд┐ IoT Hub рдХреЛ Event Hub compatible endpoint рдХреЛ рдЬрдбрд╛рди рд╕реНрдЯреНрд░рд┐рдЩ рдкреНрд░рд╛рдкреНрдд рдЧрд░реНрди рд╕рдХрд┐рдпреЛрд╕реН:

    ```sh
    az iot hub connection-string show --default-eventhub \
                                      --output table \
                                      --hub-name <hub_name>
    ```

    `<hub_name>` рд▓рд╛рдИ рддрдкрд╛рдИрдВрд▓реЗ IoT Hub рдХреЛ рд▓рд╛рдЧрд┐ рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрдХреЛ рдирд╛рдорд▓реЗ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрди рдЧрд░реНрдиреБрд╣реЛрд╕реНред

1. VS Code рдорд╛ `local.settings.json` рдлрд╛рдЗрд▓ рдЦреЛрд▓реНрдиреБрд╣реЛрд╕реНред `Values` рд╕реЗрдХреНрд╕рди рднрд┐рддреНрд░ рдирд┐рдореНрди рдердк рдорд╛рди рдердкреНрдиреБрд╣реЛрд╕реН:

    ```json
    "IOT_HUB_CONNECTION_STRING": "<connection string>"
    ```

    `<connection string>` рд▓рд╛рдИ рдЕрдШрд┐рд▓реНрд▓реЛ рдЪрд░рдгрдмрд╛рдЯ рдкреНрд░рд╛рдкреНрдд рдорд╛рдирд▓реЗ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрди рдЧрд░реНрдиреБрд╣реЛрд╕реНред рдпреЛ рдорд╛рдиреНрдп JSON рдмрдирд╛рдЙрди рдорд╛рдерд┐рд▓реНрд▓реЛ рд▓рд╛рдЗрди рдкрдЫрд┐ рдЕрд▓реНрдкрд╡рд┐рд░рд╛рдо рдердкреНрди рдЖрд╡рд╢реНрдпрдХ рд╣реБрдиреЗрдЫред

### рдХрд╛рд░реНрдп - рдЗрднреЗрдиреНрдЯ рдЯреНрд░рд┐рдЧрд░ рд╕рд┐рд░реНрдЬрдирд╛ рдЧрд░реНрдиреБрд╣реЛрд╕реН

рдЕрдм рддрдкрд╛рдИрдВ рдЗрднреЗрдиреНрдЯ рдЯреНрд░рд┐рдЧрд░ рд╕рд┐рд░реНрдЬрдирд╛ рдЧрд░реНрди рддрдпрд╛рд░ рд╣реБрдиреБрд╣реБрдиреНрдЫред

1. VS Code рдЯрд░реНрдорд┐рдирд▓рдмрд╛рдЯ `soil-moisture-trigger` рдлреЛрд▓реНрдбрд░ рднрд┐рддреНрд░ рдирд┐рдореНрди рдХрдорд╛рдгреНрдб рдЪрд▓рд╛рдЙрдиреБрд╣реЛрд╕реН:

    ```sh
    func new --name iot-hub-trigger --template "Azure Event Hub trigger"
    ```

    рдпрд╕рд▓реЗ `iot-hub-trigger` рдирд╛рдордХ рдирдпрд╛рдБ Function рд╕рд┐рд░реНрдЬрдирд╛ рдЧрд░реНрджрдЫред рдЯреНрд░рд┐рдЧрд░ IoT Hub рдорд╛ Event Hub compatible endpoint рдорд╛ рдЬрдбрд╛рди рд╣реБрдиреЗрдЫ, рддрд╛рдХрд┐ рддрдкрд╛рдИрдВ Event Hub рдЯреНрд░рд┐рдЧрд░ рдкреНрд░рдпреЛрдЧ рдЧрд░реНрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫред IoT Hub рдХреЛ рд▓рд╛рдЧрд┐ рдХреБрдиреИ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдЯреНрд░рд┐рдЧрд░ рдЫреИрдиред

рдпрд╕рд▓реЗ `soil-moisture-trigger` рдлреЛрд▓реНрдбрд░ рднрд┐рддреНрд░ `iot-hub-trigger` рдирд╛рдордХ рдлреЛрд▓реНрдбрд░ рд╕рд┐рд░реНрдЬрдирд╛ рдЧрд░реНрдиреЗрдЫ рдЬрд╕рдорд╛ рдирд┐рдореНрди рдлрд╛рдЗрд▓рд╣рд░реВ рд╕рдорд╛рд╡реЗрд╢ рд╣реБрдиреЗрдЫ:

* `__init__.py` - рдпреЛ Python рдХреЛрдб рдлрд╛рдЗрд▓ рд╣реЛ рдЬрд╕рдорд╛ рдЯреНрд░рд┐рдЧрд░ рд╕рдорд╛рд╡реЗрд╢ рдЫред рдпреЛ рдлреЛрд▓реНрдбрд░рд▓рд╛рдИ Python рдореЛрдбреНрдпреБрд▓рдорд╛ рдкрд░рд┐рдгрдд рдЧрд░реНрди рдорд╛рдирдХ Python рдлрд╛рдЗрд▓ рдирд╛рдо рдХрдиреНрд╡реЗрдиреНрд╕рди рдкреНрд░рдпреЛрдЧ рдЧрд░рд┐рдПрдХреЛ рдЫред

    рдпреЛ рдлрд╛рдЗрд▓рдорд╛ рдирд┐рдореНрди рдХреЛрдб рд╕рдорд╛рд╡реЗрд╢ рд╣реБрдиреЗрдЫ:

    ```python
    import logging

    import azure.functions as func


    def main(event: func.EventHubEvent):
        logging.info('Python EventHub trigger processed an event: %s',
                    event.get_body().decode('utf-8'))
    ```

    рдЯреНрд░рд┐рдЧрд░рдХреЛ рдореБрдЦреНрдп рднрд╛рдЧ `main` рдлрдЩреНрдХреНрд╕рди рд╣реЛред IoT Hub рдмрд╛рдЯ рдЗрднреЗрдиреНрдЯрд╣рд░реВ рдкреНрд░рд╛рдкреНрдд рдЧрд░реНрджрд╛ рдпреЛ рдлрдЩреНрдХреНрд╕рди рдХрд▓ рдЧрд░рд┐рдиреНрдЫред рдпрд╕ рдлрдЩреНрдХреНрд╕рдирдорд╛ `event` рдирд╛рдордХ рдкреНрдпрд╛рд░рд╛рдорд┐рдЯрд░ рд╣реБрдиреНрдЫ рдЬрд╕рд▓реЗ `EventHubEvent` рд╕рдорд╛рд╡реЗрд╢ рдЧрд░реНрджрдЫред IoT Hub рдорд╛ рд╕рдиреНрджреЗрд╢ рдкрдард╛рдЗрдПрдкрдЫрд┐, рдпреЛ рдлрдЩреНрдХреНрд╕рди `event` рдХреЛ рд░реВрдкрдорд╛ рд╕рдиреНрджреЗрд╢ рдкрд╛рд╕ рдЧрд░реНрджреИ рдХрд▓ рдЧрд░рд┐рдиреНрдЫ, рд╕рд╛рдереИ рдЕрдШрд┐рд▓реНрд▓реЛ рдкрд╛рдардорд╛ рджреЗрдЦрд┐рдПрдХрд╛ рдПрдиреЛрдЯреЗрд╕рдирд╣рд░реВ рдЬрд╕реНрддреИ рдЧреБрдгрд╣рд░реВред

    рдпреЛ рдлрдЩреНрдХреНрд╕рдирдХреЛ рдореБрдЦреНрдп рднрд╛рдЧрд▓реЗ рдЗрднреЗрдиреНрдЯрд▓рд╛рдИ рд▓рдЧ рдЧрд░реНрджрдЫред

* `function.json` - рдпрд╕рдорд╛ рдЯреНрд░рд┐рдЧрд░рдХреЛ рдХрдиреНрдлрд┐рдЧрд░реЗрд╕рди рд╕рдорд╛рд╡реЗрд╢ рдЫред рдореБрдЦреНрдп рдХрдиреНрдлрд┐рдЧрд░реЗрд╕рди `bindings` рдирд╛рдордХ рд╕реЗрдХреНрд╕рдирдорд╛ рдЫред Binding Azure Functions рд░ рдЕрдиреНрдп Azure рд╕реЗрд╡рд╛рд╣рд░реВ рдмреАрдЪрдХреЛ рдЬрдбрд╛рдирдХреЛ рд▓рд╛рдЧрд┐ рдкреНрд░рдпреЛрдЧ рдЧрд░рд┐рдиреЗ рд╢рдмреНрдж рд╣реЛред рдпреЛ рдлрдЩреНрдХреНрд╕рдирдорд╛ Event Hub рдорд╛ рдЗрдирдкреБрдЯ рдмрд╛рдЗрдиреНрдбрд┐рдЩ рдЫ - рдпреЛ Event Hub рдорд╛ рдЬрдбрд╛рди рдЧрд░реНрджрдЫ рд░ рдбреЗрдЯрд╛ рдкреНрд░рд╛рдкреНрдд рдЧрд░реНрджрдЫред

    > ЁЯТБ рддрдкрд╛рдИрдВ рдЖрдЙрдЯрдкреБрдЯ рдмрд╛рдЗрдиреНрдбрд┐рдЩ рдкрдирд┐ рдердкреНрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫ рддрд╛рдХрд┐ рдлрдЩреНрдХреНрд╕рдирдХреЛ рдЖрдЙрдЯрдкреБрдЯ рдЕрд░реНрдХреЛ рд╕реЗрд╡рд╛рдорд╛ рдкрдард╛рдЗрдпреЛрд╕реНред рдЙрджрд╛рд╣рд░рдгрдХрд╛ рд▓рд╛рдЧрд┐, рддрдкрд╛рдИрдВ рдбреЗрдЯрд╛рдмреЗрд╕рдорд╛ рдЖрдЙрдЯрдкреБрдЯ рдмрд╛рдЗрдиреНрдбрд┐рдЩ рдердкреНрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫ рд░ IoT Hub рдЗрднреЗрдиреНрдЯрд▓рд╛рдИ рдлрдЩреНрдХреНрд╕рдирдмрд╛рдЯ рдлрд░реНрдХрд╛рдЙрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫ, рд░ рдпреЛ рд╕реНрд╡рддрдГ рдбреЗрдЯрд╛рдмреЗрд╕рдорд╛ рд╕рдорд╛рд╡реЗрд╢ рд╣реБрдиреЗрдЫред

    тЬЕ рдЕрдиреБрд╕рдиреНрдзрд╛рди рдЧрд░реНрдиреБрд╣реЛрд╕реН: [Azure Functions рдЯреНрд░рд┐рдЧрд░ рд░ рдмрд╛рдЗрдиреНрдбрд┐рдЩ рдЕрд╡рдзрд╛рд░рдгрд╛рд╣рд░реВ](https://docs.microsoft.com/azure/azure-functions/functions-triggers-bindings?WT.mc_id=academic-17441-jabenn&tabs=python) рдбрдХреБрдореЗрдиреНрдЯреЗрд╢рдирдорд╛ рдмрд╛рдЗрдиреНрдбрд┐рдЩрдХреЛ рдмрд╛рд░реЗрдорд╛ рдкрдвреНрдиреБрд╣реЛрд╕реНред

    `bindings` рд╕реЗрдХреНрд╕рдирдорд╛ рдмрд╛рдЗрдиреНрдбрд┐рдЩрдХреЛ рдХрдиреНрдлрд┐рдЧрд░реЗрд╕рди рд╕рдорд╛рд╡реЗрд╢ рдЫред рдЪрд╛рд╕реЛрдХрд╛ рдорд╛рдирд╣рд░реВ рд╣реБрдиреН:

  * `"type": "eventHubTrigger"` - рдпрд╕рд▓реЗ рдлрдЩреНрдХреНрд╕рдирд▓рд╛рдИ Event Hub рдмрд╛рдЯ рдЗрднреЗрдиреНрдЯрд╣рд░реВ рд╕реБрдиреНрди рдЖрд╡рд╢реНрдпрдХ рдЫ рднрдиреА рдмрддрд╛рдЙрдБрдЫред
  * `"name": "events"` - рдпреЛ Event Hub рдЗрднреЗрдиреНрдЯрд╣рд░реВрдХреЛ рд▓рд╛рдЧрд┐ рдкреНрд░рдпреЛрдЧ рдЧрд░реНрдиреБрдкрд░реНрдиреЗ рдкреНрдпрд╛рд░рд╛рдорд┐рдЯрд░ рдирд╛рдо рд╣реЛред рдпреЛ Python рдХреЛрдбрдорд╛ `main` рдлрдЩреНрдХреНрд╕рдирдХреЛ рдкреНрдпрд╛рд░рд╛рдорд┐рдЯрд░ рдирд╛рдорд╕рдБрдЧ рдореЗрд▓ рдЦрд╛рдиреНрдЫред
  * `"direction": "in"` - рдпреЛ рдЗрдирдкреБрдЯ рдмрд╛рдЗрдиреНрдбрд┐рдЩ рд╣реЛ, Event Hub рдмрд╛рдЯ рдбреЗрдЯрд╛ рдлрдЩреНрдХреНрд╕рдирдорд╛ рдЖрдЙрдБрдЫред
  * `"connection": ""` - рдпреЛ рдЬрдбрд╛рди рд╕реНрдЯреНрд░рд┐рдЩ рдкрдвреНрди рд╕реЗрдЯрд┐рдЩрдХреЛ рдирд╛рдо рдкрд░рд┐рднрд╛рд╖рд┐рдд рдЧрд░реНрджрдЫред рд╕реНрдерд╛рдиреАрдп рд░реВрдкрдорд╛ рдЪрд▓рд╛рдЙрдБрджрд╛, рдпреЛ рд╕реЗрдЯрд┐рдЩ `local.settings.json` рдлрд╛рдЗрд▓рдмрд╛рдЯ рдкрдвреНрдиреЗрдЫред

    > ЁЯТБ рдЬрдбрд╛рди рд╕реНрдЯреНрд░рд┐рдЩ `function.json` рдлрд╛рдЗрд▓рдорд╛ рднрдгреНрдбрд╛рд░рдг рдЧрд░реНрди рд╕рдХрд┐рдБрджреИрди, рдпрд╕рд▓рд╛рдИ рд╕реЗрдЯрд┐рдЩрдмрд╛рдЯ рдкрдвреНрдиреБрдкрд░реНрдЫред рдпреЛ рддрдкрд╛рдИрдВрд▓реЗ рдЖрдлреНрдиреЛ рдЬрдбрд╛рди рд╕реНрдЯреНрд░рд┐рдЩ рдЕрдирд╛рдпрд╛рд╕реИ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдЧрд░реНрдирдмрд╛рдЯ рд░реЛрдХреНрдирдХреЛ рд▓рд╛рдЧрд┐ рд╣реЛред

1. Azure Functions рдЯреЗрдореНрдкреНрд▓реЗрдЯрдорд╛ [рдПрдХ рдмрдЧ](https://github.com/Azure/azure-functions-templates/issues/1250) рдХреЛ рдХрд╛рд░рдг, `function.json` рдорд╛ `cardinality` рдлрд┐рд▓реНрдбрдХреЛ рдорд╛рди рдЧрд▓рдд рдЫред рдпрд╕рд▓рд╛рдИ `many` рдмрд╛рдЯ `one` рдорд╛ рдЕрдкрдбреЗрдЯ рдЧрд░реНрдиреБрд╣реЛрд╕реН:

    ```json
    "cardinality": "one",
    ```

1. `function.json` рдлрд╛рдЗрд▓рдорд╛ `"connection"` рдХреЛ рдорд╛рдирд▓рд╛рдИ `local.settings.json` рдлрд╛рдЗрд▓рдорд╛ рдердкрд┐рдПрдХреЛ рдирдпрд╛рдБ рдорд╛рдирдорд╛ рдкреЛрдЗрдиреНрдЯ рдЧрд░реНрди рдЕрдкрдбреЗрдЯ рдЧрд░реНрдиреБрд╣реЛрд╕реН:

    ```json
    "connection": "IOT_HUB_CONNECTION_STRING",
    ```

    > ЁЯТБ рдпрд╛рдж рдЧрд░реНрдиреБрд╣реЛрд╕реН - рдпрд╕рд▓реЗ рд╕реЗрдЯрд┐рдЩрдорд╛ рдкреЛрдЗрдиреНрдЯ рдЧрд░реНрдиреБрдкрд░реНрдЫ, рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдЬрдбрд╛рди рд╕реНрдЯреНрд░рд┐рдЩ рд╕рдорд╛рд╡реЗрд╢ рдЧрд░реНрдиреБрдкрд░реНрджреИрдиред

1. рдЬрдбрд╛рди рд╕реНрдЯреНрд░рд┐рдЩрдорд╛ `eventHubName` рдорд╛рди рд╕рдорд╛рд╡реЗрд╢ рдЫ, рддреНрдпрд╕реИрд▓реЗ `function.json` рдлрд╛рдЗрд▓рдорд╛ рдпрд╕рдХреЛ рдорд╛рди рдЦрд╛рд▓реА рд╕реНрдЯреНрд░рд┐рдЩрдорд╛ рдЕрдкрдбреЗрдЯ рдЧрд░реНрди рдЖрд╡рд╢реНрдпрдХ рдЫ:

    ```json
    "eventHubName": "",
    ```

### рдХрд╛рд░реНрдп - рдЗрднреЗрдиреНрдЯ рдЯреНрд░рд┐рдЧрд░ рдЪрд▓рд╛рдЙрдиреБрд╣реЛрд╕реН

1. рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдЧрд░реНрдиреБрд╣реЛрд╕реН рдХрд┐ рддрдкрд╛рдИрдВ IoT Hub рдЗрднреЗрдиреНрдЯ рдореЛрдирд┐рдЯрд░ рдЪрд▓рд╛рдЗрд░рд╣рдиреБрднрдПрдХреЛ рдЫреИрдиред рдпрджрд┐ рдпреЛ Functions рдПрдкрд╕рдБрдЧреИ рдЪрд▓рд┐рд░рд╣реЗрдХреЛ рдЫ рднрдиреЗ, Functions рдПрдк рдЬрдбрд╛рди рдЧрд░реНрди рд░ рдЗрднреЗрдиреНрдЯрд╣рд░реВ рдЙрдкрднреЛрдЧ рдЧрд░реНрди рд╕рдХреНрд╖рдо рд╣реБрдиреЗрдЫреИрдиред

    > ЁЯТБ рдзреЗрд░реИ рдПрдкреНрд╕ IoT Hub endpoints рдорд╛ рд╡рд┐рднрд┐рдиреНрди *consumer groups* рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрд░ рдЬрдбрд╛рди рдЧрд░реНрди рд╕рдХреНрдЫрдиреНред рдпреА рдЕрд░реНрдХреЛ рдкрд╛рдардорд╛ рд╕рдореЗрдЯрд┐рдиреЗрдЫрдиреНред

1. Functions рдПрдк рдЪрд▓рд╛рдЙрди, VS Code рдЯрд░реНрдорд┐рдирд▓рдмрд╛рдЯ рдирд┐рдореНрди рдХрдорд╛рдгреНрдб рдЪрд▓рд╛рдЙрдиреБрд╣реЛрд╕реН:

    ```sh
    func start
    ```

    Functions рдПрдк рд╕реБрд░реБ рд╣реБрдиреЗрдЫ, рд░ `iot-hub-trigger` рдлрдЩреНрдХреНрд╕рди рдкрддреНрддрд╛ рд▓рдЧрд╛рдЙрдиреЗрдЫред рдпрд╕рд▓реЗ IoT Hub рдорд╛ рдЕрдШрд┐рд▓реНрд▓реЛ рджрд┐рдирдорд╛ рдкрдард╛рдЗрдПрдХрд╛ рдХреБрдиреИ рдкрдирд┐ рдЗрднреЗрдиреНрдЯрд╣рд░реВ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдЧрд░реНрдиреЗрдЫред

    ```output
    (.venv) тЮЬ  soil-moisture-trigger func start
    Found Python version 3.9.1 (python3).
    
    Azure Functions Core Tools
    Core Tools Version:       3.0.3442 Commit hash: 6bfab24b2743f8421475d996402c398d2fe4a9e0  (64-bit)
    Function Runtime Version: 3.0.15417.0
    
    Functions:
    
            iot-hub-trigger: eventHubTrigger
    
    For detailed output, run func with --verbose flag.
    [2021-05-05T02:44:07.517Z] Worker process started and initialized.
    [2021-05-05T02:44:09.202Z] Executing 'Functions.iot-hub-trigger' (Reason='(null)', Id=802803a5-eae9-4401-a1f4-176631456ce4)
    [2021-05-05T02:44:09.205Z] Trigger Details: PartitionId: 0, Offset: 1011240-1011632, EnqueueTimeUtc: 2021-05-04T19:04:04.2030000Z-2021-05-04T19:04:04.3900000Z, SequenceNumber: 2546-2547, Count: 2
    [2021-05-05T02:44:09.352Z] Python EventHub trigger processed an event: {"soil_moisture":628}
    [2021-05-05T02:44:09.354Z] Python EventHub trigger processed an event: {"soil_moisture":624}
    [2021-05-05T02:44:09.395Z] Executed 'Functions.iot-hub-trigger' (Succeeded, Id=802803a5-eae9-4401-a1f4-176631456ce4, Duration=245ms)
    ```

    рдкреНрд░рддреНрдпреЗрдХ рдлрдЩреНрдХреНрд╕рди рдХрд▓ `Executing 'Functions.iot-hub-trigger'`/`Executed 'Functions.iot-hub-trigger'` рдмреНрд▓рдХрдорд╛ рдШреЗрд░рд┐рдПрдХреЛ рд╣реБрдиреЗрдЫ, рддрд╛рдХрд┐ рдкреНрд░рддреНрдпреЗрдХ рдлрдЩреНрдХреНрд╕рди рдХрд▓рдорд╛ рдХрддрд┐ рд╕рдиреНрджреЗрд╢рд╣рд░реВ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдЧрд░рд┐рдпреЛ рднрдиреЗрд░ рджреЗрдЦреНрди рд╕рдХрд┐рдпреЛрд╕реНред

1. рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдЧрд░реНрдиреБрд╣реЛрд╕реН рдХрд┐ рддрдкрд╛рдИрдВрдХреЛ IoT рдЙрдкрдХрд░рдг рдЪрд▓рд┐рд░рд╣реЗрдХреЛ рдЫред рддрдкрд╛рдИрдВ Functions рдПрдкрдорд╛ рдирдпрд╛рдБ рдорд╛рдЯреЛрдХреЛ рдЪрд┐рд╕реНрдпрд╛рди рд╕рдиреНрджреЗрд╢рд╣рд░реВ рджреЗрдЦреНрдиреБрд╣реБрдиреЗрдЫред

1. Functions рдПрдк рдмрдиреНрдж рдЧрд░реЗрд░ рдкреБрдирдГ рд╕реБрд░реБ рдЧрд░реНрдиреБрд╣реЛрд╕реНред рддрдкрд╛рдИрдВ рджреЗрдЦреНрдиреБрд╣реБрдиреЗрдЫ рдХрд┐ рдпрд╕рд▓реЗ рдЕрдШрд┐рд▓реНрд▓реЛ рд╕рдиреНрджреЗрд╢рд╣рд░реВ рдкреБрдирдГ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдЧрд░реНрдиреЗрдЫреИрди, рдХреЗрд╡рд▓ рдирдпрд╛рдБ рд╕рдиреНрджреЗрд╢рд╣рд░реВ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдЧрд░реНрдиреЗрдЫред

> ЁЯТБ VS Code рд▓реЗ рддрдкрд╛рдИрдВрдХреЛ Functions рдХреЛ рдбрд┐рдмрдЧрд┐рдЩрд▓рд╛рдИ рдкрдирд┐ рд╕рдорд░реНрдерди рдЧрд░реНрджрдЫред рддрдкрд╛рдИрдВ рдкреНрд░рддреНрдпреЗрдХ рд▓рд╛рдЗрдирдХреЛ рд╕реБрд░реБрд╡рд╛рддрдорд╛ рдХреНрд▓рд┐рдХ рдЧрд░реЗрд░, рд╡рд╛ рдХреЛрдбрдХреЛ рд▓рд╛рдЗрдирдорд╛ рдХрд░реНрд╕рд░ рд░рд╛рдЦреЗрд░ *Run -> Toggle breakpoint* рдЪрдпрди рдЧрд░реЗрд░, рд╡рд╛ `F9` рдерд┐рдЪреЗрд░ рдмреНрд░реЗрдХ рдкреЛрдЗрдиреНрдЯ рд╕реЗрдЯ рдЧрд░реНрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫред рддрдкрд╛рдИрдВ *Run -> Start debugging* рдЪрдпрди рдЧрд░реЗрд░, `F5` рдерд┐рдЪреЗрд░, рд╡рд╛ *Run and debug* рдкреНрдпрд╛рди рдЪрдпрди рдЧрд░реЗрд░ рд░ **Start debugging** рдмрдЯрди рдЪрдпрди рдЧрд░реЗрд░ рдбрд┐рдмрдЧрд░ рд╕реБрд░реБ рдЧрд░реНрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫред рдпрд╕рд▓реЗ рддрдкрд╛рдИрдВрд▓рд╛рдИ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдЧрд░рд┐рдПрдХрд╛ рдЗрднреЗрдиреНрдЯрд╣рд░реВрдХреЛ рд╡рд┐рд╡рд░рдг рд╣реЗрд░реНрди рдЕрдиреБрдорддрд┐ рджрд┐рдиреНрдЫред

#### рд╕рдорд╕реНрдпрд╛ рд╕рдорд╛рдзрд╛рди

* рдпрджрд┐ рддрдкрд╛рдИрдВрд▓рд╛рдИ рдирд┐рдореНрди рддреНрд░реБрдЯрд┐ рдкреНрд░рд╛рдкреНрдд рд╣реБрдиреНрдЫ:

    ```output
    The listener for function 'Functions.iot-hub-trigger' was unable to start. Microsoft.WindowsAzure.Storage: Connection refused. System.Net.Http: Connection refused. System.Private.CoreLib: Connection refused.
    ```

    рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдЧрд░реНрдиреБрд╣реЛрд╕реН рдХрд┐ Azurite рдЪрд▓рд┐рд░рд╣реЗрдХреЛ рдЫ рд░ рддрдкрд╛рдИрдВрд▓реЗ `local.settings.json` рдлрд╛рдЗрд▓рдорд╛ `AzureWebJobsStorage` рд▓рд╛рдИ `UseDevelopmentStorage=true` рд╕реЗрдЯ рдЧрд░реНрдиреБрднрдПрдХреЛ рдЫред

* рдпрджрд┐ рддрдкрд╛рдИрдВрд▓рд╛рдИ рдирд┐рдореНрди рддреНрд░реБрдЯрд┐ рдкреНрд░рд╛рдкреНрдд рд╣реБрдиреНрдЫ:

    ```output
    System.Private.CoreLib: Exception while executing function: Functions.iot-hub-trigger. System.Private.CoreLib: Result: Failure Exception: AttributeError: 'list' object has no attribute 'get_body'
    ```

    рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдЧрд░реНрдиреБрд╣реЛрд╕реН рдХрд┐ рддрдкрд╛рдИрдВрд▓реЗ `function.json` рдлрд╛рдЗрд▓рдорд╛ `cardinality` рд▓рд╛рдИ `one` рдорд╛ рд╕реЗрдЯ рдЧрд░реНрдиреБрднрдПрдХреЛ рдЫред

* рдпрджрд┐ рддрдкрд╛рдИрдВрд▓рд╛рдИ рдирд┐рдореНрди рддреНрд░реБрдЯрд┐ рдкреНрд░рд╛рдкреНрдд рд╣реБрдиреНрдЫ:

    ```output
    Azure.Messaging.EventHubs: The path to an Event Hub may be specified as part of the connection string or as a separate value, but not both.  Please verify that your connection string does not have the `EntityPath` token if you are passing an explicit Event Hub name. (Parameter 'connectionString').
    ```

    рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдЧрд░реНрдиреБрд╣реЛрд╕реН рдХрд┐ рддрдкрд╛рдИрдВрд▓реЗ `function.json` рдлрд╛рдЗрд▓рдорд╛ `eventHubName` рд▓рд╛рдИ рдЦрд╛рд▓реА рд╕реНрдЯреНрд░рд┐рдЩрдорд╛ рд╕реЗрдЯ рдЧрд░реНрдиреБрднрдПрдХреЛ рдЫред

## Serverless рдХреЛрдбрдмрд╛рдЯ рдкреНрд░рддреНрдпрдХреНрд╖ рд╡рд┐рдзрд┐ рдЕрдиреБрд░реЛрдзрд╣рд░реВ рдкрдард╛рдЙрдиреБрд╣реЛрд╕реН

рдЕрд╣рд┐рд▓реЗрд╕рдореНрдо рддрдкрд╛рдИрдВрдХреЛ Functions рдПрдкрд▓реЗ Event Hub compatible endpoint рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрд░ IoT Hub рдмрд╛рдЯ рд╕рдиреНрджреЗрд╢рд╣рд░реВ рд╕реБрдиреНрджреИрдЫред рдЕрдм рддрдкрд╛рдИрдВрд▓реЗ IoT рдЙрдкрдХрд░рдгрдорд╛ рдЖрджреЗрд╢рд╣рд░реВ рдкрдард╛рдЙрди рдЖрд╡рд╢реНрдпрдХ рдЫред рдпреЛ IoT Hub рдорд╛ *Registry Manager* рдорд╛рд░реНрдлрдд рдЬрдбрд╛рди рдЧрд░реЗрд░ рдЧрд░рд┐рдиреНрдЫред Registry Manager рдПрдХ рдЙрдкрдХрд░рдг рд╣реЛ рдЬрд╕рд▓реЗ рддрдкрд╛рдИрдВрд▓рд╛рдИ IoT Hub рдорд╛ рджрд░реНрддрд╛ рднрдПрдХрд╛ рдЙрдкрдХрд░рдгрд╣рд░реВ рд╣реЗрд░реНрди рд░ рддреА рдЙрдкрдХрд░рдгрд╣рд░реВрд╕рдБрдЧ рдХреНрд▓рд╛рдЙрдбрдмрд╛рдЯ рдЙрдкрдХрд░рдгрдорд╛ рд╕рдиреНрджреЗрд╢рд╣рд░реВ рдкрдард╛рдПрд░, рдкреНрд░рддреНрдпрдХреНрд╖ рд╡рд┐рдзрд┐ рдЕрдиреБрд░реЛрдзрд╣рд░реВ рдкрдард╛рдПрд░ рд╡рд╛ рдЙрдкрдХрд░рдг рдЯреНрд╡рд┐рди рдЕрдкрдбреЗрдЯ рдЧрд░реЗрд░ рд╕рдВрд╡рд╛рдж рдЧрд░реНрди рдЕрдиреБрдорддрд┐ рджрд┐рдиреНрдЫред рддрдкрд╛рдИрдВ рдпрд╕рд▓рд╛рдИ IoT Hub рдмрд╛рдЯ рдЙрдкрдХрд░рдгрд╣рд░реВ рджрд░реНрддрд╛ рдЧрд░реНрди, рдЕрдкрдбреЗрдЯ рдЧрд░реНрди рд╡рд╛ рдореЗрдЯрд╛рдЙрди рдкрдирд┐ рдкреНрд░рдпреЛрдЧ рдЧрд░реНрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫред

Registry Manager рдорд╛ рдЬрдбрд╛рди рдЧрд░реНрди, рддрдкрд╛рдИрдВрд▓рд╛рдИ рдЬрдбрд╛рди рд╕реНрдЯреНрд░рд┐рдЩ рдЪрд╛рд╣рд┐рдиреНрдЫред

### рдХрд╛рд░реНрдп - Registry Manager рдЬрдбрд╛рди рд╕реНрдЯреНрд░рд┐рдЩ рдкреНрд░рд╛рдкреНрдд рдЧрд░реНрдиреБрд╣реЛрд╕реН

1. рдЬрдбрд╛рди рд╕реНрдЯреНрд░рд┐рдЩ рдкреНрд░рд╛рдкреНрдд рдЧрд░реНрди, рдирд┐рдореНрди рдХрдорд╛рдгреНрдб рдЪрд▓рд╛рдЙрдиреБрд╣реЛрд╕реН:

    ```sh
    az iot hub connection-string show --policy-name service \
                                      --output table \
                                      --hub-name <hub_name>
    ```

    `<hub_name>` рд▓рд╛рдИ рддрдкрд╛рдИрдВрд▓реЗ IoT Hub рдХреЛ рд▓рд╛рдЧрд┐ рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрдХреЛ рдирд╛рдорд▓реЗ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрди рдЧрд░реНрдиреБрд╣реЛрд╕реНред

    рдЬрдбрд╛рди рд╕реНрдЯреНрд░рд┐рдЩ *ServiceConnect* рдиреАрддрд┐ рдХреЛ рд▓рд╛рдЧрд┐ `--policy-name service` рдкреНрдпрд╛рд░рд╛рдорд┐рдЯрд░ рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрд░ рдЕрдиреБрд░реЛрдз рдЧрд░рд┐рдПрдХреЛ рдЫред рдЬрдм рддрдкрд╛рдИрдВ рдЬрдбрд╛рди рд╕реНрдЯреНрд░рд┐рдЩ рдЕрдиреБрд░реЛрдз рдЧрд░реНрдиреБрд╣реБрдиреНрдЫ, рддрдкрд╛рдИрдВрд▓реЗ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдЧрд░реНрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫ рдХрд┐ рдЙрдХреНрдд рдЬрдбрд╛рди рд╕реНрдЯреНрд░рд┐рдЩрд▓реЗ рдХреЗ рдЕрдиреБрдорддрд┐ рджрд┐рдиреЗрдЫред ServiceConnect рдиреАрддрд┐рд▓реЗ рддрдкрд╛рдИрдВрдХреЛ рдХреЛрдбрд▓рд╛рдИ IoT рдЙрдкрдХрд░рдгрд╣рд░реВрд╕рдБрдЧ рдЬрдбрд╛рди рдЧрд░реНрди рд░ рд╕рдиреНрджреЗрд╢рд╣рд░реВ рдкрдард╛рдЙрди рдЕрдиреБрдорддрд┐ рджрд┐рдиреНрдЫред

    тЬЕ рдЕрдиреБрд╕рдиреНрдзрд╛рди рдЧрд░реНрдиреБрд╣реЛрд╕реН: [IoT Hub рдЕрдиреБрдорддрд┐ рдбрдХреБрдореЗрдиреНрдЯреЗрд╢рди](https://docs.microsoft.com/azure/iot-hub/iot-hub-devguide-security#iot-hub-permissions?WT.mc_id=academic-17441-jabenn) рдорд╛ рд╡рд┐рднрд┐рдиреНрди рдиреАрддрд┐рд╣рд░реВрдХреЛ рдмрд╛рд░реЗрдорд╛ рдкрдвреНрдиреБрд╣реЛрд╕реНред

1. VS Code рдорд╛ `local.settings.json` рдлрд╛рдЗрд▓ рдЦреЛрд▓реНрдиреБрд╣реЛрд╕реНред `Values` рд╕реЗрдХреНрд╕рди рднрд┐рддреНрд░ рдирд┐рдореНрди рдердк рдорд╛рди рдердкреНрдиреБрд╣реЛрд╕реН:

    ```json
    "REGISTRY_MANAGER_CONNECTION_STRING": "<connection string>"
    ```

    `<connection string>` рд▓рд╛рдИ рдЕрдШрд┐рд▓реНрд▓реЛ рдЪрд░рдгрдмрд╛рдЯ рдкреНрд░рд╛рдкреНрдд рдорд╛рдирд▓реЗ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрди рдЧрд░реНрдиреБрд╣реЛрд╕реНред рдпреЛ рдорд╛рдиреНрдп JSON рдмрдирд╛рдЙрди рдорд╛рдерд┐рд▓реНрд▓реЛ рд▓рд╛рдЗрди рдкрдЫрд┐ рдЕрд▓реНрдкрд╡рд┐рд░рд╛рдо рдердкреНрди рдЖрд╡рд╢реНрдпрдХ рд╣реБрдиреЗрдЫред

### рдХрд╛рд░реНрдп - рдЙрдкрдХрд░рдгрдорд╛ рдкреНрд░рддреНрдпрдХреНрд╖ рд╡рд┐рдзрд┐ рдЕрдиреБрд░реЛрдз рдкрдард╛рдЙрдиреБрд╣реЛрд╕реН

1. Registry Manager рдХреЛ рд▓рд╛рдЧрд┐ SDK Pip рдкреНрдпрд╛рдХреЗрдЬ рдорд╛рд░реНрдлрдд рдЙрдкрд▓рдмреНрдз рдЫред `requirements.txt` рдлрд╛рдЗрд▓рдорд╛ рдирд┐рдореНрди рд▓рд╛рдЗрди рдердкреНрдиреБрд╣реЛрд╕реН рддрд╛рдХрд┐ рдпрд╕ рдкреНрдпрд╛рдХреЗрдЬрдорд╛ рдирд┐рд░реНрднрд░рддрд╛ рдердкреНрди рд╕рдХрд┐рдпреЛрд╕реН:

    ```sh
    azure-iot-hub
    ```

1. рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдЧрд░реНрдиреБрд╣реЛрд╕реН рдХрд┐ VS Code рдЯрд░реНрдорд┐рдирд▓рдорд╛ рднрд░реНрдЪреБрдЕрд▓ рд╡рд╛рддрд╛рд╡рд░рдг рд╕рдХреНрд░рд┐рдп рдЫ, рд░ Pip рдкреНрдпрд╛рдХреЗрдЬрд╣рд░реВ рд╕реНрдерд╛рдкрдирд╛ рдЧрд░реНрди рдирд┐рдореНрди рдХрдорд╛рдгреНрдб рдЪрд▓рд╛рдЙрдиреБрд╣реЛрд╕реН:

    ```sh
    pip install -r requirements.txt
    ```

1. `__init__.py` рдлрд╛рдЗрд▓рдорд╛ рдирд┐рдореНрди рдЗрдореНрдкреЛрд░реНрдЯрд╣рд░реВ рдердкреНрдиреБрд╣реЛрд╕реН:

    ```python
    import json
    import os
    from azure.iot.hub import IoTHubRegistryManager
    from azure.iot.hub.models import CloudToDeviceMethod
    ```

    рдпрд╕рд▓реЗ рдХреЗрд╣реА рдкреНрд░рдгрд╛рд▓реА рдкреБрд╕реНрддрдХрд╛рд▓рдпрд╣рд░реВ, рд╕рд╛рдереИ Registry Manager рд╕рдБрдЧ рдЕрдиреНрддрд░рдХреНрд░рд┐рдпрд╛ рдЧрд░реНрди рд░ рдкреНрд░рддреНрдпрдХреНрд╖ рд╡рд┐рдзрд┐ рдЕрдиреБрд░реЛрдзрд╣рд░реВ рдкрдард╛рдЙрди рдкреБрд╕реНрддрдХрд╛рд▓рдпрд╣рд░реВ рдЖрдпрд╛рдд рдЧрд░реНрджрдЫред

1. `main` рд╡рд┐рдзрд┐ рднрд┐рддреНрд░рдХреЛ рдХреЛрдб рд╣рдЯрд╛рдЙрдиреБрд╣реЛрд╕реН, рддрд░ рд╡рд┐рдзрд┐ рдЖрдлреИрдВ рд░рд╛рдЦреНрдиреБрд╣реЛрд╕реНред

1. `main` рд╡рд┐рдзрд┐рдорд╛ рдирд┐рдореНрди рдХреЛрдб рдердкреНрдиреБрд╣реЛрд╕реН:

    ```python
    body = json.loads(event.get_body().decode('utf-8'))
    device_id = event.iothub_metadata['connection-device-id']

    logging.info(f'Received message: {body} from {device_id}')
    ```

    рдпрд╕ рдХреЛрдбрд▓реЗ рдЗрднреЗрдиреНрдЯрдХреЛ рд╢рд░реАрд░рд▓рд╛рдИ рдирд┐рдХрд╛рд▓реНрдЫ рдЬрд╕рд▓реЗ IoT рдЙрдкрдХрд░рдгрд▓реЗ рдкрдард╛рдПрдХреЛ JSON рд╕рдиреНрджреЗрд╢ рд╕рдорд╛рд╡реЗрд╢ рдЧрд░реНрджрдЫред

    рддреНрдпрд╕рдкрдЫрд┐ рдпреЛ рд╕рдиреНрджреЗрд╢рд╕рдБрдЧ рдкрд╛рд╕ рдЧрд░рд┐рдПрдХрд╛ рдПрдиреЛрдЯреЗрд╕рдирд╣рд░реВрдмрд╛рдЯ рдЙрдкрдХрд░рдг ID рдкреНрд░рд╛рдкреНрдд рдЧрд░реНрджрдЫред рдЗрднреЗрдиреНрдЯрдХреЛ рд╢рд░реАрд░рд▓реЗ рдЯреЗрд▓рд┐рдореЗрдЯреНрд░реАрдХреЛ рд░реВрдкрдорд╛ рдкрдард╛рдЗрдПрдХреЛ рд╕рдиреНрджреЗрд╢ рд╕рдорд╛рд╡реЗрд╢ рдЧрд░реНрджрдЫ, `iothub_metadata` рдбрд┐рдХреНрд╕рдирд░реАрд▓реЗ IoT Hub рджреНрд╡рд╛рд░рд╛ рд╕реЗрдЯ рдЧрд░рд┐рдПрдХрд╛ рдЧреБрдгрд╣рд░реВ рд╕рдорд╛рд╡реЗрд╢ рдЧрд░реНрджрдЫ рдЬрд╕реНрддреИ рдкрдард╛рдЙрдиреЗ рдЙрдкрдХрд░рдгрдХреЛ ID рд░ рд╕рдиреНрджреЗрд╢ рдкрдард╛рдЗрдПрдХреЛ рд╕рдордпред

    рдпреЛ рдЬрд╛рдирдХрд╛рд░реА рд▓рдЧ рдЧрд░рд┐рдиреНрдЫред рддрдкрд╛рдИрдВрд▓реЗ Functions рдПрдк рд╕реНрдерд╛рдиреАрдп рд░реВрдкрдорд╛ рдЪрд▓рд╛рдЙрдБрджрд╛ рдпреЛ рд▓рдЧрд┐рдЩ рдЯрд░реНрдорд┐рдирд▓рдорд╛ рджреЗрдЦреНрдиреБрд╣реБрдиреЗрдЫред

1. рдпрд╕рдХреЛ рддрд▓ рдирд┐рдореНрди рдХреЛрдб рдердкреНрдиреБрд╣реЛрд╕реН:

    ```python
    soil_moisture = body['soil_moisture']

    if soil_moisture > 450:
        direct_method = CloudToDeviceMethod(method_name='relay_on', payload='{}')
    else:
        direct_method = CloudToDeviceMethod(method_name='relay_off', payload='{}')
    ```

    рдпрд╕ рдХреЛрдбрд▓реЗ рд╕рдиреНрджреЗрд╢рдмрд╛рдЯ рдорд╛рдЯреЛрдХреЛ рдЪрд┐рд╕реНрдпрд╛рди рдкреНрд░рд╛рдкреНрдд рдЧрд░реНрджрдЫред рддреНрдпрд╕рдкрдЫрд┐ рдпреЛ рдорд╛рдЯреЛрдХреЛ рдЪрд┐рд╕реНрдпрд╛рди рдЬрд╛рдБрдЪ рдЧрд░реНрджрдЫ, рд░ рдорд╛рдирдХреЛ рдЖрдзрд╛рд░рдорд╛ `relay_on` рд╡рд╛ `relay_off` рдкреНрд░рддреНрдпрдХреНрд╖ рд╡рд┐рдзрд┐ рдЕрдиреБрд░реЛрдзрдХреЛ рд▓рд╛рдЧрд┐ рд╕рд╣рд╛рдпрдХ рд╡рд░реНрдЧ рд╕рд┐рд░реНрдЬрдирд╛ рдЧрд░реНрджрдЫред рд╡рд┐рдзрд┐ рдЕрдиреБрд░реЛрдзрд▓рд╛рдИ рдкреЗрд▓реЛрдб рдЖрд╡рд╢реНрдпрдХ рдЫреИрди, рддреНрдпрд╕реИрд▓реЗ рдЦрд╛рд▓реА JSON рдбрдХреБрдореЗрдиреНрдЯ рдкрдард╛рдЗрдиреНрдЫред

1. рдпрд╕рдХреЛ рддрд▓ рдирд┐рдореНрди рдХреЛрдб рдердкреНрдиреБрд╣реЛрд╕реН:

    ```python
    logging.info(f'Sending direct method request for {direct_method.method_name} for device {device_id}')

    registry_manager_connection_string = os.environ['REGISTRY_MANAGER_CONNECTION_STRING']
    registry_manager = IoTHubRegistryManager(registry_manager_connection_string)
    ```
рдпреЛ рдХреЛрдбрд▓реЗ `local.settings.json` рдлрд╛рдЗрд▓рдмрд╛рдЯ `REGISTRY_MANAGER_CONNECTION_STRING` рд▓реЛрдб рдЧрд░реНрджрдЫред рдпрд╕ рдлрд╛рдЗрд▓рдХрд╛ рдорд╛рдирд╣рд░реВ рд╡рд╛рддрд╛рд╡рд░рдгреАрдп рдЪрд░рд╣рд░реВрдХрд╛ рд░реВрдкрдорд╛ рдЙрдкрд▓рдмреНрдз рдЧрд░рд╛рдЗрдиреНрдЫрдиреН, рд░ рдпреАрд▓рд╛рдИ `os.environ` рдлрдВрдХреНрд╢рди рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрд░ рдкрдвреНрди рд╕рдХрд┐рдиреНрдЫ, рдЬреБрди рд╕рдмреИ рд╡рд╛рддрд╛рд╡рд░рдгреАрдп рдЪрд░рд╣рд░реВрдХреЛ рдбрд┐рдХреНрд╕рдирд░реА рдлрд░реНрдХрд╛рдЙрдБрдЫред

> ЁЯТБ рдЬрдм рдпреЛ рдХреЛрдб рдХреНрд▓рд╛рдЙрдбрдорд╛ рдбрд┐рдкреНрд▓реЛрдп рдЧрд░рд┐рдиреНрдЫ, `local.settings.json` рдлрд╛рдЗрд▓рдХрд╛ рдорд╛рдирд╣рд░реВ *Application Settings* рдХрд╛ рд░реВрдкрдорд╛ рд╕реЗрдЯ рдЧрд░рд┐рдиреНрдЫ, рд░ рдпреАрд▓рд╛рдИ рд╡рд╛рддрд╛рд╡рд░рдгреАрдп рдЪрд░рд╣рд░реВрдмрд╛рдЯ рдкрдвреНрди рд╕рдХрд┐рдиреНрдЫред

рддреНрдпрд╕рдкрдЫрд┐ рдХреЛрдбрд▓реЗ рдХрдиреЗрдХреНрд╢рди рд╕реНрдЯреНрд░рд┐рдЩ рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрд░ Registry Manager рд╣реЗрд▓реНрдкрд░ рдХреНрд▓рд╛рд╕рдХреЛ рдПрдЙрдЯрд╛ рдЙрджрд╛рд╣рд░рдг рд╕рд┐рд░реНрдЬрдирд╛ рдЧрд░реНрджрдЫред

1. рдпрд╕рдкрдЫрд┐ рддрд▓рдХреЛ рдХреЛрдб рдердкреНрдиреБрд╣реЛрд╕реН:

    ```python
    registry_manager.invoke_device_method(device_id, direct_method)

    logging.info('Direct method request sent!')
    ```

    рдпреЛ рдХреЛрдбрд▓реЗ рд░рдЬрд┐рд╕реНрдЯреНрд░реА рдореНрдпрд╛рдиреЗрдЬрд░рд▓рд╛рдИ рдЯреЗрд▓рд┐рдореЗрдЯреНрд░реА рдкрдард╛рдЙрдиреЗ рдЙрдкрдХрд░рдгрдорд╛ рдбрд╛рдЗрд░реЗрдХреНрдЯ рдореЗрдердб рдЕрдиреБрд░реЛрдз рдкрдард╛рдЙрди рднрдиреНрдЫред

    > ЁЯТБ рдкрд╣рд┐рд▓реЗрдХрд╛ рдкрд╛рдард╣рд░реВрдорд╛ рддрдкрд╛рдИрдВрд▓реЗ MQTT рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрд░ рдмрдирд╛рдПрдХреЛ рдПрдкрдХреЛ рд╕рдВрд╕реНрдХрд░рдгрд╣рд░реВрдорд╛, рд░рд┐рд▓реЗ рдирд┐рдпрдиреНрддреНрд░рдг рдЖрджреЗрд╢рд╣рд░реВ рд╕рдмреИ рдЙрдкрдХрд░рдгрд╣рд░реВрдорд╛ рдкрдард╛рдЗрдиреНрдереНрдпреЛред рдХреЛрдбрд▓реЗ рдорд╛рдиреНрдереНрдпреЛ рдХрд┐ рддрдкрд╛рдИрдВрд╕рдБрдЧ рдХреЗрд╡рд▓ рдПрдЙрдЯрд╛ рдЙрдкрдХрд░рдг рд╣реБрдиреЗрдЫред рдпреЛ рд╕рдВрд╕реНрдХрд░рдгрдХреЛ рдХреЛрдбрд▓реЗ рдореЗрдердб рдЕрдиреБрд░реЛрдзрд▓рд╛рдИ рдПрдХрд▓ рдЙрдкрдХрд░рдгрдорд╛ рдкрдард╛рдЙрдБрдЫ, рддреНрдпрд╕реИрд▓реЗ рдпрджрд┐ рддрдкрд╛рдИрдВрд╕рдБрдЧ рдзреЗрд░реИ рд╕реЗрдЯрдЕрдкрд╣рд░реВ рдЫрдиреН рднрдиреЗ рдпреЛ рд╕рд╣реА рдЙрдкрдХрд░рдгрдорд╛ рд╕рд╣реА рдбрд╛рдЗрд░реЗрдХреНрдЯ рдореЗрдердб рдЕрдиреБрд░реЛрдз рдкрдард╛рдЙрди рдХрд╛рдо рдЧрд░реНрджрдЫред

1. Functions рдПрдк рдЪрд▓рд╛рдЙрдиреБрд╣реЛрд╕реН, рд░ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдЧрд░реНрдиреБрд╣реЛрд╕реН рдХрд┐ рддрдкрд╛рдИрдВрдХреЛ IoT рдЙрдкрдХрд░рдгрд▓реЗ рдбреЗрдЯрд╛ рдкрдард╛рдЗрд░рд╣реЗрдХреЛ рдЫред рддрдкрд╛рдИрдВрд▓реЗ рд╕рдиреНрджреЗрд╢рд╣рд░реВ рдкреНрд░рд╢реЛрдзрди рднрдЗрд░рд╣реЗрдХреЛ рд░ рдбрд╛рдЗрд░реЗрдХреНрдЯ рдореЗрдердб рдЕрдиреБрд░реЛрдзрд╣рд░реВ рдкрдард╛рдЗрдПрдХреЛ рджреЗрдЦреНрдиреБрд╣реБрдиреЗрдЫред рдорд╛рдЯреЛрдХреЛ рдирдореА рд╕реЗрдиреНрд╕рд░рд▓рд╛рдИ рдорд╛рдЯреЛрднрд┐рддреНрд░ рд░ рдмрд╛рд╣рд┐рд░ рд╕рд╛рд░реЗрд░ рдорд╛рдирд╣рд░реВ рдкрд░рд┐рд╡рд░реНрддрди рднрдПрдХреЛ рд░ рд░рд┐рд▓реЗ рдЕрди рд░ рдЕрдл рднрдПрдХреЛ рджреЗрдЦреНрдиреБрд╣реЛрд╕реНред

> ЁЯТБ рддрдкрд╛рдИрдВ рдпреЛ рдХреЛрдб [code/functions](../../../../../2-farm/lessons/5-migrate-application-to-the-cloud/code/functions) рдлреЛрд▓реНрдбрд░рдорд╛ рдкрд╛рдЙрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫред

## рдЖрдлреНрдиреЛ рд╕рд░реНрд╡рд░рд▓реЗрд╕ рдХреЛрдб рдХреНрд▓рд╛рдЙрдбрдорд╛ рдбрд┐рдкреНрд▓реЛрдп рдЧрд░реНрдиреБрд╣реЛрд╕реН

рддрдкрд╛рдИрдВрдХреЛ рдХреЛрдб рдЕрд╣рд┐рд▓реЗ рд╕реНрдерд╛рдиреАрдп рд░реВрдкрдорд╛ рдХрд╛рдо рдЧрд░рд┐рд░рд╣реЗрдХреЛ рдЫ, рддреНрдпрд╕реИрд▓реЗ рдЕрд░реНрдХреЛ рдЪрд░рдг Functions App рд▓рд╛рдИ рдХреНрд▓рд╛рдЙрдбрдорд╛ рдбрд┐рдкреНрд▓реЛрдп рдЧрд░реНрдиреБ рд╣реЛред

### рдХрд╛рд░реНрдп - рдХреНрд▓рд╛рдЙрдб рд╕реНрд░реЛрддрд╣рд░реВ рд╕рд┐рд░реНрдЬрдирд╛ рдЧрд░реНрдиреБрд╣реЛрд╕реН

рддрдкрд╛рдИрдВрдХреЛ Functions рдПрдкрд▓рд╛рдИ Azure рдорд╛ Functions App рд╕реНрд░реЛрддрдорд╛ рдбрд┐рдкреНрд▓реЛрдп рдЧрд░реНрди рдЖрд╡рд╢реНрдпрдХ рдЫ, рдЬреБрди рддрдкрд╛рдИрдВрд▓реЗ рдЖрдлреНрдиреЛ IoT Hub рдХрд╛ рд▓рд╛рдЧрд┐ рд╕рд┐рд░реНрдЬрдирд╛ рдЧрд░реЗрдХреЛ Resource Group рднрд┐рддреНрд░ рд╣реБрдиреЗрдЫред рддрдкрд╛рдИрдВрд▓рд╛рдИ Azure рдорд╛ рдПрдХ Storage Account рдкрдирд┐ рдЖрд╡рд╢реНрдпрдХ рдЫ, рдЬрд╕рд▓реЗ рддрдкрд╛рдИрдВрд▓реЗ рд╕реНрдерд╛рдиреАрдп рд░реВрдкрдорд╛ рдЪрд▓рд╛рдПрдХреЛ рдЗрдореНрдпреБрд▓реЗрдЯреЗрдб рд╕реНрдЯреЛрд░реЗрдЬрд▓рд╛рдИ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрди рдЧрд░реНрдиреЗрдЫред

1. Storage Account рд╕рд┐рд░реНрдЬрдирд╛ рдЧрд░реНрди рддрд▓рдХреЛ рдХрдорд╛рдгреНрдб рдЪрд▓рд╛рдЙрдиреБрд╣реЛрд╕реН:

    ```sh
    az storage account create --resource-group soil-moisture-sensor \
                              --sku Standard_LRS \
                              --name <storage_name> 
    ```

    `<storage_name>` рд▓рд╛рдИ рддрдкрд╛рдИрдВрдХреЛ Storage Account рдХреЛ рдирд╛рдорд▓реЗ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрди рдЧрд░реНрдиреБрд╣реЛрд╕реНред рдпреЛ рдирд╛рдо рд╡рд┐рд╢реНрд╡рд╡реНрдпрд╛рдкреА рд░реВрдкрдорд╛ рдЕрджреНрд╡рд┐рддреАрдп рд╣реБрдиреБрдкрд░реНрдЫ рдХрд┐рдирднрдиреЗ рдпреЛ Storage Account рдкрд╣реБрдБрдЪ рдЧрд░реНрди рдкреНрд░рдпреЛрдЧ рдЧрд░рд┐рдиреЗ URL рдХреЛ рднрд╛рдЧ рдмрдирд╛рдЙрдБрдЫред рддрдкрд╛рдИрдВрд▓реЗ рдХреЗрд╡рд▓ рд╕рд╛рдирд╛ рдЕрдХреНрд╖рд░ рд░ рдЕрдВрдХрд╣рд░реВ рдкреНрд░рдпреЛрдЧ рдЧрд░реНрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫ, рдЕрдиреНрдп рдХреБрдиреИ рдкрдирд┐ рдЕрдХреНрд╖рд░рд╣рд░реВ рдкреНрд░рдпреЛрдЧ рдЧрд░реНрди рд╕рдХрд┐рдБрджреИрди, рд░ рдпреЛ 24 рдЕрдХреНрд╖рд░рдорд╛ рд╕реАрдорд┐рдд рдЫред `sms` рдЬрд╕реНрддреЛ рдХреЗрд╣реА рдкреНрд░рдпреЛрдЧ рдЧрд░реНрдиреБрд╣реЛрд╕реН рд░ рдЕрдиреНрддреНрдпрдорд╛ рдХреЗрд╣реА рдЕрдиреМрдареЛ рд╢рдмреНрджрд╣рд░реВ рд╡рд╛ рддрдкрд╛рдИрдВрдХреЛ рдирд╛рдо рдердкреНрдиреБрд╣реЛрд╕реНред

    `--sku Standard_LRS` рд▓реЗ рдореВрд▓реНрдп рдирд┐рд░реНрдзрд╛рд░рдг рд╕реНрддрд░ рдЪрдпрди рдЧрд░реНрджрдЫ, рд╕рдмреИрднрдиреНрджрд╛ рдХрдо рд▓рд╛рдЧрддрдХреЛ рд╕рд╛рдорд╛рдиреНрдп рдЙрджреНрджреЗрд╢реНрдп рдЦрд╛рддрд╛ рдЪрдпрди рдЧрд░реНрджреИред рд╕реНрдЯреЛрд░реЗрдЬрдХреЛ рдХреБрдиреИ рдирд┐:рд╢реБрд▓реНрдХ рд╕реНрддрд░ рдЫреИрди, рд░ рддрдкрд╛рдИрдВрд▓реЗ рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрдХреЛрдХреЛ рд▓рд╛рдЧрд┐ рддрд┐рд░реНрдиреБрд╣реБрдиреНрдЫред рд▓рд╛рдЧрддрд╣рд░реВ рддреБрд▓рдирд╛рддреНрдордХ рд░реВрдкрдорд╛ рдХрдо рдЫрдиреН, рд╕рдмреИрднрдиреНрджрд╛ рдорд╣рдБрдЧреЛ рд╕реНрдЯреЛрд░реЗрдЬ рдкреНрд░рддрд┐ рдЧрд┐рдЧрд╛рдмрд╛рдЗрдЯ рдкреНрд░рддрд┐ рдорд╣рд┐рдирд╛ US$0.05 рднрдиреНрджрд╛ рдХрдо рдЫред

    тЬЕ рдореВрд▓реНрдп рдирд┐рд░реНрдзрд╛рд░рдгрдХреЛ рдмрд╛рд░реЗрдорд╛ [Azure Storage Account pricing page](https://azure.microsoft.com/pricing/details/storage/?WT.mc_id=academic-17441-jabenn) рдорд╛ рдкрдвреНрдиреБрд╣реЛрд╕реНред

1. Function App рд╕рд┐рд░реНрдЬрдирд╛ рдЧрд░реНрди рддрд▓рдХреЛ рдХрдорд╛рдгреНрдб рдЪрд▓рд╛рдЙрдиреБрд╣реЛрд╕реН:

    ```sh
    az functionapp create --resource-group soil-moisture-sensor \
                          --runtime python \
                          --functions-version 3 \
                          --os-type Linux \
                          --consumption-plan-location <location> \
                          --storage-account <storage_name> \
                          --name <functions_app_name>
    ```

    `<location>` рд▓рд╛рдИ рддрдкрд╛рдИрдВрд▓реЗ Resource Group рд╕рд┐рд░реНрдЬрдирд╛ рдЧрд░реНрджрд╛ рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрдХреЛ рд╕реНрдерд╛рдирд▓реЗ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрди рдЧрд░реНрдиреБрд╣реЛрд╕реНред

    `<storage_name>` рд▓рд╛рдИ рддрдкрд╛рдИрдВрд▓реЗ рдкрд╣рд┐рд▓реЗ рд╕рд┐рд░реНрдЬрдирд╛ рдЧрд░реЗрдХреЛ Storage Account рдХреЛ рдирд╛рдорд▓реЗ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрди рдЧрд░реНрдиреБрд╣реЛрд╕реНред

    `<functions_app_name>` рд▓рд╛рдИ рддрдкрд╛рдИрдВрдХреЛ Functions App рдХреЛ рд▓рд╛рдЧрд┐ рдЕрджреНрд╡рд┐рддреАрдп рдирд╛рдорд▓реЗ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрди рдЧрд░реНрдиреБрд╣реЛрд╕реНред рдпреЛ рдирд╛рдо рд╡рд┐рд╢реНрд╡рд╡реНрдпрд╛рдкреА рд░реВрдкрдорд╛ рдЕрджреНрд╡рд┐рддреАрдп рд╣реБрдиреБрдкрд░реНрдЫ рдХрд┐рдирднрдиреЗ рдпреЛ Functions App рдкрд╣реБрдБрдЪ рдЧрд░реНрди рдкреНрд░рдпреЛрдЧ рдЧрд░рд┐рдиреЗ URL рдХреЛ рднрд╛рдЧ рдмрдирд╛рдЙрдБрдЫред `soil-moisture-sensor-` рдЬрд╕реНрддреЛ рдХреЗрд╣реА рдкреНрд░рдпреЛрдЧ рдЧрд░реНрдиреБрд╣реЛрд╕реН рд░ рдЕрдиреНрддреНрдпрдорд╛ рдХреЗрд╣реА рдЕрдиреМрдареЛ рд╢рдмреНрджрд╣рд░реВ рд╡рд╛ рддрдкрд╛рдИрдВрдХреЛ рдирд╛рдо рдердкреНрдиреБрд╣реЛрд╕реНред

    `--functions-version 3` рд╡рд┐рдХрд▓реНрдкрд▓реЗ Azure Functions рдХреЛ рд╕рдВрд╕реНрдХрд░рдг рд╕реЗрдЯ рдЧрд░реНрджрдЫред рд╕рдВрд╕реНрдХрд░рдг 3 рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рд╣реЛред

    `--os-type Linux` рд▓реЗ Functions рд░рдирдЯрд╛рдЗрдорд▓рд╛рдИ рдпреА Functions рд╣реЛрд╕реНрдЯ рдЧрд░реНрдирдХреЛ рд▓рд╛рдЧрд┐ Linux рдкреНрд░рдпреЛрдЧ рдЧрд░реНрди рднрдиреНрдЫред Functions рд▓рд╛рдИ Linux рд╡рд╛ Windows рдорд╛ рд╣реЛрд╕реНрдЯ рдЧрд░реНрди рд╕рдХрд┐рдиреНрдЫ, рдкреНрд░рдпреЛрдЧ рдЧрд░рд┐рдПрдХреЛ рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдЩ рднрд╛рд╖рд╛рдХреЛ рдЖрдзрд╛рд░рдорд╛ред Python рдПрдкрд╣рд░реВ рдХреЗрд╡рд▓ Linux рдорд╛ рд╕рдорд░реНрдерд┐рдд рдЫрдиреНред

### рдХрд╛рд░реНрдп - рддрдкрд╛рдИрдВрдХреЛ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд╕реЗрдЯрд┐рдЩрд╣рд░реВ рдЕрдкрд▓реЛрдб рдЧрд░реНрдиреБрд╣реЛрд╕реН

рдЬрдм рддрдкрд╛рдИрдВрд▓реЗ рдЖрдлреНрдиреЛ Functions App рд╡рд┐рдХрд╛рд╕ рдЧрд░реНрдиреБрднрдпреЛ, рддрдкрд╛рдИрдВрд▓реЗ `local.settings.json` рдлрд╛рдЗрд▓рдорд╛ IoT Hub рдХрд╛ рд▓рд╛рдЧрд┐ рдХрдиреЗрдХреНрд╢рди рд╕реНрдЯреНрд░рд┐рдЩрд╣рд░реВрдХрд╛ рд╕реЗрдЯрд┐рдЩрд╣рд░реВ рднрдгреНрдбрд╛рд░рдг рдЧрд░реНрдиреБрднрдпреЛред рдпреА рд╕реЗрдЯрд┐рдЩрд╣рд░реВ Azure рдорд╛ рддрдкрд╛рдИрдВрдХреЛ Functions App рдорд╛ Application Settings рдорд╛ рд▓реЗрдЦреНрди рдЖрд╡рд╢реНрдпрдХ рдЫ рддрд╛рдХрд┐ рддрдкрд╛рдИрдВрдХреЛ рдХреЛрдбрд▓реЗ рддрд┐рдиреАрд╣рд░реВрд▓рд╛рдИ рдкреНрд░рдпреЛрдЧ рдЧрд░реНрди рд╕рдХреВрдиреНред

> ЁЯОУ `local.settings.json` рдлрд╛рдЗрд▓ рдХреЗрд╡рд▓ рд╕реНрдерд╛рдиреАрдп рд╡рд┐рдХрд╛рд╕ рд╕реЗрдЯрд┐рдЩрд╣рд░реВрдХреЛ рд▓рд╛рдЧрд┐ рд╣реЛ, рд░ рдпреАрд▓рд╛рдИ GitHub рдЬрд╕реНрддрд╛ рд╕реНрд░реЛрдд рдХреЛрдб рдирд┐рдпрдиреНрддреНрд░рдгрдорд╛ рдЬрд╛рдБрдЪ рдЧрд░реНрдиреБ рд╣реБрдБрджреИрдиред рдХреНрд▓рд╛рдЙрдбрдорд╛ рдбрд┐рдкреНрд▓реЛрдп рдЧрд░реНрджрд╛, Application Settings рдкреНрд░рдпреЛрдЧ рдЧрд░рд┐рдиреНрдЫред Application Settings рдХреНрд▓рд╛рдЙрдбрдорд╛ рд╣реЛрд╕реНрдЯ рдЧрд░рд┐рдПрдХрд╛ key/value рдЬреЛрдбреАрд╣рд░реВ рд╣реБрдиреН, рд░ рд╡рд╛рддрд╛рд╡рд░рдгреАрдп рдЪрд░рд╣рд░реВрдмрд╛рдЯ рдкрдврд┐рдиреНрдЫрдиреН, рдЪрд╛рд╣реЗ рддрдкрд╛рдИрдВрдХреЛ рдХреЛрдбрдорд╛ рд╣реЛрд╕реН рд╡рд╛ IoT Hub рд╕рдБрдЧ рддрдкрд╛рдИрдВрдХреЛ рдХреЛрдбрд▓рд╛рдИ рдЬрдбрд╛рди рдЧрд░реНрджрд╛ рд░рдирдЯрд╛рдЗрдорд▓реЗред

1. Functions App Application Settings рдорд╛ `IOT_HUB_CONNECTION_STRING` рд╕реЗрдЯрд┐рдЩ рд╕реЗрдЯ рдЧрд░реНрди рддрд▓рдХреЛ рдХрдорд╛рдгреНрдб рдЪрд▓рд╛рдЙрдиреБрд╣реЛрд╕реН:

    ```sh
    az functionapp config appsettings set --resource-group soil-moisture-sensor \
                                          --name <functions_app_name> \
                                          --settings "IOT_HUB_CONNECTION_STRING=<connection string>"
    ```

    `<functions_app_name>` рд▓рд╛рдИ рддрдкрд╛рдИрдВрд▓реЗ рдЖрдлреНрдиреЛ Functions App рдХреЛ рд▓рд╛рдЧрд┐ рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрдХреЛ рдирд╛рдорд▓реЗ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрди рдЧрд░реНрдиреБрд╣реЛрд╕реНред

    `<connection string>` рд▓рд╛рдИ рддрдкрд╛рдИрдВрдХреЛ `local.settings.json` рдлрд╛рдЗрд▓рдмрд╛рдЯ `IOT_HUB_CONNECTION_STRING` рдХреЛ рдорд╛рдирд▓реЗ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрди рдЧрд░реНрдиреБрд╣реЛрд╕реНред

1. рдорд╛рдерд┐рдХреЛ рдЪрд░рдг рджреЛрд╣реЛрд░реНрдпрд╛рдЙрдиреБрд╣реЛрд╕реН, рддрд░ `REGISTRY_MANAGER_CONNECTION_STRING` рдХреЛ рдорд╛рдирд▓рд╛рдИ `local.settings.json` рдлрд╛рдЗрд▓рдмрд╛рдЯ рд╕реЛрд╣реА рдорд╛рдирд▓реЗ рд╕реЗрдЯ рдЧрд░реНрдиреБрд╣реЛрд╕реНред

рдЬрдм рддрдкрд╛рдИрдВ рдпреА рдХрдорд╛рдгреНрдбрд╣рд░реВ рдЪрд▓рд╛рдЙрдиреБрд╣реБрдиреНрдЫ, рддрд┐рдиреАрд╣рд░реВрд▓реЗ Functions App рдХрд╛ рд╕рдмреИ Application Settings рдХреЛ рд╕реВрдЪреА рдкрдирд┐ рдЖрдЙрдЯрдкреБрдЯ рдЧрд░реНрдиреЗрдЫрдиреНред рддрдкрд╛рдИрдВ рдпрд╕рд▓рд╛рдИ рддрдкрд╛рдИрдВрдХрд╛ рдорд╛рдирд╣рд░реВ рд╕рд╣реА рд░реВрдкрдорд╛ рд╕реЗрдЯ рдЧрд░рд┐рдПрдХреЛ рдЫ рдХрд┐ рдЫреИрди рднрдиреЗрд░ рдЬрд╛рдБрдЪ рдЧрд░реНрди рдкреНрд░рдпреЛрдЧ рдЧрд░реНрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫред

> ЁЯТБ рддрдкрд╛рдИрдВрд▓реЗ `AzureWebJobsStorage` рдХреЛ рд▓рд╛рдЧрд┐ рдкрд╣рд┐рд▓реЗ рдиреИ рд╕реЗрдЯ рдЧрд░рд┐рдПрдХреЛ рдорд╛рди рджреЗрдЦреНрдиреБрд╣реБрдиреЗрдЫред рддрдкрд╛рдИрдВрдХреЛ `local.settings.json` рдлрд╛рдЗрд▓рдорд╛, рдпреЛ рд╕реНрдерд╛рдиреАрдп рд╕реНрдЯреЛрд░реЗрдЬ рдЗрдореНрдпреБрд▓реЗрдЯрд░ рдкреНрд░рдпреЛрдЧ рдЧрд░реНрди рд╕реЗрдЯ рдЧрд░рд┐рдПрдХреЛ рдерд┐рдпреЛред рдЬрдм рддрдкрд╛рдИрдВрд▓реЗ Functions App рд╕рд┐рд░реНрдЬрдирд╛ рдЧрд░реНрдиреБрднрдпреЛ, рддрдкрд╛рдИрдВрд▓реЗ рд╕реНрдЯреЛрд░реЗрдЬ рдЕрдХрд╛рдЙрдиреНрдЯрд▓рд╛рдИ рдПрдХ рдкреНрдпрд╛рд░рд╛рдорд┐рдЯрд░рдХреЛ рд░реВрдкрдорд╛ рдкрд╛рд╕ рдЧрд░реНрдиреБрднрдпреЛ, рд░ рдпреЛ рд╕реЗрдЯрд┐рдЩрдорд╛ рд╕реНрд╡рддрдГ рд╕реЗрдЯ рдЧрд░рд┐рдиреНрдЫред

### рдХрд╛рд░реНрдп - рддрдкрд╛рдИрдВрдХреЛ Functions App рдХреНрд▓рд╛рдЙрдбрдорд╛ рдбрд┐рдкреНрд▓реЛрдп рдЧрд░реНрдиреБрд╣реЛрд╕реН

рдЕрдм Functions App рддрдпрд╛рд░ рдЫ, рддрдкрд╛рдИрдВрдХреЛ рдХреЛрдб рдбрд┐рдкреНрд▓реЛрдп рдЧрд░реНрди рд╕рдХрд┐рдиреНрдЫред

1. VS Code рдЯрд░реНрдорд┐рдирд▓рдмрд╛рдЯ рддрд▓рдХреЛ рдХрдорд╛рдгреНрдб рдЪрд▓рд╛рдПрд░ рддрдкрд╛рдИрдВрдХреЛ Functions App рдкреНрд░рдХрд╛рд╢рд┐рдд рдЧрд░реНрдиреБрд╣реЛрд╕реН:

    ```sh
    func azure functionapp publish <functions_app_name>
    ```

    `<functions_app_name>` рд▓рд╛рдИ рддрдкрд╛рдИрдВрд▓реЗ рдЖрдлреНрдиреЛ Functions App рдХреЛ рд▓рд╛рдЧрд┐ рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрдХреЛ рдирд╛рдорд▓реЗ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрди рдЧрд░реНрдиреБрд╣реЛрд╕реНред

рдХреЛрдбрд▓рд╛рдИ рдкреНрдпрд╛рдХреЗрдЬ рдЧрд░рд┐рдиреЗрдЫ рд░ Functions App рдорд╛ рдкрдард╛рдЗрдиреЗрдЫ, рдЬрд╣рд╛рдБ рдпреЛ рдбрд┐рдкреНрд▓реЛрдп рдЧрд░рд┐рдиреЗрдЫ рд░ рд╕реБрд░реБ рдЧрд░рд┐рдиреЗрдЫред рдзреЗрд░реИ рдХрдиреНрд╕реЛрд▓ рдЖрдЙрдЯрдкреБрдЯ рд╣реБрдиреЗрдЫ, рдЬрд╕рдХреЛ рдЕрдиреНрддреНрдпрдорд╛ рдбрд┐рдкреНрд▓реЛрдпрдХреЛ рдкреБрд╖реНрдЯрд┐ рд░ рдбрд┐рдкреНрд▓реЛрдп рдЧрд░рд┐рдПрдХрд╛ Functions рдХреЛ рд╕реВрдЪреА рд╣реБрдиреЗрдЫред рдпрд╕ рдЕрд╡рд╕реНрдерд╛рдорд╛ рд╕реВрдЪреАрдорд╛ рдХреЗрд╡рд▓ рдЯреНрд░рд┐рдЧрд░ рд╕рдорд╛рд╡реЗрд╢ рд╣реБрдиреЗрдЫред

```output
Deployment successful.
Remote build succeeded!
Syncing triggers...
Functions in soil-moisture-sensor:
    iot-hub-trigger - [eventHubTrigger]
```

рддрдкрд╛рдИрдВрдХреЛ IoT рдЙрдкрдХрд░рдг рдЪрд▓рд┐рд░рд╣реЗрдХреЛ рдЫ рднрдиреЗрд░ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдЧрд░реНрдиреБрд╣реЛрд╕реНред рдорд╛рдЯреЛрдХреЛ рдирдореА рд╕реНрддрд░ рдкрд░рд┐рд╡рд░реНрддрди рдЧрд░реНрди рдорд╛рдЯреЛрдХреЛ рдирдореА рд╕реЗрдиреНрд╕рд░рд▓рд╛рдИ рдорд╛рдЯреЛрднрд┐рддреНрд░ рд░ рдмрд╛рд╣рд┐рд░ рд╕рд╛рд░реНрдиреБрд╣реЛрд╕реНред рддрдкрд╛рдИрдВрд▓реЗ рдорд╛рдЯреЛрдХреЛ рдирдореА рдкрд░рд┐рд╡рд░реНрддрди рд╣реБрдБрджрд╛ рд░рд┐рд▓реЗ рдЕрди рд░ рдЕрдл рднрдПрдХреЛ рджреЗрдЦреНрдиреБрд╣реБрдиреЗрдЫред

---

## ЁЯЪА рдЪреБрдиреМрддреА

рдЕрдШрд┐рд▓реНрд▓реЛ рдкрд╛рдардорд╛, рддрдкрд╛рдИрдВрд▓реЗ рд░рд┐рд▓реЗрдХреЛ рд╕рдордп рд╡реНрдпрд╡рд╕реНрдерд╛рдкрди MQTT рд╕рдиреНрджреЗрд╢рд╣рд░реВрдмрд╛рдЯ рдЕрдирд╕рдмреНрд╕реНрдХреНрд░рд╛рдЗрдм рдЧрд░реЗрд░ рдЧрд░реНрдиреБрднрдПрдХреЛ рдерд┐рдпреЛ, рд░рд┐рд▓реЗ рдЕрди рд╣реБрдБрджрд╛ рд░ рдЕрдл рднрдПрдХреЛ рдХреЗрд╣реА рд╕рдордпрдкрдЫрд┐ред рддрдкрд╛рдИрдВ рдпрд╣рд╛рдБ рдпреЛ рд╡рд┐рдзрд┐ рдкреНрд░рдпреЛрдЧ рдЧрд░реНрди рд╕рдХреНрдиреБрд╣реБрдиреНрди - рддрдкрд╛рдИрдВ рдЖрдлреНрдиреЛ IoT Hub рдЯреНрд░рд┐рдЧрд░рд▓рд╛рдИ рдЕрдирд╕рдмреНрд╕реНрдХреНрд░рд╛рдЗрдм рдЧрд░реНрди рд╕рдХреНрдиреБрд╣реБрдиреНрдиред

рддрдкрд╛рдИрдВрдХреЛ Functions App рдорд╛ рдпрд╕рд▓рд╛рдИ рд╡реНрдпрд╡рд╕реНрдерд╛рдкрди рдЧрд░реНрди рд╕рдХреНрдиреЗ рд╡рд┐рднрд┐рдиреНрди рддрд░рд┐рдХрд╛рд╣рд░реВрдХреЛ рдмрд╛рд░реЗрдорд╛ рд╕реЛрдЪреНрдиреБрд╣реЛрд╕реНред

## рдкреЛрд╕реНрдЯ-рд▓реЗрдХреНрдЪрд░ рдХреНрд╡рд┐рдЬ

[рдкреЛрд╕реНрдЯ-рд▓реЗрдХреНрдЪрд░ рдХреНрд╡рд┐рдЬ](https://black-meadow-040d15503.1.azurestaticapps.net/quiz/18)

## рд╕рдореАрдХреНрд╖рд╛ рд░ рдЖрддреНрдо рдЕрдзреНрдпрдпрди

* [Serverless Computing page on Wikipedia](https://wikipedia.org/wiki/Serverless_computing) рдорд╛ рд╕рд░реНрд╡рд░рд▓реЗрд╕ рдХрдореНрдкреНрдпреБрдЯрд┐рдЩрдХреЛ рдмрд╛рд░реЗрдорд╛ рдкрдвреНрдиреБрд╣реЛрд╕реНред
* Azure рдорд╛ рд╕рд░реНрд╡рд░рд▓реЗрд╕ рдкреНрд░рдпреЛрдЧ рдЧрд░реНрдиреЗ рдмрд╛рд░реЗрдорд╛ рдкрдвреНрдиреБрд╣реЛрд╕реН, рдЬрд╕рдорд╛ рдХреЗрд╣реА рдердк рдЙрджрд╛рд╣рд░рдгрд╣рд░реВ [Go serverless for your IoT needs Azure blog post](https://azure.microsoft.com/blog/go-serverless-for-your-iot-needs/?WT.mc_id=academic-17441-jabenn) рдорд╛ рдЫрдиреНред
* [Azure Functions YouTube channel](https://www.youtube.com/c/AzureFunctions) рдорд╛ Azure Functions рдХреЛ рдмрд╛рд░реЗрдорд╛ рдердк рдЬрд╛рдиреНрдиреБрд╣реЛрд╕реНред

## рдЕрд╕рд╛рдЗрдирдореЗрдиреНрдЯ

[рдореНрдпрд╛рдиреБрдЕрд▓ рд░рд┐рд▓реЗ рдирд┐рдпрдиреНрддреНрд░рдг рдердкреНрдиреБрд╣реЛрд╕реН](assignment.md)

---

**рдЕрд╕реНрд╡реАрдХрд░рдг**:  
рдпреЛ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ AI рдЕрдиреБрд╡рд╛рдж рд╕реЗрд╡рд╛ [Co-op Translator](https://github.com/Azure/co-op-translator) рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрд░ рдЕрдиреБрд╡рд╛рдж рдЧрд░рд┐рдПрдХреЛ рдЫред рд╣рд╛рдореА рд╢реБрджреНрдзрддрд╛рдХреЛ рд▓рд╛рдЧрд┐ рдкреНрд░рдпрд╛рд╕ рдЧрд░реНрдЫреМрдВ, рддрд░ рдХреГрдкрдпрд╛ рдзреНрдпрд╛рди рджрд┐рдиреБрд╣реЛрд╕реН рдХрд┐ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдЕрдиреБрд╡рд╛рджрд╣рд░реВрдорд╛ рддреНрд░реБрдЯрд┐ рд╡рд╛ рдЕрд╢реБрджреНрдзрддрд╛ рд╣реБрди рд╕рдХреНрдЫред рдпрд╕рдХреЛ рдореВрд▓ рднрд╛рд╖рд╛ рдорд╛ рд░рд╣реЗрдХреЛ рдореВрд▓ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝рд▓рд╛рдИ рдЖрдзрд┐рдХрд╛рд░рд┐рдХ рд╕реНрд░реЛрдд рдорд╛рдирд┐рдиреБрдкрд░реНрдЫред рдорд╣рддреНрд╡рдкреВрд░реНрдг рдЬрд╛рдирдХрд╛рд░реАрдХреЛ рд▓рд╛рдЧрд┐, рд╡реНрдпрд╛рд╡рд╕рд╛рдпрд┐рдХ рдорд╛рдирд╡ рдЕрдиреБрд╡рд╛рдж рд╕рд┐рдлрд╛рд░рд┐рд╕ рдЧрд░рд┐рдиреНрдЫред рдпрд╕ рдЕрдиреБрд╡рд╛рджрдХреЛ рдкреНрд░рдпреЛрдЧрдмрд╛рдЯ рдЙрддреНрдкрдиреНрди рд╣реБрдиреЗ рдХреБрдиреИ рдкрдирд┐ рдЧрд▓рддрдлрд╣рдореА рд╡рд╛ рдЧрд▓рдд рд╡реНрдпрд╛рдЦреНрдпрд╛рдХреЛ рд▓рд╛рдЧрд┐ рд╣рд╛рдореА рдЬрд┐рдореНрдореЗрд╡рд╛рд░ рд╣реБрдиреЗ рдЫреИрдиреМрдВред