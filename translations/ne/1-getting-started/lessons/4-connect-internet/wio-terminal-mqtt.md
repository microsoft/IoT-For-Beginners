<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "d6faf0e8d3c2d6d20c0aef2a305dab18",
  "translation_date": "2025-08-27T12:33:37+00:00",
  "source_file": "1-getting-started/lessons/4-connect-internet/wio-terminal-mqtt.md",
  "language_code": "ne"
}
-->
# рдЖрдлреНрдиреЛ рдирд╛рдЗрдЯрд▓рд╛рдЗрдЯрд▓рд╛рдИ рдЗрдиреНрдЯрд░рдиреЗрдЯрдмрд╛рдЯ рдирд┐рдпрдиреНрддреНрд░рдг рдЧрд░реНрдиреБрд╣реЛрд╕реН - Wio Terminal

IoT рдЙрдкрдХрд░рдгрд▓рд╛рдИ *test.mosquitto.org* рд╕рдБрдЧ MQTT рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрд░ рдЯреЗрд▓рд┐рдореЗрдЯреНрд░реА рдорд╛рдирд╣рд░реВ рдкрдард╛рдЙрди рд░ LED рдирд┐рдпрдиреНрддреНрд░рдг рдЧрд░реНрди рдЖрджреЗрд╢рд╣рд░реВ рдкреНрд░рд╛рдкреНрдд рдЧрд░реНрди рдХреЛрдб рдЧрд░реНрди рдЖрд╡рд╢реНрдпрдХ рдЫред

рдпрд╕ рдкрд╛рдардХреЛ рдпрд╕ рднрд╛рдЧрдорд╛, рддрдкрд╛рдИрдВ рдЖрдлреНрдиреЛ Wio Terminal рд▓рд╛рдИ MQTT рдмреНрд░реЛрдХрд░рд╕рдБрдЧ рдЬрдбрд╛рди рдЧрд░реНрдиреБрд╣реБрдиреЗрдЫред

## WiFi рд░ MQTT Arduino рд▓рд╛рдЗрдмреНрд░реЗрд░реАрд╣рд░реВ рд╕реНрдерд╛рдкрдирд╛ рдЧрд░реНрдиреБрд╣реЛрд╕реН

MQTT рдмреНрд░реЛрдХрд░рд╕рдБрдЧ рд╕рдВрд╡рд╛рдж рдЧрд░реНрди, рддрдкрд╛рдИрдВрд▓реЗ Wio Terminal рдорд╛ WiFi рдЪрд┐рдк рдкреНрд░рдпреЛрдЧ рдЧрд░реНрди рд░ MQTT рд╕рдБрдЧ рд╕рдВрд╡рд╛рдж рдЧрд░реНрди рдХреЗрд╣реА Arduino рд▓рд╛рдЗрдмреНрд░реЗрд░реАрд╣рд░реВ рд╕реНрдерд╛рдкрдирд╛ рдЧрд░реНрди рдЖрд╡рд╢реНрдпрдХ рдЫред Arduino рдЙрдкрдХрд░рдгрд╣рд░реВрдХреЛ рд▓рд╛рдЧрд┐ рд╡рд┐рдХрд╛рд╕ рдЧрд░реНрджрд╛, рддрдкрд╛рдИрдВрд▓реЗ рдЦреБрд▓рд╛ рд╕реНрд░реЛрдд рдХреЛрдб рд╕рдорд╛рд╡реЗрд╢ рдЧрд░реНрдиреЗ рд░ рдзреЗрд░реИ рдкреНрд░рдХрд╛рд░рдХрд╛ рдХреНрд╖рдорддрд╛рд╣рд░реВ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдЧрд░реНрдиреЗ рд▓рд╛рдЗрдмреНрд░реЗрд░реАрд╣рд░реВрдХреЛ рд╡рд┐рд╕реНрддреГрдд рджрд╛рдпрд░рд╛ рдкреНрд░рдпреЛрдЧ рдЧрд░реНрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫред Seeed рд▓реЗ Wio Terminal рдХрд╛ рд▓рд╛рдЧрд┐ рд▓рд╛рдЗрдмреНрд░реЗрд░реАрд╣рд░реВ рдкреНрд░рдХрд╛рд╢рд┐рдд рдЧрд░реНрджрдЫ рдЬрд╕рд▓реЗ рдпрд╕рд▓рд╛рдИ WiFi рдорд╛рд░реНрдлрдд рд╕рдВрд╡рд╛рдж рдЧрд░реНрди рдЕрдиреБрдорддрд┐ рджрд┐рдиреНрдЫред рдЕрдиреНрдп рд╡рд┐рдХрд╛рд╕рдХрд░реНрддрд╛рд╣рд░реВрд▓реЗ MQTT рдмреНрд░реЛрдХрд░рд╣рд░реВрд╕рдБрдЧ рд╕рдВрд╡рд╛рдж рдЧрд░реНрди рд▓рд╛рдЗрдмреНрд░реЗрд░реАрд╣рд░реВ рдкреНрд░рдХрд╛рд╢рд┐рдд рдЧрд░реЗрдХрд╛ рдЫрдиреН, рд░ рддрдкрд╛рдИрдВ рдпреА рд▓рд╛рдЗрдмреНрд░реЗрд░реАрд╣рд░реВ рдЖрдлреНрдиреЛ рдЙрдкрдХрд░рдгрд╕рдБрдЧ рдкреНрд░рдпреЛрдЧ рдЧрд░реНрдиреБрд╣реБрдиреЗрдЫред

рдпреА рд▓рд╛рдЗрдмреНрд░реЗрд░реАрд╣рд░реВ рд╕реНрд░реЛрдд рдХреЛрдбрдХреЛ рд░реВрдкрдорд╛ рдЙрдкрд▓рдмреНрдз рдЫрдиреН, рдЬрд╕рд▓рд╛рдИ PlatformIO рдорд╛ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдкрдорд╛ рдЖрдпрд╛рдд рдЧрд░реНрди рд░ рддрдкрд╛рдИрдВрдХреЛ рдЙрдкрдХрд░рдгрдХреЛ рд▓рд╛рдЧрд┐ рдХрдореНрдкрд╛рдЗрд▓ рдЧрд░реНрди рд╕рдХрд┐рдиреНрдЫред рдпрд╕рд░реА, Arduino рд▓рд╛рдЗрдмреНрд░реЗрд░реАрд╣рд░реВ рдХреБрдиреИ рдкрдирд┐ рдЙрдкрдХрд░рдгрдорд╛ рдХрд╛рдо рдЧрд░реНрдиреЗрдЫрдиреН рдЬрд╕рд▓реЗ Arduino рдлреНрд░реЗрдорд╡рд░реНрдХрд▓рд╛рдИ рд╕рдорд░реНрдерди рдЧрд░реНрджрдЫ, рдпрджрд┐ рдЙрдкрдХрд░рдгрд╕рдБрдЧ рдЙрдХреНрдд рд▓рд╛рдЗрдмреНрд░реЗрд░реАрд▓реЗ рдЖрд╡рд╢реНрдпрдХ рдкрд░реНрдиреЗ рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ рдЫ рднрдиреЗред рдХреЗрд╣реА рд▓рд╛рдЗрдмреНрд░реЗрд░реАрд╣рд░реВ, рдЬрд╕реНрддреИ Seeed WiFi рд▓рд╛рдЗрдмреНрд░реЗрд░реАрд╣рд░реВ, рдирд┐рд╢реНрдЪрд┐рдд рд╣рд╛рд░реНрдбрд╡реЗрдпрд░рдХрд╛ рд▓рд╛рдЧрд┐ рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╣реБрдиреНрдЫрдиреНред

рд▓рд╛рдЗрдмреНрд░реЗрд░реАрд╣рд░реВ рд╡рд┐рд╢реНрд╡рд╡реНрдпрд╛рдкреА рд░реВрдкрдорд╛ рд╕реНрдерд╛рдкрдирд╛ рдЧрд░реНрди рд╕рдХрд┐рдиреНрдЫ рд░ рдЖрд╡рд╢реНрдпрдХ рдкрд░реЗрдорд╛ рдХрдореНрдкрд╛рдЗрд▓ рдЧрд░реНрди рд╕рдХрд┐рдиреНрдЫ, рд╡рд╛ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдкреНрд░реЛрдЬреЗрдХреНрдЯрдорд╛ред рдпрд╕ рдХрд╛рд░реНрдпрдХреЛ рд▓рд╛рдЧрд┐, рд▓рд╛рдЗрдмреНрд░реЗрд░реАрд╣рд░реВ рдкреНрд░реЛрдЬреЗрдХреНрдЯрдорд╛ рд╕реНрдерд╛рдкрдирд╛ рдЧрд░рд┐рдиреЗрдЫред

тЬЕ рддрдкрд╛рдИрдВ [PlatformIO рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдбрдХреБрдореЗрдиреНрдЯреЗрд╕рди](https://docs.platformio.org/en/latest/librarymanager/index.html) рдорд╛ рд▓рд╛рдЗрдмреНрд░реЗрд░реА рд╡реНрдпрд╡рд╕реНрдерд╛рдкрди рд░ рдХрд╕рд░реА рд▓рд╛рдЗрдмреНрд░реЗрд░реАрд╣рд░реВ рдлреЗрд▓рд╛ рдкрд╛рд░реНрдиреЗ рд░ рд╕реНрдерд╛рдкрдирд╛ рдЧрд░реНрдиреЗ рдмрд╛рд░реЗ рдердк рдЬрд╛рдиреНрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫред

### рдХрд╛рд░реНрдп - WiFi рд░ MQTT Arduino рд▓рд╛рдЗрдмреНрд░реЗрд░реАрд╣рд░реВ рд╕реНрдерд╛рдкрдирд╛ рдЧрд░реНрдиреБрд╣реЛрд╕реН

Arduino рд▓рд╛рдЗрдмреНрд░реЗрд░реАрд╣рд░реВ рд╕реНрдерд╛рдкрдирд╛ рдЧрд░реНрдиреБрд╣реЛрд╕реНред

1. VS Code рдорд╛ рдирд╛рдЗрдЯрд▓рд╛рдЗрдЯ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдЦреЛрд▓реНрдиреБрд╣реЛрд╕реНред

1. `platformio.ini` рдлрд╛рдЗрд▓рдХреЛ рдЕрдиреНрддреНрдпрдорд╛ рдирд┐рдореНрди рдердкреНрдиреБрд╣реЛрд╕реН:

    ```ini
    lib_deps =
        seeed-studio/Seeed Arduino rpcWiFi @ 1.0.5
        seeed-studio/Seeed Arduino FS @ 2.1.1
        seeed-studio/Seeed Arduino SFUD @ 2.0.2
        seeed-studio/Seeed Arduino rpcUnified @ 2.1.3
        seeed-studio/Seeed_Arduino_mbedtls @ 3.0.1
    ```

    рдпрд╕рд▓реЗ Seeed WiFi рд▓рд╛рдЗрдмреНрд░реЗрд░реАрд╣рд░реВ рдЖрдпрд╛рдд рдЧрд░реНрджрдЫред `@ <number>` рд╕рд┐рдиреНрдЯреНрдпрд╛рдХреНрд╕рд▓реЗ рд▓рд╛рдЗрдмреНрд░реЗрд░реАрдХреЛ рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╕рдВрд╕реНрдХрд░рдгрд▓рд╛рдИ рдЬрдирд╛рдЙрдБрдЫред

    > ЁЯТБ рддрдкрд╛рдИрдВ `@ <number>` рд╣рдЯрд╛рдПрд░ рд╕рдзреИрдВ рд▓рд╛рдЗрдмреНрд░реЗрд░реАрд╣рд░реВрдХреЛ рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рдкреНрд░рдпреЛрдЧ рдЧрд░реНрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫ, рддрд░ рдкрдЫрд┐рд▓реНрд▓рд╛ рд╕рдВрд╕реНрдХрд░рдгрд╣рд░реВрд▓реЗ рддрд▓рдХреЛ рдХреЛрдбрд╕рдБрдЧ рдХрд╛рдо рдЧрд░реНрдиреЗ рдЧреНрдпрд╛рд░реЗрдиреНрдЯреА рд╣реБрдБрджреИрдиред рдпрд╣рд╛рдБрдХреЛ рдХреЛрдбрд▓реЗ рд▓рд╛рдЗрдмреНрд░реЗрд░реАрд╣рд░реВрдХреЛ рдпрд╕ рд╕рдВрд╕реНрдХрд░рдгрд╕рдБрдЧ рдкрд░реАрдХреНрд╖рдг рдЧрд░рд┐рдПрдХреЛ рдЫред

    рд▓рд╛рдЗрдмреНрд░реЗрд░реАрд╣рд░реВ рдердкреНрдирдХрд╛ рд▓рд╛рдЧрд┐ рддрдкрд╛рдИрдВрд▓реЗ рдпрддреНрддрд┐ рдорд╛рддреНрд░ рдЧрд░реНрдиреБрдкрд░реНрдЫред рдЕрд░реНрдХреЛ рдкрдЯрдХ PlatformIO рд▓реЗ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдирд┐рд░реНрдорд╛рдг рдЧрд░реНрджрд╛, рдпрд╕рд▓реЗ рдпреА рд▓рд╛рдЗрдмреНрд░реЗрд░реАрд╣рд░реВрдХреЛ рд╕реНрд░реЛрдд рдХреЛрдб рдбрд╛рдЙрдирд▓реЛрдб рдЧрд░реНрдиреЗрдЫ рд░ рдпрд╕рд▓рд╛рдИ рддрдкрд╛рдИрдВрдХреЛ рдкреНрд░реЛрдЬреЗрдХреНрдЯрдорд╛ рдХрдореНрдкрд╛рдЗрд▓ рдЧрд░реНрдиреЗрдЫред

1. `lib_deps` рдорд╛ рдирд┐рдореНрди рдердкреНрдиреБрд╣реЛрд╕реН:

    ```ini
    knolleary/PubSubClient @ 2.8
    ```

    рдпрд╕рд▓реЗ [PubSubClient](https://github.com/knolleary/pubsubclient), рдПрдХ Arduino MQTT рдХреНрд▓рд╛рдЗрдиреНрдЯ рдЖрдпрд╛рдд рдЧрд░реНрджрдЫред

## WiFi рд╕рдБрдЧ рдЬрдбрд╛рди рдЧрд░реНрдиреБрд╣реЛрд╕реН

рдЕрдм Wio Terminal рд▓рд╛рдИ WiFi рд╕рдБрдЧ рдЬрдбрд╛рди рдЧрд░реНрди рд╕рдХрд┐рдиреНрдЫред

### рдХрд╛рд░реНрдп - WiFi рд╕рдБрдЧ рдЬрдбрд╛рди рдЧрд░реНрдиреБрд╣реЛрд╕реН

Wio Terminal рд▓рд╛рдИ WiFi рд╕рдБрдЧ рдЬрдбрд╛рди рдЧрд░реНрдиреБрд╣реЛрд╕реНред

1. `src` рдлреЛрд▓реНрдбрд░рдорд╛ `config.h` рдирд╛рдордХреЛ рдирдпрд╛рдБ рдлрд╛рдЗрд▓ рдмрдирд╛рдЙрдиреБрд╣реЛрд╕реНред рддрдкрд╛рдИрдВ рдпреЛ `src` рдлреЛрд▓реНрдбрд░ рдЪрдпрди рдЧрд░реЗрд░, рд╡рд╛ рднрд┐рддреНрд░рдХреЛ `main.cpp` рдлрд╛рдЗрд▓ рдЪрдпрди рдЧрд░реЗрд░, рд░ рдПрдХреНрд╕рдкреНрд▓реЛрд░рд░рдмрд╛рдЯ **New file** рдмрдЯрди рдЪрдпрди рдЧрд░реЗрд░ рдЧрд░реНрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫред рдпреЛ рдмрдЯрди рдХреЗрд╡рд▓ рддрдкрд╛рдИрдВрдХреЛ рдХрд░реНрд╕рд░ рдПрдХреНрд╕рдкреНрд▓реЛрд░рд░рдорд╛ рд╣реБрдБрджрд╛ рдорд╛рддреНрд░ рджреЗрдЦрд┐рдиреНрдЫред

    ![рдирдпрд╛рдБ рдлрд╛рдЗрд▓ рдмрдЯрди](../../../../../translated_images/vscode-new-file-button.182702340fe6723c8cbb4cfa1a9a9fb0d0a5227643b4e46b91ff67b07a39a92f.ne.png)

1. рдЖрдлреНрдиреЛ WiFi рдХреНрд░реЗрдбреЗрдиреНрд╕рд┐рдпрд▓рд╣рд░реВрдХреЛ рд▓рд╛рдЧрд┐ рд╕реНрдерд┐рд░рд╛рдВрдХ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдЧрд░реНрди рдпреЛ рдлрд╛рдЗрд▓рдорд╛ рдирд┐рдореНрди рдХреЛрдб рдердкреНрдиреБрд╣реЛрд╕реН:

    ```cpp
    #pragma once

    #include <string>
    
    using namespace std;
    
    // WiFi credentials
    const char *SSID = "<SSID>";
    const char *PASSWORD = "<PASSWORD>";
    ```

    `<SSID>` рд▓рд╛рдИ рддрдкрд╛рдИрдВрдХреЛ WiFi рдХреЛ SSID рд▓реЗ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрди рдЧрд░реНрдиреБрд╣реЛрд╕реНред `<PASSWORD>` рд▓рд╛рдИ рддрдкрд╛рдИрдВрдХреЛ WiFi рдкрд╛рд╕рд╡рд░реНрдбрд▓реЗ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрди рдЧрд░реНрдиреБрд╣реЛрд╕реНред

1. `main.cpp` рдлрд╛рдЗрд▓ рдЦреЛрд▓реНрдиреБрд╣реЛрд╕реНред

1. рдлрд╛рдЗрд▓рдХреЛ рдорд╛рдерд┐ рдирд┐рдореНрди `#include` рдирд┐рд░реНрджреЗрд╢рдирд╣рд░реВ рдердкреНрдиреБрд╣реЛрд╕реН:

    ```cpp
    #include <PubSubClient.h>
    #include <rpcWiFi.h>
    #include <SPI.h>
    
    #include "config.h"
    ```

    рдпрд╕рд▓реЗ рддрдкрд╛рдИрдВрд▓реЗ рдкрд╣рд┐рд▓реЗ рдердкреЗрдХрд╛ рд▓рд╛рдЗрдмреНрд░реЗрд░реАрд╣рд░реВрдХреЛ рд╣реЗрдбрд░ рдлрд╛рдЗрд▓рд╣рд░реВ, рд╕рд╛рдереИ рдХрдиреНрдлрд┐рдЧ рд╣реЗрдбрд░ рдлрд╛рдЗрд▓ рд╕рдорд╛рд╡реЗрд╢ рдЧрд░реНрджрдЫред рдпреА рд╣реЗрдбрд░ рдлрд╛рдЗрд▓рд╣рд░реВ PlatformIO рд▓рд╛рдИ рд▓рд╛рдЗрдмреНрд░реЗрд░реАрд╣рд░реВрдХреЛ рдХреЛрдб рд▓реНрдпрд╛рдЙрди рднрдиреНрди рдЖрд╡рд╢реНрдпрдХ рдЫред рдпреА рд╣реЗрдбрд░ рдлрд╛рдЗрд▓рд╣рд░реВ рд╕реНрдкрд╖реНрдЯ рд░реВрдкрдорд╛ рд╕рдорд╛рд╡реЗрд╢ рдирдЧрд░реЗрд╕рдореНрдо, рдХреЗрд╣реА рдХреЛрдб рдХрдореНрдкрд╛рдЗрд▓ рдЧрд░рд┐рдиреЗ рдЫреИрди рд░ рддрдкрд╛рдИрдВрд▓рд╛рдИ рдХрдореНрдкрд╛рдЗрд▓рд░ рддреНрд░реБрдЯрд┐рд╣рд░реВ рдкреНрд░рд╛рдкреНрдд рд╣реБрдиреЗрдЫред

1. `setup` рдлрдЩреНрд╕рдирдХреЛ рдорд╛рдерд┐ рдирд┐рдореНрди рдХреЛрдб рдердкреНрдиреБрд╣реЛрд╕реН:

    ```cpp
    void connectWiFi()
    {
        while (WiFi.status() != WL_CONNECTED)
        {
            Serial.println("Connecting to WiFi..");
            WiFi.begin(SSID, PASSWORD);
            delay(500);
        }
    
        Serial.println("Connected!");
    }
    ```

    рдпреЛ рдХреЛрдбрд▓реЗ рдЙрдкрдХрд░рдг WiFi рд╕рдБрдЧ рдЬрдбрд╛рди рдирднрдПрд╕рдореНрдо рд▓реБрдк рдЧрд░реНрдЫ, рд░ рдХрдиреНрдлрд┐рдЧ рд╣реЗрдбрд░ рдлрд╛рдЗрд▓рдмрд╛рдЯ SSID рд░ рдкрд╛рд╕рд╡рд░реНрдб рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрд░ рдЬрдбрд╛рди рдкреНрд░рдпрд╛рд╕ рдЧрд░реНрдЫред

1. рдкрд┐рдирд╣рд░реВ рдХрдиреНрдлрд┐рдЧрд░ рдЧрд░реЗрдкрдЫрд┐ `setup` рдлрдЩреНрд╕рдирдХреЛ рддрд▓ рдпрд╕ рдлрдЩреНрд╕рдирд▓рд╛рдИ рдХрд▓ рдЧрд░реНрдиреБрд╣реЛрд╕реНред

    ```cpp
    connectWiFi();
    ```

1. WiFi рдЬрдбрд╛рди рдХрд╛рдо рдЧрд░рд┐рд░рд╣реЗрдХреЛ рдЫ рдХрд┐ рдЫреИрди рдЬрд╛рдБрдЪреНрди рдпреЛ рдХреЛрдб рддрдкрд╛рдИрдВрдХреЛ рдЙрдкрдХрд░рдгрдорд╛ рдЕрдкрд▓реЛрдб рдЧрд░реНрдиреБрд╣реЛрд╕реНред рддрдкрд╛рдИрдВрд▓реЗ рдпреЛ рд╕рд┐рд░рд┐рдпрд▓ рдореЛрдирд┐рдЯрд░рдорд╛ рджреЗрдЦреНрдиреБрд╣реБрдиреЗрдЫред

    ```output
    > Executing task: platformio device monitor <
    
    --- Available filters and text transformations: colorize, debug, default, direct, hexlify, log2file, nocontrol, printable, send_on_enter, time
    --- More details at http://bit.ly/pio-monitor-filters
    --- Miniterm on /dev/cu.usbmodem1101  9600,8,N,1 ---
    --- Quit: Ctrl+C | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H ---
    Connecting to WiFi..
    Connected!
    ```

## MQTT рд╕рдБрдЧ рдЬрдбрд╛рди рдЧрд░реНрдиреБрд╣реЛрд╕реН

Wio Terminal WiFi рд╕рдБрдЧ рдЬрдбрд╛рди рднрдПрдкрдЫрд┐, рдпреЛ MQTT рдмреНрд░реЛрдХрд░рд╕рдБрдЧ рдЬрдбрд╛рди рдЧрд░реНрди рд╕рдХреНрдЫред

### рдХрд╛рд░реНрдп - MQTT рд╕рдБрдЧ рдЬрдбрд╛рди рдЧрд░реНрдиреБрд╣реЛрд╕реН

MQTT рдмреНрд░реЛрдХрд░рд╕рдБрдЧ рдЬрдбрд╛рди рдЧрд░реНрдиреБрд╣реЛрд╕реНред

1. MQTT рдмреНрд░реЛрдХрд░рдХреЛ рдЬрдбрд╛рди рд╡рд┐рд╡рд░рдг рдкрд░рд┐рднрд╛рд╖рд┐рдд рдЧрд░реНрди `config.h` рдлрд╛рдЗрд▓рдХреЛ рдЕрдиреНрддреНрдпрдорд╛ рдирд┐рдореНрди рдХреЛрдб рдердкреНрдиреБрд╣реЛрд╕реН:

    ```cpp
    // MQTT settings
    const string ID = "<ID>";
    
    const string BROKER = "test.mosquitto.org";
    const string CLIENT_NAME = ID + "nightlight_client";
    ```

    `<ID>` рд▓рд╛рдИ рдПрдХ рдЕрджреНрд╡рд┐рддреАрдп ID рд▓реЗ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрди рдЧрд░реНрдиреБрд╣реЛрд╕реН, рдЬреБрди рдпреЛ рдЙрдкрдХрд░рдг рдХреНрд▓рд╛рдЗрдиреНрдЯрдХреЛ рдирд╛рдордХреЛ рд░реВрдкрдорд╛ рдкреНрд░рдпреЛрдЧ рд╣реБрдиреЗрдЫ, рд░ рдкрдЫрд┐ рдпрд╕ рдЙрдкрдХрд░рдгрд▓реЗ рдкреНрд░рдХрд╛рд╢рд┐рдд рд░ рд╕рджрд╕реНрдпрддрд╛ рд▓рд┐рдиреЗ рд╡рд┐рд╖рдпрд╣рд░реВрдХреЛ рд▓рд╛рдЧрд┐ред *test.mosquitto.org* рдмреНрд░реЛрдХрд░ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдЫ рд░ рдзреЗрд░реИ рд╡реНрдпрдХреНрддрд┐рд╣рд░реВ, рдпрд╕ рдХрд╛рд░реНрдпрдорд╛ рдХрд╛рдо рдЧрд░рд┐рд░рд╣реЗрдХрд╛ рдЕрдиреНрдп рд╡рд┐рджреНрдпрд╛рд░реНрдереАрд╣рд░реВ рд╕рдореЗрдд, рджреНрд╡рд╛рд░рд╛ рдкреНрд░рдпреЛрдЧ рдЧрд░рд┐рдиреНрдЫред рдЕрджреНрд╡рд┐рддреАрдп MQTT рдХреНрд▓рд╛рдЗрдиреНрдЯ рдирд╛рдо рд░ рд╡рд┐рд╖рдп рдирд╛рдорд╣рд░реВрд▓реЗ рддрдкрд╛рдИрдВрдХреЛ рдХреЛрдб рдЕрд░реВ рдХрд╕реИрдХреЛ рдХреЛрдбрд╕рдБрдЧ рдЯрдХрд░рд╛рдЙрдиреЗ рдЫреИрди рднрдиреНрдиреЗ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдЧрд░реНрджрдЫред рддрдкрд╛рдИрдВрд▓реЗ рдпреЛ ID рдпрд╕ рдХрд╛рд░реНрдпрдХреЛ рдкрдЫрд┐ рд╕рд░реНрднрд░ рдХреЛрдб рд╕рд┐рд░реНрдЬрдирд╛ рдЧрд░реНрджрд╛ рдкрдирд┐ рдЖрд╡рд╢реНрдпрдХ рдкрд░реНрди рд╕рдХреНрдЫред

    > ЁЯТБ рддрдкрд╛рдИрдВ [GUIDGen](https://www.guidgen.com) рдЬрд╕реНрддреЛ рд╡реЗрдмрд╕рд╛рдЗрдЯ рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрд░ рдЕрджреНрд╡рд┐рддреАрдп ID рд╕рд┐рд░реНрдЬрдирд╛ рдЧрд░реНрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫред

    `BROKER` рднрдиреЗрдХреЛ MQTT рдмреНрд░реЛрдХрд░рдХреЛ URL рд╣реЛред

    `CLIENT_NAME` рднрдиреЗрдХреЛ рдмреНрд░реЛрдХрд░рдорд╛ рдпреЛ MQTT рдХреНрд▓рд╛рдЗрдиреНрдЯрдХреЛ рдЕрджреНрд╡рд┐рддреАрдп рдирд╛рдо рд╣реЛред

1. `main.cpp` рдлрд╛рдЗрд▓ рдЦреЛрд▓реНрдиреБрд╣реЛрд╕реН, рд░ `connectWiFi` рдлрдЩреНрд╕рдирдХреЛ рддрд▓ рд░ `setup` рдлрдЩреНрд╕рдирдХреЛ рдорд╛рдерд┐ рдирд┐рдореНрди рдХреЛрдб рдердкреНрдиреБрд╣реЛрд╕реН:

    ```cpp
    WiFiClient wioClient;
    PubSubClient client(wioClient);
    ```

    рдпреЛ рдХреЛрдбрд▓реЗ Wio Terminal WiFi рд▓рд╛рдЗрдмреНрд░реЗрд░реАрд╣рд░реВ рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрд░ WiFi рдХреНрд▓рд╛рдЗрдиреНрдЯ рд╕рд┐рд░реНрдЬрдирд╛ рдЧрд░реНрдЫ рд░ рдпрд╕рд▓рд╛рдИ рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрд░ MQTT рдХреНрд▓рд╛рдЗрдиреНрдЯ рдмрдирд╛рдЙрдБрдЫред

1. рдпрд╕ рдХреЛрдбрдХреЛ рддрд▓ рдирд┐рдореНрди рдердкреНрдиреБрд╣реЛрд╕реН:

    ```cpp
    void reconnectMQTTClient()
    {
        while (!client.connected())
        {
            Serial.print("Attempting MQTT connection...");
    
            if (client.connect(CLIENT_NAME.c_str()))
            {
                Serial.println("connected");
            }
            else
            {
                Serial.print("Retying in 5 seconds - failed, rc=");
                Serial.println(client.state());
                
                delay(5000);
            }
        }
    }
    ```

    рдпреЛ рдлрдЩреНрд╕рдирд▓реЗ MQTT рдмреНрд░реЛрдХрд░рд╕рдБрдЧ рдЬрдбрд╛рди рдкрд░реАрдХреНрд╖рдг рдЧрд░реНрдЫ рд░ рдЬрдбрд╛рди рдирднрдПрдорд╛ рдкреБрди: рдЬрдбрд╛рди рдЧрд░реНрдЫред рдпреЛ рдЬрдбрд╛рди рдирднрдПрд╕рдореНрдо рд▓реБрдк рдЧрд░реНрдЫ рд░ рдХрдиреНрдлрд┐рдЧ рд╣реЗрдбрд░ рдлрд╛рдЗрд▓рдорд╛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдЕрджреНрд╡рд┐рддреАрдп рдХреНрд▓рд╛рдЗрдиреНрдЯ рдирд╛рдо рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрд░ рдЬрдбрд╛рди рдкреНрд░рдпрд╛рд╕ рдЧрд░реНрдЫред

    рдпрджрд┐ рдЬрдбрд╛рди рдЕрд╕рдлрд▓ рднрдпреЛ рднрдиреЗ, рдпреЛ рел рд╕реЗрдХреЗрдиреНрдбрдкрдЫрд┐ рдкреБрди: рдкреНрд░рдпрд╛рд╕ рдЧрд░реНрдЫред

1. `reconnectMQTTClient` рдлрдЩреНрд╕рдирдХреЛ рддрд▓ рдирд┐рдореНрди рдХреЛрдб рдердкреНрдиреБрд╣реЛрд╕реН:

    ```cpp
    void createMQTTClient()
    {
        client.setServer(BROKER.c_str(), 1883);
        reconnectMQTTClient();
    }
    ```

    рдпреЛ рдХреЛрдбрд▓реЗ рдХреНрд▓рд╛рдЗрдиреНрдЯрдХреЛ рд▓рд╛рдЧрд┐ MQTT рдмреНрд░реЛрдХрд░ рд╕реЗрдЯ рдЧрд░реНрдЫ, рд╕рд╛рдереИ рд╕рдиреНрджреЗрд╢ рдкреНрд░рд╛рдкреНрдд рд╣реБрдБрджрд╛ рдХрд▓ рд╣реБрдиреЗ рдХреНрдпрд╛рд▓рдмреНрдпрд╛рдХ рд╕реЗрдЯ рдЧрд░реНрдЫред рддреНрдпрд╕рдкрдЫрд┐ рдпреЛ рдмреНрд░реЛрдХрд░рд╕рдБрдЧ рдЬрдбрд╛рди рдкреНрд░рдпрд╛рд╕ рдЧрд░реНрдЫред

1. WiFi рдЬрдбрд╛рди рднрдПрдкрдЫрд┐ `setup` рдлрдЩреНрд╕рдирдорд╛ `createMQTTClient` рдлрдЩреНрд╕рдирд▓рд╛рдИ рдХрд▓ рдЧрд░реНрдиреБрд╣реЛрд╕реНред

1. `loop` рдлрдЩреНрд╕рдирд▓рд╛рдИ рдирд┐рдореНрди рдХреЛрдбрд▓реЗ рдкреВрд░реНрдг рд░реВрдкрдорд╛ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрди рдЧрд░реНрдиреБрд╣реЛрд╕реН:

    ```cpp
    void loop()
    {
        reconnectMQTTClient();
        client.loop();
    
        delay(2000);
    }
    ```

    рдпреЛ рдХреЛрдбрд▓реЗ MQTT рдмреНрд░реЛрдХрд░рд╕рдБрдЧ рдкреБрди: рдЬрдбрд╛рди рдЧрд░реЗрд░ рд╕реБрд░реБ рдЧрд░реНрдЫред рдпреА рдЬрдбрд╛рдирд╣рд░реВ рд╕рдЬрд┐рд▓реИ рдЯреБрдЯреНрди рд╕рдХреНрдЫрдиреН, рддреНрдпрд╕реИрд▓реЗ рдирд┐рдпрдорд┐рдд рд░реВрдкрдорд╛ рдЬрд╛рдБрдЪ рдЧрд░реНрдиреБ рд░ рдЖрд╡рд╢реНрдпрдХ рдкрд░реЗрдорд╛ рдкреБрди: рдЬрдбрд╛рди рдЧрд░реНрдиреБ рдЙрдЪрд┐рдд рд╣реБрдиреНрдЫред рддреНрдпрд╕рдкрдЫрд┐ рдпреЛ MQTT рдХреНрд▓рд╛рдЗрдиреНрдЯрдорд╛ `loop` рдореЗрдердбрд▓рд╛рдИ рдХрд▓ рдЧрд░реНрдЫ, рдЬрд╕рд▓реЗ рд╕рджрд╕реНрдпрддрд╛ рд▓рд┐рдПрдХреЛ рд╡рд┐рд╖рдпрдорд╛ рдЖрдЙрдиреЗ рдХреБрдиреИ рдкрдирд┐ рд╕рдиреНрджреЗрд╢рд╣рд░реВ рдкреНрд░рд╢реЛрдзрди рдЧрд░реНрдЫред рдпреЛ рдПрдк рдПрдХрд▓-рдереНрд░реЗрдбреЗрдб рд╣реЛ, рддреНрдпрд╕реИрд▓реЗ рд╕рдиреНрджреЗрд╢рд╣рд░реВ рдкреГрд╖реНрдарднреВрдорд┐ рдереНрд░реЗрдбрдорд╛ рдкреНрд░рд╛рдкреНрдд рдЧрд░реНрди рд╕рдХрд┐рдБрджреИрди, рддреНрдпрд╕реИрд▓реЗ рдореБрдЦреНрдп рдереНрд░реЗрдбрдорд╛ рдиреЗрдЯрд╡рд░реНрдХ рдЬрдбрд╛рдирдорд╛ рдкрд░реНрдЦрд┐рд░рд╣реЗрдХрд╛ рд╕рдиреНрджреЗрд╢рд╣рд░реВ рдкреНрд░рд╢реЛрдзрди рдЧрд░реНрди рд╕рдордп рдЫреБрдЯреНрдпрд╛рдЙрди рдЖрд╡рд╢реНрдпрдХ рдЫред

    рдЕрдиреНрддрдорд╛, реи рд╕реЗрдХреЗрдиреНрдбрдХреЛ рдврд┐рд▓рд╛рдЗрд▓реЗ рдкреНрд░рдХрд╛рд╢ рд╕реНрддрд░рд╣рд░реВ рдзреЗрд░реИ рдкрдЯрдХ рдкрдард╛рдЙрдирдмрд╛рдЯ рд░реЛрдХреНрдЫ рд░ рдЙрдкрдХрд░рдгрдХреЛ рдкрд╛рд╡рд░ рдЦрдкрдд рдШрдЯрд╛рдЙрдБрдЫред

1. рдХреЛрдбрд▓рд╛рдИ рдЖрдлреНрдиреЛ Wio Terminal рдорд╛ рдЕрдкрд▓реЛрдб рдЧрд░реНрдиреБрд╣реЛрд╕реН, рд░ рд╕рд┐рд░рд┐рдпрд▓ рдореЛрдирд┐рдЯрд░ рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрд░ рдЙрдкрдХрд░рдг WiFi рд░ MQTT рд╕рдБрдЧ рдЬрдбрд╛рди рднрдПрдХреЛ рд╣реЗрд░реНрдиреБрд╣реЛрд╕реНред

    ```output
    > Executing task: platformio device monitor <
    
    source /Users/jimbennett/GitHub/IoT-For-Beginners/1-getting-started/lessons/4-connect-internet/code-mqtt/wio-terminal/nightlight/.venv/bin/activate
    --- Available filters and text transformations: colorize, debug, default, direct, hexlify, log2file, nocontrol, printable, send_on_enter, time
    --- More details at http://bit.ly/pio-monitor-filters
    --- Miniterm on /dev/cu.usbmodem1201  9600,8,N,1 ---
    --- Quit: Ctrl+C | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H ---
    Connecting to WiFi..
    Connected!
    Attempting MQTT connection...connected
    ```

> ЁЯТБ рддрдкрд╛рдИрдВ рдпреЛ рдХреЛрдб [code-mqtt/wio-terminal](../../../../../1-getting-started/lessons/4-connect-internet/code-mqtt/wio-terminal) рдлреЛрд▓реНрдбрд░рдорд╛ рдлреЗрд▓рд╛ рдкрд╛рд░реНрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫред

ЁЯША рддрдкрд╛рдИрдВрд▓реЗ рдЖрдлреНрдиреЛ рдЙрдкрдХрд░рдгрд▓рд╛рдИ рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ MQTT рдмреНрд░реЛрдХрд░рд╕рдБрдЧ рдЬрдбрд╛рди рдЧрд░реНрдиреБрднрдпреЛред

---

**рдЕрд╕реНрд╡реАрдХрд░рдг**:  
рдпреЛ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ AI рдЕрдиреБрд╡рд╛рдж рд╕реЗрд╡рд╛ [Co-op Translator](https://github.com/Azure/co-op-translator) рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрд░ рдЕрдиреБрд╡рд╛рдж рдЧрд░рд┐рдПрдХреЛ рдЫред рд╣рд╛рдореА рд╢реБрджреНрдзрддрд╛рдХреЛ рд▓рд╛рдЧрд┐ рдкреНрд░рдпрд╛рд╕ рдЧрд░реНрдЫреМрдВ, рддрд░ рдХреГрдкрдпрд╛ рдзреНрдпрд╛рди рджрд┐рдиреБрд╣реЛрд╕реН рдХрд┐ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдЕрдиреБрд╡рд╛рджрдорд╛ рддреНрд░реБрдЯрд┐рд╣рд░реВ рд╡рд╛ рдЕрд╢реБрджреНрдзрддрд╛рд╣рд░реВ рд╣реБрди рд╕рдХреНрдЫред рдпрд╕рдХреЛ рдореВрд▓ рднрд╛рд╖рд╛ рдорд╛ рд░рд╣реЗрдХреЛ рдореВрд▓ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝рд▓рд╛рдИ рдЖрдзрд┐рдХрд╛рд░рд┐рдХ рд╕реНрд░реЛрдд рдорд╛рдирд┐рдиреБрдкрд░реНрдЫред рдорд╣рддреНрд╡рдкреВрд░реНрдг рдЬрд╛рдирдХрд╛рд░реАрдХреЛ рд▓рд╛рдЧрд┐, рд╡реНрдпрд╛рд╡рд╕рд╛рдпрд┐рдХ рдорд╛рдирд╡ рдЕрдиреБрд╡рд╛рдж рд╕рд┐рдлрд╛рд░рд┐рд╕ рдЧрд░рд┐рдиреНрдЫред рдпрд╕ рдЕрдиреБрд╡рд╛рджрдХреЛ рдкреНрд░рдпреЛрдЧрдмрд╛рдЯ рдЙрддреНрдкрдиреНрди рд╣реБрдиреЗ рдХреБрдиреИ рдкрдирд┐ рдЧрд▓рддрдлрд╣рдореА рд╡рд╛ рдЧрд▓рдд рд╡реНрдпрд╛рдЦреНрдпрд╛рдХреЛ рд▓рд╛рдЧрд┐ рд╣рд╛рдореА рдЬрд┐рдореНрдореЗрд╡рд╛рд░ рд╣реБрдиреЗ рдЫреИрдиреМрдВред