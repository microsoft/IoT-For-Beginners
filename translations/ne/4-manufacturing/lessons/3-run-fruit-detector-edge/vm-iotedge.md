<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "24dc783a600e20251211987b36370e93",
  "translation_date": "2025-08-27T10:42:33+00:00",
  "source_file": "4-manufacturing/lessons/3-run-fruit-detector-edge/vm-iotedge.md",
  "language_code": "ne"
}
-->
# IoT Edge рдЪрд▓рд╛рдЙрдиреЗ рднрд░реНрдЪреБрдЕрд▓ рдореЗрд╕рд┐рди рдмрдирд╛рдЙрдиреБрд╣реЛрд╕реН

Azure рдорд╛, рддрдкрд╛рдИрдВ рднрд░реНрдЪреБрдЕрд▓ рдореЗрд╕рд┐рди рдмрдирд╛рдЙрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫ - рдХреНрд▓рд╛рдЙрдбрдорд╛ рд░рд╣реЗрдХреЛ рдХрдореНрдкреНрдпреБрдЯрд░ рдЬрд╕рд▓рд╛рдИ рддрдкрд╛рдИрдВ рдЖрдлреНрдиреЛ рдЗрдЪреНрдЫрд╛рдЕрдиреБрд╕рд╛рд░ рдХрдиреНрдлрд┐рдЧрд░ рдЧрд░реНрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫ рд░ рдЖрдлреНрдиреЛ рд╕рдлреНрдЯрд╡реЗрдпрд░ рдЪрд▓рд╛рдЙрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫред

> ЁЯТБ рддрдкрд╛рдИрдВ рднрд░реНрдЪреБрдЕрд▓ рдореЗрд╕рд┐рдирдХреЛ рдмрд╛рд░реЗрдорд╛ [рд╡рд┐рдХрд┐рдкрд┐рдбрд┐рдпрд╛рдХреЛ рднрд░реНрдЪреБрдЕрд▓ рдореЗрд╕рд┐рди рдкреГрд╖реНрда](https://wikipedia.org/wiki/Virtual_machine) рдорд╛ рдердк рдЬрд╛рдирдХрд╛рд░реА рдкрдвреНрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫред

## рдХрд╛рд░реНрдп - IoT Edge рднрд░реНрдЪреБрдЕрд▓ рдореЗрд╕рд┐рди рд╕реЗрдЯрдЕрдк рдЧрд░реНрдиреБрд╣реЛрд╕реН

1. Azure IoT Edge рдкрд╣рд┐рд▓реЗ рдиреИ рдкреНрд░рд┐-рдЗрдиреНрд╕реНрдЯрд▓ рдЧрд░рд┐рдПрдХреЛ VM рдмрдирд╛рдЙрди рдирд┐рдореНрди рдХрдорд╛рдгреНрдб рдЪрд▓рд╛рдЙрдиреБрд╣реЛрд╕реН:

    ```sh
    az deployment group create \
                --resource-group fruit-quality-detector \
                --template-uri https://raw.githubusercontent.com/Azure/iotedge-vm-deploy/1.2.0/edgeDeploy.json \
                --parameters dnsLabelPrefix=<vm_name> \
                --parameters adminUsername=<username> \
                --parameters deviceConnectionString="<connection_string>" \
                --parameters authenticationType=password \
                --parameters adminPasswordOrKey="<password>"
    ```

    `<vm_name>` рд▓рд╛рдИ рдЖрдлреНрдиреЛ рднрд░реНрдЪреБрдЕрд▓ рдореЗрд╕рд┐рдирдХреЛ рдирд╛рдорд▓реЗ рдмрджрд▓реНрдиреБрд╣реЛрд╕реНред рдпреЛ рдирд╛рдо рд╡рд┐рд╢реНрд╡рд╡реНрдпрд╛рдкреА рд░реВрдкрдорд╛ рдЕрджреНрд╡рд┐рддреАрдп рд╣реБрдиреБрдкрд░реНрдЫ, рддреНрдпрд╕реИрд▓реЗ `fruit-quality-detector-vm-` рдЬрд╕реНрддреИ рдирд╛рдордХреЛ рдЕрдиреНрддреНрдпрдорд╛ рдЖрдлреНрдиреЛ рдирд╛рдо рд╡рд╛ рдЕрдиреНрдп рдорд╛рди рдкреНрд░рдпреЛрдЧ рдЧрд░реНрдиреБрд╣реЛрд╕реНред

    `<username>` рд░ `<password>` рд▓рд╛рдИ VM рдорд╛ рд▓рдЧрдЗрди рдЧрд░реНрди рдкреНрд░рдпреЛрдЧ рдЧрд░рд┐рдиреЗ рдпреБрдЬрд░рдиреЗрдо рд░ рдкрд╛рд╕рд╡рд░реНрдбрд▓реЗ рдмрджрд▓реНрдиреБрд╣реЛрд╕реНред рдпреА рд╕реБрд░рдХреНрд╖рд┐рдд рд╣реБрдиреБрдкрд░реНрдЫ, рддреНрдпрд╕реИрд▓реЗ admin/password рдЬрд╕реНрддрд╛ рд╕рд╛рдорд╛рдиреНрдп рдкрд╛рд╕рд╡рд░реНрдб рдкреНрд░рдпреЛрдЧ рдЧрд░реНрди рд╕рдХрд┐рдБрджреИрдиред

    `<connection_string>` рд▓рд╛рдИ рдЖрдлреНрдиреЛ `fruit-quality-detector-edge` IoT Edge рдЙрдкрдХрд░рдгрдХреЛ рдХрдиреЗрдХреНрд╢рди рд╕реНрдЯреНрд░рд┐рдЩрд▓реЗ рдмрджрд▓реНрдиреБрд╣реЛрд╕реНред

    рдпреЛ VM `DS1 v2` рднрд░реНрдЪреБрдЕрд▓ рдореЗрд╕рд┐рдирдХреЛ рд░реВрдкрдорд╛ рдХрдиреНрдлрд┐рдЧрд░ рд╣реБрдиреЗрдЫред рдпреА рд╢реНрд░реЗрдгреАрд╣рд░реВрд▓реЗ рдореЗрд╕рд┐рди рдХрддрд┐ рд╢рдХреНрддрд┐рд╢рд╛рд▓реА рдЫ рд░ рддреНрдпрд╕реИрд▓реЗ рдХрддрд┐ рдЦрд░реНрдЪ рд▓рд╛рдЧреНрдЫ рднрдиреНрдиреЗ рд╕рдВрдХреЗрдд рдЧрд░реНрдЫред рдпрд╕ VM рдорд╛ 1 CPU рд░ 3.5GB RAM рдЫред

    > ЁЯТ░ рдпреА VM рд╣рд░реВрдХреЛ рд╣рд╛рд▓рдХреЛ рдореВрд▓реНрдп [Azure Virtual Machine рдореВрд▓реНрдп рдорд╛рд░реНрдЧрджрд░реНрд╢рди](https://azure.microsoft.com/pricing/details/virtual-machines/linux/?WT.mc_id=academic-17441-jabenn) рдорд╛ рд╣реЗрд░реНрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫред

    VM рдмрдирд┐рд╕рдХреЗрдкрдЫрд┐, IoT Edge рд░рдирдЯрд╛рдЗрдо рд╕реНрд╡рддрдГ рдЗрдиреНрд╕реНрдЯрд▓ рд╣реБрдиреЗрдЫ рд░ рддрдкрд╛рдИрдВрдХреЛ `fruit-quality-detector-edge` рдЙрдкрдХрд░рдгрдХреЛ рд░реВрдкрдорд╛ IoT Hub рдорд╛ рдЬрдбрд╛рди рдЧрд░реНрди рдХрдиреНрдлрд┐рдЧрд░ рд╣реБрдиреЗрдЫред

1. VM рдмрд╛рдЯ рдЗрдореЗрдЬ рдХреНрд▓рд╛рд╕рд┐рдлрд╛рдпрд░рд▓рд╛рдИ рдХрд▓ рдЧрд░реНрдирдХреЛ рд▓рд╛рдЧрд┐ рддрдкрд╛рдИрдВрд▓рд╛рдИ VM рдХреЛ IP рдареЗрдЧрд╛рдирд╛ рд╡рд╛ DNS рдирд╛рдо рдЪрд╛рд╣рд┐рдиреНрдЫред рдпреЛ рдкреНрд░рд╛рдкреНрдд рдЧрд░реНрди рдирд┐рдореНрди рдХрдорд╛рдгреНрдб рдЪрд▓рд╛рдЙрдиреБрд╣реЛрд╕реН:

    ```sh
    az vm list --resource-group fruit-quality-detector \
               --output table \
               --show-details
    ```

    `PublicIps` рдлреАрд▓реНрдб рд╡рд╛ `Fqdns` рдлреАрд▓реНрдбрдХреЛ рдкреНрд░рддрд┐рд▓рд┐рдкрд┐ рд▓рд┐рдиреБрд╣реЛрд╕реНред

1. VM рд╣рд░реВрдХреЛ рдЦрд░реНрдЪ рд▓рд╛рдЧреНрдЫред рд▓реЗрдЦреНрдиреЗ рд╕рдордпрдорд╛, DS1 VM рдХреЛ рд▓рд╛рдЧрдд рд▓рдЧрднрдЧ $0.06 рдкреНрд░рддрд┐ рдШрдгреНрдЯрд╛ рдЫред рдЦрд░реНрдЪ рдХрдо рдЧрд░реНрдирдХреЛ рд▓рд╛рдЧрд┐, рддрдкрд╛рдИрдВрд▓реЗ VM рдкреНрд░рдпреЛрдЧ рдирдЧрд░реНрджрд╛ рдмрдиреНрдж рдЧрд░реНрдиреБрдкрд░реНрдЫ рд░ рдпреЛ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рд╕рдорд╛рдкреНрдд рднрдПрдкрдЫрд┐ рдореЗрдЯрд╛рдЙрдиреБрдкрд░реНрдЫред

    рддрдкрд╛рдИрдВ рдЖрдлреНрдиреЛ VM рд▓рд╛рдИ рдкреНрд░рддреНрдпреЗрдХ рджрд┐рди рдирд┐рд╢реНрдЪрд┐рдд рд╕рдордпрдорд╛ рд╕реНрд╡рддрдГ рдмрдиреНрдж рд╣реБрдиреЗ рдЧрд░реА рдХрдиреНрдлрд┐рдЧрд░ рдЧрд░реНрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫред рдпрд╕рд▓реЗ рддрдкрд╛рдИрдВрд▓реЗ рдмрдиреНрдж рдЧрд░реНрди рдмрд┐рд░реНрд╕рдиреБрднрдпреЛ рднрдиреЗ рдкрдирд┐ рд╕реНрд╡рддрдГ рдмрдиреНрдж рд╣реБрдиреЗ рд╕рдордпрд╕рдореНрдо рдорд╛рддреНрд░ рдмрд┐рд▓ рд╣реБрдиреЗрдЫред рдпреЛ рд╕реЗрдЯ рдЧрд░реНрди рдирд┐рдореНрди рдХрдорд╛рдгреНрдб рдкреНрд░рдпреЛрдЧ рдЧрд░реНрдиреБрд╣реЛрд╕реН:

    ```sh
    az vm auto-shutdown --resource-group fruit-quality-detector \
                        --name <vm_name> \
                        --time <shutdown_time_utc>
    ```

    `<vm_name>` рд▓рд╛рдИ рдЖрдлреНрдиреЛ рднрд░реНрдЪреБрдЕрд▓ рдореЗрд╕рд┐рдирдХреЛ рдирд╛рдорд▓реЗ рдмрджрд▓реНрдиреБрд╣реЛрд╕реНред

    `<shutdown_time_utc>` рд▓рд╛рдИ UTC рд╕рдордпрдХреЛ рд░реВрдкрдорд╛ 4 рдЕрдВрдХ HHMM рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрд░ VM рдмрдиреНрдж рдЧрд░реНрди рдЪрд╛рд╣реЗрдХреЛ рд╕рдордпрд▓реЗ рдмрджрд▓реНрдиреБрд╣реЛрд╕реНред рдЙрджрд╛рд╣рд░рдгрдХрд╛ рд▓рд╛рдЧрд┐, рдпрджрд┐ рддрдкрд╛рдИрдВ UTC рдорд╛ рдордзреНрдпрд░рд╛рддрдорд╛ рдмрдиреНрдж рдЧрд░реНрди рдЪрд╛рд╣рдиреБрд╣реБрдиреНрдЫ рднрдиреЗ, рдпрд╕рд▓рд╛рдИ `0000` рд╕реЗрдЯ рдЧрд░реНрдиреБрд╣реЛрд╕реНред рдкрд╢реНрдЪрд┐рдореА рдЕрдореЗрд░рд┐рдХрд╛ рддрдЯрдХреЛ 7:30PM рдХреЛ рд▓рд╛рдЧрд┐, рддрдкрд╛рдИрдВрд▓реЗ `0230` рдкреНрд░рдпреЛрдЧ рдЧрд░реНрдиреБрд╣реБрдиреЗрдЫ (рдкрд╢реНрдЪрд┐рдореА рдЕрдореЗрд░рд┐рдХрд╛ рддрдЯрдХреЛ 7:30PM UTC рдорд╛ 2:30AM рд╣реЛ)ред

1. рддрдкрд╛рдИрдВрдХреЛ рдЗрдореЗрдЬ рдХреНрд▓рд╛рд╕рд┐рдлрд╛рдпрд░ рдпреЛ рдПрдЬ рдЙрдкрдХрд░рдгрдорд╛ рдЪрд▓рд┐рд░рд╣реЗрдХреЛ рд╣реБрдиреЗрдЫ, рдкреЛрд░реНрдЯ 80 (рдорд╛рдирдХ HTTP рдкреЛрд░реНрдЯ) рдорд╛ рд╕реБрдиреНрджреИред рдбрд┐рдлрд▓реНрдЯ рд░реВрдкрдорд╛, рднрд░реНрдЪреБрдЕрд▓ рдореЗрд╕рд┐рдирд╣рд░реВрдорд╛ рдЗрдирдмрд╛рдЙрдиреНрдб рдкреЛрд░реНрдЯрд╣рд░реВ рдмреНрд▓рдХ рдЧрд░рд┐рдиреНрдЫ, рддреНрдпрд╕реИрд▓реЗ рддрдкрд╛рдИрдВрд▓реЗ рдкреЛрд░реНрдЯ 80 рд╕рдХреНрд╖рдо рдЧрд░реНрди рдЖрд╡рд╢реНрдпрдХ рдЫред рдкреЛрд░реНрдЯрд╣рд░реВ рдиреЗрдЯрд╡рд░реНрдХ рд╕реБрд░рдХреНрд╖рд╛ рд╕рдореВрд╣рд╣рд░реВрдорд╛ рд╕рдХреНрд╖рдо рдЧрд░рд┐рдиреНрдЫ, рддреНрдпрд╕реИрд▓реЗ рдкрд╣рд┐рд▓реЛрдорд╛ рддрдкрд╛рдИрдВрд▓рд╛рдИ рдЖрдлреНрдиреЛ VM рдХреЛ рдиреЗрдЯрд╡рд░реНрдХ рд╕реБрд░рдХреНрд╖рд╛ рд╕рдореВрд╣рдХреЛ рдирд╛рдо рдерд╛рд╣рд╛ рд╣реБрдиреБрдкрд░реНрдЫ, рдЬреБрди рдирд┐рдореНрди рдХрдорд╛рдгреНрдб рдЪрд▓рд╛рдПрд░ рдкрддреНрддрд╛ рд▓рдЧрд╛рдЙрди рд╕рдХрд┐рдиреНрдЫ:

    ```sh
    az network nsg list --resource-group fruit-quality-detector \
                        --output table
    ```

    `Name` рдлреАрд▓реНрдбрдХреЛ рдорд╛рди рдкреНрд░рддрд┐рд▓рд┐рдкрд┐ рдЧрд░реНрдиреБрд╣реЛрд╕реНред

1. рдкреЛрд░реНрдЯ 80 рдЦреЛрд▓реНрди рдиреЗрдЯрд╡рд░реНрдХ рд╕реБрд░рдХреНрд╖рд╛ рд╕рдореВрд╣рдорд╛ рдирд┐рдпрдо рдердкреНрди рдирд┐рдореНрди рдХрдорд╛рдгреНрдб рдЪрд▓рд╛рдЙрдиреБрд╣реЛрд╕реН:

    ```sh
    az network nsg rule create \
                        --resource-group fruit-quality-detector \
                        --name Port_80 \
                        --protocol tcp \
                        --priority 1010 \
                        --destination-port-range 80 \
                        --nsg-name <nsg name>
    ```

    `<nsg name>` рд▓рд╛рдИ рдЕрдШрд┐рд▓реНрд▓реЛ рдЪрд░рдгрдмрд╛рдЯ рдиреЗрдЯрд╡рд░реНрдХ рд╕реБрд░рдХреНрд╖рд╛ рд╕рдореВрд╣рдХреЛ рдирд╛рдорд▓реЗ рдмрджрд▓реНрдиреБрд╣реЛрд╕реНред

### рдХрд╛рд░реНрдп - рдЖрдлреНрдиреЛ VM рд╡реНрдпрд╡рд╕реНрдерд╛рдкрди рдЧрд░реЗрд░ рдЦрд░реНрдЪ рдШрдЯрд╛рдЙрдиреБрд╣реЛрд╕реН

1. рдЬрдм рддрдкрд╛рдИрдВ рдЖрдлреНрдиреЛ VM рдкреНрд░рдпреЛрдЧ рдЧрд░рд┐рд░рд╣рдиреБрднрдПрдХреЛ рдЫреИрди, рддрдкрд╛рдИрдВрд▓реЗ рдпрд╕рд▓рд╛рдИ рдмрдиреНрдж рдЧрд░реНрдиреБрдкрд░реНрдЫред VM рдмрдиреНрдж рдЧрд░реНрди рдирд┐рдореНрди рдХрдорд╛рдгреНрдб рдкреНрд░рдпреЛрдЧ рдЧрд░реНрдиреБрд╣реЛрд╕реН:

    ```sh
    az vm deallocate --resource-group fruit-quality-detector \
                     --name <vm_name>
    ```

    `<vm_name>` рд▓рд╛рдИ рдЖрдлреНрдиреЛ рднрд░реНрдЪреБрдЕрд▓ рдореЗрд╕рд┐рдирдХреЛ рдирд╛рдорд▓реЗ рдмрджрд▓реНрдиреБрд╣реЛрд╕реНред

    > ЁЯТБ `az vm stop` рдХрдорд╛рдгреНрдб рдЫ рдЬрд╕рд▓реЗ VM рдмрдиреНрдж рдЧрд░реНрдЫ, рддрд░ рдпрд╕рд▓реЗ рдХрдореНрдкреНрдпреБрдЯрд░рд▓рд╛рдИ рддрдкрд╛рдИрдВрдХреЛ рд▓рд╛рдЧрд┐ рдЫреБрдЯреНрдпрд╛рдПрд░ рд░рд╛рдЦреНрдЫ, рддреНрдпрд╕реИрд▓реЗ рддрдкрд╛рдИрдВрд▓реЗ рдЕрдЭреИ рдкрдирд┐ рдЪрд▓рд┐рд░рд╣реЗрдХреЛ рдЬрд╕реНрддреИ рддрд┐рд░реНрдиреБрдкрд░реНрдЫред

1. VM рдкреБрдирдГ рд╕реБрд░реБ рдЧрд░реНрди рдирд┐рдореНрди рдХрдорд╛рдгреНрдб рдкреНрд░рдпреЛрдЧ рдЧрд░реНрдиреБрд╣реЛрд╕реН:

    ```sh
    az vm start --resource-group fruit-quality-detector \
                --name <vm_name>
    ```

    `<vm_name>` рд▓рд╛рдИ рдЖрдлреНрдиреЛ рднрд░реНрдЪреБрдЕрд▓ рдореЗрд╕рд┐рдирдХреЛ рдирд╛рдорд▓реЗ рдмрджрд▓реНрдиреБрд╣реЛрд╕реНред

---

**рдЕрд╕реНрд╡реАрдХрд░рдг**:  
рдпреЛ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ AI рдЕрдиреБрд╡рд╛рдж рд╕реЗрд╡рд╛ [Co-op Translator](https://github.com/Azure/co-op-translator) рдкреНрд░рдпреЛрдЧ рдЧрд░реА рдЕрдиреБрд╡рд╛рдж рдЧрд░рд┐рдПрдХреЛ рд╣реЛред рд╣рд╛рдореА рдпрдерд╛рд╕рдореНрднрд╡ рд╕рдЯреАрдХрддрд╛ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдЧрд░реНрди рдкреНрд░рдпрд╛рд╕ рдЧрд░реНрдЫреМрдВ, рддрд░ рдХреГрдкрдпрд╛ рдзреНрдпрд╛рди рджрд┐рдиреБрд╣реЛрд╕реН рдХрд┐ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдЕрдиреБрд╡рд╛рджрд╣рд░реВрдорд╛ рддреНрд░реБрдЯрд┐рд╣рд░реВ рд╡рд╛ рдЕрд╢реБрджреНрдзрддрд╛рд╣рд░реВ рд╣реБрди рд╕рдХреНрдЫрдиреНред рдпрд╕рдХреЛ рдореВрд▓ рднрд╛рд╖рд╛рдорд╛ рд░рд╣реЗрдХреЛ рдореВрд▓ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝рд▓рд╛рдИ рдЖрдзрд┐рдХрд╛рд░рд┐рдХ рд╕реНрд░реЛрдд рдорд╛рдирд┐рдиреБрдкрд░реНрдЫред рдорд╣рддреНрддреНрд╡рдкреВрд░реНрдг рдЬрд╛рдирдХрд╛рд░реАрдХрд╛ рд▓рд╛рдЧрд┐, рд╡реНрдпрд╛рд╡рд╕рд╛рдпрд┐рдХ рдорд╛рдирд╡ рдЕрдиреБрд╡рд╛рдж рд╕рд┐рдлрд╛рд░рд┐рд╕ рдЧрд░рд┐рдиреНрдЫред рдпрд╕ рдЕрдиреБрд╡рд╛рджрдХреЛ рдкреНрд░рдпреЛрдЧрдмрд╛рдЯ рдЙрддреНрдкрдиреНрди рд╣реБрдиреЗ рдХреБрдиреИ рдкрдирд┐ рдЧрд▓рддрдлрд╣рдореА рд╡рд╛ рдЧрд▓рдд рд╡реНрдпрд╛рдЦреНрдпрд╛рдХрд╛ рд▓рд╛рдЧрд┐ рд╣рд╛рдореА рдЬрд┐рдореНрдореЗрд╡рд╛рд░ рд╣реБрдиреЗ рдЫреИрдиреМрдВред  