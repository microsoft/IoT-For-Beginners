<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "a202fa5889790a3777bfc33dd9f4b459",
  "translation_date": "2025-08-27T13:56:41+00:00",
  "source_file": "6-consumer/lessons/3-spoken-feedback/wio-terminal-text-to-speech.md",
  "language_code": "ne"
}
-->
# рдЯреЗрдХреНрд╕реНрдЯрд▓рд╛рдИ рдЖрд╡рд╛рдЬрдорд╛ рд░реВрдкрд╛рдиреНрддрд░рдг - Wio Terminal

рдпрд╕ рдкрд╛рдардХреЛ рдпрд╕ рднрд╛рдЧрдорд╛, рддрдкрд╛рдИрдВ рдЯреЗрдХреНрд╕реНрдЯрд▓рд╛рдИ рдЖрд╡рд╛рдЬрдорд╛ рд░реВрдкрд╛рдиреНрддрд░рдг рдЧрд░реЗрд░ рдмреЛрд▓реНрдиреЗ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдкреНрд░рджрд╛рди рдЧрд░реНрдиреБрд╣реБрдиреЗрдЫред

## рдЯреЗрдХреНрд╕реНрдЯрд▓рд╛рдИ рдЖрд╡рд╛рдЬрдорд╛ рд░реВрдкрд╛рдиреНрддрд░рдг рдЧрд░реНрдиреБрд╣реЛрд╕реН

рдкрдЫрд┐рд▓реНрд▓реЛ рдкрд╛рдардорд╛ рддрдкрд╛рдИрдВрд▓реЗ рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрдХреЛ рд╕реНрдкреАрдЪ рд╕реЗрд╡рд╛рд╣рд░реВрдХреЛ SDK, рдЬрд╕рд▓реЗ рдЖрд╡рд╛рдЬрд▓рд╛рдИ рдЯреЗрдХреНрд╕реНрдЯрдорд╛ рд░реВрдкрд╛рдиреНрддрд░рдг рдЧрд░реНтАНрдпреЛ, рдЯреЗрдХреНрд╕реНрдЯрд▓рд╛рдИ рдкреБрдирдГ рдЖрд╡рд╛рдЬрдорд╛ рд░реВрдкрд╛рдиреНрддрд░рдг рдЧрд░реНрди рдкрдирд┐ рдкреНрд░рдпреЛрдЧ рдЧрд░реНрди рд╕рдХрд┐рдиреНрдЫред

## рдЖрд╡рд╛рдЬрд╣рд░реВрдХреЛ рд╕реВрдЪреА рдкреНрд░рд╛рдкреНрдд рдЧрд░реНрдиреБрд╣реЛрд╕реН

рдЬрдм рдЖрд╡рд╛рдЬрдХреЛ рдЕрдиреБрд░реЛрдз рдЧрд░рд┐рдиреНрдЫ, рддрдкрд╛рдИрдВрд▓реЗ рдкреНрд░рдпреЛрдЧ рдЧрд░реНрдиреБрдкрд░реНрдиреЗ рдЖрд╡рд╛рдЬ рдкреНрд░рджрд╛рди рдЧрд░реНрдиреБрдкрд░реНрдЫ рдХрд┐рдирднрдиреЗ рд╡рд┐рднрд┐рдиреНрди рдЖрд╡рд╛рдЬрд╣рд░реВ рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрд░ рдЖрд╡рд╛рдЬ рдЙрддреНрдкрдиреНрди рдЧрд░реНрди рд╕рдХрд┐рдиреНрдЫред рдкреНрд░рддреНрдпреЗрдХ рднрд╛рд╖рд╛рд▓реЗ рд╡рд┐рднрд┐рдиреНрди рдЖрд╡рд╛рдЬрд╣рд░реВрдХреЛ рджрд╛рдпрд░рд╛ рд╕рдорд░реНрдерди рдЧрд░реНрджрдЫ, рд░ рддрдкрд╛рдИрдВ рд╕реНрдкреАрдЪ рд╕реЗрд╡рд╛рд╣рд░реВрдХреЛ SDK рдмрд╛рдЯ рдкреНрд░рддреНрдпреЗрдХ рднрд╛рд╖рд╛рдХреЛ рд▓рд╛рдЧрд┐ рд╕рдорд░реНрдерд┐рдд рдЖрд╡рд╛рдЬрд╣рд░реВрдХреЛ рд╕реВрдЪреА рдкреНрд░рд╛рдкреНрдд рдЧрд░реНрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫред рдпрд╣рд╛рдБ рдорд╛рдЗрдХреНрд░реЛрдХрдиреНрдЯреНрд░реЛрд▓рд░рд╣рд░реВрдХреЛ рд╕реАрдорд┐рддрддрд╛рд╣рд░реВ рдЦреЗрд▓рдорд╛ рдЖрдЙрдБрдЫрдиреН - рдЯреЗрдХреНрд╕реНрдЯрд▓рд╛рдИ рдЖрд╡рд╛рдЬрдорд╛ рд░реВрдкрд╛рдиреНрддрд░рдг рд╕реЗрд╡рд╛рд╣рд░реВрд▓реЗ рд╕рдорд░реНрдерди рдЧрд░реНрдиреЗ рдЖрд╡рд╛рдЬрд╣рд░реВрдХреЛ рд╕реВрдЪреА рдкреНрд░рд╛рдкреНрдд рдЧрд░реНрди рдЧрд░рд┐рдПрдХреЛ рдХрд▓ ренренKB рднрдиреНрджрд╛ рдареВрд▓реЛ JSON рджрд╕реНрддрд╛рд╡реЗрдЬ рд╣реЛ, рдЬреБрди Wio Terminal рджреНрд╡рд╛рд░рд╛ рдкреНрд░рд╢реЛрдзрди рдЧрд░реНрди рдзреЗрд░реИ рдареВрд▓реЛ рдЫред рд▓реЗрдЦрдирдХреЛ рд╕рдордпрдорд╛, рдкреВрд░реНрдг рд╕реВрдЪреАрдорд╛ реирезрел рдЖрд╡рд╛рдЬрд╣рд░реВ рдЫрдиреН, рдкреНрд░рддреНрдпреЗрдХ рдирд┐рдореНрди JSON рджрд╕реНрддрд╛рд╡реЗрдЬрджреНрд╡рд╛рд░рд╛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдЧрд░рд┐рдПрдХреЛ рдЫ:

```json
{
    "Name": "Microsoft Server Speech Text to Speech Voice (en-US, AriaNeural)",
    "DisplayName": "Aria",
    "LocalName": "Aria",
    "ShortName": "en-US-AriaNeural",
    "Gender": "Female",
    "Locale": "en-US",
    "StyleList": [
        "chat",
        "customerservice",
        "narration-professional",
        "newscast-casual",
        "newscast-formal",
        "cheerful",
        "empathetic"
    ],
    "SampleRateHertz": "24000",
    "VoiceType": "Neural",
    "Status": "GA"
}
```

рдпреЛ JSON **Aria** рдЖрд╡рд╛рдЬрдХреЛ рд▓рд╛рдЧрд┐ рд╣реЛ, рдЬрд╕рдорд╛ рдзреЗрд░реИ рдЖрд╡рд╛рдЬ рд╢реИрд▓реАрд╣рд░реВ рдЫрдиреНред рдЯреЗрдХреНрд╕реНрдЯрд▓рд╛рдИ рдЖрд╡рд╛рдЬрдорд╛ рд░реВрдкрд╛рдиреНрддрд░рдг рдЧрд░реНрджрд╛ рдЖрд╡рд╢реНрдпрдХ рдкрд░реНрдиреЗ рд╕рдмреИ рдХреБрд░рд╛ рдЫреЛрдЯреЛ рдирд╛рдо рд╣реЛ, `en-US-AriaNeural`ред

рдпрд╕ рд╕рдореНрдкреВрд░реНрдг рд╕реВрдЪреАрд▓рд╛рдИ рддрдкрд╛рдИрдВрдХреЛ рдорд╛рдЗрдХреНрд░реЛрдХрдиреНрдЯреНрд░реЛрд▓рд░рдорд╛ рдбрд╛рдЙрдирд▓реЛрдб рд░ рдбрд┐рдХреЛрдб рдЧрд░реНрдиреЗ рд╕рдЯреНрдЯрд╛, рддрдкрд╛рдИрдВрд▓реЗ рдкреНрд░рдпреЛрдЧ рдЧрд░рд┐рд░рд╣реЗрдХреЛ рднрд╛рд╖рд╛рдХреЛ рд▓рд╛рдЧрд┐ рдЖрд╡рд╛рдЬрд╣рд░реВрдХреЛ рд╕реВрдЪреА рдкреНрд░рд╛рдкреНрдд рдЧрд░реНрди рдХреЗрд╣реА рдердк рд╕рд░реНрд╡рд░рд▓реЗрд╕ рдХреЛрдб рд▓реЗрдЦреНрди рдЖрд╡рд╢реНрдпрдХ рдЫ, рд░ рдпрд╕рд▓рд╛рдИ рддрдкрд╛рдИрдВрдХреЛ Wio Terminal рдмрд╛рдЯ рдХрд▓ рдЧрд░реНрдиреБрд╣реЛрд╕реНред рддреНрдпрд╕рдкрдЫрд┐ рддрдкрд╛рдИрдВрдХреЛ рдХреЛрдбрд▓реЗ рд╕реВрдЪреАрдмрд╛рдЯ рдЙрдкрдпреБрдХреНрдд рдЖрд╡рд╛рдЬ рдЪрдпрди рдЧрд░реНрди рд╕рдХреНрдЫ, рдЬрд╕реНрддреИ рдкрд╣рд┐рд▓реЛ рднреЗрдЯрд┐рдПрдХреЛ рдЖрд╡рд╛рдЬред

### рдХрд╛рд░реНрдп - рдЖрд╡рд╛рдЬрд╣рд░реВрдХреЛ рд╕реВрдЪреА рдкреНрд░рд╛рдкреНрдд рдЧрд░реНрди рд╕рд░реНрд╡рд░рд▓реЗрд╕ рдлрдЩреНрдХреНрд╢рди рдмрдирд╛рдЙрдиреБрд╣реЛрд╕реН

1. VS Code рдорд╛ рддрдкрд╛рдИрдВрдХреЛ `smart-timer-trigger` рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдЦреЛрд▓реНрдиреБрд╣реЛрд╕реН, рд░ рдЯрд░реНрдорд┐рдирд▓ рдЦреЛрд▓реНрдиреБрд╣реЛрд╕реН рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдЧрд░реНрджреИ рдХрд┐ рднрд░реНрдЪреБрдЕрд▓ рд╡рд╛рддрд╛рд╡рд░рдг рд╕рдХреНрд░рд┐рдп рдЫред рдпрджрд┐ рдЫреИрди рднрдиреЗ, рдЯрд░реНрдорд┐рдирд▓ рдмрдиреНрдж рдЧрд░реЗрд░ рдкреБрдирдГ рд╕рд┐рд░реНрдЬрдирд╛ рдЧрд░реНрдиреБрд╣реЛрд╕реНред

1. `local.settings.json` рдлрд╛рдЗрд▓ рдЦреЛрд▓реНрдиреБрд╣реЛрд╕реН рд░ рд╕реНрдкреАрдЪ API рдХреБрдЮреНрдЬреА рд░ рд╕реНрдерд╛рдирдХреЛ рд▓рд╛рдЧрд┐ рд╕реЗрдЯрд┐рдЩрд╣рд░реВ рдердкреНрдиреБрд╣реЛрд╕реН:

    ```json
    "SPEECH_KEY": "<key>",
    "SPEECH_LOCATION": "<location>"
    ```

    `<key>` рд▓рд╛рдИ рддрдкрд╛рдИрдВрдХреЛ рд╕реНрдкреАрдЪ рд╕реЗрд╡рд╛ рд╕реНрд░реЛрддрдХреЛ API рдХреБрдЮреНрдЬреАрд▓реЗ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрди рдЧрд░реНрдиреБрд╣реЛрд╕реНред `<location>` рд▓рд╛рдИ рддрдкрд╛рдИрдВрд▓реЗ рд╕реНрдкреАрдЪ рд╕реЗрд╡рд╛ рд╕реНрд░реЛрдд рд╕рд┐рд░реНрдЬрдирд╛ рдЧрд░реНрджрд╛ рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрдХреЛ рд╕реНрдерд╛рдирд▓реЗ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрди рдЧрд░реНрдиреБрд╣реЛрд╕реНред

1. рдпрд╕ рдПрдкрдорд╛ `get-voices` рдирд╛рдордХреЛ рдирдпрд╛рдБ HTTP рдЯреНрд░рд┐рдЧрд░ рдердкреНрдиреБрд╣реЛрд╕реН рдирд┐рдореНрди рдХрдорд╛рдгреНрдб рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрд░, VS Code рдЯрд░реНрдорд┐рдирд▓рдорд╛ рдлрдЩреНрдХреНрд╢рди рдПрдк рдкреНрд░реЛрдЬреЗрдХреНрдЯрдХреЛ рдореВрд▓ рдлреЛрд▓реНрдбрд░рднрд┐рддреНрд░:

    ```sh
    func new --name get-voices --template "HTTP trigger"
    ```

    рдпрд╕рд▓реЗ `get-voices` рдирд╛рдордХреЛ HTTP рдЯреНрд░рд┐рдЧрд░ рд╕рд┐рд░реНрдЬрдирд╛ рдЧрд░реНрдиреЗрдЫред

1. `get-voices` рдлреЛрд▓реНрдбрд░рдХреЛ `__init__.py` рдлрд╛рдЗрд▓рдХреЛ рд╕рд╛рдордЧреНрд░реАрд▓рд╛рдИ рдирд┐рдореНрдирд╕рдБрдЧ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрди рдЧрд░реНрдиреБрд╣реЛрд╕реН:

    ```python
    import json
    import os
    import requests
    
    import azure.functions as func
    
    def main(req: func.HttpRequest) -> func.HttpResponse:
        location = os.environ['SPEECH_LOCATION']
        speech_key = os.environ['SPEECH_KEY']
    
        req_body = req.get_json()
        language = req_body['language']
    
        url = f'https://{location}.tts.speech.microsoft.com/cognitiveservices/voices/list'
    
        headers = {
            'Ocp-Apim-Subscription-Key': speech_key
        }
    
        response = requests.get(url, headers=headers)
        voices_json = json.loads(response.text)
    
        voices = filter(lambda x: x['Locale'].lower() == language.lower(), voices_json)
        voices = map(lambda x: x['ShortName'], voices)
    
        return func.HttpResponse(json.dumps(list(voices)), status_code=200)
    ```

    рдпреЛ рдХреЛрдбрд▓реЗ рдЖрд╡рд╛рдЬрд╣рд░реВрдХреЛ рд╕реВрдЪреА рдкреНрд░рд╛рдкреНрдд рдЧрд░реНрди рдЕрдиреНрдд рдмрд┐рдиреНрджреБрдорд╛ HTTP рдЕрдиреБрд░реЛрдз рдЧрд░реНрджрдЫред рдпреЛ рдЖрд╡рд╛рдЬрд╣рд░реВрдХреЛ рд╕реВрдЪреА рд╕рдмреИ рднрд╛рд╖рд╛рд╣рд░реВрдХреЛ рд▓рд╛рдЧрд┐ рдареВрд▓реЛ JSON рдмреНрд▓рдХ рд╣реЛ, рддреНрдпрд╕реИрд▓реЗ рдЕрдиреБрд░реЛрдз рд╢рд░реАрд░рдорд╛ рдкрд╛рд╕ рдЧрд░рд┐рдПрдХреЛ рднрд╛рд╖рд╛рдХреЛ рд▓рд╛рдЧрд┐ рдЖрд╡рд╛рдЬрд╣рд░реВ рдлрд┐рд▓реНрдЯрд░ рдЧрд░рд┐рдиреНрдЫ, рддреНрдпрд╕рдкрдЫрд┐ рдЫреЛрдЯреЛ рдирд╛рдо рдирд┐рдХрд╛рд▓реЗрд░ JSON рд╕реВрдЪреАрдХреЛ рд░реВрдкрдорд╛ рдлрд░реНрдХрд╛рдЗрдиреНрдЫред рдЯреЗрдХреНрд╕реНрдЯрд▓рд╛рдИ рдЖрд╡рд╛рдЬрдорд╛ рд░реВрдкрд╛рдиреНрддрд░рдг рдЧрд░реНрди рдЖрд╡рд╢реНрдпрдХ рдкрд░реНрдиреЗ рдорд╛рди рдЫреЛрдЯреЛ рдирд╛рдо рд╣реЛ, рддреНрдпрд╕реИрд▓реЗ рдХреЗрд╡рд▓ рдпреЛ рдорд╛рди рдлрд░реНрдХрд╛рдЗрдиреНрдЫред

    > ЁЯТБ рддрдкрд╛рдИрдВ рдЖрд╡рд╢реНрдпрдХ рдЕрдиреБрд╕рд╛рд░ рдлрд┐рд▓реНрдЯрд░ рдкрд░рд┐рд╡рд░реНрддрди рдЧрд░реНрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫ рддрд╛рдХрд┐ рддрдкрд╛рдИрдВрд▓реЗ рдЪрд╛рд╣реЗрдХреЛ рдЖрд╡рд╛рдЬрд╣рд░реВ рдорд╛рддреНрд░ рдЪрдпрди рдЧрд░реНрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫред

    рдпрд╕рд▓реЗ рдбреЗрдЯрд╛ рдЖрдХрд╛рд░рд▓рд╛рдИ рд▓реЗрдЦрдирдХреЛ рд╕рдордпрдорд╛ ренренKB рдмрд╛рдЯ рдШрдЯрд╛рдПрд░ рдзреЗрд░реИ рд╕рд╛рдиреЛ JSON рджрд╕реНрддрд╛рд╡реЗрдЬрдорд╛ рд░реВрдкрд╛рдиреНрддрд░рдг рдЧрд░реНрджрдЫред рдЙрджрд╛рд╣рд░рдгрдХрд╛ рд▓рд╛рдЧрд┐, US рдЖрд╡рд╛рдЬрд╣рд░реВрдХреЛ рд▓рд╛рдЧрд┐ рдпреЛ рекрежрео рдмрд╛рдЗрдЯреНрд╕ рд╣реЛред

1. рддрдкрд╛рдИрдВрдХреЛ рдлрдЩреНрдХреНрд╢рди рдПрдкрд▓рд╛рдИ рд╕реНрдерд╛рдиреАрдп рд░реВрдкрдорд╛ рдЪрд▓рд╛рдЙрдиреБрд╣реЛрд╕реНред рддреНрдпрд╕рдкрдЫрд┐ рддрдкрд╛рдИрдВ рдпрд╕рд▓рд╛рдИ curl рдЬрд╕реНрддреЛ рдЙрдкрдХрд░рдг рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрд░ рдХрд▓ рдЧрд░реНрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫ, рдареАрдХ рддреНрдпрд╕реНрддреИ рдЬрд╕рд░реА рддрдкрд╛рдИрдВрд▓реЗ `text-to-timer` HTTP рдЯреНрд░рд┐рдЧрд░ рдкрд░реАрдХреНрд╖рдг рдЧрд░реНрдиреБрднрдпреЛред рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдЧрд░реНрдиреБрд╣реЛрд╕реН рдХрд┐ рддрдкрд╛рдИрдВрдХреЛ рднрд╛рд╖рд╛ JSON рд╢рд░реАрд░рдХреЛ рд░реВрдкрдорд╛ рдкрд╛рд╕ рдЧрд░рд┐рдПрдХреЛ рдЫ:

    ```json
    {
        "language":"<language>"
    }
    ```

    `<language>` рд▓рд╛рдИ рддрдкрд╛рдИрдВрдХреЛ рднрд╛рд╖рд╛, рдЬрд╕реНрддреИ `en-GB` рд╡рд╛ `zh-CN` рд▓реЗ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрди рдЧрд░реНрдиреБрд╣реЛрд╕реНред

> ЁЯТБ рддрдкрд╛рдИрдВ рдпреЛ рдХреЛрдб [code-spoken-response/functions](../../../../../6-consumer/lessons/3-spoken-feedback/code-spoken-response/functions) рдлреЛрд▓реНрдбрд░рдорд╛ рдлреЗрд▓рд╛ рдкрд╛рд░реНрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫред

### рдХрд╛рд░реНрдп - Wio Terminal рдмрд╛рдЯ рдЖрд╡рд╛рдЬ рдкреНрд░рд╛рдкреНрдд рдЧрд░реНрдиреБрд╣реЛрд╕реН

1. рдпрджрд┐ рдЦреБрд▓рд╛ рдЫреИрди рднрдиреЗ, VS Code рдорд╛ `smart-timer` рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдЦреЛрд▓реНрдиреБрд╣реЛрд╕реНред

1. `config.h` рд╣реЗрдбрд░ рдлрд╛рдЗрд▓ рдЦреЛрд▓реНрдиреБрд╣реЛрд╕реН рд░ рддрдкрд╛рдИрдВрдХреЛ рдлрдЩреНрдХреНрд╢рди рдПрдкрдХреЛ URL рдердкреНрдиреБрд╣реЛрд╕реН:

    ```cpp
    const char *GET_VOICES_FUNCTION_URL = "<URL>";
    ```

    `<URL>` рд▓рд╛рдИ рддрдкрд╛рдИрдВрдХреЛ рдлрдЩреНрдХреНрд╢рди рдПрдкрдХреЛ `get-voices` HTTP рдЯреНрд░рд┐рдЧрд░рдХреЛ URL рд▓реЗ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрди рдЧрд░реНрдиреБрд╣реЛрд╕реНред рдпреЛ `TEXT_TO_TIMER_FUNCTION_URL` рдХреЛ рдорд╛рдирд╕рдБрдЧ рд╕рдорд╛рди рд╣реБрдиреЗрдЫ, рддрд░ `text-to-timer` рдХреЛ рд╕рдЯреНрдЯрд╛ `get-voices` рдХреЛ рдлрдЩреНрдХреНрд╢рди рдирд╛рдо рд╣реБрдиреЗрдЫред

1. `src` рдлреЛрд▓реНрдбрд░рдорд╛ рдирдпрд╛рдБ рдлрд╛рдЗрд▓ рд╕рд┐рд░реНрдЬрдирд╛ рдЧрд░реНрдиреБрд╣реЛрд╕реН рдЬрд╕рд▓рд╛рдИ `text_to_speech.h` рднрдирд┐рдиреНрдЫред рдпреЛ рдЯреЗрдХреНрд╕реНрдЯрд▓рд╛рдИ рдЖрд╡рд╛рдЬрдорд╛ рд░реВрдкрд╛рдиреНрддрд░рдг рдЧрд░реНрди рдХрдХреНрд╖рд╛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдЧрд░реНрди рдкреНрд░рдпреЛрдЧ рдЧрд░рд┐рдиреЗрдЫред

1. рдирдпрд╛рдБ `text_to_speech.h` рдлрд╛рдЗрд▓рдХреЛ рд╢реАрд░реНрд╖рдорд╛ рдирд┐рдореНрди рд╕рдорд╛рд╡реЗрд╢ рдирд┐рд░реНрджреЗрд╢рдирд╣рд░реВ рдердкреНрдиреБрд╣реЛрд╕реН:

    ```cpp
    #pragma once

    #include <Arduino.h>
    #include <ArduinoJson.h>
    #include <HTTPClient.h>
    #include <Seeed_FS.h>
    #include <SD/Seeed_SD.h>
    #include <WiFiClient.h>
    #include <WiFiClientSecure.h>
    
    #include "config.h"
    #include "speech_to_text.h"
    ```

1. рдпрд╕рдкрдЫрд┐ рдирд┐рдореНрди рдХреЛрдб рдердкреНрдиреБрд╣реЛрд╕реН рддрд╛рдХрд┐ `TextToSpeech` рдХрдХреНрд╖рд╛ рдШреЛрд╖рдгрд╛ рдЧрд░реНрди рд╕рдХрд┐рдпреЛрд╕реН, рд╕рд╛рдереИ рдПрдкреНрд▓рд┐рдХреЗрд╕рдирдХреЛ рдмрд╛рдБрдХреА рднрд╛рдЧрдорд╛ рдкреНрд░рдпреЛрдЧ рдЧрд░реНрди рд╕рдХрд┐рдиреЗ рдЙрджрд╛рд╣рд░рдг:

    ```cpp
    class TextToSpeech
    {
    public:
    private:
    };
    
    TextToSpeech textToSpeech;
    ```

1. рддрдкрд╛рдИрдВрдХреЛ рдлрдЩреНрдХреНрд╢рди рдПрдкрд▓рд╛рдИ рдХрд▓ рдЧрд░реНрди, рддрдкрд╛рдИрдВрд▓реЗ WiFi рдХреНрд▓рд╛рдЗрдиреНрдЯ рдШреЛрд╖рдгрд╛ рдЧрд░реНрди рдЖрд╡рд╢реНрдпрдХ рдЫред рдХрдХреНрд╖рд╛рдХреЛ `private` рдЦрдгреНрдбрдорд╛ рдирд┐рдореНрди рдердкреНрдиреБрд╣реЛрд╕реН:

    ```cpp
    WiFiClient _client;
    ```

1. `private` рдЦрдгреНрдбрдорд╛, рдЪрдпрди рдЧрд░рд┐рдПрдХреЛ рдЖрд╡рд╛рдЬрдХреЛ рд▓рд╛рдЧрд┐ рдПрдЙрдЯрд╛ рдлрд┐рд▓реНрдб рдердкреНрдиреБрд╣реЛрд╕реН:

    ```cpp
    String _voice;
    ```

1. `public` рдЦрдгреНрдбрдорд╛, рдПрдЙрдЯрд╛ `init` рдлрдЩреНрдХреНрд╢рди рдердкреНрдиреБрд╣реЛрд╕реН рдЬрд╕рд▓реЗ рдкрд╣рд┐рд▓реЛ рдЖрд╡рд╛рдЬ рдкреНрд░рд╛рдкреНрдд рдЧрд░реНрдиреЗрдЫ:

    ```cpp
    void init()
    {
    }
    ```

1. рдЖрд╡рд╛рдЬрд╣рд░реВ рдкреНрд░рд╛рдкреНрдд рдЧрд░реНрди, рдЕрдиреБрд░реЛрдз рдЧрд░рд┐рдПрдХреЛ рднрд╛рд╖рд╛рд╕рд╣рд┐рдд JSON рджрд╕реНрддрд╛рд╡реЗрдЬ рдлрдЩреНрдХреНрд╢рди рдПрдкрдорд╛ рдкрдард╛рдЙрди рдЖрд╡рд╢реНрдпрдХ рдЫред `init` рдлрдЩреНрдХреНрд╢рдирдорд╛ рдирд┐рдореНрди рдХреЛрдб рдердкреНрдиреБрд╣реЛрд╕реН:

    ```cpp
    DynamicJsonDocument doc(1024);
    doc["language"] = LANGUAGE;

    String body;
    serializeJson(doc, body);
    ```

1. рддреНрдпрд╕рдкрдЫрд┐ рдПрдЙрдЯрд╛ `HTTPClient` рд╕рд┐рд░реНрдЬрдирд╛ рдЧрд░реНрдиреБрд╣реЛрд╕реН, рддреНрдпрд╕рдкрдЫрд┐ рдпрд╕рд▓рд╛рдИ рдлрдЩреНрдХреНрд╢рди рдПрдкрд▓рд╛рдИ рдЖрд╡рд╛рдЬрд╣рд░реВ рдкреНрд░рд╛рдкреНрдд рдЧрд░реНрди рдХрд▓ рдЧрд░реНрди рдкреНрд░рдпреЛрдЧ рдЧрд░реНрдиреБрд╣реЛрд╕реН, JSON рджрд╕реНрддрд╛рд╡реЗрдЬ рдкреЛрд╕реНрдЯ рдЧрд░реНрджреИ:

    ```cpp
    HTTPClient httpClient;
    httpClient.begin(_client, GET_VOICES_FUNCTION_URL);

    int httpResponseCode = httpClient.POST(body);
    ```

1. рдпрд╕рдкрдЫрд┐ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдХреЛрдб рдЬрд╛рдБрдЪ рдЧрд░реНрди рдХреЛрдб рдердкреНрдиреБрд╣реЛрд╕реН, рд░ рдпрджрд┐ рдпреЛ реирежреж (рд╕рдлрд▓рддрд╛) рд╣реЛ рднрдиреЗ, рдЖрд╡рд╛рдЬрд╣рд░реВрдХреЛ рд╕реВрдЪреА рдирд┐рдХрд╛рд▓реНрдиреБрд╣реЛрд╕реН, рд╕реВрдЪреАрдмрд╛рдЯ рдкрд╣рд┐рд▓реЛ рдЖрд╡рд╛рдЬ рдкреНрд░рд╛рдкреНрдд рдЧрд░реНрджреИ:

    ```cpp
    if (httpResponseCode == 200)
    {
        String result = httpClient.getString();
        Serial.println(result);

        DynamicJsonDocument doc(1024);
        deserializeJson(doc, result.c_str());

        JsonArray obj = doc.as<JsonArray>();
        _voice = obj[0].as<String>();

        Serial.print("Using voice ");
        Serial.println(_voice);
    }
    else
    {
        Serial.print("Failed to get voices - error ");
        Serial.println(httpResponseCode);
    }
    ```

1. рдпрд╕рдкрдЫрд┐, HTTP рдХреНрд▓рд╛рдЗрдиреНрдЯ рдХрдиреЗрдХреНрд╢рди рд╕рдорд╛рдкреНрдд рдЧрд░реНрдиреБрд╣реЛрд╕реН:

    ```cpp
    httpClient.end();
    ```

1. `main.cpp` рдлрд╛рдЗрд▓ рдЦреЛрд▓реНрдиреБрд╣реЛрд╕реН, рд░ рдпрд╕ рдирдпрд╛рдБ рд╣реЗрдбрд░ рдлрд╛рдЗрд▓ рд╕рдорд╛рд╡реЗрд╢ рдЧрд░реНрди рд╢реАрд░реНрд╖рдорд╛ рдирд┐рдореНрди рд╕рдорд╛рд╡реЗрд╢ рдирд┐рд░реНрджреЗрд╢рди рдердкреНрдиреБрд╣реЛрд╕реН:

    ```cpp
    #include "text_to_speech.h"
    ```

1. `setup` рдлрдЩреНрдХреНрд╢рдирдорд╛, `speechToText.init();` рдХрд▓рдХреЛ рддрд▓ рдирд┐рдореНрди рдердкреНрдиреБрд╣реЛрд╕реН рддрд╛рдХрд┐ `TextToSpeech` рдХрдХреНрд╖рд╛ рдЖрд░рдореНрдн рдЧрд░реНрди рд╕рдХрд┐рдпреЛрд╕реН:

    ```cpp
    textToSpeech.init();
    ```

1. рдпреЛ рдХреЛрдб рдирд┐рд░реНрдорд╛рдг рдЧрд░реНрдиреБрд╣реЛрд╕реН, рдпрд╕рд▓рд╛рдИ рддрдкрд╛рдИрдВрдХреЛ Wio Terminal рдорд╛ рдЕрдкрд▓реЛрдб рдЧрд░реНрдиреБрд╣реЛрд╕реН рд░ рдпрд╕рд▓рд╛рдИ рд╕рд┐рд░рд┐рдпрд▓ рдореЛрдирд┐рдЯрд░ рдорд╛рд░реНрдлрдд рдкрд░реАрдХреНрд╖рдг рдЧрд░реНрдиреБрд╣реЛрд╕реНред рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдЧрд░реНрдиреБрд╣реЛрд╕реН рдХрд┐ рддрдкрд╛рдИрдВрдХреЛ рдлрдЩреНрдХреНрд╢рди рдПрдк рдЪрд▓рд┐рд░рд╣реЗрдХреЛ рдЫред

    рддрдкрд╛рдИрдВрд▓реЗ рдлрдЩреНрдХреНрд╢рди рдПрдкрдмрд╛рдЯ рдлрд░реНрдХрд╛рдЗрдПрдХреЛ рдЙрдкрд▓рдмреНрдз рдЖрд╡рд╛рдЬрд╣рд░реВрдХреЛ рд╕реВрдЪреА рджреЗрдЦреНрдиреБрд╣реБрдиреЗрдЫ, рд╕рд╛рдереИ рдЪрдпрди рдЧрд░рд┐рдПрдХреЛ рдЖрд╡рд╛рдЬред

    ```output
    --- Available filters and text transformations: colorize, debug, default, direct, hexlify, log2file, nocontrol, printable, send_on_enter, time
    --- More details at http://bit.ly/pio-monitor-filters
    --- Miniterm on /dev/cu.usbmodem1101  9600,8,N,1 ---
    --- Quit: Ctrl+C | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H ---
    Connecting to WiFi..
    Connected!
    Got access token.
    ["en-US-JennyNeural", "en-US-JennyMultilingualNeural", "en-US-GuyNeural", "en-US-AriaNeural", "en-US-AmberNeural", "en-US-AnaNeural", "en-US-AshleyNeural", "en-US-BrandonNeural", "en-US-ChristopherNeural", "en-US-CoraNeural", "en-US-ElizabethNeural", "en-US-EricNeural", "en-US-JacobNeural", "en-US-MichelleNeural", "en-US-MonicaNeural", "en-US-AriaRUS", "en-US-BenjaminRUS", "en-US-GuyRUS", "en-US-ZiraRUS"]
    Using voice en-US-JennyNeural
    Ready.
    ```

## рдЯреЗрдХреНрд╕реНрдЯрд▓рд╛рдИ рдЖрд╡рд╛рдЬрдорд╛ рд░реВрдкрд╛рдиреНрддрд░рдг рдЧрд░реНрдиреБрд╣реЛрд╕реН

рдПрдХрдкрдЯрдХ рддрдкрд╛рдИрдВрд▓реЗ рдкреНрд░рдпреЛрдЧ рдЧрд░реНрдирдХреЛ рд▓рд╛рдЧрд┐ рдЖрд╡рд╛рдЬ рдкреНрд░рд╛рдкреНрдд рдЧрд░реНрдиреБрднрдпреЛ рднрдиреЗ, рдпрд╕рд▓рд╛рдИ рдЯреЗрдХреНрд╕реНрдЯрд▓рд╛рдИ рдЖрд╡рд╛рдЬрдорд╛ рд░реВрдкрд╛рдиреНрддрд░рдг рдЧрд░реНрди рдкреНрд░рдпреЛрдЧ рдЧрд░реНрди рд╕рдХрд┐рдиреНрдЫред рдЖрд╡рд╛рдЬрд▓рд╛рдИ рдЯреЗрдХреНрд╕реНрдЯрдорд╛ рд░реВрдкрд╛рдиреНрддрд░рдг рдЧрд░реНрджрд╛ рдЬрд╕реНрддреИ, рдЖрд╡рд╛рдЬрд▓рд╛рдИ рд░реВрдкрд╛рдиреНрддрд░рдг рдЧрд░реНрджрд╛ рдкрдирд┐ рд╕рдорд╛рди рдореЗрдореЛрд░реА рд╕реАрдорд┐рддрддрд╛рд╣рд░реВ рд▓рд╛рдЧреВ рд╣реБрдиреНрдЫрдиреН, рддреНрдпрд╕реИрд▓реЗ рддрдкрд╛рдИрдВрд▓реЗ рдпрд╕рд▓рд╛рдИ SD рдХрд╛рд░реНрдбрдорд╛ рд▓реЗрдЦреНрди рдЖрд╡рд╢реНрдпрдХ рдЫ рддрд╛рдХрд┐ рдпрд╕рд▓рд╛рдИ ReSpeaker рдорд╛рд░реНрдлрдд рдмрдЬрд╛рдЙрди рд╕рдХрд┐рдпреЛрд╕реНред

> ЁЯТБ рдпрд╕ рдкреНрд░реЛрдЬреЗрдХреНрдЯрдХреЛ рдкреНрд░рд╛рд░рдореНрднрд┐рдХ рдкрд╛рдард╣рд░реВрдорд╛ рддрдкрд╛рдИрдВрд▓реЗ рдорд╛рдЗрдХреНрд░реЛрдлреЛрдирдмрд╛рдЯ рдХреНрдпрд╛рдкреНрдЪрд░ рдЧрд░рд┐рдПрдХреЛ рдЖрд╡рд╛рдЬ рднрдгреНрдбрд╛рд░рдг рдЧрд░реНрди рдлреНрд▓реНрдпрд╛рд╕ рдореЗрдореЛрд░реА рдкреНрд░рдпреЛрдЧ рдЧрд░реНрдиреБрднрдПрдХреЛ рдерд┐рдпреЛред рдпреЛ рдкрд╛рдард▓реЗ SD рдХрд╛рд░реНрдб рдкреНрд░рдпреЛрдЧ рдЧрд░реНрджрдЫ рдХрд┐рдирднрдиреЗ Seeed рдЕрдбрд┐рдпреЛ рд▓рд╛рдЗрдмреНрд░реЗрд░реАрд╣рд░реВ рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрд░ рдпрд╕рдмрд╛рдЯ рдЕрдбрд┐рдпреЛ рдмрдЬрд╛рдЙрди рд╕рдЬрд┐рд▓реЛ рдЫред

рддреНрдпрд╣рд╛рдБ рдЕрд░реНрдХреЛ рд╕реАрдорд┐рддрддрд╛ рдкрдирд┐ рд╡рд┐рдЪрд╛рд░ рдЧрд░реНрдиреБрдкрд░реНрдЫ, рд╕реНрдкреАрдЪ рд╕реЗрд╡рд╛рдмрд╛рдЯ рдЙрдкрд▓рдмреНрдз рдЕрдбрд┐рдпреЛ рдбреЗрдЯрд╛, рд░ Wio Terminal рд▓реЗ рд╕рдорд░реНрдерди рдЧрд░реНрдиреЗ рдврд╛рдБрдЪрд╛рд╣рд░реВред рдкреВрд░реНрдг рдХрдореНрдкреНрдпреБрдЯрд░рд╣рд░реВ рдЬрд╕реНрддреЛ рдирднрдИ, рдорд╛рдЗрдХреНрд░реЛрдХрдиреНрдЯреНрд░реЛрд▓рд░рд╣рд░реВрдХреЛ рд▓рд╛рдЧрд┐ рдЕрдбрд┐рдпреЛ рд▓рд╛рдЗрдмреНрд░реЗрд░реАрд╣рд░реВрд▓реЗ рд╕рдорд░реНрдерди рдЧрд░реНрдиреЗ рдЕрдбрд┐рдпреЛ рдврд╛рдБрдЪрд╛рд╣рд░реВ рдзреЗрд░реИ рд╕реАрдорд┐рдд рд╣реБрди рд╕рдХреНрдЫред рдЙрджрд╛рд╣рд░рдгрдХрд╛ рд▓рд╛рдЧрд┐, Seeed Arduino Audio рд▓рд╛рдЗрдмреНрд░реЗрд░реАрд▓реЗ ReSpeaker рдорд╛рд░реНрдлрдд рдмрдЬрд╛рдЙрди рд╕рдХреНрдиреЗ рдЕрдбрд┐рдпреЛ рдХреЗрд╡рд▓ рекрек.резKHz рдирдореВрдирд╛ рджрд░рдорд╛ рд╕рдорд░реНрдерди рдЧрд░реНрджрдЫред Azure рд╕реНрдкреАрдЪ рд╕реЗрд╡рд╛рд╣рд░реВрд▓реЗ рдзреЗрд░реИ рдврд╛рдБрдЪрд╛рд╣рд░реВрдорд╛ рдЕрдбрд┐рдпреЛ рдкреНрд░рджрд╛рди рдЧрд░реНрди рд╕рдХреНрдЫ, рддрд░ рддреАрдордзреНрдпреЗ рдХреБрдиреИ рдкрдирд┐ рекрек.резKHz рдирдореВрдирд╛ рджрд░ рдкреНрд░рдпреЛрдЧ рдЧрд░реНрджреИрдирдиреН, рддрд┐рдиреАрд╣рд░реВрд▓реЗ рдХреЗрд╡рд▓ реоKHz, резремKHz, реирекKHz рд░ рекреоKHz рдкреНрд░рджрд╛рди рдЧрд░реНрдЫрдиреНред рдпрд╕рдХреЛ рдорддрд▓рдм рдЕрдбрд┐рдпреЛрд▓рд╛рдИ рекрек.резKHz рдорд╛ рдкреБрдирдГ рдирдореВрдирд╛ рдЧрд░реНрди рдЖрд╡рд╢реНрдпрдХ рдЫ, рдЬреБрди Wio Terminal рд╕рдБрдЧ рдЕрдзрд┐рдХ рд╕рдВрд╕рд╛рдзрдирд╣рд░реВ рдЖрд╡рд╢реНрдпрдХ рдкрд░реНрджрдЫ, рд╡рд┐рд╢реЗрд╖ рдЧрд░реА рдореЗрдореЛрд░реАред

рдпрд╕ рдкреНрд░рдХрд╛рд░рдХреЛ рдбреЗрдЯрд╛ рд╣реЗрд░рдлреЗрд░ рдЧрд░реНрди рдЖрд╡рд╢реНрдпрдХ рдкрд░реНрджрд╛, рдпреЛ рдЕрдХреНрд╕рд░ рд╡реЗрдм рдХрд▓ рдорд╛рд░реНрдлрдд рд╕реНрд░реЛрдд рдЧрд░рд┐рдПрдХреЛ рдбреЗрдЯрд╛ рднрдПрдорд╛ рд╕рд░реНрд╡рд░рд▓реЗрд╕ рдХреЛрдб рдкреНрд░рдпреЛрдЧ рдЧрд░реНрдиреБ рд░рд╛рдореНрд░реЛ рд╣реБрдиреНрдЫред Wio Terminal рд▓реЗ рд╕рд░реНрд╡рд░рд▓реЗрд╕ рдлрдЩреНрдХреНрд╢рдирд▓рд╛рдИ рдХрд▓ рдЧрд░реНрди рд╕рдХреНрдЫ, рд░реВрдкрд╛рдиреНрддрд░рдг рдЧрд░реНрди рдЯреЗрдХреНрд╕реНрдЯ рдкрд╛рд╕ рдЧрд░реНрджреИ, рд░ рд╕рд░реНрд╡рд░рд▓реЗрд╕ рдлрдЩреНрдХреНрд╢рдирд▓реЗ рдЯреЗрдХреНрд╕реНрдЯрд▓рд╛рдИ рдЖрд╡рд╛рдЬрдорд╛ рд░реВрдкрд╛рдиреНрддрд░рдг рдЧрд░реНрди рд╕реНрдкреАрдЪ рд╕реЗрд╡рд╛рд▓рд╛рдИ рдХрд▓ рдЧрд░реНрди рд╕рдХреНрдЫ, рд╕рд╛рдереИ рдЕрдбрд┐рдпреЛрд▓рд╛рдИ рдЖрд╡рд╢реНрдпрдХ рдирдореВрдирд╛ рджрд░рдорд╛ рдкреБрдирдГ рдирдореВрдирд╛ рдЧрд░реНрди рд╕рдХреНрдЫред рддреНрдпрд╕рдкрдЫрд┐ рдпрд╕рд▓реЗ рдЕрдбрд┐рдпреЛрд▓рд╛рдИ Wio Terminal рд▓реЗ рдЖрд╡рд╢реНрдпрдХ рд░реВрдкрдорд╛ SD рдХрд╛рд░реНрдбрдорд╛ рднрдгреНрдбрд╛рд░рдг рдЧрд░реНрди рд░ ReSpeaker рдорд╛рд░реНрдлрдд рдмрдЬрд╛рдЙрди рдлрд┐рд░реНрддрд╛ рдЧрд░реНрди рд╕рдХреНрдЫред

### рдХрд╛рд░реНрдп - рдЯреЗрдХреНрд╕реНрдЯрд▓рд╛рдИ рдЖрд╡рд╛рдЬрдорд╛ рд░реВрдкрд╛рдиреНрддрд░рдг рдЧрд░реНрди рд╕рд░реНрд╡рд░рд▓реЗрд╕ рдлрдЩреНрдХреНрд╢рди рдмрдирд╛рдЙрдиреБрд╣реЛрд╕реН

1. VS Code рдорд╛ рддрдкрд╛рдИрдВрдХреЛ `smart-timer-trigger` рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдЦреЛрд▓реНрдиреБрд╣реЛрд╕реН, рд░ рдЯрд░реНрдорд┐рдирд▓ рдЦреЛрд▓реНрдиреБрд╣реЛрд╕реН рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдЧрд░реНрджреИ рдХрд┐ рднрд░реНрдЪреБрдЕрд▓ рд╡рд╛рддрд╛рд╡рд░рдг рд╕рдХреНрд░рд┐рдп рдЫред рдпрджрд┐ рдЫреИрди рднрдиреЗ, рдЯрд░реНрдорд┐рдирд▓ рдмрдиреНрдж рдЧрд░реЗрд░ рдкреБрдирдГ рд╕рд┐рд░реНрдЬрдирд╛ рдЧрд░реНрдиреБрд╣реЛрд╕реНред

1. рдпрд╕ рдПрдкрдорд╛ `text-to-speech` рдирд╛рдордХреЛ рдирдпрд╛рдБ HTTP рдЯреНрд░рд┐рдЧрд░ рдердкреНрдиреБрд╣реЛрд╕реН рдирд┐рдореНрди рдХрдорд╛рдгреНрдб рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрд░, VS Code рдЯрд░реНрдорд┐рдирд▓рдорд╛ рдлрдЩреНрдХреНрд╢рди рдПрдк рдкреНрд░реЛрдЬреЗрдХреНрдЯрдХреЛ рдореВрд▓ рдлреЛрд▓реНрдбрд░рднрд┐рддреНрд░:

    ```sh
    func new --name text-to-speech --template "HTTP trigger"
    ```

    рдпрд╕рд▓реЗ `text-to-speech` рдирд╛рдордХреЛ HTTP рдЯреНрд░рд┐рдЧрд░ рд╕рд┐рд░реНрдЬрдирд╛ рдЧрд░реНрдиреЗрдЫред

1. [librosa](https://librosa.org) Pip рдкреНрдпрд╛рдХреЗрдЬрдорд╛ рдЕрдбрд┐рдпреЛ рдкреБрдирдГ рдирдореВрдирд╛ рдЧрд░реНрдиреЗ рдлрдЩреНрдХреНрд╢рдирд╣рд░реВ рдЫрдиреН, рддреНрдпрд╕реИрд▓реЗ рдпрд╕рд▓рд╛рдИ `requirements.txt` рдлрд╛рдЗрд▓рдорд╛ рдердкреНрдиреБрд╣реЛрд╕реН:

    ```sh
    librosa
    ```

    рдПрдХрдкрдЯрдХ рдпреЛ рдердкрд┐рдПрдкрдЫрд┐, VS Code рдЯрд░реНрдорд┐рдирд▓рдмрд╛рдЯ рдирд┐рдореНрди рдХрдорд╛рдгреНрдб рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрд░ Pip рдкреНрдпрд╛рдХреЗрдЬрд╣рд░реВ рд╕реНрдерд╛рдкрдирд╛ рдЧрд░реНрдиреБрд╣реЛрд╕реН:

    ```sh
    pip install -r requirements.txt
    ```

    > тЪая╕П рдпрджрд┐ рддрдкрд╛рдИрдВ Linux, Raspberry Pi OS рд╕рд╣рд┐рдд, рдкреНрд░рдпреЛрдЧ рдЧрд░реНрджреИ рд╣реБрдиреБрд╣реБрдиреНрдЫ рднрдиреЗ, рддрдкрд╛рдИрдВрд▓реЗ рдирд┐рдореНрди рдХрдорд╛рдгреНрдб рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрд░ `libsndfile` рд╕реНрдерд╛рдкрдирд╛ рдЧрд░реНрди рдЖрд╡рд╢реНрдпрдХ рд╣реБрди рд╕рдХреНрдЫ:
    >
    > ```sh
    > sudo apt update
    > sudo apt install libsndfile1-dev
    > ```

1. рдЯреЗрдХреНрд╕реНрдЯрд▓рд╛рдИ рдЖрд╡рд╛рдЬрдорд╛ рд░реВрдкрд╛рдиреНрддрд░рдг рдЧрд░реНрди, рддрдкрд╛рдИрдВрд▓реЗ рд╕реНрдкреАрдЪ API рдХреБрдЮреНрдЬреАрд▓рд╛рдИ рд╕рд┐рдзреИ рдкреНрд░рдпреЛрдЧ рдЧрд░реНрди рд╕рдХреНрдиреБрд╣реБрдиреНрди, рдпрд╕рдХреЛ рд╕рдЯреНрдЯрд╛ рддрдкрд╛рдИрдВрд▓реЗ рдкрд╣реБрдБрдЪ рдЯреЛрдХрди рдЕрдиреБрд░реЛрдз рдЧрд░реНрди рдЖрд╡рд╢реНрдпрдХ рдЫ, API рдХреБрдЮреНрдЬреАрд▓рд╛рдИ рдкрд╣реБрдБрдЪ рдЯреЛрдХрди рдЕрдиреБрд░реЛрдз рдкреНрд░рдорд╛рдгрд┐рдд рдЧрд░реНрди рдкреНрд░рдпреЛрдЧ рдЧрд░реНрджреИред `text-to-speech` рдлреЛрд▓реНрдбрд░рдмрд╛рдЯ `__init__.py` рдлрд╛рдЗрд▓ рдЦреЛрд▓реНрдиреБрд╣реЛрд╕реН рд░ рдпрд╕рдорд╛ рд░рд╣реЗрдХреЛ рд╕рдмреИ рдХреЛрдбрд▓рд╛рдИ рдирд┐рдореНрдирд╕рдБрдЧ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрди рдЧрд░реНрдиреБрд╣реЛрд╕реН:

    ```python
    import io
    import os
    import requests
    
    import librosa
    import soundfile as sf
    import azure.functions as func
    
    location = os.environ['SPEECH_LOCATION']
    speech_key = os.environ['SPEECH_KEY']
    
    def get_access_token():
        headers = {
            'Ocp-Apim-Subscription-Key': speech_key
        }
    
        token_endpoint = f'https://{location}.api.cognitive.microsoft.com/sts/v1.0/issuetoken'
        response = requests.post(token_endpoint, headers=headers)
        return str(response.text)
    ```

    рдпрд╕рд▓реЗ рд╕реЗрдЯрд┐рдЩрдмрд╛рдЯ рдкрдврд┐рдиреЗ рд╕реНрдерд╛рди рд░ рд╕реНрдкреАрдЪ рдХреБрдЮреНрдЬреАрдХреЛ рд▓рд╛рдЧрд┐ рд╕реНрдерд┐рд░рд╛рдВрдХрд╣рд░реВ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдЧрд░реНрджрдЫред рддреНрдпрд╕рдкрдЫрд┐ рдпрд╕рд▓реЗ `get_access_token` рдлрдЩреНрдХреНрд╢рди рдкрд░рд┐рднрд╛рд╖рд┐рдд рдЧрд░реНрджрдЫ рдЬрд╕рд▓реЗ рд╕реНрдкреАрдЪ рд╕реЗрд╡рд╛рдХреЛ рд▓рд╛рдЧрд┐ рдкрд╣реБрдБрдЪ рдЯреЛрдХрди рдкреНрд░рд╛рдкреНрдд рдЧрд░реНрдиреЗрдЫред

1. рдпрд╕ рдХреЛрдбрдХреЛ рддрд▓ рдирд┐рдореНрди рдердкреНрдиреБрд╣реЛрд╕реН:

    ```python
    playback_format = 'riff-48khz-16bit-mono-pcm'

    def main(req: func.HttpRequest) -> func.HttpResponse:
        req_body = req.get_json()
        language = req_body['language']
        voice = req_body['voice']
        text = req_body['text']
    
        url = f'https://{location}.tts.speech.microsoft.com/cognitiveservices/v1'
    
        headers = {
            'Authorization': 'Bearer ' + get_access_token(),
            'Content-Type': 'application/ssml+xml',
            'X-Microsoft-OutputFormat': playback_format
        }
    
        ssml =  f'<speak version=\'1.0\' xml:lang=\'{language}\'>'
        ssml += f'<voice xml:lang=\'{language}\' name=\'{voice}\'>'
        ssml += text
        ssml += '</voice>'
        ssml += '</speak>'
    
        response = requests.post(url, headers=headers, data=ssml.encode('utf-8'))
    
        raw_audio, sample_rate = librosa.load(io.BytesIO(response.content), sr=48000)
        resampled = librosa.resample(raw_audio, sample_rate, 44100)
        
        output_buffer = io.BytesIO()
        sf.write(output_buffer, resampled, 44100, 'PCM_16', format='wav')
        output_buffer.seek(0)
    
        return func.HttpResponse(output_buffer.read(), status_code=200)
    ```

    рдпрд╕рд▓реЗ рдЯреЗрдХреНрд╕реНрдЯрд▓рд╛рдИ рдЖрд╡рд╛рдЬрдорд╛ рд░реВрдкрд╛рдиреНрддрд░рдг рдЧрд░реНрдиреЗ HTTP рдЯреНрд░рд┐рдЧрд░ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдЧрд░реНрджрдЫред рдпрд╕рд▓реЗ рд░реВрдкрд╛рдиреНрддрд░рдг рдЧрд░реНрди рдЯреЗрдХреНрд╕реНрдЯ, рднрд╛рд╖рд╛ рд░ рдЖрд╡рд╛рдЬрд▓рд╛рдИ рдЕрдиреБрд░реЛрдзрдорд╛ рд╕реЗрдЯ рдЧрд░рд┐рдПрдХреЛ JSON рд╢рд░реАрд░рдмрд╛рдЯ рдирд┐рдХрд╛рд▓реНрдЫ, рд╕реНрдкреАрдЪ рдЕрдиреБрд░реЛрдз рдЧрд░реНрди SSML рдирд┐рд░реНрдорд╛рдг рдЧрд░реНрджрдЫ, рддреНрдпрд╕рдкрдЫрд┐ рдкрд╣реБрдБрдЪ рдЯреЛрдХрди рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрд░ рдкреНрд░рдорд╛рдгрд┐рдд рдЧрд░реНрджреИ рд╕рдореНрдмрдиреНрдзрд┐рдд REST API рдХрд▓ рдЧрд░реНрджрдЫред рдпреЛ REST API рдХрд▓рд▓реЗ резрем-рдмрд┐рдЯ, рекреоKHz рдореЛрдиреЛ WAV рдлрд╛рдЗрд▓рдХреЛ рд░реВрдкрдорд╛ рдЕрдбрд┐рдпреЛ рдлрд░реНрдХрд╛рдЙрдБрдЫ, рдЬреБрди `playback_format` рдХреЛ рдорд╛рдирджреНрд╡рд╛рд░рд╛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдЧрд░рд┐рдПрдХреЛ рдЫ, рдЬреБрди REST API рдХрд▓рдорд╛ рдкрдард╛рдЗрдиреНрдЫред

    рддреНрдпрд╕рдкрдЫрд┐ рдпрд╕рд▓рд╛рдИ `librosa` рджреНрд╡рд╛рд░рд╛ рекреоKHz рдирдореВрдирд╛ рджрд░рдмрд╛рдЯ рекрек.резKHz рдирдореВрдирд╛ рджрд░рдорд╛ рдкреБрдирдГ рдирдореВрдирд╛ рдЧрд░рд┐рдиреНрдЫ, рддреНрдпрд╕рдкрдЫрд┐ рдпреЛ рдЕрдбрд┐рдпреЛрд▓рд╛рдИ рдмрд╛рдЗрдирд░реА рдмрдлрд░рдорд╛ рдмрдЪрдд рдЧрд░рд┐рдиреНрдЫ рдЬреБрди рддреНрдпрд╕рдкрдЫрд┐ рдлрд░реНрдХрд╛рдЗрдиреНрдЫред

1. рддрдкрд╛рдИрдВрдХреЛ рдлрдЩреНрдХреНрд╢рди рдПрдкрд▓рд╛рдИ рд╕реНрдерд╛рдиреАрдп рд░реВрдкрдорд╛ рдЪрд▓рд╛рдЙрдиреБрд╣реЛрд╕реН, рд╡рд╛ рдХреНрд▓рд╛рдЙрдбрдорд╛ рддреИрдирд╛рде рдЧрд░реНрдиреБрд╣реЛрд╕реНред рддреНрдпрд╕рдкрдЫрд┐ рддрдкрд╛рдИрдВ рдпрд╕рд▓рд╛рдИ curl рдЬрд╕реНрддреЛ рдЙрдкрдХрд░рдг рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрд░ рдХрд▓ рдЧрд░реНрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫ, рдареАрдХ рддреНрдпрд╕реНрддреИ рдЬрд╕рд░реА рддрдкрд╛рдИрдВрд▓реЗ `text-to-timer` HTTP рдЯреНрд░рд┐рдЧрд░ рдкрд░реАрдХреНрд╖рдг рдЧрд░реНрдиреБрднрдпреЛред рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдЧрд░реНрдиреБрд╣реЛрд╕реН рдХрд┐ рднрд╛рд╖рд╛, рдЖрд╡рд╛рдЬ рд░ рдЯреЗрдХреНрд╕реНрдЯ JSON рд╢рд░реАрд░рдХреЛ рд░реВрдкрдорд╛ рдкрд╛рд╕ рдЧрд░рд┐рдПрдХреЛ рдЫ:

    ```json
    {
        "language": "<language>",
        "voice": "<voice>",
        "text": "<text>"
    }
    ```

    `<language>` рд▓рд╛рдИ рддрдкрд╛рдИрдВрдХреЛ рднрд╛рд╖рд╛, рдЬрд╕реНрддреИ `en-GB` рд╡рд╛ `zh-CN` рд▓реЗ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрди рдЧрд░реНрдиреБрд╣реЛрд╕реНред `<voice>` рд▓рд╛рдИ рддрдкрд╛рдИрдВрд▓реЗ рдкреНрд░рдпреЛрдЧ рдЧрд░реНрди рдЪрд╛рд╣реЗрдХреЛ рдЖрд╡рд╛рдЬрд▓реЗ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрди рдЧрд░реНрдиреБрд╣реЛрд╕реНред `<text>` рд▓рд╛рдИ рддрдкрд╛рдИрдВрд▓реЗ рдЖрд╡рд╛рдЬрдорд╛ рд░реВрдкрд╛рдиреНрддрд░рдг рдЧрд░реНрди рдЪрд╛рд╣реЗрдХреЛ рдЯреЗрдХреНрд╕реНрдЯрд▓реЗ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрди рдЧрд░реНрдиреБрд╣реЛрд╕реНред рддрдкрд╛рдИрдВ рдЖрдЙрдЯрдкреБрдЯрд▓рд╛рдИ рдлрд╛рдЗрд▓рдорд╛ рдмрдЪрдд рдЧрд░реНрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫ рд░ WAV рдлрд╛рдЗрд▓ рдмрдЬрд╛рдЙрди рд╕рдХреНрдиреЗ рдХреБрдиреИ рдкрдирд┐ рдЕрдбрд┐рдпреЛ рдкреНрд▓реЗрдпрд░ рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрд░ рдмрдЬрд╛рдЙрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫред

    рдЙрджрд╛рд╣рд░рдгрдХрд╛ рд▓рд╛рдЧрд┐, "Hello" рд▓рд╛рдИ US English рдорд╛ Jenny Neural рдЖрд╡рд╛рдЬ рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрд░ рдЖрд╡рд╛рдЬрдорд╛ рд░реВрдкрд╛рдиреНрддрд░рдг рдЧрд░реНрди, рдлрдЩреНрдХреНрд╢рди рдПрдк рд╕реНрдерд╛рдиреАрдп рд░реВрдкрдорд╛ рдЪрд▓рд┐рд░рд╣реЗрдХреЛ рдЕрд╡рд╕реНрдерд╛рдорд╛, рддрдкрд╛рдИрдВ рдирд┐рдореНрди curl рдХрдорд╛рдгреНрдб рдкреНрд░рдпреЛрдЧ рдЧрд░реНрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫ:

    ```sh
    curl -X GET 'http://localhost:7071/api/text-to-speech' \
         -H 'Content-Type: application/json' \
         -o hello.wav \
         -d '{
           "language":"en-US",
           "voice": "en-US-JennyNeural",
           "text": "Hello"
         }'
    ```

    рдпрд╕рд▓реЗ рдЕрдбрд┐рдпреЛрд▓рд╛рдИ `hello.wav` рдорд╛ рд╣рд╛рд▓рдХреЛ рдбрд╛рдЗрд░реЗрдХреНрдЯрд░реАрдорд╛ рдмрдЪрдд рдЧрд░реНрдиреЗрдЫред

> ЁЯТБ рддрдкрд╛рдИрдВ рдпреЛ рдХреЛрдб [code-spoken-response/functions](../../../../../6-consumer/lessons/3-spoken-feedback/code-spoken-response/functions) рдлреЛрд▓реНрдбрд░рдорд╛ рдлреЗрд▓рд╛ рдкрд╛рд░реНрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫред

### рдХрд╛рд░реНрдп - Wio Terminal рдмрд╛рдЯ рдЖрд╡рд╛рдЬ рдкреНрд░рд╛рдкреНрдд рдЧрд░реНрдиреБрд╣реЛрд╕реН

1. рдпрджрд┐ рдЦреБрд▓рд╛ рдЫреИрди рднрдиреЗ, VS Code рдорд╛ `smart-timer` рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдЦреЛрд▓реНрдиреБрд╣реЛрд╕реНред

1. `config.h` рд╣реЗрдбрд░ рдлрд╛рдЗрд▓ рдЦреЛрд▓реНрдиреБрд╣реЛрд╕реН рд░ рддрдкрд╛рдИрдВрдХреЛ рдлрдЩреНрдХреНрд╢рди рдПрдкрдХреЛ URL рдердкреНрдиреБрд╣реЛрд╕реН:

    ```cpp
    const char *TEXT_TO_SPEECH_FUNCTION_URL = "<URL>";
    ```

    `<URL>` рд▓рд╛рдИ рддрдкрд╛рдИрдВрдХреЛ рдлрдЩреНрдХреНрд╢рди рдПрдкрдХреЛ `text-to-speech` HTTP рдЯреНрд░рд┐рдЧрд░рдХреЛ URL рд▓реЗ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрди рдЧрд░реНрдиреБрд╣реЛрд╕реНред рдпреЛ `TEXT_TO_TIMER_FUNCTION_URL` рдХреЛ рдорд╛рдирд╕рдБрдЧ рд╕рдорд╛рди рд╣реБрдиреЗрдЫ, рддрд░ `text-to-timer` рдХреЛ рд╕рдЯреНрдЯрд╛ `text-to-speech` рдХреЛ рдлрдЩреНрдХреНрд╢рди рдирд╛рдо рд╣реБрдиреЗрдЫред

1. `text_to_speech.h` рд╣реЗрдбрд░ рдлрд╛рдЗрд▓ рдЦреЛрд▓реНрдиреБрд╣реЛрд╕реН, рд░ `TextToSpeech` рдХрдХреНрд╖рд╛рдХреЛ `public` рдЦрдгреНрдбрдорд╛ рдирд┐рдореНрди рд╡рд┐рдзрд┐ рдердкреНрдиреБрд╣реЛрд╕реН:

    ```cpp
    void convertTextToSpeech(String text)
    {
    }
    ```

1. `convertTextToSpeech` рд╡рд┐рдзрд┐рдорд╛, рдлрдЩреНрдХреНрд╢рди рдПрдкрдорд╛ рдкрдард╛рдЙрди JSON рд╕рд┐рд░реНрдЬрдирд╛ рдЧрд░реНрди рдирд┐рдореНрди рдХреЛрдб рдердкреНрдиреБрд╣реЛрд╕реН:

    ```cpp
    DynamicJsonDocument doc(1024);
    doc["language"] = LANGUAGE;
    doc["voice"] = _voice;
    doc["text"] = text;

    String body;
    serializeJson(doc, body);
    ```

    рдпрд╕рд▓реЗ рднрд╛рд╖рд╛, рдЖрд╡рд╛рдЬ рд░ рдЯреЗрдХреНрд╕реНрдЯрд▓рд╛рдИ JSON рджрд╕реНрддрд╛рд╡реЗрдЬрдорд╛ рд▓реЗрдЦреНрдЫ, рддреНрдпрд╕рдкрдЫрд┐ рдпрд╕рд▓рд╛рдИ рд╕реНрдЯреНрд░рд┐рдЩрдорд╛ рд╕рд┐рд░рд┐рдпрд▓рд╛рдЗрдЬ рдЧрд░реНрджрдЫред

1. рдпрд╕рдХреЛ рддрд▓, рдлрдЩреНрдХреНрд╢рди рдПрдкрд▓рд╛рдИ рдХрд▓ рдЧрд░реНрди рдирд┐рдореНрди рдХреЛрдб рдердкреНрдиреБрд╣реЛрд╕реН:

    ```cpp
    HTTPClient httpClient;
    httpClient.begin(_client, TEXT_TO_SPEECH_FUNCTION_URL);

    int httpResponseCode = httpClient.POST(body);
    ```

    рдпрд╕рд▓реЗ HTTPClient рд╕рд┐рд░реНрдЬрдирд╛ рдЧрд░реНрджрдЫ, рддреНрдпрд╕рдкрдЫрд┐ JSON рджрд╕реНрддрд╛рд╡реЗрдЬ рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрд░ рдЯреЗрдХреНрд╕реНрдЯрд▓рд╛рдИ рдЖрд╡рд╛рдЬрдорд╛ рд░реВрдкрд╛рдиреНрддрд░рдг рдЧрд░реНрдиреЗ HTTP рдЯреНрд░рд┐рдЧрд░рдорд╛ POST рдЕрдиреБрд░реЛрдз рдЧрд░реНрджрдЫред

1. рдпрджрд┐ рдХрд▓ рд╕рдлрд▓ рд╣реБрдиреНрдЫ рднрдиреЗ, рдлрдЩреНрдХреНрд╢рди рдПрдк рдХрд▓рдмрд╛рдЯ рдлрд░реНрдХрд╛рдЗрдПрдХреЛ рдХрдЪреНрдЪрд╛ рдмрд╛рдЗрдирд░реА рдбреЗрдЯрд╛ SD рдХрд╛рд░реНрдбрдорд╛ рдлрд╛рдЗрд▓рдорд╛ рд╕реНрдЯреНрд░рд┐рдо рдЧрд░реНрди рд╕рдХрд┐рдиреНрдЫред рдпрд╕рд▓рд╛рдИ рдЧрд░реНрди рдирд┐рдореНрди рдХреЛрдб рдердкреНрдиреБрд╣реЛрд╕реН:

    ```cpp
    if (httpResponseCode == 200)
    {            
        File wav_file = SD.open("SPEECH.WAV", FILE_WRITE);
        httpClient.writeToStream(&wav_file);
        wav_file.close();
    }
    else
    {
        Serial.print("Failed to get speech - error ");
        Serial.println(httpResponseCode);
    }
    ```

    рдпреЛ рдХреЛрдбрд▓реЗ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдЬрд╛рдБрдЪ рдЧрд░реНрджрдЫ, рд░ рдпрджрд┐ рдпреЛ реирежреж (рд╕рдлрд▓рддрд╛) рд╣реЛ рднрдиреЗ, рдмрд╛рдЗрдирд░реА рдбреЗрдЯрд╛ SD рдХрд╛рд░реНрдбрдХреЛ рдЬрдбрдорд╛ `SPEECH.WAV` рдирд╛рдордХ рдлрд╛рдЗрд▓рдорд╛ рд╕реНрдЯреНрд░рд┐рдо рдЧрд░рд┐рдиреНрдЫред

1. рдпрд╕ рд╡рд┐рдзрд┐рдХреЛ рдЕрдиреНрддреНрдпрдорд╛, HTTP рдХрдиреЗрдХреНрд╢рди рдмрдиреНрдж рдЧрд░реНрдиреБрд╣реЛрд╕реН:

    ```cpp
    httpClient.end();
    ```

1. рдмреЛрд▓реНрдиреБрдкрд░реНрдиреЗ рдЯреЗрдХреНрд╕реНрдЯрд▓рд╛рдИ рдЕрдм рдЕрдбрд┐рдпреЛрдорд╛ рд░реВрдкрд╛рдиреНрддрд░рдг рдЧрд░реНрди рд╕рдХрд┐рдиреНрдЫред `main.cpp` рдлрд╛рдЗрд▓рдорд╛, `say` рдлрдЩреНрдХреНрд╢рдирдХреЛ рдЕрдиреНрддреНрдпрдорд╛ рдирд┐рдореНрди рд▓рд╛рдЗрди рдердкреНрдиреБрд╣реЛрд╕реН рддрд╛рдХрд┐ рдмреЛрд▓реНрдиреБрдкрд░реНрдиреЗ рдЯреЗрдХреНрд╕реНрдЯрд▓рд╛рдИ рдЕрдбрд┐рдпреЛрдорд╛ рд░реВрдкрд╛рдиреНрддрд░рдг рдЧрд░реНрди рд╕рдХрд┐рдпреЛрд╕реН:
```cpp
    textToSpeech.convertTextToSpeech(text);
    ```

### рдХрд╛рд░реНрдп - рдЖрдлреНрдиреЛ Wio Terminal рдмрд╛рдЯ рдЕрдбрд┐рдпреЛ рдмрдЬрд╛рдЙрдиреБрд╣реЛрд╕реН

**рдЫрд┐рдЯреНрдЯреИ рдЖрдЙрдБрджреИрдЫ**

## рдЖрдлреНрдиреЛ functions app рдХреНрд▓рд╛рдЙрдбрдорд╛ рдбрд┐рдкреНрд▓реЛрдп рдЧрд░реНрдиреБрд╣реЛрд╕реН

рдлрдВрдХреНрд╢рди рдПрдкреНрд▓рд┐рдХреЗрд╕рдирд▓рд╛рдИ рд╕реНрдерд╛рдиреАрдп рд░реВрдкрдорд╛ рдЪрд▓рд╛рдЙрдиреЗ рдХрд╛рд░рдг рднрдиреЗрдХреЛ `librosa` Pip рдкреНрдпрд╛рдХреЗрдЬрд▓реЗ рд▓рд┐рдирдХреНрд╕рдорд╛ рдПрдЙрдЯрд╛ рд▓рд╛рдЗрдмреНрд░реЗрд░реАрдорд╛ рдирд┐рд░реНрднрд░рддрд╛ рд░рд╛рдЦреНрдЫ, рдЬреБрди рдбрд┐рдлрд▓реНрдЯ рд░реВрдкрдорд╛ рд╕реНрдерд╛рдкрдирд╛ рдЧрд░рд┐рдПрдХреЛ рд╣реБрдБрджреИрди, рд░ рдлрдВрдХреНрд╢рди рдПрдкреНрд▓рд┐рдХреЗрд╕рди рдЪрд▓рд╛рдЙрдиреБрдЕрдШрд┐ рдпреЛ рд▓рд╛рдЗрдмреНрд░реЗрд░реА рд╕реНрдерд╛рдкрдирд╛ рдЧрд░реНрди рдЖрд╡рд╢реНрдпрдХ рд╣реБрдиреНрдЫред рдлрдВрдХреНрд╢рди рдПрдкреНрд▓рд┐рдХреЗрд╕рдирд╣рд░реВ рд╕рд░реНрд╡рд░рд▓реЗрд╕ рд╣реБрдиреНрдЫрдиреН - рддрдкрд╛рдИрдВрд▓реЗ рдЖрдлреИрдВ рд╡реНрдпрд╡рд╕реНрдерд╛рдкрди рдЧрд░реНрди рд╕рдХреНрдиреЗ рдХреБрдиреИ рд╕рд░реНрд╡рд░рд╣рд░реВ рд╣реБрдБрджреИрдирдиреН, рддреНрдпрд╕реИрд▓реЗ рдпреЛ рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдкрд╣рд┐рд▓реЗ рдиреИ рд╕реНрдерд╛рдкрдирд╛ рдЧрд░реНрдиреЗ рдХреБрдиреИ рдЙрдкрд╛рдп рд╣реБрдБрджреИрдиред

рдпрд╕рдХреЛ рд╕рдорд╛рдзрд╛рди рднрдиреЗрдХреЛ рдЖрдлреНрдиреЛ functions app рд▓рд╛рдИ Docker рдХрдиреНрдЯреЗрдирд░ рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрд░ рдбрд┐рдкреНрд▓реЛрдп рдЧрд░реНрдиреБ рд╣реЛред рдпреЛ рдХрдиреНрдЯреЗрдирд░ рдХреНрд▓рд╛рдЙрдбрд▓реЗ рддрдм рдбрд┐рдкреНрд▓реЛрдп рдЧрд░реНрдЫ рдЬрдм рдирдпрд╛рдБ instance рдХреЛ рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реБрдиреНрдЫ (рдЬрд╕реНрддреИ, рдорд╛рдЧ рдЙрдкрд▓рдмреНрдз рд╕реНрд░реЛрддрд╣рд░реВ рднрдиреНрджрд╛ рдмрдвреА рд╣реБрдБрджрд╛, рд╡рд╛ рдлрдВрдХреНрд╢рди рдПрдкреНрд▓рд┐рдХреЗрд╕рди рд▓рд╛рдореЛ рд╕рдордпрд╕рдореНрдо рдкреНрд░рдпреЛрдЧ рдирдЧрд░рд┐рдПрдХреЛ рдЕрд╡рд╕реНрдерд╛рдорд╛ рдмрдиреНрдж рд╣реБрдБрджрд╛)ред

Linux рдорд╛ рдХрд╕реНрдЯрдо рдХрдиреНрдЯреЗрдирд░ рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрд░ рдлрдВрдХреНрд╢рди рдмрдирд╛рдЙрдиреЗ рд░ Docker рдорд╛рд░реНрдлрдд рдбрд┐рдкреНрд▓реЛрдп рдЧрд░реНрдиреЗ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ [Microsoft Docs](https://docs.microsoft.com/azure/azure-functions/functions-create-function-linux-custom-image?WT.mc_id=academic-17441-jabenn&tabs=bash%2Cazurecli&pivots=programming-language-python) рдорд╛ рдкрд╛рдЙрди рд╕рдХрд┐рдиреНрдЫред

рдпреЛ рдбрд┐рдкреНрд▓реЛрдп рднрдПрдкрдЫрд┐, рддрдкрд╛рдИрдВ рдЖрдлреНрдиреЛ Wio Terminal рдХреЛрдбрд▓рд╛рдИ рдпреЛ рдлрдВрдХреНрд╢рдирдорд╛ рдкрд╣реБрдБрдЪ рдЧрд░реНрди рдкреЛрд░реНрдЯ рдЧрд░реНрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫ:

1. Azure Functions рдкреНрд░рдорд╛рдгрдкрддреНрд░рд▓рд╛рдИ `config.h` рдорд╛ рдердкреНрдиреБрд╣реЛрд╕реН:

    ```cpp
    const char *FUNCTIONS_CERTIFICATE =
        "-----BEGIN CERTIFICATE-----\r\n"
        "MIIFWjCCBEKgAwIBAgIQDxSWXyAgaZlP1ceseIlB4jANBgkqhkiG9w0BAQsFADBa\r\n"
        "MQswCQYDVQQGEwJJRTESMBAGA1UEChMJQmFsdGltb3JlMRMwEQYDVQQLEwpDeWJl\r\n"
        "clRydXN0MSIwIAYDVQQDExlCYWx0aW1vcmUgQ3liZXJUcnVzdCBSb290MB4XDTIw\r\n"
        "MDcyMTIzMDAwMFoXDTI0MTAwODA3MDAwMFowTzELMAkGA1UEBhMCVVMxHjAcBgNV\r\n"
        "BAoTFU1pY3Jvc29mdCBDb3Jwb3JhdGlvbjEgMB4GA1UEAxMXTWljcm9zb2Z0IFJT\r\n"
        "QSBUTFMgQ0EgMDEwggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQCqYnfP\r\n"
        "mmOyBoTzkDb0mfMUUavqlQo7Rgb9EUEf/lsGWMk4bgj8T0RIzTqk970eouKVuL5R\r\n"
        "IMW/snBjXXgMQ8ApzWRJCZbar879BV8rKpHoAW4uGJssnNABf2n17j9TiFy6BWy+\r\n"
        "IhVnFILyLNK+W2M3zK9gheiWa2uACKhuvgCca5Vw/OQYErEdG7LBEzFnMzTmJcli\r\n"
        "W1iCdXby/vI/OxbfqkKD4zJtm45DJvC9Dh+hpzqvLMiK5uo/+aXSJY+SqhoIEpz+\r\n"
        "rErHw+uAlKuHFtEjSeeku8eR3+Z5ND9BSqc6JtLqb0bjOHPm5dSRrgt4nnil75bj\r\n"
        "c9j3lWXpBb9PXP9Sp/nPCK+nTQmZwHGjUnqlO9ebAVQD47ZisFonnDAmjrZNVqEX\r\n"
        "F3p7laEHrFMxttYuD81BdOzxAbL9Rb/8MeFGQjE2Qx65qgVfhH+RsYuuD9dUw/3w\r\n"
        "ZAhq05yO6nk07AM9c+AbNtRoEcdZcLCHfMDcbkXKNs5DJncCqXAN6LhXVERCw/us\r\n"
        "G2MmCMLSIx9/kwt8bwhUmitOXc6fpT7SmFvRAtvxg84wUkg4Y/Gx++0j0z6StSeN\r\n"
        "0EJz150jaHG6WV4HUqaWTb98Tm90IgXAU4AW2GBOlzFPiU5IY9jt+eXC2Q6yC/Zp\r\n"
        "TL1LAcnL3Qa/OgLrHN0wiw1KFGD51WRPQ0Sh7QIDAQABo4IBJTCCASEwHQYDVR0O\r\n"
        "BBYEFLV2DDARzseSQk1Mx1wsyKkM6AtkMB8GA1UdIwQYMBaAFOWdWTCCR1jMrPoI\r\n"
        "VDaGezq1BE3wMA4GA1UdDwEB/wQEAwIBhjAdBgNVHSUEFjAUBggrBgEFBQcDAQYI\r\n"
        "KwYBBQUHAwIwEgYDVR0TAQH/BAgwBgEB/wIBADA0BggrBgEFBQcBAQQoMCYwJAYI\r\n"
        "KwYBBQUHMAGGGGh0dHA6Ly9vY3NwLmRpZ2ljZXJ0LmNvbTA6BgNVHR8EMzAxMC+g\r\n"
        "LaArhilodHRwOi8vY3JsMy5kaWdpY2VydC5jb20vT21uaXJvb3QyMDI1LmNybDAq\r\n"
        "BgNVHSAEIzAhMAgGBmeBDAECATAIBgZngQwBAgIwCwYJKwYBBAGCNyoBMA0GCSqG\r\n"
        "SIb3DQEBCwUAA4IBAQCfK76SZ1vae4qt6P+dTQUO7bYNFUHR5hXcA2D59CJWnEj5\r\n"
        "na7aKzyowKvQupW4yMH9fGNxtsh6iJswRqOOfZYC4/giBO/gNsBvwr8uDW7t1nYo\r\n"
        "DYGHPpvnpxCM2mYfQFHq576/TmeYu1RZY29C4w8xYBlkAA8mDJfRhMCmehk7cN5F\r\n"
        "JtyWRj2cZj/hOoI45TYDBChXpOlLZKIYiG1giY16vhCRi6zmPzEwv+tk156N6cGS\r\n"
        "Vm44jTQ/rs1sa0JSYjzUaYngoFdZC4OfxnIkQvUIA4TOFmPzNPEFdjcZsgbeEz4T\r\n"
        "cGHTBPK4R28F44qIMCtHRV55VMX53ev6P3hRddJb\r\n"
        "-----END CERTIFICATE-----\r\n";
    ```

1. `<WiFiClient.h>` рдХреЛ рд╕рдмреИ рд╕рдорд╛рд╡реЗрд╢рд▓рд╛рдИ `<WiFiClientSecure.h>` рдорд╛ рдкрд░рд┐рд╡рд░реНрддрди рдЧрд░реНрдиреБрд╣реЛрд╕реНред

1. рд╕рдмреИ `WiFiClient` рдлрд┐рд▓реНрдбрд╣рд░реВрд▓рд╛рдИ `WiFiClientSecure` рдорд╛ рдкрд░рд┐рд╡рд░реНрддрди рдЧрд░реНрдиреБрд╣реЛрд╕реНред

1. рдЬрд╕рдХреЛ `WiFiClientSecure` рдлрд┐рд▓реНрдб рдЫ, рддреНрдпрд╕реНрддрд╛ рдкреНрд░рддреНрдпреЗрдХ рдХреНрд▓рд╛рд╕рдорд╛ рдПрдЙрдЯрд╛ рдХрдиреНрд╕реНрдЯреНрд░рдХреНрдЯрд░ рдердкреНрдиреБрд╣реЛрд╕реН рд░ рдЙрдХреНрдд рдХрдиреНрд╕реНрдЯреНрд░рдХреНрдЯрд░рдорд╛ рдкреНрд░рдорд╛рдгрдкрддреНрд░ рд╕реЗрдЯ рдЧрд░реНрдиреБрд╣реЛрд╕реН:

    ```cpp
    _client.setCACert(FUNCTIONS_CERTIFICATE);
    ```

---

**рдЕрд╕реНрд╡реАрдХрд░рдг**:  
рдпреЛ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ AI рдЕрдиреБрд╡рд╛рдж рд╕реЗрд╡рд╛ [Co-op Translator](https://github.com/Azure/co-op-translator) рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрд░ рдЕрдиреБрд╡рд╛рдж рдЧрд░рд┐рдПрдХреЛ рдЫред рд╣рд╛рдореА рд╢реБрджреНрдзрддрд╛рдХреЛ рд▓рд╛рдЧрд┐ рдкреНрд░рдпрд╛рд╕ рдЧрд░реНрдЫреМрдВ, рддрд░ рдХреГрдкрдпрд╛ рдзреНрдпрд╛рди рджрд┐рдиреБрд╣реЛрд╕реН рдХрд┐ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдЕрдиреБрд╡рд╛рджрдорд╛ рддреНрд░реБрдЯрд┐рд╣рд░реВ рд╡рд╛ рдЕрд╢реБрджреНрдзрддрд╛рд╣рд░реВ рд╣реБрди рд╕рдХреНрдЫред рдпрд╕рдХреЛ рдореВрд▓ рднрд╛рд╖рд╛ рдорд╛ рд░рд╣реЗрдХреЛ рдореВрд▓ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝рд▓рд╛рдИ рдЖрдзрд┐рдХрд╛рд░рд┐рдХ рд╕реНрд░реЛрдд рдорд╛рдирд┐рдиреБрдкрд░реНрдЫред рдорд╣рддреНрд╡рдкреВрд░реНрдг рдЬрд╛рдирдХрд╛рд░реАрдХреЛ рд▓рд╛рдЧрд┐, рд╡реНрдпрд╛рд╡рд╕рд╛рдпрд┐рдХ рдорд╛рдирд╡ рдЕрдиреБрд╡рд╛рдж рд╕рд┐рдлрд╛рд░рд┐рд╕ рдЧрд░рд┐рдиреНрдЫред рдпрд╕ рдЕрдиреБрд╡рд╛рджрдХреЛ рдкреНрд░рдпреЛрдЧрдмрд╛рдЯ рдЙрддреНрдкрдиреНрди рд╣реБрдиреЗ рдХреБрдиреИ рдкрдирд┐ рдЧрд▓рддрдлрд╣рдореА рд╡рд╛ рдЧрд▓рдд рд╡реНрдпрд╛рдЦреНрдпрд╛рдХреЛ рд▓рд╛рдЧрд┐ рд╣рд╛рдореА рдЬрд┐рдореНрдореЗрд╡рд╛рд░ рд╣реБрдиреЗ рдЫреИрдиреМрдВред