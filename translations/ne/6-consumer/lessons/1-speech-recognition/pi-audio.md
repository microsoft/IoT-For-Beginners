<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "0ac0afcfb40cb5970ef4cb74f01c32e9",
  "translation_date": "2025-08-27T14:01:36+00:00",
  "source_file": "6-consumer/lessons/1-speech-recognition/pi-audio.md",
  "language_code": "ne"
}
-->
# рдЕрдбрд┐рдпреЛ рдХреНрдпрд╛рдкреНрдЪрд░ рдЧрд░реНрдиреБрд╣реЛрд╕реН - рд░рд╛рд╕реНрдкрдмреЗрд░реА рдкрд╛рдИ

рдпрд╕ рдкрд╛рдардХреЛ рдпрд╕ рднрд╛рдЧрдорд╛, рддрдкрд╛рдИрдВрд▓реЗ рд░рд╛рд╕реНрдкрдмреЗрд░реА рдкрд╛рдИрдорд╛ рдЕрдбрд┐рдпреЛ рдХреНрдпрд╛рдкреНрдЪрд░ рдЧрд░реНрди рдХреЛрдб рд▓реЗрдЦреНрдиреБрд╣реБрдиреЗрдЫред рдЕрдбрд┐рдпреЛ рдХреНрдпрд╛рдкреНрдЪрд░ рдмрдЯрдирджреНрд╡рд╛рд░рд╛ рдирд┐рдпрдиреНрддреНрд░рдг рдЧрд░рд┐рдиреЗрдЫред

## рд╣рд╛рд░реНрдбрд╡реЗрдпрд░

рд░рд╛рд╕реНрдкрдмреЗрд░реА рдкрд╛рдИрд▓рд╛рдИ рдЕрдбрд┐рдпреЛ рдХреНрдпрд╛рдкреНрдЪрд░ рдирд┐рдпрдиреНрддреНрд░рдг рдЧрд░реНрди рдмрдЯрди рдЖрд╡рд╢реНрдпрдХ рдЫред

рддрдкрд╛рдИрдВрд▓реЗ рдкреНрд░рдпреЛрдЧ рдЧрд░реНрдиреЗ рдмрдЯрди Grove рдмрдЯрди рд╣реЛред рдпреЛ рдбрд┐рдЬрд┐рдЯрд▓ рд╕реЗрдиреНрд╕рд░ рд╣реЛ рдЬрд╕рд▓реЗ рд╕рд┐рдЧреНрдирд▓рд▓рд╛рдИ рдЕрди рд╡рд╛ рдЕрдл рдЧрд░реНрдЫред рдпреА рдмрдЯрдирд╣рд░реВрд▓рд╛рдИ рдмрдЯрди рдерд┐рдЪреНрджрд╛ рдЙрдЪреНрдЪ рд╕рд┐рдЧреНрдирд▓ рдкрдард╛рдЙрди рд░ рдирдерд┐рдЪреНрджрд╛ рдХрдо рд╕рд┐рдЧреНрдирд▓ рдкрдард╛рдЙрди, рд╡рд╛ рдерд┐рдЪреНрджрд╛ рдХрдо рд░ рдирдерд┐рдЪреНрджрд╛ рдЙрдЪреНрдЪ рд╕рд┐рдЧреНрдирд▓ рдкрдард╛рдЙрди рдХрдиреНрдлрд┐рдЧрд░ рдЧрд░реНрди рд╕рдХрд┐рдиреНрдЫред

рдпрджрд┐ рддрдкрд╛рдИрдВ рдорд╛рдЗрдХреНрд░реЛрдлреЛрдирдХреЛ рд░реВрдкрдорд╛ ReSpeaker 2-Mics Pi HAT рдкреНрд░рдпреЛрдЧ рдЧрд░реНрджреИ рд╣реБрдиреБрд╣реБрдиреНрдЫ рднрдиреЗ, рдмрдЯрди рдЬрдбрд╛рди рдЧрд░реНрди рдЖрд╡рд╢реНрдпрдХ рдЫреИрди рдХрд┐рдирднрдиреЗ рдпрд╕ HAT рдорд╛ рдкрд╣рд┐рд▓реЗ рдиреИ рдмрдЯрди рдлрд┐рдЯ рдЧрд░рд┐рдПрдХреЛ рдЫред рдЕрд░реНрдХреЛ рдЦрдгреНрдбрдорд╛ рдЬрд╛рдиреБрд╣реЛрд╕реНред

### рдмрдЯрди рдЬрдбрд╛рди рдЧрд░реНрдиреБрд╣реЛрд╕реН

рдмрдЯрди Grove рдмреЗрд╕ HAT рдорд╛ рдЬрдбрд╛рди рдЧрд░реНрди рд╕рдХрд┐рдиреНрдЫред

#### рдХрд╛рд░реНрдп - рдмрдЯрди рдЬрдбрд╛рди рдЧрд░реНрдиреБрд╣реЛрд╕реН

![Grove рдмрдЯрди](../../../../../translated_images/grove-button.a70cfbb809a8563681003250cf5b06d68cdcc68624f9e2f493d5a534ae2da1e5.ne.png)

1. Grove рдХреЗрдмрд▓рдХреЛ рдПрдХ рдЫреЗрдЙ рдмрдЯрди рдореЛрдбреНрдпреБрд▓рдХреЛ рд╕рдХреЗрдЯрдорд╛ рд╣рд╛рд▓реНрдиреБрд╣реЛрд╕реНред рдпреЛ рдХреЗрд╡рд▓ рдПрдХ рддрд░рд┐рдХрд╛рд▓реЗ рдорд╛рддреНрд░ рдЬрдбрд╛рди рдЧрд░реНрди рд╕рдХрд┐рдиреНрдЫред

1. рд░рд╛рд╕реНрдкрдмреЗрд░реА рдкрд╛рдИ рдмрдиреНрдж рдЕрд╡рд╕реНрдерд╛рдорд╛, Grove рдХреЗрдмрд▓рдХреЛ рдЕрд░реНрдХреЛ рдЫреЗрдЙрд▓рд╛рдИ Grove рдмреЗрд╕ HAT рдорд╛ GPIO рдкрд┐рдирдХреЛ рдЫреЗрдЙрдорд╛ рд░рд╣реЗрдХреЛ рд╕рдХреЗрдЯрдХреЛ рдкрдВрдХреНрддрд┐рдорд╛ **D5** рдорд╛рд░реНрдХ рдЧрд░рд┐рдПрдХреЛ рдбрд┐рдЬрд┐рдЯрд▓ рд╕рдХреЗрдЯрдорд╛ рдЬрдбрд╛рди рдЧрд░реНрдиреБрд╣реЛрд╕реНред рдпреЛ рд╕рдХреЗрдЯ рдмрд╛рдБрдпрд╛ рддрд░реНрдлрдмрд╛рдЯ рджреЛрд╕реНрд░реЛ рд╣реЛред

![D5 рд╕рдХреЗрдЯрдорд╛ рдЬрдбрд╛рди рдЧрд░рд┐рдПрдХреЛ Grove рдмрдЯрди](../../../../../translated_images/pi-button.c7a1a4f55943341ce1baf1057658e9a205804d4131d258e820c93f951df0abf3.ne.png)

## рдЕрдбрд┐рдпреЛ рдХреНрдпрд╛рдкреНрдЪрд░ рдЧрд░реНрдиреБрд╣реЛрд╕реН

рддрдкрд╛рдИрдВ рдорд╛рдЗрдХреНрд░реЛрдлреЛрдирдмрд╛рдЯ Python рдХреЛрдб рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрд░ рдЕрдбрд┐рдпреЛ рдХреНрдпрд╛рдкреНрдЪрд░ рдЧрд░реНрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫред

### рдХрд╛рд░реНрдп - рдЕрдбрд┐рдпреЛ рдХреНрдпрд╛рдкреНрдЪрд░ рдЧрд░реНрдиреБрд╣реЛрд╕реН

1. рдкрд╛рдИрд▓рд╛рдИ рдкрд╛рд╡рд░ рджрд┐рдиреБрд╣реЛрд╕реН рд░ рдмреБрдЯ рд╣реБрдиреЗ рд╕рдордп рдкрд░реНрдЦрдиреБрд╣реЛрд╕реНред

1. VS Code рд╕реБрд░реБ рдЧрд░реНрдиреБрд╣реЛрд╕реН, рдЪрд╛рд╣реЗ рдкрд╛рдИрдорд╛ рд╕рд┐рдзреИ рд╡рд╛ Remote SSH рдПрдХреНрд╕рдЯреЗрдиреНрд╕рдирдорд╛рд░реНрдлрдд рдЬрдбрд╛рди рдЧрд░реЗрд░ред

1. PyAudio Pip рдкреНрдпрд╛рдХреЗрдЬрдорд╛ рдЕрдбрд┐рдпреЛ рд░реЗрдХрд░реНрдб рд░ рдкреНрд▓реЗрдмреНрдпрд╛рдХ рдЧрд░реНрдиреЗ рдлрдЩреНрд╕рдирд╣рд░реВ рдЫрдиреНред рдпреЛ рдкреНрдпрд╛рдХреЗрдЬрд▓реЗ рдХреЗрд╣реА рдЕрдбрд┐рдпреЛ рд▓рд╛рдЗрдмреНрд░реЗрд░реАрд╣рд░реВрдорд╛ рдирд┐рд░реНрднрд░ рдЧрд░реНрджрдЫ рдЬрд╕рд▓рд╛рдИ рдкрд╣рд┐рд▓реЗ рдЗрдиреНрд╕реНрдЯрд▓ рдЧрд░реНрди рдЖрд╡рд╢реНрдпрдХ рдЫред рдпреА рдХрдорд╛рдгреНрдбрд╣рд░реВ рдЯрд░реНрдорд┐рдирд▓рдорд╛ рдЪрд▓рд╛рдЙрдиреБрд╣реЛрд╕реН:

    ```sh
    sudo apt update
    sudo apt install libportaudio0 libportaudio2 libportaudiocpp0 portaudio19-dev libasound2-plugins --yes 
    ```

1. PyAudio Pip рдкреНрдпрд╛рдХреЗрдЬ рдЗрдиреНрд╕реНрдЯрд▓ рдЧрд░реНрдиреБрд╣реЛрд╕реНред

    ```sh
    pip3 install pyaudio
    ```

1. `smart-timer` рдирд╛рдордХреЛ рдирдпрд╛рдБ рдлреЛрд▓реНрдбрд░ рдмрдирд╛рдЙрдиреБрд╣реЛрд╕реН рд░ рдпрд╕ рдлреЛрд▓реНрдбрд░рдорд╛ `app.py` рдирд╛рдордХреЛ рдлрд╛рдЗрд▓ рдердкреНрдиреБрд╣реЛрд╕реНред

1. рдпрд╕ рдлрд╛рдЗрд▓рдХреЛ рдорд╛рдерд┐ рдирд┐рдореНрди рдЗрдореНрдкреЛрд░реНрдЯрд╣рд░реВ рдердкреНрдиреБрд╣реЛрд╕реН:

    ```python
    import io
    import pyaudio
    import time
    import wave
    
    from grove.factory import Factory
    ```

    рдпрд╕рд▓реЗ `pyaudio` рдореЛрдбреНрдпреБрд▓, wave рдлрд╛рдЗрд▓рд╣рд░реВ рд╣реНрдпрд╛рдиреНрдбрд▓ рдЧрд░реНрдирдХрд╛ рд▓рд╛рдЧрд┐ рдХреЗрд╣реА рд╕реНрдЯреНрдпрд╛рдиреНрдбрд░реНрдб Python рдореЛрдбреНрдпреБрд▓рд╣рд░реВ, рд░ `grove.factory` рдореЛрдбреНрдпреБрд▓рд▓рд╛рдИ `Factory` рдЗрдореНрдкреЛрд░реНрдЯ рдЧрд░реНрдирдХрд╛ рд▓рд╛рдЧрд┐ рдЗрдореНрдкреЛрд░реНрдЯ рдЧрд░реНрджрдЫред

1. рдпрд╕рдкрдЫрд┐, Grove рдмрдЯрди рдмрдирд╛рдЙрди рдХреЛрдб рдердкреНрдиреБрд╣реЛрд╕реНред

    рдпрджрд┐ рддрдкрд╛рдИрдВ ReSpeaker 2-Mics Pi HAT рдкреНрд░рдпреЛрдЧ рдЧрд░реНрджреИ рд╣реБрдиреБрд╣реБрдиреНрдЫ рднрдиреЗ, рдирд┐рдореНрди рдХреЛрдб рдкреНрд░рдпреЛрдЧ рдЧрд░реНрдиреБрд╣реЛрд╕реН:

    ```python
    # The button on the ReSpeaker 2-Mics Pi HAT
    button = Factory.getButton("GPIO-LOW", 17)
    ```

    рдпрд╕рд▓реЗ **D17** рдкреЛрд░реНрдЯрдорд╛ рдмрдЯрди рдмрдирд╛рдЙрдБрдЫ, рдЬреБрди рдкреЛрд░реНрдЯрдорд╛ ReSpeaker 2-Mics Pi HAT рдорд╛ рдмрдЯрди рдЬрдбрд╛рди рдЧрд░рд┐рдПрдХреЛ рдЫред рдпреЛ рдмрдЯрди рдерд┐рдЪреНрджрд╛ рдХрдо рд╕рд┐рдЧреНрдирд▓ рдкрдард╛рдЙрди рд╕реЗрдЯ рдЧрд░рд┐рдПрдХреЛ рдЫред

    рдпрджрд┐ рддрдкрд╛рдИрдВ ReSpeaker 2-Mics Pi HAT рдкреНрд░рдпреЛрдЧ рдЧрд░реНрджреИ рд╣реБрдиреБрд╣реБрдиреНрди рд░ Grove рдмрдЯрди рдмреЗрд╕ HAT рдорд╛ рдЬрдбрд╛рди рдЧрд░реНрджреИ рд╣реБрдиреБрд╣реБрдиреНрдЫ рднрдиреЗ, рдпреЛ рдХреЛрдб рдкреНрд░рдпреЛрдЧ рдЧрд░реНрдиреБрд╣реЛрд╕реНред

    ```python
    button = Factory.getButton("GPIO-HIGH", 5)
    ```

    рдпрд╕рд▓реЗ **D5** рдкреЛрд░реНрдЯрдорд╛ рдмрдЯрди рдмрдирд╛рдЙрдБрдЫ рдЬреБрди рдерд┐рдЪреНрджрд╛ рдЙрдЪреНрдЪ рд╕рд┐рдЧреНрдирд▓ рдкрдард╛рдЙрди рд╕реЗрдЯ рдЧрд░рд┐рдПрдХреЛ рдЫред

1. рдпрд╕рдкрдЫрд┐, рдЕрдбрд┐рдпреЛ рд╣реНрдпрд╛рдиреНрдбрд▓ рдЧрд░реНрди PyAudio рдХреНрд▓рд╛рд╕рдХреЛ рдПрдЙрдЯрд╛ рдЗрдиреНрд╕реНрдЯреЗрдиреНрд╕ рдмрдирд╛рдЙрдиреБрд╣реЛрд╕реН:

    ```python
    audio = pyaudio.PyAudio()
    ```

1. рдорд╛рдЗрдХреНрд░реЛрдлреЛрди рд░ рд╕реНрдкрд┐рдХрд░рдХреЛ рд▓рд╛рдЧрд┐ рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ рдХрд╛рд░реНрдб рдирдореНрдмрд░ рдШреЛрд╖рдгрд╛ рдЧрд░реНрдиреБрд╣реЛрд╕реНред рдпреЛ рдХрд╛рд░реНрдб рдирдореНрдмрд░ рддрдкрд╛рдИрдВрд▓реЗ рдпрд╕ рдкрд╛рдардХреЛ рдкрд╣рд┐рд▓реЗ `arecord -l` рд░ `aplay -l` рдЪрд▓рд╛рдПрд░ рдкрддреНрддрд╛ рд▓рдЧрд╛рдЙрдиреБрднрдПрдХреЛ рдирдореНрдмрд░ рд╣реБрдиреЗрдЫред

    ```python
    microphone_card_number = <microphone card number>
    speaker_card_number = <speaker card number>
    ```

    `<microphone card number>` рд▓рд╛рдИ рддрдкрд╛рдИрдВрдХреЛ рдорд╛рдЗрдХреНрд░реЛрдлреЛрдирдХреЛ рдХрд╛рд░реНрдб рдирдореНрдмрд░рд▓реЗ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрди рдЧрд░реНрдиреБрд╣реЛрд╕реНред

    `<speaker card number>` рд▓рд╛рдИ рддрдкрд╛рдИрдВрдХреЛ рд╕реНрдкрд┐рдХрд░рдХреЛ рдХрд╛рд░реНрдб рдирдореНрдмрд░рд▓реЗ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрди рдЧрд░реНрдиреБрд╣реЛрд╕реН, рдЬреБрди рддрдкрд╛рдИрдВрд▓реЗ `alsa.conf` рдлрд╛рдЗрд▓рдорд╛ рд╕реЗрдЯ рдЧрд░реНрдиреБрднрдПрдХреЛ рдирдореНрдмрд░ рд╣реЛред

1. рдпрд╕рдкрдЫрд┐, рдЕрдбрд┐рдпреЛ рдХреНрдпрд╛рдкреНрдЪрд░ рд░ рдкреНрд▓реЗрдмреНрдпрд╛рдХрдХреЛ рд▓рд╛рдЧрд┐ рдкреНрд░рдпреЛрдЧ рдЧрд░реНрди рдирдореВрдирд╛ рджрд░ рдШреЛрд╖рдгрд╛ рдЧрд░реНрдиреБрд╣реЛрд╕реНред рддрдкрд╛рдИрдВрд▓реЗ рдкреНрд░рдпреЛрдЧ рдЧрд░рд┐рд░рд╣реЗрдХреЛ рд╣рд╛рд░реНрдбрд╡реЗрдпрд░рдХреЛ рдЖрдзрд╛рд░рдорд╛ рдпреЛ рдкрд░рд┐рд╡рд░реНрддрди рдЧрд░реНрди рдЖрд╡рд╢реНрдпрдХ рд╣реБрди рд╕рдХреНрдЫред

    ```python
    rate = 48000 #48KHz
    ```

    рдпрджрд┐ рддрдкрд╛рдИрдВрд▓реЗ рдкрдЫрд┐ рдпреЛ рдХреЛрдб рдЪрд▓рд╛рдЙрдБрджрд╛ рдирдореВрдирд╛ рджрд░ рддреНрд░реБрдЯрд┐рд╣рд░реВ рдкрд╛рдЙрдиреБрднрдпреЛ рднрдиреЗ, рдпреЛ рдорд╛рдирд▓рд╛рдИ `44100` рд╡рд╛ `16000` рдорд╛ рдкрд░рд┐рд╡рд░реНрддрди рдЧрд░реНрдиреБрд╣реЛрд╕реНред рдорд╛рди рдЙрдЪреНрдЪ рднрдПрдорд╛, рдЕрдбрд┐рдпреЛрдХреЛ рдЧреБрдгрд╕реНрддрд░ рд░рд╛рдореНрд░реЛ рд╣реБрдиреНрдЫред

1. рдпрд╕рдкрдЫрд┐, `capture_audio` рдирд╛рдордХреЛ рдирдпрд╛рдБ рдлрдЩреНрд╕рди рдмрдирд╛рдЙрдиреБрд╣реЛрд╕реНред рдпреЛ рдорд╛рдЗрдХреНрд░реЛрдлреЛрдирдмрд╛рдЯ рдЕрдбрд┐рдпреЛ рдХреНрдпрд╛рдкреНрдЪрд░ рдЧрд░реНрди рдмреЛрд▓рд╛рдЗрдиреЗрдЫ:

    ```python
    def capture_audio():
    ```

1. рдпрд╕ рдлрдЩреНрд╕рдирднрд┐рддреНрд░, рдЕрдбрд┐рдпреЛ рдХреНрдпрд╛рдкреНрдЪрд░ рдЧрд░реНрди рдирд┐рдореНрди рдердкреНрдиреБрд╣реЛрд╕реН:

    ```python
    stream = audio.open(format = pyaudio.paInt16,
                        rate = rate,
                        channels = 1, 
                        input_device_index = microphone_card_number,
                        input = True,
                        frames_per_buffer = 4096)

    frames = []

    while button.is_pressed():
        frames.append(stream.read(4096))

    stream.stop_stream()
    stream.close()
    ```

    рдпреЛ рдХреЛрдбрд▓реЗ PyAudio рд╡рд╕реНрддреБ рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрд░ рдЕрдбрд┐рдпреЛ рдЗрдирдкреБрдЯ рд╕реНрдЯреНрд░рд┐рдо рдЦреЛрд▓реНрдЫред рдпреЛ рд╕реНрдЯреНрд░рд┐рдорд▓реЗ рдорд╛рдЗрдХреНрд░реЛрдлреЛрдирдмрд╛рдЯ 16KHz рдорд╛ рдЕрдбрд┐рдпреЛ рдХреНрдпрд╛рдкреНрдЪрд░ рдЧрд░реНрдЫ, 4096 рдмрд╛рдЗрдЯрдХреЛ рд╕рд╛рдЗрдЬрдХреЛ рдмрдлрд░рд╣рд░реВрдорд╛ рдХреНрдпрд╛рдкреНрдЪрд░ рдЧрд░реНрджреИред

    рдХреЛрдбрд▓реЗ Grove рдмрдЯрди рдерд┐рдЪрд┐рдПрдХреЛ рдмреЗрд▓рд╛ рд▓реБрдк рдЧрд░реНрдЫ, рдкреНрд░рддреНрдпреЗрдХ рдкрдЯрдХ рдпреА 4096 рдмрд╛рдЗрдЯ рдмрдлрд░рд╣рд░реВрд▓рд╛рдИ рдПрд░реЗрдорд╛ рдкрдвреНрдЫред

    > ЁЯТБ рддрдкрд╛рдИрдВ `open` рдореЗрдердбрдорд╛ рдкрд╛рд╕ рдЧрд░рд┐рдПрдХрд╛ рдЕрдкреНрд╕рдирд╣рд░реВрдХреЛ рдмрд╛рд░реЗрдорд╛ [PyAudio рдбрдХреБрдореЗрдиреНрдЯреЗрд╢рди](https://people.csail.mit.edu/hubert/pyaudio/docs/) рдорд╛ рдердк рдкрдвреНрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫред

    рдмрдЯрди рд░рд┐рд▓рд┐рдЬ рднрдПрдкрдЫрд┐, рд╕реНрдЯреНрд░рд┐рдо рд░реЛрдХрд┐рдиреНрдЫ рд░ рдмрдиреНрдж рдЧрд░рд┐рдиреНрдЫред

1. рдпрд╕ рдлрдЩреНрд╕рдирдХреЛ рдЕрдиреНрддреНрдпрдорд╛ рдирд┐рдореНрди рдердкреНрдиреБрд╣реЛрд╕реН:

    ```python
    wav_buffer = io.BytesIO()
    with wave.open(wav_buffer, 'wb') as wavefile:
        wavefile.setnchannels(1)
        wavefile.setsampwidth(audio.get_sample_size(pyaudio.paInt16))
        wavefile.setframerate(rate)
        wavefile.writeframes(b''.join(frames))
        wav_buffer.seek(0)

    return wav_buffer
    ```

    рдпреЛ рдХреЛрдбрд▓реЗ рдмрд╛рдЗрдирд░реА рдмрдлрд░ рдмрдирд╛рдЙрдБрдЫ, рд░ рдХреНрдпрд╛рдкреНрдЪрд░ рдЧрд░рд┐рдПрдХреЛ рд╕рдмреИ рдЕрдбрд┐рдпреЛрд▓рд╛рдИ [WAV рдлрд╛рдЗрд▓](https://wikipedia.org/wiki/WAV) рдХреЛ рд░реВрдкрдорд╛ рд▓реЗрдЦреНрдЫред рдпреЛ рдлрд╛рдЗрд▓рдорд╛ рдЕрдирдХрдореНрдкреНрд░реЗрд╕реНрдб рдЕрдбрд┐рдпреЛ рд▓реЗрдЦреНрдиреЗ рдорд╛рдирдХ рддрд░рд┐рдХрд╛ рд╣реЛред рдпреЛ рдмрдлрд░ рдлрд░реНрдХрд╛рдЗрдиреНрдЫред

1. рдЕрдбрд┐рдпреЛ рдмрдлрд░ рдкреНрд▓реЗрдмреНрдпрд╛рдХ рдЧрд░реНрди `play_audio` рдлрдЩреНрд╕рди рдердкреНрдиреБрд╣реЛрд╕реН:

    ```python
    def play_audio(buffer):
        stream = audio.open(format = pyaudio.paInt16,
                            rate = rate,
                            channels = 1,
                            output_device_index = speaker_card_number,
                            output = True)
    
        with wave.open(buffer, 'rb') as wf:
            data = wf.readframes(4096)
    
            while len(data) > 0:
                stream.write(data)
                data = wf.readframes(4096)
    
            stream.close()
    ```

    рдпреЛ рдлрдЩреНрд╕рдирд▓реЗ рдЕрд░реНрдХреЛ рдЕрдбрд┐рдпреЛ рд╕реНрдЯреНрд░рд┐рдо рдЦреЛрд▓реНрдЫ, рдпрд╕ рдкрдЯрдХ рдЖрдЙрдЯрдкреБрдЯрдХрд╛ рд▓рд╛рдЧрд┐ - рдЕрдбрд┐рдпреЛ рдкреНрд▓реЗ рдЧрд░реНрдиред рдпрд╕рд▓реЗ рдЗрдирдкреБрдЯ рд╕реНрдЯреНрд░рд┐рдорд╕рдБрдЧ рд╕рдорд╛рди рд╕реЗрдЯрд┐рдЩрд╣рд░реВ рдкреНрд░рдпреЛрдЧ рдЧрд░реНрдЫред рдмрдлрд░рд▓рд╛рдИ wave рдлрд╛рдЗрд▓рдХреЛ рд░реВрдкрдорд╛ рдЦреЛрд▓рд┐рдиреНрдЫ рд░ 4096 рдмрд╛рдЗрдЯрдХреЛ рдЪрдЩреНрдХрдорд╛ рдЖрдЙрдЯрдкреБрдЯ рд╕реНрдЯреНрд░рд┐рдордорд╛ рд▓реЗрдЦрд┐рдиреНрдЫ, рдЕрдбрд┐рдпреЛ рдкреНрд▓реЗ рдЧрд░реНрджреИред рд╕реНрдЯреНрд░рд┐рдо рдмрдиреНрдж рдЧрд░рд┐рдиреНрдЫред

1. `capture_audio` рдлрдЩреНрд╕рдирдХреЛ рддрд▓ рдирд┐рдореНрди рдХреЛрдб рдердкреНрдиреБрд╣реЛрд╕реН рдЬрд╕рд▓реЗ рдмрдЯрди рдерд┐рдЪрд┐рдПрдХреЛ рдмреЗрд▓рд╛ рд▓реБрдк рдЧрд░реНрдЫред рдмрдЯрди рдерд┐рдЪрд┐рдПрдкрдЫрд┐, рдЕрдбрд┐рдпреЛ рдХреНрдпрд╛рдкреНрдЪрд░ рд╣реБрдиреНрдЫ рд░ рдкреНрд▓реЗ рдЧрд░рд┐рдиреНрдЫред

    ```python
    while True:
        while not button.is_pressed():
            time.sleep(.1)
        
        buffer = capture_audio()
        play_audio(buffer)
    ```

1. рдХреЛрдб рдЪрд▓рд╛рдЙрдиреБрд╣реЛрд╕реНред рдмрдЯрди рдерд┐рдЪреНрдиреБрд╣реЛрд╕реН рд░ рдорд╛рдЗрдХреНрд░реЛрдлреЛрдирдорд╛ рдмреЛрд▓реНрдиреБрд╣реЛрд╕реНред рдмрдЯрди рд░рд┐рд▓рд┐рдЬ рдЧрд░реНрдиреБрд╣реЛрд╕реН рдЬрдм рддрдкрд╛рдИрдВ рд╕рдХреНрдиреБрд╣реБрдиреНрдЫ, рд░ рддрдкрд╛рдИрдВрд▓реЗ рд░реЗрдХрд░реНрдбрд┐рдЩ рд╕реБрдиреНрдиреБрд╣реБрдиреЗрдЫред

    рддрдкрд╛рдИрдВрд▓реЗ PyAudio рдЗрдиреНрд╕реНрдЯреЗрдиреНрд╕ рдмрдирд╛рдЙрдБрджрд╛ рдХреЗрд╣реА ALSA рддреНрд░реБрдЯрд┐рд╣рд░реВ рдкрд╛рдЙрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫред рдпреЛ рдкрд╛рдИрдорд╛ рддрдкрд╛рдИрдВрд▓реЗ рдирднрдПрдХреЛ рдЕрдбрд┐рдпреЛ рдЙрдкрдХрд░рдгрд╣рд░реВрдХреЛ рдХрдиреНрдлрд┐рдЧрд░реЗрд╕рдирдХрд╛ рдХрд╛рд░рдг рд╣реЛред рдпреА рддреНрд░реБрдЯрд┐рд╣рд░реВрд▓рд╛рдИ рдмреЗрд╡рд╛рд╕реНрддрд╛ рдЧрд░реНрди рд╕рдХрд┐рдиреНрдЫред

    ```output
    pi@raspberrypi:~/smart-timer $ python3 app.py 
    ALSA lib pcm.c:2565:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.front
    ALSA lib pcm.c:2565:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.rear
    ALSA lib pcm.c:2565:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.center_lfe
    ALSA lib pcm.c:2565:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.side
    ```

    рдпрджрд┐ рддрдкрд╛рдИрдВрд▓реЗ рдирд┐рдореНрди рддреНрд░реБрдЯрд┐ рдкрд╛рдЙрдиреБрднрдпреЛ:

    ```output
    OSError: [Errno -9997] Invalid sample rate
    ```

    рднрдиреЗ `rate` рд▓рд╛рдИ `44100` рд╡рд╛ `16000` рдорд╛ рдкрд░рд┐рд╡рд░реНрддрди рдЧрд░реНрдиреБрд╣реЛрд╕реНред

> ЁЯТБ рддрдкрд╛рдИрдВрд▓реЗ рдпреЛ рдХреЛрдб [code-record/pi](../../../../../6-consumer/lessons/1-speech-recognition/code-record/pi) рдлреЛрд▓реНрдбрд░рдорд╛ рдкрд╛рдЙрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫред

ЁЯША рддрдкрд╛рдИрдВрдХреЛ рдЕрдбрд┐рдпреЛ рд░реЗрдХрд░реНрдбрд┐рдЩ рдкреНрд░реЛрдЧреНрд░рд╛рдо рд╕рдлрд▓ рднрдпреЛ!

---

**рдЕрд╕реНрд╡реАрдХрд░рдг**:  
рдпреЛ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ AI рдЕрдиреБрд╡рд╛рдж рд╕реЗрд╡рд╛ [Co-op Translator](https://github.com/Azure/co-op-translator) рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрд░ рдЕрдиреБрд╡рд╛рдж рдЧрд░рд┐рдПрдХреЛ рдЫред рд╣рд╛рдореА рд╢реБрджреНрдзрддрд╛рдХреЛ рд▓рд╛рдЧрд┐ рдкреНрд░рдпрд╛рд╕ рдЧрд░реНрдЫреМрдВ, рддрд░ рдХреГрдкрдпрд╛ рдзреНрдпрд╛рди рджрд┐рдиреБрд╣реЛрд╕реН рдХрд┐ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдЕрдиреБрд╡рд╛рджрдорд╛ рддреНрд░реБрдЯрд┐рд╣рд░реВ рд╡рд╛ рдЕрд╢реБрджреНрдзрддрд╛рд╣рд░реВ рд╣реБрди рд╕рдХреНрдЫред рдпрд╕рдХреЛ рдореВрд▓ рднрд╛рд╖рд╛ рдорд╛ рд░рд╣реЗрдХреЛ рдореВрд▓ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝рд▓рд╛рдИ рдЖрдзрд┐рдХрд╛рд░рд┐рдХ рд╕реНрд░реЛрдд рдорд╛рдирд┐рдиреБрдкрд░реНрдЫред рдорд╣рддреНрд╡рдкреВрд░реНрдг рдЬрд╛рдирдХрд╛рд░реАрдХреЛ рд▓рд╛рдЧрд┐, рд╡реНрдпрд╛рд╡рд╕рд╛рдпрд┐рдХ рдорд╛рдирд╡ рдЕрдиреБрд╡рд╛рдж рд╕рд┐рдлрд╛рд░рд┐рд╕ рдЧрд░рд┐рдиреНрдЫред рдпрд╕ рдЕрдиреБрд╡рд╛рджрдХреЛ рдкреНрд░рдпреЛрдЧрдмрд╛рдЯ рдЙрддреНрдкрдиреНрди рд╣реБрдиреЗ рдХреБрдиреИ рдкрдирд┐ рдЧрд▓рддрдлрд╣рдореА рд╡рд╛ рдЧрд▓рдд рд╡реНрдпрд╛рдЦреНрдпрд╛рдХреЛ рд▓рд╛рдЧрд┐ рд╣рд╛рдореА рдЬрд┐рдореНрдореЗрд╡рд╛рд░ рд╣реБрдиреЗ рдЫреИрдиреМрдВред