<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "af249a24d4fe4f4de4806adbc3bc9d86",
  "translation_date": "2025-08-27T14:23:16+00:00",
  "source_file": "6-consumer/lessons/1-speech-recognition/pi-speech-to-text.md",
  "language_code": "ne"
}
-->
# рднрд╛рд╖рдгрд▓рд╛рдИ рдкрд╛рдардорд╛ рд░реВрдкрд╛рдиреНрддрд░рдг - рд░рд╛рд╕реНрдкрдмреЗрд░реА рдкрд╛рдИ

рдпрд╕ рдкрд╛рдардХреЛ рдпрд╕ рднрд╛рдЧрдорд╛, рддрдкрд╛рдИрдВрд▓реЗ рдХрдмреНрдЬрд╛ рдЧрд░рд┐рдПрдХреЛ рдЕрдбрд┐рдпреЛрдорд╛ рд░рд╣реЗрдХреЛ рднрд╛рд╖рдгрд▓рд╛рдИ рдкрд╛рдардорд╛ рд░реВрдкрд╛рдиреНрддрд░рдг рдЧрд░реНрди рдХреЛрдб рд▓реЗрдЦреНрдиреБрд╣реБрдиреЗрдЫ, рднрд╛рд╖рдг рд╕реЗрд╡рд╛рдХреЛ рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрд░ред

## рдЕрдбрд┐рдпреЛрд▓рд╛рдИ рднрд╛рд╖рдг рд╕реЗрд╡рд╛рдорд╛ рдкрдард╛рдЙрдиреБрд╣реЛрд╕реН

рдЕрдбрд┐рдпреЛрд▓рд╛рдИ рднрд╛рд╖рдг рд╕реЗрд╡рд╛рдорд╛ REST API рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрд░ рдкрдард╛рдЙрди рд╕рдХрд┐рдиреНрдЫред рднрд╛рд╖рдг рд╕реЗрд╡рд╛ рдкреНрд░рдпреЛрдЧ рдЧрд░реНрдирдХреЛ рд▓рд╛рдЧрд┐, рдкрд╣рд┐рд▓реЛ рдЪрд░рдгрдорд╛ рддрдкрд╛рдИрдВрд▓реЗ рдкрд╣реБрдБрдЪ рдЯреЛрдХрди рдЕрдиреБрд░реЛрдз рдЧрд░реНрдиреБрдкрд░реНрдЫ, рддреНрдпрд╕рдкрдЫрд┐ рдЙрдХреНрдд рдЯреЛрдХрди рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрд░ REST API рдкрд╣реБрдБрдЪ рдЧрд░реНрди рд╕рдХрд┐рдиреНрдЫред рдпреА рдкрд╣реБрдБрдЪ рдЯреЛрдХрдирд╣рд░реВ резреж рдорд┐рдиреЗрдЯрдкрдЫрд┐ рд╕рдорд╛рдкреНрдд рд╣реБрдиреНрдЫрдиреН, рддреНрдпрд╕реИрд▓реЗ рддрдкрд╛рдИрдВрдХреЛ рдХреЛрдбрд▓реЗ рдирд┐рдпрдорд┐рдд рд░реВрдкрдорд╛ рдЯреЛрдХрди рдЕрдиреБрд░реЛрдз рдЧрд░реНрдиреБрдкрд░реНрдЫ рддрд╛рдХрд┐ рдЯреЛрдХрди рд╕рдзреИрдВ рдЕрджреНрдпрд╛рд╡рдзрд┐рдХ рд░рд╣реЛрд╕реНред

### рдХрд╛рд░реНрдп - рдкрд╣реБрдБрдЪ рдЯреЛрдХрди рдкреНрд░рд╛рдкреНрдд рдЧрд░реНрдиреБрд╣реЛрд╕реН

1. рдЖрдлреНрдиреЛ рдкрд╛рдИрдорд╛ `smart-timer` рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдЦреЛрд▓реНрдиреБрд╣реЛрд╕реНред

1. `play_audio` рдлрдЩреНрд╕рди рд╣рдЯрд╛рдЙрдиреБрд╣реЛрд╕реНред рдпреЛ рдЕрдм рдЖрд╡рд╢реНрдпрдХ рдЫреИрди рдХрд┐рдирднрдиреЗ рддрдкрд╛рдИрдВ рдЪрд╛рд╣рдиреБрд╣реБрдиреНрди рдХрд┐ рд╕реНрдорд╛рд░реНрдЯ рдЯрд╛рдЗрдорд░рд▓реЗ рддрдкрд╛рдИрдВрд▓реЗ рднрдиреЗрдХреЛ рдХреБрд░рд╛ рджреЛрд╣реЛрд░реНрдпрд╛рдУрд╕реНред

1. `app.py` рдлрд╛рдЗрд▓рдХреЛ рдорд╛рдерд┐ рдирд┐рдореНрди рдЗрдореНрдкреЛрд░реНрдЯ рдердкреНрдиреБрд╣реЛрд╕реН:

    ```python
    import requests
    ```

1. `while True` рд▓реВрдкрдХреЛ рдорд╛рдерд┐ рдирд┐рдореНрди рдХреЛрдб рдердкреНрдиреБрд╣реЛрд╕реН, рднрд╛рд╖рдг рд╕реЗрд╡рд╛рдХреЛ рд╕реЗрдЯрд┐рдЩрд╣рд░реВ рдШреЛрд╖рдгрд╛ рдЧрд░реНрди:

    ```python
    speech_api_key = '<key>'
    location = '<location>'
    language = '<language>'
    ```

    `<key>` рд▓рд╛рдИ рдЖрдлреНрдиреЛ рднрд╛рд╖рдг рд╕реЗрд╡рд╛ рд╕реНрд░реЛрддрдХреЛ API рдХреБрдЮреНрдЬреАрд▓реЗ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрди рдЧрд░реНрдиреБрд╣реЛрд╕реНред `<location>` рд▓рд╛рдИ рддрдкрд╛рдИрдВрд▓реЗ рднрд╛рд╖рдг рд╕реЗрд╡рд╛ рд╕реНрд░реЛрдд рд╕рд┐рд░реНрдЬрдирд╛ рдЧрд░реНрджрд╛ рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрдХреЛ рд╕реНрдерд╛рдирд▓реЗ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрди рдЧрд░реНрдиреБрд╣реЛрд╕реНред

    `<language>` рд▓рд╛рдИ рддрдкрд╛рдИрдВрд▓реЗ рдмреЛрд▓реНрдиреЗ рднрд╛рд╖рд╛рдХреЛ рд▓реЛрдХреЗрд▓ рдирд╛рдорд▓реЗ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрди рдЧрд░реНрдиреБрд╣реЛрд╕реН, рдЬрд╕реНрддреИ рдЕрдВрдЧреНрд░реЗрдЬреАрдХреЛ рд▓рд╛рдЧрд┐ `en-GB`, рд╡рд╛ рдХреНрдпрд╛рдиреНрдЯреЛрдирд┐рдЬрдХреЛ рд▓рд╛рдЧрд┐ `zn-HK`ред рд╕рдорд░реНрдерд┐рдд рднрд╛рд╖рд╛рд╣рд░реВ рд░ рддрд┐рдирдХрд╛ рд▓реЛрдХреЗрд▓ рдирд╛рдорд╣рд░реВрдХреЛ рд╕реВрдЪреА [Microsoft Docs рдорд╛ рднрд╛рд╖рд╛ рд░ рдЖрд╡рд╛рдЬ рд╕рдорд░реНрдерди рджрд╕реНрддрд╛рд╡реЗрдЬ](https://docs.microsoft.com/azure/cognitive-services/speech-service/language-support?WT.mc_id=academic-17441-jabenn#speech-to-text) рдорд╛ рдкрд╛рдЙрди рд╕рдХрд┐рдиреНрдЫред

1. рдпрд╕рдХреЛ рддрд▓, рдкрд╣реБрдБрдЪ рдЯреЛрдХрди рдкреНрд░рд╛рдкреНрдд рдЧрд░реНрди рдирд┐рдореНрди рдлрдЩреНрд╕рди рдердкреНрдиреБрд╣реЛрд╕реН:

    ```python
    def get_access_token():
        headers = {
            'Ocp-Apim-Subscription-Key': speech_api_key
        }
    
        token_endpoint = f'https://{location}.api.cognitive.microsoft.com/sts/v1.0/issuetoken'
        response = requests.post(token_endpoint, headers=headers)
        return str(response.text)
    ```

    рдпреЛ рдЯреЛрдХрди рдЬрд╛рд░реА рдЧрд░реНрдиреЗ рдЕрдиреНрдд рдмрд┐рдиреНрджреБрд▓рд╛рдИ рдХрд▓ рдЧрд░реНрджрдЫ, API рдХреБрдЮреНрдЬреАрд▓рд╛рдИ рд╣реЗрдбрд░рдХреЛ рд░реВрдкрдорд╛ рдкрд╛рд╕ рдЧрд░реНрджреИред рдпреЛ рдХрд▓рд▓реЗ рдкрд╣реБрдБрдЪ рдЯреЛрдХрди рдлрд░реНрдХрд╛рдЙрдБрдЫ, рдЬреБрди рднрд╛рд╖рдг рд╕реЗрд╡рд╛рд╣рд░реВ рдХрд▓ рдЧрд░реНрди рдкреНрд░рдпреЛрдЧ рдЧрд░реНрди рд╕рдХрд┐рдиреНрдЫред

1. рдпрд╕рдХреЛ рддрд▓, REST API рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрд░ рдХрдмреНрдЬрд╛ рдЧрд░рд┐рдПрдХреЛ рдЕрдбрд┐рдпреЛрдорд╛ рд░рд╣реЗрдХреЛ рднрд╛рд╖рдгрд▓рд╛рдИ рдкрд╛рдардорд╛ рд░реВрдкрд╛рдиреНрддрд░рдг рдЧрд░реНрди рдлрдЩреНрд╕рди рдШреЛрд╖рдгрд╛ рдЧрд░реНрдиреБрд╣реЛрд╕реН:

    ```python
    def convert_speech_to_text(buffer):
    ```

1. рдпрд╕ рдлрдЩреНрд╕рдирднрд┐рддреНрд░, REST API URL рд░ рд╣реЗрдбрд░ рд╕реЗрдЯ рдЧрд░реНрдиреБрд╣реЛрд╕реН:

    ```python
    url = f'https://{location}.stt.speech.microsoft.com/speech/recognition/conversation/cognitiveservices/v1'

    headers = {
        'Authorization': 'Bearer ' + get_access_token(),
        'Content-Type': f'audio/wav; codecs=audio/pcm; samplerate={rate}',
        'Accept': 'application/json;text/xml'
    }

    params = {
        'language': language
    }
    ```

    рдпреЛ URL рдирд┐рд░реНрдорд╛рдг рдЧрд░реНрджрдЫ, рднрд╛рд╖рдг рд╕реЗрд╡рд╛рдХреЛ рд╕реНрд░реЛрддрдХреЛ рд╕реНрдерд╛рди рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрд░ред рддреНрдпрд╕рдкрдЫрд┐ рдпреЛ рд╣реЗрдбрд░рд╣рд░реВ `get_access_token` рдлрдЩреНрд╕рдирдмрд╛рдЯ рдкреНрд░рд╛рдкреНрдд рдЧрд░рд┐рдПрдХреЛ рдкрд╣реБрдБрдЪ рдЯреЛрдХрди, рдЕрдбрд┐рдпреЛ рдХрдмреНрдЬрд╛ рдЧрд░реНрди рдкреНрд░рдпреЛрдЧ рдЧрд░рд┐рдПрдХреЛ рд╕реНрдпрд╛рдореНрдкрд▓ рджрд░, рд░ URL рд╕рдБрдЧ рдкрд╛рд╕ рдЧрд░рд┐рдиреЗ рднрд╛рд╖рд╛рдХреЛ рд╡рд┐рд╡рд░рдгрд▓реЗ рднрд░рд┐рдиреНрдЫред

1. рдпрд╕рдХреЛ рддрд▓, REST API рдХрд▓ рдЧрд░реНрди рд░ рдкрд╛рда рдлрд┐рд░реНрддрд╛ рдкреНрд░рд╛рдкреНрдд рдЧрд░реНрди рдирд┐рдореНрди рдХреЛрдб рдердкреНрдиреБрд╣реЛрд╕реН:

    ```python
    response = requests.post(url, headers=headers, params=params, data=buffer)
    response_json = response.json()

    if response_json['RecognitionStatus'] == 'Success':
        return response_json['DisplayText']
    else:
        return ''
    ```

    рдпреЛ URL рдХрд▓ рдЧрд░реНрджрдЫ рд░ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рднрд┐рддреНрд░ рдЖрдПрдХреЛ JSON рдорд╛рдирд▓рд╛рдИ рдбрд┐рдХреЛрдб рдЧрд░реНрджрдЫред рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рднрд┐рддреНрд░рдХреЛ `RecognitionStatus` рдорд╛рдирд▓реЗ рдХрд▓рд▓реЗ рднрд╛рд╖рдгрд▓рд╛рдИ рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рдкрд╛рдардорд╛ рд░реВрдкрд╛рдиреНрддрд░рдг рдЧрд░реНрди рд╕рдХреЗрдХреЛ рдЫ рдХрд┐ рдЫреИрди рднрдиреНрдиреЗ рд╕рдВрдХреЗрдд рдЧрд░реНрджрдЫред рдпрджрд┐ рдпреЛ `Success` рд╣реЛ рднрдиреЗ рдкрд╛рда рдлрдЩреНрд╕рдирдмрд╛рдЯ рдлрд┐рд░реНрддрд╛ рд╣реБрдиреНрдЫ, рдЕрдиреНрдпрдерд╛ рдЦрд╛рд▓реА рд╕реНрдЯреНрд░рд┐рдЩ рдлрд┐рд░реНрддрд╛ рд╣реБрдиреНрдЫред

1. `while True:` рд▓реВрдкрдХреЛ рдорд╛рдерд┐, рднрд╛рд╖рдгрд▓рд╛рдИ рдкрд╛рда рд╕реЗрд╡рд╛рдмрд╛рдЯ рдлрд┐рд░реНрддрд╛ рдЖрдПрдХреЛ рдкрд╛рдард▓рд╛рдИ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдЧрд░реНрди рдлрдЩреНрд╕рди рдкрд░рд┐рднрд╛рд╖рд┐рдд рдЧрд░реНрдиреБрд╣реЛрд╕реНред рдпреЛ рдлрдЩреНрд╕рдирд▓реЗ рд╣рд╛рд▓рд▓рд╛рдИ рдкрд╛рдард▓рд╛рдИ рдХрдиреНрд╕реЛрд▓рдорд╛ рдкреНрд░рд┐рдиреНрдЯ рдорд╛рддреНрд░ рдЧрд░реНрдиреЗрдЫред

    ```python
    def process_text(text):
        print(text)
    ```

1. рдЕрдиреНрддрддрдГ `while True` рд▓реВрдкрдорд╛ `play_audio` рдХрд▓рд▓рд╛рдИ `convert_speech_to_text` рдлрдЩреНрд╕рдирдХреЛ рдХрд▓рд▓реЗ рдкреНрд░рддрд┐рд╕реНрдерд╛рдкрди рдЧрд░реНрдиреБрд╣реЛрд╕реН, рдкрд╛рдард▓рд╛рдИ `process_text` рдлрдЩреНрд╕рдирдорд╛ рдкрд╛рд╕ рдЧрд░реНрджреИ:

    ```python
    text = convert_speech_to_text(buffer)
    process_text(text)
    ```

1. рдХреЛрдб рдЪрд▓рд╛рдЙрдиреБрд╣реЛрд╕реНред рдмрдЯрди рдерд┐рдЪреНрдиреБрд╣реЛрд╕реН рд░ рдорд╛рдЗрдХреНрд░реЛрдлреЛрдирдорд╛ рдмреЛрд▓реНрдиреБрд╣реЛрд╕реНред рддрдкрд╛рдИрдВ рд╕рдХрд┐рдПрдкрдЫрд┐ рдмрдЯрди рдЫреЛрдбреНрдиреБрд╣реЛрд╕реН, рд░ рдЕрдбрд┐рдпреЛ рдкрд╛рдардорд╛ рд░реВрдкрд╛рдиреНрддрд░рдг рд╣реБрдиреЗрдЫ рд░ рдХрдиреНрд╕реЛрд▓рдорд╛ рдкреНрд░рд┐рдиреНрдЯ рд╣реБрдиреЗрдЫред

    ```output
    pi@raspberrypi:~/smart-timer $ python3 app.py 
    Hello world.
    Welcome to IoT for beginners.
    ```

    рд╡рд┐рднрд┐рдиреНрди рдкреНрд░рдХрд╛рд░рдХрд╛ рд╡рд╛рдХреНрдпрд╣рд░реВ рдкреНрд░рдпрд╛рд╕ рдЧрд░реНрдиреБрд╣реЛрд╕реН, рд╕рд╛рдереИ рддреНрдпрд╕реНрддрд╛ рд╡рд╛рдХреНрдпрд╣рд░реВ рдЬрд╣рд╛рдБ рд╢рдмреНрджрд╣рд░реВ рдЙрд╕реНрддреИ рд╕реБрдирд┐рдиреНрдЫ рддрд░ рдЕрд░реНрде рдлрд░рдХ рд╣реБрдиреНрдЫред рдЙрджрд╛рд╣рд░рдгрдХрд╛ рд▓рд╛рдЧрд┐, рдпрджрд┐ рддрдкрд╛рдИрдВ рдЕрдВрдЧреНрд░реЗрдЬреАрдорд╛ рдмреЛрд▓реНрджреИ рд╣реБрдиреБрд╣реБрдиреНрдЫ рднрдиреЗ, 'I want to buy two bananas and an apple too' рднрдиреНрдиреБрд╣реЛрд╕реН, рд░ рдпрд╕рд▓реЗ рд╢рдмреНрджрдХреЛ рдзреНрд╡рдирд┐рдорд╛ рдорд╛рддреНрд░ рд╣реЛрдЗрди, рд╕рдиреНрджрд░реНрднрдХреЛ рдЖрдзрд╛рд░рдорд╛ рд╕рд╣реА to, two, рд░ too рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрдХреЛ рджреЗрдЦреНрдиреБрд╣реЛрд╕реНред

> ЁЯТБ рддрдкрд╛рдИрдВ рдпреЛ рдХреЛрдб [code-speech-to-text/pi](../../../../../6-consumer/lessons/1-speech-recognition/code-speech-to-text/pi) рдлреЛрд▓реНрдбрд░рдорд╛ рдкрд╛рдЙрди рд╕рдХреНрдиреБрд╣реБрдиреНрдЫред

ЁЯША рддрдкрд╛рдИрдВрдХреЛ рднрд╛рд╖рдгрд▓рд╛рдИ рдкрд╛рдардорд╛ рд░реВрдкрд╛рдиреНрддрд░рдг рдЧрд░реНрдиреЗ рдкреНрд░реЛрдЧреНрд░рд╛рдо рд╕рдлрд▓ рднрдпреЛ!

---

**рдЕрд╕реНрд╡реАрдХрд░рдг**:  
рдпреЛ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ AI рдЕрдиреБрд╡рд╛рдж рд╕реЗрд╡рд╛ [Co-op Translator](https://github.com/Azure/co-op-translator) рдкреНрд░рдпреЛрдЧ рдЧрд░реЗрд░ рдЕрдиреБрд╡рд╛рдж рдЧрд░рд┐рдПрдХреЛ рдЫред рд╣рд╛рдореА рд╢реБрджреНрдзрддрд╛рдХреЛ рд▓рд╛рдЧрд┐ рдкреНрд░рдпрд╛рд╕ рдЧрд░реНрдЫреМрдВ, рддрд░ рдХреГрдкрдпрд╛ рдзреНрдпрд╛рди рджрд┐рдиреБрд╣реЛрд╕реН рдХрд┐ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдЕрдиреБрд╡рд╛рджрд╣рд░реВрдорд╛ рддреНрд░реБрдЯрд┐ рд╡рд╛ рдЕрд╢реБрджреНрдзрддрд╛ рд╣реБрди рд╕рдХреНрдЫред рдпрд╕рдХреЛ рдореВрд▓ рднрд╛рд╖рд╛ рдорд╛ рд░рд╣реЗрдХреЛ рдореВрд▓ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝рд▓рд╛рдИ рдЖрдзрд┐рдХрд╛рд░рд┐рдХ рд╕реНрд░реЛрдд рдорд╛рдирд┐рдиреБрдкрд░реНрдЫред рдорд╣рддреНрд╡рдкреВрд░реНрдг рдЬрд╛рдирдХрд╛рд░реАрдХреЛ рд▓рд╛рдЧрд┐, рд╡реНрдпрд╛рд╡рд╕рд╛рдпрд┐рдХ рдорд╛рдирд╡ рдЕрдиреБрд╡рд╛рдж рд╕рд┐рдлрд╛рд░рд┐рд╕ рдЧрд░рд┐рдиреНрдЫред рдпрд╕ рдЕрдиреБрд╡рд╛рджрдХреЛ рдкреНрд░рдпреЛрдЧрдмрд╛рдЯ рдЙрддреНрдкрдиреНрди рд╣реБрдиреЗ рдХреБрдиреИ рдкрдирд┐ рдЧрд▓рддрдлрд╣рдореА рд╡рд╛ рдЧрд▓рдд рд╡реНрдпрд╛рдЦреНрдпрд╛рдХреЛ рд▓рд╛рдЧрд┐ рд╣рд╛рдореА рдЬрд┐рдореНрдореЗрд╡рд╛рд░ рд╣реБрдиреЗ рдЫреИрдиреМрдВред