<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "9c4320311c0f2c1884a6a21265d98a51",
  "translation_date": "2025-08-27T09:57:09+00:00",
  "source_file": "5-retail/lessons/2-check-stock-device/single-board-computer-count-stock.md",
  "language_code": "mr"
}
-->
# рдЖрдкрд▓реНрдпрд╛ IoT рдбрд┐рд╡реНрд╣рд╛рдЗрд╕рд╡рд░реВрди рд╕реНрдЯреЙрдХ рдореЛрдЬрд╛ - рд╡реНрд╣рд░реНрдЪреНрдпреБрдЕрд▓ IoT рд╣рд╛рд░реНрдбрд╡реЗрдЕрд░ рдЖрдгрд┐ рд░рд╛рд╕реНрдкрдмреЗрд░реА рдкрд╛рдИ

рднрд╡рд┐рд╖реНрдпрд╡рд╛рдгреНрдпрд╛ рдЖрдгрд┐ рддреНрдпрд╛рдВрдЪреНрдпрд╛ рдмрд╛рдЙрдВрдбрд┐рдВрдЧ рдмреЙрдХреНрд╕реЗрд╕рдЪреНрдпрд╛ рд╕рдВрдпреЛрдЬрдирд╛рдЪрд╛ рдЙрдкрдпреЛрдЧ рдкреНрд░рддрд┐рдореЗрдордзреНрдпреЗ рд╕реНрдЯреЙрдХ рдореЛрдЬрдгреНрдпрд╛рд╕рд╛рдареА рдХреЗрд▓рд╛ рдЬрд╛рдК рд╢рдХрддреЛ.

## рдмрд╛рдЙрдВрдбрд┐рдВрдЧ рдмреЙрдХреНрд╕реЗрд╕ рджрд╛рдЦрд╡рд╛

рдбрд┐рдмрдЧрд┐рдВрдЧрд╕рд╛рдареА рдЙрдкрдпреБрдХреНрдд рдкрджреНрдзрдд рдореНрд╣рдгреВрди, рддреБрдореНрд╣реА рдХреЗрд╡рд│ рдмрд╛рдЙрдВрдбрд┐рдВрдЧ рдмреЙрдХреНрд╕реЗрд╕ рдХрдиреНрд╕реЛрд▓рд╡рд░ рдкреНрд░рд┐рдВрдЯ рдХрд░реВ рд╢рдХрдд рдирд╛рд╣реА, рддрд░ рдЬреЗрд╡реНрд╣рд╛ рдкреНрд░рддрд┐рдорд╛ рдХреЕрдкреНрдЪрд░ рдХреЗрд▓реА рдЬрд╛рддреЗ рддреЗрд╡реНрд╣рд╛ рдбрд┐рд╕реНрдХрд╡рд░ рд▓рд┐рд╣рд┐рд▓реЗрд▓реНрдпрд╛ рдкреНрд░рддрд┐рдореЗрд╡рд░ рддреЗ рдХрд╛рдвреВрд╣реА рд╢рдХрддрд╛.

### рдХрд╛рд░реНрдп - рдмрд╛рдЙрдВрдбрд┐рдВрдЧ рдмреЙрдХреНрд╕реЗрд╕ рдкреНрд░рд┐рдВрдЯ рдХрд░рд╛

1. `stock-counter` рдкреНрд░рдХрд▓реНрдк VS Code рдордзреНрдпреЗ рдЙрдШрдбрд╛ рдЖрдгрд┐ рдЬрд░ рддреБрдореНрд╣реА рд╡реНрд╣рд░реНрдЪреНрдпреБрдЕрд▓ IoT рдбрд┐рд╡реНрд╣рд╛рдЗрд╕ рд╡рд╛рдкрд░рдд рдЕрд╕рд╛рд▓, рддрд░ рд╡реНрд╣рд░реНрдЪреНрдпреБрдЕрд▓ рд╡рд╛рддрд╛рд╡рд░рдг рд╕рдХреНрд░рд┐рдп рдХрд░рд╛.

1. `for` рд▓реВрдкрдордзреАрд▓ `print` рд╕реНрдЯреЗрдЯрдореЗрдВрдЯ рдЦрд╛рд▓реАрд▓рдкреНрд░рдорд╛рдгреЗ рдмрджрд▓рд╛, рдЬреЗрдгреЗрдХрд░реВрди рдмрд╛рдЙрдВрдбрд┐рдВрдЧ рдмреЙрдХреНрд╕реЗрд╕ рдХрдиреНрд╕реЛрд▓рд╡рд░ рдкреНрд░рд┐рдВрдЯ рд╣реЛрддреАрд▓:

    ```python
    print(f'{prediction.tag_name}:\t{prediction.probability * 100:.2f}%\t{prediction.bounding_box}')
    ```

1. рдЕреЕрдк рдЪрд╛рд▓рд╡рд╛ рдЖрдгрд┐ рдХреЕрдореЗрд░рд╛ рд╢реЗрд▓реНрдлрд╡рд░реАрд▓ рд╕реНрдЯреЙрдХрдХрдбреЗ рдирд┐рд░реНрджреЗрд╢рд┐рдд рдХрд░рд╛. рдмрд╛рдЙрдВрдбрд┐рдВрдЧ рдмреЙрдХреНрд╕реЗрд╕ рдХрдиреНрд╕реЛрд▓рд╡рд░ рдкреНрд░рд┐рдВрдЯ рд╣реЛрддреАрд▓, рдЬреНрдпрд╛рдордзреНрдпреЗ left, top, width рдЖрдгрд┐ height рдЪреЗ рдореВрд▓реНрдп 0-1 рджрд░рдореНрдпрд╛рди рдЕрд╕реЗрд▓.

    ```output
    pi@raspberrypi:~/stock-counter $ python3 app.py 
    tomato paste:   33.42%  {'additional_properties': {}, 'left': 0.3455171, 'top': 0.09916268, 'width': 0.14175442, 'height': 0.29405564}
    tomato paste:   34.41%  {'additional_properties': {}, 'left': 0.48283678, 'top': 0.10242918, 'width': 0.11782813, 'height': 0.27467814}
    tomato paste:   31.25%  {'additional_properties': {}, 'left': 0.4923783, 'top': 0.35007596, 'width': 0.13668466, 'height': 0.28304994}
    tomato paste:   31.05%  {'additional_properties': {}, 'left': 0.36416405, 'top': 0.37494493, 'width': 0.14024884, 'height': 0.26880276}
    ```

### рдХрд╛рд░реНрдп - рдкреНрд░рддрд┐рдореЗрд╡рд░ рдмрд╛рдЙрдВрдбрд┐рдВрдЧ рдмреЙрдХреНрд╕реЗрд╕ рдХрд╛рдврд╛

1. [Pillow](https://pypi.org/project/Pillow/) рд╣реЗ Pip рдкреЕрдХреЗрдЬ рдкреНрд░рддрд┐рдорд╛рдВрд╡рд░ рдХрд╛рдврдгреНрдпрд╛рд╕рд╛рдареА рд╡рд╛рдкрд░рд▓реЗ рдЬрд╛рдК рд╢рдХрддреЗ. рд╣реЗ рдЦрд╛рд▓реАрд▓ рдХрдорд╛рдВрдбрдиреЗ рдЗрдиреНрд╕реНрдЯреЙрд▓ рдХрд░рд╛:

    ```sh
    pip3 install pillow
    ```

    рдЬрд░ рддреБрдореНрд╣реА рд╡реНрд╣рд░реНрдЪреНрдпреБрдЕрд▓ IoT рдбрд┐рд╡реНрд╣рд╛рдЗрд╕ рд╡рд╛рдкрд░рдд рдЕрд╕рд╛рд▓, рддрд░ рд╣реЗ рд╕рдХреНрд░рд┐рдп рд╡реНрд╣рд░реНрдЪреНрдпреБрдЕрд▓ рд╡рд╛рддрд╛рд╡рд░рдгрд╛рддреВрди рдЪрд╛рд▓рд╡рд╛.

1. `app.py` рдлрд╛рдИрд▓рдЪреНрдпрд╛ рд╢реАрд░реНрд╖рд╕реНрдерд╛рдиреА рдЦрд╛рд▓реАрд▓ рдЖрдпрд╛рдд рд╕реНрдЯреЗрдЯрдореЗрдВрдЯ рдЬреЛрдбрд╛:

    ```python
    from PIL import Image, ImageDraw, ImageColor
    ```

    рд╣реЗ рдкреНрд░рддрд┐рдорд╛ рд╕рдВрдкрд╛рджрд┐рдд рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдЖрд╡рд╢реНрдпрдХ рдХреЛрдб рдЖрдпрд╛рдд рдХрд░рддреЗ.

1. `app.py` рдлрд╛рдИрд▓рдЪреНрдпрд╛ рд╢реЗрд╡рдЯреА рдЦрд╛рд▓реАрд▓ рдХреЛрдб рдЬреЛрдбрд╛:

    ```python
    with Image.open('image.jpg') as im:
        draw = ImageDraw.Draw(im)
    
        for prediction in predictions:
            scale_left = prediction.bounding_box.left
            scale_top = prediction.bounding_box.top
            scale_right = prediction.bounding_box.left + prediction.bounding_box.width
            scale_bottom = prediction.bounding_box.top + prediction.bounding_box.height
            
            left = scale_left * im.width
            top = scale_top * im.height
            right = scale_right * im.width
            bottom = scale_bottom * im.height
    
            draw.rectangle([left, top, right, bottom], outline=ImageColor.getrgb('red'), width=2)
    
        im.save('image.jpg')
    ```

    рд╣рд╛ рдХреЛрдб рд╕рдВрдкрд╛рджрдирд╛рд╕рд╛рдареА рдЖрдзреА рд╕реЗрд╡реНрд╣ рдХреЗрд▓реЗрд▓реА рдкреНрд░рддрд┐рдорд╛ рдЙрдШрдбрддреЛ. рдирдВрддрд░ рддреЛ рднрд╡рд┐рд╖реНрдпрд╡рд╛рдгреНрдпрд╛рдВрдордзреВрди рдмрд╛рдЙрдВрдбрд┐рдВрдЧ рдмреЙрдХреНрд╕реЗрд╕ рдШреЗрддреЛ рдЖрдгрд┐ 0-1 рдордзреАрд▓ рдмрд╛рдЙрдВрдбрд┐рдВрдЧ рдмреЙрдХреНрд╕ рдореВрд▓реНрдпрд╛рдВрдЪрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реВрди рддрд│рд╛рдЪрд╛ рдЙрдЬрд╡рд╛ рдХреЛрдкрд░рд╛ рдХрд╛рдврддреЛ. рд╣реЗ рдореВрд▓реНрдп рдкреНрд░рддрд┐рдореЗрдЪреНрдпрд╛ рд╕рдВрдмрдВрдзрд┐рдд рдкрд░рд┐рдорд╛рдгрд╛рдиреЗ рдЧреБрдгрд╛рдХрд╛рд░ рдХрд░реВрди рдкреНрд░рддрд┐рдорд╛ рд╕рдордиреНрд╡рдпрд╛рдВрдордзреНрдпреЗ рд░реВрдкрд╛рдВрддрд░рд┐рдд рдХреЗрд▓реЗ рдЬрд╛рддреЗ. рдЙрджрд╛рд╣рд░рдгрд╛рд░реНрде, рдЬрд░ left рдЪреЗ рдореВрд▓реНрдп 0.5 рдЕрд╕реЗрд▓ рдЖрдгрд┐ рдкреНрд░рддрд┐рдорд╛ 600 рдкрд┐рдХреНрд╕реЗрд▓ рд░реБрдВрдж рдЕрд╕реЗрд▓, рддрд░ рддреЗ 300 рдордзреНрдпреЗ рд░реВрдкрд╛рдВрддрд░рд┐рдд рд╣реЛрдИрд▓ (0.5 x 600 = 300).

    рдкреНрд░рддреНрдпреЗрдХ рдмрд╛рдЙрдВрдбрд┐рдВрдЧ рдмреЙрдХреНрд╕ рд▓рд╛рд▓ рд░реЗрд╖реЗрдиреЗ рдкреНрд░рддрд┐рдореЗрд╡рд░ рдХрд╛рдврд▓рд╛ рдЬрд╛рддреЛ. рд╢реЗрд╡рдЯреА рд╕рдВрдкрд╛рджрд┐рдд рдкреНрд░рддрд┐рдорд╛ рд╕реЗрд╡реНрд╣ рдХреЗрд▓реА рдЬрд╛рддреЗ рдЖрдгрд┐ рдореВрд│ рдкреНрд░рддрд┐рдореЗрд╡рд░ рдЕрдзрд┐рд▓рд┐рдЦрд┐рдд рдХреЗрд▓реА рдЬрд╛рддреЗ.

1. рдЕреЕрдк рдЪрд╛рд▓рд╡рд╛ рдЖрдгрд┐ рдХреЕрдореЗрд░рд╛ рд╢реЗрд▓реНрдлрд╡рд░реАрд▓ рд╕реНрдЯреЙрдХрдХрдбреЗ рдирд┐рд░реНрджреЗрд╢рд┐рдд рдХрд░рд╛. рддреБрдореНрд╣рд╛рд▓рд╛ VS Code рдПрдХреНрд╕рдкреНрд▓реЛрд░рд░рдордзреНрдпреЗ `image.jpg` рдлрд╛рдИрд▓ рджрд┐рд╕реЗрд▓, рдЖрдгрд┐ рддреБрдореНрд╣реА рддреА рдирд┐рд╡рдбреВрди рдмрд╛рдЙрдВрдбрд┐рдВрдЧ рдмреЙрдХреНрд╕реЗрд╕ рдкрд╛рд╣реВ рд╢рдХрд╛рд▓.

    ![4 рдЯреЛрдореЕрдЯреЛ рдкреЗрд╕реНрдЯрдЪреНрдпрд╛ рдХреЕрдиреНрд╕, рдкреНрд░рддреНрдпреЗрдХ рдХреЕрдирднреЛрд╡рддреА рдмрд╛рдЙрдВрдбрд┐рдВрдЧ рдмреЙрдХреНрд╕реЗрд╕](../../../../../translated_images/rpi-stock-with-bounding-boxes.b5540e2ecb7cd49f1271828d3be412671d950e87625c5597ea97c90f11e01097.mr.jpg)

## рд╕реНрдЯреЙрдХ рдореЛрдЬрд╛

рд╡рд░реАрд▓ рдкреНрд░рддрд┐рдореЗрдд, рдмрд╛рдЙрдВрдбрд┐рдВрдЧ рдмреЙрдХреНрд╕реЗрд╕рдордзреНрдпреЗ рдереЛрдбрд╛рд╕рд╛ рдУрд╡реНрд╣рд░рд▓реЕрдк рдЖрд╣реЗ. рдЬрд░ рд╣рд╛ рдУрд╡реНрд╣рд░рд▓реЕрдк рдЦреВрдк рдореЛрдард╛ рдЕрд╕реЗрд▓, рддрд░ рдмрд╛рдЙрдВрдбрд┐рдВрдЧ рдмреЙрдХреНрд╕реЗрд╕ рдПрдХрд╛рдЪ рд╡рд╕реНрддреВрд▓рд╛ рд╕реВрдЪрд┐рдд рдХрд░реВ рд╢рдХрддрд╛рдд. рд╡рд╕реНрддреВ рдпреЛрдЧреНрдпрд░рд┐рддреНрдпрд╛ рдореЛрдЬрдгреНрдпрд╛рд╕рд╛рдареА, рддреБрдореНрд╣рд╛рд▓рд╛ рдорд╣рддреНрддреНрд╡рдкреВрд░реНрдг рдУрд╡реНрд╣рд░рд▓реЕрдк рдЕрд╕рд▓реЗрд▓реНрдпрд╛ рдмреЙрдХреНрд╕реЗрд╕рдХрдбреЗ рджреБрд░реНрд▓рдХреНрд╖ рдХрд░рдгреЗ рдЖрд╡рд╢реНрдпрдХ рдЖрд╣реЗ.

### рдХрд╛рд░реНрдп - рдУрд╡реНрд╣рд░рд▓реЕрдкрдХрдбреЗ рджреБрд░реНрд▓рдХреНрд╖ рдХрд░реВрди рд╕реНрдЯреЙрдХ рдореЛрдЬрд╛

1. [Shapely](https://pypi.org/project/Shapely/) рд╣реЗ Pip рдкреЕрдХреЗрдЬ рдЗрдВрдЯрд░рд╕реЗрдХреНрд╢рди рдХрд╛рдврдгреНрдпрд╛рд╕рд╛рдареА рд╡рд╛рдкрд░рд▓реЗ рдЬрд╛рдК рд╢рдХрддреЗ. рдЬрд░ рддреБрдореНрд╣реА рд░рд╛рд╕реНрдкрдмреЗрд░реА рдкрд╛рдИ рд╡рд╛рдкрд░рдд рдЕрд╕рд╛рд▓, рддрд░ рдЖрдзреА рдПрдХ рд▓рд╛рдпрдмреНрд░рд░реА рдбрд┐рдкреЗрдВрдбрдиреНрд╕реА рдЗрдиреНрд╕реНрдЯреЙрд▓ рдХрд░рд╛рд╡реА рд▓рд╛рдЧреЗрд▓:

    ```sh
    sudo apt install libgeos-dev
    ```

1. Shapely Pip рдкреЕрдХреЗрдЬ рдЗрдиреНрд╕реНрдЯреЙрд▓ рдХрд░рд╛:

    ```sh
    pip3 install shapely
    ```

    рдЬрд░ рддреБрдореНрд╣реА рд╡реНрд╣рд░реНрдЪреНрдпреБрдЕрд▓ IoT рдбрд┐рд╡реНрд╣рд╛рдЗрд╕ рд╡рд╛рдкрд░рдд рдЕрд╕рд╛рд▓, рддрд░ рд╣реЗ рд╕рдХреНрд░рд┐рдп рд╡реНрд╣рд░реНрдЪреНрдпреБрдЕрд▓ рд╡рд╛рддрд╛рд╡рд░рдгрд╛рддреВрди рдЪрд╛рд▓рд╡рд╛.

1. `app.py` рдлрд╛рдИрд▓рдЪреНрдпрд╛ рд╢реАрд░реНрд╖рд╕реНрдерд╛рдиреА рдЦрд╛рд▓реАрд▓ рдЖрдпрд╛рдд рд╕реНрдЯреЗрдЯрдореЗрдВрдЯ рдЬреЛрдбрд╛:

    ```python
    from shapely.geometry import Polygon
    ```

    рд╣реЗ рдУрд╡реНрд╣рд░рд▓реЕрдк рдХрд╛рдврдгреНрдпрд╛рд╕рд╛рдареА рдмрд╣реБрднреБрдЬ рддрдпрд╛рд░ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдЖрд╡рд╢реНрдпрдХ рдХреЛрдб рдЖрдпрд╛рдд рдХрд░рддреЗ.

1. рдмрд╛рдЙрдВрдбрд┐рдВрдЧ рдмреЙрдХреНрд╕реЗрд╕ рдХрд╛рдврдгреНрдпрд╛рдЪреНрдпрд╛ рдХреЛрдбрдЪреНрдпрд╛ рд╡рд░ рдЦрд╛рд▓реАрд▓ рдХреЛрдб рдЬреЛрдбрд╛:

    ```python
    overlap_threshold = 0.20
    ```

    рд╣реЗ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддреЗ рдХреА рдмрд╛рдЙрдВрдбрд┐рдВрдЧ рдмреЙрдХреНрд╕реЗрд╕ рдПрдХрд╛рдЪ рд╡рд╕реНрддреВ рдорд╛рдирд▓реЗ рдЬрд╛рдгреНрдпрд╛рд╕рд╛рдареА рдХрд┐рддреА рдЯрдХреНрдХреЗ рдУрд╡реНрд╣рд░рд▓реЕрдк рдЕрдиреБрдордд рдЖрд╣реЗ. 0.20 рдореНрд╣рдгрдЬреЗ 20% рдУрд╡реНрд╣рд░рд▓реЕрдк.

1. Shapely рд╡рд╛рдкрд░реВрди рдУрд╡реНрд╣рд░рд▓реЕрдк рдХрд╛рдврдгреНрдпрд╛рд╕рд╛рдареА, рдмрд╛рдЙрдВрдбрд┐рдВрдЧ рдмреЙрдХреНрд╕реЗрд╕ Shapely рдмрд╣реБрднреБрдЬрд╛рдВрдордзреНрдпреЗ рд░реВрдкрд╛рдВрддрд░рд┐рдд рдХрд░рдгреЗ рдЖрд╡рд╢реНрдпрдХ рдЖрд╣реЗ. рд╣реЗ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдЦрд╛рд▓реАрд▓ рдлрдВрдХреНрд╢рди рдЬреЛрдбрд╛:

    ```python
    def create_polygon(prediction):
        scale_left = prediction.bounding_box.left
        scale_top = prediction.bounding_box.top
        scale_right = prediction.bounding_box.left + prediction.bounding_box.width
        scale_bottom = prediction.bounding_box.top + prediction.bounding_box.height
    
        return Polygon([(scale_left, scale_top), (scale_right, scale_top), (scale_right, scale_bottom), (scale_left, scale_bottom)])
    ```

    рд╣реЗ рднрд╡рд┐рд╖реНрдпрд╡рд╛рдгреАрдЪреНрдпрд╛ рдмрд╛рдЙрдВрдбрд┐рдВрдЧ рдмреЙрдХреНрд╕рдЪрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реВрди рдПрдХ рдмрд╣реБрднреБрдЬ рддрдпрд╛рд░ рдХрд░рддреЗ.

1. рдУрд╡реНрд╣рд░рд▓реЕрдкрд┐рдВрдЧ рд╡рд╕реНрддреВ рдХрд╛рдврдгреНрдпрд╛рд╕рд╛рдареАрдЪреА рд▓реЙрдЬрд┐рдХ рд╕рд░реНрд╡ рдмрд╛рдЙрдВрдбрд┐рдВрдЧ рдмреЙрдХреНрд╕реЗрд╕рдЪреА рддреБрд▓рдирд╛ рдХрд░рддреЗ. рдЬрд░ рдХреЛрдгрддреНрдпрд╛рд╣реА рдЬреЛрдбреАрдЪреНрдпрд╛ рднрд╡рд┐рд╖реНрдпрд╡рд╛рдгреНрдпрд╛рдВрдордзреНрдпреЗ рдмрд╛рдЙрдВрдбрд┐рдВрдЧ рдмреЙрдХреНрд╕реЗрд╕ рдУрд╡реНрд╣рд░рд▓реЕрдк рдереНрд░реЗрд╢реЛрд▓реНрдбрдкреЗрдХреНрд╖рд╛ рдЬрд╛рд╕реНрдд рдЕрд╕реЗрд▓, рддрд░ рддреНрдпрд╛ рднрд╡рд┐рд╖реНрдпрд╡рд╛рдгреНрдпрд╛рдВрдкреИрдХреА рдПрдХ рдХрд╛рдвреВрди рдЯрд╛рдХрд▓реА рдЬрд╛рддреЗ. рд╕рд░реНрд╡ рднрд╡рд┐рд╖реНрдпрд╡рд╛рдгреНрдпрд╛рдВрдЪреА рддреБрд▓рдирд╛ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА, рддреБрдореНрд╣реА рднрд╡рд┐рд╖реНрдпрд╡рд╛рдгреА 1 рдЪреА 2, 3, 4 рдЗрддреНрдпрд╛рджреАрдВрд╕реЛрдмрдд рддреБрд▓рдирд╛ рдХрд░рддрд╛, рдирдВрддрд░ 2 рдЪреА 3, 4 рдЗрддреНрдпрд╛рджреАрдВрд╕реЛрдмрдд. рдЦрд╛рд▓реАрд▓ рдХреЛрдб рд╣реЗ рдХрд░рддреЛ:

    ```python
    to_delete = []

    for i in range(0, len(predictions)):
        polygon_1 = create_polygon(predictions[i])
    
        for j in range(i+1, len(predictions)):
            polygon_2 = create_polygon(predictions[j])
            overlap = polygon_1.intersection(polygon_2).area

            smallest_area = min(polygon_1.area, polygon_2.area)
    
            if overlap > (overlap_threshold * smallest_area):
                to_delete.append(predictions[i])
                break
    
    for d in to_delete:
        predictions.remove(d)

    print(f'Counted {len(predictions)} stock items')
    ```

    рдУрд╡реНрд╣рд░рд▓реЕрдк Shapely рдЪреНрдпрд╛ `Polygon.intersection` рдкрджреНрдзрддреАрдЪрд╛ рд╡рд╛рдкрд░ рдХрд░реВрди рдХрд╛рдврд▓рд╛ рдЬрд╛рддреЛ, рдЬреА рдУрд╡реНрд╣рд░рд▓реЕрдк рдЕрд╕рд▓реЗрд▓реЗ рдмрд╣реБрднреБрдЬ рдкрд░рдд рдХрд░рддреЗ. рдпрд╛ рдмрд╣реБрднреБрдЬрд╛рдЪрд╛ рдХреНрд╖реЗрддреНрд░рдлрд│ рдХрд╛рдврд▓реЗ рдЬрд╛рддреЗ. рд╣рд╛ рдУрд╡реНрд╣рд░рд▓реЕрдк рдереНрд░реЗрд╢реЛрд▓реНрдб рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд рдореВрд▓реНрдп рдирд╛рд╣реА, рддрд░ рдмрд╛рдЙрдВрдбрд┐рдВрдЧ рдмреЙрдХреНрд╕рдЪреНрдпрд╛ рдЯрдХреНрдХреЗрд╡рд╛рд░реАрдЪрд╛ рд╡рд┐рдЪрд╛рд░ рдХрд░рддреЛ. рддреНрдпрд╛рдореБрд│реЗ рд╕рд░реНрд╡рд╛рдд рд▓рд╣рд╛рди рдмрд╛рдЙрдВрдбрд┐рдВрдЧ рдмреЙрдХреНрд╕ рд╢реЛрдзрд▓рд╛ рдЬрд╛рддреЛ рдЖрдгрд┐ рдУрд╡реНрд╣рд░рд▓реЕрдк рдереНрд░реЗрд╢реЛрд▓реНрдбрдЪрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реВрди рдУрд╡реНрд╣рд░рд▓реЕрдк рдХреНрд╖реЗрддреНрд░рдлрд│ рдХрд╛рдврд▓реЗ рдЬрд╛рддреЗ. рдЬрд░ рдУрд╡реНрд╣рд░рд▓реЕрдк рдпрд╛рдкреЗрдХреНрд╖рд╛ рдЬрд╛рд╕реНрдд рдЕрд╕реЗрд▓, рддрд░ рднрд╡рд┐рд╖реНрдпрд╡рд╛рдгреА рдХрд╛рдвреВрди рдЯрд╛рдХрдгреНрдпрд╛рд╕рд╛рдареА рдЪрд┐рдиреНрд╣рд╛рдВрдХрд┐рдд рдХреЗрд▓реА рдЬрд╛рддреЗ.

    рдПрдХрджрд╛ рднрд╡рд┐рд╖реНрдпрд╡рд╛рдгреА рдХрд╛рдвреВрди рдЯрд╛рдХрдгреНрдпрд╛рд╕рд╛рдареА рдЪрд┐рдиреНрд╣рд╛рдВрдХрд┐рдд рдХреЗрд▓реА рдЧреЗрд▓реА рдХреА, рддреА рдкреБрдиреНрд╣рд╛ рддрдкрд╛рд╕рдгреНрдпрд╛рдЪреА рдЧрд░рдЬ рдирд╛рд╣реА, рддреНрдпрд╛рдореБрд│реЗ рдЕрдВрддрд░реНрдЧрдд рд▓реВрдк рдкреБрдвреАрд▓ рднрд╡рд┐рд╖реНрдпрд╡рд╛рдгреА рддрдкрд╛рд╕рдгреНрдпрд╛рд╕рд╛рдареА рдмреНрд░реЗрдХ рд╣реЛрддреЛ. рдпрд╛рджреАрддреВрди рдЖрдпрдЯрдо рдХрд╛рдвреВрди рдЯрд╛рдХрддрд╛рдирд╛ рддреНрдпрд╛рд╡рд░ рдкреБрдирд░рд╛рд╡реГрддреНрддреА рдХрд░рддрд╛ рдпреЗрдд рдирд╛рд╣реА, рддреНрдпрд╛рдореБрд│реЗ рдереНрд░реЗрд╢реЛрд▓реНрдбрдкреЗрдХреНрд╖рд╛ рдЬрд╛рд╕реНрдд рдУрд╡реНрд╣рд░рд▓реЕрдк рдЕрд╕рд▓реЗрд▓реНрдпрд╛ рдмрд╛рдЙрдВрдбрд┐рдВрдЧ рдмреЙрдХреНрд╕реЗрд╕ `to_delete` рдпрд╛рджреАрдд рдЬреЛрдбрд▓реЗ рдЬрд╛рддрд╛рдд рдЖрдгрд┐ рдирдВрддрд░ рд╢реЗрд╡рдЯреА рдХрд╛рдвреВрди рдЯрд╛рдХрд▓реЗ рдЬрд╛рддрд╛рдд.

    рд╢реЗрд╡рдЯреА, рд╕реНрдЯреЙрдХ рдХрд╛рдЙрдВрдЯ рдХрдиреНрд╕реЛрд▓рд╡рд░ рдкреНрд░рд┐рдВрдЯ рдХреЗрд▓рд╛ рдЬрд╛рддреЛ. рд╣рд╛ рдХрд╛рдЙрдВрдЯ IoT рд╕реЗрд╡реЗрд▓рд╛ рдкрд╛рдард╡реВрди рд╕реНрдЯреЙрдХ рдкрд╛рддрд│реА рдХрдореА рдЕрд╕рд▓реНрдпрд╛рд╕ рдЕрд▓рд░реНрдЯ рдкрд╛рдард╡рддрд╛ рдпреЗрддреЛ. рд╣рд╛ рд╕рд░реНрд╡ рдХреЛрдб рдмрд╛рдЙрдВрдбрд┐рдВрдЧ рдмреЙрдХреНрд╕реЗрд╕ рдХрд╛рдврдгреНрдпрд╛рдЪреНрдпрд╛ рдЖрдзреА рдЖрд╣реЗ, рддреНрдпрд╛рдореБрд│реЗ рддреБрдореНрд╣рд╛рд▓рд╛ рддрдпрд╛рд░ рдХреЗрд▓реЗрд▓реНрдпрд╛ рдкреНрд░рддрд┐рдорд╛рдВрд╡рд░ рдУрд╡реНрд╣рд░рд▓реЕрдкрд╢рд┐рд╡рд╛рдп рд╕реНрдЯреЙрдХ рднрд╡рд┐рд╖реНрдпрд╡рд╛рдгреА рджрд┐рд╕реЗрд▓.

    > ЁЯТБ рд╣рд╛ рдУрд╡реНрд╣рд░рд▓реЕрдк рдХрд╛рдврдгреНрдпрд╛рдЪрд╛ рдЦреВрдк рд╕рд╛рдзрд╛ рдорд╛рд░реНрдЧ рдЖрд╣реЗ, рдЬреНрдпрд╛рдордзреНрдпреЗ рдУрд╡реНрд╣рд░рд▓реЕрдк рдЕрд╕рд▓реЗрд▓реНрдпрд╛ рдЬреЛрдбреАрддреАрд▓ рдкрд╣рд┐рд▓рд╛ рдХрд╛рдвреВрди рдЯрд╛рдХрд▓рд╛ рдЬрд╛рддреЛ. рдЙрддреНрдкрд╛рджрди рдХреЛрдбрд╕рд╛рдареА, рддреБрдореНрд╣рд╛рд▓рд╛ рдпреЗрдереЗ рдЕрдзрд┐рдХ рд▓реЙрдЬрд┐рдХ рдЬреЛрдбрд╛рд╡реЗ рд▓рд╛рдЧреЗрд▓, рдЬрд╕реЗ рдХреА рдЕрдиреЗрдХ рд╡рд╕реНрддреВрдВрдЪреНрдпрд╛ рдУрд╡реНрд╣рд░рд▓реЕрдкрдЪрд╛ рд╡рд┐рдЪрд╛рд░ рдХрд░рдгреЗ, рдХрд┐рдВрд╡рд╛ рдПрдХ рдмрд╛рдЙрдВрдбрд┐рдВрдЧ рдмреЙрдХреНрд╕ рджреБрд╕рд▒реНрдпрд╛рдордзреНрдпреЗ рд╕рдорд╛рд╡рд┐рд╖реНрдЯ рдЕрд╕рд▓реНрдпрд╛рд╕.

1. рдЕреЕрдк рдЪрд╛рд▓рд╡рд╛ рдЖрдгрд┐ рдХреЕрдореЗрд░рд╛ рд╢реЗрд▓реНрдлрд╡рд░реАрд▓ рд╕реНрдЯреЙрдХрдХрдбреЗ рдирд┐рд░реНрджреЗрд╢рд┐рдд рдХрд░рд╛. рдЖрдЙрдЯрдкреБрдЯрдордзреНрдпреЗ рдереНрд░реЗрд╢реЛрд▓реНрдбрдкреЗрдХреНрд╖рд╛ рдЬрд╛рд╕реНрдд рдУрд╡реНрд╣рд░рд▓реЕрдк рдирд╕рд▓реЗрд▓реНрдпрд╛ рдмрд╛рдЙрдВрдбрд┐рдВрдЧ рдмреЙрдХреНрд╕реЗрд╕рдЪреА рд╕рдВрдЦреНрдпрд╛ рджрд┐рд╕реЗрд▓. `overlap_threshold` рдореВрд▓реНрдп рд╕рдорд╛рдпреЛрдЬрд┐рдд рдХрд░реВрди рднрд╡рд┐рд╖реНрдпрд╡рд╛рдгреНрдпрд╛ рдХрд╢рд╛ рджреБрд░реНрд▓рдХреНрд╖рд┐рдд рдХреЗрд▓реНрдпрд╛ рдЬрд╛рддрд╛рдд рддреЗ рдкрд╛рд╣рд╛.

> ЁЯТБ рддреБрдореНрд╣рд╛рд▓рд╛ рд╣рд╛ рдХреЛрдб [code-count/pi](../../../../../5-retail/lessons/2-check-stock-device/code-count/pi) рдХрд┐рдВрд╡рд╛ [code-count/virtual-iot-device](../../../../../5-retail/lessons/2-check-stock-device/code-count/virtual-iot-device) рдлреЛрд▓реНрдбрд░рдордзреНрдпреЗ рд╕рд╛рдкрдбреЗрд▓.

ЁЯША рддреБрдордЪрд╛ рд╕реНрдЯреЙрдХ рдХрд╛рдЙрдВрдЯрд░ рдкреНрд░реЛрдЧреНрд░рд╛рдо рдпрд╢рд╕реНрд╡реА рдЭрд╛рд▓рд╛!

---

**рдЕрд╕реНрд╡реАрдХрд░рдг**:  
рд╣рд╛ рджрд╕реНрддрдРрд╡рдЬ AI рднрд╛рд╖рд╛рдВрддрд░ рд╕реЗрд╡рд╛ [Co-op Translator](https://github.com/Azure/co-op-translator) рд╡рд╛рдкрд░реВрди рднрд╛рд╖рд╛рдВрддрд░рд┐рдд рдХрд░рдгреНрдпрд╛рдд рдЖрд▓рд╛ рдЖрд╣реЗ. рдЖрдореНрд╣реА рдЕрдЪреВрдХрддреЗрд╕рд╛рдареА рдкреНрд░рдпрддреНрдирд╢реАрд▓ рдЕрд╕рд▓реЛ рддрд░реА рдХреГрдкрдпрд╛ рд▓рдХреНрд╖рд╛рдд рдареЗрд╡рд╛ рдХреА рд╕реНрд╡рдпрдВрдЪрд▓рд┐рдд рднрд╛рд╖рд╛рдВрддрд░рд╛рдВрдордзреНрдпреЗ рддреНрд░реБрдЯреА рдХрд┐рдВрд╡рд╛ рдЕрдЪреВрдХрддреЗрдЪрд╛ рдЕрднрд╛рд╡ рдЕрд╕реВ рд╢рдХрддреЛ. рдореВрд│ рднрд╛рд╖реЗрддреАрд▓ рджрд╕реНрддрдРрд╡рдЬ рд╣рд╛ рдЕрдзрд┐рдХреГрдд рд╕реНрд░реЛрдд рдорд╛рдирд▓рд╛ рдЬрд╛рд╡рд╛. рдорд╣рддреНрддреНрд╡рд╛рдЪреНрдпрд╛ рдорд╛рд╣рд┐рддреАрд╕рд╛рдареА рд╡реНрдпрд╛рд╡рд╕рд╛рдпрд┐рдХ рдорд╛рдирд╡реА рднрд╛рд╖рд╛рдВрддрд░рд╛рдЪреА рд╢рд┐рдлрд╛рд░рд╕ рдХреЗрд▓реА рдЬрд╛рддреЗ. рдпрд╛ рднрд╛рд╖рд╛рдВрддрд░рд╛рдЪрд╛ рд╡рд╛рдкрд░ рдХрд░реВрди рдирд┐рд░реНрдорд╛рдг рд╣реЛрдгрд╛рд▒реНрдпрд╛ рдХреЛрдгрддреНрдпрд╛рд╣реА рдЧреИрд░рд╕рдордЬ рдХрд┐рдВрд╡рд╛ рдЪреБрдХреАрдЪреНрдпрд╛ рдЕрд░реНрдерд╛рд╕рд╛рдареА рдЖрдореНрд╣реА рдЬрдмрд╛рдмрджрд╛рд░ рд░рд╛рд╣рдгрд╛рд░ рдирд╛рд╣реА.