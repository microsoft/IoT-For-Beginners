<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "5f2d2f4a5a023c93ab34a0cc5b47c0c4",
  "translation_date": "2025-08-27T11:29:39+00:00",
  "source_file": "2-farm/lessons/5-migrate-application-to-the-cloud/README.md",
  "language_code": "mr"
}
-->
# рдЖрдкрд▓реЗ рдЕрдиреБрдкреНрд░рдпреЛрдЧ рд▓реЙрдЬрд┐рдХ рдХреНрд▓рд╛рдЙрдбрдордзреНрдпреЗ рд╕реНрдерд▓рд╛рдВрддрд░рд┐рдд рдХрд░рд╛

![рдпрд╛ рдзрдбреНрдпрд╛рдЪрд╛ рд╕реНрдХреЗрдЪ рдиреЛрдЯ рдЖрдврд╛рд╡рд╛](../../../../../translated_images/lesson-9.dfe99c8e891f48e179724520da9f5794392cf9a625079281ccdcbf09bd85e1b6.mr.jpg)

> рд╕реНрдХреЗрдЪ рдиреЛрдЯ [рдирд┐рддреНрдп рдирд░рд╕рд┐рдВрд╣рди](https://github.com/nitya) рдпрд╛рдВрдиреА рддрдпрд╛рд░ рдХреЗрд▓реЗ. рдореЛрдареНрдпрд╛ рдЖрд╡реГрддреНрддреАрд╕рд╛рдареА рдкреНрд░рддрд┐рдореЗрд╡рд░ рдХреНрд▓рд┐рдХ рдХрд░рд╛.

рд╣рд╛ рдзрдбрд╛ [IoT for Beginners Project 2 - Digital Agriculture series](https://youtube.com/playlist?list=PLmsFUfdnGr3yCutmcVg6eAUEfsGiFXgcx) рдЪрд╛ рднрд╛рдЧ рдореНрд╣рдгреВрди [Microsoft Reactor](https://developer.microsoft.com/reactor/?WT.mc_id=academic-17441-jabenn) рдХрдбреВрди рд╢рд┐рдХрд╡рд▓рд╛ рдЧреЗрд▓рд╛.

[![рдЖрдкрд▓реНрдпрд╛ IoT рдбрд┐рд╡реНрд╣рд╛рдЗрд╕рд▓рд╛ рд╕рд░реНрд╡реНрд╣рд░рд▓реЗрд╕ рдХреЛрдбрд╕рд╣ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░рд╛](https://img.youtube.com/vi/VVZDcs5u1_I/0.jpg)](https://youtu.be/VVZDcs5u1_I)

## рдкреВрд░реНрд╡-рд╡реНрдпрд╛рдЦреНрдпрд╛рди рдкреНрд░рд╢реНрдирдордВрдЬреБрд╖рд╛

[рдкреВрд░реНрд╡-рд╡реНрдпрд╛рдЦреНрдпрд╛рди рдкреНрд░рд╢реНрдирдордВрдЬреБрд╖рд╛](https://black-meadow-040d15503.1.azurestaticapps.net/quiz/17)

## рдкрд░рд┐рдЪрдп

рдорд╛рдЧреАрд▓ рдзрдбреНрдпрд╛рдд, рдЖрдкрдг рдЖрдкрд▓реНрдпрд╛ рд╡рдирд╕реНрдкрддреАрдЪреНрдпрд╛ рдорд╛рддреАрддреАрд▓ рдЖрд░реНрджреНрд░рддрд╛ рдирд┐рд░реАрдХреНрд╖рдг рдЖрдгрд┐ рд░рд┐рд▓реЗ рдирд┐рдпрдВрддреНрд░рдг рдХреНрд▓рд╛рдЙрдб-рдЖрдзрд╛рд░рд┐рдд IoT рд╕реЗрд╡реЗрд╢реА рдХрд╕реЗ рдЬреЛрдбрд╛рдпрдЪреЗ рддреЗ рд╢рд┐рдХрд▓реЗ. рдкреБрдвреАрд▓ рдкрд╛рдпрд░реА рдореНрд╣рдгрдЬреЗ рд░рд┐рд▓реЗрдЪреНрдпрд╛ рд╡реЗрд│реЗрдЪреЗ рдирд┐рдпрдВрддреНрд░рдг рдХрд░рдгрд╛рд░рд╛ рд╕рд░реНрд╡реНрд╣рд░ рдХреЛрдб рдХреНрд▓рд╛рдЙрдбрдордзреНрдпреЗ рд╣рд▓рд╡рдгреЗ. рдпрд╛ рдзрдбреНрдпрд╛рдд рдЖрдкрдг рд╕рд░реНрд╡реНрд╣рд░рд▓реЗрд╕ рдлрдВрдХреНрд╢рдиреНрд╕ рд╡рд╛рдкрд░реВрди рд╣реЗ рдХрд╕реЗ рдХрд░рд╛рдпрдЪреЗ рддреЗ рд╢рд┐рдХрд╛рд▓.

рдпрд╛ рдзрдбреНрдпрд╛рдд рдЖрдкрдг рд╢рд┐рдХрдгрд╛рд░ рдЖрд╣рд╛рдд:

* [рд╕рд░реНрд╡реНрд╣рд░рд▓реЗрд╕ рдореНрд╣рдгрдЬреЗ рдХрд╛рдп?](../../../../../2-farm/lessons/5-migrate-application-to-the-cloud)
* [рд╕рд░реНрд╡реНрд╣рд░рд▓реЗрд╕ рдЕрдиреБрдкреНрд░рдпреЛрдЧ рддрдпрд╛рд░ рдХрд░рд╛](../../../../../2-farm/lessons/5-migrate-application-to-the-cloud)
* [IoT Hub рдЗрд╡реНрд╣реЗрдВрдЯ рдЯреНрд░рд┐рдЧрд░ рддрдпрд╛рд░ рдХрд░рд╛](../../../../../2-farm/lessons/5-migrate-application-to-the-cloud)
* [рд╕рд░реНрд╡реНрд╣рд░рд▓реЗрд╕ рдХреЛрдбрдордзреВрди рдереЗрдЯ рдкрджреНрдзрддреАрдЪреНрдпрд╛ рд╡рд┐рдирдВрддреНрдпрд╛ рдкрд╛рдард╡рд╛](../../../../../2-farm/lessons/5-migrate-application-to-the-cloud)
* [рдЖрдкрд▓рд╛ рд╕рд░реНрд╡реНрд╣рд░рд▓реЗрд╕ рдХреЛрдб рдХреНрд▓рд╛рдЙрдбрдордзреНрдпреЗ рддреИрдирд╛рдд рдХрд░рд╛](../../../../../2-farm/lessons/5-migrate-application-to-the-cloud)

## рд╕рд░реНрд╡реНрд╣рд░рд▓реЗрд╕ рдореНрд╣рдгрдЬреЗ рдХрд╛рдп?

рд╕рд░реНрд╡реНрд╣рд░рд▓реЗрд╕, рдХрд┐рдВрд╡рд╛ рд╕рд░реНрд╡реНрд╣рд░рд▓реЗрд╕ рд╕рдВрдЧрдгрди, рдпрд╛рдордзреНрдпреЗ рд▓рд╣рд╛рди рдХреЛрдб рдмреНрд▓реЙрдХреНрд╕ рддрдпрд╛рд░ рдХрд░рдгреЗ рд╕рдорд╛рд╡рд┐рд╖реНрдЯ рдЖрд╣реЗ рдЬреЗ рд╡рд┐рд╡рд┐рдз рдкреНрд░рдХрд╛рд░рдЪреНрдпрд╛ рдШрдЯрдирд╛рдВрд╡рд░ рдкреНрд░рддрд┐рд╕рд╛рдж рдореНрд╣рдгреВрди рдХреНрд▓рд╛рдЙрдбрдордзреНрдпреЗ рдЪрд╛рд▓рд╡рд▓реЗ рдЬрд╛рддрд╛рдд. рдЬреЗрд╡реНрд╣рд╛ рдШрдЯрдирд╛ рдШрдбрддреЗ рддреЗрд╡реНрд╣рд╛ рдЖрдкрд▓рд╛ рдХреЛрдб рдЪрд╛рд▓рддреЛ рдЖрдгрд┐ рддреНрдпрд╛ рдШрдЯрдиреЗрдмрджреНрджрд▓ рдбреЗрдЯрд╛ рджрд┐рд▓рд╛ рдЬрд╛рддреЛ. рдпрд╛ рдШрдЯрдирд╛ рд╡реЗрдЧрд╡реЗрдЧрд│реНрдпрд╛ рдЧреЛрд╖реНрдЯреАрдВрдордзреВрди рдпреЗрдК рд╢рдХрддрд╛рдд, рдЬрд╕реЗ рдХреА рд╡реЗрдм рд╡рд┐рдирдВрддреНрдпрд╛, рд╕рдВрджреЗрд╢ рдПрдХрд╛ рд░рд╛рдВрдЧреЗрдд рдареЗрд╡рдгреЗ, рдбреЗрдЯрд╛рдмреЗрд╕рдордзреАрд▓ рдбреЗрдЯрд╛рдордзреНрдпреЗ рдмрджрд▓, рдХрд┐рдВрд╡рд╛ IoT рдбрд┐рд╡реНрд╣рд╛рдЗрд╕рджреНрд╡рд╛рд░реЗ IoT рд╕реЗрд╡реЗрд▓рд╛ рдкрд╛рдард╡рд▓реЗрд▓реЗ рд╕рдВрджреЗрд╢.

![IoT рд╕реЗрд╡реЗрдордзреВрди рд╕рд░реНрд╡реНрд╣рд░рд▓реЗрд╕ рд╕реЗрд╡реЗрд▓рд╛ рдкрд╛рдард╡рд▓реЗ рдЬрд╛рдгрд╛рд░реЗ рд╕рдВрджреЗрд╢, рдПрдХрд╛рдЪ рд╡реЗрд│реА рдЕрдиреЗрдХ рдлрдВрдХреНрд╢рдиреНрд╕рджреНрд╡рд╛рд░реЗ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЗрд▓реА рдЬрд╛рдд рдЖрд╣реЗ](../../../../../translated_images/iot-messages-to-serverless.0194da1cc0732bb7d0f823aed3fce54735c6b1ad3bf36089804d8aaefc0a774f.mr.png)

> ЁЯТБ рдЬрд░ рддреБрдореНрд╣реА рдкреВрд░реНрд╡реА рдбреЗрдЯрд╛рдмреЗрд╕ рдЯреНрд░рд┐рдЧрд░реНрд╕ рд╡рд╛рдкрд░рд▓реЗ рдЕрд╕рддреАрд▓, рддрд░ рддреБрдореНрд╣реА рдпрд╛рд▓рд╛ рддреНрдпрд╛рдЪрдкреНрд░рдорд╛рдгреЗ рд╡рд┐рдЪрд╛рд░ рдХрд░реВ рд╢рдХрддрд╛, рдЬрд┐рдереЗ рдХреЛрдб рдПрдЦрд╛рджреНрдпрд╛ рдШрдЯрдиреЗрдиреЗ рдЯреНрд░рд┐рдЧрд░ рдХреЗрд▓рд╛ рдЬрд╛рддреЛ, рдЬрд╕реЗ рдХреА рдПрдЦрд╛рджреНрдпрд╛ рдкрдВрдХреНрддреАрдЪреА рдиреЛрдВрдж рдХрд░рдгреЗ.

![рдЬреЗрд╡реНрд╣рд╛ рдЕрдиреЗрдХ рдШрдЯрдирд╛ рдПрдХрд╛рдЪ рд╡реЗрд│реА рдкрд╛рдард╡рд▓реНрдпрд╛ рдЬрд╛рддрд╛рдд, рддреЗрд╡реНрд╣рд╛ рд╕рд░реНрд╡реНрд╣рд░рд▓реЗрд╕ рд╕реЗрд╡рд╛ рддреНрдпрд╛ рд╕рд░реНрд╡рд╛рдВрдирд╛ рдПрдХрд╛рдЪ рд╡реЗрд│реА рдЪрд╛рд▓рд╡рдгреНрдпрд╛рд╕рд╛рдареА рд╕реНрдХреЗрд▓ рдХрд░рддреЗ](../../../../../translated_images/serverless-scaling.f8c769adf0413fd17be1af4f07ff63016b347e2ff869be6c4abb211f9e93909d.mr.png)

рдЖрдкрд▓рд╛ рдХреЛрдб рдлрдХреНрдд рдШрдЯрдирд╛ рдШрдбрд▓реНрдпрд╛рд╡рд░ рдЪрд╛рд▓рддреЛ, рдЗрддрд░ рд╡реЗрд│реА рдЖрдкрд▓рд╛ рдХреЛрдб рдЬрд┐рд╡рдВрдд рдареЗрд╡рдгреНрдпрд╛рд╕рд╛рдареА рдХрд╛рд╣реАрд╣реА рдирд╛рд╣реА. рдШрдЯрдирд╛ рдШрдбрддреЗ, рдЖрдкрд▓рд╛ рдХреЛрдб рд▓реЛрдб рд╣реЛрддреЛ рдЖрдгрд┐ рдЪрд╛рд▓рддреЛ. рдпрд╛рдореБрд│реЗ рд╕рд░реНрд╡реНрд╣рд░рд▓реЗрд╕ рдЕрддреНрдпрдВрдд рд╕реНрдХреЗрд▓реЗрдмрд▓ рдмрдирддреЗ - рдЬрд░ рдЕрдиреЗрдХ рдШрдЯрдирд╛ рдПрдХрд╛рдЪ рд╡реЗрд│реА рдШрдбрд▓реНрдпрд╛, рддрд░ рдХреНрд▓рд╛рдЙрдб рдкреНрд░рджрд╛рддрд╛ рдЖрдкрд▓реЗ рдлрдВрдХреНрд╢рди рдЬрд┐рддрдХреНрдпрд╛ рд╡реЗрд│рд╛ рдЖрд╡рд╢реНрдпрдХ рдЕрд╕реЗрд▓ рддрд┐рддрдХреНрдпрд╛ рд╡реЗрд│рд╛ рдЪрд╛рд▓рд╡реВ рд╢рдХрддреЛ, рддреНрдпрд╛рдВрдЪреНрдпрд╛ рдЙрдкрд▓рдмреНрдз рд╕рд░реНрд╡реНрд╣рд░реНрд╕рд╡рд░. рдпрд╛рдЪрд╛ рддреЛрдЯрд╛ рдЕрд╕рд╛ рдЖрд╣реЗ рдХреА рдЬрд░ рддреБрдореНрд╣рд╛рд▓рд╛ рдШрдЯрдирд╛рдВрдордзреНрдпреЗ рдорд╛рд╣рд┐рддреА рд╕рд╛рдорд╛рдпрд┐рдХ рдХрд░рд╛рдпрдЪреА рдЕрд╕реЗрд▓, рддрд░ рддреБрдореНрд╣рд╛рд▓рд╛ рддреА рдореЗрдорд░реАрдордзреНрдпреЗ рд╕рд╛рдард╡рдгреНрдпрд╛рдРрд╡рдЬреА рдбреЗрдЯрд╛рдмреЗрд╕рд╕рд╛рд░рдЦреНрдпрд╛ рдард┐рдХрд╛рдгреА рд╕рд╛рдард╡рд╛рд╡реА рд▓рд╛рдЧреЗрд▓.

рдЖрдкрд▓рд╛ рдХреЛрдб рдПрдХрд╛ рдлрдВрдХреНрд╢рди рдореНрд╣рдгреВрди рд▓рд┐рд╣рд┐рд▓рд╛ рдЬрд╛рддреЛ рдЬреЛ рдШрдЯрдиреЗрдмрджреНрджрд▓ рддрдкрд╢реАрд▓ рдкреЕрд░рд╛рдореАрдЯрд░ рдореНрд╣рдгреВрди рдШреЗрддреЛ. рдЖрдкрдг рдпрд╛ рд╕рд░реНрд╡реНрд╣рд░рд▓реЗрд╕ рдлрдВрдХреНрд╢рдиреНрд╕ рд▓рд┐рд╣рд┐рдгреНрдпрд╛рд╕рд╛рдареА рдЕрдиреЗрдХ рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рднрд╛рд╖рд╛ рд╡рд╛рдкрд░реВ рд╢рдХрддрд╛.

> ЁЯОУ рд╕рд░реНрд╡реНрд╣рд░рд▓реЗрд╕рд▓рд╛ рдлрдВрдХреНрд╢рдиреНрд╕ рдЕтАНреЕрдЬ рдЕ рд╕рд░реНрд╡реНрд╣рд┐рд╕ (FaaS) рдЕрд╕реЗрд╣реА рд╕рдВрдмреЛрдзрд▓реЗ рдЬрд╛рддреЗ рдХрд╛рд░рдг рдкреНрд░рддреНрдпреЗрдХ рдЗрд╡реНрд╣реЗрдВрдЯ рдЯреНрд░рд┐рдЧрд░ рдХреЛрдбрдордзреНрдпреЗ рдлрдВрдХреНрд╢рди рдореНрд╣рдгреВрди рдЕрдВрдорд▓рд╛рдд рдЖрдгрд▓рд╛ рдЬрд╛рддреЛ.

рдирд╛рд╡ рдЕрд╕реВрдирд╣реА, рд╕рд░реНрд╡реНрд╣рд░рд▓реЗрд╕ рдкреНрд░рддреНрдпрдХреНрд╖рд╛рдд рд╕рд░реНрд╡реНрд╣рд░реНрд╕ рд╡рд╛рдкрд░рддреЗ. рд╣реЗ рдирд╛рд╡ рдЕрд╕реЗ рдЖрд╣реЗ рдХрд╛рд░рдг рддреБрдореНрд╣реА рдПрдХ рд╡рд┐рдХрд╕рдХ рдореНрд╣рдгреВрди рдЖрдкрд▓рд╛ рдХреЛрдб рдЪрд╛рд▓рд╡рдгреНрдпрд╛рд╕рд╛рдареА рдЖрд╡рд╢реНрдпрдХ рдЕрд╕рд▓реЗрд▓реНрдпрд╛ рд╕рд░реНрд╡реНрд╣рд░реНрд╕рдмрджреНрджрд▓ рдХрд╛рд│рдЬреА рдХрд░рдд рдирд╛рд╣реА, рддреБрдореНрд╣рд╛рд▓рд╛ рдлрдХреНрдд рдПрд╡рдвреЗрдЪ рдорд╣рддреНрддреНрд╡рд╛рдЪреЗ рдЖрд╣реЗ рдХреА рдЖрдкрд▓рд╛ рдХреЛрдб рдПрдЦрд╛рджреНрдпрд╛ рдШрдЯрдиреЗрд▓рд╛ рдкреНрд░рддрд┐рд╕рд╛рдж рдореНрд╣рдгреВрди рдЪрд╛рд▓рддреЛ. рдХреНрд▓рд╛рдЙрдб рдкреНрд░рджрд╛рддреНрдпрд╛рдХрдбреЗ рд╕рд░реНрд╡реНрд╣рд░рд▓реЗрд╕ *рд░рдирдЯрд╛рдЗрдо* рдЕрд╕рддреЗ рдЬреЗ рд╕рд░реНрд╡реНрд╣рд░реНрд╕, рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ, рд╕реНрдЯреЛрд░реЗрдЬ, CPU, рдореЗрдорд░реА рдЖрдгрд┐ рдЖрдкрд▓рд╛ рдХреЛрдб рдЪрд╛рд▓рд╡рдгреНрдпрд╛рд╕рд╛рдареА рдЖрд╡рд╢реНрдпрдХ рдЕрд╕рд▓реЗрд▓реНрдпрд╛ рдЗрддрд░ рд╕рд░реНрд╡ рдЧреЛрд╖реНрдЯреАрдВрдЪреЗ рд╡реНрдпрд╡рд╕реНрдерд╛рдкрди рдХрд░рддреЗ. рдпрд╛ рдореЙрдбреЗрд▓рдЪрд╛ рдЕрд░реНрде рдЕрд╕рд╛ рдЖрд╣реЗ рдХреА рддреБрдореНрд╣реА рд╕реЗрд╡рд╛ рд╡рд╛рдкрд░рдгреНрдпрд╛рд╕рд╛рдареА рдкреНрд░рддрд┐ рд╕рд░реНрд╡реНрд╣рд░ рдкреИрд╕реЗ рджреЗрдК рд╢рдХрдд рдирд╛рд╣реА, рдХрд╛рд░рдг рддреЗрдереЗ рдХреЛрдгрддрд╛рд╣реА рд╕рд░реНрд╡реНрд╣рд░ рдирд╛рд╣реА. рддреНрдпрд╛рдРрд╡рдЬреА рддреБрдореНрд╣реА рддреБрдордЪрд╛ рдХреЛрдб рдЪрд╛рд▓рдд рдЕрд╕рд▓реЗрд▓реНрдпрд╛ рд╡реЗрд│реЗрд╕рд╛рдареА рдЖрдгрд┐ рд╡рд╛рдкрд░рд▓реЗрд▓реНрдпрд╛ рдореЗрдорд░реАрдЪреНрдпрд╛ рдкреНрд░рдорд╛рдгрд╛рд╕рд╛рдареА рдкреИрд╕реЗ рджреЗрддрд╛.

> ЁЯТ░ рд╕рд░реНрд╡реНрд╣рд░рд▓реЗрд╕ рд╣рд╛ рдХреНрд▓рд╛рдЙрдбрдордзреНрдпреЗ рдХреЛрдб рдЪрд╛рд▓рд╡рдгреНрдпрд╛рдЪрд╛ рд╕рд░реНрд╡рд╛рдд рд╕реНрд╡рд╕реНрдд рдорд╛рд░реНрдЧ рдЖрд╣реЗ. рдЙрджрд╛рд╣рд░рдгрд╛рд░реНрде, рд▓реЗрдЦрдирд╛рдЪреНрдпрд╛ рд╡реЗрд│реА, рдПрдХ рдХреНрд▓рд╛рдЙрдб рдкреНрд░рджрд╛рддрд╛ рдЖрдкрд▓реЗ рд╕рд░реНрд╡ рд╕рд░реНрд╡реНрд╣рд░рд▓реЗрд╕ рдлрдВрдХреНрд╢рдиреНрд╕ рдПрдХрддреНрд░рд┐рддрдкрдгреЗ рдорд╣рд┐рдиреНрдпрд╛рдд 1,000,000 рд╡реЗрд│рд╛ рдЪрд╛рд▓рд╡реВ рджреЗрддреЛ, рддреНрдпрд╛рдирдВрддрд░ рддреЗ US$0.20 рдкреНрд░рддрд┐ 1,000,000 рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрдирд╛рд╕рд╛рдареА рд╢реБрд▓реНрдХ рдЖрдХрд╛рд░рддрд╛рдд. рдЬреЗрд╡реНрд╣рд╛ рдЖрдкрд▓рд╛ рдХреЛрдб рдЪрд╛рд▓рдд рдирд╛рд╣реА, рддреЗрд╡реНрд╣рд╛ рддреБрдореНрд╣реА рдкреИрд╕реЗ рджреЗрдд рдирд╛рд╣реА.

IoT рд╡рд┐рдХрд╕рдХ рдореНрд╣рдгреВрди, рд╕рд░реНрд╡реНрд╣рд░рд▓реЗрд╕ рдореЙрдбреЗрд▓ рдЖрджрд░реНрд╢ рдЖрд╣реЗ. рддреБрдореНрд╣реА рдПрдХ рдлрдВрдХреНрд╢рди рд▓рд┐рд╣реВ рд╢рдХрддрд╛ рдЬреЗ рдХреНрд▓рд╛рдЙрдб-рд╣реЛрд╕реНрдЯ рдХреЗрд▓реЗрд▓реНрдпрд╛ IoT рд╕реЗрд╡реЗрд╢реА рдЬреЛрдбрд▓реЗрд▓реНрдпрд╛ рдХреЛрдгрддреНрдпрд╛рд╣реА IoT рдбрд┐рд╡реНрд╣рд╛рдЗрд╕рджреНрд╡рд╛рд░реЗ рдкрд╛рдард╡рд▓реЗрд▓реНрдпрд╛ рд╕рдВрджреЗрд╢рд╛рдВрдирд╛ рдкреНрд░рддрд┐рд╕рд╛рдж рдореНрд╣рдгреВрди рдХреЙрд▓ рдХреЗрд▓реЗ рдЬрд╛рддреЗ. рдЖрдкрд▓рд╛ рдХреЛрдб рдкрд╛рдард╡рд▓реЗрд▓реЗ рд╕рд░реНрд╡ рд╕рдВрджреЗрд╢ рд╣рд╛рддрд╛рд│реЗрд▓, рдкрд░рдВрддреБ рдлрдХреНрдд рдЖрд╡рд╢реНрдпрдХ рддреЗрд╡реНрд╣рд╛ рдЪрд╛рд▓реВ рдЕрд╕реЗрд▓.

тЬЕ рддреБрдореНрд╣реА MQTT рд╡рд░ рд╕рдВрджреЗрд╢ рдРрдХрдгреНрдпрд╛рд╕рд╛рдареА рд╕рд░реНрд╡реНрд╣рд░ рдХреЛрдб рдореНрд╣рдгреВрди рд▓рд┐рд╣рд┐рд▓реЗрд▓рд╛ рдХреЛрдб рдкреБрдиреНрд╣рд╛ рдкрд╣рд╛. рд╣реЗ рд╕рд░реНрд╡реНрд╣рд░рд▓реЗрд╕ рд╡рд╛рдкрд░реВрди рдХреНрд▓рд╛рдЙрдбрдордзреНрдпреЗ рдХрд╕реЗ рдЪрд╛рд▓реЗрд▓? рд╕рд░реНрд╡реНрд╣рд░рд▓реЗрд╕ рд╕рдВрдЧрдгрдирд╛рд╕рд╛рдареА рд╕рдорд░реНрдерди рджреЗрдгреНрдпрд╛рд╕рд╛рдареА рдХреЛрдб рдХрд╕рд╛ рдмрджрд▓рд▓рд╛ рдЬрд╛рдК рд╢рдХрддреЛ рдЕрд╕реЗ рддреБрдореНрд╣рд╛рд▓рд╛ рд╡рд╛рдЯрддреЗ?

> ЁЯТБ рд╕рд░реНрд╡реНрд╣рд░рд▓реЗрд╕ рдореЙрдбреЗрд▓ рдХреЛрдб рдЪрд╛рд▓рд╡рдгреНрдпрд╛рд╡реНрдпрддрд┐рд░рд┐рдХреНрдд рдЗрддрд░ рдХреНрд▓рд╛рдЙрдб рд╕реЗрд╡рд╛рдВрдордзреНрдпреЗ рд╣рд▓рдд рдЖрд╣реЗ. рдЙрджрд╛рд╣рд░рдгрд╛рд░реНрде, рдХреНрд▓рд╛рдЙрдбрдордзреНрдпреЗ рд╕рд░реНрд╡реНрд╣рд░рд▓реЗрд╕ рдбреЗрдЯрд╛рдмреЗрд╕ рдЙрдкрд▓рдмреНрдз рдЖрд╣реЗрдд рдЬреЗ рд╕рд░реНрд╡реНрд╣рд░рд▓реЗрд╕ рдХрд┐рдВрдорддреАрдЪреНрдпрд╛ рдореЙрдбреЗрд▓рдЪрд╛ рд╡рд╛рдкрд░ рдХрд░рддрд╛рдд рдЬрд┐рдереЗ рддреБрдореНрд╣реА рдбреЗрдЯрд╛рдмреЗрд╕рд╡рд░ рдХреЗрд▓реЗрд▓реНрдпрд╛ рдкреНрд░рддреНрдпреЗрдХ рд╡рд┐рдирдВрддреАрд╕рд╛рдареА рдкреИрд╕реЗ рджреЗрддрд╛, рдЬрд╕реЗ рдХреА рдХреНрд╡реЗрд░реА рдХрд┐рдВрд╡рд╛ рдЗрдиреНрд╕рд░реНрдЯ, рд╕рд╣рд╕рд╛ рд╡рд┐рдирдВрддреА рдкреВрд░реНрдг рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдХрд┐рддреА рдХрд╛рдо рдХреЗрд▓реЗ рдЬрд╛рддреЗ рдпрд╛рд╡рд░ рдЖрдзрд╛рд░рд┐рдд рдХрд┐рдВрдорддреАрдЪрд╛ рд╡рд╛рдкрд░ рдХрд░реВрди. рдЙрджрд╛рд╣рд░рдгрд╛рд░реНрде, рдкреНрд░рд╛рдердорд┐рдХ рдХреАрд╡рд░ рдПрдХрд╛ рдкрдВрдХреНрддреАрдЪреА рдирд┐рд╡рдб рдПрдХрд╛ рдкрдВрдХреНрддреАрдЪреНрдпрд╛ рддреБрд▓рдиреЗрдд рдХрдореА рдЦрд░реНрдЪрд┐рдХ рдЕрд╕реЗрд▓ рдЬреНрдпрд╛рдордзреНрдпреЗ рдЕрдиреЗрдХ рдЯреЗрдмрд▓реНрд╕ рдЬреЛрдбрдгреЗ рдЖрдгрд┐ рд╣рдЬрд╛рд░реЛ рдкрдВрдХреНрддреА рдкрд░рдд рдХрд░рдгреЗ рд╕рдорд╛рд╡рд┐рд╖реНрдЯ рдЖрд╣реЗ.

## рд╕рд░реНрд╡реНрд╣рд░рд▓реЗрд╕ рдЕрдиреБрдкреНрд░рдпреЛрдЧ рддрдпрд╛рд░ рдХрд░рд╛

Microsoft рдХрдбреВрди рд╕рд░реНрд╡реНрд╣рд░рд▓реЗрд╕ рд╕рдВрдЧрдгрди рд╕реЗрд╡рд╛ Azure Functions рдореНрд╣рдгреВрди рдУрд│рдЦрд▓реА рдЬрд╛рддреЗ.

![Azure Functions рд▓реЛрдЧреЛ](../../../../../translated_images/azure-functions-logo.1cfc8e3204c9c44aaf80fcf406fc8544d80d7f00f8d3e8ed6fed764563e17564.mr.png)

рдЦрд╛рд▓реАрд▓ рд▓рдШреБ рд╡реНрд╣рд┐рдбрд┐рдУрдордзреНрдпреЗ Azure Functions рдЪреЗ рдЖрдврд╛рд╡рд╛ рджрд┐рд▓рд╛ рдЖрд╣реЗ.

[![Azure Functions рдЖрдврд╛рд╡рд╛ рд╡реНрд╣рд┐рдбрд┐рдУ](https://img.youtube.com/vi/8-jz5f_JyEQ/0.jpg)](https://www.youtube.com/watch?v=8-jz5f_JyEQ)

> ЁЯОе рд╡рд░рдЪреНрдпрд╛ рдкреНрд░рддрд┐рдореЗрд╡рд░ рдХреНрд▓рд┐рдХ рдХрд░реВрди рд╡реНрд╣рд┐рдбрд┐рдУ рдкрд╣рд╛.

тЬЕ рдереЛрдбрд╛ рд╡реЗрд│ рдШреНрдпрд╛ рдЖрдгрд┐ Azure Functions рдЪреНрдпрд╛ [Microsoft Azure Functions рджрд╕реНрддрдРрд╡рдЬ](https://docs.microsoft.com/azure/azure-functions/functions-overview?WT.mc_id=academic-17441-jabenn) рдордзреНрдпреЗ рдЖрдврд╛рд╡рд╛ рд╡рд╛рдЪрд╛.

Azure Functions рд▓рд┐рд╣рд┐рдгреНрдпрд╛рд╕рд╛рдареА, рддреБрдореНрд╣реА рддреБрдордЪреНрдпрд╛ рдкрд╕рдВрддреАрдЪреНрдпрд╛ рднрд╛рд╖реЗрдд Azure Functions рдЕтАНреЕрдкрд╕рд╣ рд╕реБрд░реБрд╡рд╛рдд рдХрд░рддрд╛. Azure Functions Python, JavaScript, TypeScript, C#, F#, Java, рдЖрдгрд┐ Powershell рд▓рд╛ рд╕рдорд░реНрдерди рджреЗрддреЗ. рдпрд╛ рдзрдбреНрдпрд╛рдд рддреБрдореНрд╣реА Python рдордзреНрдпреЗ Azure Functions рдЕтАНреЕрдк рдХрд╕реЗ рд▓рд┐рд╣рд╛рдпрдЪреЗ рддреЗ рд╢рд┐рдХрд╛рд▓.

> ЁЯТБ Azure Functions рдХрд╕реНрдЯрдо рд╣рдБрдбрд▓рд░реНрд╕рд▓рд╛ рджреЗрдЦреАрд▓ рд╕рдорд░реНрдерди рджреЗрддреЗ рддреНрдпрд╛рдореБрд│реЗ рддреБрдореНрд╣реА HTTP рд╡рд┐рдирдВрддреНрдпрд╛рдВрдирд╛ рд╕рдорд░реНрдерди рджреЗрдгрд╛рд▒реНрдпрд╛ рдХреЛрдгрддреНрдпрд╛рд╣реА рднрд╛рд╖реЗрдд рддреБрдордЪреЗ рдлрдВрдХреНрд╢рдиреНрд╕ рд▓рд┐рд╣реВ рд╢рдХрддрд╛, рдЬреНрдпрд╛рдордзреНрдпреЗ COBOL рд╕рд╛рд░рдЦреНрдпрд╛ рдЬреБрдиреНрдпрд╛ рднрд╛рд╖рд╛рдВрдЪрд╛ рд╕рдорд╛рд╡реЗрд╢ рдЖрд╣реЗ.

Functions рдЕтАНреЕрдкреНрд╕рдордзреНрдпреЗ рдПрдХ рдХрд┐рдВрд╡рд╛ рдЕрдзрд┐рдХ *рдЯреНрд░рд┐рдЧрд░реНрд╕* рдЕрд╕рддрд╛рдд - рдШрдЯрдирд╛ рдкреНрд░рддрд┐рд╕рд╛рдж рджреЗрдгрд╛рд░реЗ рдлрдВрдХреНрд╢рдиреНрд╕. рддреБрдореНрд╣реА рдПрдХрд╛ Functions рдЕтАНреЕрдкрдордзреНрдпреЗ рдЕрдиреЗрдХ рдЯреНрд░рд┐рдЧрд░реНрд╕ рдЕрд╕реВ рд╢рдХрддрд╛, рдЬреЗ рд╕рд░реНрд╡ рд╕рд╛рдорд╛рдиреНрдп рдХреЙрдиреНрдлрд┐рдЧрд░реЗрд╢рди рд╕рд╛рдорд╛рдпрд┐рдХ рдХрд░рддрд╛рдд. рдЙрджрд╛рд╣рд░рдгрд╛рд░реНрде, рддреБрдордЪреНрдпрд╛ Functions рдЕтАНреЕрдкрд╕рд╛рдареА рдХреЙрдиреНрдлрд┐рдЧрд░реЗрд╢рди рдлрд╛рдЗрд▓рдордзреНрдпреЗ рддреБрдордЪреНрдпрд╛ IoT Hub рдЪреЗ рдХрдиреЗрдХреНрд╢рди рддрдкрд╢реАрд▓ рдЕрд╕реВ рд╢рдХрддрд╛рдд рдЖрдгрд┐ рдЕтАНреЕрдкрдордзреАрд▓ рд╕рд░реНрд╡ рдлрдВрдХреНрд╢рдиреНрд╕ рд╣реЗ рдХрдиреЗрдХреНрдЯ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдЖрдгрд┐ рдШрдЯрдирд╛рдВрд╕рд╛рдареА рдРрдХрдгреНрдпрд╛рд╕рд╛рдареА рд╡рд╛рдкрд░реВ рд╢рдХрддрд╛рдд.

### рдХрд╛рд░реНрдп - Azure Functions рдЯреВрд▓рд┐рдВрдЧ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рд╛

> рд▓реЗрдЦрдирд╛рдЪреНрдпрд╛ рд╡реЗрд│реА, Azure Functions рдХреЛрдб рдЯреВрд▓реНрд╕ Python рдкреНрд░рдХрд▓реНрдкрд╛рдВрд╕рд╣ Apple Silicon рд╡рд░ рдкреВрд░реНрдгрдкрдгреЗ рдХрд╛рд░реНрдпрд░рдд рдирд╛рд╣реАрдд. рддреБрдореНрд╣рд╛рд▓рд╛ Intel-рдЖрдзрд╛рд░рд┐рдд Mac, Windows PC, рдХрд┐рдВрд╡рд╛ Linux PC рд╡рд╛рдкрд░рд╛рд╡рд╛ рд▓рд╛рдЧреЗрд▓.

Azure Functions рдЪреЗ рдПрдХ рдЙрддреНрддрдо рд╡реИрд╢рд┐рд╖реНрдЯреНрдп рдореНрд╣рдгрдЬреЗ рддреБрдореНрд╣реА рддреЗ рд╕реНрдерд╛рдирд┐рдХ рдкрд╛рддрд│реАрд╡рд░ рдЪрд╛рд▓рд╡реВ рд╢рдХрддрд╛. рдХреНрд▓рд╛рдЙрдбрдордзреНрдпреЗ рд╡рд╛рдкрд░рд▓реЗрд▓рд╛ рддреЛрдЪ рд░рдирдЯрд╛рдЗрдо рддреБрдордЪреНрдпрд╛ рд╕рдВрдЧрдгрдХрд╛рд╡рд░ рдЪрд╛рд▓рд╡рддрд╛ рдпреЗрддреЛ, рдЬреНрдпрд╛рдореБрд│реЗ рддреБрдореНрд╣реА IoT рд╕рдВрджреЗрд╢рд╛рдВрдирд╛ рдкреНрд░рддрд┐рд╕рд╛рдж рджреЗрдгрд╛рд░рд╛ рдХреЛрдб рд▓рд┐рд╣реВ рд╢рдХрддрд╛ рдЖрдгрд┐ рддреЛ рд╕реНрдерд╛рдирд┐рдХ рдкрд╛рддрд│реАрд╡рд░ рдЪрд╛рд▓рд╡реВ рд╢рдХрддрд╛. рддреБрдореНрд╣реА рдШрдЯрдирд╛ рд╣рд╛рддрд╛рд│рддрд╛рдирд╛ рддреБрдордЪрд╛ рдХреЛрдб рдбреАрдмрдЧ рджреЗрдЦреАрд▓ рдХрд░реВ рд╢рдХрддрд╛. рдПрдХрджрд╛ рддреБрдореНрд╣реА рддреБрдордЪреНрдпрд╛ рдХреЛрдбрд╡рд░ рд╕рдорд╛рдзрд╛рдиреА рдЭрд╛рд▓реНрдпрд╛рд╡рд░, рддреЛ рдХреНрд▓рд╛рдЙрдбрдордзреНрдпреЗ рддреИрдирд╛рдд рдХреЗрд▓рд╛ рдЬрд╛рдК рд╢рдХрддреЛ.

Azure Functions рдЯреВрд▓рд┐рдВрдЧ CLI рдореНрд╣рдгреВрди рдЙрдкрд▓рдмреНрдз рдЖрд╣реЗ, рдЬреНрдпрд╛рд▓рд╛ Azure Functions Core Tools рдореНрд╣рдгрддрд╛рдд.

1. Azure Functions Core Tools рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА [Azure Functions Core Tools рджрд╕реНрддрдРрд╡рдЬ](https://docs.microsoft.com/azure/azure-functions/functions-run-local?WT.mc_id=academic-17441-jabenn) рдордзреАрд▓ рд╕реВрдЪрдирд╛рдВрдЪреЗ рдЕрдиреБрд╕рд░рдг рдХрд░рд╛.

1. VS Code рд╕рд╛рдареА Azure Functions рд╡рд┐рд╕реНрддрд╛рд░ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рд╛. рд╣рд╛ рд╡рд┐рд╕реНрддрд╛рд░ Azure Functions рддрдпрд╛рд░ рдХрд░рдгреЗ, рдбреАрдмрдЧ рдХрд░рдгреЗ рдЖрдгрд┐ рддреИрдирд╛рдд рдХрд░рдгреЗ рдпрд╛рд╕рд╛рдареА рд╕рдорд░реНрдерди рдкреНрд░рджрд╛рди рдХрд░рддреЛ. VS Code рдордзреНрдпреЗ рд╣рд╛ рд╡рд┐рд╕реНрддрд╛рд░ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдгреНрдпрд╛рдЪреНрдпрд╛ рд╕реВрдЪрдирд╛рдВрд╕рд╛рдареА [Azure Functions рд╡рд┐рд╕реНрддрд╛рд░ рджрд╕реНрддрдРрд╡рдЬ](https://marketplace.visualstudio.com/items?WT.mc_id=academic-17441-jabenn&itemName=ms-azuretools.vscode-azurefunctions) рдкрд╣рд╛.

рдЬреЗрд╡реНрд╣рд╛ рддреБрдореНрд╣реА рддреБрдордЪреЗ Azure Functions рдЕтАНреЕрдк рдХреНрд▓рд╛рдЙрдбрдордзреНрдпреЗ рддреИрдирд╛рдд рдХрд░рддрд╛, рддреЗрд╡реНрд╣рд╛ рддреНрдпрд╛рд▓рд╛ рдЕрдиреБрдкреНрд░рдпреЛрдЧ рдлрд╛рдЗрд▓реНрд╕ рдЖрдгрд┐ рд▓реЙрдЧ рдлрд╛рдЗрд▓реНрд╕рд╕рд╛рд░рдЦреНрдпрд╛ рдЧреЛрд╖реНрдЯреА рд╕рдВрдЧреНрд░рд╣рд┐рдд рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдереЛрдбреА рдХреНрд▓рд╛рдЙрдб рд╕реНрдЯреЛрд░реЗрдЬ рд╡рд╛рдкрд░рдгреНрдпрд╛рдЪреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдЕрд╕рддреЗ. рдЬреЗрд╡реНрд╣рд╛ рддреБрдореНрд╣реА рддреБрдордЪреЗ Functions рдЕтАНреЕрдк рд╕реНрдерд╛рдирд┐рдХ рдкрд╛рддрд│реАрд╡рд░ рдЪрд╛рд▓рд╡рддрд╛, рддреЗрд╡реНрд╣рд╛ рддреБрдореНрд╣рд╛рд▓рд╛ рдХреНрд▓рд╛рдЙрдб рд╕реНрдЯреЛрд░реЗрдЬрд╢реА рдХрдиреЗрдХреНрдЯ рдХрд░рдгреЗ рдЖрд╡рд╢реНрдпрдХ рдЖрд╣реЗ, рдкрд░рдВрддреБ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдХреНрд▓рд╛рдЙрдб рд╕реНрдЯреЛрд░реЗрдЬ рд╡рд╛рдкрд░рдгреНрдпрд╛рдРрд╡рдЬреА, рддреБрдореНрд╣реА [Azurite](https://github.com/Azure/Azurite) рдирд╛рд╡рд╛рдЪрд╛ рд╕реНрдЯреЛрд░реЗрдЬ рдПрдореНрдпреБрд▓реЗрдЯрд░ рд╡рд╛рдкрд░реВ рд╢рдХрддрд╛. рд╣реЗ рд╕реНрдерд╛рдирд┐рдХ рдкрд╛рддрд│реАрд╡рд░ рдЪрд╛рд▓рддреЗ рдкрд░рдВрддреБ рдХреНрд▓рд╛рдЙрдб рд╕реНрдЯреЛрд░реЗрдЬрд╕рд╛рд░рдЦреЗ рдХрд╛рд░реНрдп рдХрд░рддреЗ.

> ЁЯОУ Azure рдордзреНрдпреЗ, Azure Functions рд╡рд╛рдкрд░рдд рдЕрд╕рд▓реЗрд▓реЗ рд╕реНрдЯреЛрд░реЗрдЬ рд╣реЗ Azure Storage Account рдЖрд╣реЗ. рдпрд╛ рдЦрд╛рддреНрдпрд╛рдВрдордзреНрдпреЗ рдлрд╛рдЗрд▓реНрд╕, рдмреНрд▓реЙрдмреНрд╕, рдЯреЗрдмрд▓реНрд╕рдордзреАрд▓ рдбреЗрдЯрд╛ рдХрд┐рдВрд╡рд╛ рд░рд╛рдВрдЧреЗрддреАрд▓ рдбреЗрдЯрд╛ рд╕рдВрдЧреНрд░рд╣рд┐рдд рдХреЗрд▓рд╛ рдЬрд╛рдК рд╢рдХрддреЛ. рддреБрдореНрд╣реА рдЕрдиреЗрдХ рдЕтАНреЕрдкреНрд╕рдордзреНрдпреЗ рдПрдХ рд╕реНрдЯреЛрд░реЗрдЬ рдЦрд╛рддреЗ рд╕рд╛рдорд╛рдпрд┐рдХ рдХрд░реВ рд╢рдХрддрд╛, рдЬрд╕реЗ рдХреА Functions рдЕтАНреЕрдк рдЖрдгрд┐ рд╡реЗрдм рдЕтАНреЕрдк.

1. Azurite рд╣реЗ Node.js рдЕтАНреЕрдк рдЖрд╣реЗ, рддреНрдпрд╛рдореБрд│реЗ рддреБрдореНрд╣рд╛рд▓рд╛ Node.js рд╕реНрдерд╛рдкрд┐рдд рдХрд░рд╛рд╡реЗ рд▓рд╛рдЧреЗрд▓. рддреБрдореНрд╣реА [Node.js рд╡реЗрдмрд╕рд╛рдЗрдЯ](https://nodejs.org/) рд╡рд░ рдбрд╛рдЙрдирд▓реЛрдб рдЖрдгрд┐ рд╕реНрдерд╛рдкрдирд╛ рд╕реВрдЪрдирд╛рдВрдЪрд╛ рд╢реЛрдз рдШреЗрдК рд╢рдХрддрд╛. рдЬрд░ рддреБрдореНрд╣реА Mac рд╡рд╛рдкрд░рдд рдЕрд╕рд╛рд▓, рддрд░ рддреБрдореНрд╣реА рддреЗ [Homebrew](https://formulae.brew.sh/formula/node) рд╡рд░реВрди рджреЗрдЦреАрд▓ рд╕реНрдерд╛рдкрд┐рдд рдХрд░реВ рд╢рдХрддрд╛.

1. рдЦрд╛рд▓реАрд▓ рдЖрджреЗрд╢ рд╡рд╛рдкрд░реВрди Azurite рд╕реНрдерд╛рдкрд┐рдд рдХрд░рд╛ (`npm` рд╣реЗ Node.js рд╕реНрдерд╛рдкрд┐рдд рдХрд░рддрд╛рдирд╛ рд╕реНрдерд╛рдкрд┐рдд рд╣реЛрдгрд╛рд░реЗ рдПрдХ рд╕рд╛рдзрди рдЖрд╣реЗ):

    ```sh
    npm install -g azurite
    ```

1. Azurite рд╕рд╛рдареА рдбреЗрдЯрд╛ рд╕рдВрдЧреНрд░рд╣рд┐рдд рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА `azurite` рдирд╛рд╡рд╛рдЪрд╛ рдлреЛрд▓реНрдбрд░ рддрдпрд╛рд░ рдХрд░рд╛:

    ```sh
    mkdir azurite
    ```

1. Azurite рдЪрд╛рд▓рд╡рд╛, рдпрд╛ рдирд╡реАрди рдлреЛрд▓реНрдбрд░рд▓рд╛ рдкрд╛рд╕ рдХрд░рдд:

    ```sh
    azurite --location azurite
    ```

    Azurite рд╕реНрдЯреЛрд░реЗрдЬ рдПрдореНрдпреБрд▓реЗрдЯрд░ рд▓реЙрдиреНрдЪ рд╣реЛрдИрд▓ рдЖрдгрд┐ рд╕реНрдерд╛рдирд┐рдХ Functions рд░рдирдЯрд╛рдЗрдо рдХрдиреЗрдХреНрдЯ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рддрдпрд╛рд░ рдЕрд╕реЗрд▓.

    ```output
    тЮЬ  ~ azurite --location azurite  
    Azurite Blob service is starting at http://127.0.0.1:10000
    Azurite Blob service is successfully listening at http://127.0.0.1:10000
    Azurite Queue service is starting at http://127.0.0.1:10001
    Azurite Queue service is successfully listening at http://127.0.0.1:10001
    Azurite Table service is starting at http://127.0.0.1:10002
    Azurite Table service is successfully listening at http://127.0.0.1:10002
    ```

### рдХрд╛рд░реНрдп - Azure Functions рдкреНрд░рдХрд▓реНрдк рддрдпрд╛рд░ рдХрд░рд╛

Azure Functions CLI рдирд╡реАрди Functions рдЕтАНреЕрдк рддрдпрд╛рд░ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рд╡рд╛рдкрд░рд▓реЗ рдЬрд╛рдК рд╢рдХрддреЗ.

1. рддреБрдордЪреНрдпрд╛ Functions рдЕтАНреЕрдкрд╕рд╛рдареА рдПрдХ рдлреЛрд▓реНрдбрд░ рддрдпрд╛рд░ рдХрд░рд╛ рдЖрдгрд┐ рддреНрдпрд╛рдд рдЬрд╛. рддреНрдпрд╛рд▓рд╛ `soil-moisture-trigger` рдЕрд╕реЗ рдирд╛рд╡ рджреНрдпрд╛.

    ```sh
    mkdir soil-moisture-trigger
    cd soil-moisture-trigger
    ```

1. рдпрд╛ рдлреЛрд▓реНрдбрд░рдордзреНрдпреЗ Python рд╡реНрд╣рд░реНрдЪреНрдпреБрдЕрд▓ рдПрдиреНрд╡реНрд╣рд╛рдпрд░реНрдирдореЗрдВрдЯ рддрдпрд╛рд░ рдХрд░рд╛:

    ```sh
    python3 -m venv .venv
    ```

1. рд╡реНрд╣рд░реНрдЪреНрдпреБрдЕрд▓ рдПрдиреНрд╡реНрд╣рд╛рдпрд░реНрдирдореЗрдВрдЯ рд╕рдХреНрд░рд┐рдп рдХрд░рд╛:

    * Windows рд╡рд░:
        * рдЬрд░ рддреБрдореНрд╣реА Command Prompt рдХрд┐рдВрд╡рд╛ Windows Terminal рдордзреВрди Command Prompt рд╡рд╛рдкрд░рдд рдЕрд╕рд╛рд▓, рддрд░ рдЪрд╛рд▓рд╡рд╛:

            ```cmd
            .venv\Scripts\activate.bat
            ```

        * рдЬрд░ рддреБрдореНрд╣реА PowerShell рд╡рд╛рдкрд░рдд рдЕрд╕рд╛рд▓, рддрд░ рдЪрд╛рд▓рд╡рд╛:

            ```powershell
            .\.venv\Scripts\Activate.ps1
            ```

    * macOS рдХрд┐рдВрд╡рд╛ Linux рд╡рд░, рдЪрд╛рд▓рд╡рд╛:

        ```cmd
        source ./.venv/bin/activate
        ```

    > ЁЯТБ рд╣реЗ рдЖрджреЗрд╢ рддреБрдореНрд╣реА рд╡реНрд╣рд░реНрдЪреНрдпреБрдЕрд▓ рдПрдиреНрд╡реНрд╣рд╛рдпрд░реНрдирдореЗрдВрдЯ рддрдпрд╛рд░ рдХреЗрд▓реЗрд▓реНрдпрд╛ рдард┐рдХрд╛рдгрд╛рд╣реВрди рдЪрд╛рд▓рд╡рд▓реЗ рдкрд╛рд╣рд┐рдЬреЗрдд. рддреБрдореНрд╣рд╛рд▓рд╛ `.venv` рдлреЛрд▓реНрдбрд░рдордзреНрдпреЗ рдХрдзреАрд╣реА рдЬрд╛рд╡реЗ рд▓рд╛рдЧрдгрд╛рд░ рдирд╛рд╣реА, рддреБрдореНрд╣реА рдиреЗрд╣рдореА рд╕рдХреНрд░рд┐рдп рдЖрджреЗрд╢ рдЖрдгрд┐ рдкреЕрдХреЗрдЬреЗрд╕ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдХрд┐рдВрд╡рд╛ рдХреЛрдб рдЪрд╛рд▓рд╡рдгреНрдпрд╛рд╕рд╛рдареА рдЖрджреЗрд╢ рдЪрд╛рд▓рд╡рд▓реЗ рдкрд╛рд╣рд┐рдЬреЗрдд рддреНрдпрд╛ рдард┐рдХрд╛рдгрд╛рд╣реВрди рдЬреЗрд╡реНрд╣рд╛ рддреБрдореНрд╣реА рд╡реНрд╣рд░реНрдЪреНрдпреБрдЕрд▓ рдПрдиреНрд╡реНрд╣рд╛рдпрд░реНрдирдореЗрдВрдЯ рддрдпрд╛рд░ рдХреЗрд▓реЗ рд╣реЛрддреЗ.

1. рдпрд╛ рдлреЛрд▓реНрдбрд░рдордзреНрдпреЗ Functions рдЕтАНреЕрдк рддрдпрд╛рд░ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдЦрд╛рд▓реАрд▓ рдЖрджреЗрд╢ рдЪрд╛рд▓рд╡рд╛:

    ```sh
    func init --worker-runtime python soil-moisture-trigger
    ```

    рдпрд╛рдореБрд│реЗ рд╡рд░реНрддрдорд╛рди рдлреЛрд▓реНрдбрд░рдордзреНрдпреЗ рддреАрди рдлрд╛рдЗрд▓реНрд╕ рддрдпрд╛рд░ рд╣реЛрддреАрд▓:

    * `host.json` - рд╣реА JSON рджрд╕реНрддрдРрд╡рдЬ рддреБрдордЪреНрдпрд╛ Functions рдЕтАНреЕрдкрд╕рд╛рдареА рд╕реЗрдЯрд┐рдВрдЧреНрдЬ рд╕рдорд╛рд╡рд┐рд╖реНрдЯ рдХрд░рддреЗ. рддреБрдореНрд╣рд╛рд▓рд╛ рдпрд╛ рд╕реЗрдЯрд┐рдВрдЧреНрдЬ рдмрджрд▓рдгреНрдпрд╛рдЪреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╛рд╣реА.
    * `local.settings.json` - рд╣реА JSON рджрд╕реНрддрдРрд╡рдЬ рддреБрдордЪреЗ рдЕтАНреЕрдк рд╕реНрдерд╛рдирд┐рдХ рдкрд╛рддрд│реАрд╡рд░ рдЪрд╛рд▓рд╡рддрд╛рдирд╛ рд╡рд╛рдкрд░рд▓реЗ рдЬрд╛рдгрд╛рд░реЗ рд╕реЗрдЯрд┐рдВрдЧреНрдЬ рд╕рдорд╛рд╡рд┐рд╖реНрдЯ рдХрд░рддреЗ, рдЬрд╕реЗ рдХреА рддреБрдордЪреНрдпрд╛ IoT Hub рд╕рд╛рдареА рдХрдиреЗрдХреНрд╢рди рд╕реНрдЯреНрд░рд┐рдВрдЧреНрдЬ. рд╣реА рд╕реЗрдЯрд┐рдВрдЧреНрдЬ рд╕реНрдерд╛рдирд┐рдХ рдЖрд╣реЗрдд рдЖрдгрд┐ рд╕реНрд░реЛрдд рдХреЛрдб рдирд┐рдпрдВрддреНрд░рдгрд╛рдд рдЬреЛрдбрд▓реНрдпрд╛ рдЬрд╛рдК рдирдпреЗрдд. рдЬреЗрд╡реНрд╣рд╛ рддреБрдореНрд╣реА рдЕтАНреЕрдк рдХреНрд▓рд╛рдЙрдбрдордзреНрдпреЗ рддреИрдирд╛рдд рдХрд░рддрд╛, рддреЗрд╡реНрд╣рд╛ рд╣реА рд╕реЗрдЯрд┐рдВрдЧреНрдЬ рддреИрдирд╛рдд рдХреЗрд▓реНрдпрд╛ рдЬрд╛рдд рдирд╛рд╣реАрдд, рддреНрдпрд╛рдРрд╡рдЬреА рддреБрдордЪреНрдпрд╛ рд╕реЗрдЯрд┐рдВрдЧреНрдЬ рдЕрдиреБрдкреНрд░рдпреЛрдЧ рд╕реЗрдЯрд┐рдВрдЧреНрдЬрдордзреВрди рд▓реЛрдб рдХреЗрд▓реНрдпрд╛ рдЬрд╛рддрд╛рдд. рд╣реЗ рдирдВрддрд░ рдпрд╛ рдзрдбреНрдпрд╛рдд рдХрд╡реНрд╣рд░ рдХреЗрд▓реЗ рдЬрд╛рдИрд▓.
    * `requirements.txt` - рд╣реА [Pip requirements рдлрд╛рдЗрд▓](https://pip.pypa.io/en/stable/user_guide/#requirements-files) рдЖрд╣реЗ рдЬреА рддреБрдордЪреНрдпрд╛ Functions рдЕтАНреЕрдк рдЪрд╛рд▓рд╡рдгреНрдпрд╛рд╕рд╛рдареА рдЖрд╡рд╢реНрдпрдХ Pip рдкреЕрдХреЗрдЬреЗрд╕ рд╕рдорд╛рд╡рд┐рд╖реНрдЯ рдХрд░рддреЗ.

1. `local.settings.json` рдлрд╛рдЗрд▓рдордзреНрдпреЗ Functions рдЕтАНреЕрдк рд╡рд╛рдкрд░рдгрд╛рд▒реНрдпрд╛ рд╕реНрдЯреЛрд░реЗрдЬ рдЕрдХрд╛рдЙрдВрдЯрд╕рд╛рдареА рд╕реЗрдЯрд┐рдВрдЧ рдЖрд╣реЗ. рд╣реЗ рдбреАрдлреЙрд▓реНрдЯ рд╕реЗрдЯрд┐рдВрдЧ рд░рд┐рдХрд╛рдореЗ рдЖрд╣реЗ, рддреНрдпрд╛рдореБрд│реЗ рддреЗ рд╕реЗрдЯ рдХрд░рдгреЗ рдЖрд╡рд╢реНрдпрдХ рдЖрд╣реЗ. Azurite рд╕реНрдерд╛рдирд┐рдХ рд╕реНрдЯреЛрд░реЗрдЬ рдПрдореНрдпреБрд▓реЗрдЯрд░рд╢реА рдХрдиреЗрдХреНрдЯ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА, рд╣реА рдХрд┐рдВрдордд рдЦрд╛рд▓реАрд▓рдкреНрд░рдорд╛рдгреЗ рд╕реЗрдЯ рдХрд░рд╛:

    ```json
    "AzureWebJobsStorage": "UseDevelopmentStorage=true",
    ```

1. рдЖрд╡рд╢реНрдпрдХ Pip рдкреЕрдХреЗрдЬреЗрд╕ `requirements.txt` рдлрд╛рдЗрд▓ рд╡рд╛рдкрд░реВрди рд╕реНрдерд╛рдкрд┐рдд рдХрд░рд╛:

    ```sh
    pip install -r requirements.txt
    ```

    > ЁЯТБ рдЖрд╡рд╢реНрдпрдХ Pip рдкреЕрдХреЗрдЬреЗрд╕ рдпрд╛ рдлрд╛рдЗрд▓рдордзреНрдпреЗ рдЕрд╕рдгреЗ рдЖрд╡рд╢реНрдпрдХ рдЖрд╣реЗ, рдЬреЗрдгреЗрдХрд░реВрди рдЬреЗрд╡реНрд╣рд╛ Functions рдЕтАНреЕрдк рдХреНрд▓рд╛рдЙрдбрдордзреНрдпреЗ рддреИрдирд╛рдд рдХреЗрд▓рд╛ рдЬрд╛рддреЛ, рддреЗрд╡реНрд╣рд╛ рд░рдирдЯрд╛рдЗрдо рдпреЛрдЧреНрдп рдкреЕрдХреЗрдЬреЗрд╕ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рддреЛ рдпрд╛рдЪреА рдЦрд╛рддреНрд░реА рдХрд░реВ рд╢рдХрддреЛ.

1. рд╕рд░реНрд╡ рдХрд╛рд╣реА рдпреЛрдЧреНрдп рдкреНрд░рдХрд╛рд░реЗ рдХрд╛рд░реНрдп рдХрд░рдд рдЖрд╣реЗ рдХреА рдирд╛рд╣реА рд╣реЗ рддрдкрд╛рд╕рдгреНрдпрд╛рд╕рд╛рдареА, рддреБрдореНрд╣реА Functions рд░рдирдЯрд╛рдЗрдо рд╕реБрд░реВ рдХрд░реВ рд╢рдХрддрд╛. рд╣реЗ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдЦрд╛рд▓реАрд▓ рдЖрджреЗрд╢ рдЪрд╛рд▓рд╡рд╛:

    ```sh
    func start
    ```

    рддреБрдореНрд╣рд╛рд▓рд╛ рд░рдирдЯрд╛рдЗрдо рд╕реБрд░реВ рд╣реЛрддрд╛рдирд╛ рджрд┐рд╕реЗрд▓ рдЖрдгрд┐ рддреЗ рдХреЛрдгрддреЗрд╣реА рдЬреЙрдм рдлрдВрдХреНрд╢рдиреНрд╕ (рдЯреНрд░рд┐рдЧрд░реНрд╕) рд╕рд╛рдкрдбрд▓реЗ рдирд╛рд╣реАрдд рдЕрд╕реЗ рд░рд┐рдкреЛрд░реНрдЯ рдХрд░реЗрд▓.

    ```output
    (.venv) тЮЬ  soil-moisture-trigger func start
    Found Python version 3.9.1 (python3).
    
    Azure Functions Core Tools
    Core Tools Version:       3.0.3442 Commit hash: 6bfab24b2743f8421475d996402c398d2fe4a9e0  (64-bit)
    Function Runtime Version: 3.0.15417.0
    
    [2021-05-05T01:24:46.795Z] No job functions found.
    ```
> тЪая╕П рдЬрд░ рддреБрдореНрд╣рд╛рд▓рд╛ рдлрд╛рдпрд░рд╡реЙрд▓ рд╕реВрдЪрдирд╛ рдорд┐рд│рд╛рд▓реА, рддрд░ рдкреНрд░рд╡реЗрд╢ рдордВрдЬреВрд░ рдХрд░рд╛ рдХрд╛рд░рдг `func` рдЕрдиреБрдкреНрд░рдпреЛрдЧрд╛рд▓рд╛ рддреБрдордЪреНрдпрд╛ рдиреЗрдЯрд╡рд░реНрдХрд╡рд░ рд╡рд╛рдЪрди рдЖрдгрд┐ рд▓реЗрдЦрди рдХрд░рдгреНрдпрд╛рдЪреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдЖрд╣реЗ.
> тЪая╕П рдЬрд░ рддреБрдореНрд╣реА macOS рд╡рд╛рдкрд░рдд рдЕрд╕рд╛рд▓, рддрд░ рдЖрдЙрдЯрдкреБрдЯрдордзреНрдпреЗ рдХрд╛рд╣реА рдЪреЗрддрд╛рд╡рдгреА рджрд┐рд╕реВ рд╢рдХрддрд╛рдд:
>
> ```output
    > (.venv) тЮЬ  soil-moisture-trigger func start
    > Found Python version 3.9.1 (python3).
    >
    > Azure Functions Core Tools
    > Core Tools Version:       3.0.3442 Commit hash: 6bfab24b2743f8421475d996402c398d2fe4a9e0  (64-bit)
    > Function Runtime Version: 3.0.15417.0
    >
    > [2021-06-16T08:18:28.315Z] Cannot create directory for shared memory usage: /dev/shm/AzureFunctions
    > [2021-06-16T08:18:28.316Z] System.IO.FileSystem: Access to the path '/dev/shm/AzureFunctions' is denied. Operation not permitted.
    > [2021-06-16T08:18:30.361Z] No job functions found.
    > ```
>
> рдЬрд░ Functions рдЕтАНреЕрдк рдпреЛрдЧреНрдп рдкреНрд░рдХрд╛рд░реЗ рд╕реБрд░реВ рд╣реЛрдд рдЕрд╕реЗрд▓ рдЖрдгрд┐ рдЪрд╛рд▓реВ рдЕрд╕рд▓реЗрд▓реНрдпрд╛ рдлрдВрдХреНрд╢рдиреНрд╕рдЪреА рдпрд╛рджреА рджрд╛рдЦрд╡рдд рдЕрд╕реЗрд▓, рддрд░ рддреБрдореНрд╣реА рдпрд╛ рдЪреЗрддрд╛рд╡рдгреАрдВрдХрдбреЗ рджреБрд░реНрд▓рдХреНрд╖ рдХрд░реВ рд╢рдХрддрд╛. [Microsoft Docs Q&A рд╡рд░рдЪреНрдпрд╛ рдпрд╛ рдкреНрд░рд╢реНрдирд╛рдд](https://docs.microsoft.com/answers/questions/396617/azure-functions-core-tools-error-osx-devshmazurefu.html?WT.mc_id=academic-17441-jabenn) рдирдореВрдж рдХреЗрд▓реНрдпрд╛рдкреНрд░рдорд╛рдгреЗ, рдпрд╛рдХрдбреЗ рджреБрд░реНрд▓рдХреНрд╖ рдХрд░рдгреЗ рдпреЛрдЧреНрдп рдЖрд╣реЗ.

1. `ctrl+c` рджрд╛рдмреВрди Functions рдЕтАНреЕрдк рдерд╛рдВрдмрд╡рд╛.

1. VS Code рдордзреНрдпреЗ рд╕рдзреНрдпрд╛рдЪрд╛ рдлреЛрд▓реНрдбрд░ рдЙрдШрдбрд╛, VS Code рдЙрдШрдбреВрди рд╣рд╛ рдлреЛрд▓реНрдбрд░ рдЙрдШрдбрд╛ рдХрд┐рдВрд╡рд╛ рдЦрд╛рд▓реАрд▓ рдХрдорд╛рдВрдб рдЪрд╛рд▓рд╡рд╛:

    ```sh
    code .
    ```

    VS Code рддреБрдордЪрд╛ Functions рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдУрд│рдЦреЗрд▓ рдЖрдгрд┐ рдПрдХ рд╕реВрдЪрдирд╛ рджрд╛рдЦрд╡реЗрд▓:

    ```output
    Detected an Azure Functions Project in folder "soil-moisture-trigger" that may have been created outside of
    VS Code. Initialize for optimal use with VS Code?
    ```

    ![рд╕реВрдЪрдирд╛](../../../../../translated_images/vscode-azure-functions-init-notification.bd19b49229963edb5311fb3a79445ea469424759d2917ee2f2eb6f92d65d5086.mr.png)

    рдпрд╛ рд╕реВрдЪрдиреЗрддреВрди **Yes** рдирд┐рд╡рдбрд╛.

1. VS Code рдЯрд░реНрдорд┐рдирд▓рдордзреНрдпреЗ Python virtual environment рдЪрд╛рд▓реВ рдЕрд╕рд▓реНрдпрд╛рдЪреА рдЦрд╛рддреНрд░реА рдХрд░рд╛. рдЧрд░рдЬ рдЕрд╕рд▓реНрдпрд╛рд╕ рддреЗ рдерд╛рдВрдмрд╡рд╛ рдЖрдгрд┐ рдкреБрдиреНрд╣рд╛ рд╕реБрд░реВ рдХрд░рд╛.

## IoT Hub рдЗрд╡реНрд╣реЗрдВрдЯ рдЯреНрд░рд┐рдЧрд░ рддрдпрд╛рд░ рдХрд░рд╛

Functions рдЕтАНреЕрдк рд╣реЗ рддреБрдордЪреНрдпрд╛ serverless рдХреЛрдбрдЪреЗ рд╢реЗрд▓ рдЖрд╣реЗ. IoT Hub рдЗрд╡реНрд╣реЗрдВрдЯреНрд╕рд▓рд╛ рдкреНрд░рддрд┐рд╕рд╛рдж рджреЗрдгреНрдпрд╛рд╕рд╛рдареА, рддреБрдореНрд╣реА рдпрд╛ рдЕтАНреЕрдкрдордзреНрдпреЗ IoT Hub рдЯреНрд░рд┐рдЧрд░ рдЬреЛрдбреВ рд╢рдХрддрд╛. рд╣рд╛ рдЯреНрд░рд┐рдЧрд░ IoT Hub рдХрдбреЗ рдкрд╛рдард╡рд▓реЗрд▓реНрдпрд╛ рд╕рдВрджреЗрд╢рд╛рдВрдЪреНрдпрд╛ рдкреНрд░рд╡рд╛рд╣рд╛рд╢реА рдХрдиреЗрдХреНрдЯ рд╣реЛрддреЛ рдЖрдгрд┐ рддреНрдпрд╛рдВрдирд╛ рдкреНрд░рддрд┐рд╕рд╛рдж рджреЗрддреЛ. рд╣рд╛ рд╕рдВрджреЗрд╢ рдкреНрд░рд╡рд╛рд╣ рдорд┐рд│рд╡рдгреНрдпрд╛рд╕рд╛рдареА, рддреБрдордЪреНрдпрд╛ рдЯреНрд░рд┐рдЧрд░рд▓рд╛ IoT Hub рдЪреНрдпрд╛ *event hub compatible endpoint* рд╢реА рдХрдиреЗрдХреНрдЯ рдХрд░рд╛рд╡реЗ рд▓рд╛рдЧреЗрд▓.

IoT Hub рд╣реЗ Azure Event Hubs рдирд╛рд╡рд╛рдЪреНрдпрд╛ рджреБрд╕рд▒реНрдпрд╛ Azure рд╕реЗрд╡реЗрд╕рд╛рдареА рдЖрдзрд╛рд░рд┐рдд рдЖрд╣реЗ. Event Hubs рд╣реА рд╕реЗрд╡рд╛ рд╕рдВрджреЗрд╢ рдкрд╛рдард╡рдгреНрдпрд╛рд╕рд╛рдареА рдЖрдгрд┐ рдкреНрд░рд╛рдкреНрдд рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рд╡рд╛рдкрд░рд▓реА рдЬрд╛рддреЗ, IoT Hub рдпрд╛рдордзреНрдпреЗ IoT devices рд╕рд╛рдареА рдЕрддрд┐рд░рд┐рдХреНрдд рд╡реИрд╢рд┐рд╖реНрдЯреНрдпреЗ рдЬреЛрдбрддреЗ. IoT Hub рдордзреВрди рд╕рдВрджреЗрд╢ рд╡рд╛рдЪрдгреНрдпрд╛рд╕рд╛рдареА рдХрдиреЗрдХреНрдЯ рдХрд░рдгреНрдпрд╛рдЪрд╛ рдорд╛рд░реНрдЧ Event Hubs рд╡рд╛рдкрд░рдд рдЕрд╕рд╛рд▓ рддрд░ рддрд╕рд╛рдЪ рдЖрд╣реЗ.

тЬЕ рд╕рдВрд╢реЛрдзрди рдХрд░рд╛: [Azure Event Hubs рджрд╕реНрддрдРрд╡рдЬ](https://docs.microsoft.com/azure/event-hubs/event-hubs-about?WT.mc_id=academic-17441-jabenn) рдордзреНрдпреЗ Event Hubs рдЪрд╛ рдЖрдврд╛рд╡рд╛ рд╡рд╛рдЪрд╛. рдореВрд▓рднреВрдд рд╡реИрд╢рд┐рд╖реНрдЯреНрдпреЗ IoT Hub рд╢реА рдХрд╢реА рддреБрд▓рдирд╛ рдХрд░рддрд╛рдд?

IoT рдбрд┐рд╡реНрд╣рд╛рдЗрд╕рд▓рд╛ IoT Hub рд╢реА рдХрдиреЗрдХреНрдЯ рд╣реЛрдгреНрдпрд╛рд╕рд╛рдареА рдПрдХ рдЧреБрдкреНрдд рдХреА рд╡рд╛рдкрд░рд╛рд╡реА рд▓рд╛рдЧрддреЗ, рдЬреНрдпрд╛рдореБрд│реЗ рдлрдХреНрдд рдкрд░рд╡рд╛рдирдЧреА рдЕрд╕рд▓реЗрд▓реНрдпрд╛ рдбрд┐рд╡реНрд╣рд╛рдЗрд╕рд▓рд╛ рдХрдиреЗрдХреНрдЯ рдХрд░рддрд╛ рдпреЗрддреЗ. рд╕рдВрджреЗрд╢ рд╡рд╛рдЪрдгреНрдпрд╛рд╕рд╛рдареА рдХрдиреЗрдХреНрдЯ рдХрд░рддрд╛рдирд╛ рджреЗрдЦреАрд▓ рд╣реЗрдЪ рд▓рд╛рдЧреВ рд╣реЛрддреЗ, рддреБрдордЪреНрдпрд╛ рдХреЛрдбрд▓рд╛ рдЧреБрдкреНрдд рдХреА рдЕрд╕рд▓реЗрд▓реА рдХрдиреЗрдХреНрд╢рди рд╕реНрдЯреНрд░рд┐рдВрдЧ рдЖрд╡рд╢реНрдпрдХ рдЖрд╣реЗ, рдЬреНрдпрд╛рдордзреНрдпреЗ IoT Hub рдЪреНрдпрд╛ рддрдкрд╢реАрд▓рд╛рдВрдЪрд╛ рд╕рдорд╛рд╡реЗрд╢ рдЖрд╣реЗ.

> ЁЯТБ рддреБрдореНрд╣рд╛рд▓рд╛ рдорд┐рд│рдгрд╛рд░реА default connection string рдордзреНрдпреЗ **iothubowner** рдкрд░рд╡рд╛рдирдЧреНрдпрд╛ рдЕрд╕рддрд╛рдд, рдЬреНрдпрд╛рдореБрд│реЗ рддреА рд╡рд╛рдкрд░рдгрд╛рд▒реНрдпрд╛ рдХреЛрдгрддреНрдпрд╛рд╣реА рдХреЛрдбрд▓рд╛ IoT Hub рд╡рд░ рдкреВрд░реНрдг рдкрд░рд╡рд╛рдирдЧреНрдпрд╛ рдорд┐рд│рддрд╛рдд. рдЖрджрд░реНрд╢рддрдГ рддреБрдореНрд╣реА рдЖрд╡рд╢реНрдпрдХ рдЕрд╕рд▓реЗрд▓реНрдпрд╛ рдХрд┐рдорд╛рди рдкрд░рд╡рд╛рдирдЧреНрдпрд╛рдВрд╕рд╣ рдХрдиреЗрдХреНрдЯ рдХреЗрд▓реЗ рдкрд╛рд╣рд┐рдЬреЗ. рд╣реЗ рдкреБрдвреАрд▓ рдзрдбреНрдпрд╛рдд рдХрд╡реНрд╣рд░ рдХреЗрд▓реЗ рдЬрд╛рдИрд▓.

рдПрдХрджрд╛ рддреБрдордЪрд╛ рдЯреНрд░рд┐рдЧрд░ рдХрдиреЗрдХреНрдЯ рдЭрд╛рд▓реНрдпрд╛рд╡рд░, IoT Hub рдХрдбреЗ рдкрд╛рдард╡рд▓реЗрд▓реНрдпрд╛ рдкреНрд░рддреНрдпреЗрдХ рд╕рдВрджреЗрд╢рд╛рд╕рд╛рдареА рдлрдВрдХреНрд╢рдирдордзреАрд▓ рдХреЛрдб рдХреЙрд▓ рдХреЗрд▓рд╛ рдЬрд╛рдИрд▓, рдбрд┐рд╡реНрд╣рд╛рдЗрд╕ рдХреЛрдгрддреЗрд╣реА рдЕрд╕реЛ. рдЯреНрд░рд┐рдЧрд░рд▓рд╛ рд╕рдВрджреЗрд╢ рдПрдХ рдкреЕрд░рд╛рдореАрдЯрд░ рдореНрд╣рдгреВрди рджрд┐рд▓рд╛ рдЬрд╛рдИрд▓.

### рдХрд╛рд░реНрдп - Event Hub compatible endpoint рдХрдиреЗрдХреНрд╢рди рд╕реНрдЯреНрд░рд┐рдВрдЧ рдорд┐рд│рд╡рд╛

1. VS Code рдЯрд░реНрдорд┐рдирд▓рдордзреВрди рдЦрд╛рд▓реАрд▓ рдХрдорд╛рдВрдб рдЪрд╛рд▓рд╡рд╛, рдЬреНрдпрд╛рдореБрд│реЗ IoT Hub рдЪреНрдпрд╛ Event Hub compatible endpoint рд╕рд╛рдареА рдХрдиреЗрдХреНрд╢рди рд╕реНрдЯреНрд░рд┐рдВрдЧ рдорд┐рд│реЗрд▓:

    ```sh
    az iot hub connection-string show --default-eventhub \
                                      --output table \
                                      --hub-name <hub_name>
    ```

    `<hub_name>` рд▓рд╛ рддреБрдордЪреНрдпрд╛ IoT Hub рд╕рд╛рдареА рд╡рд╛рдкрд░рд▓реЗрд▓реНрдпрд╛ рдирд╛рд╡рд╛рдиреЗ рдмрджрд▓рд╛.

1. VS Code рдордзреНрдпреЗ `local.settings.json` рдлрд╛рдЗрд▓ рдЙрдШрдбрд╛. `Values` рд╡рд┐рднрд╛рдЧрд╛рдд рдЦрд╛рд▓реАрд▓ рдЕрддрд┐рд░рд┐рдХреНрдд рдореВрд▓реНрдп рдЬреЛрдбрд╛:

    ```json
    "IOT_HUB_CONNECTION_STRING": "<connection string>"
    ```

    `<connection string>` рд▓рд╛ рдорд╛рдЧреАрд▓ рдЯрдкреНрдкреНрдпрд╛рддреВрди рдорд┐рд│рд╛рд▓реЗрд▓реНрдпрд╛ рдореВрд▓реНрдпрд╛рдиреЗ рдмрджрд▓рд╛. рд╣реЗ рд╡реИрдз JSON рдмрдирд╡рдгреНрдпрд╛рд╕рд╛рдареА рд╡рд░рдЪреНрдпрд╛ рдУрд│реАрдЪреНрдпрд╛ рд╢реЗрд╡рдЯреА рдПрдХ рдЕрд▓реНрдкрд╡рд┐рд░рд╛рдо рдЬреЛрдбрд╛рд╡рд╛ рд▓рд╛рдЧреЗрд▓.

### рдХрд╛рд░реНрдп - рдЗрд╡реНрд╣реЗрдВрдЯ рдЯреНрд░рд┐рдЧрд░ рддрдпрд╛рд░ рдХрд░рд╛

рдЖрддрд╛ рддреБрдореНрд╣реА рдЗрд╡реНрд╣реЗрдВрдЯ рдЯреНрд░рд┐рдЧрд░ рддрдпрд╛рд░ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рддрдпрд╛рд░ рдЖрд╣рд╛рдд.

1. VS Code рдЯрд░реНрдорд┐рдирд▓рдордзреВрди `soil-moisture-trigger` рдлреЛрд▓реНрдбрд░рдордзреНрдпреЗ рдЦрд╛рд▓реАрд▓ рдХрдорд╛рдВрдб рдЪрд╛рд▓рд╡рд╛:

    ```sh
    func new --name iot-hub-trigger --template "Azure Event Hub trigger"
    ```

    рдпрд╛рдореБрд│реЗ `iot-hub-trigger` рдирд╛рд╡рд╛рдЪреЗ рдирд╡реАрди Function рддрдпрд╛рд░ рд╣реЛрдИрд▓. рдЯреНрд░рд┐рдЧрд░ IoT Hub рдЪреНрдпрд╛ Event Hub compatible endpoint рд╢реА рдХрдиреЗрдХреНрдЯ рд╣реЛрдИрд▓, рддреНрдпрд╛рдореБрд│реЗ рддреБрдореНрд╣реА Event Hub рдЯреНрд░рд┐рдЧрд░ рд╡рд╛рдкрд░реВ рд╢рдХрддрд╛. IoT Hub рд╕рд╛рдареА рд╡рд┐рд╢рд┐рд╖реНрдЯ рдЯреНрд░рд┐рдЧрд░ рдирд╛рд╣реА.

рдпрд╛рдореБрд│реЗ `soil-moisture-trigger` рдлреЛрд▓реНрдбрд░рдордзреНрдпреЗ `iot-hub-trigger` рдирд╛рд╡рд╛рдЪрд╛ рдлреЛрд▓реНрдбрд░ рддрдпрд╛рд░ рд╣реЛрдИрд▓, рдЬреНрдпрд╛рдордзреНрдпреЗ рдЦрд╛рд▓реАрд▓ рдлрд╛рдЗрд▓реНрд╕ рдЕрд╕рддреАрд▓:

* `__init__.py` - рд╣реА Python рдХреЛрдб рдлрд╛рдЗрд▓ рдЖрд╣реЗ рдЬреНрдпрд╛рдордзреНрдпреЗ рдЯреНрд░рд┐рдЧрд░ рдЖрд╣реЗ, Python рдореЙрдбреНрдпреВрд▓рдордзреНрдпреЗ рдлреЛрд▓реНрдбрд░ рдмрджрд▓рдгреНрдпрд╛рд╕рд╛рдареА рдорд╛рдирдХ Python рдлрд╛рдЗрд▓ рдирд╛рд╡рд╛рдЪрд╛ рд╡рд╛рдкрд░ рдХреЗрд▓рд╛ рдЬрд╛рддреЛ.

    рдпрд╛ рдлрд╛рдЗрд▓рдордзреНрдпреЗ рдЦрд╛рд▓реАрд▓ рдХреЛрдб рдЕрд╕реЗрд▓:

    ```python
    import logging

    import azure.functions as func


    def main(event: func.EventHubEvent):
        logging.info('Python EventHub trigger processed an event: %s',
                    event.get_body().decode('utf-8'))
    ```

    рдЯреНрд░рд┐рдЧрд░рдЪрд╛ рдореБрдЦреНрдп рднрд╛рдЧ `main` рдлрдВрдХреНрд╢рди рдЖрд╣реЗ. IoT Hub рдордзреВрди рдЗрд╡реНрд╣реЗрдВрдЯреНрд╕рд╕рд╣ рд╣реЗ рдлрдВрдХреНрд╢рди рдХреЙрд▓ рдХреЗрд▓реЗ рдЬрд╛рддреЗ. рдпрд╛ рдлрдВрдХреНрд╢рдирдордзреНрдпреЗ `event` рдирд╛рд╡рд╛рдЪрд╛ рдкреЕрд░рд╛рдореАрдЯрд░ рдЖрд╣реЗ, рдЬреНрдпрд╛рдордзреНрдпреЗ `EventHubEvent` рдЕрд╕рддреЛ. IoT Hub рдХрдбреЗ рдкреНрд░рддреНрдпреЗрдХ рд╕рдВрджреЗрд╢ рдкрд╛рдард╡рд▓рд╛ рдЬрд╛рддреЛ рддреЗрд╡реНрд╣рд╛, рд╣реЗ рдлрдВрдХреНрд╢рди `event` рдореНрд╣рдгреВрди рд╕рдВрджреЗрд╢рд╛рд╕рд╣ рдХреЙрд▓ рдХреЗрд▓реЗ рдЬрд╛рддреЗ, рддрд╕реЗрдЪ рдорд╛рдЧреАрд▓ рдзрдбреНрдпрд╛рдд рдкрд╛рд╣рд┐рд▓реЗрд▓реНрдпрд╛ annotations рдкреНрд░рдорд╛рдгреЗ рдЧреБрдгрдзрд░реНрдорд╛рдВрд╕рд╣.

    рдпрд╛ рдлрдВрдХреНрд╢рдирдЪрд╛ рдореБрдЦреНрдп рднрд╛рдЧ рдЗрд╡реНрд╣реЗрдВрдЯ рд▓реЙрдЧ рдХрд░рддреЛ.

* `function.json` - рдпрд╛рдд рдЯреНрд░рд┐рдЧрд░рд╕рд╛рдареА рдХреЙрдиреНрдлрд┐рдЧрд░реЗрд╢рди рдЖрд╣реЗ. рдореБрдЦреНрдп рдХреЙрдиреНрдлрд┐рдЧрд░реЗрд╢рди `bindings` рдирд╛рд╡рд╛рдЪреНрдпрд╛ рд╡рд┐рднрд╛рдЧрд╛рдд рдЖрд╣реЗ. Binding рдореНрд╣рдгрдЬреЗ Azure Functions рдЖрдгрд┐ рдЗрддрд░ Azure рд╕реЗрд╡рд╛рдВрдордзреАрд▓ рдХрдиреЗрдХреНрд╢рдирд╕рд╛рдареА рд╡рд╛рдкрд░рд▓реЗ рдЬрд╛рдгрд╛рд░реЗ рдЯрд░реНрдо рдЖрд╣реЗ. рдпрд╛ рдлрдВрдХреНрд╢рдирдордзреНрдпреЗ Event Hub рд╢реА рдХрдиреЗрдХреНрдЯ рд╣реЛрдгреНрдпрд╛рд╕рд╛рдареА рдПрдХ input binding рдЖрд╣реЗ рдЖрдгрд┐ рдбреЗрдЯрд╛ рдкреНрд░рд╛рдкреНрдд рдХреЗрд▓рд╛ рдЬрд╛рддреЛ.

    > ЁЯТБ рддреБрдореНрд╣реА output bindings рджреЗрдЦреАрд▓ рдареЗрд╡реВ рд╢рдХрддрд╛, рдЬреНрдпрд╛рдореБрд│реЗ рдлрдВрдХреНрд╢рдирдЪрд╛ рдЖрдЙрдЯрдкреБрдЯ рджреБрд╕рд▒реНрдпрд╛ рд╕реЗрд╡реЗрд▓рд╛ рдкрд╛рдард╡рд▓рд╛ рдЬрд╛рддреЛ. рдЙрджрд╛рд╣рд░рдгрд╛рд░реНрде, рддреБрдореНрд╣реА рдбреЗрдЯрд╛рдмреЗрд╕рд╕рд╛рдареА output binding рдЬреЛрдбреВ рд╢рдХрддрд╛ рдЖрдгрд┐ IoT Hub рдЗрд╡реНрд╣реЗрдВрдЯ рдлрдВрдХреНрд╢рдирдордзреВрди рдкрд░рдд рдХрд░реВ рд╢рдХрддрд╛, рдЬреНрдпрд╛рдореБрд│реЗ рддреЛ рдбреЗрдЯрд╛рдмреЗрд╕рдордзреНрдпреЗ рдЖрдкреЛрдЖрдк рд╕рдорд╛рд╡рд┐рд╖реНрдЯ рд╣реЛрдИрд▓.

    тЬЕ рд╕рдВрд╢реЛрдзрди рдХрд░рд╛: [Azure Functions triggers and bindings concepts рджрд╕реНрддрдРрд╡рдЬ](https://docs.microsoft.com/azure/azure-functions/functions-triggers-bindings?WT.mc_id=academic-17441-jabenn&tabs=python) рдордзреНрдпреЗ bindings рдмрджреНрджрд▓ рд╡рд╛рдЪрд╛.

    `bindings` рд╡рд┐рднрд╛рдЧрд╛рдд binding рд╕рд╛рдареА рдХреЙрдиреНрдлрд┐рдЧрд░реЗрд╢рди рд╕рдорд╛рд╡рд┐рд╖реНрдЯ рдЖрд╣реЗ. рдорд╣рддреНрддреНрд╡рд╛рдЪреНрдпрд╛ рдореВрд▓реНрдпреЗ рдЦрд╛рд▓реАрд▓рдкреНрд░рдорд╛рдгреЗ рдЖрд╣реЗрдд:

  * `"type": "eventHubTrigger"` - рдпрд╛рдореБрд│реЗ рдлрдВрдХреНрд╢рдирд▓рд╛ Event Hub рдордзреВрди рдЗрд╡реНрд╣реЗрдВрдЯреНрд╕ рдРрдХрдгреНрдпрд╛рдЪреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдЕрд╕рд▓реНрдпрд╛рдЪреЗ рд╕рд╛рдВрдЧрд┐рддрд▓реЗ рдЬрд╛рддреЗ.
  * `"name": "events"` - Event Hub рдЗрд╡реНрд╣реЗрдВрдЯреНрд╕рд╕рд╛рдареА рд╡рд╛рдкрд░рдгреНрдпрд╛рд╕рд╛рдареА рдкреЕрд░рд╛рдореАрдЯрд░рдЪреЗ рдирд╛рд╡. Python рдХреЛрдбрдордзреАрд▓ `main` рдлрдВрдХреНрд╢рдирдордзреАрд▓ рдкреЕрд░рд╛рдореАрдЯрд░ рдирд╛рд╡рд╛рд╢реА рд╣реЗ рдЬреБрд│рддреЗ.
  * `"direction": "in"` - рд╣реЗ рдПрдХ input binding рдЖрд╣реЗ, Event Hub рдордзреВрди рдбреЗрдЯрд╛ рдлрдВрдХреНрд╢рдирдордзреНрдпреЗ рдпреЗрддреЛ.
  * `"connection": ""` - рд╣реЗ рд╕реЗрдЯрд┐рдВрдЧрдордзреВрди рдХрдиреЗрдХреНрд╢рди рд╕реНрдЯреНрд░рд┐рдВрдЧ рд╡рд╛рдЪрдгреНрдпрд╛рд╕рд╛рдареА рд╕реЗрдЯрд┐рдВрдЧрдЪреЗ рдирд╛рд╡ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддреЗ. рд╕реНрдерд╛рдирд┐рдХрдкрдгреЗ рдЪрд╛рд▓рд╡рддрд╛рдирд╛, рд╣реЗ `local.settings.json` рдлрд╛рдЗрд▓рдордзреВрди рд╣реЗ рд╕реЗрдЯрд┐рдВрдЧ рд╡рд╛рдЪреЗрд▓.

    > ЁЯТБ рдХрдиреЗрдХреНрд╢рди рд╕реНрдЯреНрд░рд┐рдВрдЧ `function.json` рдлрд╛рдЗрд▓рдордзреНрдпреЗ рд╕рдВрдЧреНрд░рд╣рд┐рдд рдХреЗрд▓реА рдЬрд╛рдК рд╢рдХрдд рдирд╛рд╣реА, рддреА рд╕реЗрдЯрд┐рдВрдЧрдордзреВрди рд╡рд╛рдЪрд▓реА рдкрд╛рд╣рд┐рдЬреЗ. рдпрд╛рдореБрд│реЗ рддреБрдордЪреА рдХрдиреЗрдХреНрд╢рди рд╕реНрдЯреНрд░рд┐рдВрдЧ рдЪреБрдХреВрди рдЙрдШрдб рд╣реЛрдгреНрдпрд╛рдкрд╛рд╕реВрди рд░реЛрдЦрд▓реА рдЬрд╛рддреЗ.

1. [Azure Functions template рдордзреАрд▓ рдмрдЧ](https://github.com/Azure/azure-functions-templates/issues/1250) рдореБрд│реЗ, `function.json` рдордзреНрдпреЗ `cardinality` рдлреАрд▓реНрдбрд╕рд╛рдареА рдЪреБрдХреАрдЪреЗ рдореВрд▓реНрдп рдЖрд╣реЗ. рдпрд╛ рдлреАрд▓реНрдбрдЪреЗ рдореВрд▓реНрдп `many` рд╡рд░реВрди `one` рдордзреНрдпреЗ рдЕрдкрдбреЗрдЯ рдХрд░рд╛:

    ```json
    "cardinality": "one",
    ```

1. `function.json` рдлрд╛рдЗрд▓рдордзреАрд▓ `"connection"` рдЪреЗ рдореВрд▓реНрдп `local.settings.json` рдлрд╛рдЗрд▓рдордзреНрдпреЗ рдЬреЛрдбрд▓реЗрд▓реНрдпрд╛ рдирд╡реАрди рдореВрд▓реНрдпрд╛рдХрдбреЗ рдирд┐рд░реНрджреЗрд╢ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдЕрдкрдбреЗрдЯ рдХрд░рд╛:

    ```json
    "connection": "IOT_HUB_CONNECTION_STRING",
    ```

    > ЁЯТБ рд▓рдХреНрд╖рд╛рдд рдареЗрд╡рд╛ - рд╣реЗ рд╕реЗрдЯрд┐рдВрдЧрдХрдбреЗ рдирд┐рд░реНрджреЗрд╢ рдХрд░рдгреЗ рдЖрд╡рд╢реНрдпрдХ рдЖрд╣реЗ, рдкреНрд░рддреНрдпрдХреНрд╖ рдХрдиреЗрдХреНрд╢рди рд╕реНрдЯреНрд░рд┐рдВрдЧ рд╕рдорд╛рд╡рд┐рд╖реНрдЯ рдХрд░реВ рдирдХрд╛.

1. рдХрдиреЗрдХреНрд╢рди рд╕реНрдЯреНрд░рд┐рдВрдЧрдордзреНрдпреЗ `eventHubName` рдореВрд▓реНрдп рд╕рдорд╛рд╡рд┐рд╖реНрдЯ рдЖрд╣реЗ, рддреНрдпрд╛рдореБрд│реЗ `function.json` рдлрд╛рдЗрд▓рдордзреАрд▓ рдпрд╛ рдореВрд▓реНрдпрд╛рд╕рд╛рдареА рд░рд┐рдХрд╛рдореА рд╕реНрдЯреНрд░рд┐рдВрдЧ рдареЗрд╡рдгреЗ рдЖрд╡рд╢реНрдпрдХ рдЖрд╣реЗ. рдпрд╛ рдореВрд▓реНрдпрд╛рд▓рд╛ рд░рд┐рдХрд╛рдореА рд╕реНрдЯреНрд░рд┐рдВрдЧрдордзреНрдпреЗ рдЕрдкрдбреЗрдЯ рдХрд░рд╛:

    ```json
    "eventHubName": "",
    ```

### рдХрд╛рд░реНрдп - рдЗрд╡реНрд╣реЗрдВрдЯ рдЯреНрд░рд┐рдЧрд░ рдЪрд╛рд▓рд╡рд╛

1. IoT Hub рдЗрд╡реНрд╣реЗрдВрдЯ рдореЙрдирд┐рдЯрд░ рдЪрд╛рд▓реВ рдирд╕рд▓реНрдпрд╛рдЪреА рдЦрд╛рддреНрд░реА рдХрд░рд╛. рдЬрд░ рд╣реЗ Functions рдЕтАНреЕрдкрд╕реЛрдмрдд рдЪрд╛рд▓реВ рдЕрд╕реЗрд▓, рддрд░ Functions рдЕтАНреЕрдк рдХрдиреЗрдХреНрдЯ рд╣реЛрдК рд╢рдХрдгрд╛рд░ рдирд╛рд╣реА рдЖрдгрд┐ рдЗрд╡реНрд╣реЗрдВрдЯреНрд╕ рд╡рд╛рдкрд░реВ рд╢рдХрдгрд╛рд░ рдирд╛рд╣реА.

    > ЁЯТБ рдЕрдиреЗрдХ рдЕтАНреЕрдкреНрд╕ IoT Hub endpoints рд╢реА рд╡реЗрдЧрд╡реЗрдЧрд│реНрдпрд╛ *consumer groups* рд╡рд╛рдкрд░реВрди рдХрдиреЗрдХреНрдЯ рд╣реЛрдК рд╢рдХрддрд╛рдд. рд╣реЗ рдкреБрдвреАрд▓ рдзрдбреНрдпрд╛рдд рдХрд╡реНрд╣рд░ рдХреЗрд▓реЗ рдЬрд╛рдИрд▓.

1. Functions рдЕтАНреЕрдк рдЪрд╛рд▓рд╡рдгреНрдпрд╛рд╕рд╛рдареА, VS Code рдЯрд░реНрдорд┐рдирд▓рдордзреВрди рдЦрд╛рд▓реАрд▓ рдХрдорд╛рдВрдб рдЪрд╛рд▓рд╡рд╛:

    ```sh
    func start
    ```

    Functions рдЕтАНреЕрдк рд╕реБрд░реВ рд╣реЛрдИрд▓ рдЖрдгрд┐ `iot-hub-trigger` рдлрдВрдХреНрд╢рди рд╢реЛрдзреЗрд▓. рддреНрдпрд╛рдирдВрддрд░ IoT Hub рдХрдбреЗ рдорд╛рдЧреАрд▓ рджрд┐рд╡рд╕рд╛рдд рдкрд╛рдард╡рд▓реЗрд▓реНрдпрд╛ рдЗрд╡реНрд╣реЗрдВрдЯреНрд╕ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХрд░реЗрд▓.

    ```output
    (.venv) тЮЬ  soil-moisture-trigger func start
    Found Python version 3.9.1 (python3).
    
    Azure Functions Core Tools
    Core Tools Version:       3.0.3442 Commit hash: 6bfab24b2743f8421475d996402c398d2fe4a9e0  (64-bit)
    Function Runtime Version: 3.0.15417.0
    
    Functions:
    
            iot-hub-trigger: eventHubTrigger
    
    For detailed output, run func with --verbose flag.
    [2021-05-05T02:44:07.517Z] Worker process started and initialized.
    [2021-05-05T02:44:09.202Z] Executing 'Functions.iot-hub-trigger' (Reason='(null)', Id=802803a5-eae9-4401-a1f4-176631456ce4)
    [2021-05-05T02:44:09.205Z] Trigger Details: PartitionId: 0, Offset: 1011240-1011632, EnqueueTimeUtc: 2021-05-04T19:04:04.2030000Z-2021-05-04T19:04:04.3900000Z, SequenceNumber: 2546-2547, Count: 2
    [2021-05-05T02:44:09.352Z] Python EventHub trigger processed an event: {"soil_moisture":628}
    [2021-05-05T02:44:09.354Z] Python EventHub trigger processed an event: {"soil_moisture":624}
    [2021-05-05T02:44:09.395Z] Executed 'Functions.iot-hub-trigger' (Succeeded, Id=802803a5-eae9-4401-a1f4-176631456ce4, Duration=245ms)
    ```

    рдкреНрд░рддреНрдпреЗрдХ рдлрдВрдХреНрд╢рди рдХреЙрд▓ `Executing 'Functions.iot-hub-trigger'`/`Executed 'Functions.iot-hub-trigger'` рдмреНрд▓реЙрдХрдордзреНрдпреЗ рдЖрдЙрдЯрдкреБрдЯрдордзреНрдпреЗ рджрд┐рд╕реЗрд▓, рддреНрдпрд╛рдореБрд│реЗ рдкреНрд░рддреНрдпреЗрдХ рдлрдВрдХреНрд╢рди рдХреЙрд▓рдордзреНрдпреЗ рдХрд┐рддреА рд╕рдВрджреЗрд╢ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдЭрд╛рд▓реЗ рд╣реЗ рддреБрдореНрд╣рд╛рд▓рд╛ рджрд┐рд╕реЗрд▓.

1. рддреБрдордЪреЗ IoT рдбрд┐рд╡реНрд╣рд╛рдЗрд╕ рдЪрд╛рд▓реВ рдЕрд╕рд▓реНрдпрд╛рдЪреА рдЦрд╛рддреНрд░реА рдХрд░рд╛. рддреБрдореНрд╣рд╛рд▓рд╛ Functions рдЕтАНреЕрдкрдордзреНрдпреЗ рдирд╡реАрди soil moisture рд╕рдВрджреЗрд╢ рджрд┐рд╕рддреАрд▓.

1. Functions рдЕтАНреЕрдк рдерд╛рдВрдмрд╡рд╛ рдЖрдгрд┐ рдкреБрдиреНрд╣рд╛ рд╕реБрд░реВ рдХрд░рд╛. рддреБрдореНрд╣рд╛рд▓рд╛ рджрд┐рд╕реЗрд▓ рдХреА рддреЗ рдорд╛рдЧреАрд▓ рд╕рдВрджреЗрд╢ рдкреБрдиреНрд╣рд╛ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХрд░рдгрд╛рд░ рдирд╛рд╣реА, рдлрдХреНрдд рдирд╡реАрди рд╕рдВрджреЗрд╢ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХрд░реЗрд▓.

> ЁЯТБ VS Code рддреБрдордЪреНрдпрд╛ Functions рд╕рд╛рдареА debugging рджреЗрдЦреАрд▓ рд╕рдкреЛрд░реНрдЯ рдХрд░рддреЗ. рддреБрдореНрд╣реА рдХреЛрдбрдЪреНрдпрд╛ рдкреНрд░рддреНрдпреЗрдХ рдУрд│реАрдЪреНрдпрд╛ рд╕реБрд░реБрд╡рд╛рддреАрд▓рд╛ рдХреНрд▓рд┐рдХ рдХрд░реВрди, рдХрд┐рдВрд╡рд╛ рдХреЛрдбрдЪреНрдпрд╛ рдУрд│реАрд╡рд░ рдХрд░реНрд╕рд░ рдареЗрд╡реВрди *Run -> Toggle breakpoint* рдирд┐рд╡рдбреВрди, рдХрд┐рдВрд╡рд╛ `F9` рджрд╛рдмреВрди break points рд╕реЗрдЯ рдХрд░реВ рд╢рдХрддрд╛. рддреБрдореНрд╣реА *Run -> Start debugging* рдирд┐рд╡рдбреВрди, `F5` рджрд╛рдмреВрди, рдХрд┐рдВрд╡рд╛ *Run and debug* рдкреЕрди рдирд┐рд╡рдбреВрди **Start debugging** рдмрдЯрдг рдирд┐рд╡рдбреВрди debugger рд╕реБрд░реВ рдХрд░реВ рд╢рдХрддрд╛. рдЕрд╕реЗ рдХреЗрд▓реНрдпрд╛рдиреЗ рддреБрдореНрд╣реА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рд╣реЛрдд рдЕрд╕рд▓реЗрд▓реНрдпрд╛ рдЗрд╡реНрд╣реЗрдВрдЯреНрд╕рдЪреЗ рддрдкрд╢реАрд▓ рдкрд╛рд╣реВ рд╢рдХрддрд╛.

#### рд╕рдорд╕реНрдпрд╛ рд╕реЛрдбрд╡рдгреЗ

* рдЬрд░ рддреБрдореНрд╣рд╛рд▓рд╛ рдЦрд╛рд▓реАрд▓ рддреНрд░реБрдЯреА рдорд┐рд│рд╛рд▓реА:

    ```output
    The listener for function 'Functions.iot-hub-trigger' was unable to start. Microsoft.WindowsAzure.Storage: Connection refused. System.Net.Http: Connection refused. System.Private.CoreLib: Connection refused.
    ```

    Azurite рдЪрд╛рд▓реВ рдЖрд╣реЗ рдЖрдгрд┐ рддреБрдореНрд╣реА `local.settings.json` рдлрд╛рдЗрд▓рдордзреНрдпреЗ `AzureWebJobsStorage` `UseDevelopmentStorage=true` рд╕реЗрдЯ рдХреЗрд▓реЗ рдЖрд╣реЗ рдпрд╛рдЪреА рдЦрд╛рддреНрд░реА рдХрд░рд╛.

* рдЬрд░ рддреБрдореНрд╣рд╛рд▓рд╛ рдЦрд╛рд▓реАрд▓ рддреНрд░реБрдЯреА рдорд┐рд│рд╛рд▓реА:

    ```output
    System.Private.CoreLib: Exception while executing function: Functions.iot-hub-trigger. System.Private.CoreLib: Result: Failure Exception: AttributeError: 'list' object has no attribute 'get_body'
    ```

    рддреБрдореНрд╣реА `function.json` рдлрд╛рдЗрд▓рдордзреНрдпреЗ `cardinality` `one` рдордзреНрдпреЗ рд╕реЗрдЯ рдХреЗрд▓реЗ рдЖрд╣реЗ рдпрд╛рдЪреА рдЦрд╛рддреНрд░реА рдХрд░рд╛.

* рдЬрд░ рддреБрдореНрд╣рд╛рд▓рд╛ рдЦрд╛рд▓реАрд▓ рддреНрд░реБрдЯреА рдорд┐рд│рд╛рд▓реА:

    ```output
    Azure.Messaging.EventHubs: The path to an Event Hub may be specified as part of the connection string or as a separate value, but not both.  Please verify that your connection string does not have the `EntityPath` token if you are passing an explicit Event Hub name. (Parameter 'connectionString').
    ```

    рддреБрдореНрд╣реА `function.json` рдлрд╛рдЗрд▓рдордзреНрдпреЗ `eventHubName` рд░рд┐рдХрд╛рдореА рд╕реНрдЯреНрд░рд┐рдВрдЧрдордзреНрдпреЗ рд╕реЗрдЯ рдХреЗрд▓реА рдЖрд╣реЗ рдпрд╛рдЪреА рдЦрд╛рддреНрд░реА рдХрд░рд╛.

## serverless рдХреЛрдбрдордзреВрди рдереЗрдЯ рдкрджреНрдзрддреАрдиреЗ рд╡рд┐рдирдВрддреНрдпрд╛ рдкрд╛рдард╡рд╛

рдЖрддреНрддрд╛рдкрд░реНрдпрдВрдд рддреБрдордЪреЗ Functions рдЕтАНреЕрдк Event Hub compatible endpoint рд╡рд╛рдкрд░реВрди IoT Hub рдордзреВрди рд╕рдВрджреЗрд╢ рдРрдХрдд рдЖрд╣реЗ. рдЖрддрд╛ рддреБрдореНрд╣рд╛рд▓рд╛ IoT рдбрд┐рд╡реНрд╣рд╛рдЗрд╕рд▓рд╛ рдХрдорд╛рдВрдбреНрд╕ рдкрд╛рдард╡рд╛рдпрдЪреНрдпрд╛ рдЖрд╣реЗрдд. рд╣реЗ IoT Hub рд╢реА *Registry Manager* рд╡рд╛рдкрд░реВрди рд╡реЗрдЧрд│реНрдпрд╛ рдХрдиреЗрдХреНрд╢рдирджреНрд╡рд╛рд░реЗ рдХреЗрд▓реЗ рдЬрд╛рддреЗ. Registry Manager рд╣реЗ рдПрдХ рд╕рд╛рдзрди рдЖрд╣реЗ рдЬреЗ рддреБрдореНрд╣рд╛рд▓рд╛ IoT Hub рдордзреНрдпреЗ рдиреЛрдВрджрдгреАрдХреГрдд рдбрд┐рд╡реНрд╣рд╛рдЗрд╕ рдкрд╛рд╣рдгреНрдпрд╛рдЪреА рдЖрдгрд┐ cloud-to-device рд╕рдВрджреЗрд╢, рдереЗрдЯ рдкрджреНрдзрддреАрдиреЗ рд╡рд┐рдирдВрддреНрдпрд╛ рдкрд╛рдард╡реВрди рдХрд┐рдВрд╡рд╛ device twin рдЕрдкрдбреЗрдЯ рдХрд░реВрди рддреНрдпрд╛ рдбрд┐рд╡реНрд╣рд╛рдЗрд╕рд╢реА рд╕рдВрд╡рд╛рдж рд╕рд╛рдзрдгреНрдпрд╛рдЪреА рдкрд░рд╡рд╛рдирдЧреА рджреЗрддреЗ. рддреБрдореНрд╣реА IoT Hub рдордзреВрди рдбрд┐рд╡реНрд╣рд╛рдЗрд╕ рдиреЛрдВрджрдгреА, рдЕрдкрдбреЗрдЯ рдХрд┐рдВрд╡рд╛ рд╣рдЯрд╡рдгреНрдпрд╛рд╕рд╛рдареА рджреЗрдЦреАрд▓ рдпрд╛рдЪрд╛ рд╡рд╛рдкрд░ рдХрд░реВ рд╢рдХрддрд╛.

Registry Manager рд╢реА рдХрдиреЗрдХреНрдЯ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рддреБрдореНрд╣рд╛рд▓рд╛ рдХрдиреЗрдХреНрд╢рди рд╕реНрдЯреНрд░рд┐рдВрдЧ рдЖрд╡рд╢реНрдпрдХ рдЖрд╣реЗ.

### рдХрд╛рд░реНрдп - Registry Manager рдХрдиреЗрдХреНрд╢рди рд╕реНрдЯреНрд░рд┐рдВрдЧ рдорд┐рд│рд╡рд╛

1. рдХрдиреЗрдХреНрд╢рди рд╕реНрдЯреНрд░рд┐рдВрдЧ рдорд┐рд│рд╡рдгреНрдпрд╛рд╕рд╛рдареА, рдЦрд╛рд▓реАрд▓ рдХрдорд╛рдВрдб рдЪрд╛рд▓рд╡рд╛:

    ```sh
    az iot hub connection-string show --policy-name service \
                                      --output table \
                                      --hub-name <hub_name>
    ```

    `<hub_name>` рд▓рд╛ рддреБрдордЪреНрдпрд╛ IoT Hub рд╕рд╛рдареА рд╡рд╛рдкрд░рд▓реЗрд▓реНрдпрд╛ рдирд╛рд╡рд╛рдиреЗ рдмрджрд▓рд╛.

    рдХрдиреЗрдХреНрд╢рди рд╕реНрдЯреНрд░рд┐рдВрдЧ *ServiceConnect* рдзреЛрд░рдгрд╛рд╕рд╛рдареА `--policy-name service` рдкреЕрд░рд╛рдореАрдЯрд░ рд╡рд╛рдкрд░реВрди рд╡рд┐рдирдВрддреА рдХреЗрд▓реА рдЬрд╛рддреЗ. рддреБрдореНрд╣реА рдХрдиреЗрдХреНрд╢рди рд╕реНрдЯреНрд░рд┐рдВрдЧ рд╡рд┐рдирдВрддреА рдХрд░рддрд╛ рддреЗрд╡реНрд╣рд╛, рддреБрдореНрд╣реА рддреНрдпрд╛ рдХрдиреЗрдХреНрд╢рди рд╕реНрдЯреНрд░рд┐рдВрдЧрд▓рд╛ рдХреЛрдгрддреНрдпрд╛ рдкрд░рд╡рд╛рдирдЧреНрдпрд╛ рдкрд░рд╡рд╛рдирдЧреА рджреЗрддреАрд▓ рд╣реЗ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░реВ рд╢рдХрддрд╛. ServiceConnect рдзреЛрд░рдг рддреБрдордЪреНрдпрд╛ рдХреЛрдбрд▓рд╛ IoT рдбрд┐рд╡реНрд╣рд╛рдЗрд╕рд╢реА рдХрдиреЗрдХреНрдЯ рд╣реЛрдКрди рд╕рдВрджреЗрд╢ рдкрд╛рдард╡рдгреНрдпрд╛рдЪреА рдкрд░рд╡рд╛рдирдЧреА рджреЗрддреЗ.

    тЬЕ рд╕рдВрд╢реЛрдзрди рдХрд░рд╛: [IoT Hub permissions рджрд╕реНрддрдРрд╡рдЬ](https://docs.microsoft.com/azure/iot-hub/iot-hub-devguide-security#iot-hub-permissions?WT.mc_id=academic-17441-jabenn) рдордзреНрдпреЗ рд╡реЗрдЧрд╡реЗрдЧрд│реНрдпрд╛ рдзреЛрд░рдгрд╛рдВрдмрджреНрджрд▓ рд╡рд╛рдЪрд╛.

1. VS Code рдордзреНрдпреЗ `local.settings.json` рдлрд╛рдЗрд▓ рдЙрдШрдбрд╛. `Values` рд╡рд┐рднрд╛рдЧрд╛рдд рдЦрд╛рд▓реАрд▓ рдЕрддрд┐рд░рд┐рдХреНрдд рдореВрд▓реНрдп рдЬреЛрдбрд╛:

    ```json
    "REGISTRY_MANAGER_CONNECTION_STRING": "<connection string>"
    ```

    `<connection string>` рд▓рд╛ рдорд╛рдЧреАрд▓ рдЯрдкреНрдкреНрдпрд╛рддреВрди рдорд┐рд│рд╛рд▓реЗрд▓реНрдпрд╛ рдореВрд▓реНрдпрд╛рдиреЗ рдмрджрд▓рд╛. рд╣реЗ рд╡реИрдз JSON рдмрдирд╡рдгреНрдпрд╛рд╕рд╛рдареА рд╡рд░рдЪреНрдпрд╛ рдУрд│реАрдЪреНрдпрд╛ рд╢реЗрд╡рдЯреА рдПрдХ рдЕрд▓реНрдкрд╡рд┐рд░рд╛рдо рдЬреЛрдбрд╛рд╡рд╛ рд▓рд╛рдЧреЗрд▓.

### рдХрд╛рд░реНрдп - рдбрд┐рд╡реНрд╣рд╛рдЗрд╕рд▓рд╛ рдереЗрдЯ рдкрджреНрдзрддреАрдиреЗ рд╡рд┐рдирдВрддреА рдкрд╛рдард╡рд╛

1. Registry Manager рд╕рд╛рдареА SDK Pip рдкреЕрдХреЗрдЬрджреНрд╡рд╛рд░реЗ рдЙрдкрд▓рдмреНрдз рдЖрд╣реЗ. `requirements.txt` рдлрд╛рдЗрд▓рдордзреНрдпреЗ рдЦрд╛рд▓реАрд▓ рдУрд│ рдЬреЛрдбрд╛:

    ```sh
    azure-iot-hub
    ```

1. VS Code рдЯрд░реНрдорд┐рдирд▓рдордзреНрдпреЗ virtual environment рд╕рдХреНрд░рд┐рдп рдЕрд╕рд▓реНрдпрд╛рдЪреА рдЦрд╛рддреНрд░реА рдХрд░рд╛ рдЖрдгрд┐ Pip рдкреЕрдХреЗрдЬреЗрд╕ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдЦрд╛рд▓реАрд▓ рдХрдорд╛рдВрдб рдЪрд╛рд▓рд╡рд╛:

    ```sh
    pip install -r requirements.txt
    ```

1. `__init__.py` рдлрд╛рдЗрд▓рдордзреНрдпреЗ рдЦрд╛рд▓реАрд▓ imports рдЬреЛрдбрд╛:

    ```python
    import json
    import os
    from azure.iot.hub import IoTHubRegistryManager
    from azure.iot.hub.models import CloudToDeviceMethod
    ```

    рдпрд╛рдордзреНрдпреЗ рдХрд╛рд╣реА рд╕рд┐рд╕реНрдЯрдо рд▓рд╛рдпрдмреНрд░рд░реА рддрд╕реЗрдЪ Registry Manager рд╢реА рд╕рдВрд╡рд╛рдж рд╕рд╛рдзрдгреНрдпрд╛рд╕рд╛рдареА рдЖрдгрд┐ рдереЗрдЯ рдкрджреНрдзрддреАрдиреЗ рд╡рд┐рдирдВрддреА рдкрд╛рдард╡рдгреНрдпрд╛рд╕рд╛рдареА рд▓рд╛рдпрдмреНрд░рд░реА рд╕рдорд╛рд╡рд┐рд╖реНрдЯ рдЖрд╣реЗрдд.

1. `main` рдкрджреНрдзрддреАрддреАрд▓ рдХреЛрдб рдХрд╛рдврд╛, рдкрдг рдкрджреНрдзрдд рдареЗрд╡рд╛.

1. `main` рдкрджреНрдзрддреАрдордзреНрдпреЗ рдЦрд╛рд▓реАрд▓ рдХреЛрдб рдЬреЛрдбрд╛:

    ```python
    body = json.loads(event.get_body().decode('utf-8'))
    device_id = event.iothub_metadata['connection-device-id']

    logging.info(f'Received message: {body} from {device_id}')
    ```

    рд╣рд╛ рдХреЛрдб рдЗрд╡реНрд╣реЗрдВрдЯрдЪрд╛ body рдХрд╛рдврддреЛ, рдЬреНрдпрд╛рдордзреНрдпреЗ IoT рдбрд┐рд╡реНрд╣рд╛рдЗрд╕рджреНрд╡рд╛рд░реЗ рдкрд╛рдард╡рд▓реЗрд▓рд╛ JSON рд╕рдВрджреЗрд╢ рдЕрд╕рддреЛ.

    рддреНрдпрд╛рдирдВрддрд░ рдЗрд╡реНрд╣реЗрдВрдЯрд╕реЛрдмрдд рджрд┐рд▓реЗрд▓реНрдпрд╛ annotations рдордзреВрди рдбрд┐рд╡реНрд╣рд╛рдЗрд╕ ID рдорд┐рд│рд╡рддреЛ. рдЗрд╡реНрд╣реЗрдВрдЯрдЪрд╛ body рдЯреЗрд▓рд┐рдореЗрдЯреНрд░реА рдореНрд╣рдгреВрди рдкрд╛рдард╡рд▓реЗрд▓рд╛ рд╕рдВрджреЗрд╢ рдЕрд╕рддреЛ, `iothub_metadata` рдбрд┐рдХреНрд╢рдирд░реАрдордзреНрдпреЗ IoT Hub рдиреЗ рд╕реЗрдЯ рдХреЗрд▓реЗрд▓реНрдпрд╛ рдЧреБрдгрдзрд░реНрдорд╛рдВрдЪрд╛ рд╕рдорд╛рд╡реЗрд╢ рдЕрд╕рддреЛ, рдЬрд╕реЗ рдХреА рдкрд╛рдард╡рдгрд╛рд▒реНрдпрд╛ рдбрд┐рд╡реНрд╣рд╛рдЗрд╕рдЪрд╛ ID рдЖрдгрд┐ рд╕рдВрджреЗрд╢ рдкрд╛рдард╡рдгреНрдпрд╛рдЪрд╛ рд╡реЗрд│.

    рд╣реА рдорд╛рд╣рд┐рддреА рдирдВрддрд░ рд▓реЙрдЧ рдХреЗрд▓реА рдЬрд╛рддреЗ. рддреБрдореНрд╣реА Functions рдЕтАНреЕрдк рд╕реНрдерд╛рдирд┐рдХрдкрдгреЗ рдЪрд╛рд▓рд╡рддрд╛рдирд╛ рдЯрд░реНрдорд┐рдирд▓рдордзреНрдпреЗ рд╣реЗ рд▓реЙрдЧрд┐рдВрдЧ рдкрд╛рд╣реВ рд╢рдХрддрд╛.

1. рдпрд╛рдЦрд╛рд▓реА рдЦрд╛рд▓реАрд▓ рдХреЛрдб рдЬреЛрдбрд╛:

    ```python
    soil_moisture = body['soil_moisture']

    if soil_moisture > 450:
        direct_method = CloudToDeviceMethod(method_name='relay_on', payload='{}')
    else:
        direct_method = CloudToDeviceMethod(method_name='relay_off', payload='{}')
    ```

    рд╣рд╛ рдХреЛрдб рд╕рдВрджреЗрд╢рд╛рддреВрди soil moisture рдорд┐рд│рд╡рддреЛ. рддреНрдпрд╛рдирдВрддрд░ soil moisture рддрдкрд╛рд╕рддреЛ рдЖрдгрд┐ рдореВрд▓реНрдпрд╛рд╡рд░ рдЖрдзрд╛рд░рд┐рдд `relay_on` рдХрд┐рдВрд╡рд╛ `relay_off` рдереЗрдЯ рдкрджреНрдзрддреАрд╕рд╛рдареА рд╡рд┐рдирдВрддреА рддрдпрд╛рд░ рдХрд░рддреЛ. рд╡рд┐рдирдВрддреАрд▓рд╛ payload рдЖрд╡рд╢реНрдпрдХ рдирд╕рддреЗ, рддреНрдпрд╛рдореБрд│реЗ рд░рд┐рдХрд╛рдореА JSON рдбреЙрдХреНрдпреБрдореЗрдВрдЯ рдкрд╛рдард╡рд▓реЗ рдЬрд╛рддреЗ.

1. рдпрд╛рдЦрд╛рд▓реА рдЦрд╛рд▓реАрд▓ рдХреЛрдб рдЬреЛрдбрд╛:

    ```python
    logging.info(f'Sending direct method request for {direct_method.method_name} for device {device_id}')

    registry_manager_connection_string = os.environ['REGISTRY_MANAGER_CONNECTION_STRING']
    registry_manager = IoTHubRegistryManager(registry_manager_connection_string)
    ```
рд╣рд╛ рдХреЛрдб `local.settings.json` рдлрд╛рдЗрд▓рдордзреВрди `REGISTRY_MANAGER_CONNECTION_STRING` рд▓реЛрдб рдХрд░рддреЛ. рдпрд╛ рдлрд╛рдЗрд▓рдордзреАрд▓ рдореВрд▓реНрдпреЗ рдкрд░реНрдпрд╛рд╡рд░рдгреАрдп рд╡реНрд╣реЗрд░рд┐рдПрдмрд▓реНрд╕ рдореНрд╣рдгреВрди рдЙрдкрд▓рдмреНрдз рдХрд░реВрди рджрд┐рд▓реА рдЬрд╛рддрд╛рдд, рдЖрдгрд┐ `os.environ` рдлрдВрдХреНрд╢рди рд╡рд╛рдкрд░реВрди рд╡рд╛рдЪрд▓реА рдЬрд╛рдК рд╢рдХрддрд╛рдд, рдЬреЗ рд╕рд░реНрд╡ рдкрд░реНрдпрд╛рд╡рд░рдгреАрдп рд╡реНрд╣реЗрд░рд┐рдПрдмрд▓реНрд╕рдЪреЗ рдбрд┐рдХреНрд╢рдирд░реА рдкрд░рдд рдХрд░рддреЗ.

> ЁЯТБ рдЬреЗрд╡реНрд╣рд╛ рд╣рд╛ рдХреЛрдб рдХреНрд▓рд╛рдЙрдбрд╡рд░ рдбрд┐рдкреНрд▓реЙрдп рдХреЗрд▓рд╛ рдЬрд╛рддреЛ, рддреЗрд╡реНрд╣рд╛ `local.settings.json` рдлрд╛рдЗрд▓рдордзреАрд▓ рдореВрд▓реНрдпреЗ *Application Settings* рдореНрд╣рдгреВрди рд╕реЗрдЯ рдХреЗрд▓реА рдЬрд╛рддрд╛рдд, рдЖрдгрд┐ рдкрд░реНрдпрд╛рд╡рд░рдгреАрдп рд╡реНрд╣реЗрд░рд┐рдПрдмрд▓реНрд╕рдордзреВрди рд╡рд╛рдЪрд▓реА рдЬрд╛рдК рд╢рдХрддрд╛рдд.

рдпрд╛рдирдВрддрд░ рдХреЛрдб рдХрдиреЗрдХреНрд╢рди рд╕реНрдЯреНрд░рд┐рдВрдЧ рд╡рд╛рдкрд░реВрди Registry Manager рд╣реЗрд▓реНрдкрд░ рдХреНрд▓рд╛рд╕рдЪреЗ рдПрдХ рдЙрджрд╛рд╣рд░рдг рддрдпрд╛рд░ рдХрд░рддреЛ.

1. рдпрд╛рдЦрд╛рд▓реА рдЦрд╛рд▓реАрд▓ рдХреЛрдб рдЬреЛрдбрд╛:

    ```python
    registry_manager.invoke_device_method(device_id, direct_method)

    logging.info('Direct method request sent!')
    ```

    рд╣рд╛ рдХреЛрдб рд░рдЬрд┐рд╕реНрдЯреНрд░рд┐ рдореЕрдиреЗрдЬрд░рд▓рд╛ рдЯреЗрд▓рд┐рдореЗрдЯреНрд░реА рдкрд╛рдард╡рдгрд╛рд▒реНрдпрд╛ рдбрд┐рд╡реНрд╣рд╛рдЗрд╕рд▓рд╛ рдбрд╛рдпрд░реЗрдХреНрдЯ рдореЗрдердб рд░рд┐рдХреНрд╡реЗрд╕реНрдЯ рдкрд╛рдард╡рдгреНрдпрд╛рд╕ рд╕рд╛рдВрдЧрддреЛ.

    > ЁЯТБ рддреБрдореНрд╣реА рдкреВрд░реНрд╡реАрдЪреНрдпрд╛ рдзрдбреНрдпрд╛рдВрдордзреНрдпреЗ MQTT рд╡рд╛рдкрд░реВрди рддрдпрд╛рд░ рдХреЗрд▓реЗрд▓реНрдпрд╛ рдЕреЕрдкрдЪреНрдпрд╛ рдЖрд╡реГрддреНрддреНрдпрд╛рдВрдордзреНрдпреЗ, рд░рд┐рд▓реЗ рдХрдВрдЯреНрд░реЛрд▓ рдХрдорд╛рдВрдбреНрд╕ рд╕рд░реНрд╡ рдбрд┐рд╡реНрд╣рд╛рдЗрд╕рд▓рд╛ рдкрд╛рдард╡рд▓реЗ рдЬрд╛рдд рд╣реЛрддреЗ. рдХреЛрдбрдиреЗ рдЧреГрд╣реАрдд рдзрд░рд▓реЗ рд╣реЛрддреЗ рдХреА рддреБрдордЪреНрдпрд╛рдХрдбреЗ рдлрдХреНрдд рдПрдХрдЪ рдбрд┐рд╡реНрд╣рд╛рдЗрд╕ рдЕрд╕реЗрд▓. рдпрд╛ рдХреЛрдбрдЪреНрдпрд╛ рдЖрд╡реГрддреНрддреАрдд рдореЗрдердб рд░рд┐рдХреНрд╡реЗрд╕реНрдЯ рдПрдХрд╛ рдбрд┐рд╡реНрд╣рд╛рдЗрд╕рд▓рд╛ рдкрд╛рдард╡рд▓реА рдЬрд╛рддреЗ, рддреНрдпрд╛рдореБрд│реЗ рдЬрд░ рддреБрдордЪреНрдпрд╛рдХрдбреЗ рдЕрдиреЗрдХ рд╕реЗрдЯрдЕрдкреНрд╕ рдЕрд╕рддреАрд▓ рддрд░ рдпреЛрдЧреНрдп рдбрд╛рдпрд░реЗрдХреНрдЯ рдореЗрдердб рд░рд┐рдХреНрд╡реЗрд╕реНрдЯ рдпреЛрдЧреНрдп рдбрд┐рд╡реНрд╣рд╛рдЗрд╕рд▓рд╛ рдкрд╛рдард╡рд▓реА рдЬрд╛рдИрд▓.

1. Functions рдЕреЕрдк рдЪрд╛рд▓рд╡рд╛ рдЖрдгрд┐ рдЦрд╛рддреНрд░реА рдХрд░рд╛ рдХреА рддреБрдордЪреЗ IoT рдбрд┐рд╡реНрд╣рд╛рдЗрд╕ рдбреЗрдЯрд╛ рдкрд╛рдард╡рдд рдЖрд╣реЗ. рддреБрдореНрд╣рд╛рд▓рд╛ рд╕рдВрджреЗрд╢ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рд╣реЛрддрд╛рдирд╛ рдЖрдгрд┐ рдбрд╛рдпрд░реЗрдХреНрдЯ рдореЗрдердб рд░рд┐рдХреНрд╡реЗрд╕реНрдЯ рдкрд╛рдард╡рд▓реА рдЬрд╛рддрд╛рдирд╛ рджрд┐рд╕реЗрд▓. рдорд╛рддреАрддреАрд▓ рдУрд▓рд╛рд╡рд╛ рд╕реЗрдиреНрд╕рд░ рдорд╛рддреАрдордзреНрдпреЗ рдЖрдгрд┐ рдмрд╛рд╣реЗрд░ рд╣рд▓рд╡рд╛, рдореВрд▓реНрдпреЗ рдмрджрд▓рддрд╛рдирд╛ рдЖрдгрд┐ рд░рд┐рд▓реЗ рдЪрд╛рд▓реВ/рдмрдВрдж рд╣реЛрддрд╛рдирд╛ рдкрд╛рд╣рд╛.

> ЁЯТБ рддреБрдореНрд╣реА рд╣рд╛ рдХреЛрдб [code/functions](../../../../../2-farm/lessons/5-migrate-application-to-the-cloud/code/functions) рдлреЛрд▓реНрдбрд░рдордзреНрдпреЗ рд╢реЛрдзреВ рд╢рдХрддрд╛.

## рддреБрдордЪрд╛ рд╕рд░реНрд╡реНрд╣рд░рд▓реЗрд╕ рдХреЛрдб рдХреНрд▓рд╛рдЙрдбрд╡рд░ рдбрд┐рдкреНрд▓реЙрдп рдХрд░рд╛

рддреБрдордЪрд╛ рдХреЛрдб рдЖрддрд╛ рд╕реНрдерд╛рдирд┐рдХ рдкрд╛рддрд│реАрд╡рд░ рдХрд╛рд░реНрдпрд░рдд рдЖрд╣реЗ, рддреНрдпрд╛рдореБрд│реЗ рдкреБрдвреАрд▓ рдкрд╛рдпрд░реА рдореНрд╣рдгрдЬреЗ Functions рдЕреЕрдк рдХреНрд▓рд╛рдЙрдбрд╡рд░ рдбрд┐рдкреНрд▓реЙрдп рдХрд░рдгреЗ.

### рдХрд╛рд░реНрдп - рдХреНрд▓рд╛рдЙрдб рд╕рдВрд╕рд╛рдзрдиреЗ рддрдпрд╛рд░ рдХрд░рд╛

рддреБрдордЪреЗ Functions рдЕреЕрдк Azure рдордзреАрд▓ Functions рдЕреЕрдк рд╕рдВрд╕рд╛рдзрдирд╛рд╡рд░ рдбрд┐рдкреНрд▓реЙрдп рдХрд░рдгреЗ рдЖрд╡рд╢реНрдпрдХ рдЖрд╣реЗ, рдЬреЗ рддреБрдореНрд╣реА рддреБрдордЪреНрдпрд╛ IoT Hub рд╕рд╛рдареА рддрдпрд╛рд░ рдХреЗрд▓реЗрд▓реНрдпрд╛ Resource Group рдордзреНрдпреЗ рд░рд╛рд╣реАрд▓. рддреБрдореНрд╣рд╛рд▓рд╛ Azure рдордзреНрдпреЗ рдПрдХ Storage Account рджреЗрдЦреАрд▓ рддрдпрд╛рд░ рдХрд░рдгреЗ рдЖрд╡рд╢реНрдпрдХ рдЖрд╣реЗ, рдЬреЗ рддреБрдореНрд╣реА рд╕реНрдерд╛рдирд┐рдХ рдкрд╛рддрд│реАрд╡рд░ рдЪрд╛рд▓рд╡рд▓реЗрд▓реНрдпрд╛ рдПрдореНрдпреБрд▓реЗрдЯреЗрдб рд╕реНрдЯреЛрд░реЗрдЬрдЪреА рдЬрд╛рдЧрд╛ рдШреЗрдИрд▓.

1. рд╕реНрдЯреЛрд░реЗрдЬ рдЕрдХрд╛рдЙрдВрдЯ рддрдпрд╛рд░ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдЦрд╛рд▓реАрд▓ рдХрдорд╛рдВрдб рдЪрд╛рд▓рд╡рд╛:

    ```sh
    az storage account create --resource-group soil-moisture-sensor \
                              --sku Standard_LRS \
                              --name <storage_name> 
    ```

    `<storage_name>` рдЪреНрдпрд╛ рдЬрд╛рдЧреА рддреБрдордЪреНрдпрд╛ рд╕реНрдЯреЛрд░реЗрдЬ рдЕрдХрд╛рдЙрдВрдЯрд╕рд╛рдареА рдирд╛рд╡ рджреНрдпрд╛. рд╣реЗ рдирд╛рд╡ рдЬрд╛рдЧрддрд┐рдХ рд╕реНрддрд░рд╛рд╡рд░ рдЕрджреНрд╡рд┐рддреАрдп рдЕрд╕рдгреЗ рдЖрд╡рд╢реНрдпрдХ рдЖрд╣реЗ рдХрд╛рд░рдг рддреЗ рд╕реНрдЯреЛрд░реЗрдЬ рдЕрдХрд╛рдЙрдВрдЯрдордзреНрдпреЗ рдкреНрд░рд╡реЗрд╢ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рд╡рд╛рдкрд░рд▓реНрдпрд╛ рдЬрд╛рдгрд╛рд▒реНрдпрд╛ URL рдЪрд╛ рднрд╛рдЧ рдмрдирддреЗ. рддреБрдореНрд╣реА рдлрдХреНрдд рд▓рд╣рд╛рди рдЕрдХреНрд╖рд░реЗ рдЖрдгрд┐ рдЕрдВрдХ рд╡рд╛рдкрд░реВ рд╢рдХрддрд╛, рдЗрддрд░ рдХреЛрдгрддреЗрд╣реА рд╡рд░реНрдг рдирд╛рд╣реАрдд, рдЖрдгрд┐ рд╣реЗ 24 рд╡рд░реНрдгрд╛рдВрдкрд░реНрдпрдВрдд рдорд░реНрдпрд╛рджрд┐рдд рдЖрд╣реЗ. `sms` рд╕рд╛рд░рдЦреЗ рдХрд╛рд╣реАрддрд░реА рд╡рд╛рдкрд░рд╛ рдЖрдгрд┐ рд╢реЗрд╡рдЯреА рдХрд╛рд╣реА рдЕрджреНрд╡рд┐рддреАрдп рдУрд│рдЦрдХрд░реНрддрд╛ рдЬреЛрдбрд╛, рдЬрд╕реЗ рдХреА рдХрд╛рд╣реА рд░рдБрдбрдо рд╢рдмреНрдж рдХрд┐рдВрд╡рд╛ рддреБрдордЪреЗ рдирд╛рд╡.

    `--sku Standard_LRS` рдХрд┐рдВрдордд рд╕реНрддрд░ рдирд┐рд╡рдбрддреЛ, рд╕рд░реНрд╡рд╛рдд рдХрдореА рдЦрд░реНрдЪрд╛рдЪрд╛ рд╕рд╛рдорд╛рдиреНрдп-рдЙрджреНрджреЗрд╢ рдЕрдХрд╛рдЙрдВрдЯ рдирд┐рд╡рдбрддреЛ. рд╕реНрдЯреЛрд░реЗрдЬрд╕рд╛рдареА рдореЛрдлрдд рд╕реНрддрд░ рдирд╛рд╣реА, рдЖрдгрд┐ рддреБрдореНрд╣реА рдЬреЗ рд╡рд╛рдкрд░рддрд╛ рддреНрдпрд╛рд╕рд╛рдареА рдкреИрд╕реЗ рджреЗрддрд╛. рдЦрд░реНрдЪ рддреБрд▓рдиреЗрдиреЗ рдХрдореА рдЖрд╣реЗрдд, рд╕рд░реНрд╡рд╛рдд рдорд╣рд╛рдЧ рд╕реНрдЯреЛрд░реЗрдЬ рдкреНрд░рддрд┐ рдЧрд┐рдЧрд╛рдмрд╛рдЗрдЯ рд╕рд╛рдард╡рд▓реЗрд▓реНрдпрд╛ рдкреНрд░рддрд┐ рдорд╣рд┐рдиреНрдпрд╛рд▓рд╛ US$0.05 рдкреЗрдХреНрд╖рд╛ рдХрдореА рдЖрд╣реЗ.

    тЬЕ рдХрд┐рдВрдорддреАрдмрджреНрджрд▓ [Azure Storage Account pricing page](https://azure.microsoft.com/pricing/details/storage/?WT.mc_id=academic-17441-jabenn) рд╡рд░ рд╡рд╛рдЪрд╛.

1. Functions рдЕреЕрдк рддрдпрд╛рд░ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдЦрд╛рд▓реАрд▓ рдХрдорд╛рдВрдб рдЪрд╛рд▓рд╡рд╛:

    ```sh
    az functionapp create --resource-group soil-moisture-sensor \
                          --runtime python \
                          --functions-version 3 \
                          --os-type Linux \
                          --consumption-plan-location <location> \
                          --storage-account <storage_name> \
                          --name <functions_app_name>
    ```

    `<location>` рдЪреНрдпрд╛ рдЬрд╛рдЧреА рддреБрдореНрд╣реА рдорд╛рдЧреАрд▓ рдзрдбреНрдпрд╛рдд Resource Group рддрдпрд╛рд░ рдХрд░рддрд╛рдирд╛ рд╡рд╛рдкрд░рд▓реЗрд▓реЗ рд╕реНрдерд╛рди рджреНрдпрд╛.

    `<storage_name>` рдЪреНрдпрд╛ рдЬрд╛рдЧреА рддреБрдореНрд╣реА рдорд╛рдЧреАрд▓ рдкрд╛рдпрд░реАрдд рддрдпрд╛рд░ рдХреЗрд▓реЗрд▓реНрдпрд╛ рд╕реНрдЯреЛрд░реЗрдЬ рдЕрдХрд╛рдЙрдВрдЯрдЪреЗ рдирд╛рд╡ рджреНрдпрд╛.

    `<functions_app_name>` рдЪреНрдпрд╛ рдЬрд╛рдЧреА рддреБрдордЪреНрдпрд╛ Functions рдЕреЕрдкрд╕рд╛рдареА рдЕрджреНрд╡рд┐рддреАрдп рдирд╛рд╡ рджреНрдпрд╛. рд╣реЗ рдирд╛рд╡ рдЬрд╛рдЧрддрд┐рдХ рд╕реНрддрд░рд╛рд╡рд░ рдЕрджреНрд╡рд┐рддреАрдп рдЕрд╕рдгреЗ рдЖрд╡рд╢реНрдпрдХ рдЖрд╣реЗ рдХрд╛рд░рдг рддреЗ Functions рдЕреЕрдкрдордзреНрдпреЗ рдкреНрд░рд╡реЗрд╢ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рд╡рд╛рдкрд░рд▓реНрдпрд╛ рдЬрд╛рдгрд╛рд▒реНрдпрд╛ URL рдЪрд╛ рднрд╛рдЧ рдмрдирддреЗ. `soil-moisture-sensor-` рд╕рд╛рд░рдЦреЗ рдХрд╛рд╣реАрддрд░реА рд╡рд╛рдкрд░рд╛ рдЖрдгрд┐ рд╢реЗрд╡рдЯреА рдХрд╛рд╣реА рдЕрджреНрд╡рд┐рддреАрдп рдУрд│рдЦрдХрд░реНрддрд╛ рдЬреЛрдбрд╛, рдЬрд╕реЗ рдХреА рдХрд╛рд╣реА рд░рдБрдбрдо рд╢рдмреНрдж рдХрд┐рдВрд╡рд╛ рддреБрдордЪреЗ рдирд╛рд╡.

    `--functions-version 3` рдкрд░реНрдпрд╛рдп Azure Functions рдЪрд╛ рдЖрд╡реГрддреНрддреА рд╕реЗрдЯ рдХрд░рддреЛ. рдЖрд╡реГрддреНрддреА 3 рд╣реА рдирд╡реАрдирддрдо рдЖрд╡реГрддреНрддреА рдЖрд╣реЗ.

    `--os-type Linux` Functions runtime рд▓рд╛ Linux OS рд╡рд╛рдкрд░рдгреНрдпрд╛рд╕ рд╕рд╛рдВрдЧрддреЗ. Functions Linux рдХрд┐рдВрд╡рд╛ Windows рд╡рд░ рд╣реЛрд╕реНрдЯ рдХреЗрд▓реЗ рдЬрд╛рдК рд╢рдХрддрд╛рдд, рд╡рд╛рдкрд░рд▓реНрдпрд╛ рдЬрд╛рдгрд╛рд▒реНрдпрд╛ рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рднрд╛рд╖реЗрд╡рд░ рдЕрд╡рд▓рдВрдмреВрди. Python рдЕреЕрдкреНрд╕ рдлрдХреНрдд Linux рд╡рд░ рд╕рдорд░реНрдерд┐рдд рдЖрд╣реЗрдд.

### рдХрд╛рд░реНрдп - рддреБрдордЪреА рдЕреЕрдкреНрд▓рд┐рдХреЗрд╢рди рд╕реЗрдЯрд┐рдВрдЧреНрдЬ рдЕрдкрд▓реЛрдб рдХрд░рд╛

рддреБрдореНрд╣реА рддреБрдордЪреЗ Functions рдЕреЕрдк рд╡рд┐рдХрд╕рд┐рдд рдХрд░рддрд╛рдирд╛, рддреБрдордЪреНрдпрд╛ IoT Hub рд╕рд╛рдареА рдХрдиреЗрдХреНрд╢рди рд╕реНрдЯреНрд░рд┐рдВрдЧреНрдЬрд╕рд╛рдареА `local.settings.json` рдлрд╛рдЗрд▓рдордзреНрдпреЗ рдХрд╛рд╣реА рд╕реЗрдЯрд┐рдВрдЧреНрдЬ рд╕рдВрдЧреНрд░рд╣рд┐рдд рдХреЗрд▓реНрдпрд╛. рдпрд╛ рд╕реЗрдЯрд┐рдВрдЧреНрдЬ Azure рдордзреАрд▓ Application Settings рдордзреНрдпреЗ рд▓рд┐рд╣рд┐рдгреЗ рдЖрд╡рд╢реНрдпрдХ рдЖрд╣реЗ рдЬреЗрдгреЗрдХрд░реВрди рддреБрдордЪреНрдпрд╛ рдХреЛрдбрджреНрд╡рд╛рд░реЗ рд╡рд╛рдкрд░рддрд╛ рдпреЗрддреАрд▓.

> ЁЯОУ `local.settings.json` рдлрд╛рдЗрд▓ рдлрдХреНрдд рд╕реНрдерд╛рдирд┐рдХ рд╡рд┐рдХрд╛рд╕ рд╕реЗрдЯрд┐рдВрдЧреНрдЬрд╕рд╛рдареА рдЖрд╣реЗ, рдЖрдгрд┐ рддреА GitHub рд╕рд╛рд░рдЦреНрдпрд╛ рд╕реНрд░реЛрдд рдХреЛрдб рдХрдВрдЯреНрд░реЛрд▓рдордзреНрдпреЗ рддрдкрд╛рд╕рд▓реА рдЬрд╛рдК рдирдпреЗ. рдХреНрд▓рд╛рдЙрдбрд╡рд░ рдбрд┐рдкреНрд▓реЙрдп рдХреЗрд▓реНрдпрд╛рд╡рд░, Application Settings рд╡рд╛рдкрд░рд▓реНрдпрд╛ рдЬрд╛рддрд╛рдд. Application Settings рд╣реЗ рдХреА/рдореВрд▓реНрдп рдЬреЛрдбреНрдпрд╛ рдЖрд╣реЗрдд, рдХреНрд▓рд╛рдЙрдбрдордзреНрдпреЗ рд╣реЛрд╕реНрдЯ рдХреЗрд▓реНрдпрд╛ рдЬрд╛рддрд╛рдд рдЖрдгрд┐ рдкрд░реНрдпрд╛рд╡рд░рдгреАрдп рд╡реНрд╣реЗрд░рд┐рдПрдмрд▓реНрд╕рдордзреВрди рд╡рд╛рдЪрд▓реНрдпрд╛ рдЬрд╛рддрд╛рдд, рддреБрдордЪреНрдпрд╛ рдХреЛрдбрдордзреНрдпреЗ рдХрд┐рдВрд╡рд╛ IoT Hub рд╢реА рдХрдиреЗрдХреНрдЯ рдХрд░рддрд╛рдирд╛ runtime рджреНрд╡рд╛рд░реЗ.

1. Functions рдЕреЕрдк Application Settings рдордзреНрдпреЗ `IOT_HUB_CONNECTION_STRING` рд╕реЗрдЯрд┐рдВрдЧ рд╕реЗрдЯ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдЦрд╛рд▓реАрд▓ рдХрдорд╛рдВрдб рдЪрд╛рд▓рд╡рд╛:

    ```sh
    az functionapp config appsettings set --resource-group soil-moisture-sensor \
                                          --name <functions_app_name> \
                                          --settings "IOT_HUB_CONNECTION_STRING=<connection string>"
    ```

    `<functions_app_name>` рдЪреНрдпрд╛ рдЬрд╛рдЧреА рддреБрдореНрд╣реА рддреБрдордЪреНрдпрд╛ Functions рдЕреЕрдкрд╕рд╛рдареА рд╡рд╛рдкрд░рд▓реЗрд▓реЗ рдирд╛рд╡ рджреНрдпрд╛.

    `<connection string>` рдЪреНрдпрд╛ рдЬрд╛рдЧреА рддреБрдордЪреНрдпрд╛ `local.settings.json` рдлрд╛рдЗрд▓рдордзреАрд▓ `IOT_HUB_CONNECTION_STRING` рдЪреЗ рдореВрд▓реНрдп рджреНрдпрд╛.

1. рд╡рд░рдЪреНрдпрд╛ рдкрд╛рдпрд░реАрдЪреА рдкреБрдирд░рд╛рд╡реГрддреНрддреА рдХрд░рд╛, рдкрдг `REGISTRY_MANAGER_CONNECTION_STRING` рдЪреЗ рдореВрд▓реНрдп `local.settings.json` рдлрд╛рдЗрд▓рдордзреАрд▓ рд╕рдВрдмрдВрдзрд┐рдд рдореВрд▓реНрдпрд╛рд╡рд░ рд╕реЗрдЯ рдХрд░рд╛.

рдЬреЗрд╡реНрд╣рд╛ рддреБрдореНрд╣реА рд╣реЗ рдХрдорд╛рдВрдб рдЪрд╛рд▓рд╡рддрд╛, рддреЗрд╡реНрд╣рд╛ рддреЗ Functions рдЕреЕрдкрд╕рд╛рдареА рд╕рд░реНрд╡ Application Settings рдЪреА рдпрд╛рджреА рджреЗрдЦреАрд▓ рдЖрдЙрдЯрдкреБрдЯ рдХрд░рддреАрд▓. рддреБрдореНрд╣реА рддреБрдордЪреА рдореВрд▓реНрдпреЗ рдпреЛрдЧреНрдпрд░рд┐рддреНрдпрд╛ рд╕реЗрдЯ рдХреЗрд▓реА рдЖрд╣реЗрдд рдХреА рдирд╛рд╣реА рд╣реЗ рддрдкрд╛рд╕рдгреНрдпрд╛рд╕рд╛рдареА рдпрд╛рдЪрд╛ рд╡рд╛рдкрд░ рдХрд░реВ рд╢рдХрддрд╛.

> ЁЯТБ рддреБрдореНрд╣рд╛рд▓рд╛ `AzureWebJobsStorage` рд╕рд╛рдареА рдЖрдзреАрдЪ рд╕реЗрдЯ рдХреЗрд▓реЗрд▓реЗ рдореВрд▓реНрдп рджрд┐рд╕реЗрд▓. рддреБрдордЪреНрдпрд╛ `local.settings.json` рдлрд╛рдЗрд▓рдордзреНрдпреЗ, рд╣реЗ рд╕реНрдерд╛рдирд┐рдХ рд╕реНрдЯреЛрд░реЗрдЬ рдПрдореНрдпреБрд▓реЗрдЯрд░ рд╡рд╛рдкрд░рдгреНрдпрд╛рд╕рд╛рдареА рд╕реЗрдЯ рдХреЗрд▓реЗ рд╣реЛрддреЗ. рдЬреЗрд╡реНрд╣рд╛ рддреБрдореНрд╣реА Functions рдЕреЕрдк рддрдпрд╛рд░ рдХреЗрд▓реЗ, рддреЗрд╡реНрд╣рд╛ рддреБрдореНрд╣реА рд╕реНрдЯреЛрд░реЗрдЬ рдЕрдХрд╛рдЙрдВрдЯ рдкреЕрд░рд╛рдореАрдЯрд░ рдореНрд╣рдгреВрди рдкрд╛рд╕ рдХреЗрд▓реЗ, рдЖрдгрд┐ рд╣реЗ рд╕реЗрдЯрд┐рдВрдЧрдордзреНрдпреЗ рд╕реНрд╡рдпрдВрдЪрд▓рд┐рддрдкрдгреЗ рд╕реЗрдЯ рдХреЗрд▓реЗ рдЬрд╛рддреЗ.

### рдХрд╛рд░реНрдп - рддреБрдордЪреЗ Functions рдЕреЕрдк рдХреНрд▓рд╛рдЙрдбрд╡рд░ рдбрд┐рдкреНрд▓реЙрдп рдХрд░рд╛

рдЖрддрд╛ Functions рдЕреЕрдк рддрдпрд╛рд░ рдЖрд╣реЗ, рддреБрдордЪрд╛ рдХреЛрдб рдбрд┐рдкреНрд▓реЙрдп рдХреЗрд▓рд╛ рдЬрд╛рдК рд╢рдХрддреЛ.

1. рддреБрдордЪреНрдпрд╛ Functions рдЕреЕрдкрд▓рд╛ рдкреНрд░рдХрд╛рд╢рд┐рдд рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА VS Code рдЯрд░реНрдорд┐рдирд▓рдордзреВрди рдЦрд╛рд▓реАрд▓ рдХрдорд╛рдВрдб рдЪрд╛рд▓рд╡рд╛:

    ```sh
    func azure functionapp publish <functions_app_name>
    ```

    `<functions_app_name>` рдЪреНрдпрд╛ рдЬрд╛рдЧреА рддреБрдореНрд╣реА рддреБрдордЪреНрдпрд╛ Functions рдЕреЕрдкрд╕рд╛рдареА рд╡рд╛рдкрд░рд▓реЗрд▓реЗ рдирд╛рд╡ рджреНрдпрд╛.

рдХреЛрдб рдкреЕрдХреЗрдЬ рдХреЗрд▓рд╛ рдЬрд╛рдИрд▓ рдЖрдгрд┐ Functions рдЕреЕрдкрд▓рд╛ рдкрд╛рдард╡рд▓рд╛ рдЬрд╛рдИрд▓, рдЬрд┐рдереЗ рддреЛ рдбрд┐рдкреНрд▓реЙрдп рдЖрдгрд┐ рд╕реБрд░реВ рдХреЗрд▓рд╛ рдЬрд╛рдИрд▓. рдмрд░реЗрдЪ рдХрдиреНрд╕реЛрд▓ рдЖрдЙрдЯрдкреБрдЯ рдЕрд╕реЗрд▓, рдбрд┐рдкреНрд▓реЙрдпрдореЗрдВрдЯрдЪреА рдкреБрд╖реНрдЯреА рдЖрдгрд┐ рдбрд┐рдкреНрд▓реЙрдп рдХреЗрд▓реЗрд▓реНрдпрд╛ рдлрдВрдХреНрд╢рдиреНрд╕рдЪреА рдпрд╛рджреА рд╕рдорд╛рдкреНрдд рд╣реЛрдИрд▓. рдпрд╛ рдкреНрд░рдХрд░рдгрд╛рдд рдпрд╛рджреАрдордзреНрдпреЗ рдлрдХреНрдд рдЯреНрд░рд┐рдЧрд░ рдЕрд╕реЗрд▓.

```output
Deployment successful.
Remote build succeeded!
Syncing triggers...
Functions in soil-moisture-sensor:
    iot-hub-trigger - [eventHubTrigger]
```

рддреБрдордЪреЗ IoT рдбрд┐рд╡реНрд╣рд╛рдЗрд╕ рдЪрд╛рд▓реВ рдЕрд╕рд▓реНрдпрд╛рдЪреА рдЦрд╛рддреНрд░реА рдХрд░рд╛. рдорд╛рддреАрддреАрд▓ рдУрд▓рд╛рд╡рд╛ рдмрджрд▓рдгреНрдпрд╛рд╕рд╛рдареА рдорд╛рддреАрддреАрд▓ рдУрд▓рд╛рд╡рд╛ рд╕рдорд╛рдпреЛрдЬрд┐рдд рдХрд░рд╛, рдХрд┐рдВрд╡рд╛ рд╕реЗрдиреНрд╕рд░ рдорд╛рддреАрдордзреНрдпреЗ рдЖрдгрд┐ рдмрд╛рд╣реЗрд░ рд╣рд▓рд╡рд╛. рддреБрдореНрд╣рд╛рд▓рд╛ рдорд╛рддреАрддреАрд▓ рдУрд▓рд╛рд╡рд╛ рдмрджрд▓рд▓реНрдпрд╛рд╡рд░ рд░рд┐рд▓реЗ рдЪрд╛рд▓реВ/рдмрдВрдж рд╣реЛрддрд╛рдирд╛ рджрд┐рд╕реЗрд▓.

---

## ЁЯЪА рдЖрд╡реНрд╣рд╛рди

рдорд╛рдЧреАрд▓ рдзрдбреНрдпрд╛рдд, рддреБрдореНрд╣реА рд░рд┐рд▓реЗрд╕рд╛рдареА рдЯрд╛рдЗрдорд┐рдВрдЧ рд╡реНрдпрд╡рд╕реНрдерд╛рдкрд┐рдд рдХреЗрд▓реЗ рд╣реЛрддреЗ, рд░рд┐рд▓реЗ рдЪрд╛рд▓реВ рдЕрд╕рддрд╛рдирд╛ рдЖрдгрд┐ рдмрдВрдж рдЭрд╛рд▓реНрдпрд╛рдирдВрддрд░ рдереЛрдбреНрдпрд╛ рд╡реЗрд│рд╛рдиреЗ MQTT рд╕рдВрджреЗрд╢рд╛рдВрдордзреВрди рдЕрдирд╕рдмрд╕реНрдХреНрд░рд╛рдЗрдм рдХрд░реВрди. рддреБрдореНрд╣реА рдпреЗрдереЗ рд╣реА рдкрджреНрдзрдд рд╡рд╛рдкрд░реВ рд╢рдХрдд рдирд╛рд╣реА - рддреБрдореНрд╣реА рддреБрдордЪреНрдпрд╛ IoT Hub рдЯреНрд░рд┐рдЧрд░рд▓рд╛ рдЕрдирд╕рдмрд╕реНрдХреНрд░рд╛рдЗрдм рдХрд░реВ рд╢рдХрдд рдирд╛рд╣реА.

рддреБрдордЪреНрдпрд╛ Functions рдЕреЕрдкрдордзреНрдпреЗ рд╣реЗ рд╣рд╛рддрд╛рд│рдгреНрдпрд╛рд╕рд╛рдареА рддреБрдореНрд╣реА рд╡реЗрдЧрд╡реЗрдЧрд│реНрдпрд╛ рдкрджреНрдзрддреАрдВрдЪрд╛ рд╡рд┐рдЪрд╛рд░ рдХрд░реВ рд╢рдХрддрд╛.

## рдзрдбреНрдпрд╛рдирдВрддрд░рдЪрд╛ рдХреНрд╡рд┐рдЭ

[рдзрдбреНрдпрд╛рдирдВрддрд░рдЪрд╛ рдХреНрд╡рд┐рдЭ](https://black-meadow-040d15503.1.azurestaticapps.net/quiz/18)

## рдкреБрдирд░рд╛рд╡рд▓реЛрдХрди рдЖрдгрд┐ рд╕реНрд╡-рдЕрднреНрдпрд╛рд╕

* [Serverless Computing page on Wikipedia](https://wikipedia.org/wiki/Serverless_computing) рд╡рд░ рд╕рд░реНрд╡реНрд╣рд░рд▓реЗрд╕ рдХрдВрдкреНрдпреБрдЯрд┐рдВрдЧрдмрджреНрджрд▓ рд╡рд╛рдЪрд╛.
* Azure рдордзреНрдпреЗ рд╕рд░реНрд╡реНрд╣рд░рд▓реЗрд╕ рд╡рд╛рдкрд░рдгреНрдпрд╛рдмрджреНрджрд▓ рд╡рд╛рдЪрд╛, рдЬреНрдпрд╛рдордзреНрдпреЗ [Go serverless for your IoT needs Azure blog post](https://azure.microsoft.com/blog/go-serverless-for-your-iot-needs/?WT.mc_id=academic-17441-jabenn) рд╡рд░ рдЖрдгрдЦреА рдХрд╛рд╣реА рдЙрджрд╛рд╣рд░рдгреЗ рдЖрд╣реЗрдд.
* [Azure Functions YouTube channel](https://www.youtube.com/c/AzureFunctions) рд╡рд░ Azure Functions рдмрджреНрджрд▓ рдЕрдзрд┐рдХ рдЬрд╛рдгреВрди рдШреНрдпрд╛.

## рдЕрд╕рд╛рдЗрдирдореЗрдВрдЯ

[рдореЕрдиреНрдпреБрдЕрд▓ рд░рд┐рд▓реЗ рдХрдВрдЯреНрд░реЛрд▓ рдЬреЛрдбрд╛](assignment.md)

---

**рдЕрд╕реНрд╡реАрдХрд░рдг**:  
рд╣рд╛ рджрд╕реНрддрдРрд╡рдЬ AI рднрд╛рд╖рд╛рдВрддрд░ рд╕реЗрд╡рд╛ [Co-op Translator](https://github.com/Azure/co-op-translator) рдЪрд╛ рд╡рд╛рдкрд░ рдХрд░реВрди рднрд╛рд╖рд╛рдВрддрд░рд┐рдд рдХрд░рдгреНрдпрд╛рдд рдЖрд▓рд╛ рдЖрд╣реЗ. рдЖрдореНрд╣реА рдЕрдЪреВрдХрддреЗрд╕рд╛рдареА рдкреНрд░рдпрддреНрдирд╢реАрд▓ рдЕрд╕рд▓реЛ рддрд░реА, рдХреГрдкрдпрд╛ рд▓рдХреНрд╖рд╛рдд рдШреНрдпрд╛ рдХреА рд╕реНрд╡рдпрдВрдЪрд▓рд┐рдд рднрд╛рд╖рд╛рдВрддрд░рд╛рдВрдордзреНрдпреЗ рддреНрд░реБрдЯреА рдХрд┐рдВрд╡рд╛ рдЕрдЪреВрдХрддреЗрдЪрд╛ рдЕрднрд╛рд╡ рдЕрд╕реВ рд╢рдХрддреЛ. рдореВрд│ рднрд╛рд╖реЗрддреАрд▓ рджрд╕реНрддрдРрд╡рдЬ рд╣рд╛ рдЕрдзрд┐рдХреГрдд рд╕реНрд░реЛрдд рдорд╛рдирд▓рд╛ рдЬрд╛рд╡рд╛. рдорд╣рддреНрддреНрд╡рд╛рдЪреНрдпрд╛ рдорд╛рд╣рд┐рддреАрд╕рд╛рдареА рд╡реНрдпрд╛рд╡рд╕рд╛рдпрд┐рдХ рдорд╛рдирд╡реА рднрд╛рд╖рд╛рдВрддрд░рд╛рдЪреА рд╢рд┐рдлрд╛рд░рд╕ рдХреЗрд▓реА рдЬрд╛рддреЗ. рдпрд╛ рднрд╛рд╖рд╛рдВрддрд░рд╛рдЪрд╛ рд╡рд╛рдкрд░ рдХреЗрд▓реНрдпрд╛рдореБрд│реЗ рдЙрджреНрднрд╡рдгрд╛рд▒реНрдпрд╛ рдХреЛрдгрддреНрдпрд╛рд╣реА рдЧреИрд░рд╕рдордЬ рдХрд┐рдВрд╡рд╛ рдЪреБрдХреАрдЪреНрдпрд╛ рдЕрд░реНрдерд╛рд╕рд╛рдареА рдЖрдореНрд╣реА рдЬрдмрд╛рдмрджрд╛рд░ рд░рд╛рд╣рдгрд╛рд░ рдирд╛рд╣реА.