<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "160be8c0f558687f6686dca64f10f739",
  "translation_date": "2025-08-27T10:27:15+00:00",
  "source_file": "4-manufacturing/lessons/2-check-fruit-from-device/wio-terminal-camera.md",
  "language_code": "mr"
}
-->
# рдкреНрд░рддрд┐рдорд╛ рдХреЕрдкреНрдЪрд░ рдХрд░рд╛ - Wio Terminal

рдпрд╛ рдзрдбреНрдпрд╛рдЪреНрдпрд╛ рднрд╛рдЧрд╛рдд, рддреБрдореНрд╣реА Wio Terminal рд▓рд╛ рдХреЕрдореЗрд░рд╛ рдЬреЛрдбрд╛рд▓ рдЖрдгрд┐ рддреНрдпрд╛рддреВрди рдкреНрд░рддрд┐рдорд╛ рдХреЕрдкреНрдЪрд░ рдХрд░рд╛рд▓.

## рд╣рд╛рд░реНрдбрд╡реЗрдЕрд░

Wio Terminal рд╕рд╛рдареА рдХреЕрдореЗрд░рд╛ рдЖрд╡рд╢реНрдпрдХ рдЖрд╣реЗ.

рддреБрдореНрд╣реА рд╡рд╛рдкрд░рдгрд╛рд░рд╛ рдХреЕрдореЗрд░рд╛ [ArduCam Mini 2MP Plus](https://www.arducam.com/product/arducam-2mp-spi-camera-b0067-arduino/) рдЖрд╣реЗ. рд╣рд╛ 2 рдореЗрдЧрд╛рдкрд┐рдХреНрд╕реЗрд▓ рдХреЕрдореЗрд░рд╛ OV2640 рдЗрдореЗрдЬ рд╕реЗрдиреНрд╕рд░рд╡рд░ рдЖрдзрд╛рд░рд┐рдд рдЖрд╣реЗ. рддреЛ SPI рдЗрдВрдЯрд░рдлреЗрд╕рджреНрд╡рд╛рд░реЗ рд╕рдВрд╡рд╛рдж рд╕рд╛рдзрддреЛ рдЖрдгрд┐ рдкреНрд░рддрд┐рдорд╛ рдХреЕрдкреНрдЪрд░ рдХрд░рддреЛ, рддрд╕реЗрдЪ I2C рд╕реЗрдиреНрд╕рд░ рдХреЙрдиреНрдлрд┐рдЧрд░ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рд╡рд╛рдкрд░рддреЛ.

## рдХреЕрдореЗрд░рд╛ рдХрдиреЗрдХреНрдЯ рдХрд░рд╛

ArduCam рдордзреНрдпреЗ Grove рд╕реЙрдХреЗрдЯ рдирд╛рд╣реА, рддреНрдпрд╛рдРрд╡рдЬреА рддреЛ SPI рдЖрдгрд┐ I2C рдмрд╕ GPIO рдкрд┐рдиреНрд╕рджреНрд╡рд╛рд░реЗ Wio Terminal рд╢реА рдЬреЛрдбрддреЛ.

### рдХрд╛рд░реНрдп - рдХреЕрдореЗрд░рд╛ рдХрдиреЗрдХреНрдЯ рдХрд░рд╛

рдХреЕрдореЗрд░рд╛ рдХрдиреЗрдХреНрдЯ рдХрд░рд╛.

![ArduCam рд╕реЗрдиреНрд╕рд░](../../../../../translated_images/arducam.20e4e4cbb268296570b5914e20d6c349fc42ddac9ed4e1b9deba2188204eebae.mr.png)

1. ArduCam рдЪреНрдпрд╛ рддрд│рд╛рд╢реА рдЕрд╕рд▓реЗрд▓реНрдпрд╛ рдкрд┐рдиреНрд╕ Wio Terminal рдЪреНрдпрд╛ GPIO рдкрд┐рдиреНрд╕рд╢реА рдЬреЛрдбрд▓реНрдпрд╛ рдкрд╛рд╣рд┐рдЬреЗрдд. рдпреЛрдЧреНрдп рдкрд┐рдиреНрд╕ рд╢реЛрдзрдгреЗ рд╕реЛрдкреЗ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА, Wio Terminal рд╕реЛрдмрдд рдпреЗрдгрд╛рд░рд╛ GPIO рдкрд┐рди рд╕реНрдЯрд┐рдХрд░ рдкрд┐рдиреНрд╕рднреЛрд╡рддреА рд▓рд╛рд╡рд╛:

    ![GPIO рдкрд┐рди рд╕реНрдЯрд┐рдХрд░ рдЕрд╕рд▓реЗрд▓рд╛ Wio Terminal](../../../../../translated_images/wio-terminal-pin-sticker.b90b1535937b84bd00d853f0004aea74fac2aec04b43f14b887796b2633f855e.mr.png)

1. рдЬрдВрдкрд░ рд╡рд╛рдпрд░ рд╡рд╛рдкрд░реВрди рдЦрд╛рд▓реАрд▓ рдХрдиреЗрдХреНрд╢рди рдХрд░рд╛:

    | ArduCAM рдкрд┐рди | Wio Terminal рдкрд┐рди | рд╡рд░реНрдгрди                                   |
    | ----------- | ---------------- | --------------------------------------- |
    | CS          | 24 (SPI_CS)      | SPI рдЪрд┐рдк рд╕рд┐рд▓реЗрдХреНрдЯ                         |
    | MOSI        | 19 (SPI_MOSI)    | SPI рдХрдВрдЯреНрд░реЛрд▓рд░ рдЖрдЙрдЯрдкреБрдЯ, рдкреЗрд░рд┐рдлреЗрд░рд▓ рдЗрдирдкреБрдЯ     |
    | MISO        | 21 (SPI_MISO)    | SPI рдХрдВрдЯреНрд░реЛрд▓рд░ рдЗрдирдкреБрдЯ, рдкреЗрд░рд┐рдлреЗрд░рд▓ рдЖрдЙрдЯрдкреБрдЯ     |
    | SCK         | 23 (SPI_SCLK)    | SPI рд╕рд┐рд░рд┐рдпрд▓ рдХреНрд▓реЙрдХ                        |
    | GND         | 6 (GND)          | рдЧреНрд░рд╛рдЙрдВрдб - 0V                            |
    | VCC         | 4 (5V)           | 5V рдкреЙрд╡рд░ рд╕рдкреНрд▓рд╛рдп                          |
    | SDA         | 3 (I2C1_SDA)     | I2C рд╕рд┐рд░рд┐рдпрд▓ рдбреЗрдЯрд╛                         |
    | SCL         | 5 (I2C1_SCL)     | I2C рд╕рд┐рд░рд┐рдпрд▓ рдХреНрд▓реЙрдХ                        |

    ![рдЬрдВрдкрд░ рд╡рд╛рдпрд░рдиреЗ ArduCam Wio Terminal рд╢реА рдЬреЛрдбрд▓реЗрд▓рд╛](../../../../../translated_images/arducam-wio-terminal-connections.a4d5a4049bdb5ab800a2877389fc6ecf5e4ff307e6451ff56c517e6786467d0a.mr.png)

    GND рдЖрдгрд┐ VCC рдХрдиреЗрдХреНрд╢рди ArduCam рд▓рд╛ 5V рдкреЙрд╡рд░ рд╕рдкреНрд▓рд╛рдп рдкреНрд░рджрд╛рди рдХрд░рддрд╛рдд. рддреЛ 5V рд╡рд░ рдЪрд╛рд▓рддреЛ, Grove рд╕реЗрдиреНрд╕рд░реНрд╕рдЪреНрдпрд╛ рд╡рд┐рдкрд░реАрдд рдЬреЗ 3V рд╡рд░ рдЪрд╛рд▓рддрд╛рдд. рд╣реЗ рдкреЙрд╡рд░ рдереЗрдЯ USB-C рдХрдиреЗрдХреНрд╢рдирдордзреВрди рдпреЗрддреЗ рдЬреЗ рдбрд┐рд╡реНрд╣рд╛рдЗрд╕рд▓рд╛ рдкреЙрд╡рд░ рдкреБрд░рд╡рддреЗ.

    > ЁЯТБ SPI рдХрдиреЗрдХреНрд╢рдирд╕рд╛рдареА ArduCam рдЖрдгрд┐ Wio Terminal рдкрд┐рди рд▓реЗрдмрд▓реНрд╕ рдХреЛрдбрдордзреНрдпреЗ рдЬреБрдиреНрдпрд╛ рдирд╛рдордХрд░рдг рдкрджреНрдзрддреАрдЪрд╛ рд╡рд╛рдкрд░ рдХрд░рддрд╛рдд. рдпрд╛ рдзрдбреНрдпрд╛рдЪреНрдпрд╛ рд╕реВрдЪрдирд╛ рдирд╡реАрди рдирд╛рдордХрд░рдг рдкрджреНрдзрддреАрдЪрд╛ рд╡рд╛рдкрд░ рдХрд░рддреАрд▓, рдлрдХреНрдд рдХреЛрдбрдордзреНрдпреЗ рдкрд┐рди рдирд╛рд╡реЗ рд╡рд╛рдкрд░рд▓реА рдЬрд╛рддрд╛рдд рддреЗрд╡реНрд╣рд╛ рд╡рдЧрд│рддрд╛.

1. рдЖрддрд╛ рддреБрдореНрд╣реА Wio Terminal рддреБрдордЪреНрдпрд╛ рд╕рдВрдЧрдгрдХрд╛рд╢реА рдХрдиреЗрдХреНрдЯ рдХрд░реВ рд╢рдХрддрд╛.

## рдХреЕрдореЗрд░рд╛ рдХрдиреЗрдХреНрдЯ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдбрд┐рд╡реНрд╣рд╛рдЗрд╕ рдкреНрд░реЛрдЧреНрд░рд╛рдо рдХрд░рд╛

рдЖрддрд╛ Wio Terminal рд▓рд╛ рдЬреЛрдбрд▓реЗрд▓реНрдпрд╛ ArduCAM рдХреЕрдореЗрд░рд╛ рд╡рд╛рдкрд░рдгреНрдпрд╛рд╕рд╛рдареА рдкреНрд░реЛрдЧреНрд░рд╛рдо рдХрд░рддрд╛ рдпреЗрдИрд▓.

### рдХрд╛рд░реНрдп - рдХреЕрдореЗрд░рд╛ рдХрдиреЗрдХреНрдЯ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдбрд┐рд╡реНрд╣рд╛рдЗрд╕ рдкреНрд░реЛрдЧреНрд░рд╛рдо рдХрд░рд╛

1. PlatformIO рд╡рд╛рдкрд░реВрди рдПрдХ рдирд╡реАрди Wio Terminal рдкреНрд░реЛрдЬреЗрдХреНрдЯ рддрдпрд╛рд░ рдХрд░рд╛. рдпрд╛ рдкреНрд░реЛрдЬреЗрдХреНрдЯрдЪреЗ рдирд╛рд╡ `fruit-quality-detector` рдареЗрд╡рд╛. `setup` рдлрдВрдХреНрд╢рдирдордзреНрдпреЗ рд╕рд┐рд░рд┐рдпрд▓ рдкреЛрд░реНрдЯ рдХреЙрдиреНрдлрд┐рдЧрд░ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдХреЛрдб рдЬреЛрдбрд╛.

1. WiFi рд╢реА рдХрдиреЗрдХреНрдЯ рд╣реЛрдгреНрдпрд╛рд╕рд╛рдареА рдХреЛрдб рдЬреЛрдбрд╛, рддреБрдордЪреНрдпрд╛ WiFi рдХреНрд░реЗрдбреЗрдиреНрд╢рд┐рдпрд▓реНрд╕ `config.h` рдирд╛рд╡рд╛рдЪреНрдпрд╛ рдлрд╛рдЗрд▓рдордзреНрдпреЗ рдареЗрд╡рд╛. `platformio.ini` рдлрд╛рдЗрд▓рдордзреНрдпреЗ рдЖрд╡рд╢реНрдпрдХ рд▓рд╛рдпрдмреНрд░рд░реА рдЬреЛрдбрд╛рдпрд▓рд╛ рд╡рд┐рд╕рд░реВ рдирдХрд╛.

1. ArduCam рд▓рд╛рдпрдмреНрд░рд░реА Arduino рд▓рд╛рдпрдмреНрд░рд░реА рдореНрд╣рдгреВрди рдЙрдкрд▓рдмреНрдз рдирд╛рд╣реА рдЬреА `platformio.ini` рдлрд╛рдЗрд▓рдордзреВрди рд╕реНрдерд╛рдкрд┐рдд рдХреЗрд▓реА рдЬрд╛рдК рд╢рдХрддреЗ. рддреНрдпрд╛рдРрд╡рдЬреА рддреА рддреНрдпрд╛рдВрдЪреНрдпрд╛ GitHub рдкреЗрдЬрд╡рд░реВрди рд╕реНрд░реЛрдд рдореНрд╣рдгреВрди рд╕реНрдерд╛рдкрд┐рдд рдХрд░рд╛рд╡реА рд▓рд╛рдЧреЗрд▓. рддреБрдореНрд╣реА рд╣реЗ рдЦрд╛рд▓реАрд▓рдкреИрдХреА рдПрдХ рдХрд░реВрди рдорд┐рд│рд╡реВ рд╢рдХрддрд╛:

    * [https://github.com/ArduCAM/Arduino.git](https://github.com/ArduCAM/Arduino.git) рд╡рд░реВрди рд░реЗрдкреЛ рдХреНрд▓реЛрди рдХрд░рд╛
    * GitHub рд╡рд░ рд░реЗрдкреЛрд▓рд╛ [github.com/ArduCAM/Arduino](https://github.com/ArduCAM/Arduino) рдпреЗрдереЗ рдЬрд╛ рдЖрдгрд┐ **Code** рдмрдЯрдгрд╛рд╡рд░реВрди рдХреЛрдб рдЭрд┐рдк рд╕реНрд╡рд░реВрдкрд╛рдд рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рд╛

1. рддреБрдореНрд╣рд╛рд▓рд╛ рдлрдХреНрдд `ArduCAM` рдлреЛрд▓реНрдбрд░рдЪреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдЖрд╣реЗ. рд╕рдВрдкреВрд░реНрдг рдлреЛрд▓реНрдбрд░ рддреБрдордЪреНрдпрд╛ рдкреНрд░реЛрдЬреЗрдХреНрдЯрдЪреНрдпрд╛ `lib` рдлреЛрд▓реНрдбрд░рдордзреНрдпреЗ рдХреЙрдкреА рдХрд░рд╛.

    > тЪая╕П рд╕рдВрдкреВрд░реНрдг рдлреЛрд▓реНрдбрд░ рдХреЙрдкреА рдХрд░рдгреЗ рдЖрд╡рд╢реНрдпрдХ рдЖрд╣реЗ, рддреНрдпрд╛рдореБрд│реЗ рдХреЛрдб `lib/ArduCam` рдордзреНрдпреЗ рдЕрд╕реЗрд▓. рдлрдХреНрдд `ArduCam` рдлреЛрд▓реНрдбрд░рдЪреА рд╕рд╛рдордЧреНрд░реА `lib` рдлреЛрд▓реНрдбрд░рдордзреНрдпреЗ рдХреЙрдкреА рдХрд░реВ рдирдХрд╛, рд╕рдВрдкреВрд░реНрдг рдлреЛрд▓реНрдбрд░ рдХреЙрдкреА рдХрд░рд╛.

1. ArduCam рд▓рд╛рдпрдмреНрд░рд░реА рдХреЛрдб рдЕрдиреЗрдХ рдкреНрд░рдХрд╛рд░рдЪреНрдпрд╛ рдХреЕрдореЗрд░рд╛рд╕рд╛рдареА рдХрд╛рд░реНрдп рдХрд░рддреЗ. рддреБрдореНрд╣реА рд╡рд╛рдкрд░реВ рдЗрдЪреНрдЫрд┐рдд рдЕрд╕рд▓реЗрд▓реНрдпрд╛ рдХреЕрдореЗрд░рд╛рдЪрд╛ рдкреНрд░рдХрд╛рд░ рдХрдВрдкрд╛рдЗрд▓рд░ рдлреНрд▓реЕрдЧреНрд╕ рд╡рд╛рдкрд░реВрди рдХреЙрдиреНрдлрд┐рдЧрд░ рдХреЗрд▓рд╛ рдЬрд╛рддреЛ - рдпрд╛рдореБрд│реЗ рд▓рд╛рдпрдмреНрд░рд░реА рд▓рд╣рд╛рди рдареЗрд╡рд▓реА рдЬрд╛рддреЗ рдХрд╛рд░рдг рддреБрдореНрд╣реА рд╡рд╛рдкрд░рдд рдирд╕рд▓реЗрд▓реНрдпрд╛ рдХреЕрдореЗрд░рд╛рд╕рд╛рдареА рдХреЛрдб рдХрд╛рдвреВрди рдЯрд╛рдХрд▓рд╛ рдЬрд╛рддреЛ. OV2640 рдХреЕрдореЗрд░рд╛рд╕рд╛рдареА рд▓рд╛рдпрдмреНрд░рд░реА рдХреЙрдиреНрдлрд┐рдЧрд░ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА, `platformio.ini` рдлрд╛рдЗрд▓рдЪреНрдпрд╛ рд╢реЗрд╡рдЯреА рдЦрд╛рд▓реАрд▓ рдХреЛрдб рдЬреЛрдбрд╛:

    ```ini
    build_flags =
        -DARDUCAM_SHIELD_V2
        -DOV2640_CAM
    ```

    рд╣реЗ 2 рдХрдВрдкрд╛рдЗрд▓рд░ рдлреНрд▓реЕрдЧреНрд╕ рд╕реЗрдЯ рдХрд░рддреЗ:

      * `ARDUCAM_SHIELD_V2` рд▓рд╛рдпрдмреНрд░рд░реАрд▓рд╛ рдХреЕрдореЗрд░рд╛ Arduino рдмреЛрд░реНрдбрд╡рд░ рдЕрд╕рд▓реНрдпрд╛рдЪреЗ рд╕рд╛рдВрдЧрддреЗ.
      * `OV2640_CAM` рд▓рд╛рдпрдмреНрд░рд░реАрд▓рд╛ рдлрдХреНрдд OV2640 рдХреЕрдореЗрд░рд╛рд╕рд╛рдареА рдХреЛрдб рд╕рдорд╛рд╡рд┐рд╖реНрдЯ рдХрд░рдгреНрдпрд╛рд╕ рд╕рд╛рдВрдЧрддреЗ.

1. `src` рдлреЛрд▓реНрдбрд░рдордзреНрдпреЗ `camera.h` рдирд╛рд╡рд╛рдЪрд╛ рд╣реЗрдбрд░ рдлрд╛рдЗрд▓ рдЬреЛрдбрд╛. рдпрд╛рдд рдХреЕрдореЗрд░рд╛рд╢реА рд╕рдВрд╡рд╛рдж рд╕рд╛рдзрдгреНрдпрд╛рд╕рд╛рдареА рдХреЛрдб рдЕрд╕реЗрд▓. рдпрд╛ рдлрд╛рдЗрд▓рдордзреНрдпреЗ рдЦрд╛рд▓реАрд▓ рдХреЛрдб рдЬреЛрдбрд╛:

    ```cpp
    #pragma once
    
    #include <ArduCAM.h>
    #include <Wire.h>
    
    class Camera
    {
    public:
        Camera(int format, int image_size) : _arducam(OV2640, PIN_SPI_SS)
        {
            _format = format;
            _image_size = image_size;
        }
    
        bool init()
        {
            // Reset the CPLD
            _arducam.write_reg(0x07, 0x80);
            delay(100);
    
            _arducam.write_reg(0x07, 0x00);
            delay(100);
    
            // Check if the ArduCAM SPI bus is OK
            _arducam.write_reg(ARDUCHIP_TEST1, 0x55);
            if (_arducam.read_reg(ARDUCHIP_TEST1) != 0x55)
            {
                return false;
            }
                
            // Change MCU mode
            _arducam.set_mode(MCU2LCD_MODE);
    
            uint8_t vid, pid;
    
            // Check if the camera module type is OV2640
            _arducam.wrSensorReg8_8(0xff, 0x01);
            _arducam.rdSensorReg8_8(OV2640_CHIPID_HIGH, &vid);
            _arducam.rdSensorReg8_8(OV2640_CHIPID_LOW, &pid);
            if ((vid != 0x26) && ((pid != 0x41) || (pid != 0x42)))
            {
                return false;
            }
            
            _arducam.set_format(_format);
            _arducam.InitCAM();
            _arducam.OV2640_set_JPEG_size(_image_size);
            _arducam.OV2640_set_Light_Mode(Auto);
            _arducam.OV2640_set_Special_effects(Normal);
            delay(1000);
    
            return true;
        }
    
        void startCapture()
        {
            _arducam.flush_fifo();
            _arducam.clear_fifo_flag();
            _arducam.start_capture();
        }
    
        bool captureReady()
        {
            return _arducam.get_bit(ARDUCHIP_TRIG, CAP_DONE_MASK);
        }
    
        bool readImageToBuffer(byte **buffer, uint32_t &buffer_length)
        {
            if (!captureReady()) return false;
    
            // Get the image file length
            uint32_t length = _arducam.read_fifo_length();
            buffer_length = length;
    
            if (length >= MAX_FIFO_SIZE)
            {
                return false;
            }
            if (length == 0)
            {
                return false;
            }
    
            // create the buffer
            byte *buf = new byte[length];
    
            uint8_t temp = 0, temp_last = 0;
            int i = 0;
            uint32_t buffer_pos = 0;
            bool is_header = false;
    
            _arducam.CS_LOW();
            _arducam.set_fifo_burst();
            
            while (length--)
            {
                temp_last = temp;
                temp = SPI.transfer(0x00);
                //Read JPEG data from FIFO
                if ((temp == 0xD9) && (temp_last == 0xFF)) //If find the end ,break while,
                {
                    buf[buffer_pos] = temp;
    
                    buffer_pos++;
                    i++;
                    
                    _arducam.CS_HIGH();
                }
                if (is_header == true)
                {
                    //Write image data to buffer if not full
                    if (i < 256)
                    {
                        buf[buffer_pos] = temp;
                        buffer_pos++;
                        i++;
                    }
                    else
                    {
                        _arducam.CS_HIGH();
    
                        i = 0;
                        buf[buffer_pos] = temp;
    
                        buffer_pos++;
                        i++;
    
                        _arducam.CS_LOW();
                        _arducam.set_fifo_burst();
                    }
                }
                else if ((temp == 0xD8) & (temp_last == 0xFF))
                {
                    is_header = true;
    
                    buf[buffer_pos] = temp_last;
                    buffer_pos++;
                    i++;
    
                    buf[buffer_pos] = temp;
                    buffer_pos++;
                    i++;
                }
            }
            
            _arducam.clear_fifo_flag();
    
            _arducam.set_format(_format);
            _arducam.InitCAM();
            _arducam.OV2640_set_JPEG_size(_image_size);
    
            // return the buffer
            *buffer = buf;
        }
    
    private:
        ArduCAM _arducam;
        int _format;
        int _image_size;
    };
    ```

    рд╣рд╛ рд▓реЛ рд▓реЗрд╡реНрд╣рд▓ рдХреЛрдб ArduCam рд▓рд╛рдпрдмреНрд░рд░реА рд╡рд╛рдкрд░реВрди рдХреЕрдореЗрд░рд╛ рдХреЙрдиреНрдлрд┐рдЧрд░ рдХрд░рддреЛ рдЖрдгрд┐ рдЖрд╡рд╢реНрдпрдХ рдЕрд╕рд▓реНрдпрд╛рд╕ SPI рдмрд╕ рд╡рд╛рдкрд░реВрди рдкреНрд░рддрд┐рдорд╛ рдХрд╛рдврддреЛ. рд╣рд╛ рдХреЛрдб ArduCam рд╕рд╛рдареА рдЦреВрдк рд╡рд┐рд╢рд┐рд╖реНрдЯ рдЖрд╣реЗ, рддреНрдпрд╛рдореБрд│реЗ рддреБрдореНрд╣рд╛рд▓рд╛ рд╕рдзреНрдпрд╛ рддреНрдпрд╛рдЪреНрдпрд╛ рдХрд╛рд░реНрдпрдкрджреНрдзрддреАрдЪреА рдЪрд┐рдВрддрд╛ рдХрд░рдгреНрдпрд╛рдЪреА рдЧрд░рдЬ рдирд╛рд╣реА.

1. `main.cpp` рдордзреНрдпреЗ, рдЗрддрд░ `include` рд╕реНрдЯреЗрдЯрдореЗрдВрдЯреНрд╕рдЦрд╛рд▓реА рд╣рд╛ рдирд╡реАрди рдлрд╛рдЗрд▓ рд╕рдорд╛рд╡рд┐рд╖реНрдЯ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдЖрдгрд┐ рдХреЕрдореЗрд░рд╛ рдХреНрд▓рд╛рд╕рдЪреЗ рдЙрджрд╛рд╣рд░рдг рддрдпрд╛рд░ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдЦрд╛рд▓реАрд▓ рдХреЛрдб рдЬреЛрдбрд╛:

    ```cpp
    #include "camera.h"

    Camera camera = Camera(JPEG, OV2640_640x480);
    ```

    рд╣реЗ `Camera` рддрдпрд╛рд░ рдХрд░рддреЗ рдЬреЗ рдкреНрд░рддрд┐рдорд╛ JPEG рд╕реНрд╡рд░реВрдкрд╛рдд 640x480 рд░рд┐рдЭреЛрд▓реНрдпреВрд╢рдирд╡рд░ рд╕реЗрд╡реНрд╣ рдХрд░рддреЗ. рдЬрд░реА рдЙрдЪреНрдЪ рд░рд┐рдЭреЛрд▓реНрдпреВрд╢рди рд╕рдорд░реНрдерд┐рдд рдЕрд╕рд▓реЗ (3280x2464 рдкрд░реНрдпрдВрдд), рдкреНрд░рддрд┐рдорд╛ рд╡рд░реНрдЧреАрдХрд░рдгрд╛рд╕рд╛рдареА рдЦреВрдк рд▓рд╣рд╛рди рдкреНрд░рддрд┐рдорд╛ (227x227) рдЖрд╡рд╢реНрдпрдХ рдЕрд╕рддрд╛рдд, рддреНрдпрд╛рдореБрд│реЗ рдореЛрдареНрдпрд╛ рдкреНрд░рддрд┐рдорд╛ рдХреЕрдкреНрдЪрд░ рдЖрдгрд┐ рдкрд╛рдард╡рдгреНрдпрд╛рдЪреА рдЧрд░рдЬ рдирд╛рд╣реА.

1. рдХреЕрдореЗрд░рд╛ рд╕реЗрдЯрдЕрдк рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдлрдВрдХреНрд╢рди рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдЦрд╛рд▓реАрд▓ рдХреЛрдб рдЬреЛрдбрд╛:

    ```cpp
    void setupCamera()
    {
        pinMode(PIN_SPI_SS, OUTPUT);
        digitalWrite(PIN_SPI_SS, HIGH);
    
        Wire.begin();
        SPI.begin();
    
        if (!camera.init())
        {
            Serial.println("Error setting up the camera!");
        }
    }
    ```

    `setupCamera` рдлрдВрдХреНрд╢рди SPI рдЪрд┐рдк рд╕рд┐рд▓реЗрдХреНрдЯ рдкрд┐рди (`PIN_SPI_SS`) рдЙрдЪреНрдЪ рдореНрд╣рдгреВрди рдХреЙрдиреНрдлрд┐рдЧрд░ рдХрд░реВрди рд╕реБрд░реВ рд╣реЛрддреЗ, рдЬреНрдпрд╛рдореБрд│реЗ Wio Terminal SPI рдХрдВрдЯреНрд░реЛрд▓рд░ рдмрдирддреЛ. рддреНрдпрд╛рдирдВрддрд░ I2C рдЖрдгрд┐ SPI рдмрд╕ рд╕реБрд░реВ рдХрд░рддреЗ. рд╢реЗрд╡рдЯреА, рдХреЕрдореЗрд░рд╛ рдХреНрд▓рд╛рд╕ рдкреНрд░рд╛рд░рдВрдн рдХрд░рддреЗ рдЬреЛ рдХреЕрдореЗрд░рд╛ рд╕реЗрдиреНрд╕рд░ рд╕реЗрдЯрд┐рдВрдЧреНрдЬ рдХреЙрдиреНрдлрд┐рдЧрд░ рдХрд░рддреЛ рдЖрдгрд┐ рд╕рд░реНрд╡ рдХрд╛рд╣реА рдпреЛрдЧреНрдп рдкреНрд░рдХрд╛рд░реЗ рд╡рд╛рдпрд░ рдХреЗрд▓реЗ рдЖрд╣реЗ рдпрд╛рдЪреА рдЦрд╛рддреНрд░реА рдХрд░рддреЛ.

1. `setup` рдлрдВрдХреНрд╢рдирдЪреНрдпрд╛ рд╢реЗрд╡рдЯреА рд╣реЗ рдлрдВрдХреНрд╢рди рдХреЙрд▓ рдХрд░рд╛:

    ```cpp
    setupCamera();
    ```

1. рд╣рд╛ рдХреЛрдб рдмрд┐рд▓реНрдб рдЖрдгрд┐ рдЕрдкрд▓реЛрдб рдХрд░рд╛ рдЖрдгрд┐ рд╕рд┐рд░рд┐рдпрд▓ рдореЙрдирд┐рдЯрд░рдордзреВрди рдЖрдЙрдЯрдкреБрдЯ рддрдкрд╛рд╕рд╛. рдЬрд░ рддреБрдореНрд╣рд╛рд▓рд╛ `Error setting up the camera!` рджрд┐рд╕рдд рдЕрд╕реЗрд▓ рддрд░ ArduCam рдЪреНрдпрд╛ рдпреЛрдЧреНрдп GPIO рдкрд┐рдиреНрд╕рд╢реА рд╕рд░реНрд╡ рдХреЗрдмрд▓реНрд╕ рдХрдиреЗрдХреНрдЯ рдЖрд╣реЗрдд рдпрд╛рдЪреА рдЦрд╛рддреНрд░реА рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рд╡рд╛рдпрд░рд┐рдВрдЧ рддрдкрд╛рд╕рд╛ рдЖрдгрд┐ рд╕рд░реНрд╡ рдЬрдВрдкрд░ рдХреЗрдмрд▓реНрд╕ рдпреЛрдЧреНрдп рдкреНрд░рдХрд╛рд░реЗ рдмрд╕рд╡рд▓реЗрд▓реНрдпрд╛ рдЖрд╣реЗрдд рдпрд╛рдЪреА рдЦрд╛рддреНрд░реА рдХрд░рд╛.

## рдкреНрд░рддрд┐рдорд╛ рдХреЕрдкреНрдЪрд░ рдХрд░рд╛

рдЖрддрд╛ Wio Terminal рдкреНрд░реЛрдЧреНрд░рд╛рдо рдХрд░реВрди рдмрдЯрдг рджрд╛рдмрд▓реНрдпрд╛рд╡рд░ рдкреНрд░рддрд┐рдорд╛ рдХреЕрдкреНрдЪрд░ рдХрд░рддрд╛ рдпреЗрдИрд▓.

### рдХрд╛рд░реНрдп - рдкреНрд░рддрд┐рдорд╛ рдХреЕрдкреНрдЪрд░ рдХрд░рд╛

1. рдорд╛рдпрдХреНрд░реЛрдХрдВрдЯреНрд░реЛрд▓рд░реНрд╕ рддреБрдордЪрд╛ рдХреЛрдб рд╕рддрдд рдЪрд╛рд▓рд╡рддрд╛рдд, рддреНрдпрд╛рдореБрд│реЗ рдлреЛрдЯреЛ рдШреЗрдгреЗ рдЬрд╕реЗ рдХрд╛рд╣реАрддрд░реА рдЯреНрд░рд┐рдЧрд░ рдХрд░рдгреЗ рд╕реЛрдкреЗ рдирд╛рд╣реА. Wio Terminal рдордзреНрдпреЗ рдмрдЯрдгреЗ рдЖрд╣реЗрдд, рддреНрдпрд╛рдореБрд│реЗ рдХреЕрдореЗрд░рд╛ рдПрдХрд╛ рдмрдЯрдгрд╛рдиреЗ рдЯреНрд░рд┐рдЧрд░ рд╣реЛрдгреНрдпрд╛рд╕рд╛рдареА рд╕реЗрдЯ рдХреЗрд▓рд╛ рдЬрд╛рдК рд╢рдХрддреЛ. `setup` рдлрдВрдХреНрд╢рдирдЪреНрдпрд╛ рд╢реЗрд╡рдЯреА рдЦрд╛рд▓реАрд▓ рдХреЛрдб рдЬреЛрдбрд╛ рдЬреЗрдгреЗрдХрд░реВрди C рдмрдЯрдг (рддреАрди рдмрдЯрдгрд╛рдВрдкреИрдХреА рдПрдХ, рдкреЙрд╡рд░ рд╕реНрд╡рд┐рдЪрдЬрд╡рд│рдЪреЗ) рдХреЙрдиреНрдлрд┐рдЧрд░ рдХреЗрд▓реЗ рдЬрд╛рдИрд▓.

    ![рдкреЙрд╡рд░ рд╕реНрд╡рд┐рдЪрдЬрд╡рд│рдЪреЗ C рдмрдЯрдг](../../../../../translated_images/wio-terminal-c-button.73df3cb1c1445ea07ee98316af0e7925fcb43135df0abed58d3d4822b2589c3b.mr.png)

    ```cpp
    pinMode(WIO_KEY_C, INPUT_PULLUP);
    ```

    `INPUT_PULLUP` рдореЛрдб рдЗрдирдкреБрдЯрд▓рд╛ рдЙрд▓рдЯ рдХрд░рддреЛ. рдЙрджрд╛рд╣рд░рдгрд╛рд░реНрде, рд╕рд╛рдорд╛рдиреНрдпрддрдГ рдмрдЯрдг рджрд╛рдмрд▓реЗрд▓реЗ рдирд╕рддрд╛рдирд╛ рд▓реЛ рд╕рд┐рдЧреНрдирд▓ рдкрд╛рдард╡рддреЗ рдЖрдгрд┐ рджрд╛рдмрд▓реЗ рдЕрд╕рддрд╛рдирд╛ рд╣рд╛рдп рд╕рд┐рдЧреНрдирд▓ рдкрд╛рдард╡рддреЗ. `INPUT_PULLUP` рд╕реЗрдЯ рдХреЗрд▓реНрдпрд╛рд╡рд░, рддреЗ рджрд╛рдмрд▓реЗрд▓реЗ рдирд╕рддрд╛рдирд╛ рд╣рд╛рдп рд╕рд┐рдЧреНрдирд▓ рдкрд╛рдард╡рддреЗ рдЖрдгрд┐ рджрд╛рдмрд▓реЗ рдЕрд╕рддрд╛рдирд╛ рд▓реЛ рд╕рд┐рдЧреНрдирд▓ рдкрд╛рдард╡рддреЗ.

1. `loop` рдлрдВрдХреНрд╢рдирдЪреНрдпрд╛ рдЖрдзреА рдмрдЯрдг рдкреНрд░реЗрд╕рд▓рд╛ рдкреНрд░рддрд┐рд╕рд╛рдж рджреЗрдгреНрдпрд╛рд╕рд╛рдареА рдПрдХ рд░рд┐рдХреНрдд рдлрдВрдХреНрд╢рди рдЬреЛрдбрд╛:

    ```cpp
    void buttonPressed()
    {
        
    }
    ```

1. рдмрдЯрдг рджрд╛рдмрд▓реЗ рдЕрд╕рддрд╛рдирд╛ `loop` рдкрджреНрдзрддреАрдордзреНрдпреЗ рд╣реЗ рдлрдВрдХреНрд╢рди рдХреЙрд▓ рдХрд░рд╛:

    ```cpp
    void loop()
    {
        if (digitalRead(WIO_KEY_C) == LOW)
        {
            buttonPressed();
            delay(2000);
        }
    
        delay(200);
    }
    ```

    рд╣реЗ рдХреА рдмрдЯрдг рджрд╛рдмрд▓реЗ рдЖрд╣реЗ рдХрд╛ рддреЗ рддрдкрд╛рд╕рддреЗ. рдЬрд░ рддреЗ рджрд╛рдмрд▓реЗ рдЧреЗрд▓реЗ рдЕрд╕реЗрд▓, рддрд░ `buttonPressed` рдлрдВрдХреНрд╢рди рдХреЙрд▓ рдХреЗрд▓реЗ рдЬрд╛рддреЗ рдЖрдгрд┐ рд▓реВрдк 2 рд╕реЗрдХрдВрджрд╛рдВрд╕рд╛рдареА рд╡рд┐рд▓рдВрдмрд┐рдд рд╣реЛрддреЗ. рд╣реЗ рдмрдЯрдг рд╕реЛрдбрдгреНрдпрд╛рд╕рд╛рдареА рд╡реЗрд│ рджреЗрдгреНрдпрд╛рд╕рд╛рдареА рдЖрд╣реЗ рдЬреЗрдгреЗрдХрд░реВрди рджреАрд░реНрдШ рдкреНрд░реЗрд╕ рджреЛрдирджрд╛ рдиреЛрдВрджрд╡рд▓рд╛ рдЬрд╛рдК рдирдпреЗ.

    > ЁЯТБ Wio Terminal рд╡рд░реАрд▓ рдмрдЯрдг `INPUT_PULLUP` рд╕реЗрдЯ рдХреЗрд▓реЗ рдЖрд╣реЗ, рддреНрдпрд╛рдореБрд│реЗ рджрд╛рдмрд▓реЗрд▓реЗ рдирд╕рддрд╛рдирд╛ рд╣рд╛рдп рд╕рд┐рдЧреНрдирд▓ рдкрд╛рдард╡рддреЗ рдЖрдгрд┐ рджрд╛рдмрд▓реЗ рдЕрд╕рддрд╛рдирд╛ рд▓реЛ рд╕рд┐рдЧреНрдирд▓ рдкрд╛рдард╡рддреЗ.

1. `buttonPressed` рдлрдВрдХреНрд╢рдирдордзреНрдпреЗ рдЦрд╛рд▓реАрд▓ рдХреЛрдб рдЬреЛрдбрд╛:

    ```cpp
    camera.startCapture();
 
    while (!camera.captureReady())
        delay(100);

    Serial.println("Image captured");

    byte *buffer;
    uint32_t length;

    if (camera.readImageToBuffer(&buffer, length))
    {
        Serial.print("Image read to buffer with length ");
        Serial.println(length);

        delete(buffer);
    }
    ```

    рд╣рд╛ рдХреЛрдб `startCapture` рдХреЙрд▓ рдХрд░реВрди рдХреЕрдореЗрд░рд╛ рдХреЕрдкреНрдЪрд░ рд╕реБрд░реВ рдХрд░рддреЛ. рдХреЕрдореЗрд░рд╛ рд╣рд╛рд░реНрдбрд╡реЗрдЕрд░ рддреБрдордЪреНрдпрд╛рдХрдбреВрди рдбреЗрдЯрд╛ рдкрд░рдд рдХрд░рдд рдирд╛рд╣реА, рддреНрдпрд╛рдРрд╡рдЬреА рддреБрдореНрд╣реА рдХреЕрдкреНрдЪрд░ рд╕реБрд░реВ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рд╕реВрдЪрдирд╛ рдкрд╛рдард╡рддрд╛ рдЖрдгрд┐ рдХреЕрдореЗрд░рд╛ рдкрд╛рд░реНрд╢реНрд╡рднреВрдореАрдд рдкреНрд░рддрд┐рдорд╛ рдХреЕрдкреНрдЪрд░ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА, JPEG рдордзреНрдпреЗ рд░реВрдкрд╛рдВрддрд░рд┐рдд рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдЖрдгрд┐ рдХреЕрдореЗрд░рд╛рдордзреНрдпреЗ рд╕реНрдерд╛рдирд┐рдХ рдмрдлрд░рдордзреНрдпреЗ рд╕рдВрдЧреНрд░рд╣рд┐рдд рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдХрд╛рд░реНрдп рдХрд░рддреЛ. `captureReady` рдХреЙрд▓ рдирдВрддрд░ рдкреНрд░рддрд┐рдорд╛ рдХреЕрдкреНрдЪрд░ рдкреВрд░реНрдг рдЭрд╛рд▓реЗ рдЖрд╣реЗ рдХрд╛ рддреЗ рддрдкрд╛рд╕рддреЗ.

    рдХреЕрдкреНрдЪрд░ рдкреВрд░реНрдг рдЭрд╛рд▓реНрдпрд╛рдирдВрддрд░, рдХреЕрдореЗрд░рд╛рдордзреАрд▓ рдмрдлрд░рдордзреВрди рд╕реНрдерд╛рдирд┐рдХ рдмрдлрд░рдордзреНрдпреЗ (рдмрд╛рдЗрдЯреНрд╕рдЪреНрдпрд╛ рдЕтАНреЕрд░реЗрдордзреНрдпреЗ) рдбреЗрдЯрд╛ рдХреЙрдкреА рдХреЗрд▓рд╛ рдЬрд╛рддреЛ `readImageToBuffer` рдХреЙрд▓ рд╡рд╛рдкрд░реВрди. рдмрдлрд░рдЪреА рд▓рд╛рдВрдмреА рдирдВрддрд░ рд╕рд┐рд░рд┐рдпрд▓ рдореЙрдирд┐рдЯрд░рд╡рд░ рдкрд╛рдард╡рд▓реА рдЬрд╛рддреЗ.

1. рд╣рд╛ рдХреЛрдб рдмрд┐рд▓реНрдб рдЖрдгрд┐ рдЕрдкрд▓реЛрдб рдХрд░рд╛ рдЖрдгрд┐ рд╕рд┐рд░рд┐рдпрд▓ рдореЙрдирд┐рдЯрд░рд╡рд░реАрд▓ рдЖрдЙрдЯрдкреБрдЯ рддрдкрд╛рд╕рд╛. рдкреНрд░рддреНрдпреЗрдХ рд╡реЗрд│реА рддреБрдореНрд╣реА C рдмрдЯрдг рджрд╛рдмрддрд╛, рдкреНрд░рддрд┐рдорд╛ рдХреЕрдкреНрдЪрд░ рдХреЗрд▓реА рдЬрд╛рдИрд▓ рдЖрдгрд┐ рддреБрдореНрд╣рд╛рд▓рд╛ рд╕рд┐рд░рд┐рдпрд▓ рдореЙрдирд┐рдЯрд░рд╡рд░ рдкреНрд░рддрд┐рдореЗрдЪрд╛ рдЖрдХрд╛рд░ рджрд┐рд╕реЗрд▓.

    ```output
    Connecting to WiFi..
    Connected!
    Image captured
    Image read to buffer with length 9224
    Image captured
    Image read to buffer with length 11272
    ```

    рд╡реЗрдЧрд╡реЗрдЧрд│реНрдпрд╛ рдкреНрд░рддрд┐рдорд╛рдВрдЪреЗ рд╡реЗрдЧрд╡реЗрдЧрд│реЗ рдЖрдХрд╛рд░ рдЕрд╕рддреАрд▓. рддреНрдпрд╛ JPEG рд╕реНрд╡рд░реВрдкрд╛рдд рд╕рдВрдХреБрдЪрд┐рдд рдХреЗрд▓реНрдпрд╛ рдЬрд╛рддрд╛рдд рдЖрдгрд┐ рджрд┐рд▓реЗрд▓реНрдпрд╛ рд░рд┐рдЭреЛрд▓реНрдпреВрд╢рдирд╕рд╛рдареА JPEG рдлрд╛рдЗрд▓рдЪрд╛ рдЖрдХрд╛рд░ рдкреНрд░рддрд┐рдореЗрдордзреНрдпреЗ рдХрд╛рдп рдЖрд╣реЗ рдпрд╛рд╡рд░ рдЕрд╡рд▓рдВрдмреВрди рдЕрд╕рддреЛ.

> ЁЯТБ рддреБрдореНрд╣реА рд╣рд╛ рдХреЛрдб [code-camera/wio-terminal](../../../../../4-manufacturing/lessons/2-check-fruit-from-device/code-camera/wio-terminal) рдлреЛрд▓реНрдбрд░рдордзреНрдпреЗ рд╢реЛрдзреВ рд╢рдХрддрд╛.

ЁЯША рддреБрдореНрд╣реА рдпрд╢рд╕реНрд╡реАрд░рд┐рддреНрдпрд╛ Wio Terminal рд╕рд╣ рдкреНрд░рддрд┐рдорд╛ рдХреЕрдкреНрдЪрд░ рдХреЗрд▓реНрдпрд╛ рдЖрд╣реЗрдд.

## рдкрд░реНрдпрд╛рдпреА - SD рдХрд╛рд░реНрдб рд╡рд╛рдкрд░реВрди рдХреЕрдореЗрд░рд╛ рдкреНрд░рддрд┐рдорд╛ рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░рд╛

рдХреЕрдореЗрд░рд╛рджреНрд╡рд╛рд░реЗ рдХреЕрдкреНрдЪрд░ рдХреЗрд▓реЗрд▓реНрдпрд╛ рдкреНрд░рддрд┐рдорд╛ рдкрд╛рд╣рдгреНрдпрд╛рдЪрд╛ рд╕рд░реНрд╡рд╛рдд рд╕реЛрдкрд╛ рдорд╛рд░реНрдЧ рдореНрд╣рдгрдЬреЗ рддреНрдпрд╛ Wio Terminal рдордзреАрд▓ SD рдХрд╛рд░реНрдбрд╡рд░ рд▓рд┐рд╣рд┐рдгреЗ рдЖрдгрд┐ рдирдВрддрд░ рддреБрдордЪреНрдпрд╛ рд╕рдВрдЧрдгрдХрд╛рд╡рд░ рдкрд╛рд╣рдгреЗ. рдЬрд░ рддреБрдордЪреНрдпрд╛рдХрдбреЗ рдЕрддрд┐рд░рд┐рдХреНрдд microSD рдХрд╛рд░реНрдб рдЖрдгрд┐ рддреБрдордЪреНрдпрд╛ рд╕рдВрдЧрдгрдХрд╛рдд microSD рдХрд╛рд░реНрдб рд╕реЙрдХреЗрдЯ рдХрд┐рдВрд╡рд╛ рдЕрдбреЕрдкреНрдЯрд░ рдЕрд╕реЗрд▓ рддрд░ рд╣рд╛ рдЪрд░рдг рдХрд░рд╛.

Wio Terminal рдлрдХреНрдд 16GB рдкрд░реНрдпрдВрддрдЪреНрдпрд╛ microSD рдХрд╛рд░реНрдбреНрд╕рдирд╛ рд╕рдорд░реНрдерди рджреЗрддреЗ. рдЬрд░ рддреБрдордЪреНрдпрд╛рдХрдбреЗ рдореЛрдареЗ SD рдХрд╛рд░реНрдб рдЕрд╕реЗрд▓ рддрд░ рддреЗ рдХрд╛рд░реНрдп рдХрд░рдгрд╛рд░ рдирд╛рд╣реА.

### рдХрд╛рд░реНрдп - SD рдХрд╛рд░реНрдб рд╡рд╛рдкрд░реВрди рдХреЕрдореЗрд░рд╛ рдкреНрд░рддрд┐рдорд╛ рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░рд╛

1. FAT32 рдХрд┐рдВрд╡рд╛ exFAT рдореНрд╣рдгреВрди microSD рдХрд╛рд░реНрдб рдлреЙрд░рдореЕрдЯ рдХрд░рд╛, рддреБрдордЪреНрдпрд╛ рд╕рдВрдЧрдгрдХрд╛рд╡рд░реАрд▓ рд╕рдВрдмрдВрдзрд┐рдд рдЕтАНреЕрдкреНрд▓рд┐рдХреЗрд╢рдиреНрд╕ рд╡рд╛рдкрд░реВрди (macOS рд╡рд░ Disk Utility, Windows рд╡рд░ File Explorer, рдХрд┐рдВрд╡рд╛ Linux рдордзреНрдпреЗ рдХрдорд╛рдВрдб рд▓рд╛рдЗрди рдЯреВрд▓реНрд╕ рд╡рд╛рдкрд░реВрди)

1. рдкреЙрд╡рд░ рд╕реНрд╡рд┐рдЪрдЪреНрдпрд╛ рдЦрд╛рд▓реА рдЕрд╕рд▓реЗрд▓реНрдпрд╛ рд╕реЙрдХреЗрдЯрдордзреНрдпреЗ microSD рдХрд╛рд░реНрдб рдШрд╛рд▓рд╛. рддреЗ рдХреНрд▓рд┐рдХ рд╣реЛрдИрдкрд░реНрдпрдВрдд рдЖрдгрд┐ рдЬрд╛рдЧреЗрд╡рд░ рд░рд╛рд╣реЗрдкрд░реНрдпрдВрдд рдкреВрд░реНрдгрдкрдгреЗ рдЖрдд рдШрд╛рд▓рд╛, рддреБрдореНрд╣рд╛рд▓рд╛ рддреЗ рдирдЦрд╛рдиреЗ рдХрд┐рдВрд╡рд╛ рдкрд╛рддрд│ рд╕рд╛рдзрдирд╛рдиреЗ рдврдХрд▓рд╛рд╡реЗ рд▓рд╛рдЧреЗрд▓.

1. `main.cpp` рдлрд╛рдЗрд▓рдЪреНрдпрд╛ рд╢реАрд░реНрд╖рд╕реНрдерд╛рдиреА рдЦрд╛рд▓реАрд▓ `include` рд╕реНрдЯреЗрдЯрдореЗрдВрдЯреНрд╕ рдЬреЛрдбрд╛:

    ```cpp
    #include "SD/Seeed_SD.h"
    #include <Seeed_FS.h>
    ```

1. `setup` рдлрдВрдХреНрд╢рдирдЪреНрдпрд╛ рдЖрдзреА рдЦрд╛рд▓реАрд▓ рдлрдВрдХреНрд╢рди рдЬреЛрдбрд╛:

    ```cpp
    void setupSDCard()
    {
        while (!SD.begin(SDCARD_SS_PIN, SDCARD_SPI))
        {
            Serial.println("SD Card Error");
        }
    }
    ```

    рд╣реЗ SPI рдмрд╕ рд╡рд╛рдкрд░реВрди SD рдХрд╛рд░реНрдб рдХреЙрдиреНрдлрд┐рдЧрд░ рдХрд░рддреЗ.

1. `setup` рдлрдВрдХреНрд╢рдирдордзреВрди рд╣реЗ рдХреЙрд▓ рдХрд░рд╛:

    ```cpp
    setupSDCard();
    ```

1. `buttonPressed` рдлрдВрдХреНрд╢рдирдЪреНрдпрд╛ рд╡рд░ рдЦрд╛рд▓реАрд▓ рдХреЛрдб рдЬреЛрдбрд╛:

    ```cpp
    int fileNum = 1;

    void saveToSDCard(byte *buffer, uint32_t length)
    {
        char buff[16];
        sprintf(buff, "%d.jpg", fileNum);
        fileNum++;
    
        File outFile = SD.open(buff, FILE_WRITE );
        outFile.write(buffer, length);
        outFile.close();

        Serial.print("Image written to file ");
        Serial.println(buff);
    }
    ```

    рд╣реЗ рдлрд╛рдЗрд▓ рдХрд╛рдЙрдВрдЯрд╕рд╛рдареА рдПрдХ рдЧреНрд▓реЛрдмрд▓ рд╡реНрд╣реЗрд░рд┐рдПрдмрд▓ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддреЗ. рд╣реЗ рдкреНрд░рддрд┐рдорд╛ рдлрд╛рдЗрд▓ рдирд╛рд╡рд╛рдВрд╕рд╛рдареА рд╡рд╛рдкрд░рд▓реЗ рдЬрд╛рддреЗ рдЬреЗрдгреЗрдХрд░реВрди рдЕрдиреЗрдХ рдкреНрд░рддрд┐рдорд╛ рдХреЕрдкреНрдЪрд░ рдХреЗрд▓реНрдпрд╛ рдЬрд╛рдК рд╢рдХрддрд╛рдд рдЖрдгрд┐ рд╡рд╛рдврддреНрдпрд╛ рдлрд╛рдЗрд▓ рдирд╛рд╡рд╛рдВрд╕рд╣ - `1.jpg`, `2.jpg` рдЖрдгрд┐ рдЕрд╕реЗрдЪ.

    рдирдВрддрд░ `saveToSDCard` рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддреЗ рдЬреЗ рдмрд╛рдЗрдЯ рдбреЗрдЯрд╛ рдмрдлрд░ рдЖрдгрд┐ рдмрдлрд░рдЪреА рд▓рд╛рдВрдмреА рдШреЗрддреЗ. рдлрд╛рдЗрд▓ рдХрд╛рдЙрдВрдЯ рд╡рд╛рдкрд░реВрди рдлрд╛рдЗрд▓ рдирд╛рд╡ рддрдпрд╛рд░ рдХреЗрд▓реЗ рдЬрд╛рддреЗ рдЖрдгрд┐ рдкреБрдвреАрд▓ рдлрд╛рдЗрд▓рд╕рд╛рдареА рдлрд╛рдЗрд▓ рдХрд╛рдЙрдВрдЯ рд╡рд╛рдврд╡рд▓реЗ рдЬрд╛рддреЗ. рдмрдлрд░рдордзреАрд▓ рдмрд╛рдпрдирд░реА рдбреЗрдЯрд╛ рдирдВрддрд░ рдлрд╛рдЗрд▓рдордзреНрдпреЗ рд▓рд┐рд╣рд┐рд▓рд╛ рдЬрд╛рддреЛ.

1. рдмрдлрд░ рд╣рдЯрд╡рдгреНрдпрд╛рдЪреНрдпрд╛ **рдЖрдзреА** `buttonPressed` рдлрдВрдХреНрд╢рдирдордзреВрди `saveToSDCard` рдлрдВрдХреНрд╢рди рдХреЙрд▓ рдХрд░рд╛:

    ```cpp
    Serial.print("Image read to buffer with length ");
    Serial.println(length);

    saveToSDCard(buffer, length);
    
    delete(buffer);
    ```

1. рд╣рд╛ рдХреЛрдб рдмрд┐рд▓реНрдб рдЖрдгрд┐ рдЕрдкрд▓реЛрдб рдХрд░рд╛ рдЖрдгрд┐ рд╕рд┐рд░рд┐рдпрд▓ рдореЙрдирд┐рдЯрд░рд╡рд░реАрд▓ рдЖрдЙрдЯрдкреБрдЯ рддрдкрд╛рд╕рд╛. рдкреНрд░рддреНрдпреЗрдХ рд╡реЗрд│реА рддреБрдореНрд╣реА C рдмрдЯрдг рджрд╛рдмрддрд╛, рдкреНрд░рддрд┐рдорд╛ рдХреЕрдкреНрдЪрд░ рдХреЗрд▓реА рдЬрд╛рдИрд▓ рдЖрдгрд┐ SD рдХрд╛рд░реНрдбрд╡рд░ рд╕реЗрд╡реНрд╣ рдХреЗрд▓реА рдЬрд╛рдИрд▓.

    ```output
    Connecting to WiFi..
    Connected!
    Image captured
    Image read to buffer with length 16392
    Image written to file 1.jpg
    Image captured
    Image read to buffer with length 14344
    Image written to file 2.jpg
    ```

1. microSD рдХрд╛рд░реНрдб рдкреЙрд╡рд░ рдСрдл рдХрд░рд╛ рдЖрдгрд┐ рдереЛрдбреЗрд╕реЗ рдврдХрд▓реВрди рдЖрдгрд┐ рд╕реЛрдбреВрди рддреЗ рдмрд╛рд╣реЗрд░ рдХрд╛рдврд╛, рдЖрдгрд┐ рддреЗ рдмрд╛рд╣реЗрд░ рдпреЗрдИрд▓. рд╣реЗ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рддреБрдореНрд╣рд╛рд▓рд╛ рдкрд╛рддрд│ рд╕рд╛рдзрди рд╡рд╛рдкрд░рд╛рд╡реЗ рд▓рд╛рдЧреЗрд▓. рдкреНрд░рддрд┐рдорд╛ рдкрд╛рд╣рдгреНрдпрд╛рд╕рд╛рдареА microSD рдХрд╛рд░реНрдб рддреБрдордЪреНрдпрд╛ рд╕рдВрдЧрдгрдХрд╛рдд рдкреНрд▓рдЧ рдХрд░рд╛.

    ![ArduCam рд╡рд╛рдкрд░реВрди рдХреЕрдкреНрдЪрд░ рдХреЗрд▓реЗрд▓рд╛ рдХреЗрд│реНрдпрд╛рдЪрд╛ рдлреЛрдЯреЛ](../../../../../translated_images/banana-arducam.be1b32d4267a8194b0fd042362e56faa431da9cd4af172051b37243ea9be0256.mr.jpg)
ЁЯТБ рдХреЕрдореЗрд░рд╛рдЪреНрдпрд╛ рд╡реНрд╣рд╛рдЗрдЯ рдмреЕрд▓рдиреНрд╕рд▓рд╛ рд╕реНрд╡рддрдГрд▓рд╛ рд╕рдорд╛рдпреЛрдЬрд┐рдд рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдХрд╛рд╣реА рдкреНрд░рддрд┐рдорд╛ рд▓рд╛рдЧреВ рд╢рдХрддрд╛рдд. рддреБрдореНрд╣реА рд╣реЗ рдХреЕрдкреНрдЪрд░ рдХреЗрд▓реЗрд▓реНрдпрд╛ рдкреНрд░рддрд┐рдорд╛рдВрдЪреНрдпрд╛ рд░рдВрдЧрд╛рд╡рд░реВрди рд▓рдХреНрд╖рд╛рдд рдШреЗрдК рд╢рдХрддрд╛, рд╕реБрд░реБрд╡рд╛рддреАрдЪреНрдпрд╛ рдХрд╛рд╣реА рдкреНрд░рддрд┐рдорд╛ рд░рдВрдЧрд╛рдЪреНрдпрд╛ рджреГрд╖реНрдЯреАрдиреЗ рдЪреБрдХреАрдЪреНрдпрд╛ рджрд┐рд╕реВ рд╢рдХрддрд╛рдд. рддреБрдореНрд╣реА рдиреЗрд╣рдореАрдЪ рдпрд╛рд╡рд░ рдЙрдкрд╛рдп рдХрд░реВ рд╢рдХрддрд╛, `setup` рдлрдВрдХреНрд╢рдирдордзреНрдпреЗ рджреБрд░реНрд▓рдХреНрд╖рд┐рдд рдХреЗрд▓реНрдпрд╛ рдЬрд╛рдгрд╛рд▒реНрдпрд╛ рдХрд╛рд╣реА рдкреНрд░рддрд┐рдорд╛ рдХреЕрдкреНрдЪрд░ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдХреЛрдб рдмрджрд▓реВрди.


---

**рдЕрд╕реНрд╡реАрдХрд░рдг**:  
рд╣рд╛ рджрд╕реНрддрдРрд╡рдЬ AI рднрд╛рд╖рд╛рдВрддрд░ рд╕реЗрд╡рд╛ [Co-op Translator](https://github.com/Azure/co-op-translator) рдЪрд╛ рд╡рд╛рдкрд░ рдХрд░реВрди рднрд╛рд╖рд╛рдВрддрд░рд┐рдд рдХрд░рдгреНрдпрд╛рдд рдЖрд▓рд╛ рдЖрд╣реЗ. рдЖрдореНрд╣реА рдЕрдЪреВрдХрддреЗрд╕рд╛рдареА рдкреНрд░рдпрддреНрдирд╢реАрд▓ рдЕрд╕рд▓реЛ рддрд░реА рдХреГрдкрдпрд╛ рд▓рдХреНрд╖рд╛рдд рдареЗрд╡рд╛ рдХреА рд╕реНрд╡рдпрдВрдЪрд▓рд┐рдд рднрд╛рд╖рд╛рдВрддрд░реЗ рддреНрд░реБрдЯреА рдХрд┐рдВрд╡рд╛ рдЕрдЪреВрдХрддреЗрдЪреНрдпрд╛ рдЕрднрд╛рд╡рд╛рдиреЗ рдпреБрдХреНрдд рдЕрд╕реВ рд╢рдХрддрд╛рдд. рдореВрд│ рднрд╛рд╖реЗрддреАрд▓ рджрд╕реНрддрдРрд╡рдЬ рд╣рд╛ рдЕрдзрд┐рдХреГрдд рд╕реНрд░реЛрдд рдорд╛рдирд▓рд╛ рдЬрд╛рд╡рд╛. рдорд╣рддреНрддреНрд╡рд╛рдЪреНрдпрд╛ рдорд╛рд╣рд┐рддреАрд╕рд╛рдареА рд╡реНрдпрд╛рд╡рд╕рд╛рдпрд┐рдХ рдорд╛рдирд╡реА рднрд╛рд╖рд╛рдВрддрд░рд╛рдЪреА рд╢рд┐рдлрд╛рд░рд╕ рдХреЗрд▓реА рдЬрд╛рддреЗ. рдпрд╛ рднрд╛рд╖рд╛рдВрддрд░рд╛рдЪрд╛ рд╡рд╛рдкрд░ рдХрд░реВрди рдЙрджреНрднрд╡рд▓реЗрд▓реНрдпрд╛ рдХреЛрдгрддреНрдпрд╛рд╣реА рдЧреИрд░рд╕рдордЬ рдХрд┐рдВрд╡рд╛ рдЪреБрдХреАрдЪреНрдпрд╛ рдЕрд░реНрдерд╛рд╕рд╛рдареА рдЖрдореНрд╣реА рдЬрдмрд╛рдмрджрд╛рд░ рд░рд╛рд╣рдгрд╛рд░ рдирд╛рд╣реА.