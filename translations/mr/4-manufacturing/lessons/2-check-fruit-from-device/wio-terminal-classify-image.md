<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "32a1f23e7834fbe7715da8c4ebb450b9",
  "translation_date": "2025-08-27T10:24:01+00:00",
  "source_file": "4-manufacturing/lessons/2-check-fruit-from-device/wio-terminal-classify-image.md",
  "language_code": "mr"
}
-->
# рдкреНрд░рддрд┐рдорд╛ рд╡рд░реНрдЧреАрдХреГрдд рдХрд░рд╛ - Wio Terminal

рдпрд╛ рдзрдбреНрдпрд╛рдЪреНрдпрд╛ рднрд╛рдЧрд╛рдд, рддреБрдореНрд╣реА рдХреЕрдореЗрд▒реНрдпрд╛рдиреЗ рдШреЗрддрд▓реЗрд▓реА рдкреНрд░рддрд┐рдорд╛ Custom Vision рд╕реЗрд╡реЗрдХрдбреЗ рдкрд╛рдард╡реВрди рддреА рд╡рд░реНрдЧреАрдХреГрдд рдХрд░рд╛рд▓.

## рдкреНрд░рддрд┐рдорд╛ рд╡рд░реНрдЧреАрдХреГрдд рдХрд░рд╛

Custom Vision рд╕реЗрд╡реЗрдордзреНрдпреЗ REST API рдЖрд╣реЗ рдЬреНрдпрд╛рдЪрд╛ рдЙрдкрдпреЛрдЧ Wio Terminal рд╡рд░реВрди рдкреНрд░рддрд┐рдорд╛ рд╡рд░реНрдЧреАрдХреГрдд рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдХрд░рддрд╛ рдпреЗрддреЛ. рд╣рд╛ REST API HTTPS рдХрдиреЗрдХреНрд╢рдирджреНрд╡рд╛рд░реЗ рдкреНрд░рд╡реЗрд╢ рдХреЗрд▓рд╛ рдЬрд╛рддреЛ - рдПрдХ рд╕реБрд░рдХреНрд╖рд┐рдд HTTP рдХрдиреЗрдХреНрд╢рди.

HTTPS endpoints рд╢реА рд╕рдВрд╡рд╛рдж рд╕рд╛рдзрддрд╛рдирд╛, рдХреНрд▓рд╛рдпрдВрдЯ рдХреЛрдбрд▓рд╛ рдкреНрд░рд╡реЗрд╢ рдХреЗрд▓реЗрд▓реНрдпрд╛ рд╕рд░реНрд╡реНрд╣рд░рдХрдбреВрди рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдХреА рдкреНрд░рдорд╛рдгрдкрддреНрд░рд╛рдЪреА рд╡рд┐рдирдВрддреА рдХрд░рд╛рд╡реА рд▓рд╛рдЧрддреЗ рдЖрдгрд┐ рддреНрдпрд╛рдЪрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реВрди рдкрд╛рдард╡рд▓реЗрд▓рд╛ рдбреЗрдЯрд╛ рдПрдиреНрдХреНрд░рд┐рдкреНрдЯ рдХрд░рд╛рд╡рд╛ рд▓рд╛рдЧрддреЛ. рддреБрдордЪрд╛ рд╡реЗрдм рдмреНрд░рд╛рдЙрдЭрд░ рд╣реЗ рд╕реНрд╡рдпрдВрдЪрд▓рд┐рддрдкрдгреЗ рдХрд░рддреЛ, рдкрд░рдВрддреБ рдорд╛рдпрдХреНрд░реЛрдХрдВрдЯреНрд░реЛрд▓рд░реНрд╕ рддрд╕реЗ рдХрд░рдд рдирд╛рд╣реАрдд. рддреБрдореНрд╣рд╛рд▓рд╛ рд╣реЗ рдкреНрд░рдорд╛рдгрдкрддреНрд░ рд╣рд╛рддрд╛рдиреЗ рдорд┐рд│рд╡рд╛рд╡реЗ рд▓рд╛рдЧреЗрд▓ рдЖрдгрд┐ REST API рд╢реА рд╕реБрд░рдХреНрд╖рд┐рдд рдХрдиреЗрдХреНрд╢рди рддрдпрд╛рд░ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рддреНрдпрд╛рдЪрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рд╛рд╡рд╛ рд▓рд╛рдЧреЗрд▓. рд╣реА рдкреНрд░рдорд╛рдгрдкрддреНрд░реЗ рдмрджрд▓рдд рдирд╛рд╣реАрдд, рддреНрдпрд╛рдореБрд│реЗ рдПрдХрджрд╛ рдкреНрд░рдорд╛рдгрдкрддреНрд░ рдорд┐рд│рд╛рд▓реНрдпрд╛рд╡рд░ рддреЗ рддреБрдордЪреНрдпрд╛ рдЕреЕрдкреНрд▓рд┐рдХреЗрд╢рдирдордзреНрдпреЗ рд╣рд╛рд░реНрдб рдХреЛрдб рдХреЗрд▓реЗ рдЬрд╛рдК рд╢рдХрддреЗ.

рд╣реА рдкреНрд░рдорд╛рдгрдкрддреНрд░реЗ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдХреА рд╕рдорд╛рд╡рд┐рд╖реНрдЯ рдХрд░рддрд╛рдд рдЖрдгрд┐ рд╕реБрд░рдХреНрд╖рд┐рдд рдареЗрд╡рдгреНрдпрд╛рдЪреА рдЧрд░рдЬ рдирд╛рд╣реА. рддреБрдореНрд╣реА рддреА рддреБрдордЪреНрдпрд╛ рд╕реЛрд░реНрд╕ рдХреЛрдбрдордзреНрдпреЗ рд╡рд╛рдкрд░реВ рд╢рдХрддрд╛ рдЖрдгрд┐ GitHub рд╕рд╛рд░рдЦреНрдпрд╛ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдард┐рдХрд╛рдгреА рд╢реЗрдЕрд░ рдХрд░реВ рд╢рдХрддрд╛.

### рдХрд╛рд░реНрдп - SSL рдХреНрд▓рд╛рдпрдВрдЯ рд╕реЗрдЯ рдХрд░рд╛

1. `fruit-quality-detector` рдЕреЕрдк рдкреНрд░рдХрд▓реНрдк рдЙрдШрдбрд╛, рдЬрд░ рддреЛ рдЖрдзреАрдЪ рдЙрдШрдбрд▓реЗрд▓рд╛ рдирд╕реЗрд▓.

1. `config.h` рд╣реЗрдбрд░ рдлрд╛рдЗрд▓ рдЙрдШрдбрд╛ рдЖрдгрд┐ рдЦрд╛рд▓реАрд▓ рдХреЛрдб рдЬреЛрдбрд╛:

    ```cpp
    const char *CERTIFICATE =
        "-----BEGIN CERTIFICATE-----\r\n"
        "MIIF8zCCBNugAwIBAgIQAueRcfuAIek/4tmDg0xQwDANBgkqhkiG9w0BAQwFADBh\r\n"
        "MQswCQYDVQQGEwJVUzEVMBMGA1UEChMMRGlnaUNlcnQgSW5jMRkwFwYDVQQLExB3\r\n"
        "d3cuZGlnaWNlcnQuY29tMSAwHgYDVQQDExdEaWdpQ2VydCBHbG9iYWwgUm9vdCBH\r\n"
        "MjAeFw0yMDA3MjkxMjMwMDBaFw0yNDA2MjcyMzU5NTlaMFkxCzAJBgNVBAYTAlVT\r\n"
        "MR4wHAYDVQQKExVNaWNyb3NvZnQgQ29ycG9yYXRpb24xKjAoBgNVBAMTIU1pY3Jv\r\n"
        "c29mdCBBenVyZSBUTFMgSXNzdWluZyBDQSAwNjCCAiIwDQYJKoZIhvcNAQEBBQAD\r\n"
        "ggIPADCCAgoCggIBALVGARl56bx3KBUSGuPc4H5uoNFkFH4e7pvTCxRi4j/+z+Xb\r\n"
        "wjEz+5CipDOqjx9/jWjskL5dk7PaQkzItidsAAnDCW1leZBOIi68Lff1bjTeZgMY\r\n"
        "iwdRd3Y39b/lcGpiuP2d23W95YHkMMT8IlWosYIX0f4kYb62rphyfnAjYb/4Od99\r\n"
        "ThnhlAxGtfvSbXcBVIKCYfZgqRvV+5lReUnd1aNjRYVzPOoifgSx2fRyy1+pO1Uz\r\n"
        "aMMNnIOE71bVYW0A1hr19w7kOb0KkJXoALTDDj1ukUEDqQuBfBxReL5mXiu1O7WG\r\n"
        "0vltg0VZ/SZzctBsdBlx1BkmWYBW261KZgBivrql5ELTKKd8qgtHcLQA5fl6JB0Q\r\n"
        "gs5XDaWehN86Gps5JW8ArjGtjcWAIP+X8CQaWfaCnuRm6Bk/03PQWhgdi84qwA0s\r\n"
        "sRfFJwHUPTNSnE8EiGVk2frt0u8PG1pwSQsFuNJfcYIHEv1vOzP7uEOuDydsmCjh\r\n"
        "lxuoK2n5/2aVR3BMTu+p4+gl8alXoBycyLmj3J/PUgqD8SL5fTCUegGsdia/Sa60\r\n"
        "N2oV7vQ17wjMN+LXa2rjj/b4ZlZgXVojDmAjDwIRdDUujQu0RVsJqFLMzSIHpp2C\r\n"
        "Zp7mIoLrySay2YYBu7SiNwL95X6He2kS8eefBBHjzwW/9FxGqry57i71c2cDAgMB\r\n"
        "AAGjggGtMIIBqTAdBgNVHQ4EFgQU1cFnOsKjnfR3UltZEjgp5lVou6UwHwYDVR0j\r\n"
        "BBgwFoAUTiJUIBiV5uNu5g/6+rkS7QYXjzkwDgYDVR0PAQH/BAQDAgGGMB0GA1Ud\r\n"
        "JQQWMBQGCCsGAQUFBwMBBggrBgEFBQcDAjASBgNVHRMBAf8ECDAGAQH/AgEAMHYG\r\n"
        "CCsGAQUFBwEBBGowaDAkBggrBgEFBQcwAYYYaHR0cDovL29jc3AuZGlnaWNlcnQu\r\n"
        "Y29tMEAGCCsGAQUFBzAChjRodHRwOi8vY2FjZXJ0cy5kaWdpY2VydC5jb20vRGln\r\n"
        "aUNlcnRHbG9iYWxSb290RzIuY3J0MHsGA1UdHwR0MHIwN6A1oDOGMWh0dHA6Ly9j\r\n"
        "cmwzLmRpZ2ljZXJ0LmNvbS9EaWdpQ2VydEdsb2JhbFJvb3RHMi5jcmwwN6A1oDOG\r\n"
        "MWh0dHA6Ly9jcmw0LmRpZ2ljZXJ0LmNvbS9EaWdpQ2VydEdsb2JhbFJvb3RHMi5j\r\n"
        "cmwwHQYDVR0gBBYwFDAIBgZngQwBAgEwCAYGZ4EMAQICMBAGCSsGAQQBgjcVAQQD\r\n"
        "AgEAMA0GCSqGSIb3DQEBDAUAA4IBAQB2oWc93fB8esci/8esixj++N22meiGDjgF\r\n"
        "+rA2LUK5IOQOgcUSTGKSqF9lYfAxPjrqPjDCUPHCURv+26ad5P/BYtXtbmtxJWu+\r\n"
        "cS5BhMDPPeG3oPZwXRHBJFAkY4O4AF7RIAAUW6EzDflUoDHKv83zOiPfYGcpHc9s\r\n"
        "kxAInCedk7QSgXvMARjjOqdakor21DTmNIUotxo8kHv5hwRlGhBJwps6fEVi1Bt0\r\n"
        "trpM/3wYxlr473WSPUFZPgP1j519kLpWOJ8z09wxay+Br29irPcBYv0GMXlHqThy\r\n"
        "8y4m/HyTQeI2IMvMrQnwqPpY+rLIXyviI2vLoI+4xKE4Rn38ZZ8m\r\n"
        "-----END CERTIFICATE-----\r\n";
    ```

    рд╣реЗ *Microsoft Azure DigiCert Global Root G2 рдкреНрд░рдорд╛рдгрдкрддреНрд░* рдЖрд╣реЗ - рд╣реЗ рдЕрдиреЗрдХ Azure рд╕реЗрд╡рд╛рдВрджреНрд╡рд╛рд░реЗ рдЬрд╛рдЧрддрд┐рдХ рд╕реНрддрд░рд╛рд╡рд░ рд╡рд╛рдкрд░рд▓реЗ рдЬрд╛рдгрд╛рд░реЗ рдкреНрд░рдорд╛рдгрдкрддреНрд░ рдЖрд╣реЗ.

    > ЁЯТБ рд╣реЗ рдкреНрд░рдорд╛рдгрдкрддреНрд░ рд╡рд╛рдкрд░рдгреНрдпрд╛рд╕рд╛рдареА рдЖрд╣реЗ рд╣реЗ рдкрд╛рд╣рдгреНрдпрд╛рд╕рд╛рдареА, macOS рдХрд┐рдВрд╡рд╛ Linux рд╡рд░ рдЦрд╛рд▓реАрд▓ рдХрдорд╛рдВрдб рдЪрд╛рд▓рд╡рд╛. рдЬрд░ рддреБрдореНрд╣реА Windows рд╡рд╛рдкрд░рдд рдЕрд╕рд╛рд▓, рддрд░ рддреБрдореНрд╣реА [Windows Subsystem for Linux (WSL)](https://docs.microsoft.com/windows/wsl/?WT.mc_id=academic-17441-jabenn) рд╡рд╛рдкрд░реВрди рд╣реА рдХрдорд╛рдВрдб рдЪрд╛рд▓рд╡реВ рд╢рдХрддрд╛:
    >
    > ```sh
    > openssl s_client -showcerts -verify 5 -connect api.cognitive.microsoft.com:443
    > ```
    >
    > рдЖрдЙрдЯрдкреБрдЯрдордзреНрдпреЗ DigiCert Global Root G2 рдкреНрд░рдорд╛рдгрдкрддреНрд░ рд╕реВрдЪреАрдмрджреНрдз рдЕрд╕реЗрд▓.

1. `main.cpp` рдЙрдШрдбрд╛ рдЖрдгрд┐ рдЦрд╛рд▓реАрд▓ include directive рдЬреЛрдбрд╛:

    ```cpp
    #include <WiFiClientSecure.h>
    ```

1. include directives рдЪреНрдпрд╛ рдЦрд╛рд▓реА, `WifiClientSecure` рдЪреЗ instance рдШреЛрд╖рд┐рдд рдХрд░рд╛:

    ```cpp
    WiFiClientSecure client;
    ```

    рд╣реА class HTTPS рджреНрд╡рд╛рд░реЗ рд╡реЗрдм endpoints рд╢реА рд╕рдВрд╡рд╛рдж рд╕рд╛рдзрдгреНрдпрд╛рд╕рд╛рдареА рдХреЛрдб рд╕рдорд╛рд╡рд┐рд╖реНрдЯ рдХрд░рддреЗ.

1. `connectWiFi` рдкрджреНрдзрддреАрдордзреНрдпреЗ, WiFiClientSecure рд▓рд╛ DigiCert Global Root G2 рдкреНрд░рдорд╛рдгрдкрддреНрд░ рд╡рд╛рдкрд░рдгреНрдпрд╛рд╕ рд╕реЗрдЯ рдХрд░рд╛:

    ```cpp
    client.setCACert(CERTIFICATE);
    ```

### рдХрд╛рд░реНрдп - рдкреНрд░рддрд┐рдорд╛ рд╡рд░реНрдЧреАрдХреГрдд рдХрд░рд╛

1. `platformio.ini` рдлрд╛рдЗрд▓рдордзреАрд▓ `lib_deps` рдпрд╛рджреАрдордзреНрдпреЗ рдЦрд╛рд▓реАрд▓ рдЕрддрд┐рд░рд┐рдХреНрдд рдУрд│ рдЬреЛрдбрд╛:

    ```ini
    bblanchon/ArduinoJson @ 6.17.3
    ```

    рд╣реЗ [ArduinoJson](https://arduinojson.org), рдПрдХ Arduino JSON рд▓рд╛рдпрдмреНрд░рд░реА рдЖрдпрд╛рдд рдХрд░рддреЗ, рдЖрдгрд┐ REST API рдХрдбреВрди JSON рдкреНрд░рддрд┐рд╕рд╛рдж рдбрд┐рдХреЛрдб рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рд╡рд╛рдкрд░рд▓реЗ рдЬрд╛рдИрд▓.

1. `config.h` рдордзреНрдпреЗ, Custom Vision рд╕реЗрд╡реЗрдордзреВрди prediction URL рдЖрдгрд┐ Key рд╕рд╛рдареА constants рдЬреЛрдбрд╛:

    ```cpp
    const char *PREDICTION_URL = "<PREDICTION_URL>";
    const char *PREDICTION_KEY = "<PREDICTION_KEY>";
    ```

    `<PREDICTION_URL>` рд▓рд╛ Custom Vision рдордзреАрд▓ prediction URL рдиреЗ рдмрджрд▓рд╛. `<PREDICTION_KEY>` рд▓рд╛ prediction key рдиреЗ рдмрджрд▓рд╛.

1. `main.cpp` рдордзреНрдпреЗ, ArduinoJson рд▓рд╛рдпрдмреНрд░рд░реАрд╕рд╛рдареА include directive рдЬреЛрдбрд╛:

    ```cpp
    #include <ArduinoJSON.h>
    ```

1. `main.cpp` рдордзреНрдпреЗ, `buttonPressed` рдлрдВрдХреНрд╢рдирдЪреНрдпрд╛ рд╡рд░ рдЦрд╛рд▓реАрд▓ рдлрдВрдХреНрд╢рди рдЬреЛрдбрд╛:

    ```cpp
    void classifyImage(byte *buffer, uint32_t length)
    {
        HTTPClient httpClient;
        httpClient.begin(client, PREDICTION_URL);
        httpClient.addHeader("Content-Type", "application/octet-stream");
        httpClient.addHeader("Prediction-Key", PREDICTION_KEY);
    
        int httpResponseCode = httpClient.POST(buffer, length);
    
        if (httpResponseCode == 200)
        {
            String result = httpClient.getString();
    
            DynamicJsonDocument doc(1024);
            deserializeJson(doc, result.c_str());
    
            JsonObject obj = doc.as<JsonObject>();
            JsonArray predictions = obj["predictions"].as<JsonArray>();
    
            for(JsonVariant prediction : predictions) 
            {
                String tag = prediction["tagName"].as<String>();
                float probability = prediction["probability"].as<float>();
    
                char buff[32];
                sprintf(buff, "%s:\t%.2f%%", tag.c_str(), probability * 100.0);
                Serial.println(buff);
            }
        }
    
        httpClient.end();
    }
    ```

    рд╣рд╛ рдХреЛрдб `HTTPClient` рдШреЛрд╖рд┐рдд рдХрд░реВрди рд╕реБрд░реВ рд╣реЛрддреЛ - рдПрдХ class рдЬреНрдпрд╛рдордзреНрдпреЗ REST APIs рд╢реА рд╕рдВрд╡рд╛рдж рд╕рд╛рдзрдгреНрдпрд╛рд╕рд╛рдареА рдкрджреНрдзрддреА рдЕрд╕рддрд╛рдд. рддреНрдпрд╛рдирдВрддрд░ рдХреНрд▓рд╛рдпрдВрдЯрд▓рд╛ Azure рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдХреАрд╕рд╣ рд╕реЗрдЯ рдХреЗрд▓реЗрд▓реНрдпрд╛ `WiFiClientSecure` instance рд╡рд╛рдкрд░реВрди prediction URL рд╢реА рдХрдиреЗрдХреНрдЯ рдХреЗрд▓реЗ рдЬрд╛рддреЗ.

    рдПрдХрджрд╛ рдХрдиреЗрдХреНрдЯ рдЭрд╛рд▓реНрдпрд╛рд╡рд░, headers рдкрд╛рдард╡рд▓реЗ рдЬрд╛рддрд╛рдд - REST API рд╡рд┐рд░реБрджреНрдз рдХреЗрд▓реЗрд▓реНрдпрд╛ рд╡рд┐рдирдВрддреАрдмрджреНрджрд▓ рдорд╛рд╣рд┐рддреА. `Content-Type` header рд╕реВрдЪрд┐рдд рдХрд░рддреЗ рдХреА API рдХреЙрд▓ рдХрдЪреНрдЪрд╛ рдмрд╛рдпрдирд░реА рдбреЗрдЯрд╛ рдкрд╛рдард╡реЗрд▓, `Prediction-Key` header Custom Vision prediction key рдкрд╛рд╕ рдХрд░рддреЛ.

    рдирдВрддрд░ HTTP рдХреНрд▓рд╛рдпрдВрдЯрд╡рд░ POST рд╡рд┐рдирдВрддреА рдХреЗрд▓реА рдЬрд╛рддреЗ, рдЬреНрдпрд╛рдордзреНрдпреЗ рдмрд╛рдЗрдЯ array рдЕрдкрд▓реЛрдб рдХреЗрд▓реЗ рдЬрд╛рддреЗ. рд╣реЗ рдмрд╛рдЗрдЯ array рдХреЕрдореЗрд▒реНрдпрд╛рдиреЗ рдШреЗрддрд▓реЗрд▓реА JPEG рдкреНрд░рддрд┐рдорд╛ рд╕рдорд╛рд╡рд┐рд╖реНрдЯ рдХрд░реЗрд▓.

    > ЁЯТБ POST рд╡рд┐рдирдВрддреНрдпрд╛ рдбреЗрдЯрд╛ рдкрд╛рдард╡рдгреНрдпрд╛рд╕рд╛рдареА рдЖрдгрд┐ рдкреНрд░рддрд┐рд╕рд╛рдж рдорд┐рд│рд╡рдгреНрдпрд╛рд╕рд╛рдареА рдЕрд╕рддрд╛рдд. GET рд╡рд┐рдирдВрддреНрдпрд╛ рдбреЗрдЯрд╛ рдорд┐рд│рд╡рдгреНрдпрд╛рд╕рд╛рдареА рд╡рд╛рдкрд░рд▓реНрдпрд╛ рдЬрд╛рддрд╛рдд. GET рд╡рд┐рдирдВрддреНрдпрд╛ рддреБрдордЪрд╛ рд╡реЗрдм рдмреНрд░рд╛рдЙрдЭрд░ рд╡реЗрдм рдкреГрд╖реНрдареЗ рд▓реЛрдб рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рд╡рд╛рдкрд░рддреЛ.

    POST рд╡рд┐рдирдВрддреА рдкреНрд░рддрд┐рд╕рд╛рдж рд╕реНрдерд┐рддреА рдХреЛрдб рдкрд░рдд рдХрд░рддреЗ. рд╣реЗ рдЪрд╛рдВрдЧрд▓реНрдпрд╛ рдкреНрд░рдХрд╛рд░реЗ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХреЗрд▓реЗрд▓реЗ рдореВрд▓реНрдпреЗ рдЕрд╕рддрд╛рдд, рдЬреНрдпрд╛рдордзреНрдпреЗ 200 рдореНрд╣рдгрдЬреЗ **OK** - POST рд╡рд┐рдирдВрддреА рдпрд╢рд╕реНрд╡реА рдЭрд╛рд▓реА.

    > ЁЯТБ рддреБрдореНрд╣реА [List of HTTP status codes page on Wikipedia](https://wikipedia.org/wiki/List_of_HTTP_status_codes) рд╡рд░ рд╕рд░реНрд╡ рдкреНрд░рддрд┐рд╕рд╛рдж рд╕реНрдерд┐рддреА рдХреЛрдб рдкрд╛рд╣реВ рд╢рдХрддрд╛.

    рдЬрд░ 200 рдкрд░рдд рдЖрд▓реЗ, рддрд░ рдкрд░рд┐рдгрд╛рдо HTTP рдХреНрд▓рд╛рдпрдВрдЯрдХрдбреВрди рд╡рд╛рдЪрд▓рд╛ рдЬрд╛рддреЛ. рд╣рд╛ REST API рдХрдбреВрди prediction рдЪреНрдпрд╛ рдкрд░рд┐рдгрд╛рдорд╛рдВрд╕рд╣ JSON рджрд╕реНрддрдРрд╡рдЬ рдореНрд╣рдгреВрди рдкрд╛рдард╡рд▓реЗрд▓рд╛ рдордЬрдХреВрд░ рдкреНрд░рддрд┐рд╕рд╛рдж рдЖрд╣реЗ. JSON рдЦрд╛рд▓реАрд▓ рд╕реНрд╡рд░реВрдкрд╛рдд рдЖрд╣реЗ:

    ```jSON
    {
        "id":"45d614d3-7d6f-47e9-8fa2-04f237366a16",
        "project":"135607e5-efac-4855-8afb-c93af3380531",
        "iteration":"04f1c1fa-11ec-4e59-bb23-4c7aca353665",
        "created":"2021-06-10T17:58:58.959Z",
        "predictions":[
            {
                "probability":0.5582016,
                "tagId":"05a432ea-9718-4098-b14f-5f0688149d64",
                "tagName":"ripe"
            },
            {
                "probability":0.44179836,
                "tagId":"bb091037-16e5-418e-a9ea-31c6a2920f17",
                "tagName":"unripe"
            }
        ]
    }
    ```

    рдпреЗрдереЗ рдорд╣рддреНрддреНрд╡рд╛рдЪрд╛ рднрд╛рдЧ рдореНрд╣рдгрдЬреЗ `predictions` array. рдпрд╛рдд predictions рдЕрд╕рддрд╛рдд, рдкреНрд░рддреНрдпреЗрдХ рдЯреЕрдЧрд╕рд╛рдареА рдПрдХ entry рдЬреНрдпрд╛рдордзреНрдпреЗ рдЯреЕрдЧрдЪреЗ рдирд╛рд╡ рдЖрдгрд┐ probability рдЕрд╕рддреЗ. рдкрд░рдд рдЖрд▓реЗрд▓реНрдпрд╛ probabilities 0-1 рджрд░рдореНрдпрд╛рди рдЕрд╕рддрд╛рдд, 0 рдореНрд╣рдгрдЬреЗ рдЯреЕрдЧрд╢реА рдЬреБрд│рдгреНрдпрд╛рдЪреА 0% рд╢рдХреНрдпрддрд╛, рдЖрдгрд┐ 1 рдореНрд╣рдгрдЬреЗ 100% рд╢рдХреНрдпрддрд╛.

    > ЁЯТБ рдкреНрд░рддрд┐рдорд╛ рд╡рд░реНрдЧреАрдХрд░реНрддреЗ рд╡рд╛рдкрд░рд▓реЗрд▓реНрдпрд╛ рд╕рд░реНрд╡ рдЯреЕрдЧрд╕рд╛рдареА рдЯрдХреНрдХреЗрд╡рд╛рд░реА рдкрд░рдд рдХрд░рддрд╛рдд. рдкреНрд░рддреНрдпреЗрдХ рдЯреЕрдЧрд╕рд╛рдареА рдкреНрд░рддрд┐рдореЗрдиреЗ рддреНрдпрд╛ рдЯреЕрдЧрд╢реА рдЬреБрд│рдгреНрдпрд╛рдЪреА probability рдЕрд╕рддреЗ.

    рд╣рд╛ JSON рдбрд┐рдХреЛрдб рдХреЗрд▓рд╛ рдЬрд╛рддреЛ, рдЖрдгрд┐ рдкреНрд░рддреНрдпреЗрдХ рдЯреЕрдЧрд╕рд╛рдареА probabilities serial monitor рд╡рд░ рдкрд╛рдард╡рд▓реЗ рдЬрд╛рддрд╛рдд.

1. `buttonPressed` рдлрдВрдХреНрд╢рдирдордзреНрдпреЗ, SD рдХрд╛рд░реНрдбрд╡рд░ рд╕реЗрд╡реНрд╣ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдЕрд╕рд▓реЗрд▓рд╛ рдХреЛрдб `classifyImage` рдХреЙрд▓рдиреЗ рдмрджрд▓рд╛, рдХрд┐рдВрд╡рд╛ рддреЛ рдХреЛрдб рд▓рд┐рд╣рд┐рд▓реНрдпрд╛рдирдВрддрд░ рдЬреЛрдбрд╛, рдкрдг **buffer delete рдХрд░рдгреНрдпрд╛рдЪреНрдпрд╛ рдЖрдзреА**:

    ```cpp
    classifyImage(buffer, length);
    ```

    > ЁЯТБ рдЬрд░ рддреБрдореНрд╣реА SD рдХрд╛рд░реНрдбрд╡рд░ рд╕реЗрд╡реНрд╣ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдЕрд╕рд▓реЗрд▓рд╛ рдХреЛрдб рдмрджрд▓рд▓рд╛, рддрд░ рддреБрдореНрд╣реА рддреБрдордЪрд╛ рдХреЛрдб рд╕рд╛рдл рдХрд░реВрди `setupSDCard` рдЖрдгрд┐ `saveToSDCard` рдлрдВрдХреНрд╢рдиреНрд╕ рдХрд╛рдвреВрди рдЯрд╛рдХреВ рд╢рдХрддрд╛.

1. рддреБрдордЪрд╛ рдХреЛрдб рдЕрдкрд▓реЛрдб рдХрд░рд╛ рдЖрдгрд┐ рдЪрд╛рд▓рд╡рд╛. рдХреЕрдореЗрд░рд╛ рдлрд│рд╛рдВрдХрдбреЗ рдирд┐рд░реНрджреЗрд╢рд┐рдд рдХрд░рд╛ рдЖрдгрд┐ C рдмрдЯрдг рджрд╛рдмрд╛. рддреБрдореНрд╣рд╛рд▓рд╛ serial monitor рдордзреНрдпреЗ рдЖрдЙрдЯрдкреБрдЯ рджрд┐рд╕реЗрд▓:

    ```output
    Connecting to WiFi..
    Connected!
    Image captured
    Image read to buffer with length 8200
    ripe:   56.84%
    unripe: 43.16%
    ```

    рддреБрдореНрд╣реА рдШреЗрддрд▓реЗрд▓реА рдкреНрд░рддрд┐рдорд╛ рдЖрдгрд┐ Custom Vision рдордзреАрд▓ **Predictions** рдЯреЕрдмрдордзреНрдпреЗ рд╣реА рдореВрд▓реНрдпреЗ рдкрд╛рд╣реВ рд╢рдХрддрд╛.

    ![Custom Vision рдордзреНрдпреЗ рдПрдХ рдХреЗрд│реА, 56.8% рдкрдХреНрдХреА рдЖрдгрд┐ 43.1% рдХрдЪреНрдЪреА рдореНрд╣рдгреВрди рд╡рд░реНрдЧреАрдХреГрдд](../../../../../translated_images/custom-vision-banana-prediction.30cdff4e1d72db5d9a0be0193790a47c2b387da034e12dc1314dd57ca2131b59.mr.png)

> ЁЯТБ рддреБрдореНрд╣реА рд╣рд╛ рдХреЛрдб [code-classify/wio-terminal](../../../../../4-manufacturing/lessons/2-check-fruit-from-device/code-classify/wio-terminal) рдлреЛрд▓реНрдбрд░рдордзреНрдпреЗ рд╢реЛрдзреВ рд╢рдХрддрд╛.

ЁЯША рддреБрдордЪрд╛ рдлрд│ рдЧреБрдгрд╡рддреНрддрд╛ рд╡рд░реНрдЧреАрдХрд░реНрддрд╛ рдкреНрд░реЛрдЧреНрд░рд╛рдо рдпрд╢рд╕реНрд╡реА рдЭрд╛рд▓рд╛!

---

**рдЕрд╕реНрд╡реАрдХрд░рдг**:  
рд╣рд╛ рджрд╕реНрддрдРрд╡рдЬ AI рднрд╛рд╖рд╛рдВрддрд░ рд╕реЗрд╡рд╛ [Co-op Translator](https://github.com/Azure/co-op-translator) рд╡рд╛рдкрд░реВрди рднрд╛рд╖рд╛рдВрддрд░рд┐рдд рдХрд░рдгреНрдпрд╛рдд рдЖрд▓рд╛ рдЖрд╣реЗ. рдЖрдореНрд╣реА рдЕрдЪреВрдХрддреЗрд╕рд╛рдареА рдкреНрд░рдпрддреНрдирд╢реАрд▓ рдЕрд╕рд▓реЛ рддрд░реА рдХреГрдкрдпрд╛ рд▓рдХреНрд╖рд╛рдд рдареЗрд╡рд╛ рдХреА рд╕реНрд╡рдпрдВрдЪрд▓рд┐рдд рднрд╛рд╖рд╛рдВрддрд░рд╛рдВрдордзреНрдпреЗ рддреНрд░реБрдЯреА рдХрд┐рдВрд╡рд╛ рдЕрдЪреВрдХрддреЗрдЪрд╛ рдЕрднрд╛рд╡ рдЕрд╕реВ рд╢рдХрддреЛ. рдореВрд│ рднрд╛рд╖реЗрддреАрд▓ рджрд╕реНрддрдРрд╡рдЬ рд╣рд╛ рдЕрдзрд┐рдХреГрдд рд╕реНрд░реЛрдд рдорд╛рдирд▓рд╛ рдЬрд╛рд╡рд╛. рдорд╣рддреНрддреНрд╡рд╛рдЪреНрдпрд╛ рдорд╛рд╣рд┐рддреАрд╕рд╛рдареА рд╡реНрдпрд╛рд╡рд╕рд╛рдпрд┐рдХ рдорд╛рдирд╡реА рднрд╛рд╖рд╛рдВрддрд░рд╛рдЪреА рд╢рд┐рдлрд╛рд░рд╕ рдХреЗрд▓реА рдЬрд╛рддреЗ. рдпрд╛ рднрд╛рд╖рд╛рдВрддрд░рд╛рдЪрд╛ рд╡рд╛рдкрд░ рдХрд░реВрди рдирд┐рд░реНрдорд╛рдг рд╣реЛрдгрд╛рд▒реНрдпрд╛ рдХреЛрдгрддреНрдпрд╛рд╣реА рдЧреИрд░рд╕рдордЬ рдХрд┐рдВрд╡рд╛ рдЪреБрдХреАрдЪреНрдпрд╛ рдЕрд░реНрдерд╛рд╕рд╛рдареА рдЖрдореНрд╣реА рдЬрдмрд╛рдмрджрд╛рд░ рд░рд╛рд╣рдгрд╛рд░ рдирд╛рд╣реА.