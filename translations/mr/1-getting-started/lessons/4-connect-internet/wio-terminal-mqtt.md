<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "d6faf0e8d3c2d6d20c0aef2a305dab18",
  "translation_date": "2025-08-27T12:33:04+00:00",
  "source_file": "1-getting-started/lessons/4-connect-internet/wio-terminal-mqtt.md",
  "language_code": "mr"
}
-->
# рдЗрдВрдЯрд░рдиреЗрдЯрджреНрд╡рд╛рд░реЗ рддреБрдордЪреНрдпрд╛ рдирд╛рдИрдЯрд▓рд╛рдЗрдЯрдЪреЗ рдирд┐рдпрдВрддреНрд░рдг рдХрд░рд╛ - Wio Terminal

IoT рдбрд┐рд╡реНрд╣рд╛рдЗрд╕рд▓рд╛ *test.mosquitto.org* рд╢реА MQTT рдЪреНрдпрд╛ рдорд╛рдзреНрдпрдорд╛рддреВрди рд╕рдВрд╡рд╛рдж рд╕рд╛рдзрдгреНрдпрд╛рд╕рд╛рдареА рдХреЛрдб рдХрд░рдгреЗ рдЖрд╡рд╢реНрдпрдХ рдЖрд╣реЗ, рдЬреНрдпрд╛рдореБрд│реЗ рд▓рд╛рдИрдЯ рд╕реЗрдиреНрд╕рд░ рд╡рд╛рдЪрдирд╛рд╕рд╣ рдЯреЗрд▓рд┐рдореЗрдЯреНрд░реА рдореВрд▓реНрдпреЗ рдкрд╛рдард╡рддрд╛ рдпреЗрддреАрд▓ рдЖрдгрд┐ LED рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдХрдорд╛рдВрдбреНрд╕ рдкреНрд░рд╛рдкреНрдд рдХрд░рддрд╛ рдпреЗрддреАрд▓.

рдпрд╛ рдзрдбреНрдпрд╛рдЪреНрдпрд╛ рдпрд╛ рднрд╛рдЧрд╛рдд, рддреБрдореНрд╣реА рддреБрдордЪреНрдпрд╛ Wio Terminal рд▓рд╛ MQTT рдмреНрд░реЛрдХрд░рд╕рд╣ рдХрдиреЗрдХреНрдЯ рдХрд░рд╛рд▓.

## WiFi рдЖрдгрд┐ MQTT Arduino рд▓рд╛рдпрдмреНрд░рд░реА рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░рд╛

MQTT рдмреНрд░реЛрдХрд░рд╕рд╣ рд╕рдВрд╡рд╛рдж рд╕рд╛рдзрдгреНрдпрд╛рд╕рд╛рдареА, Wio Terminal рдордзреАрд▓ WiFi рдЪрд┐рдк рд╡рд╛рдкрд░рдгреНрдпрд╛рд╕рд╛рдареА рдЖрдгрд┐ MQTT рд╢реА рд╕рдВрд╡рд╛рдж рд╕рд╛рдзрдгреНрдпрд╛рд╕рд╛рдареА рдХрд╛рд╣реА Arduino рд▓рд╛рдпрдмреНрд░рд░реА рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░рдгреЗ рдЖрд╡рд╢реНрдпрдХ рдЖрд╣реЗ. Arduino рдбрд┐рд╡реНрд╣рд╛рдЗрд╕рд╕рд╛рдареА рд╡рд┐рдХрд╕рд┐рдд рдХрд░рддрд╛рдирд╛, рддреБрдореНрд╣реА рдУрдкрди-рд╕реЛрд░реНрд╕ рдХреЛрдб рдЕрд╕рд▓реЗрд▓реНрдпрд╛ рдЖрдгрд┐ рд╡рд┐рд╡рд┐рдз рдХреНрд╖рдорддрд╛рдВрдЪреА рдЕрдВрдорд▓рдмрдЬрд╛рд╡рдгреА рдХрд░рдгрд╛рд▒реНрдпрд╛ рд▓рд╛рдпрдмреНрд░рд░реАрдВрдЪрд╛ рдореЛрдареНрдпрд╛ рдкреНрд░рдорд╛рдгрд╛рд╡рд░ рд╡рд╛рдкрд░ рдХрд░реВ рд╢рдХрддрд╛. Seeed рдиреЗ Wio Terminal рд╕рд╛рдареА рд▓рд╛рдпрдмреНрд░рд░реА рдкреНрд░рдХрд╛рд╢рд┐рдд рдХреЗрд▓реНрдпрд╛ рдЖрд╣реЗрдд, рдЬреНрдпрд╛рдореБрд│реЗ рддреЗ WiFi рд╡рд░ рд╕рдВрд╡рд╛рдж рд╕рд╛рдзреВ рд╢рдХрддреЗ. рдЗрддрд░ рд╡рд┐рдХрд╕рдХрд╛рдВрдиреА MQTT рдмреНрд░реЛрдХрд░реНрд╕рд╢реА рд╕рдВрд╡рд╛рдж рд╕рд╛рдзрдгреНрдпрд╛рд╕рд╛рдареА рд▓рд╛рдпрдмреНрд░рд░реА рдкреНрд░рдХрд╛рд╢рд┐рдд рдХреЗрд▓реНрдпрд╛ рдЖрд╣реЗрдд, рдЖрдгрд┐ рддреБрдореНрд╣реА рддреБрдордЪреНрдпрд╛ рдбрд┐рд╡реНрд╣рд╛рдЗрд╕рд╕рд╣ рдпрд╛ рд▓рд╛рдпрдмреНрд░рд░реАрдВрдЪрд╛ рд╡рд╛рдкрд░ рдХрд░рд╛рд▓.

рдпрд╛ рд▓рд╛рдпрдмреНрд░рд░реА рд╕реЛрд░реНрд╕ рдХреЛрдб рд╕реНрд╡рд░реВрдкрд╛рдд рджрд┐рд▓реНрдпрд╛ рдЬрд╛рддрд╛рдд, рдЬреНрдпрд╛ PlatformIO рдордзреНрдпреЗ рд╕реНрд╡рдпрдВрдЪрд▓рд┐рддрдкрдгреЗ рдЖрдпрд╛рдд рдХреЗрд▓реНрдпрд╛ рдЬрд╛рдК рд╢рдХрддрд╛рдд рдЖрдгрд┐ рддреБрдордЪреНрдпрд╛ рдбрд┐рд╡реНрд╣рд╛рдЗрд╕рд╕рд╛рдареА рд╕рдВрдХрд▓рд┐рдд рдХреЗрд▓реНрдпрд╛ рдЬрд╛рдК рд╢рдХрддрд╛рдд. рдпрд╛рдореБрд│реЗ, Arduino рд▓рд╛рдпрдмреНрд░рд░реА рдХреЛрдгрддреНрдпрд╛рд╣реА рдбрд┐рд╡реНрд╣рд╛рдЗрд╕рд╡рд░ рдХрд╛рд░реНрдп рдХрд░рддреАрд▓, рдЬреЛрдкрд░реНрдпрдВрдд рддреНрдпрд╛ рд▓рд╛рдпрдмреНрд░рд░реАрд▓рд╛ рдЖрд╡рд╢реНрдпрдХ рдЕрд╕рд▓реЗрд▓реЗ рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╣рд╛рд░реНрдбрд╡реЗрдЕрд░ рддреНрдпрд╛ рдбрд┐рд╡реНрд╣рд╛рдЗрд╕рд╡рд░ рдЙрдкрд▓рдмреНрдз рдЖрд╣реЗ. рдХрд╛рд╣реА рд▓рд╛рдпрдмреНрд░рд░реА, рдЬрд╕реЗ рдХреА Seeed WiFi рд▓рд╛рдпрдмреНрд░рд░реА, рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╣рд╛рд░реНрдбрд╡реЗрдЕрд░рд╕рд╛рдареАрдЪ рдЕрд╕рддрд╛рдд.

рд▓рд╛рдпрдмреНрд░рд░реА рдЬрд╛рдЧрддрд┐рдХ рд╕реНрддрд░рд╛рд╡рд░ рдЗрдВрд╕реНрдЯреЙрд▓ рдХреЗрд▓реНрдпрд╛ рдЬрд╛рдК рд╢рдХрддрд╛рдд рдЖрдгрд┐ рдЖрд╡рд╢реНрдпрдХ рдЕрд╕рд▓реНрдпрд╛рд╕ рд╕рдВрдХрд▓рд┐рдд рдХреЗрд▓реНрдпрд╛ рдЬрд╛рдК рд╢рдХрддрд╛рдд, рдХрд┐рдВрд╡рд╛ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдкреНрд░рдХрд▓реНрдкрд╛рдд рдЗрдВрд╕реНрдЯреЙрд▓ рдХреЗрд▓реНрдпрд╛ рдЬрд╛рдК рд╢рдХрддрд╛рдд. рдпрд╛ рдЕрд╕рд╛рдЗрдирдореЗрдВрдЯрд╕рд╛рдареА, рд▓рд╛рдпрдмреНрд░рд░реА рдкреНрд░рдХрд▓реНрдкрд╛рдд рдЗрдВрд╕реНрдЯреЙрд▓ рдХреЗрд▓реНрдпрд╛ рдЬрд╛рддреАрд▓.

тЬЕ рд▓рд╛рдпрдмреНрд░рд░реА рд╡реНрдпрд╡рд╕реНрдерд╛рдкрдирд╛рдмрджреНрджрд▓ рдЕрдзрд┐рдХ рдЬрд╛рдгреВрди рдШреЗрдгреНрдпрд╛рд╕рд╛рдареА рдЖрдгрд┐ рд▓рд╛рдпрдмреНрд░рд░реА рдХрд╢рд╛ рд╢реЛрдзрд╛рдпрдЪреНрдпрд╛ рд╡ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░рд╛рдпрдЪреНрдпрд╛ рдпрд╛рдмрджреНрджрд▓ [PlatformIO рд▓рд╛рдпрдмреНрд░рд░реА рджрд╕реНрддрдРрд╡рдЬ](https://docs.platformio.org/en/latest/librarymanager/index.html) рд╡рд╛рдЪрд╛.

### рдХрд╛рд░реНрдп - WiFi рдЖрдгрд┐ MQTT Arduino рд▓рд╛рдпрдмреНрд░рд░реА рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░рд╛

Arduino рд▓рд╛рдпрдмреНрд░рд░реА рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░рд╛.

1. VS Code рдордзреНрдпреЗ рдирд╛рдИрдЯрд▓рд╛рдЗрдЯ рдкреНрд░рдХрд▓реНрдк рдЙрдШрдбрд╛.

1. `platformio.ini` рдлрд╛рдЗрд▓рдЪреНрдпрд╛ рд╢реЗрд╡рдЯреА рдЦрд╛рд▓реАрд▓ рдХреЛрдб рдЬреЛрдбрд╛:

    ```ini
    lib_deps =
        seeed-studio/Seeed Arduino rpcWiFi @ 1.0.5
        seeed-studio/Seeed Arduino FS @ 2.1.1
        seeed-studio/Seeed Arduino SFUD @ 2.0.2
        seeed-studio/Seeed Arduino rpcUnified @ 2.1.3
        seeed-studio/Seeed_Arduino_mbedtls @ 3.0.1
    ```

    рд╣реЗ Seeed WiFi рд▓рд╛рдпрдмреНрд░рд░реА рдЖрдпрд╛рдд рдХрд░рддреЗ. `@ <number>` рд╕рд┐рдВрдЯреЕрдХреНрд╕ рд▓рд╛рдпрдмреНрд░рд░реАрдЪреНрдпрд╛ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдЖрд╡реГрддреНрддреА рдХреНрд░рдорд╛рдВрдХрд╛рдЪрд╛ рд╕рдВрджрд░реНрдн рджреЗрддреЗ.

    > ЁЯТБ рддреБрдореНрд╣реА `@ <number>` рдХрд╛рдвреВрди рдЯрд╛рдХреВ рд╢рдХрддрд╛ рдЬреЗрдгреЗрдХрд░реВрди рд▓рд╛рдпрдмреНрд░рд░реАрдВрдЪреНрдпрд╛ рдиреЗрд╣рдореАрдЪреНрдпрд╛ рдирд╡реАрдирддрдо рдЖрд╡реГрддреНрддреНрдпрд╛ рд╡рд╛рдкрд░рд▓реНрдпрд╛ рдЬрд╛рддреАрд▓, рдкрд░рдВрддреБ рдирдВрддрд░рдЪреНрдпрд╛ рдЖрд╡реГрддреНрддреНрдпрд╛ рдЦрд╛рд▓реАрд▓ рдХреЛрдбрд╕рд╣ рдХрд╛рд░реНрдп рдХрд░рддреАрд▓ рдпрд╛рдЪреА рд╣рдореА рдирд╛рд╣реА. рдпреЗрдереЗ рджрд┐рд▓реЗрд▓рд╛ рдХреЛрдб рдпрд╛ рд▓рд╛рдпрдмреНрд░рд░реАрдВрдЪреНрдпрд╛ рдпрд╛ рдЖрд╡реГрддреНрддреАрд╕рд╣ рдЪрд╛рдЪрдгреА рдХреЗрд▓реА рдЖрд╣реЗ.

    рд▓рд╛рдпрдмреНрд░рд░реА рдЬреЛрдбрдгреНрдпрд╛рд╕рд╛рдареА рддреБрдореНрд╣рд╛рд▓рд╛ рдПрд╡рдвреЗрдЪ рдХрд░рд╛рд╡реЗ рд▓рд╛рдЧреЗрд▓. рдкреБрдврдЪреНрдпрд╛ рд╡реЗрд│реА PlatformIO рдкреНрд░рдХрд▓реНрдк рддрдпрд╛рд░ рдХрд░реЗрд▓, рддреЗрд╡реНрд╣рд╛ рдпрд╛ рд▓рд╛рдпрдмреНрд░рд░реАрдВрд╕рд╛рдареА рд╕реЛрд░реНрд╕ рдХреЛрдб рдбрд╛рдЙрдирд▓реЛрдб рд╣реЛрдИрд▓ рдЖрдгрд┐ рддреБрдордЪреНрдпрд╛ рдкреНрд░рдХрд▓реНрдкрд╛рдд рд╕рдВрдХрд▓рд┐рдд рд╣реЛрдИрд▓.

1. `lib_deps` рдордзреНрдпреЗ рдЦрд╛рд▓реАрд▓ рдХреЛрдб рдЬреЛрдбрд╛:

    ```ini
    knolleary/PubSubClient @ 2.8
    ```

    рд╣реЗ [PubSubClient](https://github.com/knolleary/pubsubclient), рдПрдХ Arduino MQTT рдХреНрд▓рд╛рдпрдВрдЯ рдЖрдпрд╛рдд рдХрд░рддреЗ.

## WiFi рд╢реА рдХрдиреЗрдХреНрдЯ рдХрд░рд╛

рдЖрддрд╛ Wio Terminal рд▓рд╛ WiFi рд╢реА рдХрдиреЗрдХреНрдЯ рдХрд░рддрд╛ рдпреЗрдИрд▓.

### рдХрд╛рд░реНрдп - WiFi рд╢реА рдХрдиреЗрдХреНрдЯ рдХрд░рд╛

Wio Terminal рд▓рд╛ WiFi рд╢реА рдХрдиреЗрдХреНрдЯ рдХрд░рд╛.

1. `src` рдлреЛрд▓реНрдбрд░рдордзреНрдпреЗ `config.h` рдирд╛рд╡рд╛рдЪреА рдирд╡реАрди рдлрд╛рдЗрд▓ рддрдпрд╛рд░ рдХрд░рд╛. рддреБрдореНрд╣реА рд╣реЗ `src` рдлреЛрд▓реНрдбрд░ рдирд┐рд╡рдбреВрди рдХрд┐рдВрд╡рд╛ рддреНрдпрд╛рддреАрд▓ `main.cpp` рдлрд╛рдЗрд▓ рдирд┐рд╡рдбреВрди, рдЖрдгрд┐ рдПрдХреНрд╕рдкреНрд▓реЛрд░рд░рдордзреАрд▓ **рдирд╡реАрди рдлрд╛рдЗрд▓** рдмрдЯрдг рдирд┐рд╡рдбреВрди рдХрд░реВ рд╢рдХрддрд╛. рд╣реЗ рдмрдЯрдг рдлрдХреНрдд рддреЗрд╡реНрд╣рд╛ рджрд┐рд╕рддреЗ рдЬреЗрд╡реНрд╣рд╛ рддреБрдордЪрд╛ рдХрд░реНрд╕рд░ рдПрдХреНрд╕рдкреНрд▓реЛрд░рд░рд╡рд░ рдЕрд╕рддреЛ.

    ![рдирд╡реАрди рдлрд╛рдЗрд▓ рдмрдЯрдг](../../../../../translated_images/vscode-new-file-button.182702340fe6723c8cbb4cfa1a9a9fb0d0a5227643b4e46b91ff67b07a39a92f.mr.png)

1. рддреБрдордЪреНрдпрд╛ WiFi рдХреНрд░реЗрдбреЗрдиреНрд╢рд┐рдпрд▓реНрд╕рд╕рд╛рдареА рдХреЙрдиреНрд╕реНрдЯрдВрдЯреНрд╕ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдпрд╛ рдлрд╛рдЗрд▓рдордзреНрдпреЗ рдЦрд╛рд▓реАрд▓ рдХреЛрдб рдЬреЛрдбрд╛:

    ```cpp
    #pragma once

    #include <string>
    
    using namespace std;
    
    // WiFi credentials
    const char *SSID = "<SSID>";
    const char *PASSWORD = "<PASSWORD>";
    ```

    `<SSID>` рдЪреНрдпрд╛ рдЬрд╛рдЧреА рддреБрдордЪреНрдпрд╛ WiFi рдЪреЗ SSID рдЯрд╛рдХрд╛. `<PASSWORD>` рдЪреНрдпрд╛ рдЬрд╛рдЧреА рддреБрдордЪрд╛ WiFi рдкрд╛рд╕рд╡рд░реНрдб рдЯрд╛рдХрд╛.

1. `main.cpp` рдлрд╛рдЗрд▓ рдЙрдШрдбрд╛.

1. рдлрд╛рдЗрд▓рдЪреНрдпрд╛ рд╢реАрд░реНрд╖рд╕реНрдерд╛рдиреА рдЦрд╛рд▓реАрд▓ `#include` рдирд┐рд░реНрджреЗрд╢ рдЬреЛрдбрд╛:

    ```cpp
    #include <PubSubClient.h>
    #include <rpcWiFi.h>
    #include <SPI.h>
    
    #include "config.h"
    ```

    рд╣реЗ рддреБрдореНрд╣реА рдЖрдзреА рдЬреЛрдбрд▓реЗрд▓реНрдпрд╛ рд▓рд╛рдпрдмреНрд░рд░реАрдВрд╕рд╛рдареА рд╣реЗрдбрд░ рдлрд╛рдЗрд▓реНрд╕ рд╕рдорд╛рд╡рд┐рд╖реНрдЯ рдХрд░рддреЗ, рддрд╕реЗрдЪ config рд╣реЗрдбрд░ рдлрд╛рдЗрд▓ рджреЗрдЦреАрд▓. рдпрд╛ рд╣реЗрдбрд░ рдлрд╛рдЗрд▓реНрд╕ рдЖрд╡рд╢реНрдпрдХ рдЖрд╣реЗрдд рдЬреЗрдгреЗрдХрд░реВрди PlatformIO рд▓рд╛рдпрдмреНрд░рд░реАрдордзреАрд▓ рдХреЛрдб рдЖрдгреЗрд▓. рд╣реЗрдбрд░ рдлрд╛рдЗрд▓реНрд╕ рд╕реНрдкрд╖реНрдЯрдкрдгреЗ рд╕рдорд╛рд╡рд┐рд╖реНрдЯ рдХреЗрд▓реНрдпрд╛ рдирд╛рд╣реАрдд рддрд░ рдХрд╛рд╣реА рдХреЛрдб рд╕рдВрдХрд▓рд┐рдд рд╣реЛрдгрд╛рд░ рдирд╛рд╣реА рдЖрдгрд┐ рддреБрдореНрд╣рд╛рд▓рд╛ рдХрдВрдкрд╛рдЗрд▓рд░ рддреНрд░реБрдЯреА рдорд┐рд│рддреАрд▓.

1. `setup` рдлрдВрдХреНрд╢рдирдЪреНрдпрд╛ рд╡рд░ рдЦрд╛рд▓реАрд▓ рдХреЛрдб рдЬреЛрдбрд╛:

    ```cpp
    void connectWiFi()
    {
        while (WiFi.status() != WL_CONNECTED)
        {
            Serial.println("Connecting to WiFi..");
            WiFi.begin(SSID, PASSWORD);
            delay(500);
        }
    
        Serial.println("Connected!");
    }
    ```

    рд╣рд╛ рдХреЛрдб рдбрд┐рд╡реНрд╣рд╛рдЗрд╕ WiFi рд╢реА рдХрдиреЗрдХреНрдЯ рд╣реЛрдИрдкрд░реНрдпрдВрдд рд▓реВрдк рдХрд░рддреЛ рдЖрдгрд┐ config рд╣реЗрдбрд░ рдлрд╛рдЗрд▓рдордзреАрд▓ SSID рдЖрдгрд┐ рдкрд╛рд╕рд╡рд░реНрдб рд╡рд╛рдкрд░реВрди рдХрдиреЗрдХреНрдЯ рдХрд░рдгреНрдпрд╛рдЪрд╛ рдкреНрд░рдпрддреНрди рдХрд░рддреЛ.

1. рдкрд┐рдиреНрд╕ рдХреЙрдиреНрдлрд┐рдЧрд░ рдХреЗрд▓реНрдпрд╛рдирдВрддрд░ `setup` рдлрдВрдХреНрд╢рдирдЪреНрдпрд╛ рддрд│рд╛рд╢реА рдпрд╛ рдлрдВрдХреНрд╢рдирд▓рд╛ рдХреЙрд▓ рдЬреЛрдбрд╛.

    ```cpp
    connectWiFi();
    ```

1. WiFi рдХрдиреЗрдХреНрд╢рди рдХрд╛рд░реНрдпрд░рдд рдЖрд╣реЗ рдХрд╛ рддреЗ рддрдкрд╛рд╕рдгреНрдпрд╛рд╕рд╛рдареА рд╣рд╛ рдХреЛрдб рддреБрдордЪреНрдпрд╛ рдбрд┐рд╡реНрд╣рд╛рдЗрд╕рд╡рд░ рдЕрдкрд▓реЛрдб рдХрд░рд╛. рддреБрдореНрд╣рд╛рд▓рд╛ рд╕реАрд░рд┐рдпрд▓ рдореЙрдирд┐рдЯрд░рдордзреНрдпреЗ рд╣реЗ рджрд┐рд╕реЗрд▓.

    ```output
    > Executing task: platformio device monitor <
    
    --- Available filters and text transformations: colorize, debug, default, direct, hexlify, log2file, nocontrol, printable, send_on_enter, time
    --- More details at http://bit.ly/pio-monitor-filters
    --- Miniterm on /dev/cu.usbmodem1101  9600,8,N,1 ---
    --- Quit: Ctrl+C | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H ---
    Connecting to WiFi..
    Connected!
    ```

## MQTT рд╢реА рдХрдиреЗрдХреНрдЯ рдХрд░рд╛

Wio Terminal WiFi рд╢реА рдХрдиреЗрдХреНрдЯ рдЭрд╛рд▓реНрдпрд╛рдирдВрддрд░, рддреЛ MQTT рдмреНрд░реЛрдХрд░рд╕рд╣ рдХрдиреЗрдХреНрдЯ рд╣реЛрдК рд╢рдХрддреЛ.

### рдХрд╛рд░реНрдп - MQTT рд╢реА рдХрдиреЗрдХреНрдЯ рдХрд░рд╛

MQTT рдмреНрд░реЛрдХрд░рд╕рд╣ рдХрдиреЗрдХреНрдЯ рдХрд░рд╛.

1. MQTT рдмреНрд░реЛрдХрд░рд╕рд╛рдареА рдХрдиреЗрдХреНрд╢рди рддрдкрд╢реАрд▓ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА `config.h` рдлрд╛рдЗрд▓рдЪреНрдпрд╛ рддрд│рд╛рд╢реА рдЦрд╛рд▓реАрд▓ рдХреЛрдб рдЬреЛрдбрд╛:

    ```cpp
    // MQTT settings
    const string ID = "<ID>";
    
    const string BROKER = "test.mosquitto.org";
    const string CLIENT_NAME = ID + "nightlight_client";
    ```

    `<ID>` рдЪреНрдпрд╛ рдЬрд╛рдЧреА рдПрдХ рдЕрджреНрд╡рд┐рддреАрдп ID рдЯрд╛рдХрд╛, рдЬреЗ рдпрд╛ рдбрд┐рд╡реНрд╣рд╛рдЗрд╕ рдХреНрд▓рд╛рдпрдВрдЯрдЪреЗ рдирд╛рд╡ рдореНрд╣рдгреВрди рд╡рд╛рдкрд░рд▓реЗ рдЬрд╛рдИрд▓, рдЖрдгрд┐ рдирдВрддрд░ рдпрд╛ рдбрд┐рд╡реНрд╣рд╛рдЗрд╕рдиреЗ рдкреНрд░рдХрд╛рд╢рд┐рдд рдЖрдгрд┐ рд╕рджрд╕реНрдпрддрд╛ рдШреЗрддрд▓реЗрд▓реНрдпрд╛ рд╡рд┐рд╖рдпрд╛рдВрд╕рд╛рдареА рд╡рд╛рдкрд░рд▓реЗ рдЬрд╛рдИрд▓. *test.mosquitto.org* рдмреНрд░реЛрдХрд░ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдЖрд╣реЗ рдЖрдгрд┐ рдЕрдиреЗрдХ рд▓реЛрдХ, рдпрд╛рд╕рд╣ рдЗрддрд░ рд╡рд┐рджреНрдпрд╛рд░реНрдереА, рдпрд╛ рдЕрд╕рд╛рдЗрдирдореЗрдВрдЯрджреНрд╡рд╛рд░реЗ рд╡рд╛рдкрд░рддрд╛рдд. рдПрдХ рдЕрджреНрд╡рд┐рддреАрдп MQTT рдХреНрд▓рд╛рдпрдВрдЯ рдирд╛рд╡ рдЖрдгрд┐ рд╡рд┐рд╖рдпрд╛рдВрдЪреА рдирд╛рд╡реЗ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рддрд╛рдд рдХреА рддреБрдордЪрд╛ рдХреЛрдб рдЗрддрд░ рдХреЛрдгрд╛рдЪреНрдпрд╛рд╣реА рдХреЛрдбрд╢реА рдЯрдХрд░рд╛рд╡ рд╣реЛрдгрд╛рд░ рдирд╛рд╣реА. рддреБрдореНрд╣рд╛рд▓рд╛ рд╣реЗ ID рдирдВрддрд░ рдпрд╛ рдЕрд╕рд╛рдЗрдирдореЗрдВрдЯрдордзреНрдпреЗ рд╕рд░реНрд╡реНрд╣рд░ рдХреЛрдб рддрдпрд╛рд░ рдХрд░рддрд╛рдирд╛ рджреЗрдЦреАрд▓ рдЖрд╡рд╢реНрдпрдХ рдЕрд╕реЗрд▓.

    > ЁЯТБ рддреБрдореНрд╣реА [GUIDGen](https://www.guidgen.com) рд╕рд╛рд░рдЦреНрдпрд╛ рд╡реЗрдмрд╕рд╛рдЗрдЯрдЪрд╛ рд╡рд╛рдкрд░ рдХрд░реВрди рдПрдХ рдЕрджреНрд╡рд┐рддреАрдп ID рддрдпрд╛рд░ рдХрд░реВ рд╢рдХрддрд╛.

    `BROKER` рд╣рд╛ MQTT рдмреНрд░реЛрдХрд░рдЪрд╛ URL рдЖрд╣реЗ.

    `CLIENT_NAME` рд╣рд╛ рдмреНрд░реЛрдХрд░рд╡рд░реАрд▓ рдпрд╛ MQTT рдХреНрд▓рд╛рдпрдВрдЯрд╕рд╛рдареА рдПрдХ рдЕрджреНрд╡рд┐рддреАрдп рдирд╛рд╡ рдЖрд╣реЗ.

1. `main.cpp` рдлрд╛рдЗрд▓ рдЙрдШрдбрд╛, рдЖрдгрд┐ `connectWiFi` рдлрдВрдХреНрд╢рдирдЪреНрдпрд╛ рдЦрд╛рд▓реА рдЖрдгрд┐ `setup` рдлрдВрдХреНрд╢рдирдЪреНрдпрд╛ рд╡рд░ рдЦрд╛рд▓реАрд▓ рдХреЛрдб рдЬреЛрдбрд╛:

    ```cpp
    WiFiClient wioClient;
    PubSubClient client(wioClient);
    ```

    рд╣рд╛ рдХреЛрдб Wio Terminal WiFi рд▓рд╛рдпрдмреНрд░рд░реА рд╡рд╛рдкрд░реВрди WiFi рдХреНрд▓рд╛рдпрдВрдЯ рддрдпрд╛рд░ рдХрд░рддреЛ рдЖрдгрд┐ рддреНрдпрд╛рдЪрд╛ рд╡рд╛рдкрд░ рдХрд░реВрди MQTT рдХреНрд▓рд╛рдпрдВрдЯ рддрдпрд╛рд░ рдХрд░рддреЛ.

1. рдпрд╛ рдХреЛрдбрдЪреНрдпрд╛ рдЦрд╛рд▓реА рдЦрд╛рд▓реАрд▓ рдХреЛрдб рдЬреЛрдбрд╛:

    ```cpp
    void reconnectMQTTClient()
    {
        while (!client.connected())
        {
            Serial.print("Attempting MQTT connection...");
    
            if (client.connect(CLIENT_NAME.c_str()))
            {
                Serial.println("connected");
            }
            else
            {
                Serial.print("Retying in 5 seconds - failed, rc=");
                Serial.println(client.state());
                
                delay(5000);
            }
        }
    }
    ```

    рд╣рд╛ рдлрдВрдХреНрд╢рди MQTT рдмреНрд░реЛрдХрд░рд╕рд╣ рдХрдиреЗрдХреНрд╢рди рддрдкрд╛рд╕рддреЛ рдЖрдгрд┐ рдХрдиреЗрдХреНрдЯ рдирд╕реЗрд▓ рддрд░ рдкреБрдиреНрд╣рд╛ рдХрдиреЗрдХреНрдЯ рдХрд░рддреЛ. рддреЛ рд▓реВрдк рдХрд░рддреЛ рдЖрдгрд┐ рдХрдиреЗрдХреНрдЯ рд╣реЛрдИрдкрд░реНрдпрдВрдд рдкреНрд░рдпрддреНрди рдХрд░рддреЛ, рдЖрдгрд┐ config рд╣реЗрдбрд░ рдлрд╛рдЗрд▓рдордзреНрдпреЗ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХреЗрд▓реЗрд▓реНрдпрд╛ рдЕрджреНрд╡рд┐рддреАрдп рдХреНрд▓рд╛рдпрдВрдЯ рдирд╛рд╡рд╛рдЪрд╛ рд╡рд╛рдкрд░ рдХрд░рддреЛ.

    рдЬрд░ рдХрдиреЗрдХреНрд╢рди рдЕрдпрд╢рд╕реНрд╡реА рдЭрд╛рд▓реЗ, рддрд░ 5 рд╕реЗрдХрдВрджрд╛рдВрдирдВрддрд░ рдкреБрдиреНрд╣рд╛ рдкреНрд░рдпрддреНрди рдХрд░рддреЛ.

1. `reconnectMQTTClient` рдлрдВрдХреНрд╢рдирдЪреНрдпрд╛ рдЦрд╛рд▓реА рдЦрд╛рд▓реАрд▓ рдХреЛрдб рдЬреЛрдбрд╛:

    ```cpp
    void createMQTTClient()
    {
        client.setServer(BROKER.c_str(), 1883);
        reconnectMQTTClient();
    }
    ```

    рд╣рд╛ рдХреЛрдб рдХреНрд▓рд╛рдпрдВрдЯрд╕рд╛рдареА MQTT рдмреНрд░реЛрдХрд░ рд╕реЗрдЯ рдХрд░рддреЛ, рддрд╕реЗрдЪ рд╕рдВрджреЗрд╢ рдкреНрд░рд╛рдкреНрдд рдЭрд╛рд▓реНрдпрд╛рд╡рд░ рдХреЙрд▓рдмреЕрдХ рд╕реЗрдЯ рдХрд░рддреЛ. рдирдВрддрд░ рддреЛ рдмреНрд░реЛрдХрд░рд╕рд╣ рдХрдиреЗрдХреНрдЯ рдХрд░рдгреНрдпрд╛рдЪрд╛ рдкреНрд░рдпрддреНрди рдХрд░рддреЛ.

1. WiFi рдХрдиреЗрдХреНрдЯ рдЭрд╛рд▓реНрдпрд╛рдирдВрддрд░ `setup` рдлрдВрдХреНрд╢рдирдордзреНрдпреЗ `createMQTTClient` рдлрдВрдХреНрд╢рдирд▓рд╛ рдХреЙрд▓ рдХрд░рд╛.

1. `loop` рдлрдВрдХреНрд╢рди рдкреВрд░реНрдгрдкрдгреЗ рдЦрд╛рд▓реАрд▓ рдХреЛрдбрдиреЗ рдмрджрд▓рд╛:

    ```cpp
    void loop()
    {
        reconnectMQTTClient();
        client.loop();
    
        delay(2000);
    }
    ```

    рд╣рд╛ рдХреЛрдб MQTT рдмреНрд░реЛрдХрд░рд╕рд╣ рдкреБрдиреНрд╣рд╛ рдХрдиреЗрдХреНрдЯ рдХрд░рддреЛ. рд╣реА рдХрдиреЗрдХреНрд╢рдиреНрд╕ рд╕рд╣рдЬ рддреБрдЯреВ рд╢рдХрддрд╛рдд, рддреНрдпрд╛рдореБрд│реЗ рдирд┐рдпрдорд┐рддрдкрдгреЗ рддрдкрд╛рд╕рдгреЗ рдЖрдгрд┐ рдЖрд╡рд╢реНрдпрдХ рдЕрд╕рд▓реНрдпрд╛рд╕ рдкреБрдиреНрд╣рд╛ рдХрдиреЗрдХреНрдЯ рдХрд░рдгреЗ рдлрд╛рдпрджреЗрд╢реАрд░ рдард░рддреЗ. рдирдВрддрд░ рддреЛ MQTT рдХреНрд▓рд╛рдпрдВрдЯрд╡рд░реАрд▓ `loop` рдкрджреНрдзрддреАрд▓рд╛ рдХреЙрд▓ рдХрд░рддреЛ, рдЬреЗ рд╕рджрд╕реНрдпрддрд╛ рдШреЗрддрд▓реЗрд▓реНрдпрд╛ рд╡рд┐рд╖рдпрд╛рд╡рд░ рдпреЗрдгрд╛рд░реЗ рдХреЛрдгрддреЗрд╣реА рд╕рдВрджреЗрд╢ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХрд░рддреЗ. рд╣реЗ рдЕреЕрдк рд╕рд┐рдВрдЧрд▓-рдереНрд░реЗрдбреЗрдб рдЖрд╣реЗ, рддреНрдпрд╛рдореБрд│реЗ рд╕рдВрджреЗрд╢ рдмреЕрдХрдЧреНрд░рд╛рдЙрдВрдб рдереНрд░реЗрдбрд╡рд░ рдкреНрд░рд╛рдкреНрдд рд╣реЛрдК рд╢рдХрдд рдирд╛рд╣реАрдд, рдореНрд╣рдгреВрди рдореБрдЦреНрдп рдереНрд░реЗрдбрд╡рд░ рдиреЗрдЯрд╡рд░реНрдХ рдХрдиреЗрдХреНрд╢рдирд╡рд░реАрд▓ рдкреНрд░рддреАрдХреНрд╖реЗрдд рдЕрд╕рд▓реЗрд▓реНрдпрд╛ рд╕рдВрджреЗрд╢рд╛рдВрдЪреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рд╡реЗрд│ рджрд┐рд▓рд╛ рдкрд╛рд╣рд┐рдЬреЗ.

    рд╢реЗрд╡рдЯреА, 2 рд╕реЗрдХрдВрджрд╛рдВрдЪрд╛ рд╡рд┐рд▓рдВрдм рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рддреЛ рдХреА рдкреНрд░рдХрд╛рд╢ рдкрд╛рддрд│реА рдЦреВрдк рд╡рд╛рд░рдВрд╡рд╛рд░ рдкрд╛рдард╡рд▓реА рдЬрд╛рдд рдирд╛рд╣реА рдЖрдгрд┐ рдбрд┐рд╡реНрд╣рд╛рдЗрд╕рдЪрд╛ рдКрд░реНрдЬрд╛ рд╡рд╛рдкрд░ рдХрдореА рд╣реЛрддреЛ.

1. рдХреЛрдб рддреБрдордЪреНрдпрд╛ Wio Terminal рд╡рд░ рдЕрдкрд▓реЛрдб рдХрд░рд╛, рдЖрдгрд┐ рдбрд┐рд╡реНрд╣рд╛рдЗрд╕ WiFi рдЖрдгрд┐ MQTT рд╢реА рдХрдиреЗрдХреНрдЯ рд╣реЛрдд рдЕрд╕рд▓реНрдпрд╛рдЪреЗ рдкрд╛рд╣рдгреНрдпрд╛рд╕рд╛рдареА рд╕реАрд░рд┐рдпрд▓ рдореЙрдирд┐рдЯрд░ рд╡рд╛рдкрд░рд╛.

    ```output
    > Executing task: platformio device monitor <
    
    source /Users/jimbennett/GitHub/IoT-For-Beginners/1-getting-started/lessons/4-connect-internet/code-mqtt/wio-terminal/nightlight/.venv/bin/activate
    --- Available filters and text transformations: colorize, debug, default, direct, hexlify, log2file, nocontrol, printable, send_on_enter, time
    --- More details at http://bit.ly/pio-monitor-filters
    --- Miniterm on /dev/cu.usbmodem1201  9600,8,N,1 ---
    --- Quit: Ctrl+C | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H ---
    Connecting to WiFi..
    Connected!
    Attempting MQTT connection...connected
    ```

> ЁЯТБ рддреБрдореНрд╣рд╛рд▓рд╛ рд╣рд╛ рдХреЛрдб [code-mqtt/wio-terminal](../../../../../1-getting-started/lessons/4-connect-internet/code-mqtt/wio-terminal) рдлреЛрд▓реНрдбрд░рдордзреНрдпреЗ рд╕рд╛рдкрдбреЗрд▓.

ЁЯША рддреБрдореНрд╣реА рддреБрдордЪреЗ рдбрд┐рд╡реНрд╣рд╛рдЗрд╕ рдпрд╢рд╕реНрд╡реАрд░рд┐рддреНрдпрд╛ MQTT рдмреНрд░реЛрдХрд░рд╕рд╣ рдХрдиреЗрдХреНрдЯ рдХреЗрд▓реЗ рдЖрд╣реЗ.

---

**рдЕрд╕реНрд╡реАрдХрд░рдг**:  
рд╣рд╛ рджрд╕реНрддрдРрд╡рдЬ AI рднрд╛рд╖рд╛рдВрддрд░ рд╕реЗрд╡рд╛ [Co-op Translator](https://github.com/Azure/co-op-translator) рд╡рд╛рдкрд░реВрди рднрд╛рд╖рд╛рдВрддрд░рд┐рдд рдХрд░рдгреНрдпрд╛рдд рдЖрд▓рд╛ рдЖрд╣реЗ. рдЖрдореНрд╣реА рдЕрдЪреВрдХрддреЗрд╕рд╛рдареА рдкреНрд░рдпрддреНрдирд╢реАрд▓ рдЕрд╕рд▓реЛ рддрд░реА, рдХреГрдкрдпрд╛ рд▓рдХреНрд╖рд╛рдд рдареЗрд╡рд╛ рдХреА рд╕реНрд╡рдпрдВрдЪрд▓рд┐рдд рднрд╛рд╖рд╛рдВрддрд░рд╛рдВрдордзреНрдпреЗ рддреНрд░реБрдЯреА рдХрд┐рдВрд╡рд╛ рдЕрдЪреВрдХрддреЗрдЪрд╛ рдЕрднрд╛рд╡ рдЕрд╕реВ рд╢рдХрддреЛ. рдореВрд│ рднрд╛рд╖реЗрддреАрд▓ рджрд╕реНрддрдРрд╡рдЬ рд╣рд╛ рдЕрдзрд┐рдХреГрдд рд╕реНрд░реЛрдд рдорд╛рдирд▓рд╛ рдЬрд╛рд╡рд╛. рдорд╣рддреНрддреНрд╡рд╛рдЪреНрдпрд╛ рдорд╛рд╣рд┐рддреАрд╕рд╛рдареА рд╡реНрдпрд╛рд╡рд╕рд╛рдпрд┐рдХ рдорд╛рдирд╡реА рднрд╛рд╖рд╛рдВрддрд░рд╛рдЪреА рд╢рд┐рдлрд╛рд░рд╕ рдХреЗрд▓реА рдЬрд╛рддреЗ. рдпрд╛ рднрд╛рд╖рд╛рдВрддрд░рд╛рдЪрд╛ рд╡рд╛рдкрд░ рдХрд░реВрди рдЙрджреНрднрд╡рд▓реЗрд▓реНрдпрд╛ рдХреЛрдгрддреНрдпрд╛рд╣реА рдЧреИрд░рд╕рдордЬ рдХрд┐рдВрд╡рд╛ рдЪреБрдХреАрдЪреНрдпрд╛ рдЕрд░реНрдерд╛рд╕рд╛рдареА рдЖрдореНрд╣реА рдЬрдмрд╛рдмрджрд╛рд░ рд░рд╛рд╣рдгрд╛рд░ рдирд╛рд╣реА.