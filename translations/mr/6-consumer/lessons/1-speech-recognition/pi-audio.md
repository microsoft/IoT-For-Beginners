<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "0ac0afcfb40cb5970ef4cb74f01c32e9",
  "translation_date": "2025-08-27T14:01:09+00:00",
  "source_file": "6-consumer/lessons/1-speech-recognition/pi-audio.md",
  "language_code": "mr"
}
-->
# рдСрдбрд┐рдУ рдХреЕрдкреНрдЪрд░ рдХрд░рд╛ - рд░рд╛рд╕реНрдкрдмреЗрд░реА рдкрд╛рдп

рдпрд╛ рдзрдбреНрдпрд╛рдЪреНрдпрд╛ рднрд╛рдЧрд╛рдд, рддреБрдореНрд╣реА рд░рд╛рд╕реНрдкрдмреЗрд░реА рдкрд╛рдпрд╡рд░ рдСрдбрд┐рдУ рдХреЕрдкреНрдЪрд░ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдХреЛрдб рд▓рд┐рд╣рд╛рд▓. рдСрдбрд┐рдУ рдХреЕрдкреНрдЪрд░ рдПрдХрд╛ рдмрдЯрдгрд╛рджреНрд╡рд╛рд░реЗ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХреЗрд▓реЗ рдЬрд╛рдИрд▓.

## рд╣рд╛рд░реНрдбрд╡реЗрдЕрд░

рд░рд╛рд╕реНрдкрдмреЗрд░реА рдкрд╛рдпрд▓рд╛ рдСрдбрд┐рдУ рдХреЕрдкреНрдЪрд░ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдмрдЯрдгрд╛рдЪреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдЖрд╣реЗ.

рддреБрдореНрд╣реА рд╡рд╛рдкрд░рдгрд╛рд░реЗ рдмрдЯрдг рд╣реЗ рдЧреНрд░реЛрд╡реНрд╣ рдмрдЯрдг рдЖрд╣реЗ. рд╣реЗ рдПрдХ рдбрд┐рдЬрд┐рдЯрд▓ рд╕реЗрдиреНрд╕рд░ рдЖрд╣реЗ рдЬреЛ рд╕рд┐рдЧреНрдирд▓ рдЪрд╛рд▓реВ рдХрд┐рдВрд╡рд╛ рдмрдВрдж рдХрд░рддреЛ. рд╣реЗ рдмрдЯрдгреЗ рдХреЙрдиреНрдлрд┐рдЧрд░ рдХреЗрд▓реА рдЬрд╛рдК рд╢рдХрддрд╛рдд рдЬреЗрдгреЗрдХрд░реВрди рдмрдЯрдг рджрд╛рдмрд▓реНрдпрд╛рд╡рд░ рдЙрдЪреНрдЪ рд╕рд┐рдЧреНрдирд▓ рдкрд╛рдард╡рддрд╛рдд рдЖрдгрд┐ рди рджрд╛рдмрд▓реНрдпрд╛рд╡рд░ рдХрдореА рд╕рд┐рдЧреНрдирд▓ рдкрд╛рдард╡рддрд╛рдд, рдХрд┐рдВрд╡рд╛ рджрд╛рдмрд▓реНрдпрд╛рд╡рд░ рдХрдореА рдЖрдгрд┐ рди рджрд╛рдмрд▓реНрдпрд╛рд╡рд░ рдЙрдЪреНрдЪ рд╕рд┐рдЧреНрдирд▓ рдкрд╛рдард╡рддрд╛рдд.

рдЬрд░ рддреБрдореНрд╣реА рдорд╛рдпрдХреНрд░реЛрдлреЛрди рдореНрд╣рдгреВрди ReSpeaker 2-Mics Pi HAT рд╡рд╛рдкрд░рдд рдЕрд╕рд╛рд▓, рддрд░ рдмрдЯрдг рдЬреЛрдбрдгреНрдпрд╛рдЪреА рдЧрд░рдЬ рдирд╛рд╣реА рдХрд╛рд░рдг рдпрд╛ HAT рдордзреНрдпреЗ рдЖрдзреАрдЪ рдПрдХ рдмрдЯрдг рдмрд╕рд╡рд▓реЗрд▓реЗ рдЖрд╣реЗ. рдкреБрдвреАрд▓ рд╡рд┐рднрд╛рдЧрд╛рдХрдбреЗ рдЬрд╛.

### рдмрдЯрдг рдЬреЛрдбрд╛

рдмрдЯрдг рдЧреНрд░реЛрд╡реНрд╣ рдмреЗрд╕ рд╣реЕрдЯрд▓рд╛ рдЬреЛрдбрд▓реЗ рдЬрд╛рдК рд╢рдХрддреЗ.

#### рдХрд╛рд░реНрдп - рдмрдЯрдг рдЬреЛрдбрд╛

![рдЧреНрд░реЛрд╡реНрд╣ рдмрдЯрдг](../../../../../translated_images/grove-button.a70cfbb809a8563681003250cf5b06d68cdcc68624f9e2f493d5a534ae2da1e5.mr.png)

1. рдЧреНрд░реЛрд╡реНрд╣ рдХреЗрдмрд▓рдЪрд╛ рдПрдХ рдЯреЛрдХ рдмрдЯрдг рдореЙрдбреНрдпреВрд▓рд╡рд░реАрд▓ рд╕реЙрдХреЗрдЯрдордзреНрдпреЗ рдШрд╛рд▓рд╛. рд╣реЗ рдлрдХреНрдд рдПрдХрд╛ рджрд┐рд╢реЗрдиреЗ рдЬрд╛рдИрд▓.

1. рд░рд╛рд╕реНрдкрдмреЗрд░реА рдкрд╛рдп рдмрдВрдж рдЕрд╕рддрд╛рдирд╛, рдЧреНрд░реЛрд╡реНрд╣ рдХреЗрдмрд▓рдЪрд╛ рджреБрд╕рд░рд╛ рдЯреЛрдХ рдЧреНрд░реЛрд╡реНрд╣ рдмреЗрд╕ рд╣реЕрдЯрд╡рд░реАрд▓ **D5** рдореНрд╣рдгреВрди рдЪрд┐рдиреНрд╣рд╛рдВрдХрд┐рдд рдбрд┐рдЬрд┐рдЯрд▓ рд╕реЙрдХреЗрдЯрдордзреНрдпреЗ рдЬреЛрдбрд╛. рд╣реЗ рд╕реЙрдХреЗрдЯ GPIO рдкрд┐рдирдЪреНрдпрд╛ рд╢реЗрдЬрд╛рд░реА рдЕрд╕рд▓реЗрд▓реНрдпрд╛ рд╕реЙрдХреЗрдЯрдЪреНрдпрд╛ рд░рд╛рдВрдЧреЗрддреАрд▓ рдбрд╛рд╡реАрдХрдбреВрди рджреБрд╕рд░реЗ рдЖрд╣реЗ.

![рдЧреНрд░реЛрд╡реНрд╣ рдмрдЯрдг D5 рд╕реЙрдХреЗрдЯрд▓рд╛ рдЬреЛрдбрд▓реЗрд▓реЗ](../../../../../translated_images/pi-button.c7a1a4f55943341ce1baf1057658e9a205804d4131d258e820c93f951df0abf3.mr.png)

## рдСрдбрд┐рдУ рдХреЕрдкреНрдЪрд░ рдХрд░рд╛

рддреБрдореНрд╣реА рдорд╛рдпрдХреНрд░реЛрдлреЛрдирдордзреВрди рдСрдбрд┐рдУ Python рдХреЛрдб рд╡рд╛рдкрд░реВрди рдХреЕрдкреНрдЪрд░ рдХрд░реВ рд╢рдХрддрд╛.

### рдХрд╛рд░реНрдп - рдСрдбрд┐рдУ рдХреЕрдкреНрдЪрд░ рдХрд░рд╛

1. рдкрд╛рдп рдЪрд╛рд▓реВ рдХрд░рд╛ рдЖрдгрд┐ рдмреВрдЯ рд╣реЛрдИрдкрд░реНрдпрдВрдд рдерд╛рдВрдмрд╛.

1. VS Code рд╕реБрд░реВ рдХрд░рд╛, рдереЗрдЯ рдкрд╛рдпрд╡рд░ рдХрд┐рдВрд╡рд╛ Remote SSH рд╡рд┐рд╕реНрддрд╛рд░рд╛рджреНрд╡рд╛рд░реЗ рдХрдиреЗрдХреНрдЯ рдХрд░рд╛.

1. PyAudio Pip рдкреЕрдХреЗрдЬрдордзреНрдпреЗ рдСрдбрд┐рдУ рд░реЗрдХреЙрд░реНрдб рдЖрдгрд┐ рдкреНрд▓реЗрдмреЕрдХ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдлрдВрдХреНрд╢рдиреНрд╕ рдЖрд╣реЗрдд. рдпрд╛ рдкреЕрдХреЗрдЬрд▓рд╛ рдХрд╛рд╣реА рдСрдбрд┐рдУ рд▓рд╛рдпрдмреНрд░рд░реАрдВрдЪреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдЖрд╣реЗ рдЬреА рдЖрдзреА рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдгреЗ рдЖрд╡рд╢реНрдпрдХ рдЖрд╣реЗ. рдЯрд░реНрдорд┐рдирд▓рдордзреНрдпреЗ рдЦрд╛рд▓реАрд▓ рдХрдорд╛рдВрдб рдЪрд╛рд▓рд╡рд╛:

    ```sh
    sudo apt update
    sudo apt install libportaudio0 libportaudio2 libportaudiocpp0 portaudio19-dev libasound2-plugins --yes 
    ```

1. PyAudio Pip рдкреЕрдХреЗрдЬ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рд╛.

    ```sh
    pip3 install pyaudio
    ```

1. `smart-timer` рдирд╛рд╡рд╛рдЪрд╛ рдирд╡реАрди рдлреЛрд▓реНрдбрд░ рддрдпрд╛рд░ рдХрд░рд╛ рдЖрдгрд┐ рдпрд╛ рдлреЛрд▓реНрдбрд░рдордзреНрдпреЗ `app.py` рдирд╛рд╡рд╛рдЪреА рдлрд╛рдЗрд▓ рдЬреЛрдбрд╛.

1. рдпрд╛ рдлрд╛рдЗрд▓рдЪреНрдпрд╛ рд╢реАрд░реНрд╖рд╕реНрдерд╛рдиреА рдЦрд╛рд▓реАрд▓ рдЖрдпрд╛рдд рдЬреЛрдбрд╛:

    ```python
    import io
    import pyaudio
    import time
    import wave
    
    from grove.factory import Factory
    ```

    рд╣реЗ `pyaudio` рдореЙрдбреНрдпреВрд▓, рд╡реЗрд╡реНрд╣ рдлрд╛рдЗрд▓реНрд╕ рд╣рд╛рддрд╛рд│рдгреНрдпрд╛рд╕рд╛рдареА рдХрд╛рд╣реА рд╕реНрдЯрдБрдбрд░реНрдб Python рдореЙрдбреНрдпреВрд▓реНрд╕ рдЖрдгрд┐ `grove.factory` рдореЙрдбреНрдпреВрд▓ рдЖрдпрд╛рдд рдХрд░рддреЗ рдЬреЗ рдмрдЯрдг рд╡рд░реНрдЧ рддрдпрд╛рд░ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА `Factory` рдЖрдпрд╛рдд рдХрд░рддреЗ.

1. рдпрд╛рдЦрд╛рд▓реА, рдЧреНрд░реЛрд╡реНрд╣ рдмрдЯрдг рддрдпрд╛рд░ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдХреЛрдб рдЬреЛрдбрд╛.

    рдЬрд░ рддреБрдореНрд╣реА ReSpeaker 2-Mics Pi HAT рд╡рд╛рдкрд░рдд рдЕрд╕рд╛рд▓, рддрд░ рдЦрд╛рд▓реАрд▓ рдХреЛрдб рд╡рд╛рдкрд░рд╛:

    ```python
    # The button on the ReSpeaker 2-Mics Pi HAT
    button = Factory.getButton("GPIO-LOW", 17)
    ```

    рд╣реЗ **D17** рдкреЛрд░реНрдЯрд╡рд░ рдмрдЯрдг рддрдпрд╛рд░ рдХрд░рддреЗ, рдЬреЛ ReSpeaker 2-Mics Pi HAT рд╡рд░ рдмрдЯрдг рдЬреЛрдбрд▓реЗрд▓рд╛ рдкреЛрд░реНрдЯ рдЖрд╣реЗ. рд╣реЗ рдмрдЯрдг рджрд╛рдмрд▓реНрдпрд╛рд╡рд░ рдХрдореА рд╕рд┐рдЧреНрдирд▓ рдкрд╛рдард╡рдгреНрдпрд╛рд╕рд╛рдареА рд╕реЗрдЯ рдХреЗрд▓реЗ рдЖрд╣реЗ.

    рдЬрд░ рддреБрдореНрд╣реА ReSpeaker 2-Mics Pi HAT рд╡рд╛рдкрд░рдд рдирд╕рд╛рд▓ рдЖрдгрд┐ рдЧреНрд░реЛрд╡реНрд╣ рдмрдЯрдг рдмреЗрд╕ рд╣реЕрдЯрд▓рд╛ рдЬреЛрдбрд▓реЗ рдЕрд╕реЗрд▓, рддрд░ рд╣рд╛ рдХреЛрдб рд╡рд╛рдкрд░рд╛.

    ```python
    button = Factory.getButton("GPIO-HIGH", 5)
    ```

    рд╣реЗ **D5** рдкреЛрд░реНрдЯрд╡рд░ рдмрдЯрдг рддрдпрд╛рд░ рдХрд░рддреЗ рдЬреЗ рджрд╛рдмрд▓реНрдпрд╛рд╡рд░ рдЙрдЪреНрдЪ рд╕рд┐рдЧреНрдирд▓ рдкрд╛рдард╡рдгреНрдпрд╛рд╕рд╛рдареА рд╕реЗрдЯ рдХреЗрд▓реЗ рдЖрд╣реЗ.

1. рдпрд╛рдЦрд╛рд▓реА, рдСрдбрд┐рдУ рд╣рд╛рддрд╛рд│рдгреНрдпрд╛рд╕рд╛рдареА PyAudio рд╡рд░реНрдЧрд╛рдЪреА рдПрдХ рдЙрджрд╛рд╣рд░рдг рддрдпрд╛рд░ рдХрд░рд╛:

    ```python
    audio = pyaudio.PyAudio()
    ```

1. рдорд╛рдпрдХреНрд░реЛрдлреЛрди рдЖрдгрд┐ рд╕реНрдкреАрдХрд░рд╕рд╛рдареА рд╣рд╛рд░реНрдбрд╡реЗрдЕрд░ рдХрд╛рд░реНрдб рдХреНрд░рдорд╛рдВрдХ рдШреЛрд╖рд┐рдд рдХрд░рд╛. рд╣рд╛ рдХреНрд░рдорд╛рдВрдХ рддреБрдореНрд╣реА рдпрд╛ рдзрдбреНрдпрд╛рдЪреНрдпрд╛ рдЖрдзреА `arecord -l` рдЖрдгрд┐ `aplay -l` рдЪрд╛рд▓рд╡реВрди рд╢реЛрдзрд▓рд╛ рдЕрд╕реЗрд▓.

    ```python
    microphone_card_number = <microphone card number>
    speaker_card_number = <speaker card number>
    ```

    `<microphone card number>` рдЪреНрдпрд╛ рдЬрд╛рдЧреА рддреБрдордЪреНрдпрд╛ рдорд╛рдпрдХреНрд░реЛрдлреЛрди рдХрд╛рд░реНрдбрдЪрд╛ рдХреНрд░рдорд╛рдВрдХ рдареЗрд╡рд╛.

    `<speaker card number>` рдЪреНрдпрд╛ рдЬрд╛рдЧреА рддреБрдордЪреНрдпрд╛ рд╕реНрдкреАрдХрд░ рдХрд╛рд░реНрдбрдЪрд╛ рдХреНрд░рдорд╛рдВрдХ рдареЗрд╡рд╛, рдЬреЛ рддреБрдореНрд╣реА `alsa.conf` рдлрд╛рдЗрд▓рдордзреНрдпреЗ рд╕реЗрдЯ рдХреЗрд▓рд╛ рд╣реЛрддрд╛.

1. рдпрд╛рдЦрд╛рд▓реА, рдСрдбрд┐рдУ рдХреЕрдкреНрдЪрд░ рдЖрдгрд┐ рдкреНрд▓реЗрдмреЕрдХрд╕рд╛рдареА рд╡рд╛рдкрд░рдгреНрдпрд╛рд╕рд╛рдареА рдирдореБрдирд╛ рджрд░ рдШреЛрд╖рд┐рдд рдХрд░рд╛. рддреБрдореНрд╣реА рд╡рд╛рдкрд░рдд рдЕрд╕рд▓реЗрд▓реНрдпрд╛ рд╣рд╛рд░реНрдбрд╡реЗрдЕрд░рдиреБрд╕рд╛рд░ рддреБрдореНрд╣рд╛рд▓рд╛ рд╣реЗ рдмрджрд▓рд╛рд╡реЗ рд▓рд╛рдЧреЗрд▓.

    ```python
    rate = 48000 #48KHz
    ```

    рдЬрд░ рддреБрдореНрд╣рд╛рд▓рд╛ рдирдВрддрд░ рд╣рд╛ рдХреЛрдб рдЪрд╛рд▓рд╡рддрд╛рдирд╛ рдирдореБрдирд╛ рджрд░ рддреНрд░реБрдЯреА рдорд┐рд│рд╛рд▓реНрдпрд╛, рддрд░ рд╣реА рдХрд┐рдВрдордд `44100` рдХрд┐рдВрд╡рд╛ `16000` рд╡рд░ рдмрджрд▓рд╛. рдХрд┐рдВрдордд рдЬрд╛рд╕реНрдд рдЕрд╕реЗрд▓, рддрд░ рдЖрд╡рд╛рдЬрд╛рдЪреА рдЧреБрдгрд╡рддреНрддрд╛ рдЪрд╛рдВрдЧрд▓реА рдЕрд╕реЗрд▓.

1. рдпрд╛рдЦрд╛рд▓реА, `capture_audio` рдирд╛рд╡рд╛рдЪреА рдирд╡реАрди рдлрдВрдХреНрд╢рди рддрдпрд╛рд░ рдХрд░рд╛. рд╣реЗ рдорд╛рдпрдХреНрд░реЛрдлреЛрдирдордзреВрди рдСрдбрд┐рдУ рдХреЕрдкреНрдЪрд░ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдХреЙрд▓ рдХреЗрд▓реЗ рдЬрд╛рдИрд▓:

    ```python
    def capture_audio():
    ```

1. рдпрд╛ рдлрдВрдХреНрд╢рдирдордзреНрдпреЗ, рдСрдбрд┐рдУ рдХреЕрдкреНрдЪрд░ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдЦрд╛рд▓реАрд▓ рдХреЛрдб рдЬреЛрдбрд╛:

    ```python
    stream = audio.open(format = pyaudio.paInt16,
                        rate = rate,
                        channels = 1, 
                        input_device_index = microphone_card_number,
                        input = True,
                        frames_per_buffer = 4096)

    frames = []

    while button.is_pressed():
        frames.append(stream.read(4096))

    stream.stop_stream()
    stream.close()
    ```

    рд╣рд╛ рдХреЛрдб PyAudio рдСрдмреНрдЬреЗрдХреНрдЯ рд╡рд╛рдкрд░реВрди рдСрдбрд┐рдУ рдЗрдирдкреБрдЯ рд╕реНрдЯреНрд░реАрдо рдЙрдШрдбрддреЛ. рд╣рд╛ рд╕реНрдЯреНрд░реАрдо рдорд╛рдпрдХреНрд░реЛрдлреЛрдирдордзреВрди 16KHz рд╡рд░ рдСрдбрд┐рдУ рдХреЕрдкреНрдЪрд░ рдХрд░рддреЛ, 4096 рдмрд╛рдЗрдЯреНрд╕рдЪреНрдпрд╛ рдмрдлрд░реНрд╕рдордзреНрдпреЗ рдХреЕрдкреНрдЪрд░ рдХрд░рддреЛ.

    рдХреЛрдб рдирдВрддрд░ рдЧреНрд░реЛрд╡реНрд╣ рдмрдЯрдг рджрд╛рдмрд▓реЗрд▓реЗ рдЕрд╕рддрд╛рдирд╛ рд▓реВрдк рдХрд░рддреЛ, рдкреНрд░рддреНрдпреЗрдХ рд╡реЗрд│реА 4096 рдмрд╛рдЗрдЯреНрд╕рдЪреНрдпрд╛ рдмрдлрд░реНрд╕ рдПрдХрд╛ рдЕтАНреЕрд░реЗрдордзреНрдпреЗ рд╡рд╛рдЪрддреЛ.

    > ЁЯТБ рддреБрдореНрд╣реА `open` рдкрджреНрдзрддреАрд▓рд╛ рджрд┐рд▓реЗрд▓реНрдпрд╛ рдкрд░реНрдпрд╛рдпрд╛рдВрдмрджреНрджрд▓ рдЕрдзрд┐рдХ рд╡рд╛рдЪреВ рд╢рдХрддрд╛ [PyAudio рджрд╕реНрддрдРрд╡рдЬ](https://people.csail.mit.edu/hubert/pyaudio/docs/) рдордзреНрдпреЗ.

    рдПрдХрджрд╛ рдмрдЯрдг рд╕реЛрдбрд▓реЗ рдХреА, рд╕реНрдЯреНрд░реАрдо рдерд╛рдВрдмрд╡рд▓рд╛ рдЬрд╛рддреЛ рдЖрдгрд┐ рдмрдВрдж рдХреЗрд▓рд╛ рдЬрд╛рддреЛ.

1. рдпрд╛ рдлрдВрдХреНрд╢рдирдЪреНрдпрд╛ рд╢реЗрд╡рдЯреА рдЦрд╛рд▓реАрд▓ рдХреЛрдб рдЬреЛрдбрд╛:

    ```python
    wav_buffer = io.BytesIO()
    with wave.open(wav_buffer, 'wb') as wavefile:
        wavefile.setnchannels(1)
        wavefile.setsampwidth(audio.get_sample_size(pyaudio.paInt16))
        wavefile.setframerate(rate)
        wavefile.writeframes(b''.join(frames))
        wav_buffer.seek(0)

    return wav_buffer
    ```

    рд╣рд╛ рдХреЛрдб рдПрдХ рдмрд╛рдпрдирд░реА рдмрдлрд░ рддрдпрд╛рд░ рдХрд░рддреЛ рдЖрдгрд┐ рд╕рд░реНрд╡ рдХреЕрдкреНрдЪрд░ рдХреЗрд▓реЗрд▓рд╛ рдСрдбрд┐рдУ [WAV рдлрд╛рдЗрд▓](https://wikipedia.org/wiki/WAV) рдореНрд╣рдгреВрди рд▓рд┐рд╣рд┐рддреЛ. рд╣реА рдлрд╛рдЗрд▓ рди рд╕рдВрдХреБрдЪрд┐рдд рдСрдбрд┐рдУ рд▓рд┐рд╣рд┐рдгреНрдпрд╛рдЪрд╛ рдПрдХ рдорд╛рдирдХ рдорд╛рд░реНрдЧ рдЖрд╣реЗ. рд╣рд╛ рдмрдлрд░ рдирдВрддрд░ рдкрд░рдд рдХреЗрд▓рд╛ рдЬрд╛рддреЛ.

1. рдСрдбрд┐рдУ рдмрдлрд░ рдкреНрд▓реЗрдмреЕрдХ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдЦрд╛рд▓реАрд▓ `play_audio` рдлрдВрдХреНрд╢рди рдЬреЛрдбрд╛:

    ```python
    def play_audio(buffer):
        stream = audio.open(format = pyaudio.paInt16,
                            rate = rate,
                            channels = 1,
                            output_device_index = speaker_card_number,
                            output = True)
    
        with wave.open(buffer, 'rb') as wf:
            data = wf.readframes(4096)
    
            while len(data) > 0:
                stream.write(data)
                data = wf.readframes(4096)
    
            stream.close()
    ```

    рд╣реЗ рдлрдВрдХреНрд╢рди рджреБрд╕рд░рд╛ рдСрдбрд┐рдУ рд╕реНрдЯреНрд░реАрдо рдЙрдШрдбрддреЗ, рдпрд╛рд╡реЗрд│реА рдЖрдЙрдЯрдкреБрдЯрд╕рд╛рдареА - рдСрдбрд┐рдУ рдкреНрд▓реЗ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА. рд╣реЗ рдЗрдирдкреБрдЯ рд╕реНрдЯреНрд░реАрдорд╕рд╛рд░рдЦреЗрдЪ рд╕реЗрдЯрд┐рдВрдЧреНрдЬ рд╡рд╛рдкрд░рддреЗ. рдмрдлрд░ рд╡реЗрд╡реНрд╣ рдлрд╛рдЗрд▓ рдореНрд╣рдгреВрди рдЙрдШрдбрд▓рд╛ рдЬрд╛рддреЛ рдЖрдгрд┐ 4096 рдмрд╛рдЗрдЯреНрд╕рдЪреНрдпрд╛ рддреБрдХрдбреНрдпрд╛рдВрдордзреНрдпреЗ рдЖрдЙрдЯрдкреБрдЯ рд╕реНрдЯреНрд░реАрдордордзреНрдпреЗ рд▓рд┐рд╣рд┐рд▓рд╛ рдЬрд╛рддреЛ, рдСрдбрд┐рдУ рдкреНрд▓реЗ рдХрд░рддреЛ. рдирдВрддрд░ рд╕реНрдЯреНрд░реАрдо рдмрдВрдж рдХреЗрд▓рд╛ рдЬрд╛рддреЛ.

1. `capture_audio` рдлрдВрдХреНрд╢рдирдЦрд╛рд▓реА рдЦрд╛рд▓реАрд▓ рдХреЛрдб рдЬреЛрдбрд╛ рдЬреЛ рдмрдЯрдг рджрд╛рдмреЗрдкрд░реНрдпрдВрдд рд▓реВрдк рдХрд░рддреЛ. рдПрдХрджрд╛ рдмрдЯрдг рджрд╛рдмрд▓реЗ рдХреА, рдСрдбрд┐рдУ рдХреЕрдкреНрдЪрд░ рдХреЗрд▓рд╛ рдЬрд╛рддреЛ рдЖрдгрд┐ рдирдВрддрд░ рдкреНрд▓реЗ рдХреЗрд▓рд╛ рдЬрд╛рддреЛ.

    ```python
    while True:
        while not button.is_pressed():
            time.sleep(.1)
        
        buffer = capture_audio()
        play_audio(buffer)
    ```

1. рдХреЛрдб рдЪрд╛рд▓рд╡рд╛. рдмрдЯрдг рджрд╛рдмрд╛ рдЖрдгрд┐ рдорд╛рдпрдХреНрд░реЛрдлреЛрдирдордзреНрдпреЗ рдмреЛрд▓рд╛. рддреБрдореНрд╣реА рдкреВрд░реНрдг рдЭрд╛рд▓реНрдпрд╛рд╡рд░ рдмрдЯрдг рд╕реЛрдбрд╛ рдЖрдгрд┐ рддреБрдореНрд╣рд╛рд▓рд╛ рд░реЗрдХреЙрд░реНрдбрд┐рдВрдЧ рдРрдХреВ рдпреЗрдИрд▓.

    PyAudio рдЙрджрд╛рд╣рд░рдг рддрдпрд╛рд░ рдХрд░рддрд╛рдирд╛ рддреБрдореНрд╣рд╛рд▓рд╛ рдХрд╛рд╣реА ALSA рддреНрд░реБрдЯреА рдорд┐рд│реВ рд╢рдХрддрд╛рдд. рд╣реЗ рддреБрдордЪреНрдпрд╛рдХрдбреЗ рдирд╕рд▓реЗрд▓реНрдпрд╛ рдСрдбрд┐рдУ рдбрд┐рд╡реНрд╣рд╛рдЗрд╕рд╕рд╛рдареА рдкрд╛рдпрд╡рд░реАрд▓ рдХреЙрдиреНрдлрд┐рдЧрд░реЗрд╢рдирдореБрд│реЗ рдЖрд╣реЗ. рддреБрдореНрд╣реА рдпрд╛ рддреНрд░реБрдЯреА рджреБрд░реНрд▓рдХреНрд╖рд┐рдд рдХрд░реВ рд╢рдХрддрд╛.

    ```output
    pi@raspberrypi:~/smart-timer $ python3 app.py 
    ALSA lib pcm.c:2565:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.front
    ALSA lib pcm.c:2565:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.rear
    ALSA lib pcm.c:2565:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.center_lfe
    ALSA lib pcm.c:2565:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.side
    ```

    рдЬрд░ рддреБрдореНрд╣рд╛рд▓рд╛ рдЦрд╛рд▓реАрд▓ рддреНрд░реБрдЯреА рдорд┐рд│рд╛рд▓реА:

    ```output
    OSError: [Errno -9997] Invalid sample rate
    ```

    рддрд░ `rate` `44100` рдХрд┐рдВрд╡рд╛ `16000` рд╡рд░ рдмрджрд▓рд╛.

> ЁЯТБ рддреБрдореНрд╣реА рд╣рд╛ рдХреЛрдб [code-record/pi](../../../../../6-consumer/lessons/1-speech-recognition/code-record/pi) рдлреЛрд▓реНрдбрд░рдордзреНрдпреЗ рд╢реЛрдзреВ рд╢рдХрддрд╛.

ЁЯША рддреБрдордЪрд╛ рдСрдбрд┐рдУ рд░реЗрдХреЙрд░реНрдбрд┐рдВрдЧ рдкреНрд░реЛрдЧреНрд░рд╛рдо рдпрд╢рд╕реНрд╡реА рдЭрд╛рд▓рд╛!

---

**рдЕрд╕реНрд╡реАрдХрд░рдг**:  
рд╣рд╛ рджрд╕реНрддрдРрд╡рдЬ AI рднрд╛рд╖рд╛рдВрддрд░ рд╕реЗрд╡рд╛ [Co-op Translator](https://github.com/Azure/co-op-translator) рд╡рд╛рдкрд░реВрди рднрд╛рд╖рд╛рдВрддрд░рд┐рдд рдХрд░рдгреНрдпрд╛рдд рдЖрд▓рд╛ рдЖрд╣реЗ. рдЖрдореНрд╣реА рдЕрдЪреВрдХрддреЗрд╕рд╛рдареА рдкреНрд░рдпрддреНрдирд╢реАрд▓ рдЕрд╕рд▓реЛ рддрд░реА рдХреГрдкрдпрд╛ рд▓рдХреНрд╖рд╛рдд рдареЗрд╡рд╛ рдХреА рд╕реНрд╡рдпрдВрдЪрд▓рд┐рдд рднрд╛рд╖рд╛рдВрддрд░рд╛рдВрдордзреНрдпреЗ рддреНрд░реБрдЯреА рдХрд┐рдВрд╡рд╛ рдЕрдЪреВрдХрддреЗрдЪрд╛ рдЕрднрд╛рд╡ рдЕрд╕реВ рд╢рдХрддреЛ. рдореВрд│ рднрд╛рд╖реЗрддреАрд▓ рджрд╕реНрддрдРрд╡рдЬ рд╣рд╛ рдЕрдзрд┐рдХреГрдд рд╕реНрд░реЛрдд рдорд╛рдирд▓рд╛ рдЬрд╛рд╡рд╛. рдорд╣рддреНрддреНрд╡рд╛рдЪреНрдпрд╛ рдорд╛рд╣рд┐рддреАрд╕рд╛рдареА рд╡реНрдпрд╛рд╡рд╕рд╛рдпрд┐рдХ рдорд╛рдирд╡реА рднрд╛рд╖рд╛рдВрддрд░рд╛рдЪреА рд╢рд┐рдлрд╛рд░рд╕ рдХреЗрд▓реА рдЬрд╛рддреЗ. рдпрд╛ рднрд╛рд╖рд╛рдВрддрд░рд╛рдЪрд╛ рд╡рд╛рдкрд░ рдХрд░реВрди рдирд┐рд░реНрдорд╛рдг рд╣реЛрдгрд╛рд▒реНрдпрд╛ рдХреЛрдгрддреНрдпрд╛рд╣реА рдЧреИрд░рд╕рдордЬ рдХрд┐рдВрд╡рд╛ рдЪреБрдХреАрдЪреНрдпрд╛ рдЕрд░реНрдерд╛рд╕рд╛рдареА рдЖрдореНрд╣реА рдЬрдмрд╛рдмрджрд╛рд░ рд░рд╛рд╣рдгрд╛рд░ рдирд╛рд╣реА.