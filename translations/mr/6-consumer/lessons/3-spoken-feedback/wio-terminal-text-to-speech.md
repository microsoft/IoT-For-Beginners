<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "a202fa5889790a3777bfc33dd9f4b459",
  "translation_date": "2025-08-27T13:55:45+00:00",
  "source_file": "6-consumer/lessons/3-spoken-feedback/wio-terminal-text-to-speech.md",
  "language_code": "mr"
}
-->
# рдЯреЗрдХреНрд╕реНрдЯ рддреЗ рд╕реНрдкреАрдЪ - Wio Terminal

рдпрд╛ рдзрдбреНрдпрд╛рдЪреНрдпрд╛ рднрд╛рдЧрд╛рдд, рддреБрдореНрд╣реА рдЯреЗрдХреНрд╕реНрдЯрд▓рд╛ рд╕реНрдкреАрдЪрдордзреНрдпреЗ рд░реВрдкрд╛рдВрддрд░рд┐рдд рдХрд░реВрди рдмреЛрд▓рдгреНрдпрд╛рдЪреЗ рдлреАрдбрдмреЕрдХ рдкреНрд░рджрд╛рди рдХрд░рд╛рд▓.

## рдЯреЗрдХреНрд╕реНрдЯ рддреЗ рд╕реНрдкреАрдЪ

рдорд╛рдЧреАрд▓ рдзрдбреНрдпрд╛рдд рддреБрдореНрд╣реА рдЯреЗрдХреНрд╕реНрдЯрдордзреНрдпреЗ рд░реВрдкрд╛рдВрддрд░рд┐рдд рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рд╡рд╛рдкрд░рд▓реЗрд▓реА рд╕реНрдкреАрдЪ рд╕рд░реНрд╡реНрд╣рд┐рд╕реЗрд╕ SDK рдЯреЗрдХреНрд╕реНрдЯрд▓рд╛ рдкреБрдиреНрд╣рд╛ рд╕реНрдкреАрдЪрдордзреНрдпреЗ рд░реВрдкрд╛рдВрддрд░рд┐рдд рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рд╡рд╛рдкрд░рд▓реА рдЬрд╛рдК рд╢рдХрддреЗ.

## рдЖрд╡рд╛рдЬрд╛рдВрдЪреА рдпрд╛рджреА рдорд┐рд│рд╡рд╛

рд╕реНрдкреАрдЪрдЪреА рд╡рд┐рдирдВрддреА рдХрд░рддрд╛рдирд╛, рддреБрдореНрд╣рд╛рд▓рд╛ рд╡рд╛рдкрд░рдгреНрдпрд╛рд╕рд╛рдареА рдЖрд╡рд╛рдЬ рдкреНрд░рджрд╛рди рдХрд░рд╛рд╡рд╛ рд▓рд╛рдЧрддреЛ рдХрд╛рд░рдг рд╡рд┐рд╡рд┐рдз рдЖрд╡рд╛рдЬрд╛рдВрдЪрд╛ рд╡рд╛рдкрд░ рдХрд░реВрди рд╕реНрдкреАрдЪ рддрдпрд╛рд░ рдХреЗрд▓рд╛ рдЬрд╛рдК рд╢рдХрддреЛ. рдкреНрд░рддреНрдпреЗрдХ рднрд╛рд╖реЗрд╕рд╛рдареА рд╡рд┐рд╡рд┐рдз рдЖрд╡рд╛рдЬрд╛рдВрдЪрд╛ рдПрдХ рд╢реНрд░реЗрдгреА рдЕрд╕рддреЛ, рдЖрдгрд┐ рд╕реНрдкреАрдЪ рд╕рд░реНрд╡реНрд╣рд┐рд╕реЗрд╕ SDK рдордзреВрди рдкреНрд░рддреНрдпреЗрдХ рднрд╛рд╖реЗрд╕рд╛рдареА рд╕рдорд░реНрдерд┐рдд рдЖрд╡рд╛рдЬрд╛рдВрдЪреА рдпрд╛рджреА рдорд┐рд│рд╡рддрд╛ рдпреЗрддреЗ. рдорд╛рдпрдХреНрд░реЛрдХрдВрдЯреНрд░реЛрд▓рд░реНрд╕рдЪреНрдпрд╛ рдорд░реНрдпрд╛рджрд╛ рдпреЗрдереЗ рдпреЗрддрд╛рдд - рдЯреЗрдХреНрд╕реНрдЯ рддреЗ рд╕реНрдкреАрдЪ рд╕рд░реНрд╡реНрд╣рд┐рд╕реЗрд╕рджреНрд╡рд╛рд░реЗ рд╕рдорд░реНрдерд┐рдд рдЖрд╡рд╛рдЬрд╛рдВрдЪреА рдпрд╛рджреА рдорд┐рд│рд╡рдгреНрдпрд╛рд╕рд╛рдареА рдХреЗрд▓реЗрд▓рд╛ рдХреЙрд▓ 77KB рдкреЗрдХреНрд╖рд╛ рдореЛрдареНрдпрд╛ рдЖрдХрд╛рд░рд╛рдЪрд╛ JSON рджрд╕реНрддрдРрд╡рдЬ рдЕрд╕рддреЛ, рдЬреЛ Wio Terminal рджреНрд╡рд╛рд░реЗ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдЦреВрдк рдореЛрдард╛ рдЖрд╣реЗ. рд▓реЗрдЦрдирд╛рдЪреНрдпрд╛ рд╡реЗрд│реА, рд╕рдВрдкреВрд░реНрдг рдпрд╛рджреАрдордзреНрдпреЗ 215 рдЖрд╡рд╛рдЬ рдЖрд╣реЗрдд, рдкреНрд░рддреНрдпреЗрдХ рдЖрд╡рд╛рдЬ рдЦрд╛рд▓реАрд▓рдкреНрд░рдорд╛рдгреЗ JSON рджрд╕реНрддрдРрд╡рдЬрд╛рджреНрд╡рд╛рд░реЗ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХреЗрд▓рд╛ рдЬрд╛рддреЛ:

```json
{
    "Name": "Microsoft Server Speech Text to Speech Voice (en-US, AriaNeural)",
    "DisplayName": "Aria",
    "LocalName": "Aria",
    "ShortName": "en-US-AriaNeural",
    "Gender": "Female",
    "Locale": "en-US",
    "StyleList": [
        "chat",
        "customerservice",
        "narration-professional",
        "newscast-casual",
        "newscast-formal",
        "cheerful",
        "empathetic"
    ],
    "SampleRateHertz": "24000",
    "VoiceType": "Neural",
    "Status": "GA"
}
```

рд╣рд╛ JSON **Aria** рдЖрд╡рд╛рдЬрд╛рд╕рд╛рдареА рдЖрд╣реЗ, рдЬреНрдпрд╛рдордзреНрдпреЗ рдЕрдиреЗрдХ рдЖрд╡рд╛рдЬ рд╢реИрд▓реА рдЖрд╣реЗрдд. рдЯреЗрдХреНрд╕реНрдЯрд▓рд╛ рд╕реНрдкреАрдЪрдордзреНрдпреЗ рд░реВрдкрд╛рдВрддрд░рд┐рдд рдХрд░рддрд╛рдирд╛ рдЖрд╡рд╢реНрдпрдХ рдЕрд╕рд▓реЗрд▓реА рдПрдХрдореЗрд╡ рдЧреЛрд╖реНрдЯ рдореНрд╣рдгрдЬреЗ shortname, `en-US-AriaNeural`.

рдорд╛рдпрдХреНрд░реЛрдХрдВрдЯреНрд░реЛрд▓рд░рд╡рд░ рд╣реА рд╕рдВрдкреВрд░реНрдг рдпрд╛рджреА рдбрд╛рдЙрдирд▓реЛрдб рдЖрдгрд┐ рдбрд┐рдХреЛрдб рдХрд░рдгреНрдпрд╛рдРрд╡рдЬреА, рддреБрдореНрд╣рд╛рд▓рд╛ рд╡рд╛рдкрд░рдд рдЕрд╕рд▓реЗрд▓реНрдпрд╛ рднрд╛рд╖реЗрд╕рд╛рдареА рдЖрд╡рд╛рдЬрд╛рдВрдЪреА рдпрд╛рджреА рдорд┐рд│рд╡рдгреНрдпрд╛рд╕рд╛рдареА рдХрд╛рд╣реА рдЕрдзрд┐рдХ serverless рдХреЛрдб рд▓рд┐рд╣рд┐рдгреНрдпрд╛рдЪреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдЖрд╣реЗ, рдЖрдгрд┐ Wio Terminal рд╡рд░реВрди рд╣реЗ рдХреЙрд▓ рдХрд░рд╛рд╡реЗ рд▓рд╛рдЧреЗрд▓. рддреБрдордЪрд╛ рдХреЛрдб рдпрд╛рджреАрддреАрд▓ рдпреЛрдЧреНрдп рдЖрд╡рд╛рдЬ рдирд┐рд╡рдбреВ рд╢рдХрддреЛ, рдЬрд╕реЗ рдХреА рддреНрдпрд╛рд▓рд╛ рд╕рд╛рдкрдбрд▓реЗрд▓рд╛ рдкрд╣рд┐рд▓рд╛ рдЖрд╡рд╛рдЬ.

### рдХрд╛рд░реНрдп - рдЖрд╡рд╛рдЬрд╛рдВрдЪреА рдпрд╛рджреА рдорд┐рд│рд╡рдгреНрдпрд╛рд╕рд╛рдареА serverless рдлрдВрдХреНрд╢рди рддрдпрд╛рд░ рдХрд░рд╛

1. VS Code рдордзреНрдпреЗ рддреБрдордЪрд╛ `smart-timer-trigger` рдкреНрд░рдХрд▓реНрдк рдЙрдШрдбрд╛, рдЖрдгрд┐ рдЯрд░реНрдорд┐рдирд▓ рдЙрдШрдбрд╛, рдпрд╛рдЪреА рдЦрд╛рддреНрд░реА рдХрд░рд╛ рдХреА рд╡рд░реНрдЪреНрдпреБрдЕрд▓ рд╡рд╛рддрд╛рд╡рд░рдг рд╕рдХреНрд░рд┐рдп рдЖрд╣реЗ. рдирд╕рд▓реНрдпрд╛рд╕, рдЯрд░реНрдорд┐рдирд▓ рдмрдВрдж рдХрд░рд╛ рдЖрдгрд┐ рдкреБрдиреНрд╣рд╛ рддрдпрд╛рд░ рдХрд░рд╛.

1. `local.settings.json` рдлрд╛рдЗрд▓ рдЙрдШрдбрд╛ рдЖрдгрд┐ рд╕реНрдкреАрдЪ API рдХреА рдЖрдгрд┐ рд╕реНрдерд╛рдирд╛рд╕рд╛рдареА рд╕реЗрдЯрд┐рдВрдЧреНрдЬ рдЬреЛрдбрд╛:

    ```json
    "SPEECH_KEY": "<key>",
    "SPEECH_LOCATION": "<location>"
    ```

    `<key>` рд▓рд╛ рддреБрдордЪреНрдпрд╛ рд╕реНрдкреАрдЪ рд╕рд░реНрд╡реНрд╣рд┐рд╕ рд░рд┐рд╕реЛрд░реНрд╕рд╕рд╛рдареА API рдХреАрдиреЗ рдмрджрд▓рд╛. `<location>` рд▓рд╛ рддреБрдореНрд╣реА рд╕реНрдкреАрдЪ рд╕рд░реНрд╡реНрд╣рд┐рд╕ рд░рд┐рд╕реЛрд░реНрд╕ рддрдпрд╛рд░ рдХрд░рддрд╛рдирд╛ рд╡рд╛рдкрд░рд▓реЗрд▓реНрдпрд╛ рд╕реНрдерд╛рдирд╛рдиреЗ рдмрджрд▓рд╛.

1. рдпрд╛ рдЕреЕрдкрдордзреНрдпреЗ `get-voices` рдирд╛рд╡рд╛рдЪрд╛ рдирд╡реАрди HTTP рдЯреНрд░рд┐рдЧрд░ рдЦрд╛рд▓реАрд▓ рдХрдорд╛рдВрдб рд╡рд╛рдкрд░реВрди рддрдпрд╛рд░ рдХрд░рд╛:

    ```sh
    func new --name get-voices --template "HTTP trigger"
    ```

    рд╣реЗ `get-voices` рдирд╛рд╡рд╛рдЪрд╛ HTTP рдЯреНрд░рд┐рдЧрд░ рддрдпрд╛рд░ рдХрд░реЗрд▓.

1. `get-voices` рдлреЛрд▓реНрдбрд░рдордзреАрд▓ `__init__.py` рдлрд╛рдЗрд▓рдЪреА рд╕рд╛рдордЧреНрд░реА рдЦрд╛рд▓реАрд▓рдкреНрд░рдорд╛рдгреЗ рдмрджрд▓рд╛:

    ```python
    import json
    import os
    import requests
    
    import azure.functions as func
    
    def main(req: func.HttpRequest) -> func.HttpResponse:
        location = os.environ['SPEECH_LOCATION']
        speech_key = os.environ['SPEECH_KEY']
    
        req_body = req.get_json()
        language = req_body['language']
    
        url = f'https://{location}.tts.speech.microsoft.com/cognitiveservices/voices/list'
    
        headers = {
            'Ocp-Apim-Subscription-Key': speech_key
        }
    
        response = requests.get(url, headers=headers)
        voices_json = json.loads(response.text)
    
        voices = filter(lambda x: x['Locale'].lower() == language.lower(), voices_json)
        voices = map(lambda x: x['ShortName'], voices)
    
        return func.HttpResponse(json.dumps(list(voices)), status_code=200)
    ```

    рд╣рд╛ рдХреЛрдб рдЖрд╡рд╛рдЬрд╛рдВрдЪреА рдпрд╛рджреА рдорд┐рд│рд╡рдгреНрдпрд╛рд╕рд╛рдареА рдПрдВрдбрдкреЙрдЗрдВрдЯрд▓рд╛ HTTP рд╡рд┐рдирдВрддреА рдХрд░рддреЛ. рд╣реА рдЖрд╡рд╛рдЬрд╛рдВрдЪреА рдпрд╛рджреА рд╕рд░реНрд╡ рднрд╛рд╖рд╛рдВрд╕рд╛рдареА рдореЛрдард╛ JSON рдмреНрд▓реЙрдХ рдЖрд╣реЗ, рддреНрдпрд╛рдореБрд│реЗ рд╡рд┐рдирдВрддреА рдмреЙрдбреАрдордзреНрдпреЗ рджрд┐рд▓реЗрд▓реНрдпрд╛ рднрд╛рд╖реЗрд╕рд╛рдареА рдЖрд╡рд╛рдЬ рдлрд┐рд▓реНрдЯрд░ рдХреЗрд▓реЗ рдЬрд╛рддрд╛рдд, рдирдВрддрд░ shortname рдХрд╛рдвреВрди JSON рдпрд╛рджреА рдореНрд╣рдгреВрди рдкрд░рдд рджрд┐рд▓реЗ рдЬрд╛рддреЗ. рдЯреЗрдХреНрд╕реНрдЯрд▓рд╛ рд╕реНрдкреАрдЪрдордзреНрдпреЗ рд░реВрдкрд╛рдВрддрд░рд┐рдд рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА shortname рдЖрд╡рд╢реНрдпрдХ рдЖрд╣реЗ, рддреНрдпрд╛рдореБрд│реЗ рдлрдХреНрдд рд╣реА рдореВрд▓реНрдп рдкрд░рдд рджрд┐рд▓реА рдЬрд╛рддреЗ.

    > ЁЯТБ рддреБрдореНрд╣реА рдЖрд╡рд╢реНрдпрдХ рдЕрд╕рд▓реНрдпрд╛рд╕ рдлрдХреНрдд рддреБрдореНрд╣рд╛рд▓рд╛ рд╣рд╡реЗ рдЕрд╕рд▓реЗрд▓реЗ рдЖрд╡рд╛рдЬ рдирд┐рд╡рдбрдгреНрдпрд╛рд╕рд╛рдареА рдлрд┐рд▓реНрдЯрд░ рдмрджрд▓реВ рд╢рдХрддрд╛.

    рдпрд╛рдореБрд│реЗ рдбреЗрдЯрд╛ 77KB (рд▓реЗрдЦрдирд╛рдЪреНрдпрд╛ рд╡реЗрд│реА) рдкрд╛рд╕реВрди рдЦреВрдкрдЪ рдЫреЛрдЯреНрдпрд╛ JSON рджрд╕реНрддрдРрд╡рдЬрд╛рдд рдХрдореА рд╣реЛрддреЛ. рдЙрджрд╛рд╣рд░рдгрд╛рд░реНрде, US рдЖрд╡рд╛рдЬрд╛рдВрд╕рд╛рдареА рд╣рд╛ 408 рдмрд╛рдЗрдЯреНрд╕ рдЖрд╣реЗ.

1. рддреБрдордЪрд╛ рдлрдВрдХреНрд╢рди рдЕреЕрдк рд╕реНрдерд╛рдирд┐рдХ рдкрд╛рддрд│реАрд╡рд░ рдЪрд╛рд▓рд╡рд╛. рддреБрдореНрд╣реА рддреБрдордЪреНрдпрд╛ `text-to-timer` HTTP рдЯреНрд░рд┐рдЧрд░рдЪреА рдЪрд╛рдЪрдгреА рдШреЗрддрд▓реНрдпрд╛рдкреНрд░рдорд╛рдгреЗ curl рд╕рд╛рд░рдЦреНрдпрд╛ рдЯреВрд▓рдЪрд╛ рд╡рд╛рдкрд░ рдХрд░реВрди рд╣реЗ рдХреЙрд▓ рдХрд░реВ рд╢рдХрддрд╛. рддреБрдордЪреА рднрд╛рд╖рд╛ JSON рдмреЙрдбреА рдореНрд╣рдгреВрди рдкрд╛рдард╡рд╛:

    ```json
    {
        "language":"<language>"
    }
    ```

    `<language>` рд▓рд╛ рддреБрдордЪреА рднрд╛рд╖рд╛ рдмрджрд▓рд╛, рдЬрд╕реЗ рдХреА `en-GB`, рдХрд┐рдВрд╡рд╛ `zh-CN`.

> ЁЯТБ рддреБрдореНрд╣реА рд╣рд╛ рдХреЛрдб [code-spoken-response/functions](../../../../../6-consumer/lessons/3-spoken-feedback/code-spoken-response/functions) рдлреЛрд▓реНрдбрд░рдордзреНрдпреЗ рд╢реЛрдзреВ рд╢рдХрддрд╛.

### рдХрд╛рд░реНрдп - Wio Terminal рд╡рд░реВрди рдЖрд╡рд╛рдЬ рдорд┐рд│рд╡рд╛

1. рдЬрд░ `smart-timer` рдкреНрд░рдХрд▓реНрдк рдЙрдШрдбрд▓реЗрд▓рд╛ рдирд╕реЗрд▓ рддрд░ VS Code рдордзреНрдпреЗ рдЙрдШрдбрд╛.

1. `config.h` рд╣реЗрдбрд░ рдлрд╛рдЗрд▓ рдЙрдШрдбрд╛ рдЖрдгрд┐ рддреБрдордЪреНрдпрд╛ рдлрдВрдХреНрд╢рди рдЕреЕрдкрд╕рд╛рдареА URL рдЬреЛрдбрд╛:

    ```cpp
    const char *GET_VOICES_FUNCTION_URL = "<URL>";
    ```

    `<URL>` рд▓рд╛ рддреБрдордЪреНрдпрд╛ рдлрдВрдХреНрд╢рди рдЕреЕрдкрд╡рд░реАрд▓ `get-voices` HTTP рдЯреНрд░рд┐рдЧрд░рд╕рд╛рдареА URL рдиреЗ рдмрджрд▓рд╛. рд╣реЗ `TEXT_TO_TIMER_FUNCTION_URL` рдЪреНрдпрд╛ рдореВрд▓реНрдпрд╛рд╕рд╛рд░рдЦреЗрдЪ рдЕрд╕реЗрд▓, рдлрдХреНрдд рдлрдВрдХреНрд╢рдирдЪреЗ рдирд╛рд╡ `text-to-timer` рдРрд╡рдЬреА `get-voices` рдЕрд╕реЗрд▓.

1. `src` рдлреЛрд▓реНрдбрд░рдордзреНрдпреЗ `text_to_speech.h` рдирд╛рд╡рд╛рдЪреА рдирд╡реАрди рдлрд╛рдЗрд▓ рддрдпрд╛рд░ рдХрд░рд╛. рдЯреЗрдХреНрд╕реНрдЯрд▓рд╛ рд╕реНрдкреАрдЪрдордзреНрдпреЗ рд░реВрдкрд╛рдВрддрд░рд┐рдд рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдПрдХ рдХреНрд▓рд╛рд╕ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдпрд╛рдЪрд╛ рд╡рд╛рдкрд░ рдХреЗрд▓рд╛ рдЬрд╛рдИрд▓.

1. `text_to_speech.h` рдлрд╛рдЗрд▓рдЪреНрдпрд╛ рд╢реАрд░реНрд╖рд╕реНрдерд╛рдиреА рдЦрд╛рд▓реАрд▓ include рдирд┐рд░реНрджреЗрд╢ рдЬреЛрдбрд╛:

    ```cpp
    #pragma once

    #include <Arduino.h>
    #include <ArduinoJson.h>
    #include <HTTPClient.h>
    #include <Seeed_FS.h>
    #include <SD/Seeed_SD.h>
    #include <WiFiClient.h>
    #include <WiFiClientSecure.h>
    
    #include "config.h"
    #include "speech_to_text.h"
    ```

1. рдЦрд╛рд▓реАрд▓ рдХреЛрдб рдЬреЛрдбрд╛, рдЬреЛ `TextToSpeech` рдХреНрд▓рд╛рд╕ рдШреЛрд╖рд┐рдд рдХрд░рддреЛ, рддрд╕реЗрдЪ рдЕреЕрдкреНрд▓рд┐рдХреЗрд╢рдирдордзреНрдпреЗ рд╡рд╛рдкрд░рддрд╛ рдпреЗрдгрд╛рд░реА рдПрдХ instance:

    ```cpp
    class TextToSpeech
    {
    public:
    private:
    };
    
    TextToSpeech textToSpeech;
    ```

1. рддреБрдордЪреНрдпрд╛ рдлрдВрдХреНрд╢рди рдЕреЕрдкрд▓рд╛ рдХреЙрд▓ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА, рддреБрдореНрд╣рд╛рд▓рд╛ WiFi рдХреНрд▓рд╛рдпрдВрдЯ рдШреЛрд╖рд┐рдд рдХрд░рд╛рд╡рд╛ рд▓рд╛рдЧреЗрд▓. рдХреНрд▓рд╛рд╕рдЪреНрдпрд╛ `private` рд╡рд┐рднрд╛рдЧрд╛рдд рдЦрд╛рд▓реАрд▓ рдЬреЛрдбрд╛:

    ```cpp
    WiFiClient _client;
    ```

1. `private` рд╡рд┐рднрд╛рдЧрд╛рдд рдирд┐рд╡рдбрд▓реЗрд▓реНрдпрд╛ рдЖрд╡рд╛рдЬрд╛рд╕рд╛рдареА рдПрдХ рдлреАрд▓реНрдб рдЬреЛрдбрд╛:

    ```cpp
    String _voice;
    ```

1. `public` рд╡рд┐рднрд╛рдЧрд╛рдд рдПрдХ `init` рдлрдВрдХреНрд╢рди рдЬреЛрдбрд╛, рдЬреЗ рдкрд╣рд┐рд▓рд╛ рдЖрд╡рд╛рдЬ рдорд┐рд│рд╡реЗрд▓:

    ```cpp
    void init()
    {
    }
    ```

1. рдЖрд╡рд╛рдЬ рдорд┐рд│рд╡рдгреНрдпрд╛рд╕рд╛рдареА, рдлрдВрдХреНрд╢рди рдЕреЕрдкрд▓рд╛ JSON рджрд╕реНрддрдРрд╡рдЬ рдкрд╛рдард╡рдгреЗ рдЖрд╡рд╢реНрдпрдХ рдЖрд╣реЗ рдЬреНрдпрд╛рдордзреНрдпреЗ рднрд╛рд╖рд╛ рдЕрд╕реЗрд▓. `init` рдлрдВрдХреНрд╢рдирдордзреНрдпреЗ рдЦрд╛рд▓реАрд▓ рдХреЛрдб рдЬреЛрдбрд╛:

    ```cpp
    DynamicJsonDocument doc(1024);
    doc["language"] = LANGUAGE;

    String body;
    serializeJson(doc, body);
    ```

1. рдкреБрдвреЗ рдПрдХ `HTTPClient` рддрдпрд╛рд░ рдХрд░рд╛, рдЖрдгрд┐ рдлрдВрдХреНрд╢рди рдЕреЕрдкрд▓рд╛ рдХреЙрд▓ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рд╡рд╛рдкрд░рд╛, JSON рджрд╕реНрддрдРрд╡рдЬ рдкреЛрд╕реНрдЯ рдХрд░рдд:

    ```cpp
    HTTPClient httpClient;
    httpClient.begin(_client, GET_VOICES_FUNCTION_URL);

    int httpResponseCode = httpClient.POST(body);
    ```

1. рдЦрд╛рд▓реАрд▓ рдХреЛрдб рдЬреЛрдбрд╛, рдЬреЛ рдкреНрд░рддрд┐рд╕рд╛рдж рдХреЛрдб рддрдкрд╛рд╕рддреЛ, рдЖрдгрд┐ рдЬрд░ рддреЛ 200 (рдпрд╢рд╕реНрд╡реА) рдЕрд╕реЗрд▓, рддрд░ рдЖрд╡рд╛рдЬрд╛рдВрдЪреА рдпрд╛рджреА рдХрд╛рдврддреЛ, рдпрд╛рджреАрддреАрд▓ рдкрд╣рд┐рд▓рд╛ рдЖрд╡рд╛рдЬ рдорд┐рд│рд╡рддреЛ:

    ```cpp
    if (httpResponseCode == 200)
    {
        String result = httpClient.getString();
        Serial.println(result);

        DynamicJsonDocument doc(1024);
        deserializeJson(doc, result.c_str());

        JsonArray obj = doc.as<JsonArray>();
        _voice = obj[0].as<String>();

        Serial.print("Using voice ");
        Serial.println(_voice);
    }
    else
    {
        Serial.print("Failed to get voices - error ");
        Serial.println(httpResponseCode);
    }
    ```

1. рдпрд╛рдирдВрддрд░, HTTP рдХреНрд▓рд╛рдпрдВрдЯ рдХрдиреЗрдХреНрд╢рди рд╕рдорд╛рдкреНрдд рдХрд░рд╛:

    ```cpp
    httpClient.end();
    ```

1. `main.cpp` рдлрд╛рдЗрд▓ рдЙрдШрдбрд╛, рдЖрдгрд┐ рд╢реАрд░реНрд╖рд╕реНрдерд╛рдиреА рдирд╡реАрди рд╣реЗрдбрд░ рдлрд╛рдЗрд▓ рд╕рдорд╛рд╡рд┐рд╖реНрдЯ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдЦрд╛рд▓реАрд▓ include directive рдЬреЛрдбрд╛:

    ```cpp
    #include "text_to_speech.h"
    ```

1. `setup` рдлрдВрдХреНрд╢рдирдордзреНрдпреЗ, `speechToText.init();` рдХреЙрд▓рдЪреНрдпрд╛ рдЦрд╛рд▓реА, `TextToSpeech` рдХреНрд▓рд╛рд╕ initialize рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдЦрд╛рд▓реАрд▓ рдЬреЛрдбрд╛:

    ```cpp
    textToSpeech.init();
    ```

1. рд╣рд╛ рдХреЛрдб рддрдпрд╛рд░ рдХрд░рд╛, Wio Terminal рд╡рд░ рдЕрдкрд▓реЛрдб рдХрд░рд╛ рдЖрдгрд┐ serial monitor рджреНрд╡рд╛рд░реЗ рдЪрд╛рдЪрдгреА рдХрд░рд╛. рддреБрдордЪрд╛ рдлрдВрдХреНрд╢рди рдЕреЕрдк рдЪрд╛рд▓реВ рдЕрд╕рд▓реНрдпрд╛рдЪреА рдЦрд╛рддреНрд░реА рдХрд░рд╛.

    рддреБрдореНрд╣рд╛рд▓рд╛ рдлрдВрдХреНрд╢рди рдЕреЕрдкрджреНрд╡рд╛рд░реЗ рдкрд░рдд рджрд┐рд▓реЗрд▓реА рдЙрдкрд▓рдмреНрдз рдЖрд╡рд╛рдЬрд╛рдВрдЪреА рдпрд╛рджреА рджрд┐рд╕реЗрд▓, рддрд╕реЗрдЪ рдирд┐рд╡рдбрд▓реЗрд▓рд╛ рдЖрд╡рд╛рдЬ.

    ```output
    --- Available filters and text transformations: colorize, debug, default, direct, hexlify, log2file, nocontrol, printable, send_on_enter, time
    --- More details at http://bit.ly/pio-monitor-filters
    --- Miniterm on /dev/cu.usbmodem1101  9600,8,N,1 ---
    --- Quit: Ctrl+C | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H ---
    Connecting to WiFi..
    Connected!
    Got access token.
    ["en-US-JennyNeural", "en-US-JennyMultilingualNeural", "en-US-GuyNeural", "en-US-AriaNeural", "en-US-AmberNeural", "en-US-AnaNeural", "en-US-AshleyNeural", "en-US-BrandonNeural", "en-US-ChristopherNeural", "en-US-CoraNeural", "en-US-ElizabethNeural", "en-US-EricNeural", "en-US-JacobNeural", "en-US-MichelleNeural", "en-US-MonicaNeural", "en-US-AriaRUS", "en-US-BenjaminRUS", "en-US-GuyRUS", "en-US-ZiraRUS"]
    Using voice en-US-JennyNeural
    Ready.
    ```

## рдЯреЗрдХреНрд╕реНрдЯрд▓рд╛ рд╕реНрдкреАрдЪрдордзреНрдпреЗ рд░реВрдкрд╛рдВрддрд░рд┐рдд рдХрд░рд╛

рдПрдХрджрд╛ рддреБрдореНрд╣рд╛рд▓рд╛ рд╡рд╛рдкрд░рдгреНрдпрд╛рд╕рд╛рдареА рдЖрд╡рд╛рдЬ рдорд┐рд│рд╛рд▓рд╛ рдХреА, рддреЛ рдЯреЗрдХреНрд╕реНрдЯрд▓рд╛ рд╕реНрдкреАрдЪрдордзреНрдпреЗ рд░реВрдкрд╛рдВрддрд░рд┐рдд рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рд╡рд╛рдкрд░рд▓рд╛ рдЬрд╛рдК рд╢рдХрддреЛ. рдЖрд╡рд╛рдЬрд╛рдВрд╕рд╣ рд╕реНрдкреАрдЪрд▓рд╛ рдЯреЗрдХреНрд╕реНрдЯрдордзреНрдпреЗ рд░реВрдкрд╛рдВрддрд░рд┐рдд рдХрд░рддрд╛рдирд╛ рд╕рдорд╛рди рдореЗрдорд░реА рдорд░реНрдпрд╛рджрд╛ рд▓рд╛рдЧреВ рд╣реЛрддрд╛рдд, рддреНрдпрд╛рдореБрд│реЗ рддреБрдореНрд╣рд╛рд▓рд╛ SD рдХрд╛рд░реНрдбрд╡рд░ рд╕реНрдкреАрдЪ рд▓рд┐рд╣рд╛рд╡реЗ рд▓рд╛рдЧреЗрд▓ рдЬреЗ ReSpeaker рд╡рд░ рдкреНрд▓реЗ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рддрдпрд╛рд░ рдЕрд╕реЗрд▓.

> ЁЯТБ рдпрд╛ рдкреНрд░рдХрд▓реНрдкрд╛рддреАрд▓ рдкреВрд░реНрд╡реАрдЪреНрдпрд╛ рдзрдбреНрдпрд╛рдВрдордзреНрдпреЗ рддреБрдореНрд╣реА рдорд╛рдпрдХреНрд░реЛрдлреЛрдирдордзреВрди рдХреЕрдкреНрдЪрд░ рдХреЗрд▓реЗрд▓реЗ рд╕реНрдкреАрдЪ рд╕реНрдЯреЛрдЕрд░ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдлреНрд▓реЕрд╢ рдореЗрдорд░реАрдЪрд╛ рд╡рд╛рдкрд░ рдХреЗрд▓рд╛ рд╣реЛрддрд╛. рдпрд╛ рдзрдбреНрдпрд╛рдд SD рдХрд╛рд░реНрдб рд╡рд╛рдкрд░рд▓реЗ рдЬрд╛рддреЗ рдХрд╛рд░рдг Seeed рдСрдбрд┐рдУ рд▓рд╛рдпрдмреНрд░рд░реА рд╡рд╛рдкрд░реВрди рддреНрдпрд╛рд╡рд░реВрди рдСрдбрд┐рдУ рдкреНрд▓реЗ рдХрд░рдгреЗ рд╕реЛрдкреЗ рдЖрд╣реЗ.

рддрд╕реЗрдЪ рдЖрдгрдЦреА рдПрдХ рдорд░реНрдпрд╛рджрд╛ рд╡рд┐рдЪрд╛рд░рд╛рдд рдШреНрдпрд╛рд╡реА рд▓рд╛рдЧрддреЗ, рд╕реНрдкреАрдЪ рд╕рд░реНрд╡реНрд╣рд┐рд╕реЗрд╕рдордзреВрди рдЙрдкрд▓рдмреНрдз рдСрдбрд┐рдУ рдбреЗрдЯрд╛, рдЖрдгрд┐ Wio Terminal рд╕рдорд░реНрдерди рджреЗрдгрд╛рд░реЗ рд╕реНрд╡рд░реВрдк. рдкреВрд░реНрдг рд╕рдВрдЧрдгрдХрд╛рдВрдкреНрд░рдорд╛рдгреЗ рдирд╛рд╣реА, рдорд╛рдпрдХреНрд░реЛрдХрдВрдЯреНрд░реЛрд▓рд░реНрд╕рд╕рд╛рдареА рдСрдбрд┐рдУ рд▓рд╛рдпрдмреНрд░рд░реА рд╕рдорд░реНрдерд┐рдд рдСрдбрд┐рдУ рд╕реНрд╡рд░реВрдкрд╛рдВрдордзреНрдпреЗ рдЦреВрдк рдорд░реНрдпрд╛рджрд┐рдд рдЕрд╕реВ рд╢рдХрддрд╛рдд. рдЙрджрд╛рд╣рд░рдгрд╛рд░реНрде, ReSpeaker рд╡рд░ рдЖрд╡рд╛рдЬ рдкреНрд▓реЗ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА Seeed Arduino Audio рд▓рд╛рдпрдмреНрд░рд░реА рдлрдХреНрдд 44.1KHz рдирдореБрдирд╛ рджрд░рд╛рд╡рд░ рдСрдбрд┐рдУ рд╕рдорд░реНрдерди рджреЗрддреЗ. Azure рд╕реНрдкреАрдЪ рд╕рд░реНрд╡реНрд╣рд┐рд╕реЗрд╕ рдЕрдиреЗрдХ рд╕реНрд╡рд░реВрдкрд╛рдВрдордзреНрдпреЗ рдСрдбрд┐рдУ рдкреНрд░рджрд╛рди рдХрд░реВ рд╢рдХрддреЗ, рдкрдг рддреНрдпрд╛рдкреИрдХреА рдХреЛрдгрддрд╛рд╣реА 44.1KHz рдирдореБрдирд╛ рджрд░ рд╡рд╛рдкрд░рдд рдирд╛рд╣реА, рддреЗ рдлрдХреНрдд 8KHz, 16KHz, 24KHz рдЖрдгрд┐ 48KHz рдкреНрд░рджрд╛рди рдХрд░рддрд╛рдд. рдпрд╛рдЪрд╛ рдЕрд░реНрде рдСрдбрд┐рдУрд▓рд╛ 44.1KHz рд╡рд░ рдкреБрдиреНрд╣рд╛ рдирдореБрдирд╛ рдШреНрдпрд╛рд╡рд╛ рд▓рд╛рдЧрддреЛ, рдЬреЗ Wio Terminal рдХрдбреЗ рдЕрд╕рд▓реЗрд▓реНрдпрд╛ рд╕рдВрд╕рд╛рдзрдирд╛рдВрдкреЗрдХреНрд╖рд╛ рдЕрдзрд┐рдХ рд╕рдВрд╕рд╛рдзрдиреЗ рдЖрд╡рд╢реНрдпрдХ рдЖрд╣реЗ, рд╡рд┐рд╢реЗрд╖рддрдГ рдореЗрдорд░реА.

рдбреЗрдЯрд╛ рдЕрд╢рд╛ рдкреНрд░рдХрд╛рд░реЗ рд╣рд╛рддрд╛рд│рдгреНрдпрд╛рдЪреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдЕрд╕рд▓реНрдпрд╛рд╕, serverless рдХреЛрдб рд╡рд╛рдкрд░рдгреЗ рдЪрд╛рдВрдЧрд▓реЗ рдЕрд╕рддреЗ, рд╡рд┐рд╢реЗрд╖рддрдГ рдЬрд░ рдбреЗрдЯрд╛ рд╡реЗрдм рдХреЙрд▓рджреНрд╡рд╛рд░реЗ рдорд┐рд│рд╡рд▓рд╛ рдЬрд╛рдд рдЕрд╕реЗрд▓. Wio Terminal serverless рдлрдВрдХреНрд╢рдирд▓рд╛ рдХреЙрд▓ рдХрд░реВ рд╢рдХрддреЛ, рдЯреЗрдХреНрд╕реНрдЯ рд░реВрдкрд╛рдВрддрд░рд┐рдд рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдкрд╛рдард╡рддреЛ, рдЖрдгрд┐ serverless рдлрдВрдХреНрд╢рди рдЯреЗрдХреНрд╕реНрдЯрд▓рд╛ рд╕реНрдкреАрдЪрдордзреНрдпреЗ рд░реВрдкрд╛рдВрддрд░рд┐рдд рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рд╕реНрдкреАрдЪ рд╕рд░реНрд╡реНрд╣рд┐рд╕реЗрд╕рд▓рд╛ рдХреЙрд▓ рдХрд░реВ рд╢рдХрддреЛ, рддрд╕реЗрдЪ рдСрдбрд┐рдУрд▓рд╛ рдЖрд╡рд╢реНрдпрдХ рдирдореБрдирд╛ рджрд░рд╛рд╡рд░ рдкреБрдиреНрд╣рд╛ рдирдореБрдирд╛ рдШреЗрдК рд╢рдХрддреЛ. рддреНрдпрд╛рдирдВрддрд░ рддреЗ рдСрдбрд┐рдУ Wio Terminal рд▓рд╛ рдЖрд╡рд╢реНрдпрдХ рд╕реНрд╡рд░реВрдкрд╛рдд рдкрд░рдд рдХрд░реВ рд╢рдХрддреЗ, рдЬреЗ SD рдХрд╛рд░реНрдбрд╡рд░ рд╕реНрдЯреЛрдЕрд░ рдХреЗрд▓реЗ рдЬрд╛рдК рд╢рдХрддреЗ рдЖрдгрд┐ ReSpeaker рд╡рд░ рдкреНрд▓реЗ рдХреЗрд▓реЗ рдЬрд╛рдК рд╢рдХрддреЗ.

### рдХрд╛рд░реНрдп - рдЯреЗрдХреНрд╕реНрдЯрд▓рд╛ рд╕реНрдкреАрдЪрдордзреНрдпреЗ рд░реВрдкрд╛рдВрддрд░рд┐рдд рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА serverless рдлрдВрдХреНрд╢рди рддрдпрд╛рд░ рдХрд░рд╛

1. VS Code рдордзреНрдпреЗ рддреБрдордЪрд╛ `smart-timer-trigger` рдкреНрд░рдХрд▓реНрдк рдЙрдШрдбрд╛, рдЖрдгрд┐ рдЯрд░реНрдорд┐рдирд▓ рдЙрдШрдбрд╛, рдпрд╛рдЪреА рдЦрд╛рддреНрд░реА рдХрд░рд╛ рдХреА рд╡рд░реНрдЪреНрдпреБрдЕрд▓ рд╡рд╛рддрд╛рд╡рд░рдг рд╕рдХреНрд░рд┐рдп рдЖрд╣реЗ. рдирд╕рд▓реНрдпрд╛рд╕, рдЯрд░реНрдорд┐рдирд▓ рдмрдВрдж рдХрд░рд╛ рдЖрдгрд┐ рдкреБрдиреНрд╣рд╛ рддрдпрд╛рд░ рдХрд░рд╛.

1. рдпрд╛ рдЕреЕрдкрдордзреНрдпреЗ `text-to-speech` рдирд╛рд╡рд╛рдЪрд╛ рдирд╡реАрди HTTP рдЯреНрд░рд┐рдЧрд░ рдЦрд╛рд▓реАрд▓ рдХрдорд╛рдВрдб рд╡рд╛рдкрд░реВрди рддрдпрд╛рд░ рдХрд░рд╛:

    ```sh
    func new --name text-to-speech --template "HTTP trigger"
    ```

    рд╣реЗ `text-to-speech` рдирд╛рд╡рд╛рдЪрд╛ HTTP рдЯреНрд░рд┐рдЧрд░ рддрдпрд╛рд░ рдХрд░реЗрд▓.

1. [librosa](https://librosa.org) Pip рдкреЕрдХреЗрдЬрдордзреНрдпреЗ рдСрдбрд┐рдУ рдкреБрдиреНрд╣рд╛ рдирдореБрдирд╛ рдШреЗрдгреНрдпрд╛рд╕рд╛рдареА рдлрдВрдХреНрд╢рдиреНрд╕ рдЖрд╣реЗрдд, рддреНрдпрд╛рдореБрд│реЗ рд╣реЗ `requirements.txt` рдлрд╛рдЗрд▓рдордзреНрдпреЗ рдЬреЛрдбрд╛:

    ```sh
    librosa
    ```

    рдПрдХрджрд╛ рд╣реЗ рдЬреЛрдбрд▓реЗ рдХреА, VS Code рдЯрд░реНрдорд┐рдирд▓рдордзреВрди рдЦрд╛рд▓реАрд▓ рдХрдорд╛рдВрдб рд╡рд╛рдкрд░реВрди Pip рдкреЕрдХреЗрдЬреЗрд╕ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░рд╛:

    ```sh
    pip install -r requirements.txt
    ```

    > тЪая╕П рдЬрд░ рддреБрдореНрд╣реА Linux рд╡рд╛рдкрд░рдд рдЕрд╕рд╛рд▓, рдЬреНрдпрд╛рдордзреНрдпреЗ Raspberry Pi OS рд╕рдорд╛рд╡рд┐рд╖реНрдЯ рдЖрд╣реЗ, рддрд░ рддреБрдореНрд╣рд╛рд▓рд╛ `libsndfile` рдЦрд╛рд▓реАрд▓ рдХрдорд╛рдВрдб рд╡рд╛рдкрд░реВрди рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░рд╛рд╡реЗ рд▓рд╛рдЧреЗрд▓:
    >
    > ```sh
    > sudo apt update
    > sudo apt install libsndfile1-dev
    > ```

1. рдЯреЗрдХреНрд╕реНрдЯрд▓рд╛ рд╕реНрдкреАрдЪрдордзреНрдпреЗ рд░реВрдкрд╛рдВрддрд░рд┐рдд рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА, рддреБрдореНрд╣реА рдереЗрдЯ рд╕реНрдкреАрдЪ API рдХреА рд╡рд╛рдкрд░реВ рд╢рдХрдд рдирд╛рд╣реА, рддреНрдпрд╛рдРрд╡рдЬреА рддреБрдореНрд╣рд╛рд▓рд╛ API рдХреА рд╡рд╛рдкрд░реВрди access token рд╡рд┐рдирдВрддреА рдХрд░рд╛рд╡реА рд▓рд╛рдЧреЗрд▓. `text-to-speech` рдлреЛрд▓реНрдбрд░рдордзреАрд▓ `__init__.py` рдлрд╛рдЗрд▓ рдЙрдШрдбрд╛ рдЖрдгрд┐ рддреНрдпрд╛рддреАрд▓ рд╕рд░реНрд╡ рдХреЛрдб рдЦрд╛рд▓реАрд▓рдкреНрд░рдорд╛рдгреЗ рдмрджрд▓рд╛:

    ```python
    import io
    import os
    import requests
    
    import librosa
    import soundfile as sf
    import azure.functions as func
    
    location = os.environ['SPEECH_LOCATION']
    speech_key = os.environ['SPEECH_KEY']
    
    def get_access_token():
        headers = {
            'Ocp-Apim-Subscription-Key': speech_key
        }
    
        token_endpoint = f'https://{location}.api.cognitive.microsoft.com/sts/v1.0/issuetoken'
        response = requests.post(token_endpoint, headers=headers)
        return str(response.text)
    ```

    рд╣реЗ рд╕реЗрдЯрд┐рдВрдЧреНрдЬрдордзреВрди рд╡рд╛рдЪрд▓реНрдпрд╛ рдЬрд╛рдгрд╛рд▒реНрдпрд╛ рд╕реНрдерд╛рди рдЖрдгрд┐ рд╕реНрдкреАрдЪ рдХреАрд╕рд╛рдареА constants рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддреЗ. рддреНрдпрд╛рдирдВрддрд░ `get_access_token` рдлрдВрдХреНрд╢рди рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддреЗ рдЬреЗ рд╕реНрдкреАрдЪ рд╕рд░реНрд╡реНрд╣рд┐рд╕реЗрд╕рд╕рд╛рдареА access token рдорд┐рд│рд╡реЗрд▓.

1. рдпрд╛ рдХреЛрдбрдЦрд╛рд▓реА рдЦрд╛рд▓реАрд▓ рдЬреЛрдбрд╛:

    ```python
    playback_format = 'riff-48khz-16bit-mono-pcm'

    def main(req: func.HttpRequest) -> func.HttpResponse:
        req_body = req.get_json()
        language = req_body['language']
        voice = req_body['voice']
        text = req_body['text']
    
        url = f'https://{location}.tts.speech.microsoft.com/cognitiveservices/v1'
    
        headers = {
            'Authorization': 'Bearer ' + get_access_token(),
            'Content-Type': 'application/ssml+xml',
            'X-Microsoft-OutputFormat': playback_format
        }
    
        ssml =  f'<speak version=\'1.0\' xml:lang=\'{language}\'>'
        ssml += f'<voice xml:lang=\'{language}\' name=\'{voice}\'>'
        ssml += text
        ssml += '</voice>'
        ssml += '</speak>'
    
        response = requests.post(url, headers=headers, data=ssml.encode('utf-8'))
    
        raw_audio, sample_rate = librosa.load(io.BytesIO(response.content), sr=48000)
        resampled = librosa.resample(raw_audio, sample_rate, 44100)
        
        output_buffer = io.BytesIO()
        sf.write(output_buffer, resampled, 44100, 'PCM_16', format='wav')
        output_buffer.seek(0)
    
        return func.HttpResponse(output_buffer.read(), status_code=200)
    ```

    рд╣реЗ рдЯреЗрдХреНрд╕реНрдЯрд▓рд╛ рд╕реНрдкреАрдЪрдордзреНрдпреЗ рд░реВрдкрд╛рдВрддрд░рд┐рдд рдХрд░рдгрд╛рд░рд╛ HTTP рдЯреНрд░рд┐рдЧрд░ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддреЗ. рд╣реЗ рд░реВрдкрд╛рдВрддрд░рд┐рдд рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдЯреЗрдХреНрд╕реНрдЯ, рднрд╛рд╖рд╛ рдЖрдгрд┐ рдЖрд╡рд╛рдЬ JSON рдмреЙрдбреАрдордзреВрди рдХрд╛рдврддреЗ, SSML рддрдпрд╛рд░ рдХрд░рддреЗ, рдирдВрддрд░ рд╕рдВрдмрдВрдзрд┐рдд REST API рдХреЙрд▓ рдХрд░рддреЗ access token рд╡рд╛рдкрд░реВрди authenticate рдХрд░рдд. рд╣рд╛ REST API рдХреЙрд▓ рдСрдбрд┐рдУ 16-bit, 48KHz mono WAV рдлрд╛рдЗрд▓ рдореНрд╣рдгреВрди рдкрд░рдд рдХрд░рддреЛ, рдЬреНрдпрд╛рдЪреЗ рд╕реНрд╡рд░реВрдк `playback_format` рджреНрд╡рд╛рд░реЗ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХреЗрд▓реЗ рдЬрд╛рддреЗ, рдЬреЗ REST API рдХреЙрд▓рд▓рд╛ рдкрд╛рдард╡рд▓реЗ рдЬрд╛рддреЗ.

    рдирдВрддрд░ `librosa` рджреНрд╡рд╛рд░реЗ 48KHz рдирдореБрдирд╛ рджрд░рд╛рд╡рд░реВрди 44.1KHz рдирдореБрдирд╛ рджрд░рд╛рд╡рд░ рдкреБрдиреНрд╣рд╛ рдирдореБрдирд╛ рдШреЗрддрд▓реЗ рдЬрд╛рддреЗ, рдирдВрддрд░ рд╣рд╛ рдСрдбрд┐рдУ рдмрд╛рдпрдирд░реА рдмрдлрд░рдордзреНрдпреЗ рд╕реЗрд╡реНрд╣ рдХреЗрд▓рд╛ рдЬрд╛рддреЛ рдЬреЛ рдкрд░рдд рджрд┐рд▓рд╛ рдЬрд╛рддреЛ.

1. рддреБрдордЪрд╛ рдлрдВрдХреНрд╢рди рдЕреЕрдк рд╕реНрдерд╛рдирд┐рдХ рдкрд╛рддрд│реАрд╡рд░ рдЪрд╛рд▓рд╡рд╛, рдХрд┐рдВрд╡рд╛ рдХреНрд▓рд╛рдЙрдбрд╡рд░ рддреИрдирд╛рдд рдХрд░рд╛. рддреБрдореНрд╣реА рддреБрдордЪреНрдпрд╛ `text-to-timer` HTTP рдЯреНрд░рд┐рдЧрд░рдЪреА рдЪрд╛рдЪрдгреА рдШреЗрддрд▓реНрдпрд╛рдкреНрд░рдорд╛рдгреЗ curl рд╕рд╛рд░рдЦреНрдпрд╛ рдЯреВрд▓рдЪрд╛ рд╡рд╛рдкрд░ рдХрд░реВрди рд╣реЗ рдХреЙрд▓ рдХрд░реВ рд╢рдХрддрд╛. рднрд╛рд╖рд╛, рдЖрд╡рд╛рдЬ рдЖрдгрд┐ рдЯреЗрдХреНрд╕реНрдЯ JSON рдмреЙрдбреА рдореНрд╣рдгреВрди рдкрд╛рдард╡рд╛:

    ```json
    {
        "language": "<language>",
        "voice": "<voice>",
        "text": "<text>"
    }
    ```

    `<language>` рд▓рд╛ рддреБрдордЪреА рднрд╛рд╖рд╛ рдмрджрд▓рд╛, рдЬрд╕реЗ рдХреА `en-GB`, рдХрд┐рдВрд╡рд╛ `zh-CN`. `<voice>` рд▓рд╛ рддреБрдореНрд╣рд╛рд▓рд╛ рд╣рд╡рд╛ рдЕрд╕рд▓реЗрд▓рд╛ рдЖрд╡рд╛рдЬ рдмрджрд▓рд╛. `<text>` рд▓рд╛ рддреБрдореНрд╣рд╛рд▓рд╛ рд╕реНрдкреАрдЪрдордзреНрдпреЗ рд░реВрдкрд╛рдВрддрд░рд┐рдд рдХрд░рд╛рдпрдЪрд╛ рдЯреЗрдХреНрд╕реНрдЯ рдмрджрд▓рд╛. рддреБрдореНрд╣реА рдЖрдЙрдЯрдкреБрдЯ рдлрд╛рдЗрд▓рдордзреНрдпреЗ рд╕реЗрд╡реНрд╣ рдХрд░реВ рд╢рдХрддрд╛ рдЖрдгрд┐ WAV рдлрд╛рдЗрд▓ рдкреНрд▓реЗ рдХрд░реВ рд╢рдХрдгрд╛рд▒реНрдпрд╛ рдХреЛрдгрддреНрдпрд╛рд╣реА рдСрдбрд┐рдУ рдкреНрд▓реЗрдпрд░рджреНрд╡рд╛рд░реЗ рдкреНрд▓реЗ рдХрд░реВ рд╢рдХрддрд╛.

    рдЙрджрд╛рд╣рд░рдгрд╛рд░реНрде, "Hello" US English рдордзреНрдпреЗ Jenny Neural рдЖрд╡рд╛рдЬ рд╡рд╛рдкрд░реВрди рд╕реНрдкреАрдЪрдордзреНрдпреЗ рд░реВрдкрд╛рдВрддрд░рд┐рдд рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА, рдлрдВрдХреНрд╢рди рдЕреЕрдк рд╕реНрдерд╛рдирд┐рдХ рдкрд╛рддрд│реАрд╡рд░ рдЪрд╛рд▓реВ рдЕрд╕рд▓реНрдпрд╛рд╕, рддреБрдореНрд╣реА рдЦрд╛рд▓реАрд▓ curl рдХрдорд╛рдВрдб рд╡рд╛рдкрд░реВ рд╢рдХрддрд╛:

    ```sh
    curl -X GET 'http://localhost:7071/api/text-to-speech' \
         -H 'Content-Type: application/json' \
         -o hello.wav \
         -d '{
           "language":"en-US",
           "voice": "en-US-JennyNeural",
           "text": "Hello"
         }'
    ```

    рд╣реЗ рдСрдбрд┐рдУ `hello.wav` рдирд╛рд╡рд╛рдиреЗ рд╡рд░реНрддрдорд╛рди рдбрд┐рд░реЗрдХреНрдЯрд░реАрдордзреНрдпреЗ рд╕реЗрд╡реНрд╣ рдХрд░реЗрд▓.

> ЁЯТБ рддреБрдореНрд╣реА рд╣рд╛ рдХреЛрдб [code-spoken-response/functions](../../../../../6-consumer/lessons/3-spoken-feedback/code-spoken-response/functions) рдлреЛрд▓реНрдбрд░рдордзреНрдпреЗ рд╢реЛрдзреВ рд╢рдХрддрд╛.

### рдХрд╛рд░реНрдп - Wio Terminal рд╡рд░реВрди рд╕реНрдкреАрдЪ рдорд┐рд│рд╡рд╛

1. рдЬрд░ `smart-timer` рдкреНрд░рдХрд▓реНрдк рдЙрдШрдбрд▓реЗрд▓рд╛ рдирд╕реЗрд▓ рддрд░ VS Code рдордзреНрдпреЗ рдЙрдШрдбрд╛.

1. `config.h` рд╣реЗрдбрд░ рдлрд╛рдЗрд▓ рдЙрдШрдбрд╛ рдЖрдгрд┐ рддреБрдордЪреНрдпрд╛ рдлрдВрдХреНрд╢рди рдЕреЕрдкрд╕рд╛рдареА URL рдЬреЛрдбрд╛:

    ```cpp
    const char *TEXT_TO_SPEECH_FUNCTION_URL = "<URL>";
    ```

    `<URL>` рд▓рд╛ рддреБрдордЪреНрдпрд╛ рдлрдВрдХреНрд╢рди рдЕреЕрдкрд╡рд░реАрд▓ `text-to-speech` HTTP рдЯреНрд░рд┐рдЧрд░рд╕рд╛рдареА URL рдиреЗ рдмрджрд▓рд╛. рд╣реЗ `TEXT_TO_TIMER_FUNCTION_URL` рдЪреНрдпрд╛ рдореВрд▓реНрдпрд╛рд╕рд╛рд░рдЦреЗрдЪ рдЕрд╕реЗрд▓, рдлрдХреНрдд рдлрдВрдХреНрд╢рдирдЪреЗ рдирд╛рд╡ `text-to-timer` рдРрд╡рдЬреА `text-to-speech` рдЕрд╕реЗрд▓.

1. `text_to_speech.h` рд╣реЗрдбрд░ рдлрд╛рдЗрд▓ рдЙрдШрдбрд╛, рдЖрдгрд┐ `TextToSpeech` рдХреНрд▓рд╛рд╕рдЪреНрдпрд╛ `public` рд╡рд┐рднрд╛рдЧрд╛рдд рдЦрд╛рд▓реАрд▓ рдореЗрдердб рдЬреЛрдбрд╛:

    ```cpp
    void convertTextToSpeech(String text)
    {
    }
    ```

1. `convertTextToSpeech` рдореЗрдердбрдордзреНрдпреЗ, рдлрдВрдХреНрд╢рди рдЕреЕрдкрд▓рд╛ рдкрд╛рдард╡рдгреНрдпрд╛рд╕рд╛рдареА JSON рддрдпрд╛рд░ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдЦрд╛рд▓реАрд▓ рдХреЛрдб рдЬреЛрдбрд╛:

    ```cpp
    DynamicJsonDocument doc(1024);
    doc["language"] = LANGUAGE;
    doc["voice"] = _voice;
    doc["text"] = text;

    String body;
    serializeJson(doc, body);
    ```

    рд╣реЗ рднрд╛рд╖рд╛, рдЖрд╡рд╛рдЬ рдЖрдгрд┐ рдЯреЗрдХреНрд╕реНрдЯ JSON рджрд╕реНрддрдРрд╡рдЬрд╛рдд рд▓рд┐рд╣рд┐рддреЗ, рдирдВрддрд░ рддреНрдпрд╛рд▓рд╛ рд╕реНрдЯреНрд░рд┐рдВрдЧрдордзреНрдпреЗ serializes рдХрд░рддреЗ.

1. рдпрд╛рдЦрд╛рд▓реА, рдлрдВрдХреНрд╢рди рдЕреЕрдкрд▓рд╛ рдХреЙрд▓ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдЦрд╛рд▓реАрд▓ рдХреЛрдб рдЬреЛрдбрд╛:

    ```cpp
    HTTPClient httpClient;
    httpClient.begin(_client, TEXT_TO_SPEECH_FUNCTION_URL);

    int httpResponseCode = httpClient.POST(body);
    ```

    рд╣реЗ рдПрдХ HTTPClient рддрдпрд╛рд░ рдХрд░рддреЗ, рдирдВрддрд░ JSON рджрд╕реНрддрдРрд╡рдЬ рд╡рд╛рдкрд░реВрди text-to-speech HTTP рдЯреНрд░рд┐рдЧрд░рд▓рд╛ POST рд╡рд┐рдирдВрддреА рдХрд░рддреЗ.

1. рдЬрд░ рдХреЙрд▓ рдпрд╢рд╕реНрд╡реА рдЭрд╛рд▓рд╛, рддрд░ рдлрдВрдХреНрд╢рди рдЕреЕрдк рдХреЙрд▓рджреНрд╡рд╛рд░реЗ рдкрд░рдд рджрд┐рд▓реЗрд▓рд╛ рдХрдЪреНрдЪрд╛ рдмрд╛рдпрдирд░реА рдбреЗрдЯрд╛ SD рдХрд╛рд░реНрдбрд╡рд░реАрд▓ рдлрд╛рдЗрд▓рдордзреНрдпреЗ рд╕реНрдЯреНрд░реАрдо рдХреЗрд▓рд╛ рдЬрд╛рдК рд╢рдХрддреЛ. рд╣реЗ рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдЦрд╛рд▓реАрд▓ рдХреЛрдб рдЬреЛрдбрд╛:

    ```cpp
    if (httpResponseCode == 200)
    {            
        File wav_file = SD.open("SPEECH.WAV", FILE_WRITE);
        httpClient.writeToStream(&wav_file);
        wav_file.close();
    }
    else
    {
        Serial.print("Failed to get speech - error ");
        Serial.println(httpResponseCode);
    }
    ```

    рд╣рд╛ рдХреЛрдб рдкреНрд░рддрд┐рд╕рд╛рдж рддрдкрд╛рд╕рддреЛ, рдЖрдгрд┐ рдЬрд░ рддреЛ 200 (рдпрд╢рд╕реНрд╡реА) рдЕрд╕реЗрд▓, рддрд░ рдмрд╛рдпрдирд░реА рдбреЗрдЯрд╛ SD рдХрд╛рд░реНрдбрдЪреНрдпрд╛ рдореВрд│ рдлреЛрд▓реНрдбрд░рдордзреНрдпреЗ `SPEECH.WAV` рдирд╛рд╡рд╛рдЪреНрдпрд╛ рдлрд╛рдЗрд▓рдордзреНрдпреЗ рд╕реНрдЯреНрд░реАрдо рдХреЗрд▓рд╛ рдЬрд╛рддреЛ.

1. рдпрд╛ рдореЗрдердбрдЪреНрдпрд╛ рд╢реЗрд╡рдЯреА, HTTP рдХрдиреЗрдХреНрд╢рди рдмрдВрдж рдХрд░рд╛:

    ```cpp
    httpClient.end();
    ```

1. рдЖрддрд╛ рдмреЛрд▓рд╛рдпрдЪрд╛ рдЯреЗрдХреНрд╕реНрдЯ рдСрдбрд┐рдУрдордзреНрдпреЗ рд░реВрдкрд╛рдВрддрд░рд┐рдд рдХреЗрд▓рд╛ рдЬрд╛рдК рд╢рдХрддреЛ. `main.cpp` рдлрд╛рдЗрд▓рдордзреНрдпреЗ, `say` рдлрдВрдХреНрд╢рдирдЪреНрдпрд╛ рд╢реЗрд╡рдЯреА рдЦрд╛рд▓реАрд▓ рдУрд│ рдЬреЛрдбрд╛, рдЬреНрдпрд╛рдореБрд│реЗ рдмреЛрд▓рд╛рдпрдЪрд╛ рдЯреЗрдХреНрд╕реНрдЯ рдСрдбрд┐рдУрдордзреНрдпреЗ рд░реВрдкрд╛рдВрддрд░рд┐рдд рд╣реЛрдИрд▓:
```cpp
    textToSpeech.convertTextToSpeech(text);
    ```

### рдХрд╛рд░реНрдп - рддреБрдордЪреНрдпрд╛ Wio Terminal рд╡рд░ рдСрдбрд┐рдУ рдкреНрд▓реЗ рдХрд░рд╛

**рд▓рд╡рдХрд░рдЪ рдпреЗрдд рдЖрд╣реЗ**

## рддреБрдордЪреЗ functions app рдХреНрд▓рд╛рдЙрдбрд╡рд░ рддреИрдирд╛рдд рдХрд░рдгреЗ

рддреБрдордЪреЗ functions app рд╕реНрдерд╛рдирд┐рдХ рд╕реНрддрд░рд╛рд╡рд░ рдЪрд╛рд▓рд╡рдгреНрдпрд╛рдЪреЗ рдХрд╛рд░рдг рдореНрд╣рдгрдЬреЗ `librosa` Pip рдкреЕрдХреЗрдЬрд▓рд╛ рд▓рд┐рдирдХреНрд╕рд╡рд░ рдЕрд╢рд╛ рд▓рд╛рдпрдмреНрд░рд░реАрдЪреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдЕрд╕рддреЗ рдЬреА рдбреАрдлреЙрд▓реНрдЯрдиреЗ рд╕реНрдерд╛рдкрд┐рдд рдХреЗрд▓реЗрд▓реА рдирд╕рддреЗ, рдЖрдгрд┐ рддреА рд▓рд╛рдпрдмреНрд░рд░реА рд╕реНрдерд╛рдкрд┐рдд рдХреЗрд▓реНрдпрд╛рд╢рд┐рд╡рд╛рдп function app рдЪрд╛рд▓рд╡рддрд╛ рдпреЗрдд рдирд╛рд╣реА. Function apps рд╣реЗ serverless рдЕрд╕рддрд╛рдд - рддреБрдореНрд╣реА рд╕реНрд╡рддрдГ рд╡реНрдпрд╡рд╕реНрдерд╛рдкрд┐рдд рдХрд░реВ рд╢рдХрдгрд╛рд░реЗ рд╕рд░реНрд╡реНрд╣рд░ рдирд╕рддрд╛рдд, рддреНрдпрд╛рдореБрд│реЗ рд╣реА рд▓рд╛рдпрдмреНрд░рд░реА рдЖрдзреАрдЪ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдгреНрдпрд╛рдЪрд╛ рдХреЛрдгрддрд╛рд╣реА рдорд╛рд░реНрдЧ рдЙрдкрд▓рдмреНрдз рдирд╕рддреЛ.

рдпрд╛рд╕рд╛рдареА рдкрд░реНрдпрд╛рдп рдореНрд╣рдгрдЬреЗ рддреБрдордЪреЗ functions app Docker рдХрдВрдЯреЗрдирд░ рд╡рд╛рдкрд░реВрди рддреИрдирд╛рдд рдХрд░рдгреЗ. рдХреНрд▓рд╛рдЙрдб рдирд╡реАрди instance рддрдпрд╛рд░ рдХрд░рдгреНрдпрд╛рдЪреА рдЧрд░рдЬ рднрд╛рд╕рд▓реНрдпрд╛рд╡рд░ (рдЙрджрд╛рд╣рд░рдгрд╛рд░реНрде, рдорд╛рдЧрдгреА рдЙрдкрд▓рдмреНрдз рд╕рдВрд╕рд╛рдзрдирд╛рдВрдкреЗрдХреНрд╖рд╛ рдЬрд╛рд╕реНрдд рдЕрд╕рд▓реНрдпрд╛рд╕ рдХрд┐рдВрд╡рд╛ function app рдмрд░рд╛рдЪ рд╡реЗрд│ рд╡рд╛рдкрд░рд▓реЗ рдЧреЗрд▓реЗ рдирд╕рд▓реНрдпрд╛рдореБрд│реЗ рдмрдВрдж рдЭрд╛рд▓реЗ рдЕрд╕рд▓реНрдпрд╛рд╕) рд╣реЗ рдХрдВрдЯреЗрдирд░ рддреИрдирд╛рдд рдХреЗрд▓реЗ рдЬрд╛рддреЗ.

рддреБрдореНрд╣реА Microsoft Docs рд╡рд░ [рд▓рд┐рдирдХреНрд╕рд╡рд░ рдХрд╕реНрдЯрдо рдХрдВрдЯреЗрдирд░ рд╡рд╛рдкрд░реВрди function рддрдпрд╛рд░ рдХрд░рдгреНрдпрд╛рдЪреЗ рджрд╕реНрддрдРрд╡рдЬ](https://docs.microsoft.com/azure/azure-functions/functions-create-function-linux-custom-image?WT.mc_id=academic-17441-jabenn&tabs=bash%2Cazurecli&pivots=programming-language-python) рдордзреНрдпреЗ function app рд╕реЗрдЯ рдЕрдк рдХрд░рдгреНрдпрд╛рдЪреЗ рдЖрдгрд┐ Docker рджреНрд╡рд╛рд░реЗ рддреИрдирд╛рдд рдХрд░рдгреНрдпрд╛рдЪреЗ рдирд┐рд░реНрджреЗрд╢ рд╢реЛрдзреВ рд╢рдХрддрд╛.

рдПрдХрджрд╛ рд╣реЗ рддреИрдирд╛рдд рдЭрд╛рд▓реНрдпрд╛рд╡рд░, рддреБрдореНрд╣реА рддреБрдордЪрд╛ Wio Terminal рдХреЛрдб рдпрд╛ function рд▓рд╛ access рдХрд░рдгреНрдпрд╛рд╕рд╛рдареА рдкреЛрд░реНрдЯ рдХрд░реВ рд╢рдХрддрд╛:

1. Azure Functions рдкреНрд░рдорд╛рдгрдкрддреНрд░ `config.h` рдордзреНрдпреЗ рдЬреЛрдбрд╛:

    ```cpp
    const char *FUNCTIONS_CERTIFICATE =
        "-----BEGIN CERTIFICATE-----\r\n"
        "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\r\n"
        "-----END CERTIFICATE-----\r\n";
    ```

1. `<WiFiClient.h>` рдЪрд╛ рд╕рдорд╛рд╡реЗрд╢ рдмрджрд▓реВрди `<WiFiClientSecure.h>` рдХрд░рд╛.

1. рд╕рд░реНрд╡ `WiFiClient` рдлреАрд▓реНрдбреНрд╕ рдмрджрд▓реВрди `WiFiClientSecure` рдХрд░рд╛.

1. рдЬреНрдпрд╛ рдкреНрд░рддреНрдпреЗрдХ class рдордзреНрдпреЗ `WiFiClientSecure` рдлреАрд▓реНрдб рдЖрд╣реЗ, рддреНрдпрд╛ class рдордзреНрдпреЗ рдПрдХ constructor рдЬреЛрдбрд╛ рдЖрдгрд┐ рддреНрдпрд╛ constructor рдордзреНрдпреЗ рдкреНрд░рдорд╛рдгрдкрддреНрд░ рд╕реЗрдЯ рдХрд░рд╛:

    ```cpp
    _client.setCACert(FUNCTIONS_CERTIFICATE);
    ```

---

**рдЕрд╕реНрд╡реАрдХрд░рдг**:  
рд╣рд╛ рджрд╕реНрддрдРрд╡рдЬ AI рднрд╛рд╖рд╛рдВрддрд░ рд╕реЗрд╡рд╛ [Co-op Translator](https://github.com/Azure/co-op-translator) рд╡рд╛рдкрд░реВрди рднрд╛рд╖рд╛рдВрддрд░рд┐рдд рдХрд░рдгреНрдпрд╛рдд рдЖрд▓рд╛ рдЖрд╣реЗ. рдЖрдореНрд╣реА рдЕрдЪреВрдХрддреЗрд╕рд╛рдареА рдкреНрд░рдпрддреНрдирд╢реАрд▓ рдЕрд╕рд▓реЛ рддрд░реА рдХреГрдкрдпрд╛ рд▓рдХреНрд╖рд╛рдд рдареЗрд╡рд╛ рдХреА рд╕реНрд╡рдпрдВрдЪрд▓рд┐рдд рднрд╛рд╖рд╛рдВрддрд░реЗ рддреНрд░реБрдЯреА рдХрд┐рдВрд╡рд╛ рдЕрдЪреВрдХрддреЗрдЪреНрдпрд╛ рдЕрднрд╛рд╡рд╛рдиреЗ рдпреБрдХреНрдд рдЕрд╕реВ рд╢рдХрддрд╛рдд. рдореВрд│ рднрд╛рд╖реЗрддреАрд▓ рджрд╕реНрддрдРрд╡рдЬ рд╣рд╛ рдЕрдзрд┐рдХреГрдд рд╕реНрд░реЛрдд рдорд╛рдирд▓рд╛ рдЬрд╛рд╡рд╛. рдорд╣рддреНрддреНрд╡рд╛рдЪреНрдпрд╛ рдорд╛рд╣рд┐рддреАрд╕рд╛рдареА рд╡реНрдпрд╛рд╡рд╕рд╛рдпрд┐рдХ рдорд╛рдирд╡реА рднрд╛рд╖рд╛рдВрддрд░рд╛рдЪреА рд╢рд┐рдлрд╛рд░рд╕ рдХреЗрд▓реА рдЬрд╛рддреЗ. рдпрд╛ рднрд╛рд╖рд╛рдВрддрд░рд╛рдЪрд╛ рд╡рд╛рдкрд░ рдХрд░реВрди рдЙрджреНрднрд╡рд▓реЗрд▓реНрдпрд╛ рдХреЛрдгрддреНрдпрд╛рд╣реА рдЧреИрд░рд╕рдордЬ рдХрд┐рдВрд╡рд╛ рдЪреБрдХреАрдЪреНрдпрд╛ рдЕрд░реНрдерд╛рд╕рд╛рдареА рдЖрдореНрд╣реА рдЬрдмрд╛рдмрджрд╛рд░ рд░рд╛рд╣рдгрд╛рд░ рдирд╛рд╣реА.