<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "0ac0afcfb40cb5970ef4cb74f01c32e9",
  "translation_date": "2025-08-28T09:12:29+00:00",
  "source_file": "6-consumer/lessons/1-speech-recognition/pi-audio.md",
  "language_code": "bg"
}
-->
# –ó–∞–ø–∏—Å –Ω–∞ –∞—É–¥–∏–æ - Raspberry Pi

–í —Ç–∞–∑–∏ —á–∞—Å—Ç –æ—Ç —É—Ä–æ–∫–∞ —â–µ –Ω–∞–ø–∏—à–µ—Ç–µ –∫–æ–¥ –∑–∞ –∑–∞–ø–∏—Å –Ω–∞ –∞—É–¥–∏–æ –Ω–∞ –≤–∞—à–∏—è Raspberry Pi. –ó–∞–ø–∏—Å—ä—Ç –Ω–∞ –∞—É–¥–∏–æ —â–µ —Å–µ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–∞ —á—Ä–µ–∑ –±—É—Ç–æ–Ω.

## –•–∞—Ä–¥—É–µ—Ä

Raspberry Pi —Å–µ –Ω—É–∂–¥–∞–µ –æ—Ç –±—É—Ç–æ–Ω, –∑–∞ –¥–∞ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–∞ –∑–∞–ø–∏—Å–∞ –Ω–∞ –∞—É–¥–∏–æ.

–ë—É—Ç–æ–Ω—ä—Ç, –∫–æ–π—Ç–æ —â–µ –∏–∑–ø–æ–ª–∑–≤–∞—Ç–µ, –µ Grove –±—É—Ç–æ–Ω. –¢–æ–≤–∞ –µ —Ü–∏—Ñ—Ä–æ–≤ —Å–µ–Ω–∑–æ—Ä, –∫–æ–π—Ç–æ –≤–∫–ª—é—á–≤–∞ –∏–ª–∏ –∏–∑–∫–ª—é—á–≤–∞ —Å–∏–≥–Ω–∞–ª. –¢–µ–∑–∏ –±—É—Ç–æ–Ω–∏ –º–æ–≥–∞—Ç –¥–∞ –±—ä–¥–∞—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–∞–Ω–∏ –¥–∞ –∏–∑–ø—Ä–∞—â–∞—Ç –≤–∏—Å–æ–∫ —Å–∏–≥–Ω–∞–ª, –∫–æ–≥–∞—Ç–æ –±—É—Ç–æ–Ω—ä—Ç –µ –Ω–∞—Ç–∏—Å–Ω–∞—Ç, –∏ –Ω–∏—Å—ä–∫, –∫–æ–≥–∞—Ç–æ –Ω–µ –µ, –∏–ª–∏ –Ω–∏—Å—ä–∫, –∫–æ–≥–∞—Ç–æ –µ –Ω–∞—Ç–∏—Å–Ω–∞—Ç, –∏ –≤–∏—Å–æ–∫, –∫–æ–≥–∞—Ç–æ –Ω–µ –µ.

–ê–∫–æ –∏–∑–ø–æ–ª–∑–≤–∞—Ç–µ ReSpeaker 2-Mics Pi HAT –∫–∞—Ç–æ –º–∏–∫—Ä–æ—Ñ–æ–Ω, –Ω—è–º–∞ –Ω—É–∂–¥–∞ –¥–∞ —Å–≤—ä—Ä–∑–≤–∞—Ç–µ –±—É—Ç–æ–Ω, —Ç—ä–π –∫–∞—Ç–æ —Ç–æ–∑–∏ HAT –≤–µ—á–µ –∏–º–∞ –≤–≥—Ä–∞–¥–µ–Ω –±—É—Ç–æ–Ω. –ü—Ä–æ–ø—É—Å–Ω–µ—Ç–µ –∫—ä–º —Å–ª–µ–¥–≤–∞—â–∏—è —Ä–∞–∑–¥–µ–ª.

### –°–≤—ä—Ä–∑–≤–∞–Ω–µ –Ω–∞ –±—É—Ç–æ–Ω–∞

–ë—É—Ç–æ–Ω—ä—Ç –º–æ–∂–µ –¥–∞ –±—ä–¥–µ —Å–≤—ä—Ä–∑–∞–Ω –∫—ä–º Grove –±–∞–∑–æ–≤–∏—è HAT.

#### –ó–∞–¥–∞—á–∞ - —Å–≤—ä—Ä–∂–µ—Ç–µ –±—É—Ç–æ–Ω–∞

![Grove –±—É—Ç–æ–Ω](../../../../../translated_images/grove-button.a70cfbb809a8563681003250cf5b06d68cdcc68624f9e2f493d5a534ae2da1e5.bg.png)

1. –ü–æ—Å—Ç–∞–≤–µ—Ç–µ –µ–¥–∏–Ω–∏—è –∫—Ä–∞–π –Ω–∞ Grove –∫–∞–±–µ–ª–∞ –≤ –≥–Ω–µ–∑–¥–æ—Ç–æ –Ω–∞ –º–æ–¥—É–ªa –Ω–∞ –±—É—Ç–æ–Ω–∞. –ö–∞–±–µ–ª—ä—Ç –º–æ–∂–µ –¥–∞ –±—ä–¥–µ –ø–æ—Å—Ç–∞–≤–µ–Ω —Å–∞–º–æ –≤ –µ–¥–Ω–∞ –ø–æ—Å–æ–∫–∞.

1. –° –∏–∑–∫–ª—é—á–µ–Ω Raspberry Pi, —Å–≤—ä—Ä–∂–µ—Ç–µ –¥—Ä—É–≥–∏—è –∫—Ä–∞–π –Ω–∞ Grove –∫–∞–±–µ–ª–∞ –∫—ä–º —Ü–∏—Ñ—Ä–æ–≤–æ—Ç–æ –≥–Ω–µ–∑–¥–æ, –º–∞—Ä–∫–∏—Ä–∞–Ω–æ **D5** –Ω–∞ Grove –±–∞–∑–æ–≤–∏—è HAT, –ø—Ä–∏–∫—Ä–µ–ø–µ–Ω –∫—ä–º Pi. –¢–æ–≤–∞ –≥–Ω–µ–∑–¥–æ –µ –≤—Ç–æ—Ä–æ—Ç–æ –æ—Ç–ª—è–≤–æ, –Ω–∞ —Ä–µ–¥–∞ —Å –≥–Ω–µ–∑–¥–∞ –¥–æ GPIO –ø–∏–Ω–æ–≤–µ—Ç–µ.

![Grove –±—É—Ç–æ–Ω, —Å–≤—ä—Ä–∑–∞–Ω –∫—ä–º –≥–Ω–µ–∑–¥–æ D5](../../../../../translated_images/pi-button.c7a1a4f55943341ce1baf1057658e9a205804d4131d258e820c93f951df0abf3.bg.png)

## –ó–∞–ø–∏—Å –Ω–∞ –∞—É–¥–∏–æ

–ú–æ–∂–µ—Ç–µ –¥–∞ –∑–∞–ø–∏—Å–≤–∞—Ç–µ –∞—É–¥–∏–æ –æ—Ç –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞, –∏–∑–ø–æ–ª–∑–≤–∞–π–∫–∏ Python –∫–æ–¥.

### –ó–∞–¥–∞—á–∞ - –∑–∞–ø–∏—Å –Ω–∞ –∞—É–¥–∏–æ

1. –í–∫–ª—é—á–µ—Ç–µ Pi –∏ –∏–∑—á–∞–∫–∞–π—Ç–µ –¥–∞ —Å–µ –∑–∞—Ä–µ–¥–∏.

1. –°—Ç–∞—Ä—Ç–∏—Ä–∞–π—Ç–µ VS Code, –¥–∏—Ä–µ–∫—Ç–Ω–æ –Ω–∞ Pi –∏–ª–∏ —á—Ä–µ–∑ Remote SSH —Ä–∞–∑—à–∏—Ä–µ–Ω–∏–µ—Ç–æ.

1. PyAudio Pip –ø–∞–∫–µ—Ç—ä—Ç –∏–º–∞ —Ñ—É–Ω–∫—Ü–∏–∏ –∑–∞ –∑–∞–ø–∏—Å –∏ –≤—ä–∑–ø—Ä–æ–∏–∑–≤–µ–∂–¥–∞–Ω–µ –Ω–∞ –∞—É–¥–∏–æ. –¢–æ–∑–∏ –ø–∞–∫–µ—Ç –∑–∞–≤–∏—Å–∏ –æ—Ç –Ω—è–∫–æ–∏ –∞—É–¥–∏–æ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏, –∫–æ–∏—Ç–æ —Ç—Ä—è–±–≤–∞ –¥–∞ –±—ä–¥–∞—Ç –∏–Ω—Å—Ç–∞–ª–∏—Ä–∞–Ω–∏ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª–Ω–æ. –ò–∑–ø—ä–ª–Ω–µ—Ç–µ —Å–ª–µ–¥–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥–∏ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞, –∑–∞ –¥–∞ –≥–∏ –∏–Ω—Å—Ç–∞–ª–∏—Ä–∞—Ç–µ:

    ```sh
    sudo apt update
    sudo apt install libportaudio0 libportaudio2 libportaudiocpp0 portaudio19-dev libasound2-plugins --yes 
    ```

1. –ò–Ω—Å—Ç–∞–ª–∏—Ä–∞–π—Ç–µ PyAudio Pip –ø–∞–∫–µ—Ç–∞.

    ```sh
    pip3 install pyaudio
    ```

1. –°—ä–∑–¥–∞–π—Ç–µ –Ω–æ–≤–∞ –ø–∞–ø–∫–∞, –Ω–∞—Ä–µ—á–µ–Ω–∞ `smart-timer`, –∏ –¥–æ–±–∞–≤–µ—Ç–µ —Ñ–∞–π–ª, –Ω–∞—Ä–µ—á–µ–Ω `app.py`, –≤ —Ç–∞–∑–∏ –ø–∞–ø–∫–∞.

1. –î–æ–±–∞–≤–µ—Ç–µ —Å–ª–µ–¥–Ω–∏—Ç–µ –∏–º–ø–æ—Ä—Ç–∏ –≤ –Ω–∞—á–∞–ª–æ—Ç–æ –Ω–∞ —Ñ–∞–π–ª–∞:

    ```python
    import io
    import pyaudio
    import time
    import wave
    
    from grove.factory import Factory
    ```

    –¢–æ–≤–∞ –∏–º–ø–æ—Ä—Ç–∏—Ä–∞ –º–æ–¥—É–ª–∞ `pyaudio`, –Ω—è–∫–æ–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏ Python –º–æ–¥—É–ª–∏ –∑–∞ —Ä–∞–±–æ—Ç–∞ —Å wave —Ñ–∞–π–ª–æ–≤–µ –∏ –º–æ–¥—É–ª–∞ `grove.factory` –∑–∞ —Å—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ –∫–ª–∞—Å –∑–∞ –±—É—Ç–æ–Ω.

1. –ü–æ–¥ —Ç–æ–≤–∞ –¥–æ–±–∞–≤–µ—Ç–µ –∫–æ–¥ –∑–∞ —Å—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ Grove –±—É—Ç–æ–Ω.

    –ê–∫–æ –∏–∑–ø–æ–ª–∑–≤–∞—Ç–µ ReSpeaker 2-Mics Pi HAT, –∏–∑–ø–æ–ª–∑–≤–∞–π—Ç–µ —Å–ª–µ–¥–Ω–∏—è –∫–æ–¥:

    ```python
    # The button on the ReSpeaker 2-Mics Pi HAT
    button = Factory.getButton("GPIO-LOW", 17)
    ```

    –¢–æ–≤–∞ —Å—ä–∑–¥–∞–≤–∞ –±—É—Ç–æ–Ω –Ω–∞ –ø–æ—Ä—Ç **D17**, –ø–æ—Ä—Ç—ä—Ç, –∫—ä–º –∫–æ–π—Ç–æ –µ —Å–≤—ä—Ä–∑–∞–Ω –±—É—Ç–æ–Ω—ä—Ç –Ω–∞ ReSpeaker 2-Mics Pi HAT. –¢–æ–∑–∏ –±—É—Ç–æ–Ω –µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–∞ –∏–∑–ø—Ä–∞—â–∞ –Ω–∏—Å—ä–∫ —Å–∏–≥–Ω–∞–ª, –∫–æ–≥–∞—Ç–æ –µ –Ω–∞—Ç–∏—Å–Ω–∞—Ç.

    –ê–∫–æ –Ω–µ –∏–∑–ø–æ–ª–∑–≤–∞—Ç–µ ReSpeaker 2-Mics Pi HAT, –∞ Grove –±—É—Ç–æ–Ω, —Å–≤—ä—Ä–∑–∞–Ω –∫—ä–º –±–∞–∑–æ–≤–∏—è HAT, –∏–∑–ø–æ–ª–∑–≤–∞–π—Ç–µ —Ç–æ–∑–∏ –∫–æ–¥:

    ```python
    button = Factory.getButton("GPIO-HIGH", 5)
    ```

    –¢–æ–≤–∞ —Å—ä–∑–¥–∞–≤–∞ –±—É—Ç–æ–Ω –Ω–∞ –ø–æ—Ä—Ç **D5**, –∫–æ–π—Ç–æ –µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–∞ –∏–∑–ø—Ä–∞—â–∞ –≤–∏—Å–æ–∫ —Å–∏–≥–Ω–∞–ª, –∫–æ–≥–∞—Ç–æ –µ –Ω–∞—Ç–∏—Å–Ω–∞—Ç.

1. –ü–æ–¥ —Ç–æ–≤–∞ —Å—ä–∑–¥–∞–π—Ç–µ –∏–Ω—Å—Ç–∞–Ω—Ü–∏—è –Ω–∞ –∫–ª–∞—Å–∞ PyAudio –∑–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –∞—É–¥–∏–æ:

    ```python
    audio = pyaudio.PyAudio()
    ```

1. –î–µ–∫–ª–∞—Ä–∏—Ä–∞–π—Ç–µ –Ω–æ–º–µ—Ä–∞ –Ω–∞ —Ö–∞—Ä–¥—É–µ—Ä–Ω–∞—Ç–∞ –∫–∞—Ä—Ç–∞ –∑–∞ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ –∏ –≤–∏—Å–æ–∫–æ–≥–æ–≤–æ—Ä–∏—Ç–µ–ª—è. –¢–æ–≤–∞ —â–µ –±—ä–¥–µ –Ω–æ–º–µ—Ä—ä—Ç –Ω–∞ –∫–∞—Ä—Ç–∞—Ç–∞, –∫–æ–π—Ç–æ –æ—Ç–∫—Ä–∏—Ö—Ç–µ, –∫–∞—Ç–æ –∏–∑–ø—ä–ª–Ω–∏—Ö—Ç–µ `arecord -l` –∏ `aplay -l` –ø–æ-—Ä–∞–Ω–æ –≤ —É—Ä–æ–∫–∞.

    ```python
    microphone_card_number = <microphone card number>
    speaker_card_number = <speaker card number>
    ```

    –ó–∞–º–µ–Ω–µ—Ç–µ `<microphone card number>` —Å –Ω–æ–º–µ—Ä–∞ –Ω–∞ –∫–∞—Ä—Ç–∞—Ç–∞ –Ω–∞ –≤–∞—à–∏—è –º–∏–∫—Ä–æ—Ñ–æ–Ω.

    –ó–∞–º–µ–Ω–µ—Ç–µ `<speaker card number>` —Å –Ω–æ–º–µ—Ä–∞ –Ω–∞ –∫–∞—Ä—Ç–∞—Ç–∞ –Ω–∞ –≤–∞—à–∏—è –≤–∏—Å–æ–∫–æ–≥–æ–≤–æ—Ä–∏—Ç–µ–ª, —Å—ä—â–∏—è –Ω–æ–º–µ—Ä, –∫–æ–π—Ç–æ –∑–∞–¥–∞–¥–æ—Ö—Ç–µ –≤ —Ñ–∞–π–ª–∞ `alsa.conf`.

1. –ü–æ–¥ —Ç–æ–≤–∞ –¥–µ–∫–ª–∞—Ä–∏—Ä–∞–π—Ç–µ —á–µ—Å—Ç–æ—Ç–∞—Ç–∞ –Ω–∞ —Å–µ–º–ø–ª–∏—Ä–∞–Ω–µ –∑–∞ –∑–∞–ø–∏—Å–∞ –∏ –≤—ä–∑–ø—Ä–æ–∏–∑–≤–µ–∂–¥–∞–Ω–µ—Ç–æ –Ω–∞ –∞—É–¥–∏–æ. –ú–æ–∂–µ –¥–∞ —Å–µ –Ω–∞–ª–æ–∂–∏ –¥–∞ –ø—Ä–æ–º–µ–Ω–∏—Ç–µ —Ç–æ–≤–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç –æ—Ç —Ö–∞—Ä–¥—É–µ—Ä–∞, –∫–æ–π—Ç–æ –∏–∑–ø–æ–ª–∑–≤–∞—Ç–µ.

    ```python
    rate = 48000 #48KHz
    ```

    –ê–∫–æ –ø–æ–ª—É—á–∏—Ç–µ –≥—Ä–µ—à–∫–∏, —Å–≤—ä—Ä–∑–∞–Ω–∏ —Å —á–µ—Å—Ç–æ—Ç–∞—Ç–∞ –Ω–∞ —Å–µ–º–ø–ª–∏—Ä–∞–Ω–µ, –∫–æ–≥–∞—Ç–æ –∏–∑–ø—ä–ª–Ω—è–≤–∞—Ç–µ —Ç–æ–∑–∏ –∫–æ–¥, –ø—Ä–æ–º–µ–Ω–µ—Ç–µ —Å—Ç–æ–π–Ω–æ—Å—Ç—Ç–∞ –Ω–∞ `44100` –∏–ª–∏ `16000`. –ö–æ–ª–∫–æ—Ç–æ –ø–æ-–≤–∏—Å–æ–∫–∞ –µ —Å—Ç–æ–π–Ω–æ—Å—Ç—Ç–∞, —Ç–æ–ª–∫–æ–≤–∞ –ø–æ-–¥–æ–±—Ä–æ –µ –∫–∞—á–µ—Å—Ç–≤–æ—Ç–æ –Ω–∞ –∑–≤—É–∫–∞.

1. –ü–æ–¥ —Ç–æ–≤–∞ —Å—ä–∑–¥–∞–π—Ç–µ –Ω–æ–≤–∞ —Ñ—É–Ω–∫—Ü–∏—è, –Ω–∞—Ä–µ—á–µ–Ω–∞ `capture_audio`. –¢–∞–∑–∏ —Ñ—É–Ω–∫—Ü–∏—è —â–µ –±—ä–¥–µ –∏–∑–≤–∏–∫–∞–Ω–∞ –∑–∞ –∑–∞–ø–∏—Å –Ω–∞ –∞—É–¥–∏–æ –æ—Ç –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞:

    ```python
    def capture_audio():
    ```

1. –í—ä—Ç—Ä–µ –≤ —Ç–∞–∑–∏ —Ñ—É–Ω–∫—Ü–∏—è –¥–æ–±–∞–≤–µ—Ç–µ —Å–ª–µ–¥–Ω–æ—Ç–æ –∑–∞ –∑–∞–ø–∏—Å –Ω–∞ –∞—É–¥–∏–æ:

    ```python
    stream = audio.open(format = pyaudio.paInt16,
                        rate = rate,
                        channels = 1, 
                        input_device_index = microphone_card_number,
                        input = True,
                        frames_per_buffer = 4096)

    frames = []

    while button.is_pressed():
        frames.append(stream.read(4096))

    stream.stop_stream()
    stream.close()
    ```

    –¢–æ–∑–∏ –∫–æ–¥ –æ—Ç–≤–∞—Ä—è –≤—Ö–æ–¥–µ–Ω –∞—É–¥–∏–æ –ø–æ—Ç–æ–∫, –∏–∑–ø–æ–ª–∑–≤–∞–π–∫–∏ PyAudio –æ–±–µ–∫—Ç–∞. –¢–æ–∑–∏ –ø–æ—Ç–æ–∫ —â–µ –∑–∞–ø–∏—Å–≤–∞ –∞—É–¥–∏–æ –æ—Ç –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ –Ω–∞ 16KHz, –∑–∞–ø–∏—Å–≤–∞–π–∫–∏ –≥–æ –≤ –±—É—Ñ–µ—Ä–∏ —Å —Ä–∞–∑–º–µ—Ä 4096 –±–∞–π—Ç–∞.

    –ö–æ–¥—ä—Ç —Å–ª–µ–¥ —Ç–æ–≤–∞ —Ü–∏–∫–ª–∏, –¥–æ–∫–∞—Ç–æ Grove –±—É—Ç–æ–Ω—ä—Ç –µ –Ω–∞—Ç–∏—Å–Ω–∞—Ç, –∫–∞—Ç–æ —á–µ—Ç–µ —Ç–µ–∑–∏ 4096 –±–∞–π—Ç–æ–≤–∏ –±—É—Ñ–µ—Ä–∏ –≤ –º–∞—Å–∏–≤ –≤—Å–µ–∫–∏ –ø—ä—Ç.

    > üíÅ –ú–æ–∂–µ—Ç–µ –¥–∞ –ø—Ä–æ—á–µ—Ç–µ—Ç–µ –ø–æ–≤–µ—á–µ –∑–∞ –æ–ø—Ü–∏–∏—Ç–µ, –ø—Ä–µ–¥–∞–¥–µ–Ω–∏ –Ω–∞ –º–µ—Ç–æ–¥–∞ `open`, –≤ [PyAudio –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è—Ç–∞](https://people.csail.mit.edu/hubert/pyaudio/docs/).

    –°–ª–µ–¥ –∫–∞—Ç–æ –±—É—Ç–æ–Ω—ä—Ç –±—ä–¥–µ –æ—Å–≤–æ–±–æ–¥–µ–Ω, –ø–æ—Ç–æ–∫—ä—Ç —Å–µ —Å–ø–∏—Ä–∞ –∏ –∑–∞—Ç–≤–∞—Ä—è.

1. –î–æ–±–∞–≤–µ—Ç–µ —Å–ª–µ–¥–Ω–æ—Ç–æ –≤ –∫—Ä–∞—è –Ω–∞ —Ç–∞–∑–∏ —Ñ—É–Ω–∫—Ü–∏—è:

    ```python
    wav_buffer = io.BytesIO()
    with wave.open(wav_buffer, 'wb') as wavefile:
        wavefile.setnchannels(1)
        wavefile.setsampwidth(audio.get_sample_size(pyaudio.paInt16))
        wavefile.setframerate(rate)
        wavefile.writeframes(b''.join(frames))
        wav_buffer.seek(0)

    return wav_buffer
    ```

    –¢–æ–∑–∏ –∫–æ–¥ —Å—ä–∑–¥–∞–≤–∞ –¥–≤–æ–∏—á–µ–Ω –±—É—Ñ–µ—Ä –∏ –∑–∞–ø–∏—Å–≤–∞ —Ü—è–ª–æ—Ç–æ –∑–∞–ø–∏—Å–∞–Ω–æ –∞—É–¥–∏–æ –≤ –Ω–µ–≥–æ –∫–∞—Ç–æ [WAV —Ñ–∞–π–ª](https://wikipedia.org/wiki/WAV). –¢–æ–≤–∞ –µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–µ–Ω –Ω–∞—á–∏–Ω –∑–∞ –∑–∞–ø–∏—Å –Ω–∞ –Ω–µ–∫–æ–º–ø—Ä–µ—Å–∏—Ä–∞–Ω–æ –∞—É–¥–∏–æ –≤—ä–≤ —Ñ–∞–π–ª. –¢–æ–∑–∏ –±—É—Ñ–µ—Ä —Å–ª–µ–¥ —Ç–æ–≤–∞ —Å–µ –≤—Ä—ä—â–∞.

1. –î–æ–±–∞–≤–µ—Ç–µ —Å–ª–µ–¥–Ω–∞—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è `play_audio`, –∑–∞ –¥–∞ –≤—ä–∑–ø—Ä–æ–∏–∑–≤–µ–¥–µ—Ç–µ –∞—É–¥–∏–æ –±—É—Ñ–µ—Ä–∞:

    ```python
    def play_audio(buffer):
        stream = audio.open(format = pyaudio.paInt16,
                            rate = rate,
                            channels = 1,
                            output_device_index = speaker_card_number,
                            output = True)
    
        with wave.open(buffer, 'rb') as wf:
            data = wf.readframes(4096)
    
            while len(data) > 0:
                stream.write(data)
                data = wf.readframes(4096)
    
            stream.close()
    ```

    –¢–∞–∑–∏ —Ñ—É–Ω–∫—Ü–∏—è –æ—Ç–≤–∞—Ä—è –¥—Ä—É–≥ –∞—É–¥–∏–æ –ø–æ—Ç–æ–∫, —Ç–æ–∑–∏ –ø—ä—Ç –∑–∞ –∏–∑—Ö–æ–¥ - –∑–∞ –≤—ä–∑–ø—Ä–æ–∏–∑–≤–µ–∂–¥–∞–Ω–µ –Ω–∞ –∞—É–¥–∏–æ. –¢—è –∏–∑–ø–æ–ª–∑–≤–∞ —Å—ä—â–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–∞—Ç–æ –≤—Ö–æ–¥–Ω–∏—è –ø–æ—Ç–æ–∫. –ë—É—Ñ–µ—Ä—ä—Ç —Å–ª–µ–¥ —Ç–æ–≤–∞ —Å–µ –æ—Ç–≤–∞—Ä—è –∫–∞—Ç–æ wave —Ñ–∞–π–ª –∏ —Å–µ –∑–∞–ø–∏—Å–≤–∞ –≤ –∏–∑—Ö–æ–¥–Ω–∏—è –ø–æ—Ç–æ–∫ –Ω–∞ –ø–∞—Ä—á–µ—Ç–∞ –æ—Ç 4096 –±–∞–π—Ç–∞, –≤—ä–∑–ø—Ä–æ–∏–∑–≤–µ–∂–¥–∞–π–∫–∏ –∞—É–¥–∏–æ—Ç–æ. –ü–æ—Ç–æ–∫—ä—Ç —Å–ª–µ–¥ —Ç–æ–≤–∞ —Å–µ –∑–∞—Ç–≤–∞—Ä—è.

1. –î–æ–±–∞–≤–µ—Ç–µ —Å–ª–µ–¥–Ω–∏—è –∫–æ–¥ –ø–æ–¥ —Ñ—É–Ω–∫—Ü–∏—è—Ç–∞ `capture_audio`, –∑–∞ –¥–∞ —Ü–∏–∫–ª–∏—Ä–∞—Ç–µ, –¥–æ–∫–∞—Ç–æ –±—É—Ç–æ–Ω—ä—Ç –±—ä–¥–µ –Ω–∞—Ç–∏—Å–Ω–∞—Ç. –°–ª–µ–¥ –∫–∞—Ç–æ –±—É—Ç–æ–Ω—ä—Ç –±—ä–¥–µ –Ω–∞—Ç–∏—Å–Ω–∞—Ç, –∞—É–¥–∏–æ—Ç–æ —Å–µ –∑–∞–ø–∏—Å–≤–∞ –∏ —Å–ª–µ–¥ —Ç–æ–≤–∞ —Å–µ –≤—ä–∑–ø—Ä–æ–∏–∑–≤–µ–∂–¥–∞.

    ```python
    while True:
        while not button.is_pressed():
            time.sleep(.1)
        
        buffer = capture_audio()
        play_audio(buffer)
    ```

1. –ò–∑–ø—ä–ª–Ω–µ—Ç–µ –∫–æ–¥–∞. –ù–∞—Ç–∏—Å–Ω–µ—Ç–µ –±—É—Ç–æ–Ω–∞ –∏ –≥–æ–≤–æ—Ä–µ—Ç–µ –≤ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞. –û—Å–≤–æ–±–æ–¥–µ—Ç–µ –±—É—Ç–æ–Ω–∞, –∫–æ–≥–∞—Ç–æ —Å—Ç–µ –≥–æ—Ç–æ–≤–∏, –∏ —â–µ —á—É–µ—Ç–µ –∑–∞–ø–∏—Å–∞.

    –ú–æ–∂–µ –¥–∞ –ø–æ–ª—É—á–∏—Ç–µ –Ω—è–∫–æ–∏ ALSA –≥—Ä–µ—à–∫–∏, –∫–æ–≥–∞—Ç–æ PyAudio –∏–Ω—Å—Ç–∞–Ω—Ü–∏—è—Ç–∞ –±—ä–¥–µ —Å—ä–∑–¥–∞–¥–µ–Ω–∞. –¢–æ–≤–∞ —Å–µ –¥—ä–ª–∂–∏ –Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–∞ Pi –∑–∞ –∞—É–¥–∏–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, –∫–æ–∏—Ç–æ –Ω—è–º–∞—Ç–µ. –ú–æ–∂–µ—Ç–µ –¥–∞ –∏–≥–Ω–æ—Ä–∏—Ä–∞—Ç–µ —Ç–µ–∑–∏ –≥—Ä–µ—à–∫–∏.

    ```output
    pi@raspberrypi:~/smart-timer $ python3 app.py 
    ALSA lib pcm.c:2565:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.front
    ALSA lib pcm.c:2565:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.rear
    ALSA lib pcm.c:2565:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.center_lfe
    ALSA lib pcm.c:2565:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.side
    ```

    –ê–∫–æ –ø–æ–ª—É—á–∏—Ç–µ —Å–ª–µ–¥–Ω–∞—Ç–∞ –≥—Ä–µ—à–∫–∞:

    ```output
    OSError: [Errno -9997] Invalid sample rate
    ```

    —Ç–æ–≥–∞–≤–∞ –ø—Ä–æ–º–µ–Ω–µ—Ç–µ `rate` –Ω–∞ `44100` –∏–ª–∏ `16000`.

> üíÅ –ú–æ–∂–µ—Ç–µ –¥–∞ –Ω–∞–º–µ—Ä–∏—Ç–µ —Ç–æ–∑–∏ –∫–æ–¥ –≤ –ø–∞–ø–∫–∞—Ç–∞ [code-record/pi](../../../../../6-consumer/lessons/1-speech-recognition/code-record/pi).

üòÄ –í–∞—à–∞—Ç–∞ –ø—Ä–æ–≥—Ä–∞–º–∞ –∑–∞ –∑–∞–ø–∏—Å –Ω–∞ –∞—É–¥–∏–æ –±–µ—à–µ —É—Å–ø–µ—à–Ω–∞!

---

**–û—Ç–∫–∞–∑ –æ—Ç –æ—Ç–≥–æ–≤–æ—Ä–Ω–æ—Å—Ç**:  
–¢–æ–∑–∏ –¥–æ–∫—É–º–µ–Ω—Ç –µ –ø—Ä–µ–≤–µ–¥–µ–Ω —Å –ø–æ–º–æ—â—Ç–∞ –Ω–∞ AI —É—Å–ª—É–≥–∞ –∑–∞ –ø—Ä–µ–≤–æ–¥ [Co-op Translator](https://github.com/Azure/co-op-translator). –í—ä–ø—Ä–µ–∫–∏ —á–µ —Å–µ —Å—Ç—Ä–µ–º–∏–º –∫—ä–º —Ç–æ—á–Ω–æ—Å—Ç, –º–æ–ª—è, –∏–º–∞–π—Ç–µ –ø—Ä–µ–¥–≤–∏–¥, —á–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–∞–Ω–∏—Ç–µ –ø—Ä–µ–≤–æ–¥–∏ –º–æ–∂–µ –¥–∞ —Å—ä–¥—ä—Ä–∂–∞—Ç –≥—Ä–µ—à–∫–∏ –∏–ª–∏ –Ω–µ—Ç–æ—á–Ω–æ—Å—Ç–∏. –û—Ä–∏–≥–∏–Ω–∞–ª–Ω–∏—è—Ç –¥–æ–∫—É–º–µ–Ω—Ç –Ω–∞ –Ω–µ–≥–æ–≤–∏—è –∏–∑—Ö–æ–¥–µ–Ω –µ–∑–∏–∫ —Ç—Ä—è–±–≤–∞ –¥–∞ —Å–µ —Å—á–∏—Ç–∞ –∑–∞ –∞–≤—Ç–æ—Ä–∏—Ç–µ—Ç–µ–Ω –∏–∑—Ç–æ—á–Ω–∏–∫. –ó–∞ –∫—Ä–∏—Ç–∏—á–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è —Å–µ –ø—Ä–µ–ø–æ—Ä—ä—á–≤–∞ –ø—Ä–æ—Ñ–µ—Å–∏–æ–Ω–∞–ª–µ–Ω –ø—Ä–µ–≤–æ–¥ –æ—Ç —á–æ–≤–µ–∫. –ù–∏–µ –Ω–µ –Ω–æ—Å–∏–º –æ—Ç–≥–æ–≤–æ—Ä–Ω–æ—Å—Ç –∑–∞ –∫–∞–∫–≤–∏—Ç–æ –∏ –¥–∞ –µ –Ω–µ–¥–æ—Ä–∞–∑—É–º–µ–Ω–∏—è –∏–ª–∏ –ø–æ–≥—Ä–µ—à–Ω–∏ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏, –ø—Ä–æ–∏–∑—Ç–∏—á–∞—â–∏ –æ—Ç –∏–∑–ø–æ–ª–∑–≤–∞–Ω–µ—Ç–æ –Ω–∞ —Ç–æ–∑–∏ –ø—Ä–µ–≤–æ–¥.