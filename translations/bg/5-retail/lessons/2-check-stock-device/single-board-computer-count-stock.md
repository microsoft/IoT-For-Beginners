<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "9c4320311c0f2c1884a6a21265d98a51",
  "translation_date": "2025-08-28T10:51:17+00:00",
  "source_file": "5-retail/lessons/2-check-stock-device/single-board-computer-count-stock.md",
  "language_code": "bg"
}
-->
# –ë—Ä–æ–π—Ç–µ –Ω–∞–ª–∏—á–Ω–æ—Å—Ç–∏ –æ—Ç –≤–∞—à–µ—Ç–æ IoT —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ - –í–∏—Ä—Ç—É–∞–ª–µ–Ω IoT —Ö–∞—Ä–¥—É–µ—Ä –∏ Raspberry Pi

–ö–æ–º–±–∏–Ω–∞—Ü–∏—è—Ç–∞ –æ—Ç –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è—Ç–∞ –∏ —Ç–µ—Ö–Ω–∏—Ç–µ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç–µ–ª–Ω–∏ –∫—É—Ç–∏–∏ –º–æ–∂–µ –¥–∞ —Å–µ –∏–∑–ø–æ–ª–∑–≤–∞ –∑–∞ –ø—Ä–µ–±—Ä–æ—è–≤–∞–Ω–µ –Ω–∞ –Ω–∞–ª–∏—á–Ω–æ—Å—Ç–∏ –≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ.

## –ü–æ–∫–∞–∑–≤–∞–Ω–µ –Ω–∞ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç–µ–ª–Ω–∏ –∫—É—Ç–∏–∏

–ö–∞—Ç–æ –ø–æ–ª–µ–∑–Ω–∞ —Å—Ç—ä–ø–∫–∞ –∑–∞ –æ—Ç—Å—Ç—Ä–∞–Ω—è–≤–∞–Ω–µ –Ω–∞ –≥—Ä–µ—à–∫–∏, –º–æ–∂–µ—Ç–µ –Ω–µ —Å–∞–º–æ –¥–∞ –æ—Ç–ø–µ—á–∞—Ç–∞—Ç–µ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç–µ–ª–Ω–∏—Ç–µ –∫—É—Ç–∏–∏, –Ω–æ –∏ –¥–∞ –≥–∏ –Ω–∞—Ä–∏—Å—É–≤–∞—Ç–µ –≤—ä—Ä—Ö—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ—Ç–æ, –∫–æ–µ—Ç–æ –µ –∑–∞–ø–∏—Å–∞–Ω–æ –Ω–∞ –¥–∏—Å–∫–∞, –∫–æ–≥–∞—Ç–æ –µ –∑–∞—Å–Ω–µ—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ.

### –ó–∞–¥–∞—á–∞ - –æ—Ç–ø–µ—á–∞—Ç–∞–π—Ç–µ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç–µ–ª–Ω–∏—Ç–µ –∫—É—Ç–∏–∏

1. –£–≤–µ—Ä–µ—Ç–µ —Å–µ, —á–µ –ø—Ä–æ–µ–∫—Ç—ä—Ç `stock-counter` –µ –æ—Ç–≤–æ—Ä–µ–Ω –≤ VS Code –∏ –≤–∏—Ä—Ç—É–∞–ª–Ω–∞—Ç–∞ —Å—Ä–µ–¥–∞ –µ –∞–∫—Ç–∏–≤–∏—Ä–∞–Ω–∞, –∞–∫–æ –∏–∑–ø–æ–ª–∑–≤–∞—Ç–µ –≤–∏—Ä—Ç—É–∞–ª–Ω–æ IoT —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ.

1. –ü—Ä–æ–º–µ–Ω–µ—Ç–µ –∏–∑—Ä–∞–∑–∞ `print` –≤ —Ü–∏–∫—ä–ª–∞ `for` –Ω–∞ —Å–ª–µ–¥–Ω–æ—Ç–æ, –∑–∞ –¥–∞ –æ—Ç–ø–µ—á–∞—Ç–∞—Ç–µ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç–µ–ª–Ω–∏—Ç–µ –∫—É—Ç–∏–∏ –≤ –∫–æ–Ω–∑–æ–ª–∞—Ç–∞:

    ```python
    print(f'{prediction.tag_name}:\t{prediction.probability * 100:.2f}%\t{prediction.bounding_box}')
    ```

1. –°—Ç–∞—Ä—Ç–∏—Ä–∞–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ —Å –∫–∞–º–µ—Ä–∞—Ç–∞, –Ω–∞—Å–æ—á–µ–Ω–∞ –∫—ä–º –Ω—è–∫–∞–∫–≤–∏ –Ω–∞–ª–∏—á–Ω–æ—Å—Ç–∏ –Ω–∞ —Ä–∞—Ñ—Ç. –û–≥—Ä–∞–Ω–∏—á–∏—Ç–µ–ª–Ω–∏—Ç–µ –∫—É—Ç–∏–∏ —â–µ –±—ä–¥–∞—Ç –æ—Ç–ø–µ—á–∞—Ç–∞–Ω–∏ –≤ –∫–æ–Ω–∑–æ–ª–∞—Ç–∞ —Å –ª–µ–≤–∏, –≥–æ—Ä–Ω–∏, —à–∏—Ä–æ—á–∏–Ω–Ω–∏ –∏ –≤–∏—Å–æ—á–∏–Ω–Ω–∏ —Å—Ç–æ–π–Ω–æ—Å—Ç–∏ –æ—Ç 0 –¥–æ 1.

    ```output
    pi@raspberrypi:~/stock-counter $ python3 app.py 
    tomato paste:   33.42%  {'additional_properties': {}, 'left': 0.3455171, 'top': 0.09916268, 'width': 0.14175442, 'height': 0.29405564}
    tomato paste:   34.41%  {'additional_properties': {}, 'left': 0.48283678, 'top': 0.10242918, 'width': 0.11782813, 'height': 0.27467814}
    tomato paste:   31.25%  {'additional_properties': {}, 'left': 0.4923783, 'top': 0.35007596, 'width': 0.13668466, 'height': 0.28304994}
    tomato paste:   31.05%  {'additional_properties': {}, 'left': 0.36416405, 'top': 0.37494493, 'width': 0.14024884, 'height': 0.26880276}
    ```

### –ó–∞–¥–∞—á–∞ - –Ω–∞—Ä–∏—Å—É–≤–∞–π—Ç–µ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç–µ–ª–Ω–∏ –∫—É—Ç–∏–∏ –≤—ä—Ä—Ö—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ—Ç–æ

1. –ü–∞–∫–µ—Ç—ä—Ç Pip [Pillow](https://pypi.org/project/Pillow/) –º–æ–∂–µ –¥–∞ —Å–µ –∏–∑–ø–æ–ª–∑–≤–∞ –∑–∞ —Ä–∏—Å—É–≤–∞–Ω–µ –≤—ä—Ä—Ö—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è. –ò–Ω—Å—Ç–∞–ª–∏—Ä–∞–π—Ç–µ –≥–æ —Å—ä—Å —Å–ª–µ–¥–Ω–∞—Ç–∞ –∫–æ–º–∞–Ω–¥–∞:

    ```sh
    pip3 install pillow
    ```

    –ê–∫–æ –∏–∑–ø–æ–ª–∑–≤–∞—Ç–µ –≤–∏—Ä—Ç—É–∞–ª–Ω–æ IoT —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ, —É–≤–µ—Ä–µ—Ç–µ —Å–µ, —á–µ —Å—Ç–µ –∏–∑–ø—ä–ª–Ω–∏–ª–∏ —Ç–∞–∑–∏ –∫–æ–º–∞–Ω–¥–∞ –≤ –∞–∫—Ç–∏–≤–∏—Ä–∞–Ω–∞—Ç–∞ –≤–∏—Ä—Ç—É–∞–ª–Ω–∞ —Å—Ä–µ–¥–∞.

1. –î–æ–±–∞–≤–µ—Ç–µ —Å–ª–µ–¥–Ω–∏—è –∏–∑—Ä–∞–∑ –∑–∞ –∏–º–ø–æ—Ä—Ç–∏—Ä–∞–Ω–µ –≤ –Ω–∞—á–∞–ª–æ—Ç–æ –Ω–∞ —Ñ–∞–π–ª–∞ `app.py`:

    ```python
    from PIL import Image, ImageDraw, ImageColor
    ```

    –¢–æ–≤–∞ –∏–º–ø–æ—Ä—Ç–∏—Ä–∞ –∫–æ–¥, –Ω–µ–æ–±—Ö–æ–¥–∏–º –∑–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–∞–Ω–µ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ—Ç–æ.

1. –î–æ–±–∞–≤–µ—Ç–µ —Å–ª–µ–¥–Ω–∏—è –∫–æ–¥ –≤ –∫—Ä–∞—è –Ω–∞ —Ñ–∞–π–ª–∞ `app.py`:

    ```python
    with Image.open('image.jpg') as im:
        draw = ImageDraw.Draw(im)
    
        for prediction in predictions:
            scale_left = prediction.bounding_box.left
            scale_top = prediction.bounding_box.top
            scale_right = prediction.bounding_box.left + prediction.bounding_box.width
            scale_bottom = prediction.bounding_box.top + prediction.bounding_box.height
            
            left = scale_left * im.width
            top = scale_top * im.height
            right = scale_right * im.width
            bottom = scale_bottom * im.height
    
            draw.rectangle([left, top, right, bottom], outline=ImageColor.getrgb('red'), width=2)
    
        im.save('image.jpg')
    ```

    –¢–æ–∑–∏ –∫–æ–¥ –æ—Ç–≤–∞—Ä—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ—Ç–æ, –∫–æ–µ—Ç–æ –±–µ—à–µ –∑–∞–ø–∏—Å–∞–Ω–æ –ø–æ-—Ä–∞–Ω–æ, –∑–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–∞–Ω–µ. –°–ª–µ–¥ —Ç–æ–≤–∞ –ø—Ä–µ–º–∏–Ω–∞–≤–∞ –ø—Ä–µ–∑ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è—Ç–∞, –∏–∑–≤–ª–∏—á–∞–π–∫–∏ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç–µ–ª–Ω–∏—Ç–µ –∫—É—Ç–∏–∏, –∏ –∏–∑—á–∏—Å–ª—è–≤–∞ –¥–æ–ª–Ω–∏—è –¥–µ—Å–µ–Ω –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç, –∏–∑–ø–æ–ª–∑–≤–∞–π–∫–∏ —Å—Ç–æ–π–Ω–æ—Å—Ç–∏—Ç–µ –Ω–∞ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç–µ–ª–Ω–∏—Ç–µ –∫—É—Ç–∏–∏ –æ—Ç 0 –¥–æ 1. –¢–µ —Å–ª–µ–¥ —Ç–æ–≤–∞ —Å–µ –ø—Ä–µ–æ–±—Ä–∞–∑—É–≤–∞—Ç –≤ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ—Ç–æ, –∫–∞—Ç–æ —Å–µ —É–º–Ω–æ–∂–∞–≤–∞—Ç –ø–æ —Å—ä–æ—Ç–≤–µ—Ç–Ω–æ—Ç–æ –∏–∑–º–µ—Ä–µ–Ω–∏–µ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ—Ç–æ. –ù–∞–ø—Ä–∏–º–µ—Ä, –∞–∫–æ —Å—Ç–æ–π–Ω–æ—Å—Ç—Ç–∞ –∑–∞ –ª—è–≤–æ –µ 0.5 –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å —à–∏—Ä–æ—á–∏–Ω–∞ 600 –ø–∏–∫—Å–µ–ª–∞, —Ç–æ–≤–∞ —â–µ —Å–µ –ø—Ä–µ–æ–±—Ä–∞–∑—É–≤–∞ –≤ 300 (0.5 x 600 = 300).

    –í—Å—è–∫–∞ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç–µ–ª–Ω–∞ –∫—É—Ç–∏—è —Å–µ —Ä–∏—Å—É–≤–∞ –≤—ä—Ä—Ö—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ—Ç–æ —Å —á–µ—Ä–≤–µ–Ω–∞ –ª–∏–Ω–∏—è. –ù–∞–∫—Ä–∞—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–∞–Ω–æ—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–µ –∑–∞–ø–∏—Å–≤–∞, –∫–∞—Ç–æ —Å–µ –ø—Ä–µ–∑–∞–ø–∏—Å–≤–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª–Ω–æ—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ.

1. –°—Ç–∞—Ä—Ç–∏—Ä–∞–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ —Å –∫–∞–º–µ—Ä–∞—Ç–∞, –Ω–∞—Å–æ—á–µ–Ω–∞ –∫—ä–º –Ω—è–∫–∞–∫–≤–∏ –Ω–∞–ª–∏—á–Ω–æ—Å—Ç–∏ –Ω–∞ —Ä–∞—Ñ—Ç. –©–µ –≤–∏–¥–∏—Ç–µ —Ñ–∞–π–ª–∞ `image.jpg` –≤ –∏–∑—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—è –Ω–∞ VS Code –∏ —â–µ –º–æ–∂–µ—Ç–µ –¥–∞ –≥–æ –∏–∑–±–µ—Ä–µ—Ç–µ, –∑–∞ –¥–∞ –≤–∏–¥–∏—Ç–µ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç–µ–ª–Ω–∏—Ç–µ –∫—É—Ç–∏–∏.

    ![4 –∫–æ–Ω—Å–µ—Ä–≤–∏ –¥–æ–º–∞—Ç–µ–Ω–æ –ø—é—Ä–µ —Å –æ–≥—Ä–∞–Ω–∏—á–∏—Ç–µ–ª–Ω–∏ –∫—É—Ç–∏–∏ –æ–∫–æ–ª–æ –≤—Å—è–∫–∞ –∫–æ–Ω—Å–µ—Ä–≤–∞](../../../../../translated_images/rpi-stock-with-bounding-boxes.b5540e2ecb7cd49f1271828d3be412671d950e87625c5597ea97c90f11e01097.bg.jpg)

## –ë—Ä–æ–π—Ç–µ –Ω–∞–ª–∏—á–Ω–æ—Å—Ç–∏

–ù–∞ –ø–æ–∫–∞–∑–∞–Ω–æ—Ç–æ –ø–æ-–≥–æ—Ä–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç–µ–ª–Ω–∏—Ç–µ –∫—É—Ç–∏–∏ –∏–º–∞—Ç –º–∞–ª–∫–æ –ø—Ä–∏–ø–æ–∫—Ä–∏–≤–∞–Ω–µ. –ê–∫–æ —Ç–æ–≤–∞ –ø—Ä–∏–ø–æ–∫—Ä–∏–≤–∞–Ω–µ –±–µ—à–µ –º–Ω–æ–≥–æ –ø–æ-–≥–æ–ª—è–º–æ, —Ç–æ–≥–∞–≤–∞ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç–µ–ª–Ω–∏—Ç–µ –∫—É—Ç–∏–∏ –º–æ–∂–µ –¥–∞ –ø–æ–∫–∞–∑–≤–∞—Ç –µ–¥–∏–Ω –∏ —Å—ä—â –æ–±–µ–∫—Ç. –ó–∞ –¥–∞ –ø—Ä–µ–±—Ä–æ–∏—Ç–µ –æ–±–µ–∫—Ç–∏—Ç–µ –ø—Ä–∞–≤–∏–ª–Ω–æ, —Ç—Ä—è–±–≤–∞ –¥–∞ –∏–≥–Ω–æ—Ä–∏—Ä–∞—Ç–µ –∫—É—Ç–∏–∏—Ç–µ —Å—ä—Å –∑–Ω–∞—á–∏—Ç–µ–ª–Ω–æ –ø—Ä–∏–ø–æ–∫—Ä–∏–≤–∞–Ω–µ.

### –ó–∞–¥–∞—á–∞ - –±—Ä–æ–π—Ç–µ –Ω–∞–ª–∏—á–Ω–æ—Å—Ç–∏, –∏–≥–Ω–æ—Ä–∏—Ä–∞–π–∫–∏ –ø—Ä–∏–ø–æ–∫—Ä–∏–≤–∞–Ω–µ—Ç–æ

1. –ü–∞–∫–µ—Ç—ä—Ç Pip [Shapely](https://pypi.org/project/Shapely/) –º–æ–∂–µ –¥–∞ —Å–µ –∏–∑–ø–æ–ª–∑–≤–∞ –∑–∞ –∏–∑—á–∏—Å–ª—è–≤–∞–Ω–µ –Ω–∞ –ø—Ä–µ—Å–µ—á–Ω–∞—Ç–∞ —Ç–æ—á–∫–∞. –ê–∫–æ –∏–∑–ø–æ–ª–∑–≤–∞—Ç–µ Raspberry Pi, –ø—ä—Ä–≤–æ —â–µ —Ç—Ä—è–±–≤–∞ –¥–∞ –∏–Ω—Å—Ç–∞–ª–∏—Ä–∞—Ç–µ –±–∏–±–ª–∏–æ—Ç–µ—á–Ω–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç:

    ```sh
    sudo apt install libgeos-dev
    ```

1. –ò–Ω—Å—Ç–∞–ª–∏—Ä–∞–π—Ç–µ –ø–∞–∫–µ—Ç–∞ Shapely:

    ```sh
    pip3 install shapely
    ```

    –ê–∫–æ –∏–∑–ø–æ–ª–∑–≤–∞—Ç–µ –≤–∏—Ä—Ç—É–∞–ª–Ω–æ IoT —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ, —É–≤–µ—Ä–µ—Ç–µ —Å–µ, —á–µ —Å—Ç–µ –∏–∑–ø—ä–ª–Ω–∏–ª–∏ —Ç–∞–∑–∏ –∫–æ–º–∞–Ω–¥–∞ –≤ –∞–∫—Ç–∏–≤–∏—Ä–∞–Ω–∞—Ç–∞ –≤–∏—Ä—Ç—É–∞–ª–Ω–∞ —Å—Ä–µ–¥–∞.

1. –î–æ–±–∞–≤–µ—Ç–µ —Å–ª–µ–¥–Ω–∏—è –∏–∑—Ä–∞–∑ –∑–∞ –∏–º–ø–æ—Ä—Ç–∏—Ä–∞–Ω–µ –≤ –Ω–∞—á–∞–ª–æ—Ç–æ –Ω–∞ —Ñ–∞–π–ª–∞ `app.py`:

    ```python
    from shapely.geometry import Polygon
    ```

    –¢–æ–≤–∞ –∏–º–ø–æ—Ä—Ç–∏—Ä–∞ –∫–æ–¥, –Ω–µ–æ–±—Ö–æ–¥–∏–º –∑–∞ —Å—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ –ø–æ–ª–∏–≥–æ–Ω–∏ –∑–∞ –∏–∑—á–∏—Å–ª—è–≤–∞–Ω–µ –Ω–∞ –ø—Ä–∏–ø–æ–∫—Ä–∏–≤–∞–Ω–µ—Ç–æ.

1. –ù–∞–¥ –∫–æ–¥–∞, –∫–æ–π—Ç–æ —Ä–∏—Å—É–≤–∞ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç–µ–ª–Ω–∏—Ç–µ –∫—É—Ç–∏–∏, –¥–æ–±–∞–≤–µ—Ç–µ —Å–ª–µ–¥–Ω–∏—è –∫–æ–¥:

    ```python
    overlap_threshold = 0.20
    ```

    –¢–æ–≤–∞ –æ–ø—Ä–µ–¥–µ–ª—è –ø—Ä–æ—Ü–µ–Ω—Ç–∞ –Ω–∞ –ø—Ä–∏–ø–æ–∫—Ä–∏–≤–∞–Ω–µ, –∫–æ–π—Ç–æ –µ –¥–æ–ø—É—Å—Ç–∏–º, –ø—Ä–µ–¥–∏ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç–µ–ª–Ω–∏—Ç–µ –∫—É—Ç–∏–∏ –¥–∞ —Å–µ —Å—á–∏—Ç–∞—Ç –∑–∞ –µ–¥–∏–Ω –∏ —Å—ä—â –æ–±–µ–∫—Ç. 0.20 –æ–ø—Ä–µ–¥–µ–ª—è 20% –ø—Ä–∏–ø–æ–∫—Ä–∏–≤–∞–Ω–µ.

1. –ó–∞ –¥–∞ –∏–∑—á–∏—Å–ª–∏—Ç–µ –ø—Ä–∏–ø–æ–∫—Ä–∏–≤–∞–Ω–µ—Ç–æ —Å –ø–æ–º–æ—â—Ç–∞ –Ω–∞ Shapely, –æ–≥—Ä–∞–Ω–∏—á–∏—Ç–µ–ª–Ω–∏—Ç–µ –∫—É—Ç–∏–∏ —Ç—Ä—è–±–≤–∞ –¥–∞ –±—ä–¥–∞—Ç –ø—Ä–µ–æ–±—Ä–∞–∑—É–≤–∞–Ω–∏ –≤ –ø–æ–ª–∏–≥–æ–Ω–∏ –Ω–∞ Shapely. –î–æ–±–∞–≤–µ—Ç–µ —Å–ª–µ–¥–Ω–∞—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è, –∑–∞ –¥–∞ –Ω–∞–ø—Ä–∞–≤–∏—Ç–µ —Ç–æ–≤–∞:

    ```python
    def create_polygon(prediction):
        scale_left = prediction.bounding_box.left
        scale_top = prediction.bounding_box.top
        scale_right = prediction.bounding_box.left + prediction.bounding_box.width
        scale_bottom = prediction.bounding_box.top + prediction.bounding_box.height
    
        return Polygon([(scale_left, scale_top), (scale_right, scale_top), (scale_right, scale_bottom), (scale_left, scale_bottom)])
    ```

    –¢–æ–≤–∞ —Å—ä–∑–¥–∞–≤–∞ –ø–æ–ª–∏–≥–æ–Ω, –∏–∑–ø–æ–ª–∑–≤–∞–π–∫–∏ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç–µ–ª–Ω–∞—Ç–∞ –∫—É—Ç–∏—è –Ω–∞ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ.

1. –õ–æ–≥–∏–∫–∞—Ç–∞ –∑–∞ –ø—Ä–µ–º–∞—Ö–≤–∞–Ω–µ –Ω–∞ –ø—Ä–∏–ø–æ–∫—Ä–∏–≤–∞—â–∏ —Å–µ –æ–±–µ–∫—Ç–∏ –≤–∫–ª—é—á–≤–∞ —Å—Ä–∞–≤–Ω—è–≤–∞–Ω–µ –Ω–∞ –≤—Å–∏—á–∫–∏ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç–µ–ª–Ω–∏ –∫—É—Ç–∏–∏ –∏ –∞–∫–æ –Ω—è–∫–æ–∏ –¥–≤–æ–π–∫–∏ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –∏–º–∞—Ç –æ–≥—Ä–∞–Ω–∏—á–∏—Ç–µ–ª–Ω–∏ –∫—É—Ç–∏–∏, –∫–æ–∏—Ç–æ —Å–µ –ø—Ä–∏–ø–æ–∫—Ä–∏–≤–∞—Ç –ø–æ–≤–µ—á–µ –æ—Ç –ø—Ä–∞–≥–∞, –∏–∑—Ç—Ä–∏–≤–∞–Ω–µ –Ω–∞ –µ–¥–Ω–æ –æ—Ç –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è—Ç–∞. –ó–∞ –¥–∞ —Å—Ä–∞–≤–Ω–∏—Ç–µ –≤—Å–∏—á–∫–∏ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è, —Å—Ä–∞–≤–Ω—è–≤–∞—Ç–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ 1 —Å 2, 3, 4 –∏ —Ç.–Ω., —Å–ª–µ–¥ —Ç–æ–≤–∞ 2 —Å 3, 4 –∏ —Ç.–Ω. –°–ª–µ–¥–Ω–∏—è—Ç –∫–æ–¥ –ø—Ä–∞–≤–∏ —Ç–æ–≤–∞:

    ```python
    to_delete = []

    for i in range(0, len(predictions)):
        polygon_1 = create_polygon(predictions[i])
    
        for j in range(i+1, len(predictions)):
            polygon_2 = create_polygon(predictions[j])
            overlap = polygon_1.intersection(polygon_2).area

            smallest_area = min(polygon_1.area, polygon_2.area)
    
            if overlap > (overlap_threshold * smallest_area):
                to_delete.append(predictions[i])
                break
    
    for d in to_delete:
        predictions.remove(d)

    print(f'Counted {len(predictions)} stock items')
    ```

    –ü—Ä–∏–ø–æ–∫—Ä–∏–≤–∞–Ω–µ—Ç–æ —Å–µ –∏–∑—á–∏—Å–ª—è–≤–∞ —Å –ø–æ–º–æ—â—Ç–∞ –Ω–∞ –º–µ—Ç–æ–¥–∞ `Polygon.intersection` –Ω–∞ Shapely, –∫–æ–π—Ç–æ –≤—Ä—ä—â–∞ –ø–æ–ª–∏–≥–æ–Ω —Å –ø—Ä–∏–ø–æ–∫—Ä–∏–≤–∞–Ω–µ—Ç–æ. –ü–ª–æ—â—Ç–∞ —Å–ª–µ–¥ —Ç–æ–≤–∞ —Å–µ –∏–∑—á–∏—Å–ª—è–≤–∞ –æ—Ç —Ç–æ–∑–∏ –ø–æ–ª–∏–≥–æ–Ω. –¢–æ–∑–∏ –ø—Ä–∞–≥ –Ω–∞ –ø—Ä–∏–ø–æ–∫—Ä–∏–≤–∞–Ω–µ –Ω–µ –µ –∞–±—Å–æ–ª—é—Ç–Ω–∞ —Å—Ç–æ–π–Ω–æ—Å—Ç, –∞ —Ç—Ä—è–±–≤–∞ –¥–∞ –±—ä–¥–µ –ø—Ä–æ—Ü–µ–Ω—Ç –æ—Ç –æ–≥—Ä–∞–Ω–∏—á–∏—Ç–µ–ª–Ω–∞—Ç–∞ –∫—É—Ç–∏—è, —Ç–∞–∫–∞ —á–µ —Å–µ –Ω–∞–º–∏—Ä–∞ –Ω–∞–π-–º–∞–ª–∫–∞—Ç–∞ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç–µ–ª–Ω–∞ –∫—É—Ç–∏—è –∏ –ø—Ä–∞–≥—ä—Ç –Ω–∞ –ø—Ä–∏–ø–æ–∫—Ä–∏–≤–∞–Ω–µ —Å–µ –∏–∑–ø–æ–ª–∑–≤–∞ –∑–∞ –∏–∑—á–∏—Å–ª—è–≤–∞–Ω–µ –Ω–∞ –ø–ª–æ—â—Ç–∞, –∫–æ—è—Ç–æ –ø—Ä–∏–ø–æ–∫—Ä–∏–≤–∞–Ω–µ—Ç–æ –º–æ–∂–µ –¥–∞ –∏–º–∞, –∑–∞ –¥–∞ –Ω–µ –Ω–∞–¥–≤–∏—à–∞–≤–∞ –ø—Ä–∞–≥–∞ –Ω–∞ –ø—Ä–æ—Ü–µ–Ω—Ç–Ω–æ—Ç–æ –ø—Ä–∏–ø–æ–∫—Ä–∏–≤–∞–Ω–µ –Ω–∞ –Ω–∞–π-–º–∞–ª–∫–∞—Ç–∞ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç–µ–ª–Ω–∞ –∫—É—Ç–∏—è. –ê–∫–æ –ø—Ä–∏–ø–æ–∫—Ä–∏–≤–∞–Ω–µ—Ç–æ –Ω–∞–¥–≤–∏—à–∞–≤–∞ —Ç–æ–≤–∞, –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ—Ç–æ —Å–µ –º–∞—Ä–∫–∏—Ä–∞ –∑–∞ –∏–∑—Ç—Ä–∏–≤–∞–Ω–µ.

    –°–ª–µ–¥ –∫–∞—Ç–æ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ—Ç–æ –µ –º–∞—Ä–∫–∏—Ä–∞–Ω–æ –∑–∞ –∏–∑—Ç—Ä–∏–≤–∞–Ω–µ, —Ç–æ –Ω–µ –µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–∞ —Å–µ –ø—Ä–æ–≤–µ—Ä—è–≤–∞ –æ—Ç–Ω–æ–≤–æ, —Ç–∞–∫–∞ —á–µ –≤—ä—Ç—Ä–µ—à–Ω–∏—è—Ç —Ü–∏–∫—ä–ª –ø—Ä–µ–∫—ä—Å–≤–∞, –∑–∞ –¥–∞ –ø—Ä–æ–≤–µ—Ä–∏ —Å–ª–µ–¥–≤–∞—â–æ—Ç–æ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ. –ù–µ –º–æ–∂–µ—Ç–µ –¥–∞ –∏–∑—Ç—Ä–∏–≤–∞—Ç–µ –µ–ª–µ–º–µ–Ω—Ç–∏ –æ—Ç —Å–ø–∏—Å—ä–∫, –¥–æ–∫–∞—Ç–æ –≥–æ –æ–±—Ö–æ–∂–¥–∞—Ç–µ, —Ç–∞–∫–∞ —á–µ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç–µ–ª–Ω–∏—Ç–µ –∫—É—Ç–∏–∏, –∫–æ–∏—Ç–æ —Å–µ –ø—Ä–∏–ø–æ–∫—Ä–∏–≤–∞—Ç –ø–æ–≤–µ—á–µ –æ—Ç –ø—Ä–∞–≥–∞, —Å–µ –¥–æ–±–∞–≤—è—Ç –∫—ä–º —Å–ø–∏—Å—ä–∫–∞ `to_delete`, —Å–ª–µ–¥ –∫–æ–µ—Ç–æ —Å–µ –∏–∑—Ç—Ä–∏–≤–∞—Ç –Ω–∞–∫—Ä–∞—è.

    –ù–∞–∫—Ä–∞—è –±—Ä–æ—è—Ç –Ω–∞ –Ω–∞–ª–∏—á–Ω–æ—Å—Ç–∏—Ç–µ —Å–µ –æ—Ç–ø–µ—á–∞—Ç–≤–∞ –≤ –∫–æ–Ω–∑–æ–ª–∞—Ç–∞. –¢–æ–≤–∞ —Å–ª–µ–¥ —Ç–æ–≤–∞ –º–æ–∂–µ –¥–∞ –±—ä–¥–µ –∏–∑–ø—Ä–∞—Ç–µ–Ω–æ –∫—ä–º IoT —É—Å–ª—É–≥–∞, –∑–∞ –¥–∞ —Å–µ —Å–∏–≥–Ω–∞–ª–∏–∑–∏—Ä–∞, –∞–∫–æ –Ω–∏–≤–∞—Ç–∞ –Ω–∞ –Ω–∞–ª–∏—á–Ω–æ—Å—Ç–∏—Ç–µ —Å–∞ –Ω–∏—Å–∫–∏. –¶–µ–ª–∏—è—Ç —Ç–æ–∑–∏ –∫–æ–¥ –µ –ø—Ä–µ–¥–∏ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç–µ–ª–Ω–∏—Ç–µ –∫—É—Ç–∏–∏ –¥–∞ –±—ä–¥–∞—Ç –Ω–∞—Ä–∏—Å—É–≤–∞–Ω–∏, —Ç–∞–∫–∞ —á–µ —â–µ –≤–∏–¥–∏—Ç–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è—Ç–∞ –∑–∞ –Ω–∞–ª–∏—á–Ω–æ—Å—Ç–∏ –±–µ–∑ –ø—Ä–∏–ø–æ–∫—Ä–∏–≤–∞–Ω–∏—è –≤—ä—Ä—Ö—É –≥–µ–Ω–µ—Ä–∏—Ä–∞–Ω–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è.

    > üíÅ –¢–æ–≤–∞ –µ –º–Ω–æ–≥–æ –æ–ø—Ä–æ—Å—Ç–µ–Ω –Ω–∞—á–∏–Ω –∑–∞ –ø—Ä–µ–º–∞—Ö–≤–∞–Ω–µ –Ω–∞ –ø—Ä–∏–ø–æ–∫—Ä–∏–≤–∞–Ω–∏—è, –∫–∞—Ç–æ –ø—Ä–æ—Å—Ç–æ —Å–µ –ø—Ä–µ–º–∞—Ö–≤–∞ –ø—ä—Ä–≤–æ—Ç–æ –≤ –ø—Ä–∏–ø–æ–∫—Ä–∏–≤–∞—â–∞ —Å–µ –¥–≤–æ–π–∫–∞. –ó–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω –∫–æ–¥ –±–∏—Ö—Ç–µ –∏—Å–∫–∞–ª–∏ –¥–∞ –¥–æ–±–∞–≤–∏—Ç–µ –ø–æ–≤–µ—á–µ –ª–æ–≥–∏–∫–∞ —Ç—É–∫, –∫–∞—Ç–æ –Ω–∞–ø—Ä–∏–º–µ—Ä —Ä–∞–∑–≥–ª–µ–∂–¥–∞–Ω–µ –Ω–∞ –ø—Ä–∏–ø–æ–∫—Ä–∏–≤–∞–Ω–∏—è—Ç–∞ –º–µ–∂–¥—É –º–Ω–æ–∂–µ—Å—Ç–≤–æ –æ–±–µ–∫—Ç–∏ –∏–ª–∏ –∞–∫–æ –µ–¥–Ω–∞ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç–µ–ª–Ω–∞ –∫—É—Ç–∏—è –µ —Å—ä–¥—ä—Ä–∂–∞–Ω–∞ –≤ –¥—Ä—É–≥–∞.

1. –°—Ç–∞—Ä—Ç–∏—Ä–∞–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ —Å –∫–∞–º–µ—Ä–∞—Ç–∞, –Ω–∞—Å–æ—á–µ–Ω–∞ –∫—ä–º –Ω—è–∫–∞–∫–≤–∏ –Ω–∞–ª–∏—á–Ω–æ—Å—Ç–∏ –Ω–∞ —Ä–∞—Ñ—Ç. –†–µ–∑—É–ª—Ç–∞—Ç—ä—Ç —â–µ –ø–æ–∫–∞–∂–µ –±—Ä–æ—è –Ω–∞ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç–µ–ª–Ω–∏—Ç–µ –∫—É—Ç–∏–∏ –±–µ–∑ –ø—Ä–∏–ø–æ–∫—Ä–∏–≤–∞–Ω–∏—è, –∫–æ–∏—Ç–æ –Ω–∞–¥–≤–∏—à–∞–≤–∞—Ç –ø—Ä–∞–≥–∞. –û–ø–∏—Ç–∞–π—Ç–µ –¥–∞ –ø—Ä–æ–º–µ–Ω–∏—Ç–µ —Å—Ç–æ–π–Ω–æ—Å—Ç—Ç–∞ –Ω–∞ `overlap_threshold`, –∑–∞ –¥–∞ –≤–∏–¥–∏—Ç–µ –∫–∞–∫ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è—Ç–∞ —Å–µ –∏–≥–Ω–æ—Ä–∏—Ä–∞—Ç.

> üíÅ –ú–æ–∂–µ—Ç–µ –¥–∞ –Ω–∞–º–µ—Ä–∏—Ç–µ —Ç–æ–∑–∏ –∫–æ–¥ –≤ –ø–∞–ø–∫–∞—Ç–∞ [code-count/pi](../../../../../5-retail/lessons/2-check-stock-device/code-count/pi) –∏–ª–∏ [code-count/virtual-iot-device](../../../../../5-retail/lessons/2-check-stock-device/code-count/virtual-iot-device).

üòÄ –í–∞—à–∞—Ç–∞ –ø—Ä–æ–≥—Ä–∞–º–∞ –∑–∞ –±—Ä–æ–µ–Ω–µ –Ω–∞ –Ω–∞–ª–∏—á–Ω–æ—Å—Ç–∏ –±–µ—à–µ —É—Å–ø–µ—à–Ω–∞!

---

**–û—Ç–∫–∞–∑ –æ—Ç –æ—Ç–≥–æ–≤–æ—Ä–Ω–æ—Å—Ç**:  
–¢–æ–∑–∏ –¥–æ–∫—É–º–µ–Ω—Ç –µ –ø—Ä–µ–≤–µ–¥–µ–Ω —Å –ø–æ–º–æ—â—Ç–∞ –Ω–∞ AI —É—Å–ª—É–≥–∞ –∑–∞ –ø—Ä–µ–≤–æ–¥ [Co-op Translator](https://github.com/Azure/co-op-translator). –í—ä–ø—Ä–µ–∫–∏ —á–µ —Å–µ —Å—Ç—Ä–µ–º–∏–º –∫—ä–º —Ç–æ—á–Ω–æ—Å—Ç, –º–æ–ª—è, –∏–º–∞–π—Ç–µ –ø—Ä–µ–¥–≤–∏–¥, —á–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–∞–Ω–∏—Ç–µ –ø—Ä–µ–≤–æ–¥–∏ –º–æ–∂–µ –¥–∞ —Å—ä–¥—ä—Ä–∂–∞—Ç –≥—Ä–µ—à–∫–∏ –∏–ª–∏ –Ω–µ—Ç–æ—á–Ω–æ—Å—Ç–∏. –û—Ä–∏–≥–∏–Ω–∞–ª–Ω–∏—è—Ç –¥–æ–∫—É–º–µ–Ω—Ç –Ω–∞ –Ω–µ–≥–æ–≤–∏—è —Ä–æ–¥–µ–Ω –µ–∑–∏–∫ —Ç—Ä—è–±–≤–∞ –¥–∞ —Å–µ —Å—á–∏—Ç–∞ –∑–∞ –∞–≤—Ç–æ—Ä–∏—Ç–µ—Ç–µ–Ω –∏–∑—Ç–æ—á–Ω–∏–∫. –ó–∞ –∫—Ä–∏—Ç–∏—á–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è —Å–µ –ø—Ä–µ–ø–æ—Ä—ä—á–≤–∞ –ø—Ä–æ—Ñ–µ—Å–∏–æ–Ω–∞–ª–µ–Ω —á–æ–≤–µ—à–∫–∏ –ø—Ä–µ–≤–æ–¥. –ù–∏–µ –Ω–µ –Ω–æ—Å–∏–º –æ—Ç–≥–æ–≤–æ—Ä–Ω–æ—Å—Ç –∑–∞ –Ω–µ–¥–æ—Ä–∞–∑—É–º–µ–Ω–∏—è –∏–ª–∏ –ø–æ–≥—Ä–µ—à–Ω–∏ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏, –ø—Ä–æ–∏–∑—Ç–∏—á–∞—â–∏ –æ—Ç –∏–∑–ø–æ–ª–∑–≤–∞–Ω–µ—Ç–æ –Ω–∞ —Ç–æ–∑–∏ –ø—Ä–µ–≤–æ–¥.