<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "52b4de6144b2efdced7797a5339d6035",
  "translation_date": "2025-08-25T22:13:55+00:00",
  "source_file": "1-getting-started/lessons/1-introduction-to-iot/virtual-device.md",
  "language_code": "de"
}
-->
# Virtueller Einplatinencomputer

Anstatt ein IoT-Ger√§t zusammen mit Sensoren und Aktoren zu kaufen, k√∂nnen Sie Ihren Computer nutzen, um IoT-Hardware zu simulieren. Das [CounterFit-Projekt](https://github.com/CounterFit-IoT/CounterFit) erm√∂glicht es Ihnen, eine App lokal auszuf√ºhren, die IoT-Hardware wie Sensoren und Aktoren simuliert. Sie k√∂nnen auf diese Sensoren und Aktoren mit lokalem Python-Code zugreifen, der genauso geschrieben wird wie der Code, den Sie auf einem Raspberry Pi mit physischer Hardware schreiben w√ºrden.

## Einrichtung

Um CounterFit zu nutzen, m√ºssen Sie einige kostenlose Software auf Ihrem Computer installieren.

### Aufgabe

Installieren Sie die erforderliche Software.

1. Installieren Sie Python. Besuchen Sie die [Python-Downloadseite](https://www.python.org/downloads/), um Anweisungen zur Installation der neuesten Python-Version zu erhalten.

1. Installieren Sie Visual Studio Code (VS Code). Dies ist der Editor, den Sie verwenden werden, um Ihren virtuellen Ger√§tecode in Python zu schreiben. Besuchen Sie die [VS Code-Dokumentation](https://code.visualstudio.com?WT.mc_id=academic-17441-jabenn), um Anweisungen zur Installation von VS Code zu erhalten.

    > üíÅ Sie k√∂nnen f√ºr diese Lektionen auch ein anderes bevorzugtes Python-IDE oder einen Editor verwenden, aber die Anweisungen basieren auf der Nutzung von VS Code.

1. Installieren Sie die VS Code Pylance-Erweiterung. Diese Erweiterung bietet Unterst√ºtzung f√ºr die Python-Programmiersprache in VS Code. Besuchen Sie die [Pylance-Erweiterungsdokumentation](https://marketplace.visualstudio.com/items?WT.mc_id=academic-17441-jabenn&itemName=ms-python.vscode-pylance), um Anweisungen zur Installation dieser Erweiterung in VS Code zu erhalten.

Die Anweisungen zur Installation und Konfiguration der CounterFit-App werden zu einem sp√§teren Zeitpunkt in den Aufgabenanweisungen gegeben, da sie projektbezogen installiert wird.

## Hallo Welt

Es ist √ºblich, bei der Arbeit mit einer neuen Programmiersprache oder Technologie eine "Hallo Welt"-Anwendung zu erstellen ‚Äì eine kleine Anwendung, die beispielsweise den Text `"Hello World"` ausgibt, um zu zeigen, dass alle Werkzeuge korrekt konfiguriert sind.

Die "Hallo Welt"-App f√ºr die virtuelle IoT-Hardware stellt sicher, dass Python und Visual Studio Code korrekt installiert sind. Sie wird auch eine Verbindung zu CounterFit herstellen, um die virtuellen IoT-Sensoren und -Aktoren zu nutzen. Es wird keine Hardware verwendet, sondern lediglich eine Verbindung hergestellt, um zu beweisen, dass alles funktioniert.

Diese App wird in einem Ordner namens `nightlight` gespeichert und sp√§ter mit unterschiedlichem Code wiederverwendet, um die Nachtlicht-Anwendung zu erstellen.

### Konfigurieren einer Python-virtuellen Umgebung

Eine der leistungsstarken Funktionen von Python ist die M√∂glichkeit, [Pip-Pakete](https://pypi.org) zu installieren ‚Äì das sind Codepakete, die von anderen Personen geschrieben und im Internet ver√∂ffentlicht wurden. Sie k√∂nnen ein Pip-Paket mit einem einzigen Befehl auf Ihrem Computer installieren und es dann in Ihrem Code verwenden. Sie werden Pip verwenden, um ein Paket zu installieren, das mit CounterFit kommuniziert.

Standardm√§√üig ist ein installiertes Paket √ºberall auf Ihrem Computer verf√ºgbar, was zu Problemen mit Paketversionen f√ºhren kann ‚Äì beispielsweise wenn eine Anwendung von einer bestimmten Version eines Pakets abh√§ngt, die nicht mehr funktioniert, wenn Sie eine neue Version f√ºr eine andere Anwendung installieren. Um dieses Problem zu umgehen, k√∂nnen Sie eine [Python-virtuelle Umgebung](https://docs.python.org/3/library/venv.html) verwenden, im Wesentlichen eine Kopie von Python in einem dedizierten Ordner. Wenn Sie Pip-Pakete installieren, werden diese nur in diesem Ordner installiert.

> üíÅ Wenn Sie einen Raspberry Pi verwenden, haben Sie auf diesem Ger√§t keine virtuelle Umgebung eingerichtet, um Pip-Pakete zu verwalten. Stattdessen verwenden Sie globale Pakete, da die Grove-Pakete global durch das Installationsskript installiert werden.

#### Aufgabe ‚Äì Konfigurieren einer Python-virtuellen Umgebung

Konfigurieren Sie eine Python-virtuelle Umgebung und installieren Sie die Pip-Pakete f√ºr CounterFit.

1. F√ºhren Sie in Ihrem Terminal oder der Befehlszeile Folgendes an einem Ort Ihrer Wahl aus, um ein neues Verzeichnis zu erstellen und zu wechseln:

    ```sh
    mkdir nightlight
    cd nightlight
    ```

1. F√ºhren Sie nun Folgendes aus, um eine virtuelle Umgebung im Ordner `.venv` zu erstellen:

    ```sh
    python3 -m venv .venv
    ```

    > üíÅ Sie m√ºssen explizit `python3` aufrufen, um die virtuelle Umgebung zu erstellen, falls Sie Python 2 zus√§tzlich zu Python 3 (der neuesten Version) installiert haben. Wenn Python 2 installiert ist, wird durch den Aufruf von `python` Python 2 anstelle von Python 3 verwendet.

1. Aktivieren Sie die virtuelle Umgebung:

    * Unter Windows:
        * Wenn Sie die Eingabeaufforderung oder die Eingabeaufforderung √ºber Windows Terminal verwenden, f√ºhren Sie Folgendes aus:

            ```cmd
            .venv\Scripts\activate.bat
            ```

        * Wenn Sie PowerShell verwenden, f√ºhren Sie Folgendes aus:

            ```powershell
            .\.venv\Scripts\Activate.ps1
            ```

            > Wenn Sie eine Fehlermeldung erhalten, dass das Ausf√ºhren von Skripten auf diesem System deaktiviert ist, m√ºssen Sie das Ausf√ºhren von Skripten durch Festlegen einer geeigneten Ausf√ºhrungsrichtlinie aktivieren. Sie k√∂nnen dies tun, indem Sie PowerShell als Administrator starten und dann den folgenden Befehl ausf√ºhren:

            ```powershell
            Set-ExecutionPolicy -ExecutionPolicy Unrestricted
            ```

            Geben Sie `Y` ein, wenn Sie zur Best√§tigung aufgefordert werden. Starten Sie dann PowerShell neu und versuchen Sie es erneut.

            Sie k√∂nnen diese Ausf√ºhrungsrichtlinie sp√§ter bei Bedarf zur√ºcksetzen. Weitere Informationen finden Sie auf der [Seite zu Ausf√ºhrungsrichtlinien in der Microsoft-Dokumentation](https://docs.microsoft.com/powershell/module/microsoft.powershell.core/about/about_execution_policies?WT.mc_id=academic-17441-jabenn).

    * Unter macOS oder Linux f√ºhren Sie Folgendes aus:

        ```cmd
        source ./.venv/bin/activate
        ```

    > üíÅ Diese Befehle sollten von demselben Ort aus ausgef√ºhrt werden, an dem Sie den Befehl zum Erstellen der virtuellen Umgebung ausgef√ºhrt haben. Sie m√ºssen niemals in den `.venv`-Ordner navigieren. Sie sollten immer den Aktivierungsbefehl und alle Befehle zum Installieren von Paketen oder Ausf√ºhren von Code von dem Ordner ausf√ºhren, in dem Sie die virtuelle Umgebung erstellt haben.

1. Sobald die virtuelle Umgebung aktiviert ist, wird der Standardbefehl `python` die Version von Python ausf√ºhren, die zum Erstellen der virtuellen Umgebung verwendet wurde. F√ºhren Sie Folgendes aus, um die Version zu √ºberpr√ºfen:

    ```sh
    python --version
    ```

    Die Ausgabe sollte Folgendes enthalten:

    ```output
    (.venv) ‚ûú  nightlight python --version
    Python 3.9.1
    ```

    > üíÅ Ihre Python-Version kann unterschiedlich sein ‚Äì solange es Version 3.6 oder h√∂her ist, ist alles in Ordnung. Wenn nicht, l√∂schen Sie diesen Ordner, installieren Sie eine neuere Version von Python und versuchen Sie es erneut.

1. F√ºhren Sie die folgenden Befehle aus, um die Pip-Pakete f√ºr CounterFit zu installieren. Diese Pakete umfassen die Haupt-CounterFit-App sowie Shims f√ºr Grove-Hardware. Diese Shims erm√∂glichen es Ihnen, Code zu schreiben, als ob Sie physische Sensoren und Aktoren aus dem Grove-√ñkosystem programmieren w√ºrden, die jedoch mit virtuellen IoT-Ger√§ten verbunden sind.

    ```sh
    pip install CounterFit
    pip install counterfit-connection
    pip install counterfit-shims-grove
    ```

    Diese Pip-Pakete werden nur in der virtuellen Umgebung installiert und sind au√üerhalb dieser nicht verf√ºgbar.

### Schreiben Sie den Code

Sobald die Python-virtuelle Umgebung bereit ist, k√∂nnen Sie den Code f√ºr die "Hallo Welt"-Anwendung schreiben.

#### Aufgabe ‚Äì Schreiben Sie den Code

Erstellen Sie eine Python-Anwendung, die `"Hello World"` in der Konsole ausgibt.

1. F√ºhren Sie in Ihrem Terminal oder der Befehlszeile Folgendes innerhalb der virtuellen Umgebung aus, um eine Python-Datei namens `app.py` zu erstellen:

    * Unter Windows f√ºhren Sie Folgendes aus:

        ```cmd
        type nul > app.py
        ```

    * Unter macOS oder Linux f√ºhren Sie Folgendes aus:

        ```cmd
        touch app.py
        ```

1. √ñffnen Sie den aktuellen Ordner in VS Code:

    ```sh
    code .
    ```

    > üíÅ Wenn Ihr Terminal unter macOS `command not found` zur√ºckgibt, bedeutet dies, dass VS Code nicht zu Ihrem PATH hinzugef√ºgt wurde. Sie k√∂nnen VS Code zu Ihrem PATH hinzuf√ºgen, indem Sie den Anweisungen im Abschnitt [Starten von der Befehlszeile aus der VS Code-Dokumentation](https://code.visualstudio.com/docs/setup/mac?WT.mc_id=academic-17441-jabenn#_launching-from-the-command-line) folgen und den Befehl anschlie√üend ausf√ºhren. Unter Windows und Linux wird VS Code standardm√§√üig zu Ihrem PATH hinzugef√ºgt.

1. Wenn VS Code startet, wird die Python-virtuelle Umgebung aktiviert. Die ausgew√§hlte virtuelle Umgebung wird in der unteren Statusleiste angezeigt:

    ![VS Code zeigt die ausgew√§hlte virtuelle Umgebung an](../../../../../translated_images/vscode-virtual-env.8ba42e04c3d533cf677e16cbe5ed9a3b80f62c6964472dc84b6f940800f0909f.de.png)

1. Wenn das VS Code-Terminal bereits l√§uft, wenn VS Code startet, wird die virtuelle Umgebung darin nicht aktiviert. Am einfachsten ist es, das Terminal mit der Schaltfl√§che **Aktives Terminal beenden** zu schlie√üen:

    ![VS Code-Schaltfl√§che zum Beenden des aktiven Terminals](../../../../../translated_images/vscode-kill-terminal.1cc4de7c6f25ee08f423f0ead714e61d069fac1eb2089e97b8a7bbcb3d45fe5e.de.png)

    Sie k√∂nnen erkennen, ob das Terminal die virtuelle Umgebung aktiviert hat, da der Name der virtuellen Umgebung ein Pr√§fix in der Terminal-Eingabeaufforderung ist. Zum Beispiel k√∂nnte es so aussehen:

    ```sh
    (.venv) ‚ûú  nightlight
    ```

    Wenn `.venv` nicht als Pr√§fix in der Eingabeaufforderung angezeigt wird, ist die virtuelle Umgebung im Terminal nicht aktiv.

1. Starten Sie ein neues VS Code-Terminal, indem Sie *Terminal -> Neues Terminal* ausw√§hlen oder `` CTRL+` `` dr√ºcken. Das neue Terminal l√§dt die virtuelle Umgebung, und der Aufruf zur Aktivierung wird im Terminal angezeigt. Die Eingabeaufforderung enth√§lt auch den Namen der virtuellen Umgebung (`.venv`):

    ```output
    ‚ûú  nightlight source .venv/bin/activate
    (.venv) ‚ûú  nightlight 
    ```

1. √ñffnen Sie die Datei `app.py` aus dem VS Code-Explorer und f√ºgen Sie den folgenden Code hinzu:

    ```python
    print('Hello World!')
    ```

    Die Funktion `print` gibt alles, was ihr √ºbergeben wird, in der Konsole aus.

1. F√ºhren Sie im VS Code-Terminal Folgendes aus, um Ihre Python-App auszuf√ºhren:

    ```sh
    python app.py
    ```

    Die folgende Ausgabe wird angezeigt:

    ```output
    (.venv) ‚ûú  nightlight python app.py 
    Hello World!
    ```

üòÄ Ihr "Hallo Welt"-Programm war ein Erfolg!

### Verbinden Sie die "Hardware"

Als zweiten "Hallo Welt"-Schritt starten Sie die CounterFit-App und verbinden Ihren Code damit. Dies ist das virtuelle √Ñquivalent zum Anschlie√üen von IoT-Hardware an ein Entwicklungsboard.

#### Aufgabe ‚Äì Verbinden Sie die "Hardware"

1. Starten Sie die CounterFit-App aus dem VS Code-Terminal mit folgendem Befehl:

    ```sh
    counterfit
    ```

    Die App wird gestartet und in Ihrem Webbrowser ge√∂ffnet:

    ![Die CounterFit-App l√§uft in einem Browser](../../../../../translated_images/counterfit-first-run.433326358b669b31d0e99c3513cb01bfbb13724d162c99cdcc8f51ecf5f9c779.de.png)

    Sie wird als *Disconnected* (Getrennt) angezeigt, und die LED in der oberen rechten Ecke ist ausgeschaltet.

1. F√ºgen Sie den folgenden Code oben in `app.py` ein:

    ```python
    from counterfit_connection import CounterFitConnection
    CounterFitConnection.init('127.0.0.1', 5000)
    ```

    Dieser Code importiert die Klasse `CounterFitConnection` aus dem Modul `counterfit_connection`, das aus dem zuvor installierten Pip-Paket `counterfit-connection` stammt. Anschlie√üend wird eine Verbindung zur CounterFit-App hergestellt, die auf `127.0.0.1` (eine IP-Adresse, die immer f√ºr den Zugriff auf Ihren lokalen Computer verwendet werden kann, oft als *localhost* bezeichnet) auf Port 5000 l√§uft.

    > üíÅ Wenn andere Apps auf Port 5000 laufen, k√∂nnen Sie dies √§ndern, indem Sie den Port im Code aktualisieren und CounterFit mit `CounterFit --port <port_number>` starten, wobei `<port_number>` durch den gew√ºnschten Port ersetzt wird.

1. Sie m√ºssen ein neues VS Code-Terminal starten, indem Sie die Schaltfl√§che **Neues integriertes Terminal erstellen** ausw√§hlen. Dies liegt daran, dass die CounterFit-App im aktuellen Terminal l√§uft.

    ![VS Code-Schaltfl√§che zum Erstellen eines neuen integrierten Terminals](../../../../../translated_images/vscode-new-terminal.77db8fc0f9cd31824b0e49a201beafe4ae4616d6c7339992cb2819e789b3eff9.de.png)

1. F√ºhren Sie in diesem neuen Terminal die Datei `app.py` wie zuvor aus. Der Status von CounterFit √§ndert sich zu **Connected**, und die LED leuchtet auf.

    ![CounterFit zeigt den Status "Connected" an](../../../../../translated_images/counterfit-connected.ed30b46d8f79b0921f3fc70be10366e596a89dca3f80c2224a9d9fc98fccf884.de.png)

> üíÅ Sie finden diesen Code im Ordner [code/virtual-device](../../../../../1-getting-started/lessons/1-introduction-to-iot/code/virtual-device).

üòÄ Ihre Verbindung zur Hardware war ein Erfolg!

**Haftungsausschluss**:  
Dieses Dokument wurde mit dem KI-√úbersetzungsdienst [Co-op Translator](https://github.com/Azure/co-op-translator) √ºbersetzt. Obwohl wir uns um Genauigkeit bem√ºhen, beachten Sie bitte, dass automatisierte √úbersetzungen Fehler oder Ungenauigkeiten enthalten k√∂nnen. Das Originaldokument in seiner urspr√ºnglichen Sprache sollte als ma√ügebliche Quelle betrachtet werden. F√ºr kritische Informationen wird eine professionelle menschliche √úbersetzung empfohlen. Wir √ºbernehmen keine Haftung f√ºr Missverst√§ndnisse oder Fehlinterpretationen, die sich aus der Nutzung dieser √úbersetzung ergeben.