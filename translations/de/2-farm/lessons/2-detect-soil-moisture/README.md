<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "4fb20273d299dc8d07a8f06c9cd0cdd9",
  "translation_date": "2025-08-25T21:36:43+00:00",
  "source_file": "2-farm/lessons/2-detect-soil-moisture/README.md",
  "language_code": "de"
}
-->
C, ausgesprochen *I-Quadrat-C*, ist ein Protokoll f√ºr mehrere Controller und Peripherieger√§te, bei dem jedes angeschlossene Ger√§t als Controller oder Peripherieger√§t √ºber den I¬≤C-Bus (der Name f√ºr ein Kommunikationssystem, das Daten √ºbertr√§gt) agieren kann. Daten werden in adressierten Paketen gesendet, wobei jedes Paket die Adresse des angeschlossenen Ger√§ts enth√§lt, f√ºr das es bestimmt ist.

> üíÅ Dieses Modell wurde fr√ºher als Master/Slave bezeichnet, aber diese Terminologie wird aufgrund ihrer Assoziation mit der Sklaverei zunehmend vermieden. Die [Open Source Hardware Association hat Controller/Peripherie √ºbernommen](https://www.oshwa.org/a-resolution-to-redefine-spi-signal-names/), aber Sie k√∂nnten noch auf Verweise auf die alte Terminologie sto√üen.

Ger√§te haben eine Adresse, die beim Anschluss an den I¬≤C-Bus verwendet wird, und diese ist normalerweise fest im Ger√§t kodiert. Zum Beispiel haben alle Grove-Sensoren von Seeed die gleiche Adresse, sodass alle Lichtsensoren dieselbe Adresse haben, alle Taster eine andere Adresse, die sich von der des Lichtsensors unterscheidet. Einige Ger√§te bieten M√∂glichkeiten, die Adresse zu √§ndern, indem man Jumper-Einstellungen √§ndert oder Pins miteinander verl√∂tet.

I¬≤C hat einen Bus, der aus 2 Hauptleitungen sowie 2 Stromleitungen besteht:

| Leitung | Name | Beschreibung |
| ---- | --------- | ----------- |
| SDA | Serielle Datenleitung | Diese Leitung dient zum Senden von Daten zwischen Ger√§ten. |
| SCL | Serieller Takt | Diese Leitung sendet ein Taktsignal mit einer vom Controller festgelegten Rate. |
| VCC | Versorgungsspannung | Die Stromversorgung f√ºr die Ger√§te. Diese ist mit den SDA- und SCL-Leitungen verbunden, um deren Stromversorgung √ºber einen Pull-up-Widerstand bereitzustellen, der das Signal ausschaltet, wenn kein Ger√§t der Controller ist. |
| GND | Masse | Dies stellt eine gemeinsame Masse f√ºr den Stromkreis bereit. |

![I2C-Bus mit 3 Ger√§ten, die an die SDA- und SCL-Leitungen angeschlossen sind und eine gemeinsame Masseleitung teilen](../../../../../translated_images/i2c.83da845dde02256bdd462dbe0d5145461416b74930571b89d1ae142841eeb584.de.png)

Um Daten zu senden, gibt ein Ger√§t eine Startbedingung aus, um anzuzeigen, dass es bereit ist, Daten zu senden. Es wird dann zum Controller. Der Controller sendet anschlie√üend die Adresse des Ger√§ts, mit dem er kommunizieren m√∂chte, sowie die Information, ob er Daten lesen oder schreiben m√∂chte. Nachdem die Daten √ºbertragen wurden, sendet der Controller eine Stoppbedingung, um anzuzeigen, dass er fertig ist. Danach kann ein anderes Ger√§t zum Controller werden und Daten senden oder empfangen.

I<sup>2</sup>C hat Geschwindigkeitsbegrenzungen mit drei verschiedenen Modi, die mit festen Geschwindigkeiten arbeiten. Der schnellste ist der High-Speed-Modus mit einer maximalen Geschwindigkeit von 3,4 Mbps (Megabit pro Sekunde), obwohl nur sehr wenige Ger√§te diese Geschwindigkeit unterst√ºtzen. Der Raspberry Pi ist beispielsweise auf den Fast-Modus mit 400 Kbps (Kilobit pro Sekunde) begrenzt. Der Standardmodus l√§uft mit 100 Kbps.

> üíÅ Wenn Sie einen Raspberry Pi mit einem Grove Base Hat als Ihre IoT-Hardware verwenden, k√∂nnen Sie auf der Platine mehrere I<sup>2</sup>C-Steckpl√§tze sehen, die Sie zur Kommunikation mit I<sup>2</sup>C-Sensoren nutzen k√∂nnen. Analoge Grove-Sensoren verwenden ebenfalls I<sup>2</sup>C mit einem ADC, um analoge Werte als digitale Daten zu senden. Der von Ihnen verwendete Lichtsensor simulierte also einen analogen Pin, wobei der Wert √ºber I<sup>2</sup>C gesendet wurde, da der Raspberry Pi nur digitale Pins unterst√ºtzt.

### Universal Asynchronous Receiver-Transmitter (UART)

UART umfasst physische Schaltungen, die es zwei Ger√§ten erm√∂glichen, miteinander zu kommunizieren. Jedes Ger√§t hat zwei Kommunikationspins ‚Äì Senden (Tx) und Empfangen (Rx), wobei der Tx-Pin des ersten Ger√§ts mit dem Rx-Pin des zweiten verbunden ist und der Tx-Pin des zweiten Ger√§ts mit dem Rx-Pin des ersten verbunden ist. Dies erm√∂glicht den Datenaustausch in beide Richtungen.

* Ger√§t 1 sendet Daten von seinem Tx-Pin, die von Ger√§t 2 an dessen Rx-Pin empfangen werden.
* Ger√§t 1 empf√§ngt Daten an seinem Rx-Pin, die von Ger√§t 2 √ºber dessen Tx-Pin gesendet werden.

![UART mit dem Tx-Pin eines Chips, der mit dem Rx-Pin eines anderen verbunden ist, und umgekehrt](../../../../../translated_images/uart.d0dbd3fb9e3728c6ee1995c8206f3cdb13cdfd208f13745e8ef6854cab75e421.de.png)

> üéì Die Daten werden bitweise gesendet, und dies wird als *serielle* Kommunikation bezeichnet. Die meisten Betriebssysteme und Mikrocontroller verf√ºgen √ºber *serielle Ports*, also Verbindungen, die serielle Daten senden und empfangen k√∂nnen und Ihrem Code zur Verf√ºgung stehen.

UART-Ger√§te haben eine [Baudrate](https://wikipedia.org/wiki/Symbol_rate) (auch bekannt als Symbolrate), die die Geschwindigkeit angibt, mit der Daten in Bits pro Sekunde gesendet und empfangen werden. Eine √ºbliche Baudrate ist 9.600, was bedeutet, dass 9.600 Bits (0 und 1) Daten pro Sekunde gesendet werden.

UART verwendet Start- und Stoppbits ‚Äì das hei√üt, es sendet ein Startbit, um anzuzeigen, dass es gleich ein Byte (8 Bits) Daten senden wird, und ein Stoppbit, nachdem es die 8 Bits gesendet hat.

Die Geschwindigkeit von UART h√§ngt von der Hardware ab, aber selbst die schnellsten Implementierungen √ºberschreiten nicht 6,5 Mbps (Megabit pro Sekunde, oder Millionen von Bits, 0 oder 1, die pro Sekunde gesendet werden).

Sie k√∂nnen UART √ºber GPIO-Pins verwenden ‚Äì Sie k√∂nnen einen Pin als Tx und einen anderen als Rx festlegen und diese dann mit einem anderen Ger√§t verbinden.

> üíÅ Wenn Sie einen Raspberry Pi mit einem Grove Base Hat als Ihre IoT-Hardware verwenden, k√∂nnen Sie auf der Platine einen UART-Steckplatz sehen, den Sie zur Kommunikation mit Sensoren nutzen k√∂nnen, die das UART-Protokoll verwenden.

### Serial Peripheral Interface (SPI)

SPI ist f√ºr die Kommunikation √ºber kurze Entfernungen konzipiert, beispielsweise auf einem Mikrocontroller, um mit einem Speicherger√§t wie Flash-Speicher zu kommunizieren. Es basiert auf einem Controller/Peripherie-Modell, bei dem ein einzelner Controller (normalerweise der Prozessor des IoT-Ger√§ts) mit mehreren Peripherieger√§ten interagiert. Der Controller steuert alles, indem er eine Peripherie ausw√§hlt und Daten sendet oder anfordert.

> üíÅ Wie bei I<sup>2</sup>C sind die Begriffe Controller und Peripherie neuere √Ñnderungen, sodass Sie m√∂glicherweise noch die √§lteren Begriffe sehen.

SPI-Controller verwenden drei Dr√§hte sowie einen zus√§tzlichen Draht pro Peripherieger√§t. Peripherieger√§te verwenden vier Dr√§hte. Diese Dr√§hte sind:

| Draht | Name | Beschreibung |
| ---- | --------- | ----------- |
| COPI | Controller Output, Peripheral Input | Dieser Draht dient zum Senden von Daten vom Controller an die Peripherie. |
| CIPO | Controller Input, Peripheral Output | Dieser Draht dient zum Senden von Daten von der Peripherie an den Controller. |
| SCLK | Serial Clock | Dieser Draht sendet ein Taktsignal mit einer vom Controller festgelegten Rate. |
| CS   | Chip Select | Der Controller hat mehrere Dr√§hte, einen pro Peripherieger√§t, und jeder Draht ist mit dem CS-Draht des entsprechenden Peripherieger√§ts verbunden. |

![SPI mit einem Controller und zwei Peripherieger√§ten](../../../../../translated_images/spi.297431d6f98b386b4ff88aea44ce9c1e7acfb1ef69c7e4e388a7aa97b6948e24.de.png)

Der CS-Draht wird verwendet, um jeweils ein Peripherieger√§t zu aktivieren, das √ºber die COPI- und CIPO-Dr√§hte kommuniziert. Wenn der Controller das Peripherieger√§t wechseln muss, deaktiviert er den CS-Draht, der mit dem derzeit aktiven Peripherieger√§t verbunden ist, und aktiviert dann den Draht, der mit dem Peripherieger√§t verbunden ist, mit dem er als N√§chstes kommunizieren m√∂chte.

SPI ist *voll-duplex*, was bedeutet, dass der Controller gleichzeitig Daten senden und empfangen kann, und zwar vom selben Peripherieger√§t √ºber die COPI- und CIPO-Dr√§hte. SPI verwendet ein Taktsignal auf dem SCLK-Draht, um die Ger√§te zu synchronisieren, sodass es im Gegensatz zum direkten Senden √ºber UART keine Start- und Stoppbits ben√∂tigt.

F√ºr SPI gibt es keine definierten Geschwindigkeitsbegrenzungen, und Implementierungen k√∂nnen oft mehrere Megabyte Daten pro Sekunde √ºbertragen.

IoT-Entwicklerkits unterst√ºtzen h√§ufig SPI √ºber einige der GPIO-Pins. Beispielsweise k√∂nnen Sie auf einem Raspberry Pi die GPIO-Pins 19, 21, 23, 24 und 26 f√ºr SPI verwenden.

### Drahtlos

Einige Sensoren k√∂nnen √ºber standardisierte drahtlose Protokolle wie Bluetooth (haupts√§chlich Bluetooth Low Energy, oder BLE), LoRaWAN (ein **Lo**ng **Ra**nge Low Power Networking-Protokoll) oder WiFi kommunizieren. Diese erm√∂glichen den Einsatz von entfernten Sensoren, die nicht physisch mit einem IoT-Ger√§t verbunden sind.

Ein Beispiel hierf√ºr sind kommerzielle Bodenfeuchtigkeitssensoren. Diese messen die Bodenfeuchtigkeit in einem Feld und senden die Daten √ºber LoRaWAN an ein Hub-Ger√§t, das die Daten verarbeitet oder √ºber das Internet weiterleitet. Dadurch kann der Sensor entfernt vom IoT-Ger√§t sein, das die Daten verwaltet, was den Stromverbrauch reduziert und den Bedarf an gro√üen WiFi-Netzwerken oder langen Kabeln verringert.

BLE ist beliebt f√ºr fortschrittliche Sensoren wie Fitness-Tracker, die am Handgelenk getragen werden. Diese kombinieren mehrere Sensoren und senden die Sensordaten √ºber BLE an ein IoT-Ger√§t, beispielsweise Ihr Telefon.

‚úÖ Haben Sie Bluetooth-Sensoren bei sich, in Ihrem Haus oder in Ihrer Schule? Dazu k√∂nnten Temperatur- oder Bewegungssensoren, Ger√§te-Tracker und Fitnessger√§te geh√∂ren.

Eine beliebte Methode f√ºr kommerzielle Ger√§te, sich zu verbinden, ist Zigbee. Zigbee verwendet WiFi, um Mesh-Netzwerke zwischen Ger√§ten zu bilden, wobei jedes Ger√§t sich mit so vielen nahegelegenen Ger√§ten wie m√∂glich verbindet und eine gro√üe Anzahl von Verbindungen wie ein Spinnennetz bildet. Wenn ein Ger√§t eine Nachricht ins Internet senden m√∂chte, kann es diese an die n√§chstgelegenen Ger√§te senden, die sie dann an andere nahegelegene Ger√§te weiterleiten und so weiter, bis sie einen Koordinator erreicht und ins Internet gesendet werden kann.

> üêù Der Name Zigbee bezieht sich auf den Schw√§nzeltanz von Honigbienen nach ihrer R√ºckkehr zum Bienenstock.

## Bodenfeuchtigkeit messen

Sie k√∂nnen die Feuchtigkeitswerte im Boden mit einem Bodenfeuchtigkeitssensor, einem IoT-Ger√§t und einer Zimmerpflanze oder einem nahegelegenen St√ºck Erde messen.

### Aufgabe ‚Äì Bodenfeuchtigkeit messen

Arbeiten Sie die entsprechende Anleitung durch, um die Bodenfeuchtigkeit mit Ihrem IoT-Ger√§t zu messen:

* [Arduino - Wio Terminal](wio-terminal-soil-moisture.md)
* [Einplatinencomputer - Raspberry Pi](pi-soil-moisture.md)
* [Einplatinencomputer - Virtuelles Ger√§t](virtual-device-soil-moisture.md)

## Sensor-Kalibrierung

Sensoren basieren auf der Messung elektrischer Eigenschaften wie Widerstand oder Kapazit√§t.

> üéì Widerstand, gemessen in Ohm (Œ©), ist der Grad des Widerstands gegen den elektrischen Strom, der durch ein Material flie√üt. Wenn eine Spannung an ein Material angelegt wird, h√§ngt die Menge des Stroms, der durch das Material flie√üt, vom Widerstand des Materials ab. Weitere Informationen finden Sie auf der [Wikipedia-Seite √ºber elektrischen Widerstand](https://wikipedia.org/wiki/Electrical_resistance_and_conductance).

> üéì Kapazit√§t, gemessen in Farad (F), ist die F√§higkeit einer Komponente oder eines Schaltkreises, elektrische Energie zu sammeln und zu speichern. Weitere Informationen finden Sie auf der [Wikipedia-Seite √ºber Kapazit√§t](https://wikipedia.org/wiki/Capacitance).

Diese Messungen sind nicht immer n√ºtzlich ‚Äì stellen Sie sich einen Temperatursensor vor, der Ihnen eine Messung von 22,5 kŒ© liefert! Stattdessen muss der gemessene Wert in eine n√ºtzliche Einheit umgewandelt werden, indem er kalibriert wird ‚Äì das hei√üt, die gemessenen Werte werden mit der gemessenen Gr√∂√üe abgeglichen, um neue Messungen in die richtige Einheit umrechnen zu k√∂nnen.

Einige Sensoren sind bereits vorkalibriert. Beispielsweise war der Temperatursensor, den Sie in der letzten Lektion verwendet haben, bereits so kalibriert, dass er eine Temperaturmessung in ¬∞C zur√ºckgeben kann. Im Werk w√ºrde der erste Sensor, der hergestellt wird, einer Reihe bekannter Temperaturen ausgesetzt und der Widerstand gemessen. Dies w√ºrde dann verwendet, um eine Berechnung zu erstellen, die den gemessenen Wert in Œ© (die Einheit des Widerstands) in ¬∞C umwandeln kann.

> üíÅ Die Formel zur Berechnung des Widerstands aus der Temperatur wird als [Steinhart-Hart-Gleichung](https://wikipedia.org/wiki/Steinhart‚ÄìHart_equation) bezeichnet.

### Kalibrierung des Bodenfeuchtigkeitssensors

Die Bodenfeuchtigkeit wird entweder durch gravimetrischen oder volumetrischen Wassergehalt gemessen.

* Gravimetrisch ist das Gewicht des Wassers in einer Gewichtseinheit des Bodens, gemessen als Anzahl der Kilogramm Wasser pro Kilogramm trockenen Boden.
* Volumetrisch ist das Volumen des Wassers in einer Volumeneinheit des Bodens, gemessen als Anzahl der Kubikmeter Wasser pro Kubikmeter trockenen Boden.

> üá∫üá∏ F√ºr Amerikaner k√∂nnen diese Einheiten aufgrund ihrer Konsistenz in Pfund statt Kilogramm oder in Kubikfu√ü statt Kubikmeter gemessen werden.

Bodenfeuchtigkeitssensoren messen elektrischen Widerstand oder Kapazit√§t ‚Äì dies variiert nicht nur mit der Bodenfeuchtigkeit, sondern auch mit der Bodenart, da die Bestandteile des Bodens seine elektrischen Eigenschaften ver√§ndern k√∂nnen. Idealerweise sollten Sensoren kalibriert werden ‚Äì das hei√üt, Messwerte des Sensors werden mit Messungen verglichen, die mit einer wissenschaftlicheren Methode ermittelt wurden. Beispielsweise kann ein Labor den gravimetrischen Wassergehalt des Bodens mit Proben eines bestimmten Feldes berechnen, die einige Male im Jahr entnommen werden, und diese Zahlen zur Kalibrierung des Sensors verwenden, indem die Sensorwerte mit dem gravimetrischen Wassergehalt abgeglichen werden.

![Ein Diagramm von Spannung vs. Bodenfeuchtigkeitsgehalt](../../../../../translated_images/soil-moisture-to-voltage.df86d80cda1587008f312431ed5f79eb6c50c58d4fbc25a6763c5e9127c3106b.de.png)

Das obige Diagramm zeigt, wie ein Sensor kalibriert wird. Die Spannung wird f√ºr eine Bodenprobe erfasst, die dann im Labor gemessen wird, indem das feuchte Gewicht mit dem trockenen Gewicht verglichen wird (indem das Gewicht im feuchten Zustand gemessen, dann im Ofen getrocknet und im trockenen Zustand gemessen wird). Sobald einige Messwerte erfasst wurden, k√∂nnen diese in einem Diagramm dargestellt und eine Linie an die Punkte angepasst werden. Diese Linie kann dann verwendet werden, um Bodenfeuchtigkeitssensorwerte, die von einem IoT-Ger√§t erfasst wurden, in tats√§chliche Bodenfeuchtigkeitsmessungen umzuwandeln.

üíÅ Bei resistiven Bodenfeuchtigkeitssensoren steigt die Spannung mit zunehmender Bodenfeuchtigkeit. Bei kapazitiven Bodenfeuchtigkeitssensoren sinkt die Spannung mit zunehmender Bodenfeuchtigkeit, sodass die Diagramme f√ºr diese Sensoren abw√§rts statt aufw√§rts geneigt w√§ren.

![Ein Bodenfeuchtigkeitswert, der aus dem Diagramm interpoliert wurde](../../../../../translated_images/soil-moisture-to-voltage-with-reading.681cb3e1f8b68caf5547dbf1415851c82e201edfb78face16fc98da4051ed9b2.de.png)

Das obige Diagramm zeigt einen Spannungswert von einem Bodenfeuchtigkeitssensor, und indem man diesem Wert zur Linie im Diagramm folgt, kann die tats√§chliche Bodenfeuchtigkeit berechnet werden.

Dieser Ansatz bedeutet, dass der Landwirt nur einige Labormessungen f√ºr ein Feld durchf√ºhren muss, dann kann er IoT-Ger√§te verwenden, um die Bodenfeuchtigkeit zu messen ‚Äì was die Zeit f√ºr die Messung erheblich verk√ºrzt.

---

## üöÄ Herausforderung

Resistive und kapazitive Bodenfeuchtigkeitssensoren haben eine Reihe von Unterschieden. Was sind diese Unterschiede, und welcher Typ (falls √ºberhaupt) ist der beste f√ºr einen Landwirt? √Ñndert sich diese Antwort zwischen Entwicklungsl√§ndern und Industriel√§ndern?

## Quiz nach der Vorlesung

[Quiz nach der Vorlesung](https://black-meadow-040d15503.1.azurestaticapps.net/quiz/12)

## √úberpr√ºfung & Selbststudium

Lesen Sie mehr √ºber die Hardware und Protokolle, die von Sensoren und Aktoren verwendet werden:

* [GPIO Wikipedia-Seite](https://wikipedia.org/wiki/General-purpose_input/output)
* [UART Wikipedia-Seite](https://wikipedia.org/wiki/Universal_asynchronous_receiver-transmitter)
* [SPI Wikipedia-Seite](https://wikipedia.org/wiki/Serial_Peripheral_Interface)
* [I<sup>2</sup>C Wikipedia-Seite](https://wikipedia.org/wiki/I¬≤C)
* [Zigbee Wikipedia-Seite](https://wikipedia.org/wiki/Zigbee)

## Aufgabe

[Kalibrieren Sie Ihren Sensor](assignment.md)

**Haftungsausschluss**:  
Dieses Dokument wurde mit dem KI-√úbersetzungsdienst [Co-op Translator](https://github.com/Azure/co-op-translator) √ºbersetzt. Obwohl wir uns um Genauigkeit bem√ºhen, beachten Sie bitte, dass automatisierte √úbersetzungen Fehler oder Ungenauigkeiten enthalten k√∂nnen. Das Originaldokument in seiner urspr√ºnglichen Sprache sollte als ma√ügebliche Quelle betrachtet werden. F√ºr kritische Informationen wird eine professionelle menschliche √úbersetzung empfohlen. Wir √ºbernehmen keine Haftung f√ºr Missverst√§ndnisse oder Fehlinterpretationen, die sich aus der Nutzung dieser √úbersetzung ergeben.