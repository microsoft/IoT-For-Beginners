<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "4efc74299e19f5d08f2f3f34451a11ba",
  "translation_date": "2025-08-26T14:28:51+00:00",
  "source_file": "2-farm/lessons/1-predict-plant-growth/single-board-computer-temp-publish.md",
  "language_code": "hk"
}
-->
# ç™¼ä½ˆæº«åº¦æ•¸æ“š - è™›æ“¬ç‰©è¯ç¶²ç¡¬ä»¶èˆ‡æ¨¹è“æ´¾

åœ¨æœ¬èª²ç¨‹çš„é€™éƒ¨åˆ†ï¼Œä½ å°‡é€šé MQTT ç™¼ä½ˆç”±æ¨¹è“æ´¾æˆ–è™›æ“¬ç‰©è¯ç¶²è¨­å‚™æª¢æ¸¬åˆ°çš„æº«åº¦å€¼ï¼Œä»¥ä¾¿ç¨å¾Œç”¨æ–¼è¨ˆç®— GDDã€‚

## ç™¼ä½ˆæº«åº¦æ•¸æ“š

ä¸€æ—¦è®€å–åˆ°æº«åº¦æ•¸æ“šï¼Œå°±å¯ä»¥é€šé MQTT ç™¼ä½ˆåˆ°æŸäº›ã€Œä¼ºæœå™¨ã€ä»£ç¢¼ï¼Œè©²ä»£ç¢¼å°‡è®€å–é€™äº›æ•¸æ“šä¸¦å­˜å„²èµ·ä¾†ï¼Œæº–å‚™ç”¨æ–¼ GDD è¨ˆç®—ã€‚

### ä»»å‹™ - ç™¼ä½ˆæº«åº¦æ•¸æ“š

ç·¨ç¨‹è¨­å‚™ä»¥ç™¼ä½ˆæº«åº¦æ•¸æ“šã€‚

1. å¦‚æœå°šæœªæ‰“é–‹ `temperature-sensor` æ‡‰ç”¨é …ç›®ï¼Œè«‹å°‡å…¶æ‰“é–‹ã€‚

1. é‡è¤‡ä½ åœ¨ç¬¬ 4 èª²ä¸­å®Œæˆçš„æ­¥é©Ÿï¼Œé€£æ¥åˆ° MQTT ä¸¦ç™¼é€é™æ¸¬æ•¸æ“šã€‚ä½ å°‡ä½¿ç”¨ç›¸åŒçš„å…¬å…± Mosquitto brokerã€‚

    å…·é«”æ­¥é©Ÿå¦‚ä¸‹ï¼š

    - æ·»åŠ  MQTT çš„ pip å¥—ä»¶
    - æ·»åŠ é€£æ¥åˆ° MQTT broker çš„ä»£ç¢¼
    - æ·»åŠ ç™¼ä½ˆé™æ¸¬æ•¸æ“šçš„ä»£ç¢¼

    > âš ï¸ å¦‚æœ‰éœ€è¦ï¼Œè«‹åƒè€ƒ[é€£æ¥åˆ° MQTT çš„æŒ‡å¼•](../../../1-getting-started/lessons/4-connect-internet/single-board-computer-mqtt.md)å’Œ[ç™¼é€é™æ¸¬æ•¸æ“šçš„æŒ‡å¼•](../../../1-getting-started/lessons/4-connect-internet/single-board-computer-telemetry.md)ï¼ˆç¬¬ 4 èª²ï¼‰ã€‚

1. ç¢ºä¿ `client_name` åæ˜ æ­¤é …ç›®çš„åç¨±ï¼š

    ```python
    client_name = id + 'temperature_sensor_client'
    ```

1. å°æ–¼é™æ¸¬æ•¸æ“šï¼Œèˆ‡å…¶ç™¼é€å…‰ç·šå€¼ï¼Œä¸å¦‚ç™¼é€å¾ DHT å‚³æ„Ÿå™¨è®€å–çš„æº«åº¦å€¼ï¼Œä¸¦å°‡å…¶ä½œç‚º JSON æ–‡æª”ä¸­çš„ä¸€å€‹å±¬æ€§ï¼Œåç‚º `temperature`ï¼š

    ```python
    _, temp = sensor.read()
    telemetry = json.dumps({'temperature' : temp})
    ```

1. æº«åº¦å€¼ä¸éœ€è¦é »ç¹è®€å–â€”â€”åœ¨çŸ­æ™‚é–“å…§å®ƒä¸æœƒæœ‰å¤ªå¤§è®ŠåŒ–ï¼Œå› æ­¤å°‡ `time.sleep` è¨­ç½®ç‚º 10 åˆ†é˜ï¼š

    ```cpp
    time.sleep(10 * 60);
    ```

    > ğŸ’ `sleep` å‡½æ•¸ä»¥ç§’ç‚ºå–®ä½ï¼Œå› æ­¤ç‚ºäº†æ›´æ˜“æ–¼é–±è®€ï¼Œé€™è£¡çš„å€¼æ˜¯é€šéè¨ˆç®—å¾—å‡ºçš„ã€‚1 åˆ†é˜æœ‰ 60 ç§’ï¼Œå› æ­¤ 10 xï¼ˆæ¯åˆ†é˜ 60 ç§’ï¼‰å¾—å‡º 10 åˆ†é˜çš„å»¶é²ã€‚

1. ä»¥èˆ‡å®Œæˆä¸Šä¸€éƒ¨åˆ†ä½œæ¥­ç›¸åŒçš„æ–¹å¼é‹è¡Œä»£ç¢¼ã€‚å¦‚æœä½ ä½¿ç”¨çš„æ˜¯è™›æ“¬ç‰©è¯ç¶²è¨­å‚™ï¼Œè«‹ç¢ºä¿ CounterFit æ‡‰ç”¨æ­£åœ¨é‹è¡Œï¼Œä¸¦ä¸”å·²åœ¨æ­£ç¢ºçš„å¼•è…³ä¸Šå‰µå»ºäº†æ¿•åº¦å’Œæº«åº¦å‚³æ„Ÿå™¨ã€‚

    ```output
    pi@raspberrypi:~/temperature-sensor $ python3 app.py
    MQTT connected!
    Sending telemetry  {"temperature": 25}
    Sending telemetry  {"temperature": 25}
    ```

> ğŸ’ ä½ å¯ä»¥åœ¨ [code-publish-temperature/virtual-device](../../../../../2-farm/lessons/1-predict-plant-growth/code-publish-temperature/virtual-device) æ–‡ä»¶å¤¾æˆ– [code-publish-temperature/pi](../../../../../2-farm/lessons/1-predict-plant-growth/code-publish-temperature/pi) æ–‡ä»¶å¤¾ä¸­æ‰¾åˆ°æ­¤ä»£ç¢¼ã€‚

ğŸ˜€ ä½ å·²æˆåŠŸå°‡è¨­å‚™çš„æº«åº¦æ•¸æ“šä½œç‚ºé™æ¸¬æ•¸æ“šç™¼ä½ˆå‡ºå»ã€‚

---

**å…è²¬è²æ˜**ï¼š  
æ­¤æ–‡ä»¶å·²ä½¿ç”¨äººå·¥æ™ºèƒ½ç¿»è­¯æœå‹™ [Co-op Translator](https://github.com/Azure/co-op-translator) ç¿»è­¯ã€‚æˆ‘å€‘è‡´åŠ›æ–¼æä¾›æº–ç¢ºçš„ç¿»è­¯ï¼Œä½†è«‹æ³¨æ„ï¼Œè‡ªå‹•ç¿»è­¯å¯èƒ½åŒ…å«éŒ¯èª¤æˆ–ä¸æº–ç¢ºä¹‹è™•ã€‚æ‡‰ä»¥åŸå§‹èªè¨€çš„æ–‡ä»¶ä½œç‚ºæ¬Šå¨ä¾†æºã€‚å°æ–¼é—œéµè³‡è¨Šï¼Œå»ºè­°ä½¿ç”¨å°ˆæ¥­çš„äººå·¥ä½œç¿»è­¯ã€‚æˆ‘å€‘å°å› ä½¿ç”¨æ­¤ç¿»è­¯è€Œå¼•èµ·çš„ä»»ä½•èª¤è§£æˆ–éŒ¯èª¤è§£è®€æ¦‚ä¸è² è²¬ã€‚