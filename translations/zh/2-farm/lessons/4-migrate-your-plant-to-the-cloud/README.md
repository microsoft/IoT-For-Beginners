<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "4d8e7a066d75b625e7a979c14157041d",
  "translation_date": "2025-08-24T22:41:43+00:00",
  "source_file": "2-farm/lessons/4-migrate-your-plant-to-the-cloud/README.md",
  "language_code": "zh"
}
-->
# å°†æ¤ç‰©è¿ç§»åˆ°äº‘ç«¯

![æœ¬è¯¾çš„æ‰‹ç»˜ç¬”è®°æ¦‚è§ˆ](../../../../../translated_images/lesson-8.3f21f3c11159e6a0a376351973ea5724d5de68fa23b4288853a174bed9ac48c3.zh.jpg)

> æ‰‹ç»˜ç¬”è®°ç”± [Nitya Narasimhan](https://github.com/nitya) æä¾›ã€‚ç‚¹å‡»å›¾ç‰‡æŸ¥çœ‹å¤§å›¾ã€‚

æœ¬è¯¾ç¨‹æ˜¯ [Microsoft Reactor](https://developer.microsoft.com/reactor/?WT.mc_id=academic-17441-jabenn) çš„ [IoT åˆå­¦è€…é¡¹ç›® 2 - æ•°å­—å†œä¸šç³»åˆ—](https://youtube.com/playlist?list=PLmsFUfdnGr3yCutmcVg6eAUEfsGiFXgcx) çš„ä¸€éƒ¨åˆ†ã€‚

[![ä½¿ç”¨ Azure IoT Hub å°†è®¾å¤‡è¿æ¥åˆ°äº‘ç«¯](https://img.youtube.com/vi/bNxjopXkhvk/0.jpg)](https://youtu.be/bNxjopXkhvk)

## è¯¾å‰æµ‹éªŒ

[è¯¾å‰æµ‹éªŒ](https://black-meadow-040d15503.1.azurestaticapps.net/quiz/15)

## ç®€ä»‹

åœ¨ä¸Šä¸€è¯¾ä¸­ï¼Œä½ å­¦ä¹ äº†å¦‚ä½•å°†æ¤ç‰©è¿æ¥åˆ° MQTT brokerï¼Œå¹¶é€šè¿‡æœ¬åœ°è¿è¡Œçš„æœåŠ¡å™¨ä»£ç æ§åˆ¶ç»§ç”µå™¨ã€‚è¿™æ„æˆäº†ä»å®¶ä¸­å•ä¸ªæ¤ç‰©åˆ°å•†ä¸šå†œåœºä½¿ç”¨çš„è”ç½‘è‡ªåŠ¨çŒæº‰ç³»ç»Ÿçš„æ ¸å¿ƒã€‚

IoT è®¾å¤‡é€šè¿‡å…¬å…± MQTT broker è¿›è¡Œé€šä¿¡ï¼Œä»¥æ¼”ç¤ºåŸç†ï¼Œä½†è¿™ç§æ–¹å¼å¹¶ä¸æ˜¯æœ€å¯é æˆ–å®‰å…¨çš„ã€‚åœ¨æœ¬è¯¾ä¸­ï¼Œä½ å°†å­¦ä¹ äº‘ç«¯ä»¥åŠå…¬å…±äº‘æœåŠ¡æä¾›çš„ IoT åŠŸèƒ½ã€‚ä½ è¿˜å°†å­¦ä¹ å¦‚ä½•å°†æ¤ç‰©ä»å…¬å…± MQTT broker è¿ç§»åˆ°è¿™äº›äº‘æœåŠ¡ä¹‹ä¸€ã€‚

æœ¬è¯¾å†…å®¹åŒ…æ‹¬ï¼š

* [ä»€ä¹ˆæ˜¯äº‘ï¼Ÿ](../../../../../2-farm/lessons/4-migrate-your-plant-to-the-cloud)
* [åˆ›å»ºäº‘è®¢é˜…](../../../../../2-farm/lessons/4-migrate-your-plant-to-the-cloud)
* [äº‘ IoT æœåŠ¡](../../../../../2-farm/lessons/4-migrate-your-plant-to-the-cloud)
* [åœ¨äº‘ç«¯åˆ›å»º IoT æœåŠ¡](../../../../../2-farm/lessons/4-migrate-your-plant-to-the-cloud)
* [ä¸ IoT Hub é€šä¿¡](../../../../../2-farm/lessons/4-migrate-your-plant-to-the-cloud)
* [å°†è®¾å¤‡è¿æ¥åˆ° IoT æœåŠ¡](../../../../../2-farm/lessons/4-migrate-your-plant-to-the-cloud)

## ä»€ä¹ˆæ˜¯äº‘ï¼Ÿ

åœ¨äº‘å‡ºç°ä¹‹å‰ï¼Œå½“å…¬å¸æƒ³ä¸ºå‘˜å·¥ï¼ˆå¦‚æ•°æ®åº“æˆ–æ–‡ä»¶å­˜å‚¨ï¼‰æˆ–å…¬ä¼—ï¼ˆå¦‚ç½‘ç«™ï¼‰æä¾›æœåŠ¡æ—¶ï¼Œä»–ä»¬éœ€è¦å»ºç«‹å¹¶è¿è¡Œæ•°æ®ä¸­å¿ƒã€‚è¿™å¯èƒ½æ˜¯ä¸€ä¸ªæœ‰å°‘é‡è®¡ç®—æœºçš„æˆ¿é—´ï¼Œä¹Ÿå¯èƒ½æ˜¯ä¸€ä¸ªæœ‰è®¸å¤šè®¡ç®—æœºçš„å»ºç­‘ã€‚å…¬å¸éœ€è¦ç®¡ç†æ‰€æœ‰äº‹æƒ…ï¼ŒåŒ…æ‹¬ï¼š

* è´­ä¹°è®¡ç®—æœº
* ç¡¬ä»¶ç»´æŠ¤
* ç”µåŠ›å’Œå†·å´
* ç½‘ç»œè¿æ¥
* å®‰å…¨æ€§ï¼ŒåŒ…æ‹¬å»ºç­‘å®‰å…¨å’Œè®¡ç®—æœºè½¯ä»¶å®‰å…¨
* è½¯ä»¶å®‰è£…å’Œæ›´æ–°

è¿™å¯èƒ½éå¸¸æ˜‚è´µï¼Œéœ€è¦å¹¿æ³›çš„ä¸“ä¸šå‘˜å·¥ï¼Œå¹¶ä¸”åœ¨éœ€è¦æ—¶æ”¹å˜é€Ÿåº¦éå¸¸æ…¢ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸€å®¶åœ¨çº¿å•†åº—éœ€è¦ä¸ºç¹å¿™çš„å‡æœŸå­£èŠ‚åšè®¡åˆ’ï¼Œä»–ä»¬éœ€è¦æå‰å‡ ä¸ªæœˆè´­ä¹°æ›´å¤šç¡¬ä»¶ã€é…ç½®ã€å®‰è£…å¹¶å®‰è£…è¿è¡Œé”€å”®æµç¨‹çš„è½¯ä»¶ã€‚å‡æœŸå­£èŠ‚ç»“æŸåï¼Œé”€å”®é‡ä¸‹é™ï¼Œä»–ä»¬ä¼šç•™ä¸‹é—²ç½®çš„è®¡ç®—æœºï¼Œç›´åˆ°ä¸‹ä¸€ä¸ªç¹å¿™å­£èŠ‚ã€‚

âœ… ä½ è®¤ä¸ºè¿™ç§æ–¹å¼èƒ½è®©å…¬å¸å¿«é€Ÿè¡ŒåŠ¨å—ï¼Ÿå¦‚æœä¸€å®¶åœ¨çº¿æœè£…é›¶å”®å•†å› ä¸ºæŸä½åäººç©¿ç€ä»–ä»¬çš„æœè£…è€Œçªç„¶æµè¡Œèµ·æ¥ï¼Œä»–ä»¬èƒ½å¦å¿«é€Ÿå¢åŠ è®¡ç®—èƒ½åŠ›ä»¥æ”¯æŒçªç„¶æ¶Œå…¥çš„è®¢å•ï¼Ÿ

### åˆ«äººçš„è®¡ç®—æœº

äº‘é€šå¸¸è¢«æˆç§°ä¸ºâ€œåˆ«äººçš„è®¡ç®—æœºâ€ã€‚æœ€åˆçš„æƒ³æ³•å¾ˆç®€å•â€”â€”ä¸å…¶è´­ä¹°è®¡ç®—æœºï¼Œä¸å¦‚ç§Ÿç”¨åˆ«äººçš„è®¡ç®—æœºã€‚äº‘è®¡ç®—æä¾›å•†ä¼šç®¡ç†å·¨å¤§çš„æ•°æ®ä¸­å¿ƒã€‚ä»–ä»¬è´Ÿè´£è´­ä¹°å’Œå®‰è£…ç¡¬ä»¶ã€ç®¡ç†ç”µåŠ›å’Œå†·å´ã€ç½‘ç»œè¿æ¥ã€å»ºç­‘å®‰å…¨ã€ç¡¬ä»¶å’Œè½¯ä»¶æ›´æ–°ç­‰æ‰€æœ‰äº‹æƒ…ã€‚ä½œä¸ºå®¢æˆ·ï¼Œä½ å¯ä»¥æ ¹æ®éœ€æ±‚ç§Ÿç”¨è®¡ç®—æœºï¼Œéœ€æ±‚å¢åŠ æ—¶ç§Ÿç”¨æ›´å¤šï¼Œéœ€æ±‚å‡å°‘æ—¶å‡å°‘ç§Ÿç”¨ã€‚è¿™äº›äº‘æ•°æ®ä¸­å¿ƒåˆ†å¸ƒåœ¨å…¨çƒå„åœ°ã€‚

![ä¸€ä¸ªå¾®è½¯äº‘æ•°æ®ä¸­å¿ƒ](../../../../../translated_images/azure-region-existing.73f704604f2aa6cb9b5a49ed40e93d4fd81ae3f4e6af4a8ca504023902832f56.zh.png)
![ä¸€ä¸ªå¾®è½¯äº‘æ•°æ®ä¸­å¿ƒçš„è®¡åˆ’æ‰©å±•](../../../../../translated_images/azure-region-planned-expansion.a5074a1e8af74f156a73552d502429e5b126ea5019274d767ecb4b9afdad442b.zh.png)

è¿™äº›æ•°æ®ä¸­å¿ƒçš„é¢ç§¯å¯ä»¥è¾¾åˆ°æ•°å¹³æ–¹å…¬é‡Œã€‚ä¸Šå›¾æ˜¯å‡ å¹´å‰æ‹æ‘„çš„å¾®è½¯äº‘æ•°æ®ä¸­å¿ƒï¼Œå±•ç¤ºäº†åˆå§‹è§„æ¨¡ä»¥åŠè®¡åˆ’æ‰©å±•ã€‚æ‰©å±•åŒºåŸŸçš„é¢ç§¯è¶…è¿‡ 5 å¹³æ–¹å…¬é‡Œã€‚

> ğŸ’ è¿™äº›æ•°æ®ä¸­å¿ƒéœ€è¦å¤§é‡ç”µåŠ›ï¼Œæœ‰äº›ç”šè‡³æ‹¥æœ‰è‡ªå·±çš„å‘ç”µç«™ã€‚ç”±äºè§„æ¨¡å’Œäº‘æä¾›å•†çš„æŠ•èµ„ï¼Œå®ƒä»¬é€šå¸¸éå¸¸ç¯ä¿ã€‚å®ƒä»¬æ¯”å¤§é‡å°å‹æ•°æ®ä¸­å¿ƒæ›´é«˜æ•ˆï¼Œä¸»è¦ä½¿ç”¨å¯å†ç”Ÿèƒ½æºï¼Œäº‘æä¾›å•†åŠªåŠ›å‡å°‘æµªè´¹ã€é™ä½æ°´èµ„æºä½¿ç”¨ï¼Œå¹¶é‡æ–°ç§æ¤æ£®æ—ä»¥å¼¥è¡¥å› å»ºè®¾æ•°æ®ä¸­å¿ƒè€Œç ä¼çš„æ ‘æœ¨ã€‚ä½ å¯ä»¥åœ¨ [Azure å¯æŒç»­å‘å±•ç½‘ç«™](https://azure.microsoft.com/global-infrastructure/sustainability/?WT.mc_id=academic-17441-jabenn) ä¸Šäº†è§£æ›´å¤šå…³äºäº‘æä¾›å•†å¦‚ä½•è‡´åŠ›äºå¯æŒç»­å‘å±•çš„ä¿¡æ¯ã€‚

âœ… åšä¸€äº›ç ”ç©¶ï¼šäº†è§£ä¸»è¦çš„äº‘æœåŠ¡ï¼Œä¾‹å¦‚ [å¾®è½¯çš„ Azure](https://azure.microsoft.com/?WT.mc_id=academic-17441-jabenn) æˆ– [è°·æ­Œçš„ GCP](https://cloud.google.com)ã€‚å®ƒä»¬æœ‰å¤šå°‘ä¸ªæ•°æ®ä¸­å¿ƒï¼Œè¿™äº›æ•°æ®ä¸­å¿ƒåˆ†å¸ƒåœ¨å“ªé‡Œï¼Ÿ

ä½¿ç”¨äº‘å¯ä»¥é™ä½å…¬å¸çš„æˆæœ¬ï¼Œè®©å…¬å¸ä¸“æ³¨äºè‡ªå·±çš„æ ¸å¿ƒä¸šåŠ¡ï¼Œå°†äº‘è®¡ç®—çš„ä¸“ä¸šçŸ¥è¯†äº¤ç»™æä¾›å•†ã€‚å…¬å¸ä¸å†éœ€è¦ç§Ÿç”¨æˆ–è´­ä¹°æ•°æ®ä¸­å¿ƒç©ºé—´ã€æ”¯ä»˜ä¸åŒçš„ä¾›åº”å•†ä»¥è·å¾—è¿æ¥å’Œç”µåŠ›ï¼Œä¹Ÿä¸éœ€è¦é›‡ä½£ä¸“å®¶ã€‚ç›¸åï¼Œä»–ä»¬å¯ä»¥å‘äº‘æä¾›å•†æ”¯ä»˜ä¸€å¼ æœˆåº¦è´¦å•ï¼Œæ‰€æœ‰äº‹æƒ…éƒ½ç”±äº‘æä¾›å•†å¤„ç†ã€‚

äº‘æä¾›å•†å¯ä»¥åˆ©ç”¨è§„æ¨¡ç»æµé™ä½æˆæœ¬ï¼Œä¾‹å¦‚æ‰¹é‡è´­ä¹°è®¡ç®—æœºä»¥è·å¾—æ›´ä½ä»·æ ¼ã€æŠ•èµ„å·¥å…·ä»¥å‡å°‘ç»´æŠ¤å·¥ä½œé‡ï¼Œç”šè‡³è®¾è®¡å’Œåˆ¶é€ è‡ªå·±çš„ç¡¬ä»¶ä»¥æ”¹è¿›äº‘æœåŠ¡ã€‚

### å¾®è½¯ Azure

Azure æ˜¯å¾®è½¯çš„å¼€å‘è€…äº‘ï¼Œä¹Ÿæ˜¯ä½ å°†åœ¨è¿™äº›è¯¾ç¨‹ä¸­ä½¿ç”¨çš„äº‘æœåŠ¡ã€‚ä»¥ä¸‹è§†é¢‘ç®€è¦ä»‹ç»äº† Azureï¼š

[![Azure æ¦‚è§ˆè§†é¢‘](../../../../../translated_images/what-is-azure-video-thumbnail.20174db09e03bbb87d213f928d3cb27410305d2e567e952827de8478dbda959b.zh.png)](https://www.microsoft.com/videoplayer/embed/RE4Ibng?WT.mc_id=academic-17441-jabenn)

## åˆ›å»ºäº‘è®¢é˜…

è¦ä½¿ç”¨äº‘æœåŠ¡ï¼Œä½ éœ€è¦å‘äº‘æä¾›å•†æ³¨å†Œè®¢é˜…ã€‚åœ¨æœ¬è¯¾ä¸­ï¼Œä½ å°†æ³¨å†Œä¸€ä¸ªå¾®è½¯ Azure è®¢é˜…ã€‚å¦‚æœä½ å·²ç»æœ‰ Azure è®¢é˜…ï¼Œå¯ä»¥è·³è¿‡æ­¤ä»»åŠ¡ã€‚ä»¥ä¸‹æè¿°çš„è®¢é˜…è¯¦æƒ…åœ¨æ’°å†™æ—¶æ˜¯æ­£ç¡®çš„ï¼Œä½†å¯èƒ½ä¼šæœ‰æ‰€å˜åŒ–ã€‚

> ğŸ’ å¦‚æœä½ é€šè¿‡å­¦æ ¡è®¿é—®è¿™äº›è¯¾ç¨‹ï¼Œä½ å¯èƒ½å·²ç»æœ‰ä¸€ä¸ªå¯ç”¨çš„ Azure è®¢é˜…ã€‚è¯·å‘ä½ çš„è€å¸ˆç¡®è®¤ã€‚

ä½ å¯ä»¥æ³¨å†Œä¸¤ç§ä¸åŒç±»å‹çš„å…è´¹ Azure è®¢é˜…ï¼š

* **Azure for Students** - è¿™æ˜¯ä¸º 18 å²ä»¥ä¸Šå­¦ç”Ÿè®¾è®¡çš„è®¢é˜…ã€‚æ³¨å†Œæ—¶ä¸éœ€è¦ä¿¡ç”¨å¡ï¼Œä½ å¯ä»¥ä½¿ç”¨å­¦æ ¡é‚®ç®±åœ°å€éªŒè¯è‡ªå·±æ˜¯å­¦ç”Ÿã€‚æ³¨å†Œåï¼Œä½ å°†è·å¾— 100 ç¾å…ƒçš„äº‘èµ„æºä½¿ç”¨é¢åº¦ï¼Œä»¥åŠåŒ…æ‹¬å…è´¹ç‰ˆ IoT æœåŠ¡åœ¨å†…çš„å…è´¹æœåŠ¡ã€‚è®¢é˜…æœ‰æ•ˆæœŸä¸º 12 ä¸ªæœˆï¼Œæ¯å¹´å¯ä»¥ç»­è®¢ï¼Œåªè¦ä½ ä»æ˜¯å­¦ç”Ÿã€‚

* **Azure å…è´¹è®¢é˜…** - è¿™æ˜¯ä¸ºéå­¦ç”Ÿè®¾è®¡çš„è®¢é˜…ã€‚æ³¨å†Œæ—¶éœ€è¦ä¿¡ç”¨å¡ï¼Œä½†ä¸ä¼šæ‰£è´¹ï¼Œä»…ç”¨äºéªŒè¯ä½ æ˜¯çœŸäººè€Œä¸æ˜¯æœºå™¨äººã€‚ä½ å¯ä»¥åœ¨å‰ 30 å¤©å†…è·å¾— 200 ç¾å…ƒçš„ä¿¡ç”¨é¢åº¦ï¼Œç”¨äºä»»ä½•æœåŠ¡ï¼ŒåŒæ—¶äº«å— Azure æœåŠ¡çš„å…è´¹å±‚ã€‚ä¸€æ—¦ä¿¡ç”¨é¢åº¦ç”¨å®Œï¼Œé™¤éä½ è½¬æ¢ä¸ºæŒ‰éœ€ä»˜è´¹è®¢é˜…ï¼Œå¦åˆ™ä¸ä¼šæ‰£è´¹ã€‚

> ğŸ’ å¾®è½¯ç¡®å®ä¸º 18 å²ä»¥ä¸‹å­¦ç”Ÿæä¾›äº† Azure for Students Starter è®¢é˜…ï¼Œä½†åœ¨æ’°å†™æ—¶å®ƒä¸æ”¯æŒä»»ä½• IoT æœåŠ¡ã€‚

### ä»»åŠ¡ - æ³¨å†Œå…è´¹äº‘è®¢é˜…

å¦‚æœä½ æ˜¯ 18 å²ä»¥ä¸Šçš„å­¦ç”Ÿï¼Œå¯ä»¥æ³¨å†Œ Azure for Students è®¢é˜…ã€‚ä½ éœ€è¦ä½¿ç”¨å­¦æ ¡é‚®ç®±åœ°å€éªŒè¯èº«ä»½ã€‚ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸¤ç§æ–¹å¼å®Œæˆï¼š

* åœ¨ [education.github.com/pack](https://education.github.com/pack) æ³¨å†Œ GitHub å­¦ç”Ÿå¼€å‘è€…åŒ…ã€‚è¿™å°†ä¸ºä½ æä¾›ä¸€ç³»åˆ—å·¥å…·å’Œä¼˜æƒ ï¼ŒåŒ…æ‹¬ GitHub å’Œå¾®è½¯ Azureã€‚æ³¨å†Œå¼€å‘è€…åŒ…åï¼Œä½ å¯ä»¥æ¿€æ´» Azure for Students ä¼˜æƒ ã€‚

* ç›´æ¥åœ¨ [azure.microsoft.com/free/students](https://azure.microsoft.com/free/students/?WT.mc_id=academic-17441-jabenn) æ³¨å†Œ Azure for Students è´¦æˆ·ã€‚

> âš ï¸ å¦‚æœä½ çš„å­¦æ ¡é‚®ç®±åœ°å€æœªè¢«è¯†åˆ«ï¼Œè¯·åœ¨ [æ­¤ä»“åº“ä¸­æäº¤é—®é¢˜](https://github.com/Microsoft/IoT-For-Beginners/issues)ï¼Œæˆ‘ä»¬å°†å°è¯•å°†å…¶æ·»åŠ åˆ° Azure for Students å…è®¸åˆ—è¡¨ä¸­ã€‚

å¦‚æœä½ ä¸æ˜¯å­¦ç”Ÿï¼Œæˆ–è€…æ²¡æœ‰æœ‰æ•ˆçš„å­¦æ ¡é‚®ç®±åœ°å€ï¼Œå¯ä»¥æ³¨å†Œ Azure å…è´¹è®¢é˜…ã€‚

* åœ¨ [azure.microsoft.com/free](https://azure.microsoft.com/free/?WT.mc_id=academic-17441-jabenn) æ³¨å†Œ Azure å…è´¹è®¢é˜…ã€‚

## äº‘ IoT æœåŠ¡

ä½ ä½¿ç”¨çš„å…¬å…±æµ‹è¯• MQTT broker æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å­¦ä¹ å·¥å…·ï¼Œä½†ä½œä¸ºå•†ä¸šå·¥å…·æœ‰ä»¥ä¸‹ç¼ºç‚¹ï¼š

* å¯é æ€§ - å®ƒæ˜¯ä¸€ä¸ªå…è´¹æœåŠ¡ï¼Œæ²¡æœ‰ä»»ä½•ä¿è¯ï¼Œéšæ—¶å¯èƒ½å…³é—­
* å®‰å…¨æ€§ - å®ƒæ˜¯å…¬å…±çš„ï¼Œä»»ä½•äººéƒ½å¯ä»¥ç›‘å¬ä½ çš„é¥æµ‹æ•°æ®æˆ–å‘é€å‘½ä»¤æ§åˆ¶ä½ çš„ç¡¬ä»¶
* æ€§èƒ½ - å®ƒè®¾è®¡ç”¨äºå°‘é‡æµ‹è¯•æ¶ˆæ¯ï¼Œæ— æ³•å¤„ç†å¤§é‡æ¶ˆæ¯
* å‘ç° - æ— æ³•çŸ¥é“å“ªäº›è®¾å¤‡å·²è¿æ¥

äº‘ä¸­çš„ IoT æœåŠ¡è§£å†³äº†è¿™äº›é—®é¢˜ã€‚å®ƒä»¬ç”±å¤§å‹äº‘æä¾›å•†ç»´æŠ¤ï¼Œè¿™äº›æä¾›å•†åœ¨å¯é æ€§æ–¹é¢æŠ•å…¥å·¨å¤§ï¼Œå¹¶éšæ—¶è§£å†³å¯èƒ½å‡ºç°çš„é—®é¢˜ã€‚å®ƒä»¬å†…ç½®äº†å®‰å…¨æ€§ï¼Œé˜²æ­¢é»‘å®¢è¯»å–ä½ çš„æ•°æ®æˆ–å‘é€æ¶æ„å‘½ä»¤ã€‚å®ƒä»¬è¿˜å…·æœ‰é«˜æ€§èƒ½ï¼Œèƒ½å¤Ÿæ¯å¤©å¤„ç†æ•°ç™¾ä¸‡æ¡æ¶ˆæ¯ï¼Œå¹¶åˆ©ç”¨äº‘æ ¹æ®éœ€æ±‚è¿›è¡Œæ‰©å±•ã€‚

> ğŸ’ è™½ç„¶è¿™äº›æœåŠ¡éœ€è¦æ”¯ä»˜æœˆè´¹ï¼Œä½†å¤§å¤šæ•°äº‘æä¾›å•†æä¾›å…è´¹ç‰ˆ IoT æœåŠ¡ï¼Œé™åˆ¶æ¯å¤©çš„æ¶ˆæ¯æ•°é‡æˆ–å¯è¿æ¥çš„è®¾å¤‡æ•°é‡ã€‚å¯¹äºå¼€å‘è€…å­¦ä¹ æœåŠ¡æ¥è¯´ï¼Œè¿™ä¸ªå…è´¹ç‰ˆé€šå¸¸å·²ç»è¶³å¤Ÿã€‚åœ¨æœ¬è¯¾ä¸­ï¼Œä½ å°†ä½¿ç”¨å…è´¹ç‰ˆã€‚

IoT è®¾å¤‡é€šè¿‡è®¾å¤‡ SDKï¼ˆä¸€ä¸ªæä¾›æœåŠ¡åŠŸèƒ½ä»£ç çš„åº“ï¼‰æˆ–ç›´æ¥é€šè¿‡é€šä¿¡åè®®ï¼ˆå¦‚ MQTT æˆ– HTTPï¼‰è¿æ¥åˆ°äº‘æœåŠ¡ã€‚è®¾å¤‡ SDK é€šå¸¸æ˜¯æœ€ç®€å•çš„é€‰æ‹©ï¼Œå› ä¸ºå®ƒä¼šå¤„ç†æ‰€æœ‰äº‹æƒ…ï¼Œä¾‹å¦‚çŸ¥é“è¦å‘å¸ƒæˆ–è®¢é˜…å“ªäº›ä¸»é¢˜ï¼Œä»¥åŠå¦‚ä½•å¤„ç†å®‰å…¨æ€§ã€‚

![è®¾å¤‡é€šè¿‡è®¾å¤‡ SDK è¿æ¥åˆ°æœåŠ¡ã€‚æœåŠ¡å™¨ä»£ç ä¹Ÿé€šè¿‡ SDK è¿æ¥åˆ°æœåŠ¡](../../../../../translated_images/iot-service-connectivity.7e873847921a5d6fd60d0ba3a943210194518cee0d4e362476624316443275c3.zh.png)

ä½ çš„è®¾å¤‡éšåé€šè¿‡è¯¥æœåŠ¡ä¸åº”ç”¨ç¨‹åºçš„å…¶ä»–éƒ¨åˆ†é€šä¿¡â€”â€”ç±»ä¼¼äºä½ é€šè¿‡ MQTT å‘é€é¥æµ‹æ•°æ®å’Œæ¥æ”¶å‘½ä»¤ã€‚é€šå¸¸ä½¿ç”¨æœåŠ¡ SDK æˆ–ç±»ä¼¼åº“ã€‚æ¶ˆæ¯ä»è®¾å¤‡å‘é€åˆ°æœåŠ¡ï¼Œåº”ç”¨ç¨‹åºçš„å…¶ä»–ç»„ä»¶å¯ä»¥è¯»å–è¿™äº›æ¶ˆæ¯ï¼Œç„¶åå°†æ¶ˆæ¯å‘é€å›è®¾å¤‡ã€‚

![æ²¡æœ‰æœ‰æ•ˆå¯†é’¥çš„è®¾å¤‡æ— æ³•è¿æ¥åˆ° IoT æœåŠ¡](../../../../../translated_images/iot-service-allowed-denied-connection.818b0063ac213fb84204a7229303764d9b467ca430fb822b4ac2fca267d56726.zh.png)

è¿™äº›æœåŠ¡é€šè¿‡äº†è§£æ‰€æœ‰å¯ä»¥è¿æ¥å¹¶å‘é€æ•°æ®çš„è®¾å¤‡æ¥å®ç°å®‰å…¨æ€§ï¼Œæ–¹æ³•æ˜¯é¢„å…ˆæ³¨å†Œè®¾å¤‡ï¼Œæˆ–è€…ä¸ºè®¾å¤‡æä¾›å¯†é’¥æˆ–è¯ä¹¦ï¼Œä½¿å®ƒä»¬èƒ½å¤Ÿåœ¨é¦–æ¬¡è¿æ¥æ—¶è‡ªè¡Œæ³¨å†Œåˆ°æœåŠ¡ã€‚æœªçŸ¥è®¾å¤‡æ— æ³•è¿æ¥ï¼Œå¦‚æœå°è¯•è¿æ¥ï¼ŒæœåŠ¡ä¼šæ‹’ç»è¿æ¥å¹¶å¿½ç•¥å®ƒä»¬å‘é€çš„æ¶ˆæ¯ã€‚

âœ… åšä¸€äº›ç ”ç©¶ï¼šå¼€æ”¾çš„ IoT æœåŠ¡å…è®¸ä»»ä½•è®¾å¤‡æˆ–ä»£ç è¿æ¥ä¼šæœ‰ä»€ä¹ˆç¼ºç‚¹ï¼Ÿä½ èƒ½æ‰¾åˆ°é»‘å®¢åˆ©ç”¨è¿™ç§æœåŠ¡çš„å…·ä½“ä¾‹å­å—ï¼Ÿ

åº”ç”¨ç¨‹åºçš„å…¶ä»–ç»„ä»¶å¯ä»¥è¿æ¥åˆ° IoT æœåŠ¡ï¼Œäº†è§£æ‰€æœ‰å·²è¿æ¥æˆ–æ³¨å†Œçš„è®¾å¤‡ï¼Œå¹¶ç›´æ¥ä¸å®ƒä»¬å•ç‹¬æˆ–æ‰¹é‡é€šä¿¡ã€‚
ğŸ’ ç‰©è”ç½‘æœåŠ¡è¿˜å®ç°äº†é¢å¤–çš„åŠŸèƒ½ï¼Œäº‘æœåŠ¡æä¾›å•†ä¹Ÿæä¾›äº†å¯ä»¥è¿æ¥åˆ°æœåŠ¡çš„å…¶ä»–æœåŠ¡å’Œåº”ç”¨ç¨‹åºã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æƒ³å°†æ‰€æœ‰è®¾å¤‡å‘é€çš„é¥æµ‹æ¶ˆæ¯å­˜å‚¨åˆ°æ•°æ®åº“ä¸­ï¼Œé€šå¸¸åªéœ€åœ¨äº‘æœåŠ¡æä¾›å•†çš„é…ç½®å·¥å…·ä¸­ç‚¹å‡»å‡ ä¸‹ï¼Œå°±å¯ä»¥å°†æœåŠ¡è¿æ¥åˆ°æ•°æ®åº“å¹¶å°†æ•°æ®æµå…¥å…¶ä¸­ã€‚
## åœ¨äº‘ç«¯åˆ›å»ºä¸€ä¸ª IoT æœåŠ¡

ç°åœ¨æ‚¨å·²ç»æ‹¥æœ‰äº†ä¸€ä¸ª Azure è®¢é˜…ï¼Œæ‚¨å¯ä»¥æ³¨å†Œä¸€ä¸ª IoT æœåŠ¡ã€‚å¾®è½¯æä¾›çš„ IoT æœåŠ¡å«åš Azure IoT Hubã€‚

![Azure IoT Hub æ ‡å¿—](../../../../../translated_images/azure-iot-hub-logo.28a19de76d0a1932464d858f7558712bcdace3e5ec69c434d482ed7ce41c3a26.zh.png)

ä¸‹é¢çš„è§†é¢‘ç®€è¦ä»‹ç»äº† Azure IoT Hubï¼š

[![Azure IoT Hub æ¦‚è¿°è§†é¢‘](https://img.youtube.com/vi/smuZaZZXKsU/0.jpg)](https://www.youtube.com/watch?v=smuZaZZXKsU)

> ğŸ¥ ç‚¹å‡»ä¸Šæ–¹å›¾ç‰‡è§‚çœ‹è§†é¢‘

âœ… èŠ±ç‚¹æ—¶é—´ç ”ç©¶å¹¶é˜…è¯» [Microsoft IoT Hub æ–‡æ¡£](https://docs.microsoft.com/azure/iot-hub/about-iot-hub?WT.mc_id=academic-17441-jabenn)ä¸­çš„ IoT Hub æ¦‚è¿°ã€‚

Azure æä¾›çš„äº‘æœåŠ¡å¯ä»¥é€šè¿‡åŸºäºç½‘é¡µçš„é—¨æˆ·æˆ–å‘½ä»¤è¡Œç•Œé¢ï¼ˆCLIï¼‰è¿›è¡Œé…ç½®ã€‚åœ¨æœ¬ä»»åŠ¡ä¸­ï¼Œæ‚¨å°†ä½¿ç”¨ CLIã€‚

### ä»»åŠ¡ - å®‰è£… Azure CLI

è¦ä½¿ç”¨ Azure CLIï¼Œé¦–å…ˆéœ€è¦åœ¨æ‚¨çš„ PC æˆ– Mac ä¸Šå®‰è£…å®ƒã€‚

1. æŒ‰ç…§ [Azure CLI æ–‡æ¡£](https://docs.microsoft.com/cli/azure/install-azure-cli?WT.mc_id=academic-17441-jabenn)ä¸­çš„è¯´æ˜å®‰è£… CLIã€‚

1. Azure CLI æ”¯æŒè®¸å¤šæ‰©å±•ï¼Œè¿™äº›æ‰©å±•å¢åŠ äº†ç®¡ç†å„ç§ Azure æœåŠ¡çš„åŠŸèƒ½ã€‚é€šè¿‡å‘½ä»¤è¡Œæˆ–ç»ˆç«¯è¿è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£… IoT æ‰©å±•ï¼š

    ```sh
    az extension add --name azure-iot
    ```

1. åœ¨å‘½ä»¤è¡Œæˆ–ç»ˆç«¯ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œä» Azure CLI ç™»å½•åˆ°æ‚¨çš„ Azure è®¢é˜…ã€‚

    ```sh
    az login
    ```

    é»˜è®¤æµè§ˆå™¨å°†æ‰“å¼€ä¸€ä¸ªç½‘é¡µã€‚ä½¿ç”¨æ‚¨æ³¨å†Œ Azure è®¢é˜…æ—¶çš„è´¦æˆ·ç™»å½•ã€‚ç™»å½•åï¼Œæ‚¨å¯ä»¥å…³é—­æµè§ˆå™¨æ ‡ç­¾é¡µã€‚

1. å¦‚æœæ‚¨æœ‰å¤šä¸ª Azure è®¢é˜…ï¼Œä¾‹å¦‚å­¦æ ¡æä¾›çš„è®¢é˜…å’Œæ‚¨è‡ªå·±çš„ Azure for Students è®¢é˜…ï¼Œæ‚¨éœ€è¦é€‰æ‹©è¦ä½¿ç”¨çš„è®¢é˜…ã€‚è¿è¡Œä»¥ä¸‹å‘½ä»¤åˆ—å‡ºæ‚¨æœ‰æƒé™è®¿é—®çš„æ‰€æœ‰è®¢é˜…ï¼š

    ```sh
    az account list --output table
    ```

    è¾“å‡ºä¸­å°†æ˜¾ç¤ºæ¯ä¸ªè®¢é˜…çš„åç§°åŠå…¶ `SubscriptionId`ã€‚

    ```output
    âœ  ~ az account list --output table
    Name                    CloudName    SubscriptionId                        State    IsDefault
    ----------------------  -----------  ------------------------------------  -------  -----------
    School-subscription     AzureCloud   cb30cde9-814a-42f0-a111-754cb788e4e1  Enabled  True
    Azure for Students      AzureCloud   fa51c31b-162c-4599-add6-781def2e1fbf  Enabled  False
    ```

    ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤é€‰æ‹©æ‚¨è¦ä½¿ç”¨çš„è®¢é˜…ï¼š

    ```sh
    az account set --subscription <SubscriptionId>
    ```

    å°† `<SubscriptionId>` æ›¿æ¢ä¸ºæ‚¨æƒ³ä½¿ç”¨çš„è®¢é˜…çš„ IDã€‚è¿è¡Œæ­¤å‘½ä»¤åï¼Œé‡æ–°è¿è¡Œåˆ—å‡ºè´¦æˆ·çš„å‘½ä»¤ã€‚æ‚¨ä¼šçœ‹åˆ° `IsDefault` åˆ—æ ‡è®°ä¸º `True`ï¼Œè¡¨ç¤ºæ‚¨åˆšåˆšè®¾ç½®çš„è®¢é˜…ã€‚

### ä»»åŠ¡ - åˆ›å»ºèµ„æºç»„

Azure æœåŠ¡ï¼ˆå¦‚ IoT Hub å®ä¾‹ã€è™šæ‹Ÿæœºã€æ•°æ®åº“æˆ– AI æœåŠ¡ï¼‰è¢«ç§°ä¸º**èµ„æº**ã€‚æ¯ä¸ªèµ„æºéƒ½å¿…é¡»å±äºä¸€ä¸ª**èµ„æºç»„**ï¼Œå³ä¸€ä¸ªæˆ–å¤šä¸ªèµ„æºçš„é€»è¾‘åˆ†ç»„ã€‚

> ğŸ’ ä½¿ç”¨èµ„æºç»„å¯ä»¥ä¸€æ¬¡æ€§ç®¡ç†å¤šä¸ªæœåŠ¡ã€‚ä¾‹å¦‚ï¼Œåœ¨å®Œæˆæœ¬é¡¹ç›®çš„æ‰€æœ‰è¯¾ç¨‹åï¼Œæ‚¨å¯ä»¥åˆ é™¤èµ„æºç»„ï¼Œèµ„æºç»„ä¸­çš„æ‰€æœ‰èµ„æºä¹Ÿä¼šè¢«è‡ªåŠ¨åˆ é™¤ã€‚

1. Azure åœ¨å…¨çƒæœ‰å¤šä¸ªæ•°æ®ä¸­å¿ƒï¼Œè¿™äº›æ•°æ®ä¸­å¿ƒè¢«åˆ’åˆ†ä¸ºä¸åŒçš„åŒºåŸŸã€‚åˆ›å»º Azure èµ„æºæˆ–èµ„æºç»„æ—¶ï¼Œæ‚¨éœ€è¦æŒ‡å®šåˆ›å»ºä½ç½®ã€‚è¿è¡Œä»¥ä¸‹å‘½ä»¤è·å–ä½ç½®åˆ—è¡¨ï¼š

    ```sh
    az account list-locations --output table
    ```

    æ‚¨å°†çœ‹åˆ°ä¸€ä¸ªä½ç½®åˆ—è¡¨ã€‚è¿™ä¸ªåˆ—è¡¨ä¼šå¾ˆé•¿ã€‚

    > ğŸ’ æˆªè‡³æ’°å†™æœ¬æ–‡æ—¶ï¼Œæ‚¨å¯ä»¥éƒ¨ç½²åˆ° 65 ä¸ªä½ç½®ã€‚

    ```output
        âœ  ~ az account list-locations --output table
    DisplayName               Name                 RegionalDisplayName
    ------------------------  -------------------  -------------------------------------
    East US                   eastus               (US) East US
    East US 2                 eastus2              (US) East US 2
    South Central US          southcentralus       (US) South Central US
    ...
    ```

    è®°ä¸‹ç¦»æ‚¨æœ€è¿‘çš„åŒºåŸŸçš„ `Name` åˆ—ä¸­çš„å€¼ã€‚æ‚¨å¯ä»¥åœ¨ [Azure åœ°ç†ä½ç½®é¡µé¢](https://azure.microsoft.com/global-infrastructure/geographies/?WT.mc_id=academic-17441-jabenn)ä¸ŠæŸ¥çœ‹è¿™äº›åŒºåŸŸçš„åœ°å›¾ã€‚

1. è¿è¡Œä»¥ä¸‹å‘½ä»¤åˆ›å»ºä¸€ä¸ªåä¸º `soil-moisture-sensor` çš„èµ„æºç»„ã€‚èµ„æºç»„åç§°åœ¨æ‚¨çš„è®¢é˜…ä¸­å¿…é¡»æ˜¯å”¯ä¸€çš„ã€‚

    ```sh
    az group create --name soil-moisture-sensor \
                    --location <location>
    ```

    å°† `<location>` æ›¿æ¢ä¸ºæ‚¨åœ¨ä¸Šä¸€æ­¥ä¸­é€‰æ‹©çš„ä½ç½®ã€‚

### ä»»åŠ¡ - åˆ›å»º IoT Hub

ç°åœ¨ï¼Œæ‚¨å¯ä»¥åœ¨èµ„æºç»„ä¸­åˆ›å»ºä¸€ä¸ª IoT Hub èµ„æºã€‚

1. ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åˆ›å»º IoT Hub èµ„æºï¼š

    ```sh
    az iot hub create --resource-group soil-moisture-sensor \
                      --sku F1 \
                      --partition-count 2 \
                      --name <hub_name>
    ```

    å°† `<hub_name>` æ›¿æ¢ä¸ºæ‚¨çš„ Hub åç§°ã€‚æ­¤åç§°å¿…é¡»åœ¨å…¨çƒèŒƒå›´å†…å”¯ä¸€â€”â€”å³ä»»ä½•äººåˆ›å»ºçš„ IoT Hub éƒ½ä¸èƒ½æœ‰ç›¸åŒçš„åç§°ã€‚æ­¤åç§°å°†ç”¨äºæŒ‡å‘ Hub çš„ URLï¼Œå› æ­¤éœ€è¦å”¯ä¸€ã€‚å¯ä»¥ä½¿ç”¨ç±»ä¼¼ `soil-moisture-sensor-` çš„åç§°ï¼Œå¹¶åœ¨æœ«å°¾æ·»åŠ ä¸€äº›å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œä¾‹å¦‚éšæœºå•è¯æˆ–æ‚¨çš„åå­—ã€‚

    `--sku F1` é€‰é¡¹è¡¨ç¤ºä½¿ç”¨å…è´¹å±‚ã€‚å…è´¹å±‚æ”¯æŒæ¯å¤© 8,000 æ¡æ¶ˆæ¯ï¼Œå¹¶æä¾›å¤§å¤šæ•°ä»˜è´¹å±‚çš„åŠŸèƒ½ã€‚

    > ğŸ“ Azure æœåŠ¡çš„ä¸åŒå®šä»·çº§åˆ«ç§°ä¸ºå±‚ã€‚æ¯ä¸ªå±‚çš„æˆæœ¬ä¸åŒï¼Œæä¾›çš„åŠŸèƒ½æˆ–æ•°æ®é‡ä¹Ÿä¸åŒã€‚

    > ğŸ’ å¦‚æœæ‚¨æƒ³äº†è§£æ›´å¤šå…³äºå®šä»·çš„ä¿¡æ¯ï¼Œå¯ä»¥æŸ¥çœ‹ [Azure IoT Hub å®šä»·æŒ‡å—](https://azure.microsoft.com/pricing/details/iot-hub/?WT.mc_id=academic-17441-jabenn)ã€‚

    `--partition-count 2` é€‰é¡¹å®šä¹‰ IoT Hub æ”¯æŒçš„æ•°æ®æµæ•°é‡ã€‚æ›´å¤šåˆ†åŒºå¯ä»¥å‡å°‘å¤šä¸ªè®¾å¤‡ä» IoT Hub è¯»å†™æ•°æ®æ—¶çš„é˜»å¡æƒ…å†µã€‚åˆ†åŒºçš„è¯¦ç»†å†…å®¹è¶…å‡ºäº†æœ¬è¯¾ç¨‹çš„èŒƒå›´ï¼Œä½†åˆ›å»ºå…è´¹å±‚ IoT Hub æ—¶éœ€è¦è®¾ç½®æ­¤å€¼ã€‚

    > ğŸ’ æ¯ä¸ªè®¢é˜…åªèƒ½æœ‰ä¸€ä¸ªå…è´¹å±‚ IoT Hubã€‚

IoT Hub å°†è¢«åˆ›å»ºã€‚å®Œæˆæ­¤è¿‡ç¨‹å¯èƒ½éœ€è¦ä¸€åˆ†é’Ÿå·¦å³ã€‚

## ä¸ IoT Hub é€šä¿¡

åœ¨ä¸Šä¸€è¯¾ä¸­ï¼Œæ‚¨ä½¿ç”¨ MQTT åœ¨ä¸åŒä¸»é¢˜ä¸Šå‘é€å’Œæ¥æ”¶æ¶ˆæ¯ï¼Œä¸åŒä¸»é¢˜æœ‰ä¸åŒçš„ç”¨é€”ã€‚è€Œåœ¨ IoT Hub ä¸­ï¼Œè®¾å¤‡ä¸ Hub æˆ– Hub ä¸è®¾å¤‡ä¹‹é—´çš„é€šä¿¡æœ‰å¤šç§å®šä¹‰å¥½çš„æ–¹å¼ã€‚

> ğŸ’ åœ¨åº•å±‚ï¼ŒIoT Hub å’Œè®¾å¤‡ä¹‹é—´çš„é€šä¿¡å¯ä»¥ä½¿ç”¨ MQTTã€HTTPS æˆ– AMQPã€‚

* è®¾å¤‡åˆ°äº‘ï¼ˆD2Cï¼‰æ¶ˆæ¯ - è¿™äº›æ˜¯ä»è®¾å¤‡å‘é€åˆ° IoT Hub çš„æ¶ˆæ¯ï¼Œä¾‹å¦‚é¥æµ‹æ•°æ®ã€‚åº”ç”¨ç¨‹åºä»£ç å¯ä»¥ä» IoT Hub ä¸­è¯»å–è¿™äº›æ¶ˆæ¯ã€‚

    > ğŸ“ åœ¨åº•å±‚ï¼ŒIoT Hub ä½¿ç”¨ä¸€ä¸ªåä¸º [Event Hubs](https://docs.microsoft.com/azure/event-hubs/?WT.mc_id=academic-17441-jabenn) çš„ Azure æœåŠ¡ã€‚å½“æ‚¨ç¼–å†™ä»£ç è¯»å–å‘é€åˆ° Hub çš„æ¶ˆæ¯æ—¶ï¼Œè¿™äº›æ¶ˆæ¯é€šå¸¸è¢«ç§°ä¸ºäº‹ä»¶ã€‚

* äº‘åˆ°è®¾å¤‡ï¼ˆC2Dï¼‰æ¶ˆæ¯ - è¿™äº›æ˜¯ä»åº”ç”¨ç¨‹åºä»£ç é€šè¿‡ IoT Hub å‘é€åˆ° IoT è®¾å¤‡çš„æ¶ˆæ¯ã€‚

* ç›´æ¥æ–¹æ³•è¯·æ±‚ - è¿™äº›æ˜¯ä»åº”ç”¨ç¨‹åºä»£ç é€šè¿‡ IoT Hub å‘é€åˆ° IoT è®¾å¤‡çš„æ¶ˆæ¯ï¼Œç”¨äºè¯·æ±‚è®¾å¤‡æ‰§è¡ŒæŸäº›æ“ä½œï¼Œä¾‹å¦‚æ§åˆ¶æ‰§è¡Œå™¨ã€‚è¿™äº›æ¶ˆæ¯éœ€è¦å“åº”ï¼Œä»¥ä¾¿åº”ç”¨ç¨‹åºä»£ç çŸ¥é“æ˜¯å¦æˆåŠŸå¤„ç†ã€‚

* è®¾å¤‡å­ªç”Ÿ - è¿™äº›æ˜¯ JSON æ–‡æ¡£ï¼Œåœ¨è®¾å¤‡å’Œ IoT Hub ä¹‹é—´ä¿æŒåŒæ­¥ï¼Œç”¨äºå­˜å‚¨è®¾å¤‡æŠ¥å‘Šçš„è®¾ç½®æˆ–å…¶ä»–å±æ€§ï¼Œæˆ–è€… IoT Hub åº”è®¾ç½®åœ¨è®¾å¤‡ä¸Šçš„å±æ€§ï¼ˆç§°ä¸ºæœŸæœ›å€¼ï¼‰ã€‚

IoT Hub å¯ä»¥å­˜å‚¨æ¶ˆæ¯å’Œç›´æ¥æ–¹æ³•è¯·æ±‚ä¸€æ®µå¯é…ç½®çš„æ—¶é—´ï¼ˆé»˜è®¤ä¸€å¤©ï¼‰ï¼Œå› æ­¤å¦‚æœè®¾å¤‡æˆ–åº”ç”¨ç¨‹åºä»£ç å¤±å»è¿æ¥ï¼Œé‡æ–°è¿æ¥åä»ç„¶å¯ä»¥æ£€ç´¢ç¦»çº¿æœŸé—´å‘é€çš„æ¶ˆæ¯ã€‚è®¾å¤‡å­ªç”Ÿä¼šæ°¸ä¹…ä¿å­˜åœ¨ IoT Hub ä¸­ï¼Œå› æ­¤è®¾å¤‡å¯ä»¥éšæ—¶é‡æ–°è¿æ¥å¹¶è·å–æœ€æ–°çš„è®¾å¤‡å­ªç”Ÿã€‚

âœ… åšä¸€äº›ç ”ç©¶ï¼šé˜…è¯» IoT Hub æ–‡æ¡£ä¸­çš„ [è®¾å¤‡åˆ°äº‘é€šä¿¡æŒ‡å—](https://docs.microsoft.com/azure/iot-hub/iot-hub-devguide-d2c-guidance?WT.mc_id=academic-17441-jabenn) å’Œ [äº‘åˆ°è®¾å¤‡é€šä¿¡æŒ‡å—](https://docs.microsoft.com/azure/iot-hub/iot-hub-devguide-c2d-guidance?WT.mc_id=academic-17441-jabenn)ã€‚

## å°†è®¾å¤‡è¿æ¥åˆ° IoT æœåŠ¡

ä¸€æ—¦ Hub åˆ›å»ºå®Œæˆï¼Œæ‚¨çš„ IoT è®¾å¤‡å°±å¯ä»¥è¿æ¥åˆ°å®ƒã€‚åªæœ‰æ³¨å†Œçš„è®¾å¤‡æ‰èƒ½è¿æ¥åˆ°æœåŠ¡ï¼Œå› æ­¤æ‚¨éœ€è¦å…ˆæ³¨å†Œè®¾å¤‡ã€‚æ³¨å†Œåï¼Œæ‚¨å°†è·å¾—ä¸€ä¸ªè¿æ¥å­—ç¬¦ä¸²ï¼Œè®¾å¤‡å¯ä»¥ä½¿ç”¨å®ƒè¿›è¡Œè¿æ¥ã€‚è¿™ä¸ªè¿æ¥å­—ç¬¦ä¸²æ˜¯è®¾å¤‡ç‰¹å®šçš„ï¼ŒåŒ…å«æœ‰å…³ IoT Hubã€è®¾å¤‡å’Œå…è®¸è®¾å¤‡è¿æ¥çš„å¯†é’¥çš„ä¿¡æ¯ã€‚

> ğŸ“ è¿æ¥å­—ç¬¦ä¸²æ˜¯ä¸€ä¸ªé€šç”¨æœ¯è¯­ï¼ŒæŒ‡åŒ…å«è¿æ¥è¯¦ç»†ä¿¡æ¯çš„ä¸€æ®µæ–‡æœ¬ã€‚è¿™äº›å­—ç¬¦ä¸²ç”¨äºè¿æ¥ IoT Hubã€æ•°æ®åº“å’Œè®¸å¤šå…¶ä»–æœåŠ¡ã€‚å®ƒä»¬é€šå¸¸åŒ…æ‹¬æœåŠ¡çš„æ ‡è¯†ç¬¦ï¼ˆå¦‚ URLï¼‰å’Œå®‰å…¨ä¿¡æ¯ï¼ˆå¦‚å¯†é’¥ï¼‰ã€‚è¿™äº›å­—ç¬¦ä¸²ä¼šä¼ é€’ç»™ SDK ä»¥è¿æ¥åˆ°æœåŠ¡ã€‚

> âš ï¸ è¿æ¥å­—ç¬¦ä¸²åº”ä¿æŒå®‰å…¨ï¼å®‰å…¨æ€§å°†åœ¨åç»­è¯¾ç¨‹ä¸­è¯¦ç»†ä»‹ç»ã€‚

### ä»»åŠ¡ - æ³¨å†Œæ‚¨çš„ IoT è®¾å¤‡

å¯ä»¥ä½¿ç”¨ Azure CLI å°† IoT è®¾å¤‡æ³¨å†Œåˆ° IoT Hubã€‚

1. è¿è¡Œä»¥ä¸‹å‘½ä»¤æ³¨å†Œè®¾å¤‡ï¼š

    ```sh
    az iot hub device-identity create --device-id soil-moisture-sensor \
                                      --hub-name <hub_name>
    ```

    å°† `<hub_name>` æ›¿æ¢ä¸ºæ‚¨ä¸º IoT Hub ä½¿ç”¨çš„åç§°ã€‚

    è¿™å°†åˆ›å»ºä¸€ä¸ª ID ä¸º `soil-moisture-sensor` çš„è®¾å¤‡ã€‚

1. å½“æ‚¨çš„ IoT è®¾å¤‡ä½¿ç”¨ SDK è¿æ¥åˆ° IoT Hub æ—¶ï¼Œéœ€è¦ä½¿ç”¨ä¸€ä¸ªè¿æ¥å­—ç¬¦ä¸²ï¼Œè¯¥å­—ç¬¦ä¸²åŒ…å« Hub çš„ URL å’Œå¯†é’¥ã€‚è¿è¡Œä»¥ä¸‹å‘½ä»¤è·å–è¿æ¥å­—ç¬¦ä¸²ï¼š

    ```sh
    az iot hub device-identity connection-string show --device-id soil-moisture-sensor \
                                                      --output table \
                                                      --hub-name <hub_name>
    ```

    å°† `<hub_name>` æ›¿æ¢ä¸ºæ‚¨ä¸º IoT Hub ä½¿ç”¨çš„åç§°ã€‚

1. ä¿å­˜è¾“å‡ºä¸­æ˜¾ç¤ºçš„è¿æ¥å­—ç¬¦ä¸²ï¼Œç¨åæ‚¨å°†éœ€è¦å®ƒã€‚

### ä»»åŠ¡ - å°† IoT è®¾å¤‡è¿æ¥åˆ°äº‘

æŒ‰ç…§ç›¸å…³æŒ‡å—å°†æ‚¨çš„ IoT è®¾å¤‡è¿æ¥åˆ°äº‘ï¼š

* [Arduino - Wio Terminal](wio-terminal-connect-hub.md)
* [å•æ¿è®¡ç®—æœº - Raspberry Pi/è™šæ‹Ÿ IoT è®¾å¤‡](single-board-computer-connect-hub.md)

### ä»»åŠ¡ - ç›‘æ§äº‹ä»¶

ç›®å‰ï¼Œæ‚¨æ— éœ€æ›´æ–°æœåŠ¡å™¨ä»£ç ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ Azure CLI ç›‘æ§æ¥è‡ª IoT è®¾å¤‡çš„äº‹ä»¶ã€‚

1. ç¡®ä¿æ‚¨çš„ IoT è®¾å¤‡æ­£åœ¨è¿è¡Œå¹¶å‘é€åœŸå£¤æ¹¿åº¦é¥æµ‹å€¼ã€‚

1. åœ¨å‘½ä»¤æç¤ºç¬¦æˆ–ç»ˆç«¯ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ä»¥ç›‘æ§å‘é€åˆ° IoT Hub çš„æ¶ˆæ¯ï¼š

    ```sh
    az iot hub monitor-events --hub-name <hub_name>
    ```

    å°† `<hub_name>` æ›¿æ¢ä¸ºæ‚¨ä¸º IoT Hub ä½¿ç”¨çš„åç§°ã€‚

    æ‚¨å°†åœ¨æ§åˆ¶å°è¾“å‡ºä¸­çœ‹åˆ° IoT è®¾å¤‡å‘é€çš„æ¶ˆæ¯ã€‚

    ```output
    Starting event monitor, use ctrl-c to stop...
    {
        "event": {
            "origin": "soil-moisture-sensor",
            "module": "",
            "interface": "",
            "component": "",
            "payload": "{\"soil_moisture\": 376}"
        }
    },
    {
        "event": {
            "origin": "soil-moisture-sensor",
            "module": "",
            "interface": "",
            "component": "",
            "payload": "{\"soil_moisture\": 381}"
        }
    }
    ```

    `payload` çš„å†…å®¹å°†ä¸æ‚¨çš„ IoT è®¾å¤‡å‘é€çš„æ¶ˆæ¯åŒ¹é…ã€‚

    > æˆªè‡³æ’°å†™æœ¬æ–‡æ—¶ï¼Œ`az iot` æ‰©å±•åœ¨ Apple Silicon ä¸Šå°šæœªå®Œå…¨å·¥ä½œã€‚å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯ Apple Silicon è®¾å¤‡ï¼Œåˆ™éœ€è¦é€šè¿‡å…¶ä»–æ–¹å¼ç›‘æ§æ¶ˆæ¯ï¼Œä¾‹å¦‚ä½¿ç”¨ [Visual Studio Code çš„ Azure IoT å·¥å…·](https://docs.microsoft.com/en-us/azure/iot-hub/iot-hub-vscode-iot-toolkit-cloud-device-messaging)ã€‚

1. è¿™äº›æ¶ˆæ¯ä¼šè‡ªåŠ¨é™„åŠ ä¸€äº›å±æ€§ï¼Œä¾‹å¦‚å‘é€çš„æ—¶é—´æˆ³ã€‚è¿™äº›å±æ€§ç§°ä¸º*æ³¨è§£*ã€‚è¦æŸ¥çœ‹æ‰€æœ‰æ¶ˆæ¯æ³¨è§£ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š

    ```sh
    az iot hub monitor-events --properties anno --hub-name <hub_name>
    ```

    å°† `<hub_name>` æ›¿æ¢ä¸ºæ‚¨ä¸º IoT Hub ä½¿ç”¨çš„åç§°ã€‚

    æ‚¨å°†åœ¨æ§åˆ¶å°è¾“å‡ºä¸­çœ‹åˆ° IoT è®¾å¤‡å‘é€çš„æ¶ˆæ¯ã€‚

    ```output
    Starting event monitor, use ctrl-c to stop...
    {
        "event": {
            "origin": "soil-moisture-sensor",
            "module": "",
            "interface": "",
            "component": "",
            "properties": {},
            "annotations": {
                "iothub-connection-device-id": "soil-moisture-sensor",
                "iothub-connection-auth-method": "{\"scope\":\"device\",\"type\":\"sas\",\"issuer\":\"iothub\",\"acceptingIpFilterRule\":null}",
                "iothub-connection-auth-generation-id": "637553997165220462",
                "iothub-enqueuedtime": 1619976150288,
                "iothub-message-source": "Telemetry",
                "x-opt-sequence-number": 1379,
                "x-opt-offset": "550576",
                "x-opt-enqueued-time": 1619976150277
            },
            "payload": "{\"soil_moisture\": 381}"
        }
    }
    ```

    æ³¨è§£ä¸­çš„æ—¶é—´å€¼æ˜¯ [UNIX æ—¶é—´](https://wikipedia.org/wiki/Unix_time)ï¼Œè¡¨ç¤ºè‡ª 1970 å¹´ 1 æœˆ 1 æ—¥åˆå¤œä»¥æ¥çš„ç§’æ•°ã€‚

    å®Œæˆåé€€å‡ºäº‹ä»¶ç›‘æ§ã€‚

### ä»»åŠ¡ - æ§åˆ¶æ‚¨çš„ IoT è®¾å¤‡

æ‚¨è¿˜å¯ä»¥ä½¿ç”¨ Azure CLI è°ƒç”¨ IoT è®¾å¤‡ä¸Šçš„ç›´æ¥æ–¹æ³•ã€‚

1. åœ¨å‘½ä»¤æç¤ºç¬¦æˆ–ç»ˆç«¯ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ä»¥è°ƒç”¨ IoT è®¾å¤‡ä¸Šçš„ `relay_on` æ–¹æ³•ï¼š

    ```sh
    az iot hub invoke-device-method --device-id soil-moisture-sensor \
                                    --method-name relay_on \
                                    --method-payload '{}' \
                                    --hub-name <hub_name>
    ```

    å°† `
<hub_name>
ä½¿ç”¨æ‚¨ä¸º IoT Hub è®¾ç½®çš„åç§°ã€‚

è¿™å°†å‘é€ä¸€ä¸ªç›´æ¥æ–¹æ³•è¯·æ±‚ï¼Œè°ƒç”¨æŒ‡å®šçš„ `method-name` æ–¹æ³•ã€‚ç›´æ¥æ–¹æ³•å¯ä»¥æºå¸¦ä¸€ä¸ªåŒ…å«æ–¹æ³•æ•°æ®çš„æœ‰æ•ˆè´Ÿè½½ï¼Œè¿™å¯ä»¥é€šè¿‡ `method-payload` å‚æ•°ä»¥ JSON æ ¼å¼æŒ‡å®šã€‚

æ‚¨å°†çœ‹åˆ°ç»§ç”µå™¨æ‰“å¼€ï¼Œå¹¶ä»æ‚¨çš„ IoT è®¾å¤‡ä¸­çœ‹åˆ°ç›¸åº”çš„è¾“å‡ºï¼š

```output
    Direct method received -  relay_on
    ```

1. é‡å¤ä¸Šè¿°æ­¥éª¤ï¼Œä½†å°† `--method-name` è®¾ç½®ä¸º `relay_off`ã€‚æ‚¨å°†çœ‹åˆ°ç»§ç”µå™¨å…³é—­ï¼Œå¹¶ä» IoT è®¾å¤‡ä¸­çœ‹åˆ°ç›¸åº”çš„è¾“å‡ºã€‚

---

## ğŸš€ æŒ‘æˆ˜

IoT Hub çš„å…è´¹å±‚æ¯å¤©å…è®¸å‘é€ 8,000 æ¡æ¶ˆæ¯ã€‚æ‚¨ç¼–å†™çš„ä»£ç æ¯ 10 ç§’å‘é€ä¸€æ¡é¥æµ‹æ¶ˆæ¯ã€‚æ¯ 10 ç§’å‘é€ä¸€æ¡æ¶ˆæ¯ï¼Œä¸€å¤©ä¼šå‘é€å¤šå°‘æ¡æ¶ˆæ¯ï¼Ÿ

æ€è€ƒä¸€ä¸‹ï¼ŒåœŸå£¤æ¹¿åº¦çš„æµ‹é‡æ•°æ®åº”è¯¥å¤šé¢‘ç¹å‘é€ï¼Ÿå¦‚ä½•ä¿®æ”¹æ‚¨çš„ä»£ç ä»¥ä¿æŒåœ¨å…è´¹å±‚çš„é™åˆ¶å†…ï¼ŒåŒæ—¶ç¡®ä¿éœ€è¦æ—¶è¿›è¡Œæ£€æŸ¥ä½†ä¸è¿‡äºé¢‘ç¹ï¼Ÿå¦‚æœæ‚¨æƒ³æ·»åŠ ç¬¬äºŒä¸ªè®¾å¤‡ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿ

## è¯¾åæµ‹éªŒ

[è¯¾åæµ‹éªŒ](https://black-meadow-040d15503.1.azurestaticapps.net/quiz/16)

## å¤ä¹ ä¸è‡ªå­¦

IoT Hub SDK å¯¹ Arduino å’Œ Python éƒ½æ˜¯å¼€æºçš„ã€‚åœ¨ GitHub ä¸Šçš„ä»£ç ä»“åº“ä¸­ï¼Œæœ‰è®¸å¤šç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ä¸åŒçš„ IoT Hub åŠŸèƒ½ã€‚

* å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯ Wio Terminalï¼Œè¯·æŸ¥çœ‹ [GitHub ä¸Šçš„ Arduino ç¤ºä¾‹](https://github.com/Azure/azure-iot-pal-arduino/tree/master/pal/samples)
* å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯ Raspberry Pi æˆ–è™šæ‹Ÿè®¾å¤‡ï¼Œè¯·æŸ¥çœ‹ [GitHub ä¸Šçš„ Python ç¤ºä¾‹](https://github.com/Azure/azure-iot-sdk-python/tree/master/azure-iot-hub/samples)

## ä½œä¸š

[äº†è§£äº‘æœåŠ¡](assignment.md)

**å…è´£å£°æ˜**ï¼š  
æœ¬æ–‡æ¡£ä½¿ç”¨AIç¿»è¯‘æœåŠ¡ [Co-op Translator](https://github.com/Azure/co-op-translator) è¿›è¡Œç¿»è¯‘ã€‚å°½ç®¡æˆ‘ä»¬åŠªåŠ›ç¡®ä¿ç¿»è¯‘çš„å‡†ç¡®æ€§ï¼Œä½†è¯·æ³¨æ„ï¼Œè‡ªåŠ¨ç¿»è¯‘å¯èƒ½åŒ…å«é”™è¯¯æˆ–ä¸å‡†ç¡®ä¹‹å¤„ã€‚åº”ä»¥åŸæ–‡æ¡£çš„åŸå§‹è¯­è¨€ç‰ˆæœ¬ä¸ºæƒå¨æ¥æºã€‚å¯¹äºå…³é”®ä¿¡æ¯ï¼Œå»ºè®®ä½¿ç”¨ä¸“ä¸šäººå·¥ç¿»è¯‘ã€‚æˆ‘ä»¬å¯¹å› ä½¿ç”¨æœ¬ç¿»è¯‘è€Œå¼•èµ·çš„ä»»ä½•è¯¯è§£æˆ–è¯¯è¯»ä¸æ‰¿æ‹…è´£ä»»ã€‚