<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "0b2ae20b0fc8e73c9598dea937cac038",
  "translation_date": "2025-08-26T21:33:44+00:00",
  "source_file": "5-retail/lessons/2-check-stock-device/wio-terminal-count-stock.md",
  "language_code": "ur"
}
-->
# ุงูพู IoT ฺูุงุฆุณ ุณ ุงุณูนุงฺฉ ฺฏูฺบ - Wio Terminal

ูพุดฺฏูุฆูฺบ ุงูุฑ ุงู ฺฉ ุจุงุคูฺูฺฏ ุจุงฺฉุณุฒ ฺฉ ุงูุชุฒุงุฌ ฺฉู ุชุตูุฑ ูฺบ ุงุณูนุงฺฉ ฺฏูู ฺฉ ู ุงุณุชุนูุงู ฺฉุง ุฌุง ุณฺฉุชุง 

## ุงุณูนุงฺฉ ฺฏููุง

![ูนูุงูนุฑ ฺฉ ูพุณูน ฺฉ 4 ฺุจุ ุฑ ฺุจ ฺฉ ฺฏุฑุฏ ุจุงุคูฺูฺฏ ุจุงฺฉุณุฒ ฺฉ ุณุงุชฺพ](../../../../../translated_images/rpi-stock-with-bounding-boxes.b5540e2ecb7cd49f1271828d3be412671d950e87625c5597ea97c90f11e01097.ur.jpg)

ุงููพุฑ ุฏฺฉฺพุงุฆ ฺฏุฆ ุชุตูุฑ ูฺบุ ุจุงุคูฺูฺฏ ุจุงฺฉุณุฒ ูฺบ ุชฺพูฺุง ุณุง ุงููุฑููพ  ุงฺฏุฑ  ุงููุฑููพ ุจุช ุฒุงุฏ ูุชุงุ ุชู ุจุงุคูฺูฺฏ ุจุงฺฉุณุฒ ุงฺฉ  ฺุฒ ฺฉ ูุดุงูุฏ ฺฉุฑ ุณฺฉุช ุชฺพ ุงุดุงุก ฺฉู ุฏุฑุณุช ุทุฑู ุณ ฺฏูู ฺฉ ูุ ุขูพ ฺฉู ุงู ุจุงฺฉุณุฒ ฺฉู ูุธุฑุงูุฏุงุฒ ฺฉุฑูุง ูฺฏุง ุฌู ูฺบ ููุงุงฺบ ุงููุฑููพ ู

### ฺฉุงู - ุงููุฑููพ ฺฉู ูุธุฑุงูุฏุงุฒ ฺฉุฑุช ูุฆ ุงุณูนุงฺฉ ฺฏูฺบ

1. ุงฺฏุฑ ุขูพ ฺฉุง `stock-counter` ูพุฑูุฌฺฉูน ูพู ุณ ฺฉฺพูุง ูฺบ  ุชู ุงุณ ฺฉฺพููฺบ

1. `processPredictions` ููฺฉุดู ฺฉ ุงููพุฑุ ุฏุฑุฌ ุฐู ฺฉูฺ ุดุงูู ฺฉุฑฺบ:

    ```cpp
    const float overlap_threshold = 0.20f;
    ```

     ุงุณ ุงููุฑููพ ฺฉ ูุตุฏ ฺฉ ูุถุงุญุช ฺฉุฑุชุง  ุฌู ุจุงุคูฺูฺฏ ุจุงฺฉุณุฒ ฺฉู ุงฺฉ  ฺุฒ ุณูุฌฺพู ุณ ูพู ุงุฌุงุฒุช ุฏ ุฌุงุช  0.20 ฺฉุง ูุทูุจ  20% ุงููุฑููพ

1. ุงุณ ฺฉ ูฺุ ุงูุฑ `processPredictions` ููฺฉุดู ฺฉ ุงููพุฑุ ุฏู ูุณุชุทููฺบ ฺฉ ุฏุฑูุงู ุงููุฑููพ ฺฉุง ุญุณุงุจ ูฺฏุงู ฺฉ ู ุฏุฑุฌ ุฐู ฺฉูฺ ุดุงูู ฺฉุฑฺบ:

    ```cpp
    struct Point {
        float x, y;
    };

    struct Rect {
        Point topLeft, bottomRight;
    };

    float area(Rect rect)
    {
        return abs(rect.bottomRight.x - rect.topLeft.x) * abs(rect.bottomRight.y - rect.topLeft.y);
    }
     
    float overlappingArea(Rect rect1, Rect rect2)
    {
        float left = max(rect1.topLeft.x, rect2.topLeft.x);
        float right = min(rect1.bottomRight.x, rect2.bottomRight.x);
        float top = max(rect1.topLeft.y, rect2.topLeft.y);
        float bottom = min(rect1.bottomRight.y, rect2.bottomRight.y);
    
    
        if ( right > left && bottom > top )
        {
            return (right-left)*(bottom-top);
        }
        
        return 0.0f;
    }
    ```

     ฺฉูฺ ุงฺฉ `Point` ุงุณูนุฑฺฉฺุฑ ฺฉ ูุถุงุญุช ฺฉุฑุชุง  ุฌู ุชุตูุฑ ูพุฑ ูพูุงุฆููนุณ ฺฉู ุงุณูนูุฑ ฺฉุฑุชุง ุ ุงูุฑ ุงฺฉ `Rect` ุงุณูนุฑฺฉฺุฑ ุฌู ุงููพุฑ ุจุงุฆฺบ ุงูุฑ ูฺ ุฏุงุฆฺบ ฺฉูุขุฑฺููน ฺฉุง ุงุณุชุนูุงู ฺฉุฑุช ูุฆ ุงฺฉ ูุณุชุทู ฺฉ ูุถุงุญุช ฺฉุฑุชุง  ูพฺพุฑ  ุงฺฉ `area` ููฺฉุดู ฺฉ ูุถุงุญุช ฺฉุฑุชุง  ุฌู ุงููพุฑ ุจุงุฆฺบ ุงูุฑ ูฺ ุฏุงุฆฺบ ฺฉูุขุฑฺููน ุณ ูุณุชุทู ฺฉุง ุฑูุจ ูฺฉุงูุชุง 

    ุงุณ ฺฉ ุจุนุฏ  ุงฺฉ `overlappingArea` ููฺฉุดู ฺฉ ูุถุงุญุช ฺฉุฑุชุง  ุฌู 2 ูุณุชุทููฺบ ฺฉ ุงููุฑููพูฺฏ ุฑูุจ ฺฉุง ุญุณุงุจ ูฺฏุงุชุง  ุงฺฏุฑ ู ุงููุฑููพ ู ฺฉุฑฺบุ ุชู  0 ูุงูพุณ ฺฉุฑุชุง 

1. `overlappingArea` ููฺฉุดู ฺฉ ูฺุ ุงฺฉ ููฺฉุดู ฺฉุง ุงุนูุงู ฺฉุฑฺบ ุฌู ุจุงุคูฺูฺฏ ุจุงฺฉุณ ฺฉู `Rect` ูฺบ ุชุจุฏู ฺฉุฑ:

    ```cpp
    Rect rectFromBoundingBox(JsonVariant prediction)
    {
        JsonObject bounding_box = prediction["boundingBox"].as<JsonObject>();
    
        float left = bounding_box["left"].as<float>();
        float top = bounding_box["top"].as<float>();
        float width = bounding_box["width"].as<float>();
        float height = bounding_box["height"].as<float>();
    
        Point topLeft = {left, top};
        Point bottomRight = {left + width, top + height};
    
        return {topLeft, bottomRight};
    }
    ```

     ุขุจุฌฺฉูน ฺูนฺฉูนุฑ ุณ ุงฺฉ ูพุดฺฏูุฆ ูุชุง ุ ุจุงุคูฺูฺฏ ุจุงฺฉุณ ูฺฉุงูุชุง  ุงูุฑ ุจุงุคูฺูฺฏ ุจุงฺฉุณ ฺฉ ูุฏุฑูฺบ ฺฉู ุงุณุชุนูุงู ฺฉุฑุช ูุฆ ุงฺฉ ูุณุชุทู ฺฉ ูุถุงุญุช ฺฉุฑุชุง  ุฏุงุฆฺบ ุทุฑู ุจุงุฆฺบ ุทุฑู ุณ ฺูฺุงุฆ ุดุงูู ฺฉุฑ ฺฉ ูฺฉุงู ุฌุงุช  ูฺ ฺฉ ุทุฑู ุงููพุฑ ุณ ุงููฺุงุฆ ุดุงูู ฺฉุฑ ฺฉ ูฺฉุงู ุฌุงุช 

1. ูพุดฺฏูุฆูฺบ ฺฉู ุงฺฉ ุฏูุณุฑ ุณ ููุงุฒู ฺฉุฑู ฺฉ ุถุฑูุฑุช ุ ุงูุฑ ุงฺฏุฑ 2 ูพุดฺฏูุฆูฺบ ูฺบ ุงููุฑููพ ุชฺพุฑุดููฺ ุณ ุฒุงุฏ ูุ ุชู ุงู ูฺบ ุณ ุงฺฉ ฺฉู ุญุฐู ฺฉุฑูุง ูฺฏุง ุงููุฑููพ ุชฺพุฑุดููฺ ุงฺฉ ูุตุฏ ุ ุงุณ ู ุงุณ ุณุจ ุณ ฺฺพููน ุจุงุคูฺูฺฏ ุจุงฺฉุณ ฺฉ ุณุงุฆุฒ ุณ ุถุฑุจ ุฏูุง ูฺฏุง ุชุงฺฉ  ฺฺฉ ฺฉุง ุฌุง ุณฺฉ ฺฉ ุงููุฑููพ ุจุงุคูฺูฺฏ ุจุงฺฉุณ ฺฉ ุฏ ฺฏุฆ ูุตุฏ ุณ ุฒุงุฏ ุ ู ฺฉ ูพูุฑ ุชุตูุฑ ฺฉ ุฏ ฺฏุฆ ูุตุฏ ุณ `processPredictions` ููฺฉุดู ฺฉ ููุงุฏ ฺฉู ุญุฐู ฺฉุฑ ฺฉ ุดุฑูุน ฺฉุฑฺบ

1. ุฎุงู `processPredictions` ููฺฉุดู ูฺบ ุฏุฑุฌ ุฐู ุดุงูู ฺฉุฑฺบ:

    ```cpp
    std::vector<JsonVariant> passed_predictions;

    for (int i = 0; i < predictions.size(); ++i)
    {
        Rect prediction_1_rect = rectFromBoundingBox(predictions[i]);
        float prediction_1_area = area(prediction_1_rect);
        bool passed = true;

        for (int j = i + 1; j < predictions.size(); ++j)
        {
            Rect prediction_2_rect = rectFromBoundingBox(predictions[j]);
            float prediction_2_area = area(prediction_2_rect);

            float overlap = overlappingArea(prediction_1_rect, prediction_2_rect);
            float smallest_area = min(prediction_1_area, prediction_2_area);

            if (overlap > (overlap_threshold * smallest_area))
            {
                passed = false;
                break;
            }
        }

        if (passed)
        {
            passed_predictions.push_back(predictions[i]);
        }
    }
    ```

     ฺฉูฺ ุงู ูพุดฺฏูุฆูฺบ ฺฉู ุงุณูนูุฑ ฺฉุฑู ฺฉ ู ุงฺฉ ูฺฉูนุฑ ฺฉุง ุงุนูุงู ฺฉุฑุชุง  ุฌู ุงููุฑููพ ูฺบ ฺฉุฑุช ฺบ ูพฺพุฑ  ุชูุงู ูพุดฺฏูุฆูฺบ ฺฉ ุฐุฑุน ูููพ ฺฉุฑุชุง ุ ุจุงุคูฺูฺฏ ุจุงฺฉุณ ุณ ุงฺฉ `Rect` ุจูุงุชุง 

    ุงุณ ฺฉ ุจุนุฏ  ุจุงู ูพุดฺฏูุฆูฺบ ฺฉ ุฐุฑุน ูููพ ฺฉุฑุชุง ุ ููุฌูุฏ ูพุดฺฏูุฆ ฺฉ ุจุนุฏ ุณ ุดุฑูุน ฺฉุฑุช ูุฆ  ูพุดฺฏูุฆูฺบ ฺฉู ุงฺฉ ุณ ุฒุงุฏ ุจุงุฑ ููุงุฒู ฺฉุฑู ุณ ุฑูฺฉุชุง  - ุงฺฉ ุจุงุฑ ุฌุจ 1 ุงูุฑ 2 ฺฉุง ููุงุฒู ู ุฌุงุฆุ ุชู 2 ฺฉุง 1 ฺฉ ุณุงุชฺพ ููุงุฒู ฺฉุฑู ฺฉ ุถุฑูุฑุช ูฺบุ ุตุฑู 3ุ 4ุ ูุบุฑ ฺฉ ุณุงุชฺพ

    ุฑ ูพุดฺฏูุฆ ฺฉ ุฌูฺ ฺฉ ู ุงููุฑููพูฺฏ ุงุฑุง ฺฉุง ุญุณุงุจ ูฺฏุงุง ุฌุงุชุง  ูพฺพุฑ ุงุณ ฺฉุง ููุงุฒู ุณุจ ุณ ฺฺพููน ุจุงุคูฺูฺฏ ุจุงฺฉุณ ฺฉ ุฑูุจ ุณ ฺฉุง ุฌุงุชุง  - ุงฺฏุฑ ุงููุฑููพ ุจุงุคูฺูฺฏ ุจุงฺฉุณ ฺฉ ุชฺพุฑุดููฺ ูุตุฏ ุณ ุฒุงุฏ ูุ ุชู ูพุดฺฏูุฆ ฺฉู ูพุงุณ ู ฺฉุฑู ฺฉ ุทูุฑ ูพุฑ ูุดุงู ุฒุฏ ฺฉุง ุฌุงุชุง  ุงฺฏุฑ ุชูุงู ุงููุฑููพ ฺฉุง ููุงุฒู ฺฉุฑู ฺฉ ุจุนุฏุ ูพุดฺฏูุฆ ฺฺฉ ูพุงุณ ฺฉุฑุช  ุชู ุงุณ `passed_predictions` ฺฉูฺฉุดู ูฺบ ุดุงูู ฺฉุฑ ุฏุง ุฌุงุชุง 

    > ๐  ุงููุฑููพ ฺฉู ูนุงู ฺฉุง ุงฺฉ ุจุช  ุณุงุฏ ุทุฑู ุ ุตุฑู ุงููุฑููพูฺฏ ุฌูฺ ูฺบ ุณ ูพู ฺฉู ูนุงูุง ูพุฑูฺฺฉุดู ฺฉูฺ ฺฉ ูุ ุขูพ ฺฉู ุงฺบ ูุฒุฏ ููุทู ุดุงูู ฺฉุฑู ฺฉ ุถุฑูุฑุช ูฺฏุ ุฌุณ ฺฉ ูุชุนุฏุฏ ุงุดุงุก ฺฉ ุฏุฑูุงู ุงููุฑููพ ูพุฑ ุบูุฑ ฺฉุฑูุงุ ุง ุงฺฏุฑ ุงฺฉ ุจุงุคูฺูฺฏ ุจุงฺฉุณ ุฏูุณุฑ ฺฉ ุงูุฏุฑ ู

1. ุงุณ ฺฉ ุจุนุฏุ ูพุงุณ ุดุฏ ูพุดฺฏูุฆูฺบ ฺฉ ุชูุตูุงุช ุณุฑู ูุงููนุฑ ูพุฑ ุจฺพุฌู ฺฉ ู ุฏุฑุฌ ุฐู ฺฉูฺ ุดุงูู ฺฉุฑฺบ:

    ```cpp
    for(JsonVariant prediction : passed_predictions)
    {
        String boundingBox = prediction["boundingBox"].as<String>();
        String tag = prediction["tagName"].as<String>();
        float probability = prediction["probability"].as<float>();

        char buff[32];
        sprintf(buff, "%s:\t%.2f%%\t%s", tag.c_str(), probability * 100.0, boundingBox.c_str());
        Serial.println(buff);
    }
    ```

     ฺฉูฺ ูพุงุณ ุดุฏ ูพุดฺฏูุฆูฺบ ฺฉ ุฐุฑุน ูููพ ฺฉุฑุชุง  ุงูุฑ ุงู ฺฉ ุชูุตูุงุช ุณุฑู ูุงููนุฑ ูพุฑ ูพุฑููน ฺฉุฑุชุง 

1. ุงุณ ฺฉ ูฺุ ุณุฑู ูุงููนุฑ ูพุฑ ฺฏู ฺฏุฆ ุงุดุงุก ฺฉ ุชุนุฏุงุฏ ูพุฑููน ฺฉุฑู ฺฉ ู ฺฉูฺ ุดุงูู ฺฉุฑฺบ:

    ```cpp
    Serial.print("Counted ");
    Serial.print(passed_predictions.size());
    Serial.println(" stock items.");
    ```

     ูพฺพุฑ IoT ุณุฑูุณ ฺฉู ุจฺพุฌุง ุฌุง ุณฺฉุชุง  ุชุงฺฉ ุงฺฏุฑ ุงุณูนุงฺฉ ฺฉ ุณุทุญ ฺฉู ู ุชู ุงูุฑูน ฺฉุง ุฌุง ุณฺฉ

1. ุงูพูุง ฺฉูฺ ุงูพููฺ ฺฉุฑฺบ ุงูุฑ ฺูุงุฆฺบ ฺฉูุฑ ฺฉู ุดูู ูพุฑ ููุฌูุฏ ุงุดุงุก ฺฉ ุทุฑู ฺฉุฑฺบ ุงูุฑ C ุจูนู ุฏุจุงุฆฺบ `overlap_threshold` ููู ฺฉู ุงฺุฌุณูน ฺฉุฑู ฺฉ ฺฉูุดุด ฺฉุฑฺบ ุชุงฺฉ ูพุดฺฏูุฆูฺบ ฺฉู ูุธุฑุงูุฏุงุฒ ูุช ูุฆ ุฏฺฉฺพ ุณฺฉฺบ

    ```output
    Connecting to WiFi..
    Connected!
    Image captured
    Image read to buffer with length 17416
    tomato paste:   35.84%  {"left":0.395631,"top":0.215897,"width":0.180768,"height":0.359364}
    tomato paste:   35.87%  {"left":0.378554,"top":0.583012,"width":0.14824,"height":0.359382}
    tomato paste:   34.11%  {"left":0.699024,"top":0.592617,"width":0.124411,"height":0.350456}
    tomato paste:   35.16%  {"left":0.513006,"top":0.647853,"width":0.187472,"height":0.325817}
    Counted 4 stock items.
    ```

> ๐ ุขูพ ุงุณ ฺฉูฺ ฺฉู [code-count/wio-terminal](../../../../../5-retail/lessons/2-check-stock-device/code-count/wio-terminal) ูููฺุฑ ูฺบ ุชูุงุด ฺฉุฑ ุณฺฉุช ฺบ

๐ ุขูพ ฺฉุง ุงุณูนุงฺฉ ฺฉุงุคููนุฑ ูพุฑูฺฏุฑุงู ฺฉุงูุงุจ ุฑุง!

---

**ฺุณฺฉููุฑ**:  
 ุฏุณุชุงูุฒ AI ุชุฑุฌู ุณุฑูุณ [Co-op Translator](https://github.com/Azure/co-op-translator) ฺฉุง ุงุณุชุนูุงู ฺฉุฑุช ูุฆ ุชุฑุฌู ฺฉ ฺฏุฆ  ู ุฏุฑุณุชฺฏ ฺฉ ู ฺฉูุดุด ฺฉุฑุช ฺบุ ูฺฉู ุจุฑุง ฺฉุฑู ุขฺฏุง ุฑฺบ ฺฉ ุฎูุฏฺฉุงุฑ ุชุฑุฌู ูฺบ ุบูุทุงฺบ ุง ุบุฑ ุฏุฑุณุชุงฺบ ู ุณฺฉุช ฺบ ุงุตู ุฏุณุชุงูุฒ ฺฉู ุงุณ ฺฉ ุงุตู ุฒุจุงู ูฺบ ูุณุชูุฏ ุฐุฑุน ุณูุฌฺพุง ุฌุงูุง ฺุง ุงู ูุนูููุงุช ฺฉ ูุ ูพุด ูุฑ ุงูุณุงู ุชุฑุฌู ฺฉ ุณูุงุฑุด ฺฉ ุฌุงุช  ู ุงุณ ุชุฑุฌู ฺฉ ุงุณุชุนูุงู ุณ ูพุฏุง ูู ูุงู ฺฉุณ ุจฺพ ุบูุท ูู ุง ุบูุท ุชุดุฑุญ ฺฉ ุฐู ุฏุงุฑ ูฺบ ฺบ