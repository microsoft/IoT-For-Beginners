<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "9095c61445c2bca7245ef9b59a186a11",
  "translation_date": "2025-08-25T00:56:00+00:00",
  "source_file": "3-transport/lessons/3-visualize-location-data/README.md",
  "language_code": "tw"
}
-->
# å¯è¦–åŒ–ä½ç½®æ•¸æ“š

![æœ¬èª²ç¨‹çš„æ‰‹ç¹ªç­†è¨˜æ¦‚è¿°](../../../../../translated_images/lesson-13.a259db1485021be7d7c72e90842fbe0ab977529e8684c179b5fb1ea75e92b3ef.tw.jpg)

> æ‰‹ç¹ªç­†è¨˜ç”± [Nitya Narasimhan](https://github.com/nitya) æä¾›ã€‚é»æ“Šåœ–ç‰‡æŸ¥çœ‹æ›´å¤§ç‰ˆæœ¬ã€‚

é€™æ®µå½±ç‰‡æ¦‚è¿°äº† Azure Maps èˆ‡ IoT çš„åŠŸèƒ½ï¼Œé€™æ˜¯æœ¬èª²ç¨‹å°‡æ¶µè“‹çš„å…§å®¹ã€‚

[![Azure Maps - å¾®è»Ÿ Azure ä¼æ¥­ä½ç½®å¹³å°](https://img.youtube.com/vi/P5i2GFTtb2s/0.jpg)](https://www.youtube.com/watch?v=P5i2GFTtb2s)

> ğŸ¥ é»æ“Šä¸Šæ–¹åœ–ç‰‡è§€çœ‹å½±ç‰‡

## èª²å‰æ¸¬é©—

[èª²å‰æ¸¬é©—](https://black-meadow-040d15503.1.azurestaticapps.net/quiz/25)

## ç°¡ä»‹

åœ¨ä¸Šä¸€èª²ä¸­ï¼Œä½ å­¸ç¿’äº†å¦‚ä½•å¾æ„Ÿæ¸¬å™¨ç²å– GPS æ•¸æ“šä¸¦ä½¿ç”¨ç„¡ä¼ºæœå™¨ä»£ç¢¼å°‡å…¶ä¿å­˜åˆ°é›²ç«¯çš„å­˜å„²å®¹å™¨ä¸­ã€‚ç¾åœ¨ï¼Œä½ å°‡å­¸ç¿’å¦‚ä½•åœ¨ Azure åœ°åœ–ä¸Šå¯è¦–åŒ–é€™äº›é»ã€‚ä½ å°‡å­¸ç¿’å¦‚ä½•åœ¨ç¶²é ä¸Šå‰µå»ºåœ°åœ–ï¼Œäº†è§£ GeoJSON æ•¸æ“šæ ¼å¼ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨å®ƒåœ¨åœ°åœ–ä¸Šç¹ªè£½æ‰€æœ‰æ•ç²çš„ GPS é»ã€‚

åœ¨æœ¬èª²ç¨‹ä¸­ï¼Œæˆ‘å€‘å°‡æ¶µè“‹ï¼š

* [ä»€éº¼æ˜¯æ•¸æ“šå¯è¦–åŒ–](../../../../../3-transport/lessons/3-visualize-location-data)
* [åœ°åœ–æœå‹™](../../../../../3-transport/lessons/3-visualize-location-data)
* [å‰µå»º Azure Maps è³‡æº](../../../../../3-transport/lessons/3-visualize-location-data)
* [åœ¨ç¶²é ä¸Šé¡¯ç¤ºåœ°åœ–](../../../../../3-transport/lessons/3-visualize-location-data)
* [GeoJSON æ ¼å¼](../../../../../3-transport/lessons/3-visualize-location-data)
* [ä½¿ç”¨ GeoJSON åœ¨åœ°åœ–ä¸Šç¹ªè£½ GPS æ•¸æ“š](../../../../../3-transport/lessons/3-visualize-location-data)

> ğŸ’ æœ¬èª²ç¨‹å°‡æ¶‰åŠå°‘é‡ HTML å’Œ JavaScriptã€‚å¦‚æœä½ æƒ³äº†è§£æ›´å¤šé—œæ–¼ä½¿ç”¨ HTML å’Œ JavaScript é€²è¡Œç¶²é é–‹ç™¼çš„å…§å®¹ï¼Œè«‹æŸ¥çœ‹ [Web development for beginners](https://github.com/microsoft/Web-Dev-For-Beginners)ã€‚

## ä»€éº¼æ˜¯æ•¸æ“šå¯è¦–åŒ–

æ•¸æ“šå¯è¦–åŒ–ï¼Œé¡§åæ€ç¾©ï¼Œæ˜¯ä»¥æ›´å®¹æ˜“è®“äººé¡ç†è§£çš„æ–¹å¼ä¾†å¯è¦–åŒ–æ•¸æ“šã€‚å®ƒé€šå¸¸èˆ‡åœ–è¡¨å’Œåœ–å½¢ç›¸é—œï¼Œä½†ä»»ä½•ä»¥åœ–åƒæ–¹å¼å‘ˆç¾æ•¸æ“šä»¥å¹«åŠ©äººé¡æ›´å¥½åœ°ç†è§£æ•¸æ“šä¸¦åšå‡ºæ±ºç­–çš„æ–¹å¼éƒ½å±¬æ–¼æ•¸æ“šå¯è¦–åŒ–ã€‚

èˆ‰å€‹ç°¡å–®çš„ä¾‹å­â€”â€”åœ¨è¾²å ´é …ç›®ä¸­ï¼Œä½ æ•ç²äº†åœŸå£¤æ¿•åº¦çš„æ•¸æ“šã€‚ä»¥ä¸‹æ˜¯ 2021 å¹´ 6 æœˆ 1 æ—¥æ¯å°æ™‚æ•ç²çš„åœŸå£¤æ¿•åº¦æ•¸æ“šè¡¨ï¼š

| æ—¥æœŸ             | è®€æ•¸   |
| ---------------- | ------: |
| 01/06/2021 00:00 |     257 |
| 01/06/2021 01:00 |     268 |
| 01/06/2021 02:00 |     295 |
| 01/06/2021 03:00 |     305 |
| 01/06/2021 04:00 |     325 |
| 01/06/2021 05:00 |     359 |
| 01/06/2021 06:00 |     398 |
| 01/06/2021 07:00 |     410 |
| 01/06/2021 08:00 |     429 |
| 01/06/2021 09:00 |     451 |
| 01/06/2021 10:00 |     460 |
| 01/06/2021 11:00 |     452 |
| 01/06/2021 12:00 |     420 |
| 01/06/2021 13:00 |     408 |
| 01/06/2021 14:00 |     431 |
| 01/06/2021 15:00 |     462 |
| 01/06/2021 16:00 |     432 |
| 01/06/2021 17:00 |     402 |
| 01/06/2021 18:00 |     387 |
| 01/06/2021 19:00 |     360 |
| 01/06/2021 20:00 |     358 |
| 01/06/2021 21:00 |     354 |
| 01/06/2021 22:00 |     356 |
| 01/06/2021 23:00 |     362 |

å°äººé¡è€Œè¨€ï¼Œç†è§£é€™äº›æ•¸æ“šå¯èƒ½å¾ˆå›°é›£ã€‚é€™æ˜¯ä¸€å †æ²’æœ‰æ„ç¾©çš„æ•¸å­—ã€‚ä½œç‚ºå¯è¦–åŒ–é€™äº›æ•¸æ“šçš„ç¬¬ä¸€æ­¥ï¼Œå¯ä»¥å°‡å…¶ç¹ªè£½æˆæŠ˜ç·šåœ–ï¼š

![ä¸Šè¿°æ•¸æ“šçš„æŠ˜ç·šåœ–](../../../../../translated_images/chart-soil-moisture.fd6d9d0cdc0b5f75e78038ecb8945dfc84b38851359de99d84b16e3336d6d7c2.tw.png)

é€™å¯ä»¥é€²ä¸€æ­¥å¢å¼·ï¼Œä¾‹å¦‚æ·»åŠ ä¸€æ¢ç·šä¾†æŒ‡ç¤ºè‡ªå‹•çŒæº‰ç³»çµ±åœ¨åœŸå£¤æ¿•åº¦è®€æ•¸é”åˆ° 450 æ™‚å•Ÿå‹•ï¼š

![å¸¶æœ‰ 450 æ¨™è¨˜ç·šçš„åœŸå£¤æ¿•åº¦æŠ˜ç·šåœ–](../../../../../translated_images/chart-soil-moisture-relay.fbb391236d34a64d0abf1df396e9197e0a24df14150620b9cc820a64a55c9326.tw.png)

é€™å¼µåœ–è¡¨å¯ä»¥éå¸¸å¿«é€Ÿåœ°é¡¯ç¤ºåœŸå£¤æ¿•åº¦æ°´å¹³ä»¥åŠçŒæº‰ç³»çµ±å•Ÿå‹•çš„æ™‚é–“é»ã€‚

åœ–è¡¨ä¸¦ä¸æ˜¯å”¯ä¸€çš„æ•¸æ“šå¯è¦–åŒ–å·¥å…·ã€‚è¿½è¹¤å¤©æ°£çš„ IoT è¨­å‚™å¯ä»¥é€šéç¶²é æ‡‰ç”¨æˆ–ç§»å‹•æ‡‰ç”¨ä½¿ç”¨ç¬¦è™Ÿä¾†å¯è¦–åŒ–å¤©æ°£æ¢ä»¶ï¼Œä¾‹å¦‚ç”¨é›²æœµç¬¦è™Ÿè¡¨ç¤ºå¤šé›²å¤©æ°£ï¼Œç”¨é›¨é›²ç¬¦è™Ÿè¡¨ç¤ºä¸‹é›¨å¤©æ°£ç­‰ç­‰ã€‚å¯è¦–åŒ–æ•¸æ“šçš„æ–¹æ³•æœ‰å¾ˆå¤šï¼Œæœ‰äº›æ˜¯åš´è‚…çš„ï¼Œæœ‰äº›æ˜¯æœ‰è¶£çš„ã€‚

âœ… æƒ³ä¸€æƒ³ä½ æ›¾ç¶“è¦‹éçš„æ•¸æ“šå¯è¦–åŒ–æ–¹å¼ã€‚å“ªäº›æ–¹å¼æœ€æ¸…æ™°ï¼Œèƒ½è®“ä½ æœ€å¿«åšå‡ºæ±ºç­–ï¼Ÿ

æœ€å¥½çš„å¯è¦–åŒ–æ–¹å¼èƒ½è®“äººé¡å¿«é€Ÿåšå‡ºæ±ºç­–ã€‚ä¾‹å¦‚ï¼Œå±•ç¤ºå·¥æ¥­æ©Ÿå™¨çš„å„ç¨®è®€æ•¸çš„å„€è¡¨ç‰†å¯èƒ½å¾ˆé›£è™•ç†ï¼Œä½†ç•¶æŸäº›äº‹æƒ…å‡ºéŒ¯æ™‚ï¼Œé–ƒçˆçš„ç´…ç‡ˆå¯ä»¥è®“äººé¡è¿…é€Ÿåšå‡ºæ±ºç­–ã€‚æœ‰æ™‚å€™ï¼Œæœ€å¥½çš„å¯è¦–åŒ–æ–¹å¼å°±æ˜¯ä¸€ç›é–ƒçˆçš„ç‡ˆï¼

åœ¨è™•ç† GPS æ•¸æ“šæ™‚ï¼Œæœ€æ¸…æ™°çš„å¯è¦–åŒ–æ–¹å¼æ˜¯å°‡æ•¸æ“šç¹ªè£½åœ¨åœ°åœ–ä¸Šã€‚ä¾‹å¦‚ï¼Œä¸€å¼µé¡¯ç¤ºé€è²¨å¡è»Šçš„åœ°åœ–å¯ä»¥å¹«åŠ©åŠ å·¥å» çš„å·¥äººäº†è§£å¡è»Šä½•æ™‚åˆ°é”ã€‚å¦‚æœé€™å¼µåœ°åœ–ä¸åƒ…é¡¯ç¤ºå¡è»Šç•¶å‰ä½ç½®çš„åœ–ç‰‡ï¼Œé‚„æä¾›å¡è»Šå…§å®¹çš„æ¦‚å¿µï¼Œé‚£éº¼åŠ å·¥å» çš„å·¥äººå°±å¯ä»¥ç›¸æ‡‰åœ°é€²è¡Œè¨ˆåŠƒâ€”â€”å¦‚æœä»–å€‘çœ‹åˆ°ä¸€è¼›å†·è—å¡è»Šæ¥è¿‘ï¼Œä»–å€‘å°±çŸ¥é“è¦æº–å‚™å†·è—ç©ºé–“ã€‚

## åœ°åœ–æœå‹™

ä½¿ç”¨åœ°åœ–æ˜¯ä¸€é …æœ‰è¶£çš„ç·´ç¿’ï¼Œæœ‰è¨±å¤šé¸æ“‡ï¼Œä¾‹å¦‚ Bing Mapsã€Leafletã€Open Street Maps å’Œ Google Mapsã€‚åœ¨æœ¬èª²ç¨‹ä¸­ï¼Œä½ å°‡å­¸ç¿’ [Azure Maps](https://azure.microsoft.com/services/azure-maps/?WT.mc_id=academic-17441-jabenn) ä»¥åŠå¦‚ä½•ä½¿ç”¨å®ƒå€‘é¡¯ç¤ºä½ çš„ GPS æ•¸æ“šã€‚

![Azure Maps æ¨™èªŒ](../../../../../translated_images/azure-maps-logo.35d01dcfbd81fe6140e94257aaa1538f785a58c91576d14e0ebe7a2f6c694b99.tw.png)

Azure Maps æ˜¯â€œä¸€çµ„åœ°ç†ç©ºé–“æœå‹™å’Œ SDKï¼Œä½¿ç”¨æœ€æ–°çš„åœ°åœ–æ•¸æ“šç‚ºç¶²é å’Œç§»å‹•æ‡‰ç”¨æä¾›åœ°ç†èƒŒæ™¯ã€‚â€é–‹ç™¼è€…å¯ä»¥ä½¿ç”¨é€™äº›å·¥å…·å‰µå»ºç¾è§€çš„äº¤äº’å¼åœ°åœ–ï¼Œé€™äº›åœ°åœ–å¯ä»¥åŸ·è¡Œä¾‹å¦‚æä¾›æ¨è–¦äº¤é€šè·¯ç·šã€æä¾›äº¤é€šäº‹æ•…ä¿¡æ¯ã€å®¤å…§å°èˆªã€æœç´¢åŠŸèƒ½ã€æµ·æ‹”ä¿¡æ¯ã€å¤©æ°£æœå‹™ç­‰åŠŸèƒ½ã€‚

âœ… è©¦è©¦ä¸€äº› [åœ°åœ–ä»£ç¢¼ç¯„ä¾‹](https://docs.microsoft.com/samples/browse?WT.mc_id=academic-17441-jabenn&products=azure-maps)

ä½ å¯ä»¥å°‡åœ°åœ–é¡¯ç¤ºç‚ºç©ºç™½ç•«å¸ƒã€ç“¦ç‰‡ã€è¡›æ˜Ÿåœ–åƒã€å¸¶æœ‰é“è·¯ç–ŠåŠ çš„è¡›æ˜Ÿåœ–åƒã€å„ç¨®é¡å‹çš„ç°åº¦åœ°åœ–ã€å¸¶æœ‰é™°å½±åœ°å½¢çš„åœ°åœ–ã€å¤œæ™¯åœ°åœ–ä»¥åŠé«˜å°æ¯”åº¦åœ°åœ–ã€‚é€šéèˆ‡ [Azure Event Grid](https://azure.microsoft.com/services/event-grid/?WT.mc_id=academic-17441-jabenn) é›†æˆï¼Œä½ å¯ä»¥åœ¨åœ°åœ–ä¸Šç²å¾—å¯¦æ™‚æ›´æ–°ã€‚ä½ å¯ä»¥å•Ÿç”¨å„ç¨®æ§ä»¶ä¾†æ§åˆ¶åœ°åœ–çš„è¡Œç‚ºå’Œå¤–è§€ï¼Œä½¿åœ°åœ–èƒ½å¤ å°äº‹ä»¶ï¼ˆä¾‹å¦‚æåˆã€æ‹–å‹•å’Œé»æ“Šï¼‰åšå‡ºåæ‡‰ã€‚ç‚ºäº†æ§åˆ¶åœ°åœ–çš„å¤–è§€ï¼Œä½ å¯ä»¥æ·»åŠ åŒ…æ‹¬æ°£æ³¡ã€ç·šæ¢ã€å¤šé‚Šå½¢ã€ç†±åœ–ç­‰çš„åœ–å±¤ã€‚ä½ é¸æ“‡çš„ SDK æ±ºå®šäº†ä½ å¯¦ç¾çš„åœ°åœ–æ¨£å¼ã€‚

ä½ å¯ä»¥é€šéä½¿ç”¨å…¶ [REST API](https://docs.microsoft.com/javascript/api/azure-maps-rest/?WT.mc_id=academic-17441-jabenn&view=azure-maps-typescript-latest)ã€å…¶ [Web SDK](https://docs.microsoft.com/azure/azure-maps/how-to-use-map-control?WT.mc_id=academic-17441-jabenn)ï¼Œæˆ–è€…å¦‚æœä½ æ­£åœ¨æ§‹å»ºç§»å‹•æ‡‰ç”¨ï¼Œå¯ä»¥ä½¿ç”¨å…¶ [Android SDK](https://docs.microsoft.com/azure/azure-maps/how-to-use-android-map-control-library?WT.mc_id=academic-17441-jabenn&pivots=programming-language-java-android) ä¾†è¨ªå• Azure Maps APIã€‚

åœ¨æœ¬èª²ç¨‹ä¸­ï¼Œä½ å°‡ä½¿ç”¨ Web SDK ç¹ªè£½åœ°åœ–ä¸¦é¡¯ç¤ºæ„Ÿæ¸¬å™¨çš„ GPS ä½ç½®è·¯å¾‘ã€‚

## å‰µå»º Azure Maps è³‡æº

ç¬¬ä¸€æ­¥æ˜¯å‰µå»ºä¸€å€‹ Azure Maps å¸³æˆ¶ã€‚

### ä»»å‹™ - å‰µå»º Azure Maps è³‡æº

1. å¾çµ‚ç«¯æˆ–å‘½ä»¤æç¤ºç¬¦é‹è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œåœ¨ä½ çš„ `gps-sensor` è³‡æºçµ„ä¸­å‰µå»ºä¸€å€‹ Azure Maps è³‡æºï¼š

    ```sh
    az maps account create --name gps-sensor \
                           --resource-group gps-sensor \
                           --accept-tos \
                           --sku S1
    ```

    é€™å°‡å‰µå»ºä¸€å€‹åç‚º `gps-sensor` çš„ Azure Maps è³‡æºã€‚ä½¿ç”¨çš„å±¤ç´šæ˜¯ `S1`ï¼Œé€™æ˜¯ä¸€å€‹ä»˜è²»å±¤ç´šï¼ŒåŒ…å«ä¸€ç³»åˆ—åŠŸèƒ½ï¼Œä½†æä¾›äº†å¤§é‡å…è²»çš„èª¿ç”¨ã€‚

    > ğŸ’ è¦æŸ¥çœ‹ä½¿ç”¨ Azure Maps çš„æˆæœ¬ï¼Œè«‹æŸ¥çœ‹ [Azure Maps åƒ¹æ ¼é é¢](https://azure.microsoft.com/pricing/details/azure-maps/?WT.mc_id=academic-17441-jabenn)ã€‚

1. ä½ éœ€è¦ç²å–åœ°åœ–è³‡æºçš„ API å¯†é‘°ã€‚ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç²å–æ­¤å¯†é‘°ï¼š

    ```sh
    az maps account keys list --name gps-sensor \
                              --resource-group gps-sensor \
                              --output table
    ```

    è¤‡è£½ `PrimaryKey` çš„å€¼ã€‚

## åœ¨ç¶²é ä¸Šé¡¯ç¤ºåœ°åœ–

ç¾åœ¨ä½ å¯ä»¥é€²è¡Œä¸‹ä¸€æ­¥ï¼Œåœ¨ç¶²é ä¸Šé¡¯ç¤ºåœ°åœ–ã€‚æˆ‘å€‘å°‡åƒ…ä½¿ç”¨ä¸€å€‹ `html` æ–‡ä»¶ä¾†æ§‹å»ºä½ çš„å°å‹ç¶²é æ‡‰ç”¨ï¼›è«‹è¨˜ä½ï¼Œåœ¨ç”Ÿç”¢æˆ–åœ˜éšŠç’°å¢ƒä¸­ï¼Œä½ çš„ç¶²é æ‡‰ç”¨å¯èƒ½æœƒæœ‰æ›´å¤šçš„çµ„ä»¶ï¼

### ä»»å‹™ - åœ¨ç¶²é ä¸Šé¡¯ç¤ºåœ°åœ–

1. åœ¨æœ¬åœ°é›»è…¦çš„æŸå€‹æ–‡ä»¶å¤¾ä¸­å‰µå»ºä¸€å€‹åç‚º index.html çš„æ–‡ä»¶ã€‚æ·»åŠ  HTML æ¨™è¨˜ä»¥å®¹ç´åœ°åœ–ï¼š

    ```html
    <html>
    <head>
        <style>
            #myMap {
                width:100%;
                height:100%;
            }
        </style>
    </head>
    
    <body onload="init()">
        <div id="myMap"></div>
    </body>
    </html>
    ```

    åœ°åœ–å°‡åŠ è¼‰åˆ° `myMap` çš„ `div` ä¸­ã€‚ä¸€äº›æ¨£å¼å…è¨±å®ƒè·¨è¶Šé é¢çš„å¯¬åº¦å’Œé«˜åº¦ã€‚

    > ğŸ“ `div` æ˜¯ç¶²é çš„ä¸€å€‹éƒ¨åˆ†ï¼Œå¯ä»¥å‘½åå’Œè¨­ç½®æ¨£å¼ã€‚

1. åœ¨é–‹é ­çš„ `<head>` æ¨™ç±¤ä¸‹ï¼Œæ·»åŠ ä¸€å€‹å¤–éƒ¨æ¨£å¼è¡¨ä¾†æ§åˆ¶åœ°åœ–é¡¯ç¤ºï¼Œä»¥åŠä¸€å€‹ä¾†è‡ª Web SDK çš„å¤–éƒ¨è…³æœ¬ä¾†ç®¡ç†å…¶è¡Œç‚ºï¼š

    ```html
    <link rel="stylesheet" href="https://atlas.microsoft.com/sdk/javascript/mapcontrol/2/atlas.min.css" type="text/css" />
    <script src="https://atlas.microsoft.com/sdk/javascript/mapcontrol/2/atlas.min.js"></script>
    ```

    æ­¤æ¨£å¼è¡¨åŒ…å«åœ°åœ–å¤–è§€çš„è¨­ç½®ï¼Œè…³æœ¬æ–‡ä»¶åŒ…å«åŠ è¼‰åœ°åœ–çš„ä»£ç¢¼ã€‚æ·»åŠ æ­¤ä»£ç¢¼é¡ä¼¼æ–¼åŒ…å« C++ æ¨™é ­æ–‡ä»¶æˆ–å°å…¥ Python æ¨¡å¡Šã€‚

1. åœ¨è©²è…³æœ¬ä¸‹æ–¹ï¼Œæ·»åŠ ä¸€å€‹è…³æœ¬å¡Šä»¥å•Ÿå‹•åœ°åœ–ã€‚

    ```javascript
    <script type='text/javascript'>
        function init() {
            var map = new atlas.Map('myMap', {
                center: [-122.26473, 47.73444],
                zoom: 12,
                authOptions: {
                    authType: "subscriptionKey",
                    subscriptionKey: "<subscription_key>",

                }
            });
        }
    </script>
    ```

    å°‡ `<subscription_key>` æ›¿æ›ç‚ºä½ çš„ Azure Maps å¸³æˆ¶çš„ API å¯†é‘°ã€‚

    å¦‚æœä½ åœ¨ç¶²é ç€è¦½å™¨ä¸­æ‰“é–‹ä½ çš„ `index.html` æ–‡ä»¶ï¼Œä½ æ‡‰è©²æœƒçœ‹åˆ°ä¸€å¼µåœ°åœ–åŠ è¼‰ä¸¦èšç„¦åœ¨è¥¿é›…åœ–åœ°å€ã€‚

    ![é¡¯ç¤ºç¾åœ‹è¯ç››é “å·åŸå¸‚è¥¿é›…åœ–çš„åœ°åœ–](../../../../../translated_images/map-image.8fb2c53eb23ef39c1c0a4410a5282e879b3b452b707eb066ff04c5488d3d72b7.tw.png)

    âœ… è©¦è©¦æ›´æ”¹ç¸®æ”¾å’Œä¸­å¿ƒåƒæ•¸ä¾†æ”¹è®Šåœ°åœ–é¡¯ç¤ºã€‚ä½ å¯ä»¥æ·»åŠ èˆ‡æ•¸æ“šçš„ç·¯åº¦å’Œç¶“åº¦ç›¸å°æ‡‰çš„ä¸åŒåæ¨™ä¾†é‡æ–°å®šä½åœ°åœ–ã€‚

> ğŸ’ åœ¨æœ¬åœ°å·¥ä½œç¶²é æ‡‰ç”¨çš„æ›´å¥½æ–¹å¼æ˜¯å®‰è£ [http-server](https://www.npmjs.com/package/http-server)ã€‚ä½ éœ€è¦å…ˆå®‰è£ [node.js](https://nodejs.org/) å’Œ [npm](https://www.npmjs.com/) æ‰èƒ½ä½¿ç”¨æ­¤å·¥å…·ã€‚å®‰è£é€™äº›å·¥å…·å¾Œï¼Œä½ å¯ä»¥å°èˆªåˆ° `index.html` æ–‡ä»¶æ‰€åœ¨çš„ä½ç½®ä¸¦è¼¸å…¥ `http-server`ã€‚ç¶²é æ‡‰ç”¨å°‡åœ¨æœ¬åœ°ç¶²é ä¼ºæœå™¨ä¸Šæ‰“é–‹ [http://127.0.0.1:8080/](http://127.0.0.1:8080/)ã€‚

## GeoJSON æ ¼å¼

ç¾åœ¨ä½ å·²ç¶“è¨­ç½®äº†é¡¯ç¤ºåœ°åœ–çš„ç¶²é æ‡‰ç”¨ï¼Œæ¥ä¸‹ä¾†éœ€è¦å¾å­˜å„²å¸³æˆ¶ä¸­æå– GPS æ•¸æ“šä¸¦åœ¨åœ°åœ–ä¸Šé¡¯ç¤ºä¸€å±¤æ¨™è¨˜ã€‚åœ¨æ­¤ä¹‹å‰ï¼Œè®“æˆ‘å€‘ä¾†çœ‹çœ‹ Azure Maps æ‰€éœ€çš„ [GeoJSON](https://wikipedia.org/wiki/GeoJSON) æ ¼å¼ã€‚

[GeoJSON](https://geojson.org/) æ˜¯ä¸€ç¨®é–‹æ”¾æ¨™æº–çš„ JSON è¦ç¯„ï¼Œå…·æœ‰å°ˆé–€è¨­è¨ˆç”¨æ–¼è™•ç†åœ°ç†æ•¸æ“šçš„ç‰¹æ®Šæ ¼å¼ã€‚ä½ å¯ä»¥é€šéæ¸¬è©¦ç¤ºä¾‹æ•¸æ“šä¾†äº†è§£å®ƒï¼Œä½¿ç”¨ [geojson.io](https://geojson.io) ä¹Ÿæ˜¯ä¸€å€‹èª¿è©¦ GeoJSON æ–‡ä»¶çš„æœ‰ç”¨å·¥å…·ã€‚

ç¤ºä¾‹ GeoJSON æ•¸æ“šå¦‚ä¸‹æ‰€ç¤ºï¼š

```json
{
  "type": "FeatureCollection",
  "features": [
    {
      "type": "Feature",
      "geometry": {
        "type": "Point",
        "coordinates": [
          -2.10237979888916,
          57.164918677004714
        ]
      }
    }
  ]
}
```

ç‰¹åˆ¥éœ€è¦æ³¨æ„çš„æ˜¯æ•¸æ“šå¦‚ä½•åµŒå¥—åœ¨ `FeatureCollection` ä¸­çš„ `Feature`ã€‚åœ¨è©²å°è±¡ä¸­å¯ä»¥æ‰¾åˆ° `geometry`ï¼Œå…¶ä¸­çš„ `coordinates` æŒ‡ç¤ºç·¯åº¦å’Œç¶“åº¦ã€‚

âœ… åœ¨æ§‹å»ºä½ çš„ GeoJSON æ™‚ï¼Œè«‹æ³¨æ„å°è±¡ä¸­ `ç·¯åº¦` å’Œ `ç¶“åº¦` çš„é †åºï¼Œå¦å‰‡ä½ çš„é»å°‡ä¸æœƒå‡ºç¾åœ¨æ­£ç¢ºçš„ä½ç½®ï¼GeoJSON æœŸæœ›é»çš„æ•¸æ“šé †åºç‚º `lon,lat`ï¼Œè€Œä¸æ˜¯ `lat,lon`ã€‚

`Geometry` å¯ä»¥æœ‰ä¸åŒçš„é¡å‹ï¼Œä¾‹å¦‚å–®å€‹é»æˆ–å¤šé‚Šå½¢ã€‚åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œå®ƒæ˜¯ä¸€å€‹é»ï¼ŒæŒ‡å®šäº†å…©å€‹åæ¨™ï¼šç¶“åº¦å’Œç·¯åº¦ã€‚
âœ… Azure Maps æ”¯æ´æ¨™æº–çš„ GeoJSONï¼Œä¸¦ä¸”æä¾›ä¸€äº›[å¢å¼·åŠŸèƒ½](https://docs.microsoft.com/azure/azure-maps/extend-geojson?WT.mc_id=academic-17441-jabenn)ï¼ŒåŒ…æ‹¬ç¹ªè£½åœ“å½¢å’Œå…¶ä»–å¹¾ä½•åœ–å½¢çš„èƒ½åŠ›ã€‚

## ä½¿ç”¨ GeoJSON åœ¨åœ°åœ–ä¸Šç¹ªè£½ GPS æ•¸æ“š

ç¾åœ¨æ‚¨å·²æº–å‚™å¥½ä½¿ç”¨ä¸Šä¸€èª²ä¸­å»ºç«‹çš„å­˜å„²ä¸­çš„æ•¸æ“šã€‚æé†’ä¸€ä¸‹ï¼Œé€™äº›æ•¸æ“šå­˜å„²ç‚º blob å­˜å„²ä¸­çš„å¤šå€‹æ–‡ä»¶ï¼Œå› æ­¤æ‚¨éœ€è¦æª¢ç´¢é€™äº›æ–‡ä»¶ä¸¦è§£æå®ƒå€‘ï¼Œä»¥ä¾¿ Azure Maps å¯ä»¥ä½¿ç”¨é€™äº›æ•¸æ“šã€‚

### ä»»å‹™ - é…ç½®å­˜å„²ä»¥ä¾¿å¾ç¶²é è¨ªå•

å¦‚æœæ‚¨å˜—è©¦èª¿ç”¨å­˜å„²ä»¥ç²å–æ•¸æ“šï¼Œå¯èƒ½æœƒé©šè¨åœ°ç™¼ç¾ç€è¦½å™¨çš„æ§åˆ¶å°ä¸­å‡ºç¾éŒ¯èª¤ã€‚é€™æ˜¯å› ç‚ºæ‚¨éœ€è¦åœ¨æ­¤å­˜å„²ä¸Šè¨­ç½® [CORS](https://developer.mozilla.org/docs/Web/HTTP/CORS) æ¬Šé™ï¼Œä»¥å…è¨±å¤–éƒ¨ç¶²é æ‡‰ç”¨ç¨‹åºè®€å–å…¶æ•¸æ“šã€‚

> ğŸ“ CORS ä»£è¡¨ "è·¨ä¾†æºè³‡æºå…±äº«"ï¼ˆCross-Origin Resource Sharingï¼‰ï¼Œé€šå¸¸éœ€è¦åœ¨ Azure ä¸­æ˜ç¢ºè¨­ç½®ä»¥ç¢ºä¿å®‰å…¨æ€§ã€‚å®ƒå¯ä»¥é˜²æ­¢æ‚¨æœªé æœŸçš„ç¶²ç«™è¨ªå•æ‚¨çš„æ•¸æ“šã€‚

1. åŸ·è¡Œä»¥ä¸‹å‘½ä»¤ä»¥å•Ÿç”¨ CORSï¼š

    ```sh
    az storage cors add --methods GET \
                        --origins "*" \
                        --services b \
                        --account-name <storage_name> \
                        --account-key <key1>
    ```

    å°‡ `<storage_name>` æ›¿æ›ç‚ºæ‚¨çš„å­˜å„²å¸³æˆ¶åç¨±ã€‚å°‡ `<key1>` æ›¿æ›ç‚ºæ‚¨çš„å­˜å„²å¸³æˆ¶çš„å¸³æˆ¶å¯†é‘°ã€‚

    æ­¤å‘½ä»¤å…è¨±ä»»ä½•ç¶²ç«™ï¼ˆé€šé…ç¬¦ `*` è¡¨ç¤ºä»»ä½•ç¶²ç«™ï¼‰ç™¼å‡º *GET* è«‹æ±‚ï¼Œå³å¾æ‚¨çš„å­˜å„²å¸³æˆ¶ç²å–æ•¸æ“šã€‚`--services b` è¡¨ç¤ºåƒ…å° blob æ‡‰ç”¨æ­¤è¨­ç½®ã€‚

### ä»»å‹™ - å¾å­˜å„²ä¸­åŠ è¼‰ GPS æ•¸æ“š

1. å°‡ `init` å‡½æ•¸çš„å…¨éƒ¨å…§å®¹æ›¿æ›ç‚ºä»¥ä¸‹ä»£ç¢¼ï¼š

    ```javascript
    fetch("https://<storage_name>.blob.core.windows.net/gps-data/?restype=container&comp=list")
        .then(response => response.text())
        .then(str => new window.DOMParser().parseFromString(str, "text/xml"))
        .then(xml => {
            let blobList = Array.from(xml.querySelectorAll("Url"));
                blobList.forEach(async blobUrl => {
                    loadJSON(blobUrl.innerHTML)                
        });
    })
    .then( response => {
        map = new atlas.Map('myMap', {
            center: [-122.26473, 47.73444],
            zoom: 14,
            authOptions: {
                authType: "subscriptionKey",
                subscriptionKey: "<subscription_key>",
    
            }
        });
        map.events.add('ready', function () {
            var source = new atlas.source.DataSource();
            map.sources.add(source);
            map.layers.add(new atlas.layer.BubbleLayer(source));
            source.add(features);
        })
    })
    ```

    å°‡ `<storage_name>` æ›¿æ›ç‚ºæ‚¨çš„å­˜å„²å¸³æˆ¶åç¨±ã€‚å°‡ `<subscription_key>` æ›¿æ›ç‚ºæ‚¨çš„ Azure Maps å¸³æˆ¶çš„ API å¯†é‘°ã€‚

    é€™è£¡ç™¼ç”Ÿäº†å¹¾ä»¶äº‹ã€‚é¦–å…ˆï¼Œä»£ç¢¼ä½¿ç”¨åŸºæ–¼æ‚¨çš„å­˜å„²å¸³æˆ¶åç¨±æ§‹å»ºçš„ URL ç«¯é»å¾ blob å®¹å™¨ä¸­ç²å–æ‚¨çš„ GPS æ•¸æ“šã€‚æ­¤ URL å¾ `gps-data` ä¸­æª¢ç´¢ï¼Œè¡¨æ˜è³‡æºé¡å‹æ˜¯å®¹å™¨ï¼ˆ`restype=container`ï¼‰ï¼Œä¸¦åˆ—å‡ºæ‰€æœ‰ blob çš„ä¿¡æ¯ã€‚æ­¤åˆ—è¡¨ä¸æœƒè¿”å› blob æœ¬èº«ï¼Œä½†æœƒè¿”å›æ¯å€‹ blob çš„ URLï¼Œå¯ç”¨æ–¼åŠ è¼‰ blob æ•¸æ“šã€‚

    > ğŸ’ æ‚¨å¯ä»¥å°‡æ­¤ URL æ”¾å…¥ç€è¦½å™¨ä¸­æŸ¥çœ‹å®¹å™¨ä¸­æ‰€æœ‰ blob çš„è©³ç´°ä¿¡æ¯ã€‚æ¯å€‹é …ç›®éƒ½æœƒæœ‰ä¸€å€‹ `Url` å±¬æ€§ï¼Œæ‚¨ä¹Ÿå¯ä»¥åœ¨ç€è¦½å™¨ä¸­åŠ è¼‰è©²å±¬æ€§ä»¥æŸ¥çœ‹ blob çš„å…§å®¹ã€‚

    ç„¶å¾Œï¼Œä»£ç¢¼åŠ è¼‰æ¯å€‹ blobï¼Œèª¿ç”¨ `loadJSON` å‡½æ•¸ï¼ˆç¨å¾Œæœƒå‰µå»ºï¼‰ã€‚æ¥è‘—ï¼Œå®ƒå‰µå»ºåœ°åœ–æ§ä»¶ï¼Œä¸¦å‘ `ready` äº‹ä»¶æ·»åŠ ä»£ç¢¼ã€‚æ­¤äº‹ä»¶åœ¨åœ°åœ–é¡¯ç¤ºæ–¼ç¶²é ä¸Šæ™‚è¢«èª¿ç”¨ã€‚

    `ready` äº‹ä»¶å‰µå»ºäº†ä¸€å€‹ Azure Maps æ•¸æ“šæºâ€”â€”ä¸€å€‹åŒ…å« GeoJSON æ•¸æ“šçš„å®¹å™¨ï¼Œç¨å¾Œå°‡å¡«å……æ­¤æ•¸æ“šã€‚æ­¤æ•¸æ“šæºéš¨å¾Œç”¨æ–¼å‰µå»ºä¸€å€‹æ°£æ³¡åœ–å±¤â€”â€”å³åœ°åœ–ä¸Šçš„ä¸€çµ„åœ“åœˆï¼Œåœ“å¿ƒä½æ–¼ GeoJSON ä¸­çš„æ¯å€‹é»ã€‚

1. åœ¨ `init` å‡½æ•¸ä¸‹æ–¹çš„è…³æœ¬å¡Šä¸­æ·»åŠ  `loadJSON` å‡½æ•¸ï¼š

    ```javascript
    var map, features;

    function loadJSON(file) {
        var xhr = new XMLHttpRequest();
        features = [];
        xhr.onreadystatechange = function () {
            if (xhr.readyState === XMLHttpRequest.DONE) {
                if (xhr.status === 200) {
                    gps = JSON.parse(xhr.responseText)
                    features.push(
                        new atlas.data.Feature(new atlas.data.Point([parseFloat(gps.gps.lon), parseFloat(gps.gps.lat)]))
                    )
                }
            }
        };
        xhr.open("GET", file, true);
        xhr.send();
    }    
    ```

    æ­¤å‡½æ•¸ç”± fetch ä¾‹ç¨‹èª¿ç”¨ï¼Œç”¨æ–¼è§£æ JSON æ•¸æ“šä¸¦å°‡å…¶è½‰æ›ç‚ºç¶“åº¦å’Œç·¯åº¦åæ¨™ä½œç‚º geoJSONã€‚
    è§£æå®Œæˆå¾Œï¼Œæ•¸æ“šè¢«è¨­ç½®ç‚º geoJSON çš„ `Feature` éƒ¨åˆ†ã€‚åœ°åœ–å°‡è¢«åˆå§‹åŒ–ï¼Œä¸¦ä¸”å°åœ“åœˆå°‡å‡ºç¾åœ¨æ‚¨çš„æ•¸æ“šæ‰€ç¹ªè£½çš„è·¯å¾‘å‘¨åœï¼š

1. åœ¨ç€è¦½å™¨ä¸­åŠ è¼‰ HTML é é¢ã€‚å®ƒå°‡åŠ è¼‰åœ°åœ–ï¼Œç„¶å¾Œå¾å­˜å„²ä¸­åŠ è¼‰æ‰€æœ‰ GPS æ•¸æ“šä¸¦å°‡å…¶ç¹ªè£½åœ¨åœ°åœ–ä¸Šã€‚

    ![è¥¿é›…åœ–é™„è¿‘çš„ Saint Edward State Park åœ°åœ–ï¼Œé¡¯ç¤ºå…¬åœ’é‚Šç·£è·¯å¾‘ä¸Šçš„åœ“åœˆ](../../../../../translated_images/map-path.896832e72dc696ffe20650e4051027d4855442d955f93fdbb80bb417ca8a406f.tw.png)

> ğŸ’ æ‚¨å¯ä»¥åœ¨ [code](../../../../../3-transport/lessons/3-visualize-location-data/code) æ–‡ä»¶å¤¾ä¸­æ‰¾åˆ°æ­¤ä»£ç¢¼ã€‚

---

## ğŸš€ æŒ‘æˆ°

èƒ½å¤ åœ¨åœ°åœ–ä¸Šé¡¯ç¤ºéœæ…‹æ•¸æ“šä½œç‚ºæ¨™è¨˜éå¸¸ä¸éŒ¯ã€‚æ‚¨èƒ½å¦å¢å¼·æ­¤ç¶²é æ‡‰ç”¨ç¨‹åºï¼Œæ·»åŠ å‹•ç•«ä¸¦é¡¯ç¤ºæ¨™è¨˜éš¨æ™‚é–“ç§»å‹•çš„è·¯å¾‘ï¼Œä½¿ç”¨å¸¶æœ‰æ™‚é–“æˆ³çš„ JSON æ–‡ä»¶ï¼Ÿé€™è£¡æœ‰ä¸€äº›[ç¯„ä¾‹](https://azuremapscodesamples.azurewebsites.net/)å±•ç¤ºå¦‚ä½•åœ¨åœ°åœ–ä¸­ä½¿ç”¨å‹•ç•«ã€‚

## èª²å¾Œæ¸¬é©—

[èª²å¾Œæ¸¬é©—](https://black-meadow-040d15503.1.azurestaticapps.net/quiz/26)

## å›é¡§èˆ‡è‡ªå­¸

Azure Maps å°æ–¼è™•ç† IoT è¨­å‚™ç‰¹åˆ¥æœ‰ç”¨ã€‚

* åœ¨ [Microsoft Docs çš„ Azure Maps æ–‡ä»¶](https://docs.microsoft.com/azure/azure-maps/tutorial-iot-hub-maps?WT.mc_id=academic-17441-jabenn) ä¸­ç ”ç©¶ä¸€äº›ç”¨é€”ã€‚
* é€šé [Microsoft Learn ä¸Šçš„ Azure Maps è‡ªå­¸æ¨¡çµ„](https://docs.microsoft.com/learn/modules/create-your-first-app-with-azure-maps/?WT.mc_id=academic-17441-jabenn) æ·±å…¥äº†è§£åœ°åœ–è£½ä½œå’Œè·¯å¾‘é»ã€‚

## ä½œæ¥­

[éƒ¨ç½²æ‚¨çš„æ‡‰ç”¨ç¨‹åº](assignment.md)

**å…è²¬è²æ˜**ï¼š  
æœ¬æ–‡ä»¶ä½¿ç”¨ AI ç¿»è­¯æœå‹™ [Co-op Translator](https://github.com/Azure/co-op-translator) é€²è¡Œç¿»è­¯ã€‚æˆ‘å€‘è‡´åŠ›æ–¼æä¾›æº–ç¢ºçš„ç¿»è­¯ï¼Œä½†è«‹æ³¨æ„ï¼Œè‡ªå‹•ç¿»è­¯å¯èƒ½åŒ…å«éŒ¯èª¤æˆ–ä¸æº–ç¢ºä¹‹è™•ã€‚æ‡‰ä»¥åŸå§‹èªè¨€çš„æ–‡ä»¶ä½œç‚ºæ¬Šå¨ä¾†æºã€‚å°æ–¼é—œéµè³‡è¨Šï¼Œå»ºè­°å°‹æ±‚å°ˆæ¥­äººå·¥ç¿»è­¯ã€‚æˆ‘å€‘å°å› ä½¿ç”¨æ­¤ç¿»è­¯è€Œå¼•èµ·çš„ä»»ä½•èª¤è§£æˆ–éŒ¯èª¤è§£é‡‹æ¦‚ä¸è² è²¬ã€‚