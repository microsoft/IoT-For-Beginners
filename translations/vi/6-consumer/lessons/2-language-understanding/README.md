<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "6f4ba69d77f16c4a5110623a96a215c3",
  "translation_date": "2025-08-27T23:03:00+00:00",
  "source_file": "6-consumer/lessons/2-language-understanding/README.md",
  "language_code": "vi"
}
-->
# Hiá»ƒu ngÃ´n ngá»¯

![Tá»•ng quan bÃ i há»c dÆ°á»›i dáº¡ng sketchnote](../../../../../translated_images/lesson-22.6148ea28500d9e00c396aaa2649935fb6641362c8f03d8e5e90a676977ab01dd.vi.jpg)

> Sketchnote bá»Ÿi [Nitya Narasimhan](https://github.com/nitya). Nháº¥p vÃ o hÃ¬nh áº£nh Ä‘á»ƒ xem phiÃªn báº£n lá»›n hÆ¡n.

## CÃ¢u há»i trÆ°á»›c bÃ i giáº£ng

[CÃ¢u há»i trÆ°á»›c bÃ i giáº£ng](https://black-meadow-040d15503.1.azurestaticapps.net/quiz/43)

## Giá»›i thiá»‡u

Trong bÃ i há»c trÆ°á»›c, báº¡n Ä‘Ã£ chuyá»ƒn Ä‘á»•i giá»ng nÃ³i thÃ nh vÄƒn báº£n. Äá»ƒ sá»­ dá»¥ng Ä‘iá»u nÃ y Ä‘á»ƒ láº­p trÃ¬nh má»™t bá»™ háº¹n giá» thÃ´ng minh, mÃ£ cá»§a báº¡n cáº§n pháº£i hiá»ƒu Ä‘Æ°á»£c nhá»¯ng gÃ¬ Ä‘Ã£ Ä‘Æ°á»£c nÃ³i. Báº¡n cÃ³ thá»ƒ giáº£ Ä‘á»‹nh ráº±ng ngÆ°á»i dÃ¹ng sáº½ nÃ³i má»™t cá»¥m tá»« cá»‘ Ä‘á»‹nh, cháº³ng háº¡n nhÆ° "Äáº·t háº¹n giá» 3 phÃºt", vÃ  phÃ¢n tÃ­ch cá»¥m tá»« Ä‘Ã³ Ä‘á»ƒ biáº¿t thá»i gian háº¹n giá», nhÆ°ng Ä‘iá»u nÃ y khÃ´ng thÃ¢n thiá»‡n vá»›i ngÆ°á»i dÃ¹ng. Náº¿u ngÆ°á»i dÃ¹ng nÃ³i "Äáº·t háº¹n giá» trong 3 phÃºt", báº¡n hoáº·c tÃ´i sáº½ hiá»ƒu Ã½ nghÄ©a cá»§a há», nhÆ°ng mÃ£ cá»§a báº¡n thÃ¬ khÃ´ng, vÃ¬ nÃ³ Ä‘ang mong Ä‘á»£i má»™t cá»¥m tá»« cá»‘ Ä‘á»‹nh.

ÄÃ¢y lÃ  lÃºc hiá»ƒu ngÃ´n ngá»¯ xuáº¥t hiá»‡n, sá»­ dá»¥ng cÃ¡c mÃ´ hÃ¬nh AI Ä‘á»ƒ diá»…n giáº£i vÄƒn báº£n vÃ  tráº£ vá» cÃ¡c chi tiáº¿t cáº§n thiáº¿t, vÃ­ dá»¥ nhÆ° cÃ³ thá»ƒ hiá»ƒu cáº£ "Äáº·t háº¹n giá» 3 phÃºt" vÃ  "Äáº·t háº¹n giá» trong 3 phÃºt", vÃ  nháº­n ra ráº±ng cáº§n Ä‘áº·t háº¹n giá» trong 3 phÃºt.

Trong bÃ i há»c nÃ y, báº¡n sáº½ tÃ¬m hiá»ƒu vá» cÃ¡c mÃ´ hÃ¬nh hiá»ƒu ngÃ´n ngá»¯, cÃ¡ch táº¡o, huáº¥n luyá»‡n vÃ  sá»­ dá»¥ng chÃºng tá»« mÃ£ cá»§a báº¡n.

Trong bÃ i há»c nÃ y, chÃºng ta sáº½ Ä‘á» cáº­p Ä‘áº¿n:

* [Hiá»ƒu ngÃ´n ngá»¯](../../../../../6-consumer/lessons/2-language-understanding)
* [Táº¡o mÃ´ hÃ¬nh hiá»ƒu ngÃ´n ngá»¯](../../../../../6-consumer/lessons/2-language-understanding)
* [Ã Ä‘á»‹nh vÃ  thá»±c thá»ƒ](../../../../../6-consumer/lessons/2-language-understanding)
* [Sá»­ dá»¥ng mÃ´ hÃ¬nh hiá»ƒu ngÃ´n ngá»¯](../../../../../6-consumer/lessons/2-language-understanding)

## Hiá»ƒu ngÃ´n ngá»¯

Con ngÆ°á»i Ä‘Ã£ sá»­ dá»¥ng ngÃ´n ngá»¯ Ä‘á»ƒ giao tiáº¿p hÃ ng trÄƒm ngÃ n nÄƒm. ChÃºng ta giao tiáº¿p báº±ng tá»« ngá»¯, Ã¢m thanh hoáº·c hÃ nh Ä‘á»™ng vÃ  hiá»ƒu Ä‘Æ°á»£c nhá»¯ng gÃ¬ Ä‘Æ°á»£c nÃ³i, khÃ´ng chá»‰ Ã½ nghÄ©a cá»§a tá»« ngá»¯, Ã¢m thanh hoáº·c hÃ nh Ä‘á»™ng, mÃ  cÃ²n cáº£ ngá»¯ cáº£nh cá»§a chÃºng. ChÃºng ta hiá»ƒu Ä‘Æ°á»£c sá»± chÃ¢n thÃ nh vÃ  sá»± má»‰a mai, cho phÃ©p cÃ¹ng má»™t tá»« ngá»¯ mang Ã½ nghÄ©a khÃ¡c nhau tÃ¹y thuá»™c vÃ o giá»ng Ä‘iá»‡u cá»§a chÃºng ta.

âœ… HÃ£y nghÄ© vá» má»™t sá»‘ cuá»™c trÃ² chuyá»‡n báº¡n Ä‘Ã£ cÃ³ gáº§n Ä‘Ã¢y. Bao nhiÃªu pháº§n cá»§a cuá»™c trÃ² chuyá»‡n sáº½ khÃ³ Ä‘á»ƒ mÃ¡y tÃ­nh hiá»ƒu vÃ¬ nÃ³ cáº§n ngá»¯ cáº£nh?

Hiá»ƒu ngÃ´n ngá»¯, cÃ²n Ä‘Æ°á»£c gá»i lÃ  hiá»ƒu ngÃ´n ngá»¯ tá»± nhiÃªn, lÃ  má»™t pháº§n cá»§a lÄ©nh vá»±c trÃ­ tuá»‡ nhÃ¢n táº¡o gá»i lÃ  xá»­ lÃ½ ngÃ´n ngá»¯ tá»± nhiÃªn (NLP), vÃ  liÃªn quan Ä‘áº¿n viá»‡c Ä‘á»c hiá»ƒu, cá»‘ gáº¯ng hiá»ƒu chi tiáº¿t cá»§a tá»« ngá»¯ hoáº·c cÃ¢u. Náº¿u báº¡n sá»­ dá»¥ng trá»£ lÃ½ giá»ng nÃ³i nhÆ° Alexa hoáº·c Siri, báº¡n Ä‘Ã£ sá»­ dá»¥ng cÃ¡c dá»‹ch vá»¥ hiá»ƒu ngÃ´n ngá»¯. ÄÃ¢y lÃ  cÃ¡c dá»‹ch vá»¥ AI hoáº¡t Ä‘á»™ng phÃ­a sau, chuyá»ƒn Ä‘á»•i "Alexa, phÃ¡t album má»›i nháº¥t cá»§a Taylor Swift" thÃ nh cáº£nh con gÃ¡i tÃ´i nháº£y mÃºa quanh phÃ²ng khÃ¡ch vá»›i nhá»¯ng bÃ i hÃ¡t yÃªu thÃ­ch cá»§a cÃ´ áº¥y.

> ğŸ’ MÃ¡y tÃ­nh, máº·c dÃ¹ Ä‘Ã£ cÃ³ nhiá»u tiáº¿n bá»™, váº«n cÃ²n má»™t cháº·ng Ä‘Æ°á»ng dÃ i Ä‘á»ƒ thá»±c sá»± hiá»ƒu vÄƒn báº£n. Khi chÃºng ta nÃ³i vá» hiá»ƒu ngÃ´n ngá»¯ vá»›i mÃ¡y tÃ­nh, chÃºng ta khÃ´ng cÃ³ Ã½ nghÄ©a gÃ¬ gáº§n vá»›i giao tiáº¿p cá»§a con ngÆ°á»i, thay vÃ o Ä‘Ã³ chÃºng ta nÃ³i vá» viá»‡c láº¥y má»™t sá»‘ tá»« vÃ  trÃ­ch xuáº¥t cÃ¡c chi tiáº¿t chÃ­nh.

LÃ  con ngÆ°á»i, chÃºng ta hiá»ƒu ngÃ´n ngá»¯ mÃ  khÃ´ng cáº§n pháº£i suy nghÄ© nhiá»u. Náº¿u tÃ´i yÃªu cáº§u má»™t ngÆ°á»i khÃ¡c "phÃ¡t album má»›i nháº¥t cá»§a Taylor Swift", há» sáº½ hiá»ƒu ngay Ã½ tÃ´i. Äá»‘i vá»›i mÃ¡y tÃ­nh, Ä‘iá»u nÃ y khÃ³ hÆ¡n. NÃ³ sáº½ pháº£i láº¥y cÃ¡c tá»«, chuyá»ƒn Ä‘á»•i tá»« giá»ng nÃ³i thÃ nh vÄƒn báº£n, vÃ  xÃ¡c Ä‘á»‹nh cÃ¡c thÃ´ng tin sau:

* Cáº§n phÃ¡t nháº¡c
* Nháº¡c thuá»™c vá» nghá»‡ sÄ© Taylor Swift
* Nháº¡c cá»¥ thá»ƒ lÃ  má»™t album gá»“m nhiá»u bÃ i hÃ¡t theo thá»© tá»±
* Taylor Swift cÃ³ nhiá»u album, vÃ¬ váº­y chÃºng cáº§n Ä‘Æ°á»£c sáº¯p xáº¿p theo thá»© tá»± thá»i gian vÃ  album má»›i nháº¥t lÃ  album cáº§n thiáº¿t

âœ… HÃ£y nghÄ© vá» má»™t sá»‘ cÃ¢u khÃ¡c mÃ  báº¡n Ä‘Ã£ nÃ³i khi Ä‘Æ°a ra yÃªu cáº§u, cháº³ng háº¡n nhÆ° gá»i cÃ  phÃª hoáº·c yÃªu cáº§u má»™t thÃ nh viÃªn gia Ä‘Ã¬nh Ä‘Æ°a cho báº¡n thá»© gÃ¬ Ä‘Ã³. HÃ£y thá»­ phÃ¢n tÃ­ch chÃºng thÃ nh cÃ¡c thÃ´ng tin mÃ  mÃ¡y tÃ­nh cáº§n trÃ­ch xuáº¥t Ä‘á»ƒ hiá»ƒu cÃ¢u nÃ³i.

CÃ¡c mÃ´ hÃ¬nh hiá»ƒu ngÃ´n ngá»¯ lÃ  cÃ¡c mÃ´ hÃ¬nh AI Ä‘Æ°á»£c huáº¥n luyá»‡n Ä‘á»ƒ trÃ­ch xuáº¥t cÃ¡c chi tiáº¿t nháº¥t Ä‘á»‹nh tá»« ngÃ´n ngá»¯, vÃ  sau Ä‘Ã³ Ä‘Æ°á»£c huáº¥n luyá»‡n cho cÃ¡c nhiá»‡m vá»¥ cá»¥ thá»ƒ báº±ng cÃ¡ch sá»­ dá»¥ng há»c chuyá»ƒn giao, giá»‘ng nhÆ° cÃ¡ch báº¡n Ä‘Ã£ huáº¥n luyá»‡n má»™t mÃ´ hÃ¬nh Custom Vision báº±ng má»™t táº­p há»£p nhá» cÃ¡c hÃ¬nh áº£nh. Báº¡n cÃ³ thá»ƒ láº¥y má»™t mÃ´ hÃ¬nh, sau Ä‘Ã³ huáº¥n luyá»‡n nÃ³ báº±ng vÄƒn báº£n mÃ  báº¡n muá»‘n nÃ³ hiá»ƒu.

## Táº¡o mÃ´ hÃ¬nh hiá»ƒu ngÃ´n ngá»¯

![Logo cá»§a LUIS](../../../../../translated_images/luis-logo.5cb4f3e88c020ee6df4f614e8831f4a4b6809a7247bf52085fb48d629ef9be52.vi.png)

Báº¡n cÃ³ thá»ƒ táº¡o cÃ¡c mÃ´ hÃ¬nh hiá»ƒu ngÃ´n ngá»¯ báº±ng LUIS, má»™t dá»‹ch vá»¥ hiá»ƒu ngÃ´n ngá»¯ tá»« Microsoft thuá»™c Cognitive Services.

### Nhiá»‡m vá»¥ - táº¡o tÃ i nguyÃªn tÃ¡c giáº£

Äá»ƒ sá»­ dá»¥ng LUIS, báº¡n cáº§n táº¡o má»™t tÃ i nguyÃªn tÃ¡c giáº£.

1. Sá»­ dá»¥ng lá»‡nh sau Ä‘á»ƒ táº¡o tÃ i nguyÃªn tÃ¡c giáº£ trong nhÃ³m tÃ i nguyÃªn `smart-timer` cá»§a báº¡n:

    ```python
    az cognitiveservices account create --name smart-timer-luis-authoring \
                                        --resource-group smart-timer \
                                        --kind LUIS.Authoring \
                                        --sku F0 \
                                        --yes \
                                        --location <location>
    ```

    Thay tháº¿ `<location>` báº±ng vá»‹ trÃ­ báº¡n Ä‘Ã£ sá»­ dá»¥ng khi táº¡o NhÃ³m TÃ i nguyÃªn.

    > âš ï¸ LUIS khÃ´ng cÃ³ sáºµn á»Ÿ táº¥t cáº£ cÃ¡c khu vá»±c, vÃ¬ váº­y náº¿u báº¡n nháº­n Ä‘Æ°á»£c lá»—i sau:
    >
    > ```output
    > InvalidApiSetId: The account type 'LUIS.Authoring' is either invalid or unavailable in given region.
    > ```
    >
    > hÃ£y chá»n má»™t khu vá»±c khÃ¡c.

    Äiá»u nÃ y sáº½ táº¡o má»™t tÃ i nguyÃªn tÃ¡c giáº£ LUIS miá»…n phÃ­.

### Nhiá»‡m vá»¥ - táº¡o á»©ng dá»¥ng hiá»ƒu ngÃ´n ngá»¯

1. Má»Ÿ cá»•ng LUIS táº¡i [luis.ai](https://luis.ai?WT.mc_id=academic-17441-jabenn) trong trÃ¬nh duyá»‡t cá»§a báº¡n, vÃ  Ä‘Äƒng nháº­p báº±ng cÃ¹ng tÃ i khoáº£n báº¡n Ä‘Ã£ sá»­ dá»¥ng cho Azure.

1. LÃ m theo hÆ°á»›ng dáº«n trÃªn há»™p thoáº¡i Ä‘á»ƒ chá»n Ä‘Äƒng kÃ½ Azure cá»§a báº¡n, sau Ä‘Ã³ chá»n tÃ i nguyÃªn `smart-timer-luis-authoring` mÃ  báº¡n vá»«a táº¡o.

1. Tá»« danh sÃ¡ch *á»¨ng dá»¥ng há»™i thoáº¡i*, chá»n nÃºt **á»¨ng dá»¥ng má»›i** Ä‘á»ƒ táº¡o má»™t á»©ng dá»¥ng má»›i. Äáº·t tÃªn á»©ng dá»¥ng má»›i lÃ  `smart-timer`, vÃ  Ä‘áº·t *VÄƒn hÃ³a* thÃ nh ngÃ´n ngá»¯ cá»§a báº¡n.

    > ğŸ’ CÃ³ má»™t trÆ°á»ng dÃ nh cho tÃ i nguyÃªn dá»± Ä‘oÃ¡n. Báº¡n cÃ³ thá»ƒ táº¡o má»™t tÃ i nguyÃªn thá»© hai chá»‰ dÃ nh cho dá»± Ä‘oÃ¡n, nhÆ°ng tÃ i nguyÃªn tÃ¡c giáº£ miá»…n phÃ­ cho phÃ©p 1.000 dá»± Ä‘oÃ¡n má»—i thÃ¡ng, Ä‘á»§ cho phÃ¡t triá»ƒn, vÃ¬ váº­y báº¡n cÃ³ thá»ƒ Ä‘á»ƒ trá»‘ng trÆ°á»ng nÃ y.

1. Äá»c qua hÆ°á»›ng dáº«n xuáº¥t hiá»‡n sau khi báº¡n táº¡o á»©ng dá»¥ng Ä‘á»ƒ hiá»ƒu cÃ¡c bÆ°á»›c báº¡n cáº§n thá»±c hiá»‡n Ä‘á»ƒ huáº¥n luyá»‡n mÃ´ hÃ¬nh hiá»ƒu ngÃ´n ngá»¯. ÄÃ³ng hÆ°á»›ng dáº«n nÃ y khi báº¡n Ä‘Ã£ hoÃ n táº¥t.

## Ã Ä‘á»‹nh vÃ  thá»±c thá»ƒ

Hiá»ƒu ngÃ´n ngá»¯ dá»±a trÃªn *Ã½ Ä‘á»‹nh* vÃ  *thá»±c thá»ƒ*. Ã Ä‘á»‹nh lÃ  má»¥c Ä‘Ã­ch cá»§a tá»« ngá»¯, vÃ­ dá»¥ nhÆ° phÃ¡t nháº¡c, Ä‘áº·t háº¹n giá», hoáº·c gá»i mÃ³n Äƒn. Thá»±c thá»ƒ lÃ  nhá»¯ng gÃ¬ Ã½ Ä‘á»‹nh Ä‘ang Ä‘á» cáº­p Ä‘áº¿n, cháº³ng háº¡n nhÆ° album, thá»i gian háº¹n giá», hoáº·c loáº¡i mÃ³n Äƒn. Má»—i cÃ¢u mÃ  mÃ´ hÃ¬nh diá»…n giáº£i nÃªn cÃ³ Ã­t nháº¥t má»™t Ã½ Ä‘á»‹nh, vÃ  tÃ¹y chá»n má»™t hoáº·c nhiá»u thá»±c thá»ƒ.

Má»™t sá»‘ vÃ­ dá»¥:

| CÃ¢u nÃ³i                                            | Ã Ä‘á»‹nh           | Thá»±c thá»ƒ                                   |
| -------------------------------------------------- | ---------------- | ------------------------------------------ |
| "PhÃ¡t album má»›i nháº¥t cá»§a Taylor Swift"             | *phÃ¡t nháº¡c*      | *album má»›i nháº¥t cá»§a Taylor Swift*          |
| "Äáº·t háº¹n giá» 3 phÃºt"                               | *Ä‘áº·t háº¹n giá»*    | *3 phÃºt*                                   |
| "Há»§y háº¹n giá» cá»§a tÃ´i"                              | *há»§y háº¹n giá»*    | KhÃ´ng cÃ³                                   |
| "Gá»i 3 pizza lá»›n dá»©a vÃ  má»™t salad caesar"          | *gá»i mÃ³n Äƒn*     | *3 pizza lá»›n dá»©a*, *salad caesar*          |

âœ… Vá»›i cÃ¡c cÃ¢u báº¡n Ä‘Ã£ nghÄ© Ä‘áº¿n trÆ°á»›c Ä‘Ã³, Ã½ Ä‘á»‹nh vÃ  cÃ¡c thá»±c thá»ƒ trong cÃ¢u Ä‘Ã³ sáº½ lÃ  gÃ¬?

Äá»ƒ huáº¥n luyá»‡n LUIS, trÆ°á»›c tiÃªn báº¡n Ä‘áº·t cÃ¡c thá»±c thá»ƒ. ÄÃ¢y cÃ³ thá»ƒ lÃ  danh sÃ¡ch cá»‘ Ä‘á»‹nh cÃ¡c thuáº­t ngá»¯, hoáº·c há»c tá»« vÄƒn báº£n. VÃ­ dá»¥, báº¡n cÃ³ thá»ƒ cung cáº¥p má»™t danh sÃ¡ch cá»‘ Ä‘á»‹nh cÃ¡c mÃ³n Äƒn cÃ³ sáºµn tá»« thá»±c Ä‘Æ¡n cá»§a báº¡n, vá»›i cÃ¡c biáº¿n thá»ƒ (hoáº·c tá»« Ä‘á»“ng nghÄ©a) cá»§a má»—i tá»«, cháº³ng háº¡n nhÆ° *cÃ  tÃ­m* vÃ  *aubergine* lÃ  cÃ¡c biáº¿n thá»ƒ cá»§a *aubergine*. LUIS cÅ©ng cÃ³ cÃ¡c thá»±c thá»ƒ Ä‘Æ°á»£c xÃ¢y dá»±ng sáºµn cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng, cháº³ng háº¡n nhÆ° sá»‘ vÃ  Ä‘á»‹a Ä‘iá»ƒm.

Äá»‘i vá»›i viá»‡c Ä‘áº·t háº¹n giá», báº¡n cÃ³ thá»ƒ cÃ³ má»™t thá»±c thá»ƒ sá»­ dá»¥ng cÃ¡c thá»±c thá»ƒ sá»‘ Ä‘Æ°á»£c xÃ¢y dá»±ng sáºµn cho thá»i gian, vÃ  má»™t thá»±c thá»ƒ khÃ¡c cho cÃ¡c Ä‘Æ¡n vá»‹, cháº³ng háº¡n nhÆ° phÃºt vÃ  giÃ¢y. Má»—i Ä‘Æ¡n vá»‹ sáº½ cÃ³ nhiá»u biáº¿n thá»ƒ Ä‘á»ƒ bao phá»§ cÃ¡c dáº¡ng sá»‘ Ã­t vÃ  sá»‘ nhiá»u - cháº³ng háº¡n nhÆ° phÃºt vÃ  phÃºt.

Sau khi cÃ¡c thá»±c thá»ƒ Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a, báº¡n táº¡o cÃ¡c Ã½ Ä‘á»‹nh. Nhá»¯ng Ã½ Ä‘á»‹nh nÃ y Ä‘Æ°á»£c mÃ´ hÃ¬nh há»c dá»±a trÃªn cÃ¡c cÃ¢u vÃ­ dá»¥ mÃ  báº¡n cung cáº¥p (Ä‘Æ°á»£c gá»i lÃ  cÃ¡c cÃ¢u nÃ³i). VÃ­ dá»¥, Ä‘á»‘i vá»›i Ã½ Ä‘á»‹nh *Ä‘áº·t háº¹n giá»*, báº¡n cÃ³ thá»ƒ cung cáº¥p cÃ¡c cÃ¢u sau:

* `Ä‘áº·t háº¹n giá» 1 giÃ¢y`
* `Ä‘áº·t háº¹n giá» 1 phÃºt 12 giÃ¢y`
* `Ä‘áº·t háº¹n giá» 3 phÃºt`
* `Ä‘áº·t háº¹n giá» 9 phÃºt 30 giÃ¢y`

Sau Ä‘Ã³, báº¡n nÃ³i vá»›i LUIS cÃ¡c pháº§n cá»§a nhá»¯ng cÃ¢u nÃ y Ã¡nh xáº¡ Ä‘áº¿n cÃ¡c thá»±c thá»ƒ:

![CÃ¢u nÃ³i "Ä‘áº·t háº¹n giá» 1 phÃºt 12 giÃ¢y" Ä‘Æ°á»£c chia thÃ nh cÃ¡c thá»±c thá»ƒ](../../../../../translated_images/sentence-as-intent-entities.301401696f9922590a99343f5c5d211b710b906f212f0d4d034cee3ffb610272.vi.png)

CÃ¢u `Ä‘áº·t háº¹n giá» 1 phÃºt 12 giÃ¢y` cÃ³ Ã½ Ä‘á»‹nh lÃ  `Ä‘áº·t háº¹n giá»`. NÃ³ cÅ©ng cÃ³ 2 thá»±c thá»ƒ vá»›i 2 giÃ¡ trá»‹ má»—i thá»±c thá»ƒ:

|            | thá»i gian | Ä‘Æ¡n vá»‹   |
| ---------- | -------: | -------- |
| 1 phÃºt     | 1        | phÃºt     |
| 12 giÃ¢y    | 12       | giÃ¢y     |

Äá»ƒ huáº¥n luyá»‡n má»™t mÃ´ hÃ¬nh tá»‘t, báº¡n cáº§n má»™t loáº¡t cÃ¡c cÃ¢u vÃ­ dá»¥ khÃ¡c nhau Ä‘á»ƒ bao phá»§ nhiá»u cÃ¡ch khÃ¡c nhau mÃ  ai Ä‘Ã³ cÃ³ thá»ƒ yÃªu cáº§u cÃ¹ng má»™t Ä‘iá»u.

> ğŸ’ NhÆ° vá»›i báº¥t ká»³ mÃ´ hÃ¬nh AI nÃ o, dá»¯ liá»‡u cÃ ng nhiá»u vÃ  cÃ ng chÃ­nh xÃ¡c Ä‘á»ƒ huáº¥n luyá»‡n, mÃ´ hÃ¬nh cÃ ng tá»‘t.

âœ… HÃ£y nghÄ© vá» cÃ¡c cÃ¡ch khÃ¡c nhau mÃ  báº¡n cÃ³ thá»ƒ yÃªu cáº§u cÃ¹ng má»™t Ä‘iá»u vÃ  mong Ä‘á»£i má»™t ngÆ°á»i hiá»ƒu.

### Nhiá»‡m vá»¥ - thÃªm thá»±c thá»ƒ vÃ o mÃ´ hÃ¬nh hiá»ƒu ngÃ´n ngá»¯

Äá»‘i vá»›i háº¹n giá», báº¡n cáº§n thÃªm 2 thá»±c thá»ƒ - má»™t cho Ä‘Æ¡n vá»‹ thá»i gian (phÃºt hoáº·c giÃ¢y), vÃ  má»™t cho sá»‘ phÃºt hoáº·c giÃ¢y.

Báº¡n cÃ³ thá»ƒ tÃ¬m tháº¥y hÆ°á»›ng dáº«n sá»­ dá»¥ng cá»•ng LUIS trong [Quickstart: Build your app in LUIS portal documentation on Microsoft docs](https://docs.microsoft.com/azure/cognitive-services/luis/luis-get-started-create-app?WT.mc_id=academic-17441-jabenn).

1. Tá»« cá»•ng LUIS, chá»n tab *Thá»±c thá»ƒ* vÃ  thÃªm thá»±c thá»ƒ *sá»‘* Ä‘Æ°á»£c xÃ¢y dá»±ng sáºµn báº±ng cÃ¡ch chá»n nÃºt **ThÃªm thá»±c thá»ƒ Ä‘Æ°á»£c xÃ¢y dá»±ng sáºµn**, sau Ä‘Ã³ chá»n *sá»‘* tá»« danh sÃ¡ch.

1. Táº¡o má»™t thá»±c thá»ƒ má»›i cho Ä‘Æ¡n vá»‹ thá»i gian báº±ng nÃºt **Táº¡o**. Äáº·t tÃªn thá»±c thá»ƒ lÃ  `Ä‘Æ¡n vá»‹ thá»i gian` vÃ  Ä‘áº·t loáº¡i lÃ  *Danh sÃ¡ch*. ThÃªm cÃ¡c giÃ¡ trá»‹ cho `phÃºt` vÃ  `giÃ¢y` vÃ o danh sÃ¡ch *GiÃ¡ trá»‹ chuáº©n hÃ³a*, thÃªm cÃ¡c dáº¡ng sá»‘ Ã­t vÃ  sá»‘ nhiá»u vÃ o danh sÃ¡ch *tá»« Ä‘á»“ng nghÄ©a*. Nháº¥n `return` sau khi thÃªm má»—i tá»« Ä‘á»“ng nghÄ©a Ä‘á»ƒ thÃªm nÃ³ vÃ o danh sÃ¡ch.

    | GiÃ¡ trá»‹ chuáº©n hÃ³a | Tá»« Ä‘á»“ng nghÄ©a        |
    | ----------------- | -------------------- |
    | phÃºt              | phÃºt, phÃºt           |
    | giÃ¢y              | giÃ¢y, giÃ¢y           |

### Nhiá»‡m vá»¥ - thÃªm Ã½ Ä‘á»‹nh vÃ o mÃ´ hÃ¬nh hiá»ƒu ngÃ´n ngá»¯

1. Tá»« tab *Ã Ä‘á»‹nh*, chá»n nÃºt **Táº¡o** Ä‘á»ƒ táº¡o má»™t Ã½ Ä‘á»‹nh má»›i. Äáº·t tÃªn Ã½ Ä‘á»‹nh nÃ y lÃ  `Ä‘áº·t háº¹n giá»`.

1. Trong cÃ¡c vÃ­ dá»¥, nháº­p cÃ¡c cÃ¡ch khÃ¡c nhau Ä‘á»ƒ Ä‘áº·t háº¹n giá» sá»­ dá»¥ng cáº£ phÃºt, giÃ¢y vÃ  káº¿t há»£p phÃºt vÃ  giÃ¢y. CÃ¡c vÃ­ dá»¥ cÃ³ thá»ƒ lÃ :

    * `Ä‘áº·t háº¹n giá» 1 giÃ¢y`
    * `Ä‘áº·t háº¹n giá» 4 phÃºt`
    * `Ä‘áº·t háº¹n giá» bá»‘n phÃºt sÃ¡u giÃ¢y`
    * `Ä‘áº·t háº¹n giá» 9 phÃºt 30 giÃ¢y`
    * `Ä‘áº·t háº¹n giá» 1 phÃºt 12 giÃ¢y`
    * `Ä‘áº·t háº¹n giá» 3 phÃºt`
    * `Ä‘áº·t háº¹n giá» 3 phÃºt 1 giÃ¢y`
    * `Ä‘áº·t háº¹n giá» ba phÃºt má»™t giÃ¢y`
    * `Ä‘áº·t háº¹n giá» 1 phÃºt 1 giÃ¢y`
    * `Ä‘áº·t háº¹n giá» 30 giÃ¢y`
    * `Ä‘áº·t háº¹n giá» 1 giÃ¢y`

    Trá»™n láº«n sá»‘ dÆ°á»›i dáº¡ng tá»« vÃ  sá»‘ Ä‘á»ƒ mÃ´ hÃ¬nh há»c cÃ¡ch xá»­ lÃ½ cáº£ hai.

1. Khi báº¡n nháº­p tá»«ng vÃ­ dá»¥, LUIS sáº½ báº¯t Ä‘áº§u phÃ¡t hiá»‡n cÃ¡c thá»±c thá»ƒ, vÃ  sáº½ gáº¡ch chÃ¢n vÃ  gáº¯n nhÃ£n báº¥t ká»³ thá»±c thá»ƒ nÃ o mÃ  nÃ³ tÃ¬m tháº¥y.

    ![CÃ¡c vÃ­ dá»¥ vá»›i cÃ¡c sá»‘ vÃ  Ä‘Æ¡n vá»‹ thá»i gian Ä‘Æ°á»£c gáº¡ch chÃ¢n bá»Ÿi LUIS](../../../../../translated_images/luis-intent-examples.25716580b2d2723cf1bafdf277d015c7f046d8cfa20f27bddf3a0873ec45fab7.vi.png)

### Nhiá»‡m vá»¥ - huáº¥n luyá»‡n vÃ  kiá»ƒm tra mÃ´ hÃ¬nh

1. Khi cÃ¡c thá»±c thá»ƒ vÃ  Ã½ Ä‘á»‹nh Ä‘Ã£ Ä‘Æ°á»£c cáº¥u hÃ¬nh, báº¡n cÃ³ thá»ƒ huáº¥n luyá»‡n mÃ´ hÃ¬nh báº±ng cÃ¡ch sá»­ dá»¥ng nÃºt **Huáº¥n luyá»‡n** trÃªn menu trÃªn cÃ¹ng. Chá»n nÃºt nÃ y, vÃ  mÃ´ hÃ¬nh sáº½ Ä‘Æ°á»£c huáº¥n luyá»‡n trong vÃ i giÃ¢y. NÃºt sáº½ bá»‹ má» Ä‘i trong khi huáº¥n luyá»‡n, vÃ  Ä‘Æ°á»£c kÃ­ch hoáº¡t láº¡i khi hoÃ n táº¥t.

1. Chá»n nÃºt **Kiá»ƒm tra** tá»« menu trÃªn cÃ¹ng Ä‘á»ƒ kiá»ƒm tra mÃ´ hÃ¬nh hiá»ƒu ngÃ´n ngá»¯. Nháº­p vÄƒn báº£n nhÆ° `Ä‘áº·t háº¹n giá» 5 phÃºt 4 giÃ¢y` vÃ  nháº¥n return. CÃ¢u nÃ³i sáº½ xuáº¥t hiá»‡n trong má»™t há»™p dÆ°á»›i há»™p vÄƒn báº£n mÃ  báº¡n Ä‘Ã£ nháº­p vÃ o, vÃ  bÃªn dÆ°á»›i Ä‘Ã³ sáº½ lÃ  *Ã½ Ä‘á»‹nh hÃ ng Ä‘áº§u*, hoáº·c Ã½ Ä‘á»‹nh Ä‘Æ°á»£c phÃ¡t hiá»‡n vá»›i xÃ¡c suáº¥t cao nháº¥t. Äiá»u nÃ y nÃªn lÃ  `Ä‘áº·t háº¹n giá»`. TÃªn Ã½ Ä‘á»‹nh sáº½ Ä‘Æ°á»£c theo sau bá»Ÿi xÃ¡c suáº¥t ráº±ng Ã½ Ä‘á»‹nh Ä‘Æ°á»£c phÃ¡t hiá»‡n lÃ  Ä‘Ãºng.

1. Chá»n tÃ¹y chá»n **Kiá»ƒm tra** Ä‘á»ƒ xem phÃ¢n tÃ­ch káº¿t quáº£. Báº¡n sáº½ tháº¥y Ã½ Ä‘á»‹nh cÃ³ Ä‘iá»ƒm cao nháº¥t vá»›i xÃ¡c suáº¥t pháº§n trÄƒm cá»§a nÃ³, cÃ¹ng vá»›i danh sÃ¡ch cÃ¡c thá»±c thá»ƒ Ä‘Æ°á»£c phÃ¡t hiá»‡n.

1. ÄÃ³ng báº£ng *Kiá»ƒm tra* khi báº¡n Ä‘Ã£ hoÃ n táº¥t kiá»ƒm tra.

### Nhiá»‡m vá»¥ - xuáº¥t báº£n mÃ´ hÃ¬nh

Äá»ƒ sá»­ dá»¥ng mÃ´ hÃ¬nh nÃ y tá»« mÃ£, báº¡n cáº§n xuáº¥t báº£n nÃ³. Khi xuáº¥t báº£n tá»« LUIS, báº¡n cÃ³ thá»ƒ xuáº¥t báº£n Ä‘áº¿n mÃ´i trÆ°á»ng thá»­ nghiá»‡m Ä‘á»ƒ kiá»ƒm tra, hoáº·c mÃ´i trÆ°á»ng sáº£n pháº©m Ä‘á»ƒ phÃ¡t hÃ nh Ä‘áº§y Ä‘á»§. Trong bÃ i há»c nÃ y, mÃ´i trÆ°á»ng thá»­ nghiá»‡m lÃ  Ä‘á»§.

1. Tá»« cá»•ng LUIS, chá»n nÃºt **Xuáº¥t báº£n** tá»« menu trÃªn cÃ¹ng.

1. Äáº£m báº£o *Vá»‹ trÃ­ thá»­ nghiá»‡m* Ä‘Æ°á»£c chá»n, sau Ä‘Ã³ chá»n **HoÃ n táº¥t**. Báº¡n sáº½ tháº¥y thÃ´ng bÃ¡o khi á»©ng dá»¥ng Ä‘Æ°á»£c xuáº¥t báº£n.

1. Báº¡n cÃ³ thá»ƒ kiá»ƒm tra Ä‘iá»u nÃ y báº±ng cÃ¡ch sá»­ dá»¥ng curl. Äá»ƒ xÃ¢y dá»±ng lá»‡nh curl, báº¡n cáº§n ba giÃ¡ trá»‹ - Ä‘iá»ƒm cuá»‘i, ID á»©ng dá»¥ng (App ID) vÃ  khÃ³a API. Nhá»¯ng giÃ¡ trá»‹ nÃ y cÃ³ thá»ƒ Ä‘Æ°á»£c truy cáº­p tá»« tab **QUáº¢N LÃ** cÃ³ thá»ƒ Ä‘Æ°á»£c chá»n tá»« menu trÃªn cÃ¹ng.

    1. Tá»« pháº§n *CÃ i Ä‘áº·t*, sao chÃ©p App ID
1. Tá»« pháº§n *Azure Resources*, chá»n *Authoring Resource*, vÃ  sao chÃ©p *Primary Key* vÃ  *Endpoint URL*.

1. Cháº¡y lá»‡nh curl sau trong command prompt hoáº·c terminal cá»§a báº¡n:

    ```sh
    curl "<endpoint url>/luis/prediction/v3.0/apps/<app id>/slots/staging/predict" \
          --request GET \
          --get \
          --data "subscription-key=<primary key>" \
          --data "verbose=false" \
          --data "show-all-intents=true" \
          --data-urlencode "query=<sentence>"
    ```

    Thay tháº¿ `<endpoint url>` báº±ng Endpoint URL tá»« pháº§n *Azure Resources*.

    Thay tháº¿ `<app id>` báº±ng App ID tá»« pháº§n *Settings*.

    Thay tháº¿ `<primary key>` báº±ng Primary Key tá»« pháº§n *Azure Resources*.

    Thay tháº¿ `<sentence>` báº±ng cÃ¢u báº¡n muá»‘n kiá»ƒm tra.

1. Káº¿t quáº£ cá»§a lá»‡nh nÃ y sáº½ lÃ  má»™t tÃ i liá»‡u JSON chi tiáº¿t hÃ³a truy váº¥n, Ã½ Ä‘á»‹nh chÃ­nh (top intent), vÃ  danh sÃ¡ch cÃ¡c thá»±c thá»ƒ Ä‘Æ°á»£c phÃ¢n loáº¡i theo loáº¡i.

    ```JSON
    {
        "query": "set a timer for 45 minutes and 12 seconds",
        "prediction": {
            "topIntent": "set timer",
            "intents": {
                "set timer": {
                    "score": 0.97031575
                },
                "None": {
                    "score": 0.02205793
                }
            },
            "entities": {
                "number": [
                    45,
                    12
                ],
                "time-unit": [
                    [
                        "minute"
                    ],
                    [
                        "second"
                    ]
                ]
            }
        }
    }
    ```

    JSON trÃªn Ä‘Æ°á»£c táº¡o ra tá»« truy váº¥n vá»›i `set a timer for 45 minutes and 12 seconds`:

    * `set timer` lÃ  Ã½ Ä‘á»‹nh chÃ­nh vá»›i xÃ¡c suáº¥t 97%.
    * Hai thá»±c thá»ƒ *number* Ä‘Æ°á»£c phÃ¡t hiá»‡n, `45` vÃ  `12`.
    * Hai thá»±c thá»ƒ *time-unit* Ä‘Æ°á»£c phÃ¡t hiá»‡n, `minute` vÃ  `second`.

## Sá»­ dá»¥ng mÃ´ hÃ¬nh hiá»ƒu ngÃ´n ngá»¯

Khi Ä‘Ã£ Ä‘Æ°á»£c xuáº¥t báº£n, mÃ´ hÃ¬nh LUIS cÃ³ thá»ƒ Ä‘Æ°á»£c gá»i tá»« mÃ£. Trong cÃ¡c bÃ i há»c trÆ°á»›c, báº¡n Ä‘Ã£ sá»­ dá»¥ng IoT Hub Ä‘á»ƒ xá»­ lÃ½ giao tiáº¿p vá»›i cÃ¡c dá»‹ch vá»¥ Ä‘Ã¡m mÃ¢y, gá»­i dá»¯ liá»‡u Ä‘o lÆ°á»ng vÃ  láº¯ng nghe lá»‡nh. Äiá»u nÃ y ráº¥t khÃ´ng Ä‘á»“ng bá»™ - khi dá»¯ liá»‡u Ä‘o lÆ°á»ng Ä‘Æ°á»£c gá»­i Ä‘i, mÃ£ cá»§a báº¡n khÃ´ng chá» pháº£n há»“i, vÃ  náº¿u dá»‹ch vá»¥ Ä‘Ã¡m mÃ¢y bá»‹ giÃ¡n Ä‘oáº¡n, báº¡n sáº½ khÃ´ng biáº¿t.

Äá»‘i vá»›i má»™t bá»™ háº¹n giá» thÃ´ng minh, chÃºng ta muá»‘n cÃ³ pháº£n há»“i ngay láº­p tá»©c Ä‘á»ƒ thÃ´ng bÃ¡o cho ngÆ°á»i dÃ¹ng ráº±ng bá»™ háº¹n giá» Ä‘Ã£ Ä‘Æ°á»£c Ä‘áº·t, hoáº·c cáº£nh bÃ¡o ráº±ng cÃ¡c dá»‹ch vá»¥ Ä‘Ã¡m mÃ¢y khÃ´ng kháº£ dá»¥ng. Äá»ƒ lÃ m Ä‘iá»u nÃ y, thiáº¿t bá»‹ IoT cá»§a chÃºng ta sáº½ gá»i trá»±c tiáº¿p má»™t endpoint web, thay vÃ¬ dá»±a vÃ o IoT Hub.

Thay vÃ¬ gá»i LUIS tá»« thiáº¿t bá»‹ IoT, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng mÃ£ serverless vá»›i má»™t loáº¡i trigger khÃ¡c - HTTP trigger. Äiá»u nÃ y cho phÃ©p á»©ng dá»¥ng function cá»§a báº¡n láº¯ng nghe cÃ¡c yÃªu cáº§u REST vÃ  pháº£n há»“i chÃºng. Chá»©c nÄƒng nÃ y sáº½ lÃ  má»™t endpoint REST mÃ  thiáº¿t bá»‹ cá»§a báº¡n cÃ³ thá»ƒ gá»i.

> ğŸ’ Máº·c dÃ¹ báº¡n cÃ³ thá»ƒ gá»i LUIS trá»±c tiáº¿p tá»« thiáº¿t bá»‹ IoT cá»§a mÃ¬nh, nhÆ°ng tá»‘t hÆ¡n lÃ  sá»­ dá»¥ng mÃ£ serverless. Báº±ng cÃ¡ch nÃ y, khi báº¡n muá»‘n thay Ä‘á»•i á»©ng dá»¥ng LUIS mÃ  báº¡n gá»i, vÃ­ dá»¥ khi báº¡n huáº¥n luyá»‡n má»™t mÃ´ hÃ¬nh tá»‘t hÆ¡n hoáº·c huáº¥n luyá»‡n má»™t mÃ´ hÃ¬nh báº±ng ngÃ´n ngá»¯ khÃ¡c, báº¡n chá»‰ cáº§n cáº­p nháº­t mÃ£ Ä‘Ã¡m mÃ¢y cá»§a mÃ¬nh, thay vÃ¬ triá»ƒn khai láº¡i mÃ£ cho hÃ ng nghÃ¬n hoáº·c hÃ ng triá»‡u thiáº¿t bá»‹ IoT.

### Nhiá»‡m vá»¥ - táº¡o á»©ng dá»¥ng serverless functions

1. Táº¡o má»™t á»©ng dá»¥ng Azure Functions cÃ³ tÃªn `smart-timer-trigger`, vÃ  má»Ÿ nÃ³ trong VS Code.

1. ThÃªm má»™t HTTP trigger vÃ o á»©ng dá»¥ng nÃ y cÃ³ tÃªn `speech-trigger` báº±ng cÃ¡ch sá»­ dá»¥ng lá»‡nh sau tá»« bÃªn trong terminal cá»§a VS Code:

    ```sh
    func new --name text-to-timer --template "HTTP trigger"
    ```

    Lá»‡nh nÃ y sáº½ táº¡o má»™t HTTP trigger cÃ³ tÃªn `text-to-timer`.

1. Kiá»ƒm tra HTTP trigger báº±ng cÃ¡ch cháº¡y á»©ng dá»¥ng functions. Khi á»©ng dá»¥ng cháº¡y, báº¡n sáº½ tháº¥y endpoint Ä‘Æ°á»£c liá»‡t kÃª trong output:

    ```output
    Functions:
    
            text-to-timer: [GET,POST] http://localhost:7071/api/text-to-timer
    ```

    Kiá»ƒm tra Ä‘iá»u nÃ y báº±ng cÃ¡ch táº£i URL [http://localhost:7071/api/text-to-timer](http://localhost:7071/api/text-to-timer) trong trÃ¬nh duyá»‡t cá»§a báº¡n.

    ```output
    This HTTP triggered function executed successfully. Pass a name in the query string or in the request body for a personalized response.
    ```

### Nhiá»‡m vá»¥ - sá»­ dá»¥ng mÃ´ hÃ¬nh hiá»ƒu ngÃ´n ngá»¯

1. SDK cho LUIS cÃ³ sáºµn thÃ´ng qua gÃ³i Pip. ThÃªm dÃ²ng sau vÃ o tá»‡p `requirements.txt` Ä‘á»ƒ thÃªm phá»¥ thuá»™c vÃ o gÃ³i nÃ y:

    ```sh
    azure-cognitiveservices-language-luis
    ```

1. Äáº£m báº£o terminal cá»§a VS Code Ä‘Ã£ kÃ­ch hoáº¡t mÃ´i trÆ°á»ng áº£o, vÃ  cháº¡y lá»‡nh sau Ä‘á»ƒ cÃ i Ä‘áº·t cÃ¡c gÃ³i Pip:

    ```sh
    pip install -r requirements.txt
    ```

    > ğŸ’ Náº¿u báº¡n gáº·p lá»—i, báº¡n cÃ³ thá»ƒ cáº§n nÃ¢ng cáº¥p pip báº±ng lá»‡nh sau:
    >
    > ```sh
    > pip install --upgrade pip
    > ```

1. ThÃªm cÃ¡c má»¥c nháº­p má»›i vÃ o tá»‡p `local.settings.json` cho LUIS API Key, Endpoint URL, vÃ  App ID tá»« tab **MANAGE** cá»§a cá»•ng LUIS:

    ```JSON
    "LUIS_KEY": "<primary key>",
    "LUIS_ENDPOINT_URL": "<endpoint url>",
    "LUIS_APP_ID": "<app id>"
    ```

    Thay tháº¿ `<endpoint url>` báº±ng Endpoint URL tá»« pháº§n *Azure Resources* cá»§a tab **MANAGE**. URL nÃ y sáº½ lÃ  `https://<location>.api.cognitive.microsoft.com/`.

    Thay tháº¿ `<app id>` báº±ng App ID tá»« pháº§n *Settings* cá»§a tab **MANAGE**.

    Thay tháº¿ `<primary key>` báº±ng Primary Key tá»« pháº§n *Azure Resources* cá»§a tab **MANAGE**.

1. ThÃªm cÃ¡c import sau vÃ o tá»‡p `__init__.py`:

    ```python
    import json
    import os
    from azure.cognitiveservices.language.luis.runtime import LUISRuntimeClient
    from msrest.authentication import CognitiveServicesCredentials
    ```

    Äiá»u nÃ y sáº½ import má»™t sá»‘ thÆ° viá»‡n há»‡ thá»‘ng, cÅ©ng nhÆ° cÃ¡c thÆ° viá»‡n Ä‘á»ƒ tÆ°Æ¡ng tÃ¡c vá»›i LUIS.

1. XÃ³a ná»™i dung cá»§a phÆ°Æ¡ng thá»©c `main`, vÃ  thÃªm Ä‘oáº¡n mÃ£ sau:

    ```python
    luis_key = os.environ['LUIS_KEY']
    endpoint_url = os.environ['LUIS_ENDPOINT_URL']
    app_id = os.environ['LUIS_APP_ID']
    
    credentials = CognitiveServicesCredentials(luis_key)
    client = LUISRuntimeClient(endpoint=endpoint_url, credentials=credentials)
    ```

    Äoáº¡n mÃ£ nÃ y táº£i cÃ¡c giÃ¡ trá»‹ báº¡n Ä‘Ã£ thÃªm vÃ o tá»‡p `local.settings.json` cho á»©ng dá»¥ng LUIS cá»§a báº¡n, táº¡o má»™t Ä‘á»‘i tÆ°á»£ng credentials vá»›i API key cá»§a báº¡n, sau Ä‘Ã³ táº¡o má»™t Ä‘á»‘i tÆ°á»£ng LUIS client Ä‘á»ƒ tÆ°Æ¡ng tÃ¡c vá»›i á»©ng dá»¥ng LUIS cá»§a báº¡n.

1. HTTP trigger nÃ y sáº½ Ä‘Æ°á»£c gá»i vá»›i vÄƒn báº£n cáº§n hiá»ƒu dÆ°á»›i dáº¡ng JSON, vá»›i vÄƒn báº£n trong má»™t thuá»™c tÃ­nh cÃ³ tÃªn `text`. Äoáº¡n mÃ£ sau sáº½ trÃ­ch xuáº¥t giÃ¡ trá»‹ tá»« body cá»§a yÃªu cáº§u HTTP vÃ  ghi log nÃ³ vÃ o console. ThÃªm Ä‘oáº¡n mÃ£ nÃ y vÃ o hÃ m `main`:

    ```python
    req_body = req.get_json()
    text = req_body['text']
    logging.info(f'Request - {text}')
    ```

1. Dá»± Ä‘oÃ¡n Ä‘Æ°á»£c yÃªu cáº§u tá»« LUIS báº±ng cÃ¡ch gá»­i má»™t yÃªu cáº§u dá»± Ä‘oÃ¡n - má»™t tÃ i liá»‡u JSON chá»©a vÄƒn báº£n cáº§n dá»± Ä‘oÃ¡n. Táº¡o tÃ i liá»‡u nÃ y vá»›i Ä‘oáº¡n mÃ£ sau:

    ```python
    prediction_request = { 'query' : text }
    ```

1. YÃªu cáº§u nÃ y sau Ä‘Ã³ cÃ³ thá»ƒ Ä‘Æ°á»£c gá»­i Ä‘áº¿n LUIS, sá»­ dá»¥ng staging slot mÃ  á»©ng dá»¥ng cá»§a báº¡n Ä‘Ã£ Ä‘Æ°á»£c xuáº¥t báº£n:

    ```python
    prediction_response = client.prediction.get_slot_prediction(app_id, 'Staging', prediction_request)
    ```

1. Pháº£n há»“i dá»± Ä‘oÃ¡n chá»©a Ã½ Ä‘á»‹nh chÃ­nh - Ã½ Ä‘á»‹nh cÃ³ Ä‘iá»ƒm dá»± Ä‘oÃ¡n cao nháº¥t, cÃ¹ng vá»›i cÃ¡c thá»±c thá»ƒ. Náº¿u Ã½ Ä‘á»‹nh chÃ­nh lÃ  `set timer`, thÃ¬ cÃ¡c thá»±c thá»ƒ cÃ³ thá»ƒ Ä‘Æ°á»£c Ä‘á»c Ä‘á»ƒ láº¥y thá»i gian cáº§n thiáº¿t cho bá»™ háº¹n giá»:

    ```python
    if prediction_response.prediction.top_intent == 'set timer':
        numbers = prediction_response.prediction.entities['number']
        time_units = prediction_response.prediction.entities['time unit']
        total_seconds = 0
    ```

    CÃ¡c thá»±c thá»ƒ `number` sáº½ lÃ  má»™t máº£ng cÃ¡c sá»‘. VÃ­ dá»¥, náº¿u báº¡n nÃ³i *"Set a four minute 17 second timer."*, thÃ¬ máº£ng `number` sáº½ chá»©a 2 sá»‘ nguyÃªn - 4 vÃ  17.

    CÃ¡c thá»±c thá»ƒ `time unit` sáº½ lÃ  má»™t máº£ng cÃ¡c máº£ng chuá»—i, vá»›i má»—i Ä‘Æ¡n vá»‹ thá»i gian lÃ  má»™t máº£ng chuá»—i bÃªn trong máº£ng. VÃ­ dá»¥, náº¿u báº¡n nÃ³i *"Set a four minute 17 second timer."*, thÃ¬ máº£ng `time unit` sáº½ chá»©a 2 máº£ng vá»›i má»—i máº£ng cÃ³ má»™t giÃ¡ trá»‹ - `['minute']` vÃ  `['second']`.

    PhiÃªn báº£n JSON cá»§a cÃ¡c thá»±c thá»ƒ nÃ y cho *"Set a four minute 17 second timer."* lÃ :

    ```json
    {
        "number": [4, 17],
        "time unit": [
            ["minute"],
            ["second"]
        ]
    }
    ```

    Äoáº¡n mÃ£ nÃ y cÅ©ng Ä‘á»‹nh nghÄ©a má»™t biáº¿n Ä‘áº¿m cho tá»•ng thá»i gian cá»§a bá»™ háº¹n giá» tÃ­nh báº±ng giÃ¢y. Biáº¿n nÃ y sáº½ Ä‘Æ°á»£c Ä‘iá»n giÃ¡ trá»‹ tá»« cÃ¡c thá»±c thá»ƒ.

1. CÃ¡c thá»±c thá»ƒ khÃ´ng Ä‘Æ°á»£c liÃªn káº¿t, nhÆ°ng chÃºng ta cÃ³ thá»ƒ Ä‘Æ°a ra má»™t sá»‘ giáº£ Ä‘á»‹nh vá» chÃºng. ChÃºng sáº½ theo thá»© tá»± Ä‘Æ°á»£c nÃ³i, vÃ¬ váº­y vá»‹ trÃ­ trong máº£ng cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ xÃ¡c Ä‘á»‹nh sá»‘ nÃ o khá»›p vá»›i Ä‘Æ¡n vá»‹ thá»i gian nÃ o. VÃ­ dá»¥:

    * *"Set a 30 second timer"* - Ä‘iá»u nÃ y sáº½ cÃ³ má»™t sá»‘, `30`, vÃ  má»™t Ä‘Æ¡n vá»‹ thá»i gian, `second`, vÃ¬ váº­y sá»‘ duy nháº¥t sáº½ khá»›p vá»›i Ä‘Æ¡n vá»‹ thá»i gian duy nháº¥t.
    * *"Set a 2 minute and 30 second timer"* - Ä‘iá»u nÃ y sáº½ cÃ³ hai sá»‘, `2` vÃ  `30`, vÃ  hai Ä‘Æ¡n vá»‹ thá»i gian, `minute` vÃ  `second`, vÃ¬ váº­y sá»‘ Ä‘áº§u tiÃªn sáº½ dÃ nh cho Ä‘Æ¡n vá»‹ thá»i gian Ä‘áº§u tiÃªn (2 phÃºt), vÃ  sá»‘ thá»© hai cho Ä‘Æ¡n vá»‹ thá»i gian thá»© hai (30 giÃ¢y).

    Äoáº¡n mÃ£ sau láº¥y sá»‘ lÆ°á»£ng má»¥c trong cÃ¡c thá»±c thá»ƒ sá»‘, vÃ  sá»­ dá»¥ng sá»‘ lÆ°á»£ng nÃ y Ä‘á»ƒ trÃ­ch xuáº¥t má»¥c Ä‘áº§u tiÃªn tá»« má»—i máº£ng, sau Ä‘Ã³ lÃ  má»¥c thá»© hai, vÃ  cá»© tháº¿. ThÃªm Ä‘oáº¡n mÃ£ nÃ y vÃ o bÃªn trong khá»‘i `if`.

    ```python
    for i in range(0, len(numbers)):
        number = numbers[i]
        time_unit = time_units[i][0]
    ```

    Vá»›i *"Set a four minute 17 second timer."*, Ä‘oáº¡n mÃ£ nÃ y sáº½ láº·p hai láº§n, cho cÃ¡c giÃ¡ trá»‹ sau:

    | Láº§n láº·p | `number` | `time_unit` |
    | -------:| --------:| ----------- |
    | 0       | 4        | minute      |
    | 1       | 17       | second      |

1. BÃªn trong vÃ²ng láº·p nÃ y, sá»­ dá»¥ng sá»‘ vÃ  Ä‘Æ¡n vá»‹ thá»i gian Ä‘á»ƒ tÃ­nh tá»•ng thá»i gian cho bá»™ háº¹n giá», thÃªm 60 giÃ¢y cho má»—i phÃºt, vÃ  sá»‘ giÃ¢y cho báº¥t ká»³ giÃ¢y nÃ o.

    ```python
    if time_unit == 'minute':
        total_seconds += number * 60
    else:
        total_seconds += number
    ```

1. BÃªn ngoÃ i vÃ²ng láº·p qua cÃ¡c thá»±c thá»ƒ, ghi log tá»•ng thá»i gian cho bá»™ háº¹n giá»:

    ```python
    logging.info(f'Timer required for {total_seconds} seconds')
    ```

1. Sá»‘ giÃ¢y cáº§n Ä‘Æ°á»£c tráº£ vá» tá»« hÃ m dÆ°á»›i dáº¡ng pháº£n há»“i HTTP. á» cuá»‘i khá»‘i `if`, thÃªm Ä‘oáº¡n mÃ£ sau:

    ```python
    payload = {
        'seconds': total_seconds
    }
    return func.HttpResponse(json.dumps(payload), status_code=200)
    ```

    Äoáº¡n mÃ£ nÃ y táº¡o má»™t payload chá»©a tá»•ng sá»‘ giÃ¢y cho bá»™ háº¹n giá», chuyá»ƒn Ä‘á»•i nÃ³ thÃ nh chuá»—i JSON vÃ  tráº£ vá» nÃ³ dÆ°á»›i dáº¡ng káº¿t quáº£ HTTP vá»›i mÃ£ tráº¡ng thÃ¡i 200, nghÄ©a lÃ  cuá»™c gá»i thÃ nh cÃ´ng.

1. Cuá»‘i cÃ¹ng, bÃªn ngoÃ i khá»‘i `if`, xá»­ lÃ½ trÆ°á»ng há»£p Ã½ Ä‘á»‹nh khÃ´ng Ä‘Æ°á»£c nháº­n diá»‡n báº±ng cÃ¡ch tráº£ vá» mÃ£ lá»—i:

    ```python
    return func.HttpResponse(status_code=404)
    ```

    404 lÃ  mÃ£ tráº¡ng thÃ¡i cho *khÃ´ng tÃ¬m tháº¥y*.

1. Cháº¡y á»©ng dá»¥ng function vÃ  kiá»ƒm tra nÃ³ báº±ng cÃ¡ch sá»­ dá»¥ng curl.

    ```sh
    curl --request POST 'http://localhost:7071/api/text-to-timer' \
         --header 'Content-Type: application/json' \
         --include \
         --data '{"text":"<text>"}'
    ```

    Thay tháº¿ `<text>` báº±ng vÄƒn báº£n yÃªu cáº§u cá»§a báº¡n, vÃ­ dá»¥ `set a 2 minutes 27 second timer`.

    Báº¡n sáº½ tháº¥y output sau tá»« á»©ng dá»¥ng functions:

    ```output
    Functions:

            text-to-timer: [GET,POST] http://localhost:7071/api/text-to-timer
    
    For detailed output, run func with --verbose flag.
    [2021-06-26T19:45:14.502Z] Worker process started and initialized.
    [2021-06-26T19:45:19.338Z] Host lock lease acquired by instance ID '000000000000000000000000951CAE4E'.
    [2021-06-26T19:45:52.059Z] Executing 'Functions.text-to-timer' (Reason='This function was programmatically called via the host APIs.', Id=f68bfb90-30e4-47a5-99da-126b66218e81)
    [2021-06-26T19:45:53.577Z] Timer required for 147 seconds
    [2021-06-26T19:45:53.746Z] Executed 'Functions.text-to-timer' (Succeeded, Id=f68bfb90-30e4-47a5-99da-126b66218e81, Duration=1750ms)
    ```

    Cuá»™c gá»i curl sáº½ tráº£ vá» káº¿t quáº£ sau:

    ```output
    HTTP/1.1 200 OK
    Date: Tue, 29 Jun 2021 01:14:11 GMT
    Content-Type: text/plain; charset=utf-8
    Server: Kestrel
    Transfer-Encoding: chunked
    
    {"seconds": 147}
    ```

    Sá»‘ giÃ¢y cho bá»™ háº¹n giá» náº±m trong giÃ¡ trá»‹ `"seconds"`.

> ğŸ’ Báº¡n cÃ³ thá»ƒ tÃ¬m tháº¥y Ä‘oáº¡n mÃ£ nÃ y trong thÆ° má»¥c [code/functions](../../../../../6-consumer/lessons/2-language-understanding/code/functions).

### Nhiá»‡m vá»¥ - lÃ m cho function cá»§a báº¡n kháº£ dá»¥ng cho thiáº¿t bá»‹ IoT cá»§a báº¡n

1. Äá»ƒ thiáº¿t bá»‹ IoT cá»§a báº¡n gá»i endpoint REST cá»§a báº¡n, nÃ³ sáº½ cáº§n biáº¿t URL. Khi báº¡n truy cáº­p nÃ³ trÆ°á»›c Ä‘Ã³, báº¡n Ä‘Ã£ sá»­ dá»¥ng `localhost`, Ä‘Ã¢y lÃ  má»™t cÃ¡ch táº¯t Ä‘á»ƒ truy cáº­p cÃ¡c endpoint REST trÃªn mÃ¡y cá»¥c bá»™ cá»§a báº¡n. Äá»ƒ thiáº¿t bá»‹ IoT cá»§a báº¡n cÃ³ thá»ƒ truy cáº­p, báº¡n cáº§n hoáº·c xuáº¥t báº£n lÃªn Ä‘Ã¡m mÃ¢y, hoáº·c láº¥y Ä‘á»‹a chá»‰ IP cá»§a báº¡n Ä‘á»ƒ truy cáº­p cá»¥c bá»™.

    > âš ï¸ Náº¿u báº¡n Ä‘ang sá»­ dá»¥ng Wio Terminal, dá»… dÃ ng hÆ¡n Ä‘á»ƒ cháº¡y á»©ng dá»¥ng function cá»¥c bá»™, vÃ¬ sáº½ cÃ³ sá»± phá»¥ thuá»™c vÃ o cÃ¡c thÆ° viá»‡n khiáº¿n báº¡n khÃ´ng thá»ƒ triá»ƒn khai á»©ng dá»¥ng function theo cÃ¡ch báº¡n Ä‘Ã£ lÃ m trÆ°á»›c Ä‘Ã³. Cháº¡y á»©ng dá»¥ng function cá»¥c bá»™ vÃ  truy cáº­p nÃ³ qua Ä‘á»‹a chá»‰ IP cá»§a mÃ¡y tÃ­nh cá»§a báº¡n. Náº¿u báº¡n muá»‘n triá»ƒn khai lÃªn Ä‘Ã¡m mÃ¢y, thÃ´ng tin sáº½ Ä‘Æ°á»£c cung cáº¥p trong bÃ i há»c sau vá» cÃ¡ch thá»±c hiá»‡n Ä‘iá»u nÃ y.

    * Xuáº¥t báº£n á»©ng dá»¥ng Functions - lÃ m theo hÆ°á»›ng dáº«n trong cÃ¡c bÃ i há»c trÆ°á»›c Ä‘á»ƒ xuáº¥t báº£n á»©ng dá»¥ng functions cá»§a báº¡n lÃªn Ä‘Ã¡m mÃ¢y. Khi Ä‘Ã£ xuáº¥t báº£n, URL sáº½ lÃ  `https://<APP_NAME>.azurewebsites.net/api/text-to-timer`, trong Ä‘Ã³ `<APP_NAME>` sáº½ lÃ  tÃªn cá»§a á»©ng dá»¥ng functions cá»§a báº¡n. Äáº£m báº£o cÅ©ng xuáº¥t báº£n cÃ¡c cÃ i Ä‘áº·t cá»¥c bá»™ cá»§a báº¡n.

      Khi lÃ m viá»‡c vá»›i HTTP triggers, chÃºng Ä‘Æ°á»£c báº£o máº­t máº·c Ä‘á»‹nh vá»›i má»™t function app key. Äá»ƒ láº¥y key nÃ y, cháº¡y lá»‡nh sau:

      ```sh
      az functionapp keys list --resource-group smart-timer \
                               --name <APP_NAME>                               
      ```

      Sao chÃ©p giÃ¡ trá»‹ cá»§a má»¥c `default` tá»« pháº§n `functionKeys`.

      ```output
      {
        "functionKeys": {
          "default": "sQO1LQaeK9N1qYD6SXeb/TctCmwQEkToLJU6Dw8TthNeUH8VA45hlA=="
        },
        "masterKey": "RSKOAIlyvvQEQt9dfpabJT018scaLpQu9p1poHIMCxx5LYrIQZyQ/g==",
        "systemKeys": {}
      }
      ```

      Key nÃ y cáº§n Ä‘Æ°á»£c thÃªm vÃ o dÆ°á»›i dáº¡ng tham sá»‘ truy váº¥n vÃ o URL, vÃ¬ váº­y URL cuá»‘i cÃ¹ng sáº½ lÃ  `https://<APP_NAME>.azurewebsites.net/api/text-to-timer?code=<FUNCTION_KEY>`, trong Ä‘Ã³ `<APP_NAME>` sáº½ lÃ  tÃªn cá»§a á»©ng dá»¥ng functions cá»§a báº¡n, vÃ  `<FUNCTION_KEY>` sáº½ lÃ  function key máº·c Ä‘á»‹nh cá»§a báº¡n.

      > ğŸ’ Báº¡n cÃ³ thá»ƒ thay Ä‘á»•i loáº¡i á»§y quyá»n cá»§a HTTP trigger báº±ng cÃ¡ch sá»­ dá»¥ng cÃ i Ä‘áº·t `authlevel` trong tá»‡p `function.json`. Báº¡n cÃ³ thá»ƒ Ä‘á»c thÃªm vá» Ä‘iá»u nÃ y trong [pháº§n cáº¥u hÃ¬nh cá»§a tÃ i liá»‡u Azure Functions HTTP trigger trÃªn Microsoft docs](https://docs.microsoft.com/azure/azure-functions/functions-bindings-http-webhook-trigger?WT.mc_id=academic-17441-jabenn&tabs=python#configuration).

    * Cháº¡y á»©ng dá»¥ng functions cá»¥c bá»™, vÃ  truy cáº­p báº±ng Ä‘á»‹a chá»‰ IP - báº¡n cÃ³ thá»ƒ láº¥y Ä‘á»‹a chá»‰ IP cá»§a mÃ¡y tÃ­nh cá»§a báº¡n trÃªn máº¡ng cá»¥c bá»™, vÃ  sá»­ dá»¥ng Ä‘á»‹a chá»‰ Ä‘Ã³ Ä‘á»ƒ xÃ¢y dá»±ng URL.

      TÃ¬m Ä‘á»‹a chá»‰ IP cá»§a báº¡n:

      * TrÃªn Windows 10, lÃ m theo hÆ°á»›ng dáº«n [tÃ¬m Ä‘á»‹a chá»‰ IP cá»§a báº¡n](https://support.microsoft.com/windows/find-your-ip-address-f21a9bbc-c582-55cd-35e0-73431160a1b9?WT.mc_id=academic-17441-jabenn).
      * TrÃªn macOS, lÃ m theo hÆ°á»›ng dáº«n [cÃ¡ch tÃ¬m Ä‘á»‹a chá»‰ IP trÃªn Mac](https://www.hellotech.com/guide/for/how-to-find-ip-address-on-mac).
      * TrÃªn Linux, lÃ m theo pháº§n tÃ¬m Ä‘á»‹a chá»‰ IP riÃªng trong hÆ°á»›ng dáº«n [cÃ¡ch tÃ¬m Ä‘á»‹a chá»‰ IP trong Linux](https://opensource.com/article/18/5/how-find-ip-address-linux).

      Khi báº¡n Ä‘Ã£ cÃ³ Ä‘á»‹a chá»‰ IP cá»§a mÃ¬nh, báº¡n sáº½ cÃ³ thá»ƒ truy cáº­p function táº¡i `http://`.

:7071/api/text-to-timer`, nÆ¡i `<IP_ADDRESS>` sáº½ lÃ  Ä‘á»‹a chá»‰ IP cá»§a báº¡n, vÃ­ dá»¥ `http://192.168.1.10:7071/api/text-to-timer`.

      > ğŸ’ LÆ°u Ã½ ráº±ng Ä‘iá»u nÃ y sá»­ dá»¥ng cá»•ng 7071, vÃ¬ váº­y sau Ä‘á»‹a chá»‰ IP báº¡n cáº§n thÃªm `:7071`.

      > ğŸ’ Äiá»u nÃ y chá»‰ hoáº¡t Ä‘á»™ng náº¿u thiáº¿t bá»‹ IoT cá»§a báº¡n náº±m trong cÃ¹ng máº¡ng vá»›i mÃ¡y tÃ­nh cá»§a báº¡n.

1. Kiá»ƒm tra endpoint báº±ng cÃ¡ch truy cáº­p nÃ³ sá»­ dá»¥ng curl.

---

## ğŸš€ Thá»­ thÃ¡ch

CÃ³ nhiá»u cÃ¡ch Ä‘á»ƒ yÃªu cáº§u cÃ¹ng má»™t viá»‡c, cháº³ng háº¡n nhÆ° Ä‘áº·t háº¹n giá». HÃ£y nghÄ© Ä‘áº¿n cÃ¡c cÃ¡ch khÃ¡c nhau Ä‘á»ƒ lÃ m Ä‘iá»u nÃ y vÃ  sá»­ dá»¥ng chÃºng lÃ m vÃ­ dá»¥ trong á»©ng dá»¥ng LUIS cá»§a báº¡n. Kiá»ƒm tra nhá»¯ng cÃ¡ch nÃ y Ä‘á»ƒ xem mÃ´ hÃ¬nh cá»§a báº¡n cÃ³ thá»ƒ xá»­ lÃ½ tá»‘t nhÆ° tháº¿ nÃ o vá»›i nhiá»u cÃ¡ch yÃªu cáº§u háº¹n giá».

## CÃ¢u há»i sau bÃ i giáº£ng

[CÃ¢u há»i sau bÃ i giáº£ng](https://black-meadow-040d15503.1.azurestaticapps.net/quiz/44)

## Ã”n táº­p & Tá»± há»c

* Äá»c thÃªm vá» LUIS vÃ  cÃ¡c kháº£ nÄƒng cá»§a nÃ³ trÃªn [trang tÃ i liá»‡u Language Understanding (LUIS) trÃªn Microsoft docs](https://docs.microsoft.com/azure/cognitive-services/luis/?WT.mc_id=academic-17441-jabenn)
* Äá»c thÃªm vá» hiá»ƒu ngÃ´n ngá»¯ trÃªn [trang hiá»ƒu ngÃ´n ngá»¯ tá»± nhiÃªn trÃªn Wikipedia](https://wikipedia.org/wiki/Natural-language_understanding)
* Äá»c thÃªm vá» HTTP triggers trong [tÃ i liá»‡u vá» Azure Functions HTTP trigger trÃªn Microsoft docs](https://docs.microsoft.com/azure/azure-functions/functions-bindings-http-webhook-trigger?WT.mc_id=academic-17441-jabenn&tabs=python)

## BÃ i táº­p

[Há»§y háº¹n giá»](assignment.md)

---

**TuyÃªn bá»‘ miá»…n trá»« trÃ¡ch nhiá»‡m**:  
TÃ i liá»‡u nÃ y Ä‘Ã£ Ä‘Æ°á»£c dá»‹ch báº±ng dá»‹ch vá»¥ dá»‹ch thuáº­t AI [Co-op Translator](https://github.com/Azure/co-op-translator). Máº·c dÃ¹ chÃºng tÃ´i cá»‘ gáº¯ng Ä‘áº£m báº£o Ä‘á»™ chÃ­nh xÃ¡c, xin lÆ°u Ã½ ráº±ng cÃ¡c báº£n dá»‹ch tá»± Ä‘á»™ng cÃ³ thá»ƒ chá»©a lá»—i hoáº·c khÃ´ng chÃ­nh xÃ¡c. TÃ i liá»‡u gá»‘c báº±ng ngÃ´n ngá»¯ báº£n Ä‘á»‹a nÃªn Ä‘Æ°á»£c coi lÃ  nguá»“n thÃ´ng tin chÃ­nh thá»©c. Äá»‘i vá»›i cÃ¡c thÃ´ng tin quan trá»ng, khuyáº¿n nghá»‹ sá»­ dá»¥ng dá»‹ch vá»¥ dá»‹ch thuáº­t chuyÃªn nghiá»‡p bá»Ÿi con ngÆ°á»i. ChÃºng tÃ´i khÃ´ng chá»‹u trÃ¡ch nhiá»‡m vá» báº¥t ká»³ sá»± hiá»ƒu láº§m hoáº·c diá»…n giáº£i sai nÃ o phÃ¡t sinh tá»« viá»‡c sá»­ dá»¥ng báº£n dá»‹ch nÃ y.