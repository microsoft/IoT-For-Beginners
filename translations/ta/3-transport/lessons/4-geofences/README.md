<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "078ae664c7b686bf069545e9a5fc95b2",
  "translation_date": "2025-10-11T11:54:16+00:00",
  "source_file": "3-transport/lessons/4-geofences/README.md",
  "language_code": "ta"
}
-->
# роЬро┐ропрпЛроГрокрпЖройрпНро╕рпН

![роЗроирпНрод рокро╛роЯродрпНродро┐ройрпН ро╕рпНроХрпЖроЯрпНроЪрпН роирпЛроЯрпН](../../../../../translated_images/lesson-14.63980c5150ae3c153e770fb71d044c1845dce79248d86bed9fc525adf3ede73c.ta.jpg)

> ро╕рпНроХрпЖроЯрпНроЪрпН роирпЛроЯрпН: [роиро┐родрпНропро╛ роиро░роЪро┐роорпНрооройрпН](https://github.com/nitya). рокроЯродрпНродрпИ роХро┐ро│ро┐роХрпН роЪрпЖропрпНродрпБ рокрпЖро░ро┐роп рокродро┐рокрпНрокрпИрокрпН рокро╛ро░рпБроЩрпНроХро│рпН.

роЗроирпНрод ро╡рпАроЯро┐ропрпЛ роЬро┐ропрпЛроГрокрпЖройрпНро╕рпН рооро▒рпНро▒рпБроорпН Azure Maps-ро▓рпН роЕро╡ро▒рпНро▒рпИрокрпН рокропройрпНрокроЯрпБродрпНродрпБро╡родрпБ рокро▒рпНро▒ро┐роп роТро░рпБ роХрогрпНрогрпЛроЯрпНроЯродрпНродрпИ ро╡ро┤роЩрпНроХрпБроХро┐ро▒родрпБ. роЗроирпНрод рокро╛роЯродрпНродро┐ро▓рпН роХро▒рпНро▒рпБроХрпНроХрпКро│рпНро│рокрпНрокроЯрпБроорпН родро▓рпИрокрпНрокрпБроХро│рпН:

[![Microsoft Developer IoT роиро┐роХро┤рпНроЪрпНроЪро┐ропро┐ро▓рпН Azure Maps роЙроЯройрпН роЬро┐ропрпЛроГрокрпЖройрпНроЪро┐роЩрпН](https://img.youtube.com/vi/nsrgYhaYNVY/0.jpg)](https://www.youtube.com/watch?v=nsrgYhaYNVY)

> ЁЯОе роорпЗро▓рпЗ роЙро│рпНро│ рокроЯродрпНродрпИ роХро┐ро│ро┐роХрпН роЪрпЖропрпНродрпБ ро╡рпАроЯро┐ропрпЛро╡рпИрокрпН рокро╛ро░рпБроЩрпНроХро│рпН

## рокро╛роЯродрпНродро┐ро▒рпНроХрпБ роорпБройрпН ро╡ро┐ройро╛роЯро┐ ро╡ро┐ройро╛

[рокро╛роЯродрпНродро┐ро▒рпНроХрпБ роорпБройрпН ро╡ро┐ройро╛роЯро┐ ро╡ро┐ройро╛](https://black-meadow-040d15503.1.azurestaticapps.net/quiz/27)

## роЕро▒ро┐роорпБроХроорпН

роХроЯроирпНрод 3 рокро╛роЯроЩрпНроХро│ро┐ро▓рпН, роЙроЩрпНроХро│рпН рокрогрпНрогрпИропро┐ро▓рпН роЗро░рпБроирпНродрпБ роЪрпЖропро▓ро╛роХрпНроХ роорпИропродрпНродро┐ро▒рпНроХрпБроЪрпН роЪрпЖро▓рпНро▓рпБроорпН ро▓ро╛ро░ро┐роХро│рпИ IoT роорпВро▓роорпН роХрогрпНроЯро▒ро┐роирпНродрпАро░рпНроХро│рпН. GPS родро░ро╡рпБроХро│рпИрокрпН рокродро┐ро╡рпБ роЪрпЖропрпНродрпБ, роЕродрпИ роХро┐ро│ро╡рпБроЯро┐ро▓рпН роЪрпЗрооро┐родрпНродрпБ, ро╡ро░рпИрокроЯродрпНродро┐ро▓рпН роХро╛роЯрпНроЪро┐рокрпНрокроЯрпБродрпНродро┐ройрпАро░рпНроХро│рпН. роЙроЩрпНроХро│рпН роЪрокрпНро│рпИ роЪрпЗройро┐ройрпН роЪрпЖропро▓рпНродро┐ро▒ройрпИ роЕродро┐роХро░ро┐роХрпНроХ роЕроЯрпБродрпНрод рокроЯро┐ропро╛роХ, ро▓ро╛ро░ро┐ роЪрпЖропро▓ро╛роХрпНроХ роорпИропродрпНродро┐ро▒рпНроХрпБроЪрпН роЪрпЖро▓рпНро▓рпБроорпН роорпБройрпН роТро░рпБ роОроЪрпНроЪро░ро┐роХрпНроХрпИропрпИрокрпН рокрпЖро▒рпБро╡родрпБ. роЗродройро╛ро▓рпН, ро▓ро╛ро░ро┐ ро╡роирпНродро╡рпБроЯройрпН роЕродрпИ роЗро▒роХрпНроХрпБро╡родро▒рпНроХро╛рой роХрпБро┤рпБро╡ро┐ройро░рпН роГрокрпЛро░рпНроХрпНро▓ро┐роГрокрпНроЯрпН рооро▒рпНро▒рпБроорпН рокро┐ро▒ роЙрокроХро░рогроЩрпНроХро│рпБроЯройрпН родропро╛ро░ро╛роХ роЗро░рпБроХрпНроХ роорпБроЯро┐ропрпБроорпН. роЗродройро╛ро▓рпН, ро▓ро╛ро░ро┐ропрпИ ро╡ро┐ро░рпИро╡ро╛роХ роЗро▒роХрпНроХ роорпБроЯро┐ропрпБроорпН, роорпЗро▓рпБроорпН ро▓ро╛ро░ро┐ рооро▒рпНро▒рпБроорпН роЯро┐ро░рпИро╡ро░ро┐ройрпН роХро╛родрпНродро┐ро░рпБрокрпНрокрпБ роирпЗро░родрпНродро┐ро▒рпНроХро╛роХ роирпАроЩрпНроХро│рпН роЪрпЖро▓ро╡ро┐роЯ ро╡рпЗрогрпНроЯро┐ропродро┐ро▓рпНро▓рпИ.

роЗроирпНрод рокро╛роЯродрпНродро┐ро▓рпН, роЬро┐ропрпЛроГрокрпЖройрпНро╕рпН рокро▒рпНро▒ро┐ роХро▒рпНро▒рпБроХрпНроХрпКро│рпНро╡рпАро░рпНроХро│рпН - роЪрпЖропро▓ро╛роХрпНроХ роорпИропродрпНродро┐ро▒рпНроХрпБроЪрпН роЪрпЖро▓рпНро▓рпБроорпН 2 роХро┐роорпА роЪрпБро▒рпНро▒ро│ро╡рпБроХрпНроХрпБро│рпН роЙро│рпНро│ рокроХрпБродро┐ рокрпЛройрпНро▒ ро╡ро░рпИропро▒рпБроХрпНроХрокрпНрокроЯрпНроЯ рокрпБро╡ро┐ропро┐ропро▓рпН рокроХрпБродро┐роХро│рпН. GPS роХрпЛро░рпНроЯро┐ройрпЗроЯрпНроХро│рпН роЬро┐ропрпЛроГрокрпЖройрпНро╕ро┐ройрпН роЙро│рпНро│рпЗ роЕро▓рпНро▓родрпБ ро╡рпЖро│ро┐ропрпЗ роЙро│рпНро│родро╛ роОройрпНрокродрпИ роЪрпЛродро┐роХрпНроХро╡рпБроорпН, роЙроЩрпНроХро│рпН GPS роЪрпЖройрпНроЪро╛ро░рпН роТро░рпБ рокроХрпБродро┐ропрпИ ро╡роирпНродроЯрпИроирпНродродро╛ роЕро▓рпНро▓родрпБ ро╡ро┐роЯрпНроЯрпБ роЪрпЖройрпНро▒родро╛ роОройрпНрокродрпИрокрпН рокро╛ро░рпНроХрпНроХро╡рпБроорпН роХро▒рпНро▒рпБроХрпНроХрпКро│рпНро╡рпАро░рпНроХро│рпН.

роЗроирпНрод рокро╛роЯродрпНродро┐ро▓рпН роиро╛роорпН роХро▒рпНро▒рпБроХрпНроХрпКро│рпНро│рокрпН рокрпЛро╡родрпБ:

* [роЬро┐ропрпЛроГрокрпЖройрпНро╕рпН роОройрпНро▒ро╛ро▓рпН роОройрпНрой](../../../../../3-transport/lessons/4-geofences)
* [роЬро┐ропрпЛроГрокрпЖройрпНро╕рпИ ро╡ро░рпИропро▒рпБроХрпНроХро╡рпБроорпН](../../../../../3-transport/lessons/4-geofences)
* [роЬро┐ропрпЛроГрокрпЖройрпНро╕рпБроХрпНроХрпБ роОродро┐ро░ро╛роХ рокрпБро│рпНро│ро┐роХро│рпИ роЪрпЛродро┐роХрпНроХро╡рпБроорпН](../../../../../3-transport/lessons/4-geofences)
* [роЪро░рпНро╡ро░рпНро▓рпЖро╕рпН роХрпЛроЯро┐ро▓рпН роЬро┐ропрпЛроГрокрпЖройрпНро╕рпИрокрпН рокропройрпНрокроЯрпБродрпНродро╡рпБроорпН](../../../../../3-transport/lessons/4-geofences)

> ЁЯЧС роЗроирпНрод родро┐роЯрпНроЯродрпНродро┐ройрпН роХроЯрпИроЪро┐ рокро╛роЯроорпН роЗродрпБ. роОройро╡рпЗ, роЗроирпНрод рокро╛роЯродрпНродрпИропрпБроорпН рокрогро┐ропрпИропрпБроорпН роорпБроЯро┐родрпНрод рокро┐ро▒роХрпБ, роЙроЩрпНроХро│рпН роХро┐ро│ро╡рпБроЯрпН роЪрпЗро╡рпИроХро│рпИ роЪрпБродрпНродроорпН роЪрпЖропрпНроп рооро▒роХрпНроХ ро╡рпЗрогрпНроЯро╛роорпН. рокрогро┐ропрпИ роорпБроЯро┐роХрпНроХ роЪрпЗро╡рпИроХро│рпН родрпЗро╡рпИрокрпНрокроЯрпБроорпН, роОройро╡рпЗ роорпБродро▓ро┐ро▓рпН роЕродрпИ роорпБроЯро┐роХрпНроХ роЙро▒рпБродро┐рокрпНрокроЯрпБродрпНродрпБроЩрпНроХро│рпН.
>
> [родро┐роЯрпНроЯродрпНродрпИ роЪрпБродрпНродроорпН роЪрпЖропрпНропрпБроорпН ро╡ро┤ро┐роХро╛роЯрпНроЯро┐](../../../clean-up.md) родрпЗро╡рпИропро╛ройро╛ро▓рпН роЗродрпИрокрпН рокро╛ро░рпНроХрпНроХро╡рпБроорпН.

## роЬро┐ропрпЛроГрокрпЖройрпНро╕рпН роОройрпНро▒ро╛ро▓рпН роОройрпНрой

роЬро┐ропрпЛроГрокрпЖройрпНро╕рпН роОройрпНрокродрпБ роТро░рпБ роЙрогрпНроорпИропро╛рой рокрпБро╡ро┐ропро┐ропро▓рпН рокроХрпБродро┐ропро┐ройрпН роХро▒рпНрокройрпИроЪрпН роЪрпБро▒рпНро▒рпБроЪрпНроЪрпБро╡ро░рпН. роЬро┐ропрпЛроГрокрпЖройрпНро╕рпН роТро░рпБ рокрпБро│рпНро│ро┐ рооро▒рпНро▒рпБроорпН роТро░рпБ роЖро░рпИ роЕроЯро┐рокрпНрокроЯрпИропро╛роХроХрпН роХрпКрогрпНроЯ ро╡роЯрпНроЯрооро╛роХ (роЙродро╛ро░рогрооро╛роХ роТро░рпБ роХроЯрпНроЯро┐роЯроорпН роЪрпБро▒рпНро▒ро┐ропрпБро│рпНро│ 100 роорпАроЯрпНроЯро░рпН роЕроХро▓рооро╛рой ро╡роЯрпНроЯроорпН) роЕро▓рпНро▓родрпБ роТро░рпБ рокро│рпНро│ро┐ роорогрпНроЯро▓роорпН, роироХро░ роОро▓рпНро▓рпИроХро│рпН, роЕро▓рпНро▓родрпБ рокро▓рпНроХро▓рпИроХрпНроХро┤роХроорпН роЕро▓рпНро▓родрпБ роЕро▓рпБро╡ро▓роХ ро╡ро│ро╛роХроорпН рокрпЛройрпНро▒ рокроХрпБродро┐ропрпИ роЙро│рпНро│роЯроХрпНроХро┐роп рокро╛ро│ро┐роХройро╛роХ ро╡ро░рпИропро▒рпБроХрпНроХрокрпНрокроЯро▓ро╛роорпН.

![Microsoft роиро┐ро▒рпБро╡ройроХрпН роХроЯрпИропрпИроЪрпН роЪрпБро▒рпНро▒ро┐ропрпБро│рпНро│ ро╡роЯрпНроЯ роЬро┐ропрпЛроГрокрпЖройрпНро╕рпН рооро▒рпНро▒рпБроорпН Microsoft роорпЗро▒рпНроХрпБ ро╡ро│ро╛роХродрпНродрпИроЪрпН роЪрпБро▒рпНро▒ро┐ропрпБро│рпНро│ рокро╛ро│ро┐роХройрпН роЬро┐ропрпЛроГрокрпЖройрпНро╕рпН](../../../../../translated_images/geofence-examples.172fbc534665769f6e1a1ddcf75e3b25183cd10354c80cc603ba44b635390e1a.ta.png)

> ЁЯТБ роирпАроЩрпНроХро│рпН роПро▒рпНроХройро╡рпЗ роЬро┐ропрпЛроГрокрпЖройрпНро╕рпИрокрпН рокропройрпНрокроЯрпБродрпНродро┐ропро┐ро░рпБроХрпНроХро▓ро╛роорпН. iOS роиро┐ройрпИро╡рпВроЯрпНроЯро▓рпН роЪрпЖропро▓ро┐ роЕро▓рпНро▓родрпБ Google Keep роорпВро▓роорпН роТро░рпБ роЗроЯродрпНродрпИ роЕроЯро┐рокрпНрокроЯрпИропро╛роХроХрпН роХрпКрогрпНроЯ роиро┐ройрпИро╡рпВроЯрпНроЯро▓рпИ роЕроорпИродрпНродро┐ро░рпБроирпНродро╛ро▓рпН, роирпАроЩрпНроХро│рпН роЬро┐ропрпЛроГрокрпЖройрпНро╕рпИрокрпН рокропройрпНрокроЯрпБродрпНродро┐ропро┐ро░рпБроХрпНроХро┐ро▒рпАро░рпНроХро│рпН. роЗроирпНрод роЪрпЖропро▓ро┐роХро│рпН роХрпКроЯрпБроХрпНроХрокрпНрокроЯрпНроЯ роЗроЯродрпНродрпИ роЕроЯро┐рокрпНрокроЯрпИропро╛роХроХрпН роХрпКрогрпНроЯрпБ роЬро┐ропрпЛроГрокрпЖройрпНро╕рпИ роЕроорпИродрпНродрпБ, роЙроЩрпНроХро│рпН рокрпЛройрпН роЬро┐ропрпЛроГрокрпЖройрпНро╕ро┐ро▓рпН роирпБро┤рпИроирпНродро╡рпБроЯройрпН роЙроЩрпНроХро│рпИ роОроЪрпНроЪро░ро┐роХрпНроХро┐ройрпНро▒рой.

роЬро┐ропрпЛроГрокрпЖройрпНро╕ро┐ройрпН роЙро│рпНро│рпЗ роЕро▓рпНро▓родрпБ ро╡рпЖро│ро┐ропрпЗ роТро░рпБ ро╡ро╛роХройроорпН роЙро│рпНро│родро╛ роОройрпНрокродрпИ роЕро▒ро┐роп рокро▓ роХро╛ро░рогроЩрпНроХро│рпН роЙро│рпНро│рой:

* роЗро▒роХрпНроХрпБро╡родро▒рпНроХро╛рой родропро╛ро░ро┐рокрпНрокрпБ - роТро░рпБ ро╡ро╛роХройроорпН родро│родрпНродро┐ро▓рпН ро╡роирпНродрпБро╡ро┐роЯрпНроЯродрпБ роОройрпНрокродрпИ роЕро▒ро┐роп роТро░рпБ роЕро▒ро┐ро╡ро┐рокрпНрокрпБ роХро┐роЯрпИрокрпНрокродрпБ роХрпБро┤рпБро╡ро┐ройро░рпИ ро╡ро╛роХройродрпНродрпИ роЗро▒роХрпНроХ родропро╛ро░ро╛роХ роЗро░рпБроХрпНроХ роЙродро╡рпБроХро┐ро▒родрпБ, роЗродройро╛ро▓рпН ро╡ро╛роХройродрпНродро┐ройрпН роХро╛родрпНродро┐ро░рпБрокрпНрокрпБ роирпЗро░роорпН роХрпБро▒рпИроХро┐ро▒родрпБ. роЗродрпБ роТро░рпБ роЯро┐ро░рпИро╡ро░рпБроХрпНроХрпБ роХрпБро▒рпИроирпНрод роХро╛родрпНродро┐ро░рпБрокрпНрокрпБ роирпЗро░родрпНродрпБроЯройрпН роТро░рпБ роиро╛ро│ро┐ро▓рпН роЕродро┐роХ роЯрпЖро▓ро┐ро╡ро░ро┐роХро│рпИроЪрпН роЪрпЖропрпНроп роЕройрпБроородро┐роХрпНроХро┐ро▒родрпБ.
* ро╡ро░ро┐ роЗрогроХрпНроХроорпН - роЪро┐ро▓ роиро╛роЯрпБроХро│рпН, роЙродро╛ро░рогрооро╛роХ роиро┐ропрпВроЪро┐ро▓ро╛роирпНродрпБ, роЯрпАроЪро▓рпН ро╡ро╛роХройроЩрпНроХро│рпБроХрпНроХрпБ рокрпКродрпБро╡ро┤ро┐роХро│ро┐ро▓рпН роороЯрпНроЯрпБроорпЗ ро╡ро╛роХрой роОроЯрпИропрпИ роЕроЯро┐рокрпНрокроЯрпИропро╛роХроХрпН роХрпКрогрпНроЯрпБ роЪро╛ро▓рпИ ро╡ро░ро┐роХро│рпИ ро╡роЪрпВро▓ро┐роХрпНроХро┐ройрпНро▒рой. роЬро┐ропрпЛроГрокрпЖройрпНро╕рпИрокрпН рокропройрпНрокроЯрпБродрпНродрпБро╡родро╛ро▓рпН, рокрогрпНрогрпИроХро│рпН роЕро▓рпНро▓родрпБ рооро░роХрпНроХроЯрпНроЯрпИроХро│рпН рокрпЛройрпНро▒ родро│роЩрпНроХро│ро┐ро▓рпН родройро┐рокрпНрокроЯрпНроЯ роЪро╛ро▓рпИроХро│ро┐ро▓рпН роЪрпЖро▓рпБродрпНродрокрпНрокроЯрпНроЯ роорпИро▓рпЗроЬрпН рооро▒рпНро▒рпБроорпН рокрпКродрпБро╡ро┤ро┐роХро│ро┐ро▓рпН роЪрпЖро▓рпБродрпНродрокрпНрокроЯрпНроЯ роорпИро▓рпЗроЬрпН роЖроХро┐ропро╡ро▒рпНро▒рпИ роХрогрпНроХро╛рогро┐роХрпНроХ роорпБроЯро┐ропрпБроорпН.
* родро┐ро░рпБроЯрпНроЯрпИ роХрогрпНроХро╛рогро┐родрпНродро▓рпН - роТро░рпБ ро╡ро╛роХройроорпН роТро░рпБ роХрпБро▒ро┐рокрпНрокро┐роЯрпНроЯ рокроХрпБродро┐ропро┐ро▓рпЗропрпЗ роЗро░рпБроХрпНроХ ро╡рпЗрогрпНроЯрпБроорпН, роЙродро╛ро░рогрооро╛роХ роТро░рпБ рокрогрпНрогрпИропро┐ро▓рпН, роЖройро╛ро▓рпН роЕродрпБ роЬро┐ропрпЛроГрокрпЖройрпНро╕рпИ ро╡ро┐роЯрпНроЯрпБ роЪрпЖройрпНро▒ро╛ро▓рпН, роЕродрпБ родро┐ро░рпБроЯрокрпНрокроЯрпНроЯро┐ро░рпБроХрпНроХро▓ро╛роорпН.
* роЗроЯ роЗрогроХрпНроХроорпН - ро╡рпЗро▓рпИ родро│роорпН, рокрогрпНрогрпИ роЕро▓рпНро▓родрпБ родрпКро┤ро┐ро▒рпНроЪро╛ро▓рпИ рокрпЛройрпНро▒ роЪро┐ро▓ рокроХрпБродро┐роХро│рпН роХрпБро▒ро┐рокрпНрокро┐роЯрпНроЯ ро╡ро╛роХройроЩрпНроХро│рпБроХрпНроХрпБ роЕройрпБроородро┐роХрпНроХрокрпНрокроЯро╛рооро▓рпН роЗро░рпБроХрпНроХро▓ро╛роорпН, роЙродро╛ро░рогрооро╛роХ роЪрпЖропро▒рпНроХрпИ роЙро░роЩрпНроХро│рпН рооро▒рпНро▒рпБроорпН рокрпВроЪрпНроЪро┐роХрпНроХрпКро▓рпНро▓ро┐роХро│рпН роХрпКрогрпНроЯ ро╡ро╛роХройроЩрпНроХро│рпИ роЖро░рпНроХро╛ройро┐роХрпН ро╡ро┐ро│рпИроЪрпНроЪро▓рпНроХро│рпИ ро╡ро│ро░рпНроХрпНроХрпБроорпН ро╡ропро▓рпНроХро│ро┐ро▓ро┐ро░рпБроирпНродрпБ ро╡ро┐ро▓роХрпНроХро┐ ро╡рпИроХрпНроХ ро╡рпЗрогрпНроЯрпБроорпН. роЬро┐ропрпЛроГрокрпЖройрпНро╕ро┐ро▓рпН роирпБро┤рпИроирпНродро╛ро▓рпН, ро╡ро╛роХройроорпН роЗрогроХрпНроХродрпНродро┐ро▒рпНроХрпБрокрпН рокрпБро▒роорпНрокро╛роХ роЙро│рпНро│родрпБ, роорпЗро▓рпБроорпН роЯро┐ро░рпИро╡ро░рпБроХрпНроХрпБ роЕро▒ро┐ро╡ро┐рокрпНрокрпБ ро╡ро┤роЩрпНроХро▓ро╛роорпН.

тЬЕ роЬро┐ропрпЛроГрокрпЖройрпНро╕рпИрокрпН рокропройрпНрокроЯрпБродрпНродрпБро╡родро▒рпНроХро╛рой рокро┐ро▒ ро╡ро┤ро┐роХро│рпИ роирпАроЩрпНроХро│рпН ропрпЛроЪро┐роХрпНроХ роорпБроЯро┐ропрпБрооро╛?

Azure Maps, роирпАроЩрпНроХро│рпН роХроЯроирпНрод рокро╛роЯродрпНродро┐ро▓рпН GPS родро░ро╡рпБроХро│рпИ роХро╛роЯрпНроЪро┐рокрпНрокроЯрпБродрпНрод рокропройрпНрокроЯрпБродрпНродро┐роп роЪрпЗро╡рпИ, роЬро┐ропрпЛроГрокрпЖройрпНро╕рпИ ро╡ро░рпИропро▒рпБроХрпНроХро╡рпБроорпН, рокро┐ройрпНройро░рпН роТро░рпБ рокрпБро│рпНро│ро┐ роЬро┐ропрпЛроГрокрпЖройрпНро╕ро┐ройрпН роЙро│рпНро│рпЗ роЕро▓рпНро▓родрпБ ро╡рпЖро│ро┐ропрпЗ роЙро│рпНро│родро╛ роОройрпНрокродрпИ роЪрпЛродро┐роХрпНроХро╡рпБроорпН роЕройрпБроородро┐роХрпНроХро┐ро▒родрпБ.

## роЬро┐ропрпЛроГрокрпЖройрпНро╕рпИ ро╡ро░рпИропро▒рпБроХрпНроХро╡рпБроорпН

роЬро┐ропрпЛроГрокрпЖройрпНро╕рпНроХро│рпН GeoJSON рокропройрпНрокроЯрпБродрпНродро┐ ро╡ро░рпИропро▒рпБроХрпНроХрокрпНрокроЯрпБроХро┐ройрпНро▒рой, роХроЯроирпНрод рокро╛роЯродрпНродро┐ро▓рпН ро╡ро░рпИрокроЯродрпНродро┐ро▓рпН роЪрпЗро░рпНроХрпНроХрокрпНрокроЯрпНроЯ рокрпБро│рпНро│ро┐роХро│рпБроЯройрпН роТро░рпЗ рооро╛родро┐ро░ро┐ропро╛ройродрпБ. роЗроирпНрод ро╡ро┤роХрпНроХро┐ро▓рпН, `Point` роородро┐рокрпНрокрпБроХро│ро┐ройрпН `FeatureCollection` роЖроХ роЗро▓рпНро▓ро╛рооро▓рпН, роЗродрпБ `Polygon` роХрпКрогрпНроЯ `FeatureCollection` роЖроХ роЗро░рпБроХрпНроХрпБроорпН.

```json
{
   "type": "FeatureCollection",
   "features": [
     {
       "type": "Feature",
       "geometry": {
         "type": "Polygon",
         "coordinates": [
           [
             [
               -122.13393688201903,
               47.63829579223815
             ],
             [
               -122.13389128446579,
               47.63782047131512
             ],
             [
               -122.13240802288054,
               47.63783312249837
             ],
             [
               -122.13238388299942,
               47.63829037035086
             ],
             [
               -122.13393688201903,
               47.63829579223815
             ]
           ]
         ]
       },
       "properties": {
         "geometryId": "1"
       }
     }
   ]
}
```

рокро╛ро│ро┐роХройро┐ро▓рпН роЙро│рпНро│ роТро╡рпНро╡рпКро░рпБ рокрпБро│рпНро│ро┐ропрпБроорпН роТро░рпБ роирпАро│ро╡ро┐ропро▓рпН, роЕроХро▓ро╡ро┐ропро▓рпН роЬрпЛроЯро┐ роЖроХ ро╡ро░рпИропро▒рпБроХрпНроХрокрпНрокроЯрпБроХро┐ро▒родрпБ, роорпЗро▓рпБроорпН роЗроирпНрод рокрпБро│рпНро│ро┐роХро│рпН роТро░рпБ ро╡ро░ро┐роЪрпИропро┐ро▓рпН `coordinates` роОрой роЕроорпИроХрпНроХрокрпНрокроЯрпБроХро┐ройрпНро▒рой. роХроЯроирпНрод рокро╛роЯродрпНродро┐ро▓рпН `Point`-роЗро▓рпН, `coordinates` роОройрпНрокродрпБ роЕроХро▓ро╡ро┐ропро▓рпН рооро▒рпНро▒рпБроорпН роирпАро│ро╡ро┐ропро▓рпН роЖроХро┐роп 2 роородро┐рокрпНрокрпБроХро│рпИ роХрпКрогрпНроЯ роТро░рпБ ро╡ро░ро┐роЪрпИропро╛роХ роЗро░рпБроирпНродродрпБ, `Polygon`-роЗро▓рпН роЗродрпБ 2 роородро┐рокрпНрокрпБроХро│рпИ роХрпКрогрпНроЯ ро╡ро░ро┐роЪрпИроХро│ро┐ройрпН ро╡ро░ро┐роЪрпИропро╛роХ роЗро░рпБроХрпНроХрпБроорпН, роирпАро│ро╡ро┐ропро▓рпН, роЕроХро▓ро╡ро┐ропро▓рпН.

> ЁЯТБ роиро┐ройрпИро╡ро┐ро▓рпН роХрпКро│рпНро│рпБроЩрпНроХро│рпН, GeoJSON рокрпБро│рпНро│ро┐роХро│рпБроХрпНроХрпБ `longitude, latitude` рокропройрпНрокроЯрпБродрпНродрпБроХро┐ро▒родрпБ, `latitude, longitude` роЕро▓рпНро▓.

рокро╛ро│ро┐роХройрпН роХрпЛро░рпНроЯро┐ройрпЗроЯрпНроХро│рпН ро╡ро░ро┐роЪрпИропро┐ро▓рпН рокро╛ро│ро┐роХройро┐ро▓рпН роЙро│рпНро│ рокрпБро│рпНро│ро┐роХро│ро┐ройрпН роОрогрпНрогро┐роХрпНроХрпИропрпИ ро╡ро┐роЯ 1 роЕродро┐роХрооро╛рой роЙро│рпНро│рпАроЯрпБ роЗро░рпБроХрпНроХрпБроорпН, роХроЯрпИроЪро┐ роЙро│рпНро│рпАроЯрпБ роорпБродро▓рпН рокрпБро│рпНро│ро┐ропрпБроЯройрпН роТро░рпЗ рооро╛родро┐ро░ро┐ропро╛ройродрпБ, рокро╛ро│ро┐роХройрпИ роорпВроЯрпБроХро┐ро▒родрпБ. роЙродро╛ро░рогрооро╛роХ, роТро░рпБ роЪрпЖро╡рпНро╡роХродрпНродро┐ро▒рпНроХрпБ 5 рокрпБро│рпНро│ро┐роХро│рпН роЗро░рпБроХрпНроХрпБроорпН.

![роХрпЛро░рпНроЯро┐ройрпЗроЯрпНроХро│рпБроЯройрпН роТро░рпБ роЪрпЖро╡рпНро╡роХроорпН](../../../../../translated_images/polygon-points.302193da381cb415f46c2c7a98496ee4be05d6c73d21238a89721ad93e121233.ta.png)

роорпЗро▓рпЗ роЙро│рпНро│ рокроЯродрпНродро┐ро▓рпН, роТро░рпБ роЪрпЖро╡рпНро╡роХроорпН роЙро│рпНро│родрпБ. рокро╛ро│ро┐роХройрпН роХрпЛро░рпНроЯро┐ройрпЗроЯрпНроХро│рпН роорпЗро▓рпН роЗроЯродрпБ рокроХрпНроХроорпН 47,-122-ро▓рпН родрпКроЯроЩрпНроХро┐, ро╡ро▓родрпБ рокроХрпНроХроорпН 47,-121-роХрпНроХрпБ роироХро░рпНроХро┐ро▒родрпБ, рокро┐ройрпНройро░рпН роХрпАро┤рпЗ 46,-121-роХрпНроХрпБ роироХро░рпНроХро┐ро▒родрпБ, рокро┐ройрпНройро░рпН ро╡ро▓родрпБ рокроХрпНроХроорпН 46,-122-роХрпНроХрпБ роироХро░рпНроХро┐ро▒родрпБ, рокро┐ройрпНройро░рпН родрпКроЯроХрпНроХ рокрпБро│рпНро│ро┐роХрпНроХрпБ роорпАрогрпНроЯрпБроорпН роорпЗро▓рпЗ 47,-122-роХрпНроХрпБ роироХро░рпНроХро┐ро▒родрпБ. роЗродрпБ рокро╛ро│ро┐роХройрпБроХрпНроХрпБ 5 рокрпБро│рпНро│ро┐роХро│рпИ ро╡ро┤роЩрпНроХрпБроХро┐ро▒родрпБ - роорпЗро▓рпН роЗроЯродрпБ рокроХрпНроХроорпН, роорпЗро▓рпН ро╡ро▓родрпБ рокроХрпНроХроорпН, роХрпАро┤рпН ро╡ро▓родрпБ рокроХрпНроХроорпН, роХрпАро┤рпН роЗроЯродрпБ рокроХрпНроХроорпН, рокро┐ройрпНройро░рпН роЕродрпИ роорпВроЯрпБро╡родро▒рпНроХрпБ роорпЗро▓рпН роЗроЯродрпБ рокроХрпНроХроорпН.

тЬЕ роЙроЩрпНроХро│рпН ро╡рпАроЯрпБ роЕро▓рпНро▓родрпБ рокро│рпНро│ро┐ропрпИроЪрпН роЪрпБро▒рпНро▒ро┐ роТро░рпБ GeoJSON рокро╛ро│ро┐роХройрпИ роЙро░рпБро╡ро╛роХрпНроХ роорпБропро▒рпНроЪро┐роХрпНроХро╡рпБроорпН. [GeoJSON.io](https://geojson.io/) рокрпЛройрпНро▒ роТро░рпБ роХро░рпБро╡ро┐ропрпИрокрпН рокропройрпНрокроЯрпБродрпНродро╡рпБроорпН.

### рокрогро┐роХро│рпН - роЬро┐ропрпЛроГрокрпЖройрпНро╕рпИ ро╡ро░рпИропро▒рпБроХрпНроХро╡рпБроорпН

Azure Maps-ро▓рпН роЬро┐ропрпЛроГрокрпЖройрпНро╕рпИрокрпН рокропройрпНрокроЯрпБродрпНрод, роорпБродро▓ро┐ро▓рпН роЕродрпИ роЙроЩрпНроХро│рпН Azure Maps роХрогроХрпНроХро┐ро▓рпН рокродро┐ро╡рпЗро▒рпНро▒ ро╡рпЗрогрпНроЯрпБроорпН. рокродро┐ро╡рпЗро▒рпНро▒рокрпНрокроЯрпНроЯ рокро┐ро▒роХрпБ, роЬро┐ропрпЛроГрокрпЖройрпНро╕рпБроХрпНроХрпБ роОродро┐ро░ро╛роХ роТро░рпБ рокрпБро│рпНро│ро┐ропрпИ роЪрпЛродро┐роХрпНроХ роирпАроЩрпНроХро│рпН рокропройрпНрокроЯрпБродрпНродроХрпНроХрпВроЯро┐роп роТро░рпБ родройро┐родрпНродрпБро╡рооро╛рой роРроЯро┐ роХро┐роЯрпИроХрпНроХрпБроорпН. Azure Maps-роХрпНроХрпБ роЬро┐ропрпЛроГрокрпЖройрпНро╕рпНроХро│рпИ рокродро┐ро╡рпЗро▒рпНро▒, роирпАроЩрпНроХро│рпН maps web API-роР рокропройрпНрокроЯрпБродрпНрод ро╡рпЗрогрпНроЯрпБроорпН. [curl](https://curl.se) роОройрокрпНрокроЯрпБроорпН роТро░рпБ роХро░рпБро╡ро┐ропрпИрокрпН рокропройрпНрокроЯрпБродрпНродро┐ Azure Maps web API-роР роЕро┤рпИроХрпНроХро▓ро╛роорпН.

> ЁЯОУ Curl роОройрпНрокродрпБ ро╡ро▓рпИ роорпБроЯрпБроХрпНроХроЩрпНроХро│рпБроХрпНроХрпБ роОродро┐ро░ро╛роХ роХрпЛро░ро┐роХрпНроХрпИроХро│рпИроЪрпН роЪрпЖропрпНроп роТро░рпБ роХроЯрпНроЯро│рпИроХро│рпН роХро░рпБро╡ро┐.

1. роирпАроЩрпНроХро│рпН Linux, macOS роЕро▓рпНро▓родрпБ роЪроорпАрокродрпНродро┐роп Windows 10 рокродро┐рокрпНрокрпИрокрпН рокропройрпНрокроЯрпБродрпНродро┐ройро╛ро▓рпН, роирпАроЩрпНроХро│рпН роПро▒рпНроХройро╡рпЗ curl роиро┐ро▒рпБро╡ро┐ропро┐ро░рпБроХрпНроХро▓ро╛роорпН. роЙроЩрпНроХро│рпН роЯрпЖро░рпНрооро┐ройро▓рпН роЕро▓рпНро▓родрпБ роХроЯрпНроЯро│рпИ ро╡ро░ро┐ропро┐ро▓рпН рокро┐ройрпНро╡ро░рпБроорпН роХроЯрпНроЯро│рпИропрпИ роЗропроХрпНроХро┐ роЪро░ро┐рокро╛ро░рпНроХрпНроХро╡рпБроорпН:

    ```sh
    curl --version
    ```

    curl рокродро┐рокрпНрокрпБродрпН родроХро╡ро▓рпИ роирпАроЩрпНроХро│рпН роХро╛рогро╡ро┐ро▓рпНро▓рпИ роОройрпНро▒ро╛ро▓рпН, [curl downloads page](https://curl.se/download.html) роорпВро▓роорпН роЕродрпИ роиро┐ро▒рпБро╡ ро╡рпЗрогрпНроЯрпБроорпН.

    > ЁЯТБ роирпАроЩрпНроХро│рпН Postman-ро▓рпН роЕройрпБрокро╡роорпН ро╡ро╛ропрпНроирпНродро╡ро░ро╛роХ роЗро░рпБроирпНродро╛ро▓рпН, роирпАроЩрпНроХро│рпН ро╡ро┐ро░рпБроорпНрокро┐ройро╛ро▓рпН роЕродрпИ рооро╛ро▒рпНро▒ро╛роХрокрпН рокропройрпНрокроЯрпБродрпНродро▓ро╛роорпН.

1. рокро╛ро│ро┐роХройрпИ роЙро│рпНро│роЯроХрпНроХро┐роп роТро░рпБ GeoJSON роХрпЛрокрпНрокрпИ роЙро░рпБро╡ро╛роХрпНроХро╡рпБроорпН. роЙроЩрпНроХро│рпН GPS роЪрпЖройрпНроЪро╛ро░рпИрокрпН рокропройрпНрокроЯрпБродрпНродро┐ роЗродрпИ роЪрпЛродро┐роХрпНроХрокрпН рокрпЛроХро┐ро▒рпАро░рпНроХро│рпН, роОройро╡рпЗ роЙроЩрпНроХро│рпН родро▒рпНрокрпЛродрпИроп роЗроЯродрпНродрпИроЪрпН роЪрпБро▒рпНро▒ро┐ роТро░рпБ рокро╛ро│ро┐роХройрпИ роЙро░рпБро╡ро╛роХрпНроХро╡рпБроорпН. роорпЗро▓рпЗ роХрпКроЯрпБроХрпНроХрокрпНрокроЯрпНроЯ GeoJSON роОроЯрпБродрпНродрпБроХрпНроХро╛роЯрпНроЯрпИродрпН родро┐ро░рпБродрпНродрпБро╡родройрпН роорпВро▓роорпН роЕро▓рпНро▓родрпБ [GeoJSON.io](https://geojson.io/) рокрпЛройрпНро▒ роТро░рпБ роХро░рпБро╡ро┐ропрпИрокрпН рокропройрпНрокроЯрпБродрпНродро┐ роирпАроЩрпНроХро│рпН роЗродрпИ роХрпИропрпЗроЯрпБ роорпВро▓роорпН роЙро░рпБро╡ро╛роХрпНроХро▓ро╛роорпН.

    GeoJSON роТро░рпБ `FeatureCollection`-роР роЙро│рпНро│роЯроХрпНроХ ро╡рпЗрогрпНроЯрпБроорпН, роЗродрпБ `Polygon` ро╡роХрпИ `geometry` роХрпКрогрпНроЯ роТро░рпБ `Feature`-роР роХрпКрогрпНроЯро┐ро░рпБроХрпНроХ ро╡рпЗрогрпНроЯрпБроорпН.

    роирпАроЩрпНроХро│рпН **роХроЯро┐ройрооро╛роХ** `geometry` роЙро░рпБрокрпНрокроЯро┐ропро┐ройрпН роЕродрпЗ роиро┐ро▓рпИроорпИропро┐ро▓рпН `properties` роЙро░рпБрокрпНрокроЯро┐ропрпИроЪрпН роЪрпЗро░рпНроХрпНроХ ро╡рпЗрогрпНроЯрпБроорпН, роорпЗро▓рпБроорпН роЗродрпБ `geometryId`-роР роХрпКрогрпНроЯро┐ро░рпБроХрпНроХ ро╡рпЗрогрпНроЯрпБроорпН:

    ```json
    "properties": {
        "geometryId": "1"
    }
    ```

    [GeoJSON.io](https://geojson.io/) рокропройрпНрокроЯрпБродрпНродро┐ройро╛ро▓рпН, JSON роХрпЛрокрпНрокрпИрокрпН рокродро┐ро╡ро┐ро▒роХрпНроХро┐роп рокро┐ро▒роХрпБ роЕро▓рпНро▓родрпБ роЪрпЖропро▓ро┐ропро┐ро▓рпН JSON родро┐ро░рпБродрпНродро┐ропро┐ро▓рпН, роирпАроЩрпНроХро│рпН роХрпИропрпЗроЯрпБ роорпВро▓роорпН роЗроирпНрод роЙро░рпБрокрпНрокроЯро┐ропрпИ роХро╛ро▓ро┐ропро╛рой `properties` роЙро░рпБрокрпНрокроЯро┐ропро┐ро▓рпН роЪрпЗро░рпНроХрпНроХ ро╡рпЗрогрпНроЯрпБроорпН.

    роЗроирпНрод `geometryId` роЗроирпНрод роХрпЛрокрпНрокро┐ро▓рпН родройро┐родрпНродрпБро╡рооро╛роХ роЗро░рпБроХрпНроХ ро╡рпЗрогрпНроЯрпБроорпН. рокро▓ `Features`-роХро│ро╛роХ рокро▓ роЬро┐ропрпЛроГрокрпЖройрпНро╕рпНроХро│рпИ роТро░рпЗ GeoJSON роХрпЛрокрпНрокро┐ро▓рпН `FeatureCollection`-роЗро▓рпН рокродро┐ро╡рпЗро▒рпНро▒ро▓ро╛роорпН, роТро╡рпНро╡рпКройрпНро▒рпБроорпН ро╡рпЖро╡рпНро╡рпЗро▒рпБ `geometryId` роХрпКрогрпНроЯро┐ро░рпБроХрпНроХ ро╡рпЗрогрпНроЯрпБроорпН. рокро╛ро│ро┐роХройрпНроХро│рпН ро╡рпЖро╡рпНро╡рпЗро▒рпБ роХрпЛрокрпНрокро┐ро▓рпН ро╡рпЖро╡рпНро╡рпЗро▒рпБ роирпЗро░родрпНродро┐ро▓рпН рокродро┐ро╡рпЗро▒рпНро▒рокрпНрокроЯрпНроЯро╛ро▓рпН роТро░рпЗ `geometryId` роХрпКрогрпНроЯро┐ро░рпБроХрпНроХро▓ро╛роорпН.

1. роЗроирпНрод роХрпЛрокрпНрокрпИ `geofence.json` роОрой роЪрпЗрооро┐роХрпНроХро╡рпБроорпН, роорпЗро▓рпБроорпН роЙроЩрпНроХро│рпН роЯрпЖро░рпНрооро┐ройро▓рпН роЕро▓рпНро▓родрпБ роХройрпНроЪрпЛро▓ро┐ро▓рпН роЗродрпБ роЪрпЗрооро┐роХрпНроХрокрпНрокроЯрпНроЯ роЗроЯродрпНродро┐ро▒рпНроХрпБ роЪрпЖро▓рпНро▓ро╡рпБроорпН.

1. роЬро┐ропрпЛроГрокрпЖройрпНро╕рпИ роЙро░рпБро╡ро╛роХрпНроХ рокро┐ройрпНро╡ро░рпБроорпН curl роХроЯрпНроЯро│рпИропрпИ роЗропроХрпНроХро╡рпБроорпН:

    ```sh
    curl --request POST 'https://atlas.microsoft.com/mapData/upload?api-version=1.0&dataFormat=geojson&subscription-key=<subscription_key>' \
         --header 'Content-Type: application/json' \
         --include \
         --data @geofence.json
    ```

    URL-роЗро▓рпН `<subscription_key>` роР роЙроЩрпНроХро│рпН Azure Maps роХрогроХрпНроХро┐ройрпН API ро╡ро┐роЪрпИропрпБроЯройрпН рооро╛ро▒рпНро▒ро╡рпБроорпН.

    URL `https://atlas.microsoft.com/mapData/upload` API роорпВро▓роорпН ро╡ро░рпИрокроЯ родро░ро╡рпБроХро│рпИ рокродро┐ро╡рпЗро▒рпНро▒ рокропройрпНрокроЯрпБродрпНродрокрпНрокроЯрпБроХро┐ро▒родрпБ. роЕро┤рпИрокрпНрокрпБ `api-version` роЕро│ро╡рпБро░рпБро╡рпИроЪрпН роЪрпЗро░рпНроХрпНроХро┐ро▒родрпБ, роЗродрпБ Azure Maps API-ропрпИ роОроирпНрод рокродро┐рокрпНрокрпИрокрпН рокропройрпНрокроЯрпБродрпНрод ро╡рпЗрогрпНроЯрпБроорпН роОройрпНрокродрпИ роХрпБро▒ро┐рокрпНрокро┐роЯрпБроХро┐ро▒родрпБ. роЗродрпБ API-ропрпИ роХро╛ро▓родрпНродро┐ро▒рпНроХрпЗро▒рпНрок рооро╛ро▒рпНро▒ роЕройрпБроородро┐роХрпНроХро┐ро▒родрпБ, роЖройро╛ро▓рпН рокро┐ройрпНродроЩрпНроХ роЗрогроХрпНроХродрпНродрпБроЯройрпН. рокродро┐ро╡рпЗро▒рпНро▒рокрпНрокроЯрпБроорпН родро░ ро╡роЯро┐ро╡роорпН `geojson` роЖроХ роЕроорпИроХрпНроХрокрпНрокроЯрпНроЯрпБро│рпНро│родрпБ.

    роЗродрпБ POST роХрпЛро░ро┐роХрпНроХрпИропрпИ рокродро┐ро╡рпЗро▒рпНро▒ API-роХрпНроХрпБ роЗропроХрпНроХрпБроорпН рооро▒рпНро▒рпБроорпН `location` роОройрокрпНрокроЯрпБроорпН родро▓рпИрокрпНрокро┐ройрпН рокроЯрпНроЯро┐ропро▓рпБроЯройрпН рокродро┐ро▓рпНроХро│рпИродрпН родро┐ро░рпБрокрпНрокрпБроорпН.

    ```output
    content-type: application/json
    location: https://us.atlas.microsoft.com/mapData/operations/1560ced6-3a80-46f2-84b2-5b1531820eab?api-version=1.0
    x-ms-azuremaps-region: West US 2
    x-content-type-options: nosniff
    strict-transport-security: max-age=31536000; includeSubDomains
    x-cache: CONFIG_NOCACHE
    date: Sat, 22 May 2021 21:34:57 GMT
    content-length: 0
    ```

    > ЁЯОУ роТро░рпБ ро╡ро▓рпИ роорпБроЯрпБроХрпНроХродрпНродрпИ роЕро┤рпИроХрпНроХрпБроорпН рокрпЛродрпБ, роирпАроЩрпНроХро│рпН `?` роРроЪрпН роЪрпЗро░рпНродрпНродрпБ `key=value` роОрой роорпБроХрпНроХро┐роп роородро┐рокрпНрокрпБроХро│рпИроЪрпН роЪрпЗро░рпНродрпНродрпБ, `&` роорпВро▓роорпН роорпБроХрпНроХро┐роп роородро┐рокрпНрокрпБроХро│рпИрокрпН рокро┐ро░ро┐родрпНродрпБ роЕро┤рпИрокрпНрокрпБ роЕро│ро╡рпБро░рпБроХрпНроХро│рпИроЪрпН роЪрпЗро░рпНроХрпНроХро▓ро╛роорпН.

1. Azure Maps роЙроЯройроЯро┐ропро╛роХ роЗродрпИ роЪрпЖропро▓ро╛роХрпНроХро╛родрпБ, роОройро╡рпЗ рокродро┐ро╡рпЗро▒рпНро▒ роХрпЛро░ро┐роХрпНроХрпИ роорпБроЯро┐роирпНродродро╛ роОройрпНрокродрпИ `location` родро▓рпИрокрпНрокро┐ро▓рпН роХрпКроЯрпБроХрпНроХрокрпНрокроЯрпНроЯ URL-роРрокрпН рокропройрпНрокроЯрпБродрпНродро┐ роЪро░ро┐рокро╛ро░рпНроХрпНроХ ро╡рпЗрогрпНроЯрпБроорпН. роЗроирпНрод `location` URL-роХрпНроХрпБ роЙроЩрпНроХро│рпН роЪроирпНродро╛ ро╡ро┐роЪрпИропрпИроЪрпН роЪрпЗро░рпНроХрпНроХ ро╡рпЗрогрпНроЯрпБроорпН, `&subscription-key=<subscription_key>` роР URL-ройрпН роЗро▒рпБродро┐ропро┐ро▓рпН роЪрпЗро░рпНродрпНродрпБ, `<subscription_key>` роР роЙроЩрпНроХро│рпН Azure Maps роХрогроХрпНроХро┐ройрпН API ро╡ро┐роЪрпИропрпБроЯройрпН рооро╛ро▒рпНро▒ро╡рпБроорпН. рокро┐ройрпНро╡ро░рпБроорпН роХроЯрпНроЯро│рпИропрпИ роЗропроХрпНроХро╡рпБроорпН:

    ```sh
    curl --request GET '<location>&subscription-key=<subscription_key>'
    ```

    `<location>` роР `location` родро▓рпИрокрпНрокро┐ройрпН роородро┐рокрпНрокрпБроЯройрпН рооро╛ро▒рпНро▒ро╡рпБроорпН, `<subscription_key>` роР роЙроЩрпНроХро│рпН Azure Maps роХрогроХрпНроХро┐ройрпН API ро╡ро┐роЪрпИропрпБроЯройрпН рооро╛ро▒рпНро▒ро╡рпБроорпН.

1. рокродро┐ро▓ро┐ро▓рпН `status` роородро┐рокрпНрокрпИроЪрпН роЪро░ро┐рокро╛ро░рпНроХрпНроХро╡рпБроорпН. роЗродрпБ `Succeeded` роЖроХ роЗро▓рпНро▓рпИропрпЖройро┐ро▓рпН, роТро░рпБ роиро┐рооро┐роЯроорпН роХро╛родрпНродро┐ро░рпБроирпНродрпБ роорпАрогрпНроЯрпБроорпН роорпБропро▒рпНроЪро┐роХрпНроХро╡рпБроорпН.

1. `status` `Succeeded` роЖроХ ро╡роирпНродро╡рпБроЯройрпН, рокродро┐ро▓ро┐ро▓рпН роЙро│рпНро│ `resourceLocation` роРрокрпН рокро╛ро░рпБроЩрпНроХро│рпН. роЗродрпБ GeoJSON рокрпКро░рпБро│рпБроХрпНроХро╛рой родройро┐родрпНродрпБро╡рооро╛рой роРроЯро┐ (UDID) рокро▒рпНро▒ро┐роп ро╡ро┐ро╡ро░роЩрпНроХро│рпИ роЙро│рпНро│роЯроХрпНроХро┐ропродрпБ. UDID роОройрпНрокродрпБ `metadata/`-роХрпНроХрпБ рокро┐ро▒роХрпБ роЙро│рпНро│ роородро┐рокрпНрокрпБ, роорпЗро▓рпБроорпН `api-version` роР роЙро│рпНро│роЯроХрпНроХро╛родрпБ. роЙродро╛ро░рогрооро╛роХ, `resourceLocation`:

    ```json
    {
      "resourceLocation": "https://us.atlas.microsoft.com/mapData/metadata/7c3776eb-da87-4c52-ae83-caadf980323a?api-version=1.0"
    }
    ```

    роЗро░рпБроирпНродро╛ро▓рпН, UDID `7c3776eb-da87-4c52-ae83-caadf980323a` роЖроХ роЗро░рпБроХрпНроХрпБроорпН.

    роЗроирпНрод UDID-роР роТро░рпБ роироХро▓рпИ ро╡рпИродрпНродро┐ро░рпБроЩрпНроХро│рпН, роЬро┐ропрпЛроГрокрпЖройрпНро╕рпИ роЪрпЛродро┐роХрпНроХ роЗродрпИ роирпАроЩрпНроХро│рпН родрпЗро╡рпИрокрпНрокроЯрпБроорпН.

## роЬро┐ропрпЛроГрокрпЖройрпНро╕рпБроХрпНроХрпБ роОродро┐ро░ро╛роХ рокрпБро│рпНро│ро┐роХро│рпИ роЪрпЛродро┐роХрпНроХро╡рпБроорпН

рокро╛ро│ро┐роХройрпН Azure Maps-роХрпНроХрпБ рокродро┐ро╡рпЗро▒рпНро▒рокрпНрокроЯрпНроЯ рокро┐ро▒роХрпБ, роТро░рпБ рокрпБро│рпНро│ро┐ роЬро┐ропрпЛроГрокрпЖройрпНро╕ро┐ройрпН роЙро│рпНро│рпЗ роЕро▓рпНро▓родрпБ ро╡рпЖро│ро┐ропрпЗ роЙро│рпНро│родро╛ роОройрпНрокродрпИ роирпАроЩрпНроХро│рпН роЪрпЛродро┐роХрпНроХро▓ро╛роорпН. роЬро┐ропрпЛроГрокрпЖройрпНро╕ро┐ройрпН UDID рооро▒рпНро▒рпБроорпН роЪрпЛродро┐роХрпНроХ ро╡рпЗрогрпНроЯро┐роп рокрпБро│рпНро│ро┐ропро┐ройрпН роЕроХро▓ро╡ро┐ропро▓рпН рооро▒рпНро▒рпБроорпН роирпАро│ро╡ро┐ропро▓рпН роЖроХро┐ропро╡ро▒рпНро▒рпИроЪрпН роЪрпЗро░рпНродрпНродрпБ роТро░рпБ ро╡ро▓рпИ API роХрпЛро░ро┐роХрпНроХрпИропрпИроЪрпН роЪрпЖропрпНроп ро╡рпЗрогрпНроЯрпБроорпН.

роЗроирпНрод роХрпЛро░ро┐роХрпНроХрпИропрпИроЪрпН роЪрпЖропрпНропрпБроорпНрокрпЛродрпБ, `searchBuffer` роОройрокрпНрокроЯрпБроорпН роТро░рпБ роородро┐рокрпНрокрпИропрпБроорпН роЪрпЗро░рпНроХрпНроХро▓ро╛роорпН. роЗродрпБ роорпБроЯро┐ро╡рпБроХро│рпИ родро┐ро░рпБрокрпНрокрпБроорпНрокрпЛродрпБ Maps API роОро╡рпНро╡ро│ро╡рпБ родрпБро▓рпНро▓ро┐ропрооро╛роХ роЗро░рпБроХрпНроХ ро╡рпЗрогрпНроЯрпБроорпН роОройрпНрокродрпИроЪрпН роЪрпКро▓рпНроХро┐ро▒родрпБ. роХро╛ро░рогроорпН GPS роЪро░ро┐ропро╛роХ родрпБро▓рпНро▓ро┐ропрооро╛роХ роЗро▓рпНро▓рпИ, роорпЗро▓рпБроорпН роЗроЯроЩрпНроХро│рпН роЪро┐ро▓ роорпАроЯрпНроЯро░рпНроХро│рпН роЕро▓рпНро▓родрпБ роЕродро▒рпНроХрпБ роорпЗро▓рпН родро╡ро▒ро╛роХ роЗро░рпБроХрпНроХро▓ро╛роорпН. родрпЗроЯро▓рпН рокроГрокро░рпБроХрпНроХро╛рой роЗропро▓рпНрокро╛рой роородро┐рокрпНрокрпБ 50m роЖроХрпБроорпН, роЖройро╛ро▓рпН роирпАроЩрпНроХро│рпН 0m роорпБродро▓рпН 500m ро╡ро░рпИ роородро┐рокрпНрокрпБроХро│рпИ роЕроорпИроХрпНроХро▓ро╛роорпН.

API роЕро┤рпИрокрпНрокро┐ро▓ро┐ро░рпБроирпНродрпБ роорпБроЯро┐ро╡рпБроХро│рпН родро┐ро░рпБроорпНрокрпБроорпНрокрпЛродрпБ, роорпБроЯро┐ро╡рпБроХро│ро┐ро▓рпН роТро░рпБ рокроХрпБродро┐ `distance` роЖроХрпБроорпН, роЗродрпБ роЬро┐ропрпЛроГрокрпЖройрпНро╕ро┐ройрпН ро╡ро┐ро│ро┐роорпНрокро┐ро▓рпН роЙро│рпНро│ рооро┐роХ роЕро░рпБроХро┐ро▓рпБро│рпНро│ рокрпБро│рпНро│ро┐роХрпНроХрпБ роЕро│ро╡ро┐роЯрокрпНрокроЯрпБроХро┐ро▒родрпБ. рокрпБро│рпНро│ро┐ роЬро┐ропрпЛроГрокрпЖройрпНро╕ро┐ройрпН ро╡рпЖро│ро┐ропрпЗ роЗро░рпБроирпНродро╛ро▓рпН, роородро┐рокрпНрокрпБ роирпЗро░рпНроорпИропро╛роХ роЗро░рпБроХрпНроХрпБроорпН, роЬро┐ропрпЛроГрокрпЖройрпНро╕ро┐ройрпН роЙро│рпНро│рпЗ роЗро░рпБроирпНродро╛ро▓рпН, роородро┐рокрпНрокрпБ роОродро┐ро░рпНрооро▒рпИропро╛роХ роЗро░рпБроХрпНроХрпБроорпН. роЗроирпНрод родрпВро░роорпН родрпЗроЯро▓рпН рокроГрокро░рпБроХрпНроХрпБ роХрпБро▒рпИро╡ро╛роХ роЗро░рпБроирпНродро╛ро▓рпН, роЙрогрпНроорпИропро╛рой родрпВро░роорпН роорпАроЯрпНроЯро░рпНроХро│ро┐ро▓рпН родро┐ро░рпБроорпНрокрпБроорпН, роЗро▓рпНро▓рпИропрпЖройро┐ро▓рпН роородро┐рокрпНрокрпБ 999 роЕро▓рпНро▓родрпБ -999 роЖроХ роЗро░рпБроХрпНроХрпБроорпН. 999 роОройрпНрокродрпБ рокрпБро│рпНро│ро┐ родрпЗроЯро▓рпН рокроГрокро░рпБроХрпНроХрпБ ро╡рпЖро│ро┐ропрпЗ роЬро┐ропрпЛроГрокрпЖройрпНро╕ро┐ройрпН ро╡рпЖро│ро┐ропрпЗ роЙро│рпНро│родрпБ роОройрпНрокродрпИроХрпН роХрпБро▒ро┐роХрпНроХро┐ро▒родрпБ, -999 роОройрпНрокродрпБ рокрпБро│рпНро│ро┐ родрпЗроЯро▓рпН рокроГрокро░рпБроХрпНроХрпБ ро╡рпЖро│ро┐ропрпЗ роЬро┐ропрпЛроГрокрпЖройрпНро╕ро┐ройрпН роЙро│рпНро│рпЗ роЙро│рпНро│родрпБ роОройрпНрокродрпИроХрпН роХрпБро▒ро┐роХрпНроХро┐ро▒родрпБ.

![50m родрпЗроЯро▓рпН рокроГрокро░рпБроЯройрпН роЬро┐ропрпЛроГрокрпЖройрпНро╕рпН](../../../../../translated_images/search-buffer-and-distance.e6a79af3898183c7b2ef6fbf12271b8b34afd23969bb946962b1b18d3d2635e8.ta.png)

роорпЗро▓рпЗ роЙро│рпНро│ рокроЯродрпНродро┐ро▓рпН, роЬро┐ропрпЛроГрокрпЖройрпНро╕рпБроХрпНроХрпБ 50m родрпЗроЯро▓рпН рокроГрокро░рпН роЙро│рпНро│родрпБ.

* роЬро┐ропрпЛроГрокрпЖройрпНро╕ро┐ройрпН роорпИропродрпНродро┐ро▓рпН роЙро│рпНро│ роТро░рпБ рокрпБро│рпНро│ро┐, родрпЗроЯро▓рпН рокроГрокро░рпБроХрпНроХрпБро│рпН роиройрпНро▒ро╛роХ роЙро│рпНро│родрпБ, **-999** родрпВро░роорпН роХрпКрогрпНроЯрпБро│рпНро│родрпБ.
* родрпЗроЯро▓рпН рокроГрокро░рпБроХрпНроХрпБ ро╡рпЖро│ро┐ропрпЗ роиройрпНро▒ро╛роХ роЙро│рпНро│ роТро░рпБ рокрпБро│рпНро│ро┐ **999** родрпВро░роорпН роХрпКрогрпНроЯрпБро│рпНро│родрпБ.
* роЬро┐ропрпЛроГрокрпЖройрпНро╕ро┐ройрпН роЙро│рпНро│рпЗ рооро▒рпНро▒рпБроорпН родрпЗроЯро▓рпН рокроГрокро░рпБроХрпНроХрпБро│рпН роЙро│рпНро│ роТро░рпБ рокрпБро│рпНро│ро┐, роЬро┐ропрпЛроГрокрпЖройрпНро╕рпБроХрпНроХрпБ 
роорпЗро▓рпБро│рпНро│ рокроЯродрпНродро┐ро▓рпН, Microsoft campus роЗройрпН роТро░рпБ рокроХрпБродро┐ропрпИ geofence роорпВро▓роорпН роХрпБро▒ро┐роХрпНроХрокрпНрокроЯрпНроЯрпБро│рпНро│родрпБ. роЪро┐ро╡рокрпНрокрпБ роХрпЛроЯрпБ 520 ро╡ро┤ро┐ропро╛роХ роТро░рпБ ро▓ро╛ро░ро┐ роЪрпЖро▓рпНроХро┐ро▒родрпБ, GPS ро╡ро╛роЪро┐рокрпНрокрпБроХро│рпИроЪрпН роЪрпБроЯрпНроЯро┐роХрпНроХро╛роЯрпНроЯрпБроорпН ро╡роЯрпНроЯроЩрпНроХро│рпБроЯройрпН. роЗро╡ро▒рпНро▒ро┐ро▓рпН рокрпЖро░рпБроорпНрокро╛ро▓ро╛ройро╡рпИ 520 ро╡ро┤ро┐ропро╛роХ роЪро░ро┐ропро╛роХ роЙро│рпНро│рой, роЖройро╛ро▓рпН geofence роЙро│рпНро│рпЗ роТро░рпБ родро╡ро▒ро╛рой ро╡ро╛роЪро┐рокрпНрокрпБ роЙро│рпНро│родрпБ. роЕроирпНрод ро╡ро╛роЪро┐рокрпНрокрпБ роЪро░ро┐ропро╛роХ роЗро░рпБроХрпНроХ роорпБроЯро┐ропро╛родрпБ - 520 роЗро▓рпН роЗро░рпБроирпНродрпБ campus-роХрпНроХрпБ родро┐роЯрпАро░рпЖрой рооро╛ро▒ро┐, рокро┐ройрпНройро░рпН роорпАрогрпНроЯрпБроорпН 520-роХрпНроХрпБ родро┐ро░рпБроорпНрокрпБро╡родро▒рпНроХро╛рой роЪро╛ро▓рпИроХро│рпН роЗро▓рпНро▓рпИ. роЗроирпНрод geofence роР роЪро░ро┐рокро╛ро░рпНроХрпНроХрпБроорпН роХрпБро▒ро┐ропрпАроЯрпБ, geofence роЪрпЛродройрпИропро┐ройрпН роорпБроЯро┐ро╡рпБроХро│рпИ роЪрпЖропро▓рпНрокроЯрпБродрпНродрпБро╡родро▒рпНроХрпБ роорпБройрпН роорпБроирпНродрпИроп ро╡ро╛роЪро┐рокрпНрокрпБроХро│рпИ роХро░рпБродрпНродро┐ро▓рпН роХрпКро│рпНро│ ро╡рпЗрогрпНроЯрпБроорпН.

тЬЕ GPS ро╡ро╛роЪро┐рокрпНрокрпБ роЪро░ро┐ропро╛роХ роЗро░рпБроХрпНроХроХрпНроХрпВроЯро┐ропродро╛ роОройрпНрокродрпИроЪрпН роЪро░ро┐рокро╛ро░рпНроХрпНроХ роирпАроЩрпНроХро│рпН роорпЗро▓рпБроорпН роОроирпНрод родроХро╡ро▓рпНроХро│рпИ родрпЗро╡рпИрокрпНрокроЯрпБроорпН?

### рокрогро┐роХро│рпН - geofence роорпАродрпБ рокрпБро│рпНро│ро┐роХро│рпИроЪрпН роЪрпЛродро┐роХрпНроХ

1. ро╡ро▓рпИ API роХрпЗро│рпНро╡ро┐роХрпНроХро╛рой URL роР роЙро░рпБро╡ро╛роХрпНроХродрпН родрпКроЯроЩрпНроХрпБроЩрпНроХро│рпН. ро╡роЯро┐ро╡роорпН:

    ```output
    https://atlas.microsoft.com/spatial/geofence/json?api-version=1.0&deviceId=gps-sensor&subscription-key=<subscription-key>&udid=<UDID>&lat=<lat>&lon=<lon>
    ```

    `<subscription_key>` роР роЙроЩрпНроХро│рпН Azure Maps роХрогроХрпНроХро┐ро▒рпНроХро╛рой API ро╡ро┐роЪрпИропрпБроЯройрпН рооро╛ро▒рпНро▒ро╡рпБроорпН.

    `<UDID>` роР роорпБроирпНродрпИроп рокрогро┐ропро┐ро▓рпН роЗро░рпБроирпНродрпБ geofence роЗройрпН UDID роЙроЯройрпН рооро╛ро▒рпНро▒ро╡рпБроорпН.

    `<lat>` рооро▒рпНро▒рпБроорпН `<lon>` роР роирпАроЩрпНроХро│рпН роЪрпЛродро┐роХрпНроХ ро╡ро┐ро░рпБроорпНрокрпБроорпН роЕроХро▓ рооро▒рпНро▒рпБроорпН роирпАро│ роХрпЛроЯрпБроХро│рпБроЯройрпН рооро╛ро▒рпНро▒ро╡рпБроорпН.

    роЗроирпНрод URL `https://atlas.microsoft.com/spatial/geofence/json` API роР рокропройрпНрокроЯрпБродрпНродро┐ GeoJSON роорпВро▓роорпН ро╡ро░рпИропро▒рпБроХрпНроХрокрпНрокроЯрпНроЯ geofence роР роХрпЗроЯрпНроХро┐ро▒родрпБ. роЗродрпБ `1.0` API рокродро┐рокрпНрокрпИ роЗро▓роХрпНроХро╛роХроХрпН роХрпКрогрпНроЯрпБро│рпНро│родрпБ. `deviceId` роЕро│ро╡рпБро░рпБ родрпЗро╡рпИрокрпНрокроЯрпБроорпН рооро▒рпНро▒рпБроорпН роЕроХро▓ рооро▒рпНро▒рпБроорпН роирпАро│ роХрпЛроЯрпБроХро│рпН роОроЩрпНроХрпБ ро╡роирпНродрой роОройрпНрокродрпИроЪрпН роЪрпКро▓рпНро▓рпБроорпН роЪро╛родройродрпНродро┐ройрпН рокрпЖропро░ро╛роХ роЗро░рпБроХрпНроХ ро╡рпЗрогрпНроЯрпБроорпН.

    роЗропро▓рпНрокрпБроиро┐ро▓рпИ родрпЗроЯро▓рпН рокроГрокро░рпН 50m роЖроХрпБроорпН, роорпЗро▓рпБроорпН роирпАроЩрпНроХро│рпН `searchBuffer=<distance>` роОройрпНро▒ роХрпВроЯрпБродро▓рпН роЕро│ро╡рпБро░рпБро╡рпИроЪрпН роЪрпЗро░рпНродрпНродрпБ, `<distance>` роР роорпАроЯрпНроЯро░рпН роЕро│ро╡ро┐ро▓рпН родрпЗроЯро▓рпН рокроГрокро░рпН родрпВро░рооро╛роХ роЕроорпИродрпНродрпБ, 0 роорпБродро▓рпН 500 ро╡ро░рпИ рооро╛ро▒рпНро▒ро▓ро╛роорпН.

1. curl роРрокрпН рокропройрпНрокроЯрпБродрпНродро┐ роЗроирпНрод URL-роХрпНроХрпБ GET роХрпЛро░ро┐роХрпНроХрпИропрпИроЪрпН роЪрпЖропрпНропро╡рпБроорпН:

    ```sh
    curl --request GET '<URL>'
    ```

    > ЁЯТБ роирпАроЩрпНроХро│рпН `BadRequest` роОройрпНро▒ рокродро┐ро▓рпН роХрпБро▒ро┐ропрпАроЯрпНроЯрпИ рокрпЖро▒рпБроХро┐ро▒рпАро░рпНроХро│рпН, рооро▒рпНро▒рпБроорпН рокро┐ро┤рпИ:
    >
    > ```output
    > Invalid GeoJSON: All feature properties should contain a geometryId, which is used for identifying the geofence.
    > ```
    >
    > роЙроЩрпНроХро│рпН GeoJSON роЗро▓рпН `properties` рокроХрпБродро┐ `geometryId` роЙроЯройрпН роЗро▓рпНро▓рпИ. роирпАроЩрпНроХро│рпН роЙроЩрпНроХро│рпН GeoJSON роР роЪро░ро┐роЪрпЖропрпНродрпБ, роорпЗро▓рпЗ роЙро│рпНро│ рокроЯро┐роХро│рпИ роорпАрогрпНроЯрпБроорпН роЪрпЖропрпНроп ро╡рпЗрогрпНроЯрпБроорпН, рокро┐ройрпНройро░рпН рокрпБродро┐роп UDID роРрокрпН рокрпЖро▒ ро╡рпЗрогрпНроЯрпБроорпН.

1. рокродро┐ро▓рпН GeoJSON роР роЙро░рпБро╡ро╛роХрпНроХ рокропройрпНрокроЯрпБродрпНродрокрпНрокроЯрпНроЯ роТро╡рпНро╡рпКро░рпБ рокро╛ро│рпИропродрпНродро┐ро▒рпНроХрпБроорпН роТро░рпБ `geometries` рокроЯрпНроЯро┐ропро▓рпИроХрпН роХрпКрогрпНроЯро┐ро░рпБроХрпНроХрпБроорпН. роТро╡рпНро╡рпКро░рпБ рокро╛ро│рпИропродрпНродро┐ро▒рпНроХрпБроорпН 3 роорпБроХрпНроХро┐роп рокрпБро▓роЩрпНроХро│рпН роЙро│рпНро│рой: `distance`, `nearestLat` рооро▒рпНро▒рпБроорпН `nearestLon`.

    ```output
    {
        "geometries": [
            {
                "deviceId": "gps-sensor",
                "udId": "7c3776eb-da87-4c52-ae83-caadf980323a",
                "geometryId": "1",
                "distance": 999.0,
                "nearestLat": 47.645875,
                "nearestLon": -122.142713
            }
        ],
        "expiredGeofenceGeometryId": [],
        "invalidPeriodGeofenceGeometryId": []
    }
    ```

    * `nearestLat` рооро▒рпНро▒рпБроорпН `nearestLon` роОройрпНрокродрпБ роЪрпЛродро┐роХрпНроХрокрпНрокроЯрпБроорпН роЗроЯродрпНродро┐ро▒рпНроХрпБ рооро┐роХ роЕро░рпБроХро┐ро▓рпБро│рпНро│ geofence роЗройрпН ро╡ро┐ро│ро┐роорпНрокро┐ро▓рпН роЙро│рпНро│ рокрпБро│рпНро│ро┐ропро┐ройрпН роЕроХро▓ рооро▒рпНро▒рпБроорпН роирпАро│ роХрпЛроЯрпБроХро│рпН.

    * `distance` роОройрпНрокродрпБ роЪрпЛродро┐роХрпНроХрокрпНрокроЯрпБроорпН роЗроЯродрпНродро┐ро▓ро┐ро░рпБроирпНродрпБ geofence роЗройрпН ро╡ро┐ро│ро┐роорпНрокро┐ро▓рпН рооро┐роХ роЕро░рпБроХро┐ро▓рпБро│рпНро│ рокрпБро│рпНро│ро┐роХрпНроХрпБ роЙро│рпНро│ родрпВро░роорпН. роОродро┐ро░рпНрооро▒рпИ роОрогрпНроХро│рпН geofence роЙро│рпНро│рпЗ, роирпЗро░рпНрооро▒рпИ роОрогрпНроХро│рпН ро╡рпЖро│ро┐ропрпЗ. роЗроирпНрод роородро┐рокрпНрокрпБ 50 (роЗропро▓рпНрокрпБроиро┐ро▓рпИ родрпЗроЯро▓рпН рокроГрокро░рпН) роЕро▓рпНро▓родрпБ 999 роХрпНроХрпБроорпН роХрпБро▒рпИро╡ро╛роХ роЗро░рпБроХрпНроХрпБроорпН.

1. geofence роЙро│рпНро│рпЗ рооро▒рпНро▒рпБроорпН ро╡рпЖро│ро┐ропрпЗ роЙро│рпНро│ роЗроЯроЩрпНроХро│рпБроЯройрпН роЗродрпИ рокро▓роорпБро▒рпИ роорпАрогрпНроЯрпБроорпН роЪрпЖропрпНропро╡рпБроорпН.

## serverless роХрпБро▒ро┐ропрпАроЯрпНроЯро┐ро▓ро┐ро░рпБроирпНродрпБ geofences роРрокрпН рокропройрпНрокроЯрпБродрпНродро╡рпБроорпН

роЗрокрпНрокрпЛродрпБ роЙроЩрпНроХро│рпН Functions app роЗро▓рпН рокрпБродро┐роп trigger роРроЪрпН роЪрпЗро░рпНродрпНродрпБ IoT Hub GPS роиро┐роХро┤рпНро╡рпБ родро░ро╡рпБроХро│рпИ geofence роЙроЯройрпН роЪрпЛродро┐роХрпНроХро▓ро╛роорпН.

### Consumer groups

роорпБроирпНродрпИроп рокро╛роЯроЩрпНроХро│ро┐ро▓рпН роЗро░рпБроирпНродрпБ роирпАроЩрпНроХро│рпН роиро┐ройрпИро╡ро┐ро▓рпН ро╡рпИродрпНродро┐ро░рпБрокрпНрокрпАро░рпНроХро│рпН, IoT Hub hub-роХрпНроХрпБ ро╡роирпНродрпБро╡ро┐роЯрпНроЯ роЖройро╛ро▓рпН роЪрпЖропро▓рпНрокроЯрпБродрпНродрокрпНрокроЯро╛род роиро┐роХро┤рпНро╡рпБроХро│рпИ роорпАрогрпНроЯрпБроорпН роЗропроХрпНроХ роЕройрпБроородро┐роХрпНроХрпБроорпН. роЖройро╛ро▓рпН рокро▓ triggers роЗрогрпИроирпНродро╛ро▓рпН роОройрпНрой роироЯроХрпНроХрпБроорпН? роОроирпНрод trigger роОроирпНрод роиро┐роХро┤рпНро╡рпБроХро│рпИ роЪрпЖропро▓рпНрокроЯрпБродрпНродро┐ропродрпБ роОройрпНрокродрпИ роЕродрпБ роОрокрпНрокроЯро┐ родрпЖро░ро┐роирпНродрпБроХрпКро│рпНро│рпБроорпН?

рокродро┐ро▓рпН роЕродрпБ роорпБроЯро┐ропро╛родрпБ! роЕродро▒рпНроХрпБ рокродро┐ро▓ро╛роХ, роирпАроЩрпНроХро│рпН роиро┐роХро┤рпНро╡рпБроХро│рпИрокрпН рокроЯро┐роХрпНроХ родройро┐родрпНродройро┐ропро╛рой роЗрогрпИрокрпНрокрпБроХро│рпИ ро╡ро░рпИропро▒рпБроХрпНроХро▓ро╛роорпН, роТро╡рпНро╡рпКройрпНро▒рпБроорпН рокроЯро┐роХрпНроХро╛род роЪрпЖропрпНродро┐роХро│рпИ роорпАрогрпНроЯрпБроорпН роЗропроХрпНроХродрпНродрпИ роиро┐ро░рпНро╡роХро┐роХрпНроХ роорпБроЯро┐ропрпБроорпН. роЗро╡рпИ *consumer groups* роОройрпНро▒рпБ роЕро┤рпИроХрпНроХрокрпНрокроЯрпБроХро┐ройрпНро▒рой. роирпАроЩрпНроХро│рпН endpoint-роХрпНроХрпБ роЗрогрпИроХрпНроХрпБроорпН рокрпЛродрпБ, роирпАроЩрпНроХро│рпН роОроирпНрод consumer group-роХрпНроХрпБ роЗрогрпИроХрпНроХ ро╡ро┐ро░рпБроорпНрокрпБроХро┐ро▒рпАро░рпНроХро│рпН роОройрпНрокродрпИ роХрпБро▒ро┐рокрпНрокро┐роЯро▓ро╛роорпН. роЙроЩрпНроХро│рпН рокропройрпНрокро╛роЯрпНроЯро┐ройрпН роТро╡рпНро╡рпКро░рпБ роХрпВро▒роорпБроорпН роТро░рпБ consumer group-роХрпНроХрпБ роЗрогрпИроХрпНроХрпБроорпН.

![роТро░рпБ IoT Hub 3 consumer groups роЙроЯройрпН роТро░рпЗ роЪрпЖропрпНродро┐роХро│рпИ 3 ро╡рпЗро▒рпБ functions apps-роХрпНроХрпБ ро╡ро┐роиро┐ропрпЛроХро┐роХрпНроХро┐ро▒родрпБ](../../../../../translated_images/consumer-groups.a3262e26fc27ba2092863678ad57af15c7223416e388a23f330c058cf4358630.ta.png)

роХрпЛроЯрпНрокро╛роЯрпНроЯро┐ро▓рпН роТро╡рпНро╡рпКро░рпБ consumer group-роХрпНроХрпБроорпН 5 рокропройрпНрокро╛роЯрпБроХро│рпН ро╡ро░рпИ роЗрогрпИроХрпНроХро▓ро╛роорпН, роорпЗро▓рпБроорпН роЕро╡рпИ роЕройрпИродрпНродрпБроорпН роЪрпЖропрпНродро┐роХро│рпИ ро╡роирпНродро╡рпБроЯройрпН рокрпЖро▒рпБроорпН. роТро╡рпНро╡рпКро░рпБ consumer group-роХрпНроХрпБроорпН роТро░рпБ рокропройрпНрокро╛роЯрпНроЯрпИ роЕрогрпБроХрпБро╡родрпБ роЪро┐ро▒роирпНрод роироЯрпИроорпБро▒рпИропро╛роХрпБроорпН, duplicate роЪрпЖропрпНродро┐ роЪрпЖропро▓ро╛роХрпНроХродрпНродрпИродрпН родро╡ро┐ро░рпНроХрпНроХро╡рпБроорпН, рооро▒рпНро▒рпБроорпН роорпАрогрпНроЯрпБроорпН родрпКроЯроЩрпНроХрпБроорпНрокрпЛродрпБ роЕройрпИродрпНродрпБ роХро╛родрпНродро┐ро░рпБроХрпНроХрпБроорпН роЪрпЖропрпНродро┐роХро│рпБроорпН роЪро░ро┐ропро╛роХ роЪрпЖропро▓рпНрокроЯрпБродрпНродрокрпНрокроЯрпБро╡родрпИ роЙро▒рпБродро┐роЪрпЖропрпНропро╡рпБроорпН. роЙродро╛ро░рогрооро╛роХ, роЙроЩрпНроХро│рпН Functions app роР роЙро│рпНро│рпВро░ро┐ро▓рпН родрпКроЯроЩрпНроХро┐ройро╛ро▓рпН, роорпЗро▓рпБроорпН роЕродрпИ роорпЗроХродрпНродро┐ро▓рпН роЗропроХрпНроХро┐ройро╛ро▓рпН, роЕро╡рпИ роЗро░рогрпНроЯрпБроорпН роЪрпЖропрпНродро┐роХро│рпИ роЪрпЖропро▓рпНрокроЯрпБродрпНродрпБроорпН, storage account роЗро▓рпН duplicate blobs роЪрпЗрооро┐роХрпНроХрокрпНрокроЯрпБроорпН.

роорпБроирпНродрпИроп рокро╛роЯродрпНродро┐ро▓рпН роирпАроЩрпНроХро│рпН роЙро░рпБро╡ро╛роХрпНроХро┐роп IoT Hub trigger роЗро▒рпНроХро╛рой `function.json` роХрпЛрокрпНрокрпИ роирпАроЩрпНроХро│рпН роородро┐рокрпНрокро╛ропрпНро╡рпБ роЪрпЖропрпНродро╛ро▓рпН, event hub trigger binding рокроХрпБродро┐ропро┐ро▓рпН consumer group роР роХро╛рогро▓ро╛роорпН:

```json
"consumerGroup": "$Default"
```

роирпАроЩрпНроХро│рпН IoT Hub роР роЙро░рпБро╡ро╛роХрпНроХрпБроорпНрокрпЛродрпБ, роЗропро▓рпНрокрпБроиро┐ро▓рпИ consumer group `$Default` роЙро░рпБро╡ро╛роХрпНроХрокрпНрокроЯрпБроорпН. роирпАроЩрпНроХро│рпН роХрпВроЯрпБродро▓рпН trigger роРроЪрпН роЪрпЗро░рпНроХрпНроХ ро╡ро┐ро░рпБроорпНрокро┐ройро╛ро▓рпН, роирпАроЩрпНроХро│рпН рокрпБродро┐роп consumer group роРрокрпН рокропройрпНрокроЯрпБродрпНродро┐ роЗродрпИроЪрпН роЪрпЗро░рпНроХрпНроХро▓ро╛роорпН.

> ЁЯТБ роЗроирпНрод рокро╛роЯродрпНродро┐ро▓рпН, GPS родро░ро╡рпБроХро│рпИ роЪрпЗрооро┐роХрпНроХ рокропройрпНрокроЯрпБродрпНродро┐роп trigger роХрпНроХрпБ рооро╛ро▒ро╛роХ geofence роР роЪрпЛродро┐роХрпНроХ рокрпБродро┐роп function роР роирпАроЩрпНроХро│рпН рокропройрпНрокроЯрпБродрпНродрпБро╡рпАро░рпНроХро│рпН. роЗродрпБ consumer groups роР роОрокрпНрокроЯро┐ рокропройрпНрокроЯрпБродрпНродрпБро╡родрпБ рооро▒рпНро▒рпБроорпН роХрпБро▒ро┐ропрпАроЯрпНроЯрпИ родройро┐родрпНродройро┐ропро╛роХрокрпН рокро┐ро░ро┐роХрпНроХ роОрокрпНрокроЯро┐ рокропройрпНрокроЯрпБродрпНродрпБро╡родрпБ роОройрпНрокродрпИ роХро╛роЯрпНроЯрпБроХро┐ро▒родрпБ. роЙро▒рпНрокродрпНродро┐ рокропройрпНрокро╛роЯрпНроЯро┐ро▓рпН роЗродрпИ роирпАроЩрпНроХро│рпН рокро▓ ро╡ро┤ро┐роХро│ро┐ро▓рпН ро╡роЯро┐ро╡роорпИроХрпНроХро▓ро╛роорпН - роЗро░рогрпНроЯрпИропрпБроорпН роТро░рпБ function роЗро▓рпН роЪрпЗро░рпНродрпНродро▓рпН, geofence роРроЪрпН роЪрпЛродро┐роХрпНроХ роТро░рпБ function роР роЗропроХрпНроХ storage account роЗро▓рпН trigger роРрокрпН рокропройрпНрокроЯрпБродрпНродрпБродро▓рпН, роЕро▓рпНро▓родрпБ рокро▓ functions роРрокрпН рокропройрпНрокроЯрпБродрпНродрпБродро▓рпН. 'роЪро░ро┐ропро╛рой ро╡ро┤ро┐' роОройрпНро▒рпБ роОродрпБро╡рпБроорпН роЗро▓рпНро▓рпИ, роЗродрпБ роЙроЩрпНроХро│рпН рокропройрпНрокро╛роЯрпНроЯро┐ройрпН рооро▒рпНро▒ рокроХрпБродро┐роХро│рпН рооро▒рпНро▒рпБроорпН роЙроЩрпНроХро│рпН родрпЗро╡рпИроХро│ро┐ройрпН роЕроЯро┐рокрпНрокроЯрпИропро┐ро▓рпН роЗро░рпБроХрпНроХрпБроорпН.

### Task - рокрпБродро┐роп consumer group роР роЙро░рпБро╡ро╛роХрпНроХро╡рпБроорпН

1. роЙроЩрпНроХро│рпН IoT Hub роХрпНроХрпБ `geofence` роОройрпНро▒ рокрпБродро┐роп consumer group роР роЙро░рпБро╡ро╛роХрпНроХ роХрпАро┤рпЗ роЙро│рпНро│ роХроЯрпНроЯро│рпИропрпИ роЗропроХрпНроХро╡рпБроорпН:

    ```sh
    az iot hub consumer-group create --name geofence \
                                     --hub-name <hub_name>
    ```

    `<hub_name>` роР роЙроЩрпНроХро│рпН IoT Hub роХрпНроХрпБ роирпАроЩрпНроХро│рпН рокропройрпНрокроЯрпБродрпНродро┐роп рокрпЖропро░рпБроЯройрпН рооро╛ро▒рпНро▒ро╡рпБроорпН.

1. IoT Hub роХрпНроХро╛рой роЕройрпИродрпНродрпБ consumer groups роР роирпАроЩрпНроХро│рпН роХро╛рог ро╡ро┐ро░рпБроорпНрокро┐ройро╛ро▓рпН, роХрпАро┤рпЗ роЙро│рпНро│ роХроЯрпНроЯро│рпИропрпИ роЗропроХрпНроХро╡рпБроорпН:

    ```sh
    az iot hub consumer-group list --output table \
                                   --hub-name <hub_name>
    ```

    `<hub_name>` роР роЙроЩрпНроХро│рпН IoT Hub роХрпНроХрпБ роирпАроЩрпНроХро│рпН рокропройрпНрокроЯрпБродрпНродро┐роп рокрпЖропро░рпБроЯройрпН рооро╛ро▒рпНро▒ро╡рпБроорпН. роЗродрпБ роЕройрпИродрпНродрпБ consumer groups роР рокроЯрпНроЯро┐ропро▓ро┐роЯрпБроорпН.

    ```output
    Name      ResourceGroup
    --------  ---------------
    $Default  gps-sensor
    geofence  gps-sensor
    ```

> ЁЯТБ роирпАроЩрпНроХро│рпН роорпБроирпНродрпИроп рокро╛роЯродрпНродро┐ро▓рпН IoT Hub event monitor роР роЗропроХрпНроХро┐роп рокрпЛродрпБ, роЕродрпБ `$Default` consumer group-роХрпНроХрпБ роЗрогрпИроХрпНроХрокрпНрокроЯрпНроЯродрпБ. роЗродрпБро╡рпЗ event monitor рооро▒рпНро▒рпБроорпН event trigger роР роЗропроХрпНроХ роорпБроЯро┐ропро╛родродро▒рпНроХро╛рой роХро╛ро░рогроорпН. роирпАроЩрпНроХро│рпН роЗро░рогрпНроЯрпИропрпБроорпН роЗропроХрпНроХ ро╡ро┐ро░рпБроорпНрокро┐ройро╛ро▓рпН, роЙроЩрпНроХро│рпН function apps роХрпНроХро╛рой consumer groups роРрокрпН рокропройрпНрокроЯрпБродрпНродро▓ро╛роорпН, рооро▒рпНро▒рпБроорпН event monitor роХрпНроХрпБ `$Default` роР ро╡рпИродрпНродро┐ро░рпБроХрпНроХро▓ро╛роорпН.

### Task - рокрпБродро┐роп IoT Hub trigger роР роЙро░рпБро╡ро╛роХрпНроХро╡рпБроорпН

1. роорпБроирпНродрпИроп рокро╛роЯродрпНродро┐ро▓рпН роирпАроЩрпНроХро│рпН роЙро░рпБро╡ро╛роХрпНроХро┐роп `gps-trigger` function app роЗро▓рпН рокрпБродро┐роп IoT Hub event trigger роРроЪрпН роЪрпЗро░рпНроХрпНроХро╡рпБроорпН. роЗроирпНрод function роР `geofence-trigger` роОройрпНро▒рпБ роЕро┤рпИроХрпНроХро╡рпБроорпН.

    > тЪая╕П [Project 2, Lesson 5 роЗро▓рпН IoT Hub event trigger роР роЙро░рпБро╡ро╛роХрпНроХрпБроорпН ро╡ро┤ро┐роорпБро▒рпИроХро│рпИ](../../../2-farm/lessons/5-migrate-application-to-the-cloud/README.md#create-an-iot-hub-event-trigger) родрпЗро╡рпИропро╛ройро╛ро▓рпН рокро╛ро░рпНроХрпНроХро▓ро╛роорпН.

1. `function.json` роХрпЛрокрпНрокро┐ро▓рпН IoT Hub роЗрогрпИрокрпНрокрпБ string роР роЕроорпИроХрпНроХро╡рпБроорпН. `local.settings.json` роЕройрпИродрпНродрпБ triggers роЗро▓рпН рокроХро┐ро░рокрпНрокроЯрпБроорпН.

1. `function.json` роХрпЛрокрпНрокро┐ро▓рпН `consumerGroup` роЗройрпН роородро┐рокрпНрокрпИ рокрпБродро┐роп `geofence` consumer group роР роХрпБро▒ро┐рокрпНрокро┐роЯрпБро╡родро▒рпНроХрпБ рокрпБродрпБрокрпНрокро┐роХрпНроХро╡рпБроорпН:

    ```json
    "consumerGroup": "geofence"
    ```

1. роЗроирпНрод trigger роЗро▓рпН роЙроЩрпНроХро│рпН Azure Maps роХрогроХрпНроХро┐ро▒рпНроХро╛рой subscription key роР роирпАроЩрпНроХро│рпН рокропройрпНрокроЯрпБродрпНрод ро╡рпЗрогрпНроЯрпБроорпН, роОройро╡рпЗ `local.settings.json` роХрпЛрокрпНрокро┐ро▓рпН `MAPS_KEY` роОройрпНро▒ рокрпБродро┐роп entry роРроЪрпН роЪрпЗро░рпНроХрпНроХро╡рпБроорпН.

1. Functions App роР роЗропроХрпНроХро┐, роЗродрпБ роЗрогрпИроХрпНроХрокрпНрокроЯрпНроЯрпБ роЪрпЖропрпНродро┐роХро│рпИ роЪрпЖропро▓рпНрокроЯрпБродрпНродрпБроХро┐ро▒родро╛ роОройрпНрокродрпИ роЙро▒рпБродро┐роЪрпЖропрпНропро╡рпБроорпН. роорпБроирпНродрпИроп рокро╛роЯродрпНродро┐ро▓рпН роЗро░рпБроирпНродрпБ `iot-hub-trigger` роХрпВроЯ роЗропроХрпНроХрокрпНрокроЯрпБроорпН рооро▒рпНро▒рпБроорпН blobs роР storage роХрпНроХрпБ рокродро┐ро╡рпЗро▒рпНро▒рпБроорпН.

    > blob storage роЗро▓рпН duplicate GPS ро╡ро╛роЪро┐рокрпНрокрпБроХро│рпИродрпН родро╡ро┐ро░рпНроХрпНроХ, роорпЗроХродрпНродро┐ро▓рпН роирпАроЩрпНроХро│рпН роЗропроХрпНроХро┐роп Functions App роР роиро┐ро▒рпБродрпНродро▓ро╛роорпН. роЗродрпИроЪрпН роЪрпЖропрпНроп, роХрпАро┤рпЗ роЙро│рпНро│ роХроЯрпНроЯро│рпИропрпИрокрпН рокропройрпНрокроЯрпБродрпНродро╡рпБроорпН:
    >
    > ```sh
    > az functionapp stop --resource-group gps-sensor \
    >                     --name <functions_app_name>
    > ```
    >
    > `<functions_app_name>` роР роЙроЩрпНроХро│рпН Functions App роХрпНроХрпБ роирпАроЩрпНроХро│рпН рокропройрпНрокроЯрпБродрпНродро┐роп рокрпЖропро░рпБроЯройрпН рооро╛ро▒рпНро▒ро╡рпБроорпН.
    >
    > рокро┐ройрпНройро░рпН роЗродрпИ роорпАрогрпНроЯрпБроорпН родрпКроЯроЩрпНроХ роХрпАро┤рпЗ роЙро│рпНро│ роХроЯрпНроЯро│рпИропрпИрокрпН рокропройрпНрокроЯрпБродрпНродро▓ро╛роорпН:
    >
    > ```sh
    > az functionapp start --resource-group gps-sensor \
    >                     --name <functions_app_name>
    > ```
    >
    > `<functions_app_name>` роР роЙроЩрпНроХро│рпН Functions App роХрпНроХрпБ роирпАроЩрпНроХро│рпН рокропройрпНрокроЯрпБродрпНродро┐роп рокрпЖропро░рпБроЯройрпН рооро╛ро▒рпНро▒ро╡рпБроорпН.

### Task - trigger роЗро▓рпН роЗро░рпБроирпНродрпБ geofence роР роЪрпЛродро┐роХрпНроХро╡рпБроорпН

роЗроирпНрод рокро╛роЯродрпНродро┐ройрпН роЖро░роорпНрокродрпНродро┐ро▓рпН роирпАроЩрпНроХро│рпН geofence роР роХрпЗроЯрпНроЯрпБ роТро░рпБ рокрпБро│рпНро│ро┐ роЙро│рпНро│рпЗ роЕро▓рпНро▓родрпБ ро╡рпЖро│ро┐ропрпЗ роЙро│рпНро│родро╛ роОройрпНрокродрпИрокрпН рокро╛ро░рпНродрпНродрпАро░рпНроХро│рпН. роЙроЩрпНроХро│рпН trigger роЗро▓рпН роЗро░рпБроирпНродрпБ роЗродрпЗ рокрпЛройрпНро▒ ро╡ро▓рпИ роХрпЗро│рпНро╡ро┐ропрпИроЪрпН роЪрпЖропрпНропро▓ро╛роорпН.

1. geofence роР роХрпЗроЯрпНроХ, роЕродройрпН UDID родрпЗро╡рпИрокрпНрокроЯрпБроорпН. роЗроирпНрод роородро┐рокрпНрокрпБроЯройрпН `local.settings.json` роХрпЛрокрпНрокро┐ро▓рпН `GEOFENCE_UDID` роОройрпНро▒ рокрпБродро┐роп entry роРроЪрпН роЪрпЗро░рпНроХрпНроХро╡рпБроорпН.

1. рокрпБродро┐роп `geofence-trigger` trigger роЗройрпН `__init__.py` роХрпЛрокрпНрокрпИродрпН родро┐ро▒роХрпНроХро╡рпБроорпН.

1. роХрпЛрокрпНрокро┐ройрпН роорпЗро▓рпН рокроХрпНроХродрпНродро┐ро▓рпН роХрпАро┤рпЗ роЙро│рпНро│ import роРроЪрпН роЪрпЗро░рпНроХрпНроХро╡рпБроорпН:

    ```python
    import json
    import os
    import requests
    ```

    `requests` package ро╡ро▓рпИ API роЕро┤рпИрокрпНрокрпБроХро│рпИроЪрпН роЪрпЖропрпНроп роЕройрпБроородро┐роХрпНроХро┐ро▒родрпБ. Azure Maps Python SDK роЗро▓рпНро▓рпИ, Python роХрпБро▒ро┐ропрпАроЯрпНроЯро┐ро▓ро┐ро░рпБроирпНродрпБ роЗродрпИрокрпН рокропройрпНрокроЯрпБродрпНрод роирпАроЩрпНроХро│рпН ро╡ро▓рпИ API роЕро┤рпИрокрпНрокрпБроХро│рпИроЪрпН роЪрпЖропрпНроп ро╡рпЗрогрпНроЯрпБроорпН.

1. Maps subscription key роРрокрпН рокрпЖро▒ `main` роорпБро▒рпИроорпИропро┐ройрпН родрпКроЯроХрпНроХродрпНродро┐ро▓рпН роХрпАро┤рпЗ роЙро│рпНро│ 2 ро╡ро░ро┐роХро│рпИроЪрпН роЪрпЗро░рпНроХрпНроХро╡рпБроорпН:

    ```python
    maps_key = os.environ['MAPS_KEY']
    geofence_udid = os.environ['GEOFENCE_UDID']    
    ```

1. `for event in events` loop роЗро▓рпН, роТро╡рпНро╡рпКро░рпБ роиро┐роХро┤рпНро╡ро┐ро▓ро┐ро░рпБроирпНродрпБроорпН роЕроХро▓ рооро▒рпНро▒рпБроорпН роирпАро│ роХрпЛроЯрпБроХро│рпИрокрпН рокрпЖро▒ роХрпАро┤рпЗ роЙро│рпНро│родрпИроЪрпН роЪрпЗро░рпНроХрпНроХро╡рпБроорпН:

    ```python
    event_body = json.loads(event.get_body().decode('utf-8'))
    lat = event_body['gps']['lat']
    lon = event_body['gps']['lon']
    ```

    роЗроирпНрод роХрпБро▒ро┐ропрпАроЯрпБ JSON роР dictionary роЖроХ рооро╛ро▒рпНро▒рпБроХро┐ро▒родрпБ, рокро┐ройрпНройро░рпН `gps` рокрпБро▓родрпНродро┐ро▓ро┐ро░рпБроирпНродрпБ `lat` рооро▒рпНро▒рпБроорпН `lon` роР роОроЯрпБроХрпНроХро┐ро▒родрпБ.

1. `requests` роРрокрпН рокропройрпНрокроЯрпБродрпНродрпБроорпНрокрпЛродрпБ, curl роЙроЯройрпН роирпАрогрпНроЯ URL роР роЙро░рпБро╡ро╛роХрпНроХрпБро╡родро▒рпНроХрпБрокрпН рокродро┐ро▓ро╛роХ, URL рокроХрпБродро┐ропрпИ роороЯрпНроЯрпБроорпН рокропройрпНрокроЯрпБродрпНродро┐ роЕро│ро╡рпБро░рпБроХрпНроХро│рпИ dictionary роЖроХроХрпН роХрпКроЯрпБроХрпНроХро▓ро╛роорпН. роЕро┤рпИроХрпНроХ ро╡рпЗрогрпНроЯро┐роп URL роР ро╡ро░рпИропро▒рпБродрпНродрпБ роЕро│ро╡рпБро░рпБроХрпНроХро│рпИ роЕроорпИроХрпНроХ роХрпАро┤рпЗ роЙро│рпНро│ роХрпБро▒ро┐ропрпАроЯрпНроЯрпИроЪрпН роЪрпЗро░рпНроХрпНроХро╡рпБроорпН:

    ```python
    url = 'https://atlas.microsoft.com/spatial/geofence/json'

    params = {
        'api-version': 1.0,
        'deviceId': 'gps-sensor',
        'subscription-key': maps_key,
        'udid' : geofence_udid,
        'lat' : lat,
        'lon' : lon
    }
    ```

    `params` dictionary роЗро▓рпН роЙро│рпНро│ роЙро░рпБрокрпНрокроЯро┐роХро│рпН curl роорпВро▓роорпН ро╡ро▓рпИ API роР роЕро┤рпИроХрпНроХрпБроорпН рокрпЛродрпБ роирпАроЩрпНроХро│рпН рокропройрпНрокроЯрпБродрпНродро┐роп key-value роЬрпЛроЯро┐роХро│рпБроЯройрпН рокрпКро░рпБроирпНродрпБроорпН.

1. ро╡ро▓рпИ API роР роЕро┤рпИроХрпНроХ роХрпАро┤рпЗ роЙро│рпНро│ роХрпБро▒ро┐ропрпАроЯрпНроЯрпИроЪрпН роЪрпЗро░рпНроХрпНроХро╡рпБроорпН:

    ```python
    response = requests.get(url, params=params)
    response_body = json.loads(response.text)
    ```

    роЗродрпБ URL роР роЕро│ро╡рпБро░рпБроХрпНроХро│рпБроЯройрпН роЕро┤рпИроХрпНроХро┐ро▒родрпБ, рооро▒рпНро▒рпБроорпН рокродро┐ро▓рпН object роРрокрпН рокрпЖро▒рпБроХро┐ро▒родрпБ.

1. роЗродро▒рпНроХрпБ роХрпАро┤рпЗ роЙро│рпНро│ роХрпБро▒ро┐ропрпАроЯрпНроЯрпИроЪрпН роЪрпЗро░рпНроХрпНроХро╡рпБроорпН:

    ```python
    distance = response_body['geometries'][0]['distance']

    if distance == 999:
        logging.info('Point is outside geofence')
    elif distance > 0:
        logging.info(f'Point is just outside geofence by a distance of {distance}m')
    elif distance == -999:
        logging.info(f'Point is inside geofence')
    else:
        logging.info(f'Point is just inside geofence by a distance of {distance}m')
    ```

    роЗроирпНрод роХрпБро▒ро┐ропрпАроЯрпБ 1 geometry роР роОроЯрпБродрпНродрпБроХрпНроХрпКро│рпНроХро┐ро▒родрпБ, рооро▒рпНро▒рпБроорпН роЕроирпНрод geometry роЗро▓рпН distance роР роОроЯрпБроХрпНроХро┐ро▒родрпБ. distance роЕроЯро┐рокрпНрокроЯрпИропро┐ро▓рпН ро╡рпЖро╡рпНро╡рпЗро▒рпБ роЪрпЖропрпНродро┐роХро│рпИ рокродро┐ро╡рпБ роЪрпЖропрпНроХро┐ро▒родрпБ.

1. роЗроирпНрод роХрпБро▒ро┐ропрпАроЯрпНроЯрпИ роЗропроХрпНроХро╡рпБроорпН. GPS роХрпЛро░рпНроЯро┐ройрпЗроЯрпНроЯрпБроХро│рпН geofence роЙро│рпНро│рпЗ роЕро▓рпНро▓родрпБ ро╡рпЖро│ро┐ропрпЗ роЙро│рпНро│родро╛, 50m роЙро│рпНро│рпЗ роЗро░рпБроирпНродро╛ро▓рпН distance роЙроЯройрпН, logging output роЗро▓рпН роирпАроЩрпНроХро│рпН роХро╛рогро▓ро╛роорпН. роЙроЩрпНроХро│рпН GPS роЪрпЖройрпНроЪро╛ро░ро┐ройрпН роЗроЯродрпНродрпИ роЕроЯро┐рокрпНрокроЯрпИропро╛роХроХрпН роХрпКрогрпНроЯ geofences роЙроЯройрпН роЗроирпНрод роХрпБро▒ро┐ропрпАроЯрпНроЯрпИ роорпБропро▒рпНроЪро┐роХрпНроХро╡рпБроорпН, роЪрпЖройрпНроЪро╛ро░рпИ роироХро░рпНродрпНрод роорпБропро▒рпНроЪро┐роХрпНроХро╡рпБроорпН (роЙродро╛ро░рогрооро╛роХ роорпКрокрпИро▓рпН рокрпЛройро┐ро▓рпН WiFi роорпВро▓роорпН tether роЪрпЖропрпНропрокрпНрокроЯрпНроЯродрпБ, роЕро▓рпНро▓родрпБ virtual IoT роЪро╛родройродрпНродро┐ро▓рпН ро╡рпЗро▒рпБ роХрпЛро░рпНроЯро┐ройрпЗроЯрпНроЯрпБроХро│рпБроЯройрпН) роЗроирпНрод рооро╛ро▒рпНро▒родрпНродрпИрокрпН рокро╛ро░рпНроХрпНроХ.

1. роирпАроЩрпНроХро│рпН родропро╛ро░ро╛роХ роЗро░рпБроХрпНроХрпБроорпНрокрпЛродрпБ, роЗроирпНрод роХрпБро▒ро┐ропрпАроЯрпНроЯрпИ роорпЗроХродрпНродро┐ро▓рпН роЙроЩрпНроХро│рпН Functions app роХрпНроХрпБ deploy роЪрпЖропрпНропро╡рпБроорпН. рокрпБродро┐роп Application Settings роР deploy роЪрпЖропрпНроп рооро▒роХрпНроХ ро╡рпЗрогрпНроЯро╛роорпН.

    > тЪая╕П [Project 2, Lesson 5 роЗро▓рпН Application Settings роР upload роЪрпЖропрпНропрпБроорпН ро╡ро┤ро┐роорпБро▒рпИроХро│рпИ](../../../2-farm/lessons/5-migrate-application-to-the-cloud/README.md#task---upload-your-application-settings) родрпЗро╡рпИропро╛ройро╛ро▓рпН рокро╛ро░рпНроХрпНроХро▓ро╛роорпН.

    > тЪая╕П [Project 2, Lesson 5 роЗро▓рпН Functions app роР deploy роЪрпЖропрпНропрпБроорпН ро╡ро┤ро┐роорпБро▒рпИроХро│рпИ](../../../2-farm/lessons/5-migrate-application-to-the-cloud/README.md#task---deploy-your-functions-app-to-the-cloud) родрпЗро╡рпИропро╛ройро╛ро▓рпН рокро╛ро░рпНроХрпНроХро▓ро╛роорпН.

> ЁЯТБ роЗроирпНрод роХрпБро▒ро┐ропрпАроЯрпНроЯрпИ [code/functions](../../../../../3-transport/lessons/4-geofences/code/functions) роХрпЛрокрпНрокрпБро▒рпИропро┐ро▓рпН роХро╛рогро▓ро╛роорпН.

---

## ЁЯЪА роЪро╡ро╛ро▓рпН

роЗроирпНрод рокро╛роЯродрпНродро┐ро▓рпН роирпАроЩрпНроХро│рпН роТро░рпБ polygon роХрпКрогрпНроЯ GeoJSON роХрпЛрокрпНрокрпИрокрпН рокропройрпНрокроЯрпБродрпНродро┐ роТро░рпБ geofence роРроЪрпН роЪрпЗро░рпНродрпНродрпАро░рпНроХро│рпН. `properties` рокроХрпБродро┐ропро┐ро▓рпН `geometryId` роородро┐рокрпНрокрпБроХро│рпН ро╡рпЗро▒рпБрокроЯрпНроЯро╛ро▓рпН, роТро░рпЗ роирпЗро░родрпНродро┐ро▓рпН рокро▓ polygons роР upload роЪрпЖропрпНропро▓ро╛роорпН.

рокро▓ polygons роХрпКрогрпНроЯ GeoJSON роХрпЛрокрпНрокрпИ upload роЪрпЖропрпНродрпБ, GPS роХрпЛро░рпНроЯро┐ройрпЗроЯрпНроЯрпБроХро│рпН роОроирпНрод polygon роХрпНроХрпБ рооро┐роХ роЕро░рпБроХро┐ро▓рпЛ роЕро▓рпНро▓родрпБ роЙро│рпНро│рпЗ роЙро│рпНро│родрпЛ роОройрпНрокродрпИ роХрогрпНроЯро▒ро┐роп роЙроЩрпНроХро│рпН роХрпБро▒ро┐ропрпАроЯрпНроЯрпИ роЪро░ро┐роЪрпЖропрпНроп роорпБропро▒рпНроЪро┐роХрпНроХро╡рпБроорпН.

## Post-lecture quiz

[Post-lecture quiz](https://black-meadow-040d15503.1.azurestaticapps.net/quiz/28)

## роородро┐рокрпНрокро╛ропрпНро╡рпБ & роЪрпБропрокроЯро┐рокрпНрокрпБ

* [Geofencing page on Wikipedia](https://en.wikipedia.org/wiki/Geo-fence) роЗро▓рпН geofences рооро▒рпНро▒рпБроорпН роЕро╡ро▒рпНро▒ро┐ройрпН рокропройрпНрокро╛роЯрпБроХро│рпН рокро▒рпНро▒ро┐роп роорпЗро▓рпБроорпН ро╡ро╛роЪро┐роХрпНроХро╡рпБроорпН.
* [Microsoft Azure Maps Spatial - Get Geofence documentation](https://docs.microsoft.com/rest/api/maps/spatial/getgeofence?WT.mc_id=academic-17441-jabenn) роЗро▓рпН Azure Maps geofencing API рокро▒рпНро▒ро┐роп роорпЗро▓рпБроорпН ро╡ро╛роЪро┐роХрпНроХро╡рпБроорпН.
* [Features and terminology in Azure Event Hubs - Event consumers documentation on Microsoft docs](https://docs.microsoft.com/azure/event-hubs/event-hubs-features?WT.mc_id=academic-17441-jabenn#event-consumers) роЗро▓рпН consumer groups рокро▒рпНро▒ро┐роп роорпЗро▓рпБроорпН ро╡ро╛роЪро┐роХрпНроХро╡рпБроорпН.

## Assignment

[Send notifications using Twilio](assignment.md)

---

**роХрпБро▒ро┐рокрпНрокрпБ**:  
роЗроирпНрод роЖро╡рогроорпН [Co-op Translator](https://github.com/Azure/co-op-translator) роОройрпНро▒ AI роорпКро┤ро┐рокрпЖропро░рпНрокрпНрокрпБ роЪрпЗро╡рпИропрпИ рокропройрпНрокроЯрпБродрпНродро┐ роорпКро┤ро┐рокрпЖропро░рпНроХрпНроХрокрпНрокроЯрпНроЯрпБро│рпНро│родрпБ. роОроЩрпНроХро│рпН родро░роЪрпНроЪрпЖропро▓рпНроорпБро▒рпИропрпИ роЙро▒рпБродро┐рокрпНрокроЯрпБродрпНрод роорпБропро▒рпНроЪро┐роХрпНроХро┐ро▒рпЛроорпН, роЖройро╛ро▓рпН родро╛ройро┐ропроХрпНроХ роорпКро┤ро┐рокрпЖропро░рпНрокрпНрокрпБроХро│ро┐ро▓рпН рокро┐ро┤рпИроХро│рпН роЕро▓рпНро▓родрпБ родро╡ро▒ро╛рой родроХро╡ро▓рпНроХро│рпН роЗро░рпБроХрпНроХроХрпНроХрпВроЯрпБроорпН роОройрпНрокродрпИ роХро╡ройродрпНродро┐ро▓рпН роХрпКро│рпНро│ро╡рпБроорпН. роЕродройрпН роЗропро▓рпНрокро╛рой роорпКро┤ро┐ропро┐ро▓рпН роЙро│рпНро│ роорпВро▓ роЖро╡рогроорпН роЕродро┐роХро╛ро░рокрпНрокрпВро░рпНро╡ роЖродро╛ро░рооро╛роХ роХро░рпБродрокрпНрокроЯ ро╡рпЗрогрпНроЯрпБроорпН. роорпБроХрпНроХро┐ропрооро╛рой родроХро╡ро▓рпНроХро│рпБроХрпНроХрпБ, родрпКро┤ро┐ро▓рпНроорпБро▒рпИ рооройро┐род роорпКро┤ро┐рокрпЖропро░рпНрокрпНрокрпБ рокро░ро┐роирпНродрпБро░рпИроХрпНроХрокрпНрокроЯрпБроХро┐ро▒родрпБ. роЗроирпНрод роорпКро┤ро┐рокрпЖропро░рпНрокрпНрокрпИрокрпН рокропройрпНрокроЯрпБродрпНродрпБро╡родро╛ро▓рпН роПро▒рпНрокроЯрпБроорпН роОроирпНрод родро╡ро▒ро╛рой рокрпБро░ро┐родро▓рпНроХро│рпН роЕро▓рпНро▓родрпБ родро╡ро▒ро╛рой ро╡ро┐ро│роХрпНроХроЩрпНроХро│рпБроХрпНроХрпБ роиро╛роЩрпНроХро│рпН рокрпКро▒рпБрокрпНрокро▓рпНро▓.