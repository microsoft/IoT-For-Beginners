<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "d6faf0e8d3c2d6d20c0aef2a305dab18",
  "translation_date": "2025-10-11T11:19:19+00:00",
  "source_file": "1-getting-started/lessons/4-connect-internet/wio-terminal-mqtt.md",
  "language_code": "ta"
}
-->
# роЙроЩрпНроХро│рпН роЗро░ро╡рпБродрпНродрпАро╡ро┐ро│роХрпНроХрпИ роЗрогрпИропродрпНродро┐ройрпН роорпВро▓роорпН роХроЯрпНроЯрпБрокрпНрокроЯрпБродрпНродрпБроЩрпНроХро│рпН - Wio Terminal

IoT роЪро╛родройроорпН *test.mosquitto.org* роЙроЯройрпН MQTT роорпВро▓роорпН родрпКроЯро░рпНрокрпБ роХрпКро│рпНро│, роТро│ро┐ роЪрпЖройрпНроЪро╛ро░рпН ро╡ро╛роЪро┐рокрпНрокрпБроЯройрпН роЯрпЖро▓ро┐роорпЖроЯрпНро░ро┐ роородро┐рокрпНрокрпБроХро│рпИ роЕройрпБрокрпНрокро╡рпБроорпН, LED роР роХроЯрпНроЯрпБрокрпНрокроЯрпБродрпНрод роХроЯрпНроЯро│рпИроХро│рпИ рокрпЖро▒ро╡рпБроорпН роХрпБро▒ро┐ропрпАроЯрпБ роЪрпЖропрпНроп ро╡рпЗрогрпНроЯрпБроорпН.

роЗроирпНрод рокро╛роЯродрпНродро┐ройрпН роЗроирпНрод рокроХрпБродро┐ропро┐ро▓рпН, роЙроЩрпНроХро│рпН Wio Terminal роР MQTT broker роЙроЯройрпН роЗрогрпИрокрпНрокрпАро░рпНроХро│рпН.

## WiFi рооро▒рпНро▒рпБроорпН MQTT Arduino роирпВро▓роХроЩрпНроХро│рпИ роиро┐ро▒рпБро╡ро╡рпБроорпН

MQTT broker роЙроЯройрпН родрпКроЯро░рпНрокрпБ роХрпКро│рпНро│, Wio Terminal роЗро▓рпН роЙро│рпНро│ WiFi роЪро┐рокрпН рокропройрпНрокроЯрпБродрпНродро╡рпБроорпН, MQTT роЙроЯройрпН родрпКроЯро░рпНрокрпБ роХрпКро│рпНро│ро╡рпБроорпН Arduino роирпВро▓роХроЩрпНроХро│рпИ роиро┐ро▒рпБро╡ ро╡рпЗрогрпНроЯрпБроорпН. Arduino роЪро╛родройроЩрпНроХро│рпБроХрпНроХро╛рой роорпЗроорпНрокро╛роЯрпНроЯро┐ро▓рпН, родро┐ро▒роирпНрод роорпВро▓ роХрпБро▒ро┐ропрпАроЯрпБроХро│рпИ роХрпКрогрпНроЯ роирпВро▓роХроЩрпНроХро│рпН рооро▒рпНро▒рпБроорпН рокро▓ родро┐ро▒ройрпНроХро│рпИ роЪрпЖропро▓рпНрокроЯрпБродрпНродрпБроорпН роирпВро▓роХроЩрпНроХро│рпИ роирпАроЩрпНроХро│рпН рокропройрпНрокроЯрпБродрпНродро▓ро╛роорпН. Seeed Wio Terminal роХрпНроХро╛рой WiFi роорпВро▓роорпН родрпКроЯро░рпНрокрпБ роХрпКро│рпНро│ роирпВро▓роХроЩрпНроХро│рпИ ро╡рпЖро│ро┐ропро┐роЯрпБроХро┐ро▒родрпБ. рооро▒рпНро▒ роЯрпЖро╡ро▓рокрпНрокро░рпНроХро│рпН MQTT broker роХро│рпБроЯройрпН родрпКроЯро░рпНрокрпБ роХрпКро│рпНро│ роирпВро▓роХроЩрпНроХро│рпИ ро╡рпЖро│ро┐ропро┐роЯрпНроЯрпБро│рпНро│ройро░рпН, роорпЗро▓рпБроорпН роирпАроЩрпНроХро│рпН роЙроЩрпНроХро│рпН роЪро╛родройродрпНродрпБроЯройрпН роЗро╡ро▒рпНро▒рпИ рокропройрпНрокроЯрпБродрпНродрпБро╡рпАро░рпНроХро│рпН.

роЗроирпНрод роирпВро▓роХроЩрпНроХро│рпН роорпВро▓роХрпН роХрпБро▒ро┐ропрпАроЯро╛роХ ро╡ро┤роЩрпНроХрокрпНрокроЯрпБроХро┐ройрпНро▒рой, роЕро╡ро▒рпНро▒рпИ PlatformIO роЗро▓рпН родро╛ройро╛роХ роЗро▒роХрпНроХрпБроородро┐ роЪрпЖропрпНродрпБ роЙроЩрпНроХро│рпН роЪро╛родройродрпНродро┐ро▒рпНроХро╛роХ родрпКроХрпБроХрпНроХро▓ро╛роорпН. роЗроирпНрод ро╡ро┤ро┐ропро┐ро▓рпН Arduino роирпВро▓роХроЩрпНроХро│рпН Arduino framework роР роЖродро░ро┐роХрпНроХрпБроорпН роОроирпНрод роЪро╛родройродрпНродро┐ро▓рпБроорпН ро╡рпЗро▓рпИ роЪрпЖропрпНропрпБроорпН, роЕроирпНрод роирпВро▓роХродрпНродро┐ро▒рпНроХрпБ родрпЗро╡рпИропро╛рой роХрпБро▒ро┐рокрпНрокро┐роЯрпНроЯ ро╣ро╛ро░рпНроЯрпНро╡рпЗро░рпИ роЪро╛родройроорпН роХрпКрогрпНроЯро┐ро░рпБроирпНродро╛ро▓рпН. роЪро┐ро▓ роирпВро▓роХроЩрпНроХро│рпН, роЙродро╛ро░рогрооро╛роХ Seeed WiFi роирпВро▓роХроЩрпНроХро│рпН, роХрпБро▒ро┐рокрпНрокро┐роЯрпНроЯ ро╣ро╛ро░рпНроЯрпНро╡рпЗро░рпБроХрпНроХрпБ роороЯрпНроЯрпБроорпЗ родройро┐рокрпНрокроЯрпНроЯро╡рпИ.

роирпВро▓роХроЩрпНроХро│рпН роЙро▓роХро│ро╛ро╡ро┐ропрооро╛роХ роиро┐ро▒рпБро╡рокрпНрокроЯрпНроЯрпБ, родрпЗро╡рпИропро╛ройро╛ро▓рпН родрпКроХрпБроХрпНроХрокрпНрокроЯро▓ро╛роорпН, роЕро▓рпНро▓родрпБ роХрпБро▒ро┐рокрпНрокро┐роЯрпНроЯ родро┐роЯрпНроЯродрпНродро┐ро▓рпН роиро┐ро▒рпБро╡рокрпНрокроЯро▓ро╛роорпН. роЗроирпНрод рокрогро┐роХрпНроХро╛рой роирпВро▓роХроЩрпНроХро│рпН родро┐роЯрпНроЯродрпНродро┐ро▓рпН роиро┐ро▒рпБро╡рокрпНрокроЯрпБроорпН.

тЬЕ роирпВро▓роХ роорпЗро▓ро╛рогрпНроорпИ рооро▒рпНро▒рпБроорпН роирпВро▓роХроЩрпНроХро│рпИ роОро╡рпНро╡ро╛ро▒рпБ роХрогрпНроЯро▒ро┐роирпНродрпБ роиро┐ро▒рпБро╡рпБро╡родрпБ роОройрпНрокродрпИ [PlatformIO роирпВро▓роХ роЖро╡рогродрпНродро┐ро▓рпН](https://docs.platformio.org/en/latest/librarymanager/index.html) роорпЗро▓рпБроорпН роЕро▒ро┐ропро▓ро╛роорпН.

### рокрогро┐роХрпНроХрпВро▒рпНро▒рпБ - WiFi рооро▒рпНро▒рпБроорпН MQTT Arduino роирпВро▓роХроЩрпНроХро│рпИ роиро┐ро▒рпБро╡ро╡рпБроорпН

Arduino роирпВро▓роХроЩрпНроХро│рпИ роиро┐ро▒рпБро╡ро╡рпБроорпН.

1. VS Code роЗро▓рпН nightlight родро┐роЯрпНроЯродрпНродрпИ родро┐ро▒роХрпНроХро╡рпБроорпН.

1. `platformio.ini` роХрпЛрокрпНрокро┐ройрпН роЗро▒рпБродро┐ропро┐ро▓рпН рокро┐ройрпНро╡ро░рпБро╡ройро╡ро▒рпНро▒рпИ роЪрпЗро░рпНроХрпНроХро╡рпБроорпН:

    ```ini
    lib_deps =
        seeed-studio/Seeed Arduino rpcWiFi @ 1.0.5
        seeed-studio/Seeed Arduino FS @ 2.1.1
        seeed-studio/Seeed Arduino SFUD @ 2.0.2
        seeed-studio/Seeed Arduino rpcUnified @ 2.1.3
        seeed-studio/Seeed_Arduino_mbedtls @ 3.0.1
    ```

    роЗродрпБ Seeed WiFi роирпВро▓роХроЩрпНроХро│рпИ роЗро▒роХрпНроХрпБроородро┐ роЪрпЖропрпНроХро┐ро▒родрпБ. `@ <number>` ро╡роЯро┐ро╡роорпН роирпВро▓роХродрпНродро┐ройрпН роХрпБро▒ро┐рокрпНрокро┐роЯрпНроЯ рокродро┐рокрпНрокрпБ роОрогрпНрогрпИ роХрпБро▒ро┐роХрпНроХро┐ро▒родрпБ.

    > ЁЯТБ роирпАроЩрпНроХро│рпН `@ <number>` роР роирпАроХрпНроХро┐ роОрокрпНрокрпЛродрпБроорпН роирпВро▓роХроЩрпНроХро│ро┐ройрпН роЪроорпАрокродрпНродро┐роп рокродро┐рокрпНрокрпИрокрпН рокропройрпНрокроЯрпБродрпНродро▓ро╛роорпН, роЖройро╛ро▓рпН роХрпАро┤рпЗ роЙро│рпНро│ роХрпБро▒ро┐ропрпАроЯрпБ ро╡рпЗро▓рпИ роЪрпЖропрпНропрпБроорпН роОройрпНро▒рпБ роОроирпНрод роЙродрпНродро░ро╡ро╛родроорпБроорпН роЗро▓рпНро▓рпИ. роЗроЩрпНроХрпБ роЙро│рпНро│ роХрпБро▒ро┐ропрпАроЯрпБ роЗроирпНрод роирпВро▓роХроЩрпНроХро│ро┐ройрпН рокродро┐рокрпНрокрпБроЯройрпН роЪрпЛродро┐роХрпНроХрокрпНрокроЯрпНроЯрпБро│рпНро│родрпБ.

    роирпВро▓роХроЩрпНроХро│рпИроЪрпН роЪрпЗро░рпНроХрпНроХ роЗродрпБро╡рпЗ рокрпЛродрпБрооро╛ройродрпБ. роЕроЯрпБродрпНрод роорпБро▒рпИ PlatformIO родро┐роЯрпНроЯродрпНродрпИ роЙро░рпБро╡ро╛роХрпНроХрпБроорпН рокрпЛродрпБ, роЗроирпНрод роирпВро▓роХроЩрпНроХро│рпБроХрпНроХро╛рой роорпВро▓роХрпН роХрпБро▒ро┐ропрпАроЯрпБроХро│рпИ рокродро┐ро╡ро┐ро▒роХрпНроХро┐ роЙроЩрпНроХро│рпН родро┐роЯрпНроЯродрпНродро┐ро▓рпН родрпКроХрпБроХрпНроХрпБроорпН.

1. `lib_deps` роЗро▓рпН рокро┐ройрпНро╡ро░рпБро╡ройро╡ро▒рпНро▒рпИроЪрпН роЪрпЗро░рпНроХрпНроХро╡рпБроорпН:

    ```ini
    knolleary/PubSubClient @ 2.8
    ```

    роЗродрпБ [PubSubClient](https://github.com/knolleary/pubsubclient), роТро░рпБ Arduino MQTT client роР роЗро▒роХрпНроХрпБроородро┐ роЪрпЖропрпНроХро┐ро▒родрпБ.

## WiFi роХрпНроХрпБ роЗрогрпИроХрпНроХро╡рпБроорпН

роЗрокрпНрокрпЛродрпБ Wio Terminal WiFi роХрпНроХрпБ роЗрогрпИроХрпНроХ роорпБроЯро┐ропрпБроорпН.

### рокрогро┐роХрпНроХрпВро▒рпНро▒рпБ - WiFi роХрпНроХрпБ роЗрогрпИроХрпНроХро╡рпБроорпН

Wio Terminal роР WiFi роХрпНроХрпБ роЗрогрпИроХрпНроХро╡рпБроорпН.

1. `src` роХрпЛрокрпНрокрпБро▒рпИропро┐ро▓рпН `config.h` роОройрпНро▒ рокрпБродро┐роп роХрпЛрокрпНрокрпИ роЙро░рпБро╡ро╛роХрпНроХро╡рпБроорпН. роЗродрпИ `src` роХрпЛрокрпНрокрпБро▒рпИ роЕро▓рпНро▓родрпБ роЕродро┐ро▓рпН роЙро│рпНро│ `main.cpp` роХрпЛрокрпНрокрпИродрпН родрпЗро░рпНроирпНродрпЖроЯрпБродрпНродрпБ, **New file** рокрпКродрпНродро╛ройрпИ роОроХрпНро╕рпНрокрпНро│рпЛро░ро░ро┐ро▓рпН родрпЗро░рпНроирпНродрпЖроЯрпБродрпНродрпБ роЪрпЖропрпНропро▓ро╛роорпН. роЗроирпНрод рокрпКродрпНродро╛ройрпН роЙроЩрпНроХро│рпН роХро░рпНроЪро░рпН роОроХрпНро╕рпНрокрпНро│рпЛро░ро░рпН роорпАродрпБ роЗро░рпБроХрпНроХрпБроорпН рокрпЛродрпБ роороЯрпНроЯрпБроорпЗ родрпЛройрпНро▒рпБроорпН.

    ![рокрпБродро┐роп роХрпЛрокрпНрокрпБ рокрпКродрпНродро╛ройрпН](../../../../../translated_images/vscode-new-file-button.182702340fe6723c8cbb4cfa1a9a9fb0d0a5227643b4e46b91ff67b07a39a92f.ta.png)

1. роЙроЩрпНроХро│рпН WiFi роЪро╛ройрпНро▒рпБроХро│рпИ ро╡ро░рпИропро▒рпБроХрпНроХ роЗроирпНрод роХрпЛрокрпНрокро┐ро▓рпН рокро┐ройрпНро╡ро░рпБроорпН роХрпБро▒ро┐ропрпАроЯрпНроЯрпИроЪрпН роЪрпЗро░рпНроХрпНроХро╡рпБроорпН:

    ```cpp
    #pragma once

    #include <string>
    
    using namespace std;
    
    // WiFi credentials
    const char *SSID = "<SSID>";
    const char *PASSWORD = "<PASSWORD>";
    ```

    `<SSID>` роР роЙроЩрпНроХро│рпН WiFi роЗройрпН SSID роЖроХ рооро╛ро▒рпНро▒ро╡рпБроорпН. `<PASSWORD>` роР роЙроЩрпНроХро│рпН WiFi роХроЯро╡рпБроЪрпНроЪрпКро▓рпНро▓ро╛роХ рооро╛ро▒рпНро▒ро╡рпБроорпН.

1. `main.cpp` роХрпЛрокрпНрокрпИродрпН родро┐ро▒роХрпНроХро╡рпБроорпН.

1. роХрпЛрокрпНрокро┐ройрпН роорпЗро▓рпН рокро┐ройрпНро╡ро░рпБроорпН `#include` роЗропроХрпНроХроЩрпНроХро│рпИроЪрпН роЪрпЗро░рпНроХрпНроХро╡рпБроорпН:

    ```cpp
    #include <PubSubClient.h>
    #include <rpcWiFi.h>
    #include <SPI.h>
    
    #include "config.h"
    ```

    роЗродрпБ роирпАроЩрпНроХро│рпН роорпБройрпНрокрпБ роЪрпЗро░рпНродрпНрод роирпВро▓роХроЩрпНроХро│рпБроХрпНроХро╛рой родро▓рпИрокрпНрокрпБ роХрпЛрокрпНрокрпБроХро│рпИ роЙро│рпНро│роЯроХрпНроХрпБроХро┐ро▒родрпБ, роорпЗро▓рпБроорпН config родро▓рпИрокрпНрокрпБ роХрпЛрокрпНрокрпИропрпБроорпН роЪрпЗро░рпНроХрпНроХро┐ро▒родрпБ. роЗроирпНрод родро▓рпИрокрпНрокрпБ роХрпЛрокрпНрокрпБроХро│рпН PlatformIO роХрпНроХрпБ роирпВро▓роХроЩрпНроХро│ро┐ро▓ро┐ро░рпБроирпНродрпБ роХрпБро▒ро┐ропрпАроЯрпНроЯрпИ роХрпКрогрпНроЯрпБ ро╡ро░ роЪрпКро▓рпНро▓ родрпЗро╡рпИ. роЗроирпНрод родро▓рпИрокрпНрокрпБ роХрпЛрокрпНрокрпБроХро│рпИ ро╡рпЖро│ро┐рокрпНрокроЯрпИропро╛роХ роЪрпЗро░рпНроХрпНроХро╛рооро▓рпН роЪро┐ро▓ роХрпБро▒ро┐ропрпАроЯрпБроХро│рпН родрпКроХрпБроХрпНроХрокрпНрокроЯро╛родрпБ, роорпЗро▓рпБроорпН родрпКроХрпБрокрпНрокро╛ро│ро░рпН рокро┐ро┤рпИроХро│рпН роПро▒рпНрокроЯрпБроорпН.

1. `setup` роЪрпЖропро▓рпНрокро╛роЯрпНроЯро┐ройрпН роорпЗро▓рпН рокро┐ройрпНро╡ро░рпБроорпН роХрпБро▒ро┐ропрпАроЯрпНроЯрпИроЪрпН роЪрпЗро░рпНроХрпНроХро╡рпБроорпН:

    ```cpp
    void connectWiFi()
    {
        while (WiFi.status() != WL_CONNECTED)
        {
            Serial.println("Connecting to WiFi..");
            WiFi.begin(SSID, PASSWORD);
            delay(500);
        }
    
        Serial.println("Connected!");
    }
    ```

    роЗроирпНрод роХрпБро▒ро┐ропрпАроЯрпБ роЪро╛родройроорпН WiFi роХрпНроХрпБ роЗрогрпИроХрпНроХрокрпНрокроЯро╛род рокрпЛродрпБ роороЯроХрпНроХро┐, config родро▓рпИрокрпНрокрпБ роХрпЛрокрпНрокро┐ро▓ро┐ро░рпБроирпНродрпБ SSID рооро▒рпНро▒рпБроорпН роХроЯро╡рпБроЪрпНроЪрпКро▓рпНро▓рпИрокрпН рокропройрпНрокроЯрпБродрпНродро┐ роЗрогрпИроХрпНроХ роорпБропро▒рпНроЪро┐роХрпНроХро┐ро▒родрпБ.

1. рокро┐ройрпНроХро│рпН роЙро│рпНро│роорпИроХрпНроХрокрпНрокроЯрпНроЯ рокро┐ро▒роХрпБ, `setup` роЪрпЖропро▓рпНрокро╛роЯрпНроЯро┐ройрпН роХрпАро┤рпЗ роЗроирпНрод роЪрпЖропро▓рпНрокро╛роЯрпНроЯро┐ро▒рпНроХро╛рой роЕро┤рпИрокрпНрокрпИроЪрпН роЪрпЗро░рпНроХрпНроХро╡рпБроорпН.

    ```cpp
    connectWiFi();
    ```

1. WiFi роЗрогрпИрокрпНрокрпБ ро╡рпЗро▓рпИ роЪрпЖропрпНроХро┐ро▒родрпБ роОройрпНрокродрпИроЪрпН роЪро░ро┐рокро╛ро░рпНроХрпНроХ роЗроирпНрод роХрпБро▒ро┐ропрпАроЯрпНроЯрпИ роЙроЩрпНроХро│рпН роЪро╛родройродрпНродро┐ро▒рпНроХрпБ рокродро┐ро╡рпЗро▒рпНро▒ро╡рпБроорпН. роирпАроЩрпНроХро│рпН роЗродрпИ роЪрпАро░ро┐ропро▓рпН рооро╛ройро┐роЯрпНроЯро░ро┐ро▓рпН роХро╛рогро▓ро╛роорпН.

    ```output
    > Executing task: platformio device monitor <
    
    --- Available filters and text transformations: colorize, debug, default, direct, hexlify, log2file, nocontrol, printable, send_on_enter, time
    --- More details at http://bit.ly/pio-monitor-filters
    --- Miniterm on /dev/cu.usbmodem1101  9600,8,N,1 ---
    --- Quit: Ctrl+C | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H ---
    Connecting to WiFi..
    Connected!
    ```

## MQTT роХрпНроХрпБ роЗрогрпИроХрпНроХро╡рпБроорпН

Wio Terminal WiFi роХрпНроХрпБ роЗрогрпИроХрпНроХрокрпНрокроЯрпНроЯ рокро┐ро▒роХрпБ, роЕродрпБ MQTT broker роХрпНроХрпБ роЗрогрпИроХрпНроХ роорпБроЯро┐ропрпБроорпН.

### рокрогро┐роХрпНроХрпВро▒рпНро▒рпБ - MQTT роХрпНроХрпБ роЗрогрпИроХрпНроХро╡рпБроорпН

MQTT broker роХрпНроХрпБ роЗрогрпИроХрпНроХро╡рпБроорпН.

1. MQTT broker роХрпНроХро╛рой роЗрогрпИрокрпНрокрпБ ро╡ро┐ро╡ро░роЩрпНроХро│рпИ ро╡ро░рпИропро▒рпБроХрпНроХ `config.h` роХрпЛрокрпНрокро┐ройрпН роЗро▒рпБродро┐ропро┐ро▓рпН рокро┐ройрпНро╡ро░рпБроорпН роХрпБро▒ро┐ропрпАроЯрпНроЯрпИроЪрпН роЪрпЗро░рпНроХрпНроХро╡рпБроорпН:

    ```cpp
    // MQTT settings
    const string ID = "<ID>";
    
    const string BROKER = "test.mosquitto.org";
    const string CLIENT_NAME = ID + "nightlight_client";
    ```

    `<ID>` роР роЗроирпНрод роЪро╛родрой роХро┐ро│рпИропройрпНроЯрпН рокрпЖропро░ро╛роХро╡рпБроорпН, рокро┐ройрпНройро░рпН роЗроирпНрод роЪро╛родройроорпН ро╡рпЖро│ро┐ропро┐роЯрпБроорпН рооро▒рпНро▒рпБроорпН роЪроирпНродро╛ рокрпЖро▒рпБроорпН родро▓рпИрокрпНрокрпБроХро│рпБроХрпНроХро╛рой рокрпЖропро░ро╛роХро╡рпБроорпН рокропройрпНрокроЯрпБродрпНродрокрпНрокроЯрпБроорпН родройро┐родрпНрод ID роЖроХ рооро╛ро▒рпНро▒ро╡рпБроорпН. *test.mosquitto.org* broker рокрпКродрпБро╡ро╛ройродрпБ рооро▒рпНро▒рпБроорпН рокро▓ро░ро╛ро▓рпН рокропройрпНрокроЯрпБродрпНродрокрпНрокроЯрпБроХро┐ро▒родрпБ, роЗроирпНрод рокрогро┐роХрпНроХро╛рой рооро▒рпНро▒ рооро╛рогро╡ро░рпНроХро│рпИропрпБроорпН роЪрпЗро░рпНродрпНродрпБ. родройро┐родрпНрод MQTT роХро┐ро│рпИропройрпНроЯрпН рокрпЖропро░рпН рооро▒рпНро▒рпБроорпН родро▓рпИрокрпНрокрпБ рокрпЖропро░рпНроХро│рпН роЙроЩрпНроХро│рпН роХрпБро▒ро┐ропрпАроЯрпБ рооро▒рпНро▒ро╡ро░рпНроХро│рпБроЯройрпН роорпЛродро╛рооро▓рпН роЗро░рпБрокрпНрокродрпИ роЙро▒рпБродро┐роЪрпЖропрпНроХро┐ро▒родрпБ. роЗроирпНрод ID роР роирпАроЩрпНроХро│рпН роЗроирпНрод рокрогро┐роХрпНроХро╛рой роЪро░рпНро╡ро░рпН роХрпБро▒ро┐ропрпАроЯрпНроЯрпИ роЙро░рпБро╡ро╛роХрпНроХрпБроорпН рокрпЛродрпБ родрпЗро╡рпИрокрпНрокроЯрпБроорпН.

    > ЁЯТБ роирпАроЩрпНроХро│рпН [GUIDGen](https://www.guidgen.com) рокрпЛройрпНро▒ роТро░рпБ роЗрогрпИропродро│родрпНродрпИрокрпН рокропройрпНрокроЯрпБродрпНродро┐ родройро┐родрпНрод ID роР роЙро░рпБро╡ро╛роХрпНроХро▓ро╛роорпН.

    `BROKER` роОройрпНрокродрпБ MQTT broker роЗройрпН URL роЖроХрпБроорпН.

    `CLIENT_NAME` роОройрпНрокродрпБ broker роЗро▓рпН роЗроирпНрод MQTT роХро┐ро│рпИропройрпНроЯро┐ро▒рпНроХро╛рой родройро┐родрпНрод рокрпЖропро░ро╛роХрпБроорпН.

1. `main.cpp` роХрпЛрокрпНрокрпИродрпН родро┐ро▒роХрпНроХро╡рпБроорпН, `connectWiFi` роЪрпЖропро▓рпНрокро╛роЯрпНроЯро┐ройрпН роХрпАро┤рпЗ рооро▒рпНро▒рпБроорпН `setup` роЪрпЖропро▓рпНрокро╛роЯрпНроЯро┐ройрпН роорпЗро▓рпН рокро┐ройрпНро╡ро░рпБроорпН роХрпБро▒ро┐ропрпАроЯрпНроЯрпИроЪрпН роЪрпЗро░рпНроХрпНроХро╡рпБроорпН:

    ```cpp
    WiFiClient wioClient;
    PubSubClient client(wioClient);
    ```

    роЗроирпНрод роХрпБро▒ро┐ропрпАроЯрпБ Wio Terminal WiFi роирпВро▓роХроЩрпНроХро│рпИрокрпН рокропройрпНрокроЯрпБродрпНродро┐ WiFi роХро┐ро│рпИропройрпНроЯрпИ роЙро░рпБро╡ро╛роХрпНроХрпБроХро┐ро▒родрпБ рооро▒рпНро▒рпБроорпН роЕродрпИ рокропройрпНрокроЯрпБродрпНродро┐ MQTT роХро┐ро│рпИропройрпНроЯрпИ роЙро░рпБро╡ро╛роХрпНроХрпБроХро┐ро▒родрпБ.

1. роЗроирпНрод роХрпБро▒ро┐ропрпАроЯрпНроЯро┐ройрпН роХрпАро┤рпЗ рокро┐ройрпНро╡ро░рпБро╡ройро╡ро▒рпНро▒рпИроЪрпН роЪрпЗро░рпНроХрпНроХро╡рпБроорпН:

    ```cpp
    void reconnectMQTTClient()
    {
        while (!client.connected())
        {
            Serial.print("Attempting MQTT connection...");
    
            if (client.connect(CLIENT_NAME.c_str()))
            {
                Serial.println("connected");
            }
            else
            {
                Serial.print("Retying in 5 seconds - failed, rc=");
                Serial.println(client.state());
                
                delay(5000);
            }
        }
    }
    ```

    роЗроирпНрод роЪрпЖропро▓рпНрокро╛роЯрпБ MQTT broker роХрпНроХрпБ роЗрогрпИрокрпНрокрпИ роЪрпЛродро┐родрпНродрпБ, роЗрогрпИроХрпНроХрокрпНрокроЯро╡ро┐ро▓рпНро▓рпИ роОройрпНро▒ро╛ро▓рпН роорпАрогрпНроЯрпБроорпН роЗрогрпИроХрпНроХро┐ро▒родрпБ. роЗродрпБ роЗрогрпИроХрпНроХрокрпНрокроЯро╛род роирпЗро░родрпНродро┐ро▓рпН роороЯроХрпНроХро┐, config родро▓рпИрокрпНрокрпБ роХрпЛрокрпНрокро┐ро▓рпН ро╡ро░рпИропро▒рпБроХрпНроХрокрпНрокроЯрпНроЯ родройро┐родрпНрод роХро┐ро│рпИропройрпНроЯрпН рокрпЖропро░рпИрокрпН рокропройрпНрокроЯрпБродрпНродро┐ роЗрогрпИроХрпНроХ роорпБропро▒рпНроЪро┐роХрпНроХро┐ро▒родрпБ.

    роЗрогрпИрокрпНрокрпБ родрпЛро▓рпНро╡ро┐ропроЯрпИроирпНродро╛ро▓рпН, 5 ро╡ро┐ройро╛роЯро┐роХро│рпН роХро┤ро┐родрпНродрпБ роорпАрогрпНроЯрпБроорпН роорпБропро▒рпНроЪро┐роХрпНроХро┐ро▒родрпБ.

1. `reconnectMQTTClient` роЪрпЖропро▓рпНрокро╛роЯрпНроЯро┐ройрпН роХрпАро┤рпЗ рокро┐ройрпНро╡ро░рпБроорпН роХрпБро▒ро┐ропрпАроЯрпНроЯрпИроЪрпН роЪрпЗро░рпНроХрпНроХро╡рпБроорпН:

    ```cpp
    void createMQTTClient()
    {
        client.setServer(BROKER.c_str(), 1883);
        reconnectMQTTClient();
    }
    ```

    роЗроирпНрод роХрпБро▒ро┐ропрпАроЯрпБ роХро┐ро│рпИропройрпНроЯро┐ро▒рпНроХро╛рой MQTT broker роР роЕроорпИроХрпНроХро┐ро▒родрпБ, роорпЗро▓рпБроорпН роЪрпЖропрпНродро┐ рокрпЖро▒рокрпНрокроЯрпБроорпН рокрпЛродрпБ callback роР роЕроорпИроХрпНроХро┐ро▒родрпБ. рокро┐ройрпНройро░рпН broker роХрпНроХрпБ роЗрогрпИроХрпНроХ роорпБропро▒рпНроЪро┐роХрпНроХро┐ро▒родрпБ.

1. WiFi роЗрогрпИроХрпНроХрокрпНрокроЯрпНроЯ рокро┐ро▒роХрпБ `setup` роЪрпЖропро▓рпНрокро╛роЯрпНроЯро┐ро▓рпН `createMQTTClient` роЪрпЖропро▓рпНрокро╛роЯрпНроЯрпИ роЕро┤рпИроХрпНроХро╡рпБроорпН.

1. роорпБро┤рпБ `loop` роЪрпЖропро▓рпНрокро╛роЯрпНроЯрпИ рокро┐ройрпНро╡ро░рпБроорпН роХрпБро▒ро┐ропрпАроЯрпНроЯрпБроЯройрпН рооро╛ро▒рпНро▒ро╡рпБроорпН:

    ```cpp
    void loop()
    {
        reconnectMQTTClient();
        client.loop();
    
        delay(2000);
    }
    ```

    роЗроирпНрод роХрпБро▒ро┐ропрпАроЯрпБ MQTT broker роХрпНроХрпБ роорпАрогрпНроЯрпБроорпН роЗрогрпИрокрпНрокродройрпН роорпВро▓роорпН родрпКроЯроЩрпНроХрпБроХро┐ро▒родрпБ. роЗроирпНрод роЗрогрпИрокрпНрокрпБроХро│рпН роОро│ро┐родро╛роХ роорпБро▒ро┐роирпНродрпБро╡ро┐роЯроХрпНроХрпВроЯрпБроорпН, роОройро╡рпЗ роЕро╡ро▒рпНро▒рпИ роЕроЯро┐роХрпНроХроЯро┐ роЪрпЛродро┐родрпНродрпБ, родрпЗро╡рпИропро╛ройро╛ро▓рпН роорпАрогрпНроЯрпБроорпН роЗрогрпИрокрпНрокродрпБ роиро▓рпНро▓родрпБ. рокро┐ройрпНройро░рпН MQTT роХро┐ро│рпИропройрпНроЯро┐ро▓рпН `loop` роорпБро▒рпИропрпИ роЕро┤рпИроХрпНроХро┐ро▒родрпБ, роЪроирпНродро╛ рокрпЖро▒рпБроорпН родро▓рпИрокрпНрокро┐ро▓рпН ро╡ро░рпБроорпН роОроирпНрод роЪрпЖропрпНродро┐роХро│рпИропрпБроорпН роЪрпЖропро▓рпНрокроЯрпБродрпНрод. роЗроирпНрод рокропройрпНрокро╛роЯрпБ роТро▒рпНро▒рпИ-родрпЛро░ро╛ропрооро╛роХ роЪрпЖропро▓рпНрокроЯрпБроХро┐ро▒родрпБ, роОройро╡рпЗ рокро┐ройрпНройрогро┐ родрпБро░рпБро╡родрпНродро┐ро▓рпН роЪрпЖропрпНродро┐роХро│рпИрокрпН рокрпЖро▒ роорпБроЯро┐ропро╛родрпБ, роОройро╡рпЗ роирпЖроЯрпНро╡рпКро░рпНроХрпН роЗрогрпИрокрпНрокро┐ро▓рпН роХро╛родрпНродро┐ро░рпБроХрпНроХрпБроорпН роОроирпНрод роЪрпЖропрпНродро┐роХро│рпИропрпБроорпН роЪрпЖропро▓рпНрокроЯрпБродрпНрод роорпБроХрпНроХро┐роп родрпБро░рпБро╡родрпНродро┐ро▓рпН роирпЗро░роорпН роТродрпБроХрпНроХ ро╡рпЗрогрпНроЯрпБроорпН.

    роЗро▒рпБродро┐ропро╛роХ, 2 ро╡ро┐ройро╛роЯро┐роХро│рпН родро╛роородроорпН роТро│ро┐ роиро┐ро▓рпИроХро│рпН роЕроЯро┐роХрпНроХроЯро┐ роЕройрпБрокрпНрокрокрпНрокроЯро╛рооро▓рпН роЗро░рпБроХрпНроХро╡рпБроорпН, роЪро╛родройродрпНродро┐ройрпН рооро┐ройрпНроЪро╛ро░ роирпБроХро░рпНро╡рпИ роХрпБро▒рпИроХрпНроХро╡рпБроорпН роЙро▒рпБродро┐роЪрпЖропрпНроХро┐ро▒родрпБ.

1. роЙроЩрпНроХро│рпН Wio Terminal роХрпНроХрпБ роХрпБро▒ро┐ропрпАроЯрпНроЯрпИ рокродро┐ро╡рпЗро▒рпНро▒ро╡рпБроорпН, WiFi рооро▒рпНро▒рпБроорпН MQTT роХрпНроХрпБ роЪро╛родройроорпН роЗрогрпИроХрпНроХрокрпНрокроЯрпБро╡родрпИ роЪрпАро░ро┐ропро▓рпН рооро╛ройро┐роЯрпНроЯро░ро┐ро▓рпН роХро╛рогро╡рпБроорпН.

    ```output
    > Executing task: platformio device monitor <
    
    source /Users/jimbennett/GitHub/IoT-For-Beginners/1-getting-started/lessons/4-connect-internet/code-mqtt/wio-terminal/nightlight/.venv/bin/activate
    --- Available filters and text transformations: colorize, debug, default, direct, hexlify, log2file, nocontrol, printable, send_on_enter, time
    --- More details at http://bit.ly/pio-monitor-filters
    --- Miniterm on /dev/cu.usbmodem1201  9600,8,N,1 ---
    --- Quit: Ctrl+C | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H ---
    Connecting to WiFi..
    Connected!
    Attempting MQTT connection...connected
    ```

> ЁЯТБ роЗроирпНрод роХрпБро▒ро┐ропрпАроЯрпНроЯрпИ [code-mqtt/wio-terminal](../../../../../1-getting-started/lessons/4-connect-internet/code-mqtt/wio-terminal) роХрпЛрокрпНрокрпБро▒рпИропро┐ро▓рпН роХро╛рогро▓ро╛роорпН.

ЁЯША роирпАроЩрпНроХро│рпН роЙроЩрпНроХро│рпН роЪро╛родройродрпНродрпИ MQTT broker роХрпНроХрпБ ро╡рпЖро▒рпНро▒ро┐роХро░рооро╛роХ роЗрогрпИродрпНродрпБро╡ро┐роЯрпНроЯрпАро░рпНроХро│рпН.

---

**роХрпБро▒ро┐рокрпНрокрпБ**:  
роЗроирпНрод роЖро╡рогроорпН [Co-op Translator](https://github.com/Azure/co-op-translator) роОройрпНро▒ AI роорпКро┤ро┐рокрпЖропро░рпНрокрпНрокрпБ роЪрпЗро╡рпИропрпИрокрпН рокропройрпНрокроЯрпБродрпНродро┐ роорпКро┤ро┐рокрпЖропро░рпНроХрпНроХрокрпНрокроЯрпНроЯрпБро│рпНро│родрпБ. роиро╛роЩрпНроХро│рпН родрпБро▓рпНро▓ро┐ропродрпНродро┐ро▒рпНроХро╛роХ роорпБропро▒рпНроЪро┐роХрпНроХро┐ройрпНро▒рпЛроорпН, роЖройро╛ро▓рпН родро╛ройро┐ропроЩрпНроХро┐ роорпКро┤ро┐рокрпЖропро░рпНрокрпНрокрпБроХро│ро┐ро▓рпН рокро┐ро┤рпИроХро│рпН роЕро▓рпНро▓родрпБ родро╡ро▒ро╛рой родроХро╡ро▓рпНроХро│рпН роЗро░рпБроХрпНроХроХрпНроХрпВроЯрпБроорпН роОройрпНрокродрпИ родропро╡рпБроЪрпЖропрпНродрпБ роХро╡ройродрпНродро┐ро▓рпН роХрпКро│рпНро│рпБроЩрпНроХро│рпН. роЕродройрпН родро╛ропрпНроорпКро┤ро┐ропро┐ро▓рпН роЙро│рпНро│ роорпВро▓ роЖро╡рогроорпН роЕродро┐роХро╛ро░рокрпНрокрпВро░рпНро╡ роЖродро╛ро░рооро╛роХ роХро░рпБродрокрпНрокроЯ ро╡рпЗрогрпНроЯрпБроорпН. роорпБроХрпНроХро┐ропрооро╛рой родроХро╡ро▓рпНроХро│рпБроХрпНроХрпБ, родрпКро┤ро┐ро▓рпНроорпБро▒рпИ рооройро┐род роорпКро┤ро┐рокрпЖропро░рпНрокрпНрокрпБ рокро░ро┐роирпНродрпБро░рпИроХрпНроХрокрпНрокроЯрпБроХро┐ро▒родрпБ. роЗроирпНрод роорпКро┤ро┐рокрпЖропро░рпНрокрпНрокрпИрокрпН рокропройрпНрокроЯрпБродрпНродрпБро╡родро╛ро▓рпН роПро▒рпНрокроЯрпБроорпН роОроирпНрод родро╡ро▒ро╛рой рокрпБро░ро┐родро▓рпНроХро│рпН роЕро▓рпНро▓родрпБ родро╡ро▒ро╛рой ро╡ро┐ро│роХрпНроХроЩрпНроХро│рпБроХрпНроХрпБ роиро╛роЩрпНроХро│рпН рокрпКро▒рпБрокрпНрокро▓рпНро▓.