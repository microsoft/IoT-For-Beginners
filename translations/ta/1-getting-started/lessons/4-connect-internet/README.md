<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "71b5040e0b3472f1c0949c9b55f224c0",
  "translation_date": "2025-10-11T11:20:38+00:00",
  "source_file": "1-getting-started/lessons/4-connect-internet/README.md",
  "language_code": "ta"
}
-->
# роЙроЩрпНроХро│рпН роЪро╛родройродрпНродрпИ роЗрогрпИропродрпНродрпБроЯройрпН роЗрогрпИроХрпНроХро╡рпБроорпН

![роЗроирпНрод рокро╛роЯродрпНродро┐ройрпН ро╕рпНроХрпЖроЯрпНроЪрпН роирпЛроЯрпН](../../../../../translated_images/lesson-4.7344e074ea68fa545fd320b12dce36d72dd62d28c3b4596cb26cf315f434b98f.ta.jpg)

> ро╕рпНроХрпЖроЯрпНроЪрпН роирпЛроЯрпН: [роиро┐родрпНропро╛ роиро░роЪро┐роорпНрооройрпН](https://github.com/nitya). рокроЯродрпНродрпИ роХро┐ро│ро┐роХрпН роЪрпЖропрпНродрпБ рокрпЖро░ро┐роп рокродро┐рокрпНрокрпИрокрпН рокро╛ро░рпБроЩрпНроХро│рпН.

роЗроирпНрод рокро╛роЯроорпН [Hello IoT series](https://youtube.com/playlist?list=PLmsFUfdnGr3xRts0TIwyaHyQuHaNQcb6-) рооро▒рпНро▒рпБроорпН [Microsoft Reactor](https://developer.microsoft.com/reactor/?WT.mc_id=academic-17441-jabenn) роорпВро▓роорпН роХро▒рпНрокро┐роХрпНроХрокрпНрокроЯрпНроЯродрпБ. роЗроирпНрод рокро╛роЯроорпН 2 ро╡рпАроЯро┐ропрпЛроХрпНроХро│ро╛роХ роХро▒рпНрокро┐роХрпНроХрокрпНрокроЯрпНроЯродрпБ - роТро░рпБ роорогро┐ роирпЗро░ рокро╛роЯроорпН рооро▒рпНро▒рпБроорпН роТро░рпБ роорогро┐ роирпЗро░ роЕро▓рпБро╡ро▓роХ роирпЗро░роорпН, рокро╛роЯродрпНродро┐ройрпН рокроХрпБродро┐роХро│рпИ роЖро┤рооро╛роХ роЖро░ро╛ропрпНроирпНродрпБ роХрпЗро│рпНро╡ро┐роХро│рпБроХрпНроХрпБ рокродро┐ро▓ро│ро┐роХрпНроХ.

[![рокро╛роЯроорпН 4: роЙроЩрпНроХро│рпН роЪро╛родройродрпНродрпИ роЗрогрпИропродрпНродрпБроЯройрпН роЗрогрпИроХрпНроХро╡рпБроорпН](https://img.youtube.com/vi/O4dd172mZhs/0.jpg)](https://youtu.be/O4dd172mZhs)

[![рокро╛роЯроорпН 4: роЙроЩрпНроХро│рпН роЪро╛родройродрпНродрпИ роЗрогрпИропродрпНродрпБроЯройрпН роЗрогрпИроХрпНроХро╡рпБроорпН - роЕро▓рпБро╡ро▓роХ роирпЗро░роорпН](https://img.youtube.com/vi/j-cVCzRDE2Q/0.jpg)](https://youtu.be/j-cVCzRDE2Q)

> ЁЯОе роорпЗро▓рпЗ роЙро│рпНро│ рокроЯроЩрпНроХро│рпИ роХро┐ро│ро┐роХрпН роЪрпЖропрпНродрпБ ро╡рпАроЯро┐ропрпЛроХрпНроХро│рпИрокрпН рокро╛ро░рпБроЩрпНроХро│рпН

## рокро╛роЯродрпНродро┐ро▒рпНроХрпБ роорпБройрпН ро╡ро┐ройро╛роЯро┐ ро╡ро┐ройро╛

[рокро╛роЯродрпНродро┐ро▒рпНроХрпБ роорпБройрпН ро╡ро┐ройро╛роЯро┐ ро╡ро┐ройро╛](https://black-meadow-040d15503.1.azurestaticapps.net/quiz/7)

## роЕро▒ро┐роорпБроХроорпН

IoT роЗро▓рпН роЙро│рпНро│ **I** роОройрпНрокродрпБ **Internet**-роР роХрпБро▒ро┐роХрпНроХро┐ро▒родрпБ - роЗродрпБ IoT роЪро╛родройроЩрпНроХро│ро┐ройрпН рокро▓ роЕроорпНроЪроЩрпНроХро│рпИ роЗропроХрпНроХрпБроорпН роХро┐ро│ро╡рпБроЯрпН роЗрогрпИрокрпНрокрпБ рооро▒рпНро▒рпБроорпН роЪрпЗро╡рпИроХро│рпН, роЪро╛родройродрпНродрпБроЯройрпН роЗрогрпИроХрпНроХрокрпНрокроЯрпНроЯ роЪрпЖройрпНроЪро╛ро░рпНроХро│ро┐ро▓ро┐ро░рпБроирпНродрпБ роЕро│ро╡рпАроЯрпБроХро│рпИ роЪрпЗроХро░ро┐рокрпНрокродрпБ роорпБродро▓рпН роЪрпЖропро▓ро┐роХро│рпИ роХроЯрпНроЯрпБрокрпНрокроЯрпБродрпНродрпБро╡родро▒рпНроХро╛рой роЪрпЖропрпНродро┐роХро│рпИ роЕройрпБрокрпНрокрпБро╡родрпБ ро╡ро░рпИ. IoT роЪро╛родройроЩрпНроХро│рпН рокрпКродрпБро╡ро╛роХ роТро░рпБ роХро┐ро│ро╡рпБроЯрпН IoT роЪрпЗро╡рпИроХрпНроХрпБ роТро░рпБ роиро┐ро▓рпИропро╛рой родрпКроЯро░рпНрокрпБ роирпЖро▒ро┐роорпБро▒рпИ роорпВро▓роорпН роЗрогрпИроХрпНроХро┐ройрпНро▒рой, роорпЗро▓рпБроорпН роЕроирпНрод роЪрпЗро╡рпИ роЙроЩрпНроХро│рпН IoT рокропройрпНрокро╛роЯрпНроЯро┐ройрпН рооро▒рпНро▒ рокроХрпБродро┐роХро│рпБроЯройрпН роЗрогрпИроХрпНроХрокрпНрокроЯрпНроЯрпБро│рпНро│родрпБ, роЙроЩрпНроХро│рпН родро░ро╡ро┐ройрпН роЪрпБро▒рпНро▒рпБ роЪро┐роирпНродро┐роХрпНроХ AI роЪрпЗро╡рпИроХро│рпН роорпБродро▓рпН роХроЯрпНроЯрпБрокрпНрокро╛роЯрпБ роЕро▓рпНро▓родрпБ роЕро▒ро┐роХрпНроХрпИроХро│рпБроХрпНроХро╛рой ро╡ро▓рпИ рокропройрпНрокро╛роЯрпБроХро│рпН ро╡ро░рпИ.

> ЁЯОУ роЪрпЖройрпНроЪро╛ро░рпНроХро│ро┐ро▓ро┐ро░рпБроирпНродрпБ роЪрпЗроХро░ро┐роХрпНроХрокрпНрокроЯрпНроЯрпБ роХро┐ро│ро╡рпБроЯрпН роЕройрпБрокрпНрокрокрпНрокроЯрпБроорпН родро░ро╡рпБроХро│рпН **роЯрпЖро▓ро┐роорпЖроЯрпНро░ро┐** роОрой роЕро┤рпИроХрпНроХрокрпНрокроЯрпБроХро┐ро▒родрпБ.

IoT роЪро╛родройроЩрпНроХро│рпН роХро┐ро│ро╡рпБроЯрпН роорпВро▓роорпН роЪрпЖропрпНродро┐роХро│рпИрокрпН рокрпЖро▒ роорпБроЯро┐ропрпБроорпН. рокрпЖро░рпБроорпНрокро╛ро▓рпБроорпН, роЗроирпНрод роЪрпЖропрпНродро┐роХро│ро┐ро▓рпН роЙродрпНродро░ро╡рпБроХро│рпН роЙро│рпНро│рой - роЕродро╛ро╡родрпБ, роЙро│рпН роЪрпЖропро▓рпНрокро╛роЯрпБроХро│рпИ (роорпАрогрпНроЯрпБроорпН родрпКроЯроЩрпНроХрпБродро▓рпН роЕро▓рпНро▓родрпБ роГрокро╛ро░рпНроорпНро╡рпЗро░рпИ рокрпБродрпБрокрпНрокро┐родрпНродро▓рпН рокрпЛройрпНро▒ро╡рпИ) роЕро▓рпНро▓родрпБ роЪрпЖропро▓ро┐ропрпИрокрпН рокропройрпНрокроЯрпБродрпНродро┐ (роТро│ро┐ропрпИ роЗропроХрпНроХрпБродро▓рпН рокрпЛройрпНро▒ро╡рпИ) роТро░рпБ роЪрпЖропро▓рпИроЪрпН роЪрпЖропрпНропрпБроорпН ро╡ро┤ро┐роорпБро▒рпИроХро│рпН.

роЗроирпНрод рокро╛роЯроорпН IoT роЪро╛родройроЩрпНроХро│рпН роХро┐ро│ро╡рпБроЯрпН роЗрогрпИроХрпНроХ рокропройрпНрокроЯрпБродрпНродрпБроорпН роЪро┐ро▓ родрпКроЯро░рпНрокрпБ роирпЖро▒ро┐роорпБро▒рпИроХро│рпИ роЕро▒ро┐роорпБроХрокрпНрокроЯрпБродрпНродрпБроХро┐ро▒родрпБ, роЕро╡рпИ роЕройрпБрокрпНрокрпБроорпН роЕро▓рпНро▓родрпБ рокрпЖро▒рпБроорпН родро░ро╡ро┐ройрпН ро╡роХрпИроХро│рпИ роЕро▒ро┐роорпБроХрокрпНрокроЯрпБродрпНродрпБроХро┐ро▒родрпБ. роорпЗро▓рпБроорпН, роирпАроЩрпНроХро│рпН роЗро░рогрпНроЯрпИропрпБроорпН роирпЗро░роЯро┐ропро╛роХ роЕройрпБрокро╡ро┐роХрпНроХро▓ро╛роорпН, роЙроЩрпНроХро│рпН роирпИроЯрпНро▓рпИроЯрпНроЯро┐ро▒рпНроХрпБ роЗрогрпИроп роХроЯрпНроЯрпБрокрпНрокро╛роЯрпНроЯрпИроЪрпН роЪрпЗро░рпНродрпНродрпБ, LED роХроЯрпНроЯрпБрокрпНрокро╛роЯрпНроЯрпБ ро▓ро╛роЬро┐роХрпН 'роЪро░рпНро╡ро░рпН' роХрпБро▒ро┐ропрпАроЯрпНроЯро┐ро▒рпНроХрпБ роироХро░рпНродрпНродро┐, роЕродрпБ роЙро│рпНро│рпВро░рпН роЗропроХрпНроХродрпНродро┐ро▓рпН роЗро░рпБроХрпНроХрпБроорпН.

роЗроирпНрод рокро╛роЯродрпНродро┐ро▓рпН роиро╛роорпН роХро▒рпНро▒рпБроХрпНроХрпКро│рпНро│рокрпН рокрпЛро╡родрпБ:

* [родрпКроЯро░рпНрокрпБ роирпЖро▒ро┐роорпБро▒рпИроХро│рпН](../../../../../1-getting-started/lessons/4-connect-internet)
* [Message Queueing Telemetry Transport (MQTT)](../../../../../1-getting-started/lessons/4-connect-internet)
* [роЯрпЖро▓ро┐роорпЖроЯрпНро░ро┐](../../../../../1-getting-started/lessons/4-connect-internet)
* [роЙродрпНродро░ро╡рпБроХро│рпН](../../../../../1-getting-started/lessons/4-connect-internet)

## родрпКроЯро░рпНрокрпБ роирпЖро▒ро┐роорпБро▒рпИроХро│рпН

IoT роЪро╛родройроЩрпНроХро│рпН роЗрогрпИропродрпНродрпБроЯройрпН родрпКроЯро░рпНрокрпБ роХрпКро│рпНро│ рокропройрпНрокроЯрпБродрпНродрокрпНрокроЯрпБроорпН рокро▓ рокро┐ро░рокро▓рооро╛рой родрпКроЯро░рпНрокрпБ роирпЖро▒ро┐роорпБро▒рпИроХро│рпН роЙро│рпНро│рой. рооро┐роХро╡рпБроорпН рокро┐ро░рокро▓рооро╛ройро╡рпИ рокрокрпНро│ро┐ро╖рпН/роЪрокрпНро╕рпНроХро┐ро░рпИрокрпН роЪрпЖропрпНродро┐ рокро░ро┐рооро╛ро▒рпНро▒родрпНродрпИ роТро░рпБ ро╡роХрпИропро╛рой рокрпНро░рпЛроХрпНроХро░рпН роорпВро▓роорпН роЕроЯро┐рокрпНрокроЯрпИропро╛роХроХрпН роХрпКрогрпНроЯро╡рпИ. IoT роЪро╛родройроЩрпНроХро│рпН рокрпНро░рпЛроХрпНроХро░рпБроЯройрпН роЗрогрпИроХрпНроХрокрпНрокроЯрпНроЯрпБ роЯрпЖро▓ро┐роорпЖроЯрпНро░ро┐ропрпИ ро╡рпЖро│ро┐ропро┐роЯрпБроХро┐ройрпНро▒рой рооро▒рпНро▒рпБроорпН роЙродрпНродро░ро╡рпБроХро│рпИ роЪрокрпНро╕рпНроХро┐ро░рпИрокрпН роЪрпЖропрпНроХро┐ройрпНро▒рой. роХро┐ро│ро╡рпБроЯрпН роЪрпЗро╡рпИроХро│рпН рокрпНро░рпЛроХрпНроХро░рпБроЯройрпН роЗрогрпИроХрпНроХрокрпНрокроЯрпНроЯрпБ роЕройрпИродрпНродрпБ роЯрпЖро▓ро┐роорпЖроЯрпНро░ро┐ роЪрпЖропрпНродро┐роХро│рпИропрпБроорпН роЪрокрпНро╕рпНроХро┐ро░рпИрокрпН роЪрпЖропрпНроХро┐ройрпНро▒рой рооро▒рпНро▒рпБроорпН роХрпБро▒ро┐рокрпНрокро┐роЯрпНроЯ роЪро╛родройроЩрпНроХро│рпБроХрпНроХрпБ роЕро▓рпНро▓родрпБ роЪро╛родройроХрпН роХрпБро┤рпБроХрпНроХро│рпБроХрпНроХрпБ роЙродрпНродро░ро╡рпБроХро│рпИ ро╡рпЖро│ро┐ропро┐роЯрпБроХро┐ройрпНро▒рой.

![IoT роЪро╛родройроЩрпНроХро│рпН рокрпНро░рпЛроХрпНроХро░рпБроЯройрпН роЗрогрпИроХрпНроХрокрпНрокроЯрпНроЯрпБ роЯрпЖро▓ро┐роорпЖроЯрпНро░ро┐ропрпИ ро╡рпЖро│ро┐ропро┐роЯрпБроХро┐ройрпНро▒рой рооро▒рпНро▒рпБроорпН роЙродрпНродро░ро╡рпБроХро│рпИ роЪрокрпНро╕рпНроХро┐ро░рпИрокрпН роЪрпЖропрпНроХро┐ройрпНро▒рой. роХро┐ро│ро╡рпБроЯрпН роЪрпЗро╡рпИроХро│рпН рокрпНро░рпЛроХрпНроХро░рпБроЯройрпН роЗрогрпИроХрпНроХрокрпНрокроЯрпНроЯрпБ роЕройрпИродрпНродрпБ роЯрпЖро▓ро┐роорпЖроЯрпНро░ро┐ роЪрпЖропрпНродро┐роХро│рпИропрпБроорпН роЪрокрпНро╕рпНроХро┐ро░рпИрокрпН роЪрпЖропрпНроХро┐ройрпНро▒рой рооро▒рпНро▒рпБроорпН роХрпБро▒ро┐рокрпНрокро┐роЯрпНроЯ роЪро╛родройроЩрпНроХро│рпБроХрпНроХрпБ роЙродрпНродро░ро╡рпБроХро│рпИ роЕройрпБрокрпНрокрпБроХро┐ройрпНро▒рой.](../../../../../translated_images/pub-sub.7c7ed43fe9fd15d4e1f81a3fd95440413c457acd9bcbe9a43341e30e88db5264.ta.png)

MQTT роОройрпНрокродрпБ IoT роЪро╛родройроЩрпНроХро│рпБроХрпНроХрпБ рооро┐роХро╡рпБроорпН рокро┐ро░рокро▓рооро╛рой родрпКроЯро░рпНрокрпБ роирпЖро▒ро┐роорпБро▒рпИ роЖроХрпБроорпН, роорпЗро▓рпБроорпН роЗроирпНрод рокро╛роЯродрпНродро┐ро▓рпН роЗродрпБ роХро▒рпНро▒рпБроХрпНроХрпКро│рпНро│рокрпНрокроЯрпБроХро┐ро▒родрпБ. рооро▒рпНро▒ роирпЖро▒ро┐роорпБро▒рпИроХро│рпН AMQP рооро▒рпНро▒рпБроорпН HTTP/HTTPS роЖроХро┐ропро╡ро▒рпНро▒рпИ роЙро│рпНро│роЯроХрпНроХро┐ропро╡рпИ.

## Message Queueing Telemetry Transport (MQTT)

[MQTT](http://mqtt.org) роОройрпНрокродрпБ роЪро╛родройроЩрпНроХро│рпБроХрпНроХрпБ роЗроЯрпИропрпЗ роЪрпЖропрпНродро┐роХро│рпИ роЕройрпБрокрпНрок роТро░рпБ роОро│ро┐роп, родро┐ро▒роирпНрод родро░роиро┐ро▓рпИ роЪрпЖропрпНродро┐ роирпЖро▒ро┐роорпБро▒рпИ роЖроХрпБроорпН. роЗродрпБ 1999 роЖроорпН роЖрогрпНроЯро┐ро▓рпН роОрогрпНрогрпЖропрпН роХрпБро┤ро╛ропрпНроХро│рпИ роХрогрпНроХро╛рогро┐роХрпНроХ ро╡роЯро┐ро╡роорпИроХрпНроХрокрпНрокроЯрпНроЯродрпБ, рокро┐ройрпНройро░рпН 15 роЖрогрпНроЯрпБроХро│рпБроХрпНроХрпБрокрпН рокро┐ро▒роХрпБ IBM роорпВро▓роорпН роТро░рпБ родро┐ро▒роирпНрод родро░роиро┐ро▓рпИропро╛роХ ро╡рпЖро│ро┐ропро┐роЯрокрпНрокроЯрпНроЯродрпБ.

MQTT-роХрпНроХрпБ роТро░рпБ рокрпНро░рпЛроХрпНроХро░рпН рооро▒рпНро▒рпБроорпН рокро▓ роХро┐ро│рпИропройрпНроЯрпНроХро│рпН роЙро│рпНро│рой. роЕройрпИродрпНродрпБ роХро┐ро│рпИропройрпНроЯрпНроХро│рпБроорпН рокрпНро░рпЛроХрпНроХро░рпБроЯройрпН роЗрогрпИроХрпНроХрокрпНрокроЯрпНроЯрпБ, рокрпНро░рпЛроХрпНроХро░рпН родрпКроЯро░рпНрокрпБроЯрпИроп роХро┐ро│рпИропройрпНроЯрпНроХро│рпБроХрпНроХрпБ роЪрпЖропрпНродро┐роХро│рпИ ро╡ро┤ро┐рооро╛ро▒рпНро▒рпБроХро┐ро▒родрпБ. роЪрпЖропрпНродро┐роХро│рпН родройро┐рокрпНрокроЯрпНроЯ роХро┐ро│рпИропройрпНроЯрпБроХрпНроХрпБ роирпЗро░роЯро┐ропро╛роХ роЕройрпБрокрпНрокрокрпНрокроЯро╛рооро▓рпН, рокрпЖропро░ро┐роЯрокрпНрокроЯрпНроЯ родро▓рпИрокрпНрокрпБроХро│рпИрокрпН рокропройрпНрокроЯрпБродрпНродро┐ ро╡ро┤ро┐рооро╛ро▒рпНро▒рокрпНрокроЯрпБроХро┐ройрпНро▒рой. роТро░рпБ роХро┐ро│рпИропройрпНроЯрпН роТро░рпБ родро▓рпИрокрпНрокрпБроХрпНроХрпБ ро╡рпЖро│ро┐ропро┐роЯ роорпБроЯро┐ропрпБроорпН, роорпЗро▓рпБроорпН роЕроирпНрод родро▓рпИрокрпНрокрпИ роЪрокрпНро╕рпНроХро┐ро░рпИрокрпН роЪрпЖропрпНропрпБроорпН роОроирпНрод роХро┐ро│рпИропройрпНроЯрпНроХро│рпБроорпН роЪрпЖропрпНродро┐ропрпИрокрпН рокрпЖро▒рпБроорпН.

![IoT роЪро╛родройроорпН /telemetry родро▓рпИрокрпНрокро┐ро▓рпН роЯрпЖро▓ро┐роорпЖроЯрпНро░ро┐ропрпИ ро╡рпЖро│ро┐ропро┐роЯрпБроХро┐ро▒родрпБ, рооро▒рпНро▒рпБроорпН роХро┐ро│ро╡рпБроЯрпН роЪрпЗро╡рпИ роЕроирпНрод родро▓рпИрокрпНрокрпИ роЪрокрпНро╕рпНроХро┐ро░рпИрокрпН роЪрпЖропрпНроХро┐ро▒родрпБ](../../../../../translated_images/mqtt.cbf7f21d9adc3e17548b359444cc11bb4bf2010543e32ece9a47becf54438c23.ta.png)

тЬЕ роЖро░ро╛ропрпНроЪрпНроЪро┐ роЪрпЖропрпНропрпБроЩрпНроХро│рпН. роЙроЩрпНроХро│ро┐роЯроорпН рокро▓ IoT роЪро╛родройроЩрпНроХро│рпН роЗро░рпБроирпНродро╛ро▓рпН, роЙроЩрпНроХро│рпН MQTT рокрпНро░рпЛроХрпНроХро░рпН роЕройрпИродрпНродрпБ роЪрпЖропрпНродро┐роХро│рпИропрпБроорпН роХрпИропро╛ро│ роорпБроЯро┐ропрпБроорпН роОройрпНрокродрпИ роОрокрпНрокроЯро┐ роЙро▒рпБродро┐рокрпНрокроЯрпБродрпНродрпБро╡рпАро░рпНроХро│рпН?

### роЙроЩрпНроХро│рпН IoT роЪро╛родройродрпНродрпИ MQTT-роХрпНроХрпБ роЗрогрпИроХрпНроХро╡рпБроорпН

роЙроЩрпНроХро│рпН роирпИроЯрпНро▓рпИроЯрпНроЯро┐ро▒рпНроХрпБ роЗрогрпИроп роХроЯрпНроЯрпБрокрпНрокро╛роЯрпНроЯрпИроЪрпН роЪрпЗро░рпНрокрпНрокродро▒рпНроХро╛рой роорпБродро▓рпН рокроХрпБродро┐ MQTT рокрпНро░рпЛроХрпНроХро░рпБроЯройрпН роЗрогрпИрокрпНрокродрпБ.

#### рокрогро┐роХро│рпН

роЙроЩрпНроХро│рпН роЪро╛родройродрпНродрпИ MQTT рокрпНро░рпЛроХрпНроХро░рпБроЯройрпН роЗрогрпИроХрпНроХро╡рпБроорпН.

роЗроирпНрод рокро╛роЯродрпНродро┐ройрпН роЗроирпНрод рокроХрпБродро┐ропро┐ро▓рпН, роЙроЩрпНроХро│рпН IoT роирпИроЯрпНро▓рпИроЯрпНроЯрпИ роЗрогрпИропродрпНродрпБроЯройрпН роЗрогрпИродрпНродрпБ роЕродрпИ родрпКро▓рпИро╡ро┐ро▓ро┐ро░рпБроирпНродрпБ роХроЯрпНроЯрпБрокрпНрокроЯрпБродрпНрод роЕройрпБроородро┐роХрпНроХ ро╡рпЗрогрпНроЯрпБроорпН. роЗроирпНрод рокро╛роЯродрпНродро┐ройрпН рокро┐ройрпНройро░рпН, роЙроЩрпНроХро│рпН IoT роЪро╛родройроорпН роТро│ро┐ропро┐ройрпН роЕро│ро╡рпИ роХрпКрогрпНроЯ роЯрпЖро▓ро┐роорпЖроЯрпНро░ро┐ роЪрпЖропрпНродро┐ропрпИ MQTT роорпВро▓роорпН роТро░рпБ рокрпКродрпБ MQTT рокрпНро░рпЛроХрпНроХро░рпБроХрпНроХрпБ роЕройрпБрокрпНрокрпБроорпН, роЕродрпИ роирпАроЩрпНроХро│рпН роОро┤рпБродрпБроорпН роЪро┐ро▓ роЪро░рпНро╡ро░рпН роХрпБро▒ро┐ропрпАроЯрпБ роОроЯрпБродрпНродрпБроХрпНроХрпКро│рпНро│рпБроорпН. роЗроирпНрод роХрпБро▒ро┐ропрпАроЯрпБ роТро│ро┐ропро┐ройрпН роЕро│ро╡рпИроЪрпН роЪро░ро┐рокро╛ро░рпНродрпНродрпБ, LED роР роЗропроХрпНроХ роЕро▓рпНро▓родрпБ роЕрогрпИроХрпНроХ роЪро╛родройродрпНродро┐ро▒рпНроХрпБ роЙродрпНродро░ро╡рпБ роЪрпЖропрпНродро┐ропрпИ роорпАрогрпНроЯрпБроорпН роЕройрпБрокрпНрокрпБроорпН.

роЗродрпНродроХрпИроп роЕроорпИрокрпНрокро┐ро▒рпНроХро╛рой роЙрогрпНроорпИропро╛рой рокропройрпНрокро╛роЯрпБроХро│рпН рокро▓ роТро│ро┐ роЪрпЖройрпНроЪро╛ро░рпНроХро│ро┐ро▓ро┐ро░рпБроирпНродрпБ родро░ро╡рпБроХро│рпИ роЪрпЗроХро░ро┐родрпНродрпБ, ро╡ро┐ро│роХрпНроХрпБроХро│рпИ роЗропроХрпНроХ роорпБроЯро┐ро╡рпБ роЪрпЖропрпНропрпБроорпН роЗроЯродрпНродро┐ро▓рпН, рокро▓ ро╡ро┐ро│роХрпНроХрпБроХро│рпН роЙро│рпНро│ роЗроЯродрпНродро┐ро▓рпН, роЙродро╛ро░рогрооро╛роХ роТро░рпБ ро╕рпНроЯрпЗроЯро┐ропродрпНродро┐ро▓рпН рокропройрпНрокроЯрпБродрпНродрокрпНрокроЯро▓ро╛роорпН. роЗродрпБ роТро░рпБ роЪрпЖройрпНроЪро╛ро░рпН роорпЗроХроЩрпНроХро│рпН роЕро▓рпНро▓родрпБ роТро░рпБ рокро▒ро╡рпИ роорпВро▓роорпН роорпВроЯрокрпНрокроЯрпНроЯро┐ро░рпБроирпНродро╛ро▓рпН, роЖройро╛ро▓рпН рооро▒рпНро▒ роЪрпЖройрпНроЪро╛ро░рпНроХро│рпН рокрпЛродрпБрооро╛рой роТро│ро┐ропрпИ роХрогрпНроЯро▒ро┐роирпНродро╛ро▓рпН, ро╡ро┐ро│роХрпНроХрпБроХро│рпН роЗропроХрпНроХрокрпНрокроЯрпБро╡родрпИродрпН родроЯрпБроХрпНроХро▓ро╛роорпН.

тЬЕ рокро▓ роЪрпЖройрпНроЪро╛ро░рпНроХро│ро┐ро▓ро┐ро░рпБроирпНродрпБ родро░ро╡рпБроХро│рпИ роородро┐рокрпНрокрпАроЯрпБ роЪрпЖропрпНродрпБ роЙродрпНродро░ро╡рпБроХро│рпИ роЕройрпБрокрпНрок ро╡рпЗрогрпНроЯро┐роп рокро┐ро▒ роЪрпВро┤ро▓рпНроХро│рпИ роОройрпНрой?

роЗроирпНрод рокрогро┐роХрпНроХро╛рой роТро░рпБ рокроХрпБродро┐ропро╛роХ MQTT рокрпНро░рпЛроХрпНроХро░рпИ роЕроорпИрокрпНрокродро┐ро▓рпН роЙро│рпНро│ роЪро┐роХрпНроХро▓рпНроХро│рпИродрпН родро╡ро┐ро░рпНроХрпНроХ, роирпАроЩрпНроХро│рпН [Eclipse Mosquitto](https://www.mosquitto.org) роОройрпНро▒ родро┐ро▒роирпНрод роорпВро▓ MQTT рокрпНро░рпЛроХрпНроХро░рпИ роЗропроХрпНроХрпБроорпН роТро░рпБ рокрпКродрпБ роЪрпЛродройрпИ роЪро░рпНро╡ро░рпИ рокропройрпНрокроЯрпБродрпНродро▓ро╛роорпН. роЗроирпНрод роЪрпЛродройрпИ рокрпНро░рпЛроХрпНроХро░рпН [test.mosquitto.org](https://test.mosquitto.org) роЗро▓рпН рокрпКродрпБ рокропройрпНрокро╛роЯрпНроЯро┐ро▒рпНроХрпБ роХро┐роЯрпИроХрпНроХро┐ро▒родрпБ, роорпЗро▓рпБроорпН роХрогроХрпНроХрпИ роЕроорпИроХрпНроХ родрпЗро╡рпИропро┐ро▓рпНро▓рпИ, роЗродрпБ MQTT роХро┐ро│рпИропройрпНроЯрпНроХро│рпН рооро▒рпНро▒рпБроорпН роЪро░рпНро╡ро░рпНроХро│рпИ роЪрпЛродро┐роХрпНроХ роТро░рпБ роЪро┐ро▒роирпНрод роХро░рпБро╡ро┐ропро╛роХрпБроорпН.

> ЁЯТБ роЗроирпНрод роЪрпЛродройрпИ рокрпНро░рпЛроХрпНроХро░рпН рокрпКродрпБ рооро▒рпНро▒рпБроорпН рокро╛родрпБроХро╛рокрпНрокро▒рпНро▒родрпБ. роирпАроЩрпНроХро│рпН ро╡рпЖро│ро┐ропро┐роЯрпБроорпН родроХро╡ро▓рпИ ропро╛ро░рпБроорпН роХрпЗроЯрпНроХро▓ро╛роорпН, роОройро╡рпЗ роЗродрпБ родройро┐рокрпНрокроЯрпНроЯ родроХро╡ро▓рпБроЯройрпН рокропройрпНрокроЯрпБродрпНродрокрпНрокроЯроХрпНроХрпВроЯро╛родрпБ.

![роТро│ро┐ропро┐ройрпН роЕро│ро╡рпБроХро│рпИрокрпН рокроЯро┐родрпНродрпБ роЪро░ро┐рокро╛ро░рпНродрпНродрпБ, LED роР роХроЯрпНроЯрпБрокрпНрокроЯрпБродрпНродрпБроорпН рокрогро┐ропро┐ройрпН роУроЯрпНроЯрокрпН рокроЯро▓роорпН](../../../../../translated_images/assignment-1-internet-flow.3256feab5f052fd273bf4e331157c574c2c3fa42e479836fc9c3586f41db35a5.ta.png)

MQTT рокрпНро░рпЛроХрпНроХро░рпБроЯройрпН роЙроЩрпНроХро│рпН роЪро╛родройродрпНродрпИ роЗрогрпИроХрпНроХ роХрпАро┤рпЗ роЙро│рпНро│ родрпКроЯро░рпНрокро╛рой рокроЯро┐ропрпИрокрпН рокро┐ройрпНрокро▒рпНро▒ро╡рпБроорпН:

* [Arduino - Wio Terminal](wio-terminal-mqtt.md)
* [Single-board computer - Raspberry Pi/Virtual IoT device](single-board-computer-mqtt.md)

### MQTT рокро▒рпНро▒ро┐ роЖро┤рооро╛роХ роЕро▒ро┐роп

родро▓рпИрокрпНрокрпБроХро│рпН роТро░рпБ ро╡ро░ро┐роЪрпИ роЕроорпИрокрпНрокрпИроХрпН роХрпКрогрпНроЯро┐ро░рпБроХрпНроХро▓ро╛роорпН, роорпЗро▓рпБроорпН роХро┐ро│рпИропройрпНроЯрпНроХро│рпН ро╡ройро╡ро┐ро▓роЩрпНроХрпБроХро│рпИрокрпН рокропройрпНрокроЯрпБродрпНродро┐ ро╡ро░ро┐роЪрпИропро┐ройрпН ро╡рпЖро╡рпНро╡рпЗро▒рпБ роиро┐ро▓рпИроХро│рпИ роЪрокрпНро╕рпНроХро┐ро░рпИрокрпН роЪрпЖропрпНропро▓ро╛роорпН. роЙродро╛ро░рогрооро╛роХ, роирпАроЩрпНроХро│рпН ро╡рпЖрокрпНрокроиро┐ро▓рпИ роЯрпЖро▓ро┐роорпЖроЯрпНро░ро┐ роЪрпЖропрпНродро┐роХро│рпИ `/telemetry/temperature` родро▓рпИрокрпНрокрпБроХрпНроХрпБ роЕройрпБрокрпНрокро▓ро╛роорпН рооро▒рпНро▒рпБроорпН роИро░рокрпНрокродроорпН роЪрпЖропрпНродро┐роХро│рпИ `/telemetry/humidity` родро▓рпИрокрпНрокрпБроХрпНроХрпБ роЕройрпБрокрпНрокро▓ро╛роорпН, рокро┐ройрпНройро░рпН роЙроЩрпНроХро│рпН роХро┐ро│ро╡рпБроЯрпН рокропройрпНрокро╛роЯрпНроЯро┐ро▓рпН `/telemetry/*` родро▓рпИрокрпНрокрпИ роЪрокрпНро╕рпНроХро┐ро░рпИрокрпН роЪрпЖропрпНродрпБ ро╡рпЖрокрпНрокроиро┐ро▓рпИ рооро▒рпНро▒рпБроорпН роИро░рокрпНрокродроорпН роЯрпЖро▓ро┐роорпЖроЯрпНро░ро┐ роЪрпЖропрпНродро┐роХро│рпИрокрпН рокрпЖро▒ро▓ро╛роорпН.

роЪрпЖропрпНродро┐роХро│рпН родро░ро╡ро┐ройрпН роЙро▒рпБродро┐рокрпНрокро╛роЯрпНроЯрпИ роиро┐ро░рпНрогропро┐роХрпНроХрпБроорпН родро░роиро┐ро▓рпИ роЪрпЗро╡рпИропрпБроЯройрпН (QoS) роЕройрпБрокрпНрокрокрпНрокроЯро▓ро╛роорпН.

* рооро┐роХ роЕродро┐роХрокроЯрпНроЪроорпН роТро░рпБ роорпБро▒рпИ - роЪрпЖропрпНродро┐ роТро░рпБроорпБро▒рпИ роороЯрпНроЯрпБроорпЗ роЕройрпБрокрпНрокрокрпНрокроЯрпБроХро┐ро▒родрпБ, роорпЗро▓рпБроорпН роХро┐ро│рпИропройрпНроЯрпН рооро▒рпНро▒рпБроорпН рокрпНро░рпЛроХрпНроХро░рпН ро╡ро┐роиро┐ропрпЛроХродрпНродрпИ роЙро▒рпБродро┐рокрпНрокроЯрпБродрпНрод роХрпВроЯрпБродро▓рпН роироЯро╡роЯро┐роХрпНроХрпИроХро│рпИ роОроЯрпБроХрпНроХро╡ро┐ро▓рпНро▓рпИ (fire and forget).
* роХрпБро▒рпИроирпНродрокроЯрпНроЪроорпН роТро░рпБ роорпБро▒рпИ - роЕройрпБрокрпНрокрпБроиро░рпН роЕроЩрпНроХрпАроХро╛ро░роорпН рокрпЖро▒рпБроорпН ро╡ро░рпИ роЪрпЖропрпНродро┐ропрпИ рокро▓ роорпБро▒рпИ роорпАрогрпНроЯрпБроорпН роорпБропро▒рпНроЪро┐роХрпНроХро┐ро▒родрпБ (acknowledged delivery).
* роЪро░ро┐ропро╛роХ роТро░рпБ роорпБро▒рпИ - роЕройрпБрокрпНрокрпБроиро░рпН рооро▒рпНро▒рпБроорпН рокрпЖро▒рпБроиро░рпН роЗро░рогрпНроЯрпБ роиро┐ро▓рпИ роХрпИроиро┤рпБро╡ро▓рпН роЪрпЖропро▓рпНрокро╛роЯрпНроЯро┐ро▓рпН роИроЯрпБрокроЯрпНроЯрпБ, роЪрпЖропрпНродро┐ропро┐ройрпН роТро░рпБ рокро┐ро░родро┐ропрпИ роороЯрпНроЯрпБроорпЗ рокрпЖро▒рпБро╡родрпИ роЙро▒рпБродро┐рокрпНрокроЯрпБродрпНродрпБроХро┐ройрпНро▒ройро░рпН (assured delivery).

тЬЕ роОроирпНрод роЪрпВро┤ро▓рпНроХро│ро┐ро▓рпН fire and forget роЪрпЖропрпНродро┐ропрпИ ро╡ро┐роЯ assured delivery роЪрпЖропрпНродро┐ родрпЗро╡рпИрокрпНрокроЯрпБроорпН?

MQTT роОройрпНро▒ рокрпЖропро░рпН Message Queueing (MQTT роЗро▓рпН роЙро│рпНро│ роорпБродро▓рпН роОро┤рпБродрпНродрпБроХрпНроХро│рпН) роОройрпНро▒ро╛ро▓рпБроорпН, роЗродрпБ роЙрогрпНроорпИропро┐ро▓рпН роЪрпЖропрпНродро┐ ро╡ро░ро┐роЪрпИроХро│рпИ роЖродро░ро┐роХрпНроХро╛родрпБ. роЗродройрпН рокрпКро░рпБро│рпН, роТро░рпБ роХро┐ро│рпИропройрпНроЯрпН родрпБрогрпНроЯро┐роХрпНроХрокрпНрокроЯрпНроЯрпБ, рокро┐ройрпНройро░рпН роорпАрогрпНроЯрпБроорпН роЗрогрпИроХрпНроХрокрпНрокроЯрпНроЯро╛ро▓рпН, QoS роЪрпЖропро▓рпНроорпБро▒рпИропрпИрокрпН рокропройрпНрокроЯрпБродрпНродро┐ роПро▒рпНроХройро╡рпЗ роЪрпЖропро▓рпНрокроЯрпБродрпНродродрпН родрпКроЯроЩрпНроХро┐роп роЪрпЖропрпНродро┐роХро│рпИродрпН родро╡ро┐ро░, родрпБрогрпНроЯро┐рокрпНрокрпБ роХро╛ро▓родрпНродро┐ро▓рпН роЕройрпБрокрпНрокрокрпНрокроЯрпНроЯ роЪрпЖропрпНродро┐роХро│рпИрокрпН рокрпЖро▒ро╛родрпБ. роЪрпЖропрпНродро┐роХро│ро┐ро▓рпН роТро░рпБ retained flag роЕроорпИроХрпНроХрокрпНрокроЯро▓ро╛роорпН. роЗродрпБ роЕроорпИроХрпНроХрокрпНрокроЯрпНроЯро╛ро▓рпН, MQTT рокрпНро░рпЛроХрпНроХро░рпН роЕроирпНрод родро▓рпИрокрпНрокро┐ро▓рпН роЕройрпБрокрпНрокрокрпНрокроЯрпНроЯ роХроЯрпИроЪро┐ роЪрпЖропрпНродро┐ропрпИ роЪрпЗрооро┐родрпНродрпБ, рокро┐ройрпНройро░рпН роЕроирпНрод родро▓рпИрокрпНрокрпИ роЪрокрпНро╕рпНроХро┐ро░рпИрокрпН роЪрпЖропрпНропрпБроорпН роОроирпНрод роХро┐ро│рпИропройрпНроЯрпНроХро│рпБроХрпНроХрпБроорпН роЕройрпБрокрпНрокрпБроорпН. роЗроирпНрод ро╡ро┤ро┐ропро┐ро▓рпН, роХро┐ро│рпИропройрпНроЯрпНроХро│рпН роОрокрпНрокрпЛродрпБроорпН роЪроорпАрокродрпНродро┐роп роЪрпЖропрпНродро┐ропрпИрокрпН рокрпЖро▒рпБро╡ро╛ро░рпНроХро│рпН.

MQTT роирпАрогрпНроЯ роЗроЯрпИро╡рпЖро│ро┐роХро│ро┐ро▓рпН роЗрогрпИрокрпНрокрпБ роЗройрпНройрпБроорпН роЙропро┐ро░рпБроЯройрпН роЙро│рпНро│родро╛ роОройрпНрокродрпИроЪрпН роЪро░ро┐рокро╛ро░рпНроХрпНроХ keep alive роЪрпЖропро▓рпНрокро╛роЯрпНроЯрпИропрпБроорпН роЖродро░ро┐роХрпНроХро┐ро▒родрпБ.

> ЁЯжЯ [Mosquitto from the Eclipse Foundation](https://mosquitto.org) роЙроЩрпНроХро│рпБроХрпНроХрпБ MQTT роР рокро░ро┐роЪрпЛродро┐роХрпНроХ роТро░рпБ роЗро▓ро╡роЪ MQTT рокрпНро░рпЛроХрпНроХро░рпИ роЗропроХрпНроХ роЕройрпБроородро┐роХрпНроХро┐ро▒родрпБ, роорпЗро▓рпБроорпН [test.mosquitto.org](https://test.mosquitto.org) роЗро▓рпН роЙроЩрпНроХро│рпН роХрпБро▒ро┐ропрпАроЯрпНроЯрпИ роЪрпЛродро┐роХрпНроХ роТро░рпБ рокрпКродрпБ MQTT рокрпНро░рпЛроХрпНроХро░рпИ ро╡ро┤роЩрпНроХрпБроХро┐ро▒родрпБ.

MQTT роЗрогрпИрокрпНрокрпБроХро│рпН рокрпКродрпБ рооро▒рпНро▒рпБроорпН родро┐ро▒роирпНродро╡рпИропро╛роХ роЗро░рпБроХрпНроХро▓ро╛роорпН, роЕро▓рпНро▓родрпБ рокропройро░рпН рокрпЖропро░рпНроХро│рпН рооро▒рпНро▒рпБроорпН роХроЯро╡рпБроЪрпНроЪрпКро▒рпНроХро│рпН роЕро▓рпНро▓родрпБ роЪро╛ройрпНро▒ро┐родро┤рпНроХро│рпИрокрпН рокропройрпНрокроЯрпБродрпНродро┐ роХрпБро▒ро┐ропро╛роХрпНроХрокрпНрокроЯрпНроЯрпБ рокро╛родрпБроХро╛роХрпНроХрокрпНрокроЯро▓ро╛роорпН.

> ЁЯТБ MQTT TCP/IP роорпВро▓роорпН родрпКроЯро░рпНрокрпБ роХрпКро│рпНро│рпБроХро┐ро▒родрпБ, HTTP рокрпЛройрпНро▒ роЕроЯро┐рокрпНрокроЯрпИ роирпЖроЯрпНро╡рпКро░рпНроХрпН роирпЖро▒ро┐роорпБро▒рпИропрпИрокрпН рокропройрпНрокроЯрпБродрпНродрпБроХро┐ро▒родрпБ, роЖройро╛ро▓рпН ро╡рпЗро▒рпКро░рпБ рокрпЛро░рпНроЯро┐ро▓рпН. роирпАроЩрпНроХро│рпН MQTT роР ро╡ро▓рпИроЪрпКроХрпЖроЯрпНроЯрпБроХро│рпН роорпВро▓роорпН рокропройрпНрокроЯрпБродрпНродро┐, роЙро▓ро╛ро╡ро┐ропро┐ро▓рпН роЗропроЩрпНроХрпБроорпН ро╡ро▓рпИ рокропройрпНрокро╛роЯрпБроХро│рпБроЯройрпН роЕро▓рпНро▓родрпБ firewall роЕро▓рпНро▓родрпБ рокро┐ро▒ роирпЖроЯрпНро╡рпКро░рпНроХрпН ро╡ро┐родро┐роХро│рпН MQTT роЗрогрпИрокрпНрокрпБроХро│рпИродрпН родроЯрпИ роЪрпЖропрпНропрпБроорпН роЪрпВро┤ро▓рпНроХро│ро┐ро▓рпН родрпКроЯро░рпНрокрпБ роХрпКро│рпНро│ро▓ро╛роорпН.

## роЯрпЖро▓ро┐роорпЖроЯрпНро░ро┐

роЯрпЖро▓ро┐роорпЖроЯрпНро░ро┐ роОройрпНро▒ ро╡ро╛ро░рпНродрпНродрпИ родрпКро▓рпИро╡ро┐ро▓рпН роЕро│ро╡ро┐роЯрпБроорпН рокрпКро░рпБро│рпН роХрпКрогрпНроЯ роХро┐ро░рпЗроХрпНроХ ро╡рпЗро░рпНроХро│ро┐ро▓ро┐ро░рпБроирпНродрпБ рокрпЖро▒рокрпНрокроЯрпНроЯродрпБ. роЯрпЖро▓ро┐роорпЖроЯрпНро░ро┐ роОройрпНрокродрпБ роЪрпЖройрпНроЪро╛ро░рпНроХро│ро┐ро▓ро┐ро░рпБроирпНродрпБ родро░ро╡рпБроХро│рпИ роЪрпЗроХро░ро┐родрпНродрпБ роХро┐ро│ро╡рпБроЯрпН роЕройрпБрокрпНрокрпБроорпН роЪрпЖропро▓рпН.

> ЁЯТБ роЯрпЖро▓ро┐роорпЖроЯрпНро░ро┐ роЪро╛родройроЩрпНроХро│ро┐ро▓рпН роТройрпНро▒рпИ 1874 роЖроорпН роЖрогрпНроЯро┐ро▓рпН рокро┐ро░ро╛ройрпНроЪро┐ро▓рпН роХрогрпНроЯрпБрокро┐роЯро┐родрпНродройро░рпН, роЗродрпБ роорпКройрпНроЯрпН рокро┐ро│ро╛роЩрпНроХро┐ро▓ро┐ро░рпБроирпНродрпБ рокро╛ро░ро┐роЪрпБроХрпНроХрпБ роирпЗро░роЯро┐ роХро╛ро▓роиро┐ро▓рпИ рооро▒рпНро▒рпБроорпН рокройро┐ропро┐ройрпН роЖро┤роЩрпНроХро│рпИ роЕройрпБрокрпНрокро┐ропродрпБ. роЕрокрпНрокрпЛродрпБ ро╡ропро░рпНро▓рпЖро╕рпН родрпКро┤ро┐ро▓рпНроирпБроЯрпНрокроЩрпНроХро│рпН роХро┐роЯрпИроХрпНроХро╛родродро╛ро▓рпН роЗродрпБ рокро┐роЪро┐роХро▓рпН ро╡ропро░рпНроХро│рпИ рокропройрпНрокроЯрпБродрпНродро┐ропродрпБ.

Lesson 1 роЗро▓рпН роЙро│рпНро│ ро╕рпНрооро╛ро░рпНроЯрпН родрпЖро░рпНроорпЛро╕рпНроЯрпЗроЯрпН роОроЯрпБродрпНродрпБроХрпНроХро╛роЯрпНроЯрпИ роорпАрогрпНроЯрпБроорпН рокро╛ро░рпНрокрпНрокрпЛроорпН.

![рокро▓ роЕро▒рпИ роЪрпЖройрпНроЪро╛ро░рпНроХро│рпБроЯройрпН роЗрогрпИропродрпНродрпБроЯройрпН роЗрогрпИроХрпНроХрокрпНрокроЯрпНроЯ родрпЖро░рпНроорпЛро╕рпНроЯрпЗроЯрпН](../../../../../translated_images/telemetry.21e5d8b97649d2ebeb0f68d4b9691ab2d1f7bd629338e131465aff8a614e4d4a.ta.png)

родрпЖро░рпНроорпЛро╕рпНроЯрпЗроЯрпНроЯро┐ро▓рпН роЯрпЖро▓ро┐роорпЖроЯрпНро░ро┐ роЪрпЗроХро░ро┐роХрпНроХ ро╡рпЖрокрпНрокроиро┐ро▓рпИ роЪрпЖройрпНроЪро╛ро░рпНроХро│рпН роЙро│рпНро│рой. роЗродрпБ рооро┐роХро╡рпБроорпН роЪро╛родрпНродро┐ропрооро╛роХ роТро░рпБ ро╡рпЖрокрпНрокроиро┐ро▓рпИ роЪрпЖройрпНроЪро╛ро░рпН роЙро│рпНро│роЯроХрпНроХрокрпНрокроЯрпНроЯро┐ро░рпБроХрпНроХрпБроорпН, роорпЗро▓рпБроорпН роЗродрпБ [Bluetooth Low Energy](https://wikipedia.org/wiki/Bluetooth_Low_Energy) (BLE) рокрпЛройрпНро▒ ро╡ропро░рпНро▓рпЖро╕рпН роирпЖро▒ро┐роорпБро▒рпИропрпИрокрпН рокропройрпНрокроЯрпБродрпНродро┐ рокро▓ ро╡рпЖро│ро┐рокрпНрокрпБро▒ ро╡рпЖрокрпНрокроиро┐ро▓рпИ роЪрпЖройрпНроЪро╛ро░рпНроХро│рпБроЯройрпН роЗрогрпИроХрпНроХрокрпНрокроЯро▓ро╛роорпН.

роЕродрпБ роЕройрпБрокрпНрокрпБроорпН роЯрпЖро▓ро┐роорпЖроЯрпНро░ро┐ родро░ро╡ро┐ройрпН роЙродро╛ро░рогроорпН:

| рокрпЖропро░рпН | роородро┐рокрпНрокрпБ | ро╡ро┐ро│роХрпНроХроорпН |
| ---- | ----- | ----------- |
| `thermostat_temperature` | 18┬░C | родрпЖро░рпНроорпЛро╕рпНроЯрпЗроЯрпНроЯро┐ройрпН роЙро│рпНро│роЯроХрпНроХрокрпНрокроЯрпНроЯ ро╡рпЖрокрпНрокроиро┐ро▓рпИ роЪрпЖройрпНроЪро╛ро░ро╛ро▓рпН роЕро│ро╡ро┐роЯрокрпНрокроЯрпНроЯ ро╡рпЖрокрпНрокроиро┐ро▓рпИ |
| `livingroom_temperature` | 19┬░C | `livingroom` роОрой рокрпЖропро░ро┐роЯрокрпНрокроЯрпНроЯ родрпКро▓рпИро╡ро┐ро▓ро┐ро░рпБроирпНродрпБ ро╡рпЖрокрпНрокроиро┐ро▓рпИ роЪрпЖройрпНроЪро╛ро░ро╛ро▓рпН роЕро│ро╡ро┐роЯрокрпНрокроЯрпНроЯ ро╡рпЖрокрпНрокроиро┐ро▓рпИ |
| `bedroom_temperature` | 21┬░C | `bedroom` роОрой рокрпЖропро░ро┐роЯрокрпНрокроЯрпНроЯ родрпКро▓рпИро╡ро┐ро▓ро┐ро░рпБроирпНродрпБ ро╡рпЖрокрпНрокроиро┐ро▓рпИ роЪрпЖройрпНроЪро╛ро░ро╛ро▓рпН роЕро│ро╡ро┐роЯрокрпНрокроЯрпНроЯ ро╡рпЖрокрпНрокроиро┐ро▓рпИ |

роХро┐ро│ро╡рпБроЯрпН роЪрпЗро╡рпИ роЗроирпНрод роЯрпЖро▓ро┐роорпЖроЯрпНро░ро┐ родро░ро╡рпБроХро│рпИрокрпН рокропройрпНрокроЯрпБродрпНродро┐, ро╡рпЖрокрпНрокроиро┐ро▓рпИропрпИ роХроЯрпНроЯрпБрокрпНрокроЯрпБродрпНрод роЙродрпНродро░ро╡рпБроХро│рпИ роЕройрпБрокрпНрокрпБро╡родрпБ роХрпБро▒ро┐родрпНродрпБ роорпБроЯро┐ро╡рпЖроЯрпБроХрпНроХ роорпБроЯро┐ропрпБроорпН.

### роЙроЩрпНроХро│рпН IoT роЪро╛родройродрпНродро┐ро▓ро┐ро░рпБроирпНродрпБ роЯрпЖро▓ро┐роорпЖроЯрпНро░ро┐ роЕройрпБрокрпНрокро╡рпБроорпН

роЙроЩрпНроХро│рпН роирпИроЯрпНро▓рпИроЯрпНроЯро┐ро▒рпНроХрпБ роЗрогрпИроп роХроЯрпНроЯрпБрокрпНрокро╛роЯрпНроЯрпИроЪрпН роЪрпЗро░рпНрокрпНрокродро┐ро▓рпН роЕроЯрпБродрпНрод рокроХрпБродро┐, роТро│ро┐ропро┐ройрпН роЕро│ро╡ро┐ройрпН роЯрпЖро▓ро┐роорпЖроЯрпНро░ро┐ропрпИ MQTT рокрпНро░рпЛроХрпНроХро░рпБроХрпНроХрпБ роТро░рпБ роЯрпЖро▓ро┐роорпЖроЯрпНро░ро┐ родро▓рпИрокрпНрокро┐ро▓рпН роЕройрпБрокрпНрокрпБро╡родрпБ.

#### рокрогро┐роХро│рпН - роЙроЩрпНроХро│рпН IoT роЪро╛родройродрпНродро┐ро▓ро┐ро░рпБроирпНродрпБ роЯрпЖро▓ро┐роорпЖроЯрпНро░ро┐ роЕройрпБрокрпНрокро╡рпБроорпН

роТро│ро┐ропро┐ройрпН роЕро│ро╡ро┐ройрпН роЯрпЖро▓ро┐роорпЖроЯрпНро░ро┐ропрпИ MQTT рокрпНро░рпЛроХрпНроХро░рпБроХрпНроХрпБ роЕройрпБрокрпНрокро╡рпБроорпН.

родро░ро╡рпБ JSON роОрой роХрпБро▒ро┐ропро╛роХрпНроХрокрпНрокроЯрпБроХро┐ро▒родрпБ - JavaScript Object Notation роОройрпНрокродро▒рпНроХро╛рой роЪрпБро░рпБроХрпНроХроорпН, роорпБроХрпНроХро┐роп/роородро┐рокрпНрокрпБ роЬрпЛроЯро┐роХро│рпИрокрпН рокропройрпНрокроЯрпБродрпНродро┐ роЙро░рпИ ро╡роЯро┐ро╡родрпНродро┐ро▓рпН родро░ро╡рпБроХро│рпИ роХрпБро▒ро┐ропро╛роХрпНроХрпБро╡родро▒рпНроХро╛рой родро░роиро┐ро▓рпИ.

тЬЕ JSON рокро▒рпНро▒ро┐ роирпАроЩрпНроХро│рпН роЕро▒ро┐роирпНродро┐ро░рпБроХрпНроХро╡ро┐ро▓рпНро▓рпИ роОройрпНро▒ро╛ро▓рпН, [JSON.org роЖро╡рогродрпНродро┐ро▓рпН](https://www.json.org/) роорпЗро▓рпБроорпН роЕро▒ро┐ропро▓ро╛роорпН.

MQTT рокрпНро░рпЛроХрпНроХро░рпБроХрпНроХрпБ роЙроЩрпНроХро│рпН роЪро╛родройродрпНродро┐ро▓ро┐ро░рпБроирпНродрпБ роЯрпЖро▓ро┐роорпЖроЯрпНро░ро┐ роЕройрпБрокрпНрок роХрпАро┤рпЗ роЙро│рпНро│ родрпКроЯро░рпНрокро╛рой рокроЯро┐ропрпИрокрпН рокро┐ройрпНрокро▒рпНро▒ро╡рпБроорпН:

* [Arduino - Wio Terminal](wio-terminal-telemetry.md)
* [Single-board computer - Raspberry Pi/Virtual IoT device](single-board-computer-telemetry.md)

### MQTT рокрпНро░рпЛроХрпНроХро░ро┐ро▓ро┐ро░рпБроирпНродрпБ роЯрпЖро▓ро┐роорпЖроЯрпНро░ро┐ рокрпЖро▒ро╡рпБроорпН

роЯрпЖро▓ро┐роорпЖроЯрпНро░ро┐ роЕройрпБрокрпНрокрпБро╡родро┐ро▓рпН роОроирпНрод рокропройрпБроорпН роЗро▓рпНро▓рпИ, роЕродрпИ роХрпЗроЯрпНроХ ропро╛ро░рпБроорпН роЗро▓рпНро▓ро╛ро╡ро┐роЯрпНроЯро╛ро▓рпН. роТро│ро┐ропро┐ройрпН роЕро│ро╡ро┐ройрпН роЯрпЖро▓ро┐роорпЖроЯрпНро░ро┐ роЕродрпИ роЪрпЖропро▓рпНрокроЯрпБродрпНрод роХрпЗроЯрпНроХрпБроорпН роПродрпЛ роТройрпНро▒рпИродрпН родрпЗро╡рпИрокрпНрокроЯрпБроХро┐ро▒родрпБ. роЗроирпНрод 'роЪро░рпНро╡ро░рпН' роХрпБро▒ро┐ропрпАроЯрпБ роТро░рпБ рокрпЖро░ро┐роп IoT рокропройрпНрокро╛роЯрпНроЯро┐ройрпН рокроХрпБродро┐ропро╛роХ роХро┐ро│ро╡рпБроЯрпН роЪрпЗро╡рпИроХрпНроХрпБ роирпАроЩрпНроХро│рпН рокро┐ро░роЪрпБро░ро┐роХрпНроХ ро╡рпЗрогрпНроЯро┐роп роХрпБро▒ро┐ропрпАроЯрпНроЯро┐ройрпН ро╡роХрпИ роЖроХрпБроорпН, роЖройро╛ро▓рпН роЗроЩрпНроХрпЗ роирпАроЩрпНроХро│рпН роЗроирпНрод роХрпБро▒ро┐ропрпАроЯрпНроЯрпИ роЙроЩрпНроХро│рпН роХрогро┐ройро┐ропро┐ро▓рпН роЙро│рпНро│рпВро░рпН роЗропроХрпНроХродрпНродро┐ро▓рпН роЗропроХрпНроХрокрпН рокрпЛроХро┐ро▒рпАро░рпНроХро│рпН (роЕро▓рпНро▓родрпБ роЙроЩрпНроХро│рпН Pi роЗро▓рпН роирпАроЩрпНроХро│рпН роирпЗро░роЯро┐ропро╛роХ роХрпБро▒ро┐ропрпАроЯрпБ роЪрпЖропрпНроХро┐ро▒рпАро░рпНроХро│рпН роОройрпНро▒ро╛ро▓рпН). роЪро░рпНро╡ро░рпН роХрпБро▒ро┐ропрпАроЯрпБ Python рокропройрпНрокро╛роЯрпНроЯрпИроХрпН роХрпКрогрпНроЯрпБро│рпНро│родрпБ, роЗродрпБ роТро│ро┐ропро┐ройрпН роЕро│ро╡рпБроЯройрпН MQTT роорпВро▓роорпН роЯрпЖро▓ро┐роорпЖроЯрпНро░ро┐ роЪрпЖропрпНродро┐роХро│рпИ роХрпЗроЯрпНроХро┐ро▒родрпБ. роЗроирпНрод рокро╛роЯродрпНродро┐ройрпН рокро┐ройрпНройро░рпН, LED роР роЗропроХрпНроХ роЕро▓рпНро▓родрпБ роЕрогрпИроХрпНроХ роЙродрпНродро░ро╡рпБ роЪрпЖропрпНродро┐ропрпБроЯройрпН рокродро┐ро▓ро│ро┐роХрпНроХ роЗродрпБ роЪрпЖропрпНроХро┐ро▒родрпБ.

тЬЕ роЖро░ро╛ропрпНроЪрпНроЪро┐ роЪрпЖропрпНропрпБроЩрпНроХро│рпН: роХрпЗроЯрпНроХрпБроорпН ропро╛ро░рпБроорпН роЗро▓рпНро▓ро╛ро╡ро┐роЯрпНроЯро╛ро▓рпН MQTT роЪрпЖропрпНродро┐роХро│рпБроХрпНроХрпБ роОройрпНрой роироЯроХрпНроХрпБроорпН?

#### Python рооро▒рпНро▒рпБроорпН VS Code роиро┐ро▒рпБро╡ро╡рпБроорпН

роЙроЩрпНроХро│рпН роХрогро┐ройро┐ропро┐ро▓рпН Python рооро▒рпНро▒рпБроорпН VS Code
Python роЗройрпН роЪроХрпНродро┐ро╡ро╛ропрпНроирпНрод роЕроорпНроЪроЩрпНроХро│ро┐ро▓рпН роТройрпНро▒рпБ [pip packages](https://pypi.org) роиро┐ро▒рпБро╡рпБроорпН родро┐ро▒ройрпН - роЗродрпБ рооро▒рпНро▒ро╡ро░рпНроХро│ро╛ро▓рпН роОро┤рпБродрокрпНрокроЯрпНроЯ рооро▒рпНро▒рпБроорпН роЗрогрпИропродрпНродро┐ро▓рпН ро╡рпЖро│ро┐ропро┐роЯрокрпНрокроЯрпНроЯ роХрпБро▒ро┐ропрпАроЯрпНроЯрпБ родрпКроХрпБрокрпНрокрпБроХро│рпН. роирпАроЩрпНроХро│рпН роТро░рпБ роХроЯрпНроЯро│рпИропрпИрокрпН рокропройрпНрокроЯрпБродрпНродро┐ роЙроЩрпНроХро│рпН роХрогро┐ройро┐ропро┐ро▓рпН роТро░рпБ pip package роР роиро┐ро▒рпБро╡ро▓ро╛роорпН, рокро┐ройрпНройро░рпН роЙроЩрпНроХро│рпН роХрпБро▒ро┐ропрпАроЯрпНроЯро┐ро▓рпН роЕроирпНрод родрпКроХрпБрокрпНрокрпИрокрпН рокропройрпНрокроЯрпБродрпНродро▓ро╛роорпН. MQTT роорпВро▓роорпН родрпКроЯро░рпНрокрпБ роХрпКро│рпНро│ роТро░рпБ package роР роиро┐ро▒рпБро╡ роирпАроЩрпНроХро│рпН pip роРрокрпН рокропройрпНрокроЯрпБродрпНродрокрпН рокрпЛроХро┐ро▒рпАро░рпНроХро│рпН.

роЗропро▓рпНрокро╛роХ, роирпАроЩрпНроХро│рпН роТро░рпБ package роР роиро┐ро▒рпБро╡рпБроорпНрокрпЛродрпБ, роЕродрпБ роЙроЩрпНроХро│рпН роХрогро┐ройро┐ропро┐ро▓рпН роОроЩрпНроХрпБроорпН роХро┐роЯрпИроХрпНроХро┐ро▒родрпБ, роЗродрпБ package рокродро┐рокрпНрокрпБроХро│рпБроЯройрпН родрпКроЯро░рпНрокрпБроЯрпИроп роЪро┐роХрпНроХро▓рпНроХро│рпИ роЙро░рпБро╡ро╛роХрпНроХро▓ро╛роорпН - роЙродро╛ро░рогрооро╛роХ, роТро░рпБ рокропройрпНрокро╛роЯрпБ роТро░рпБ package роЗройрпН роТро░рпБ рокродро┐рокрпНрокрпИроЪрпН роЪро╛ро░рпНроирпНродро┐ро░рпБроХрпНроХрпБроорпН, роЖройро╛ро▓рпН роирпАроЩрпНроХро│рпН ро╡рпЗро▒рпБ рокропройрпНрокро╛роЯрпНроЯро┐ро▒рпНроХро╛роХ рокрпБродро┐роп рокродро┐рокрпНрокрпИ роиро┐ро▒рпБро╡рпБроорпНрокрпЛродрпБ роЕродрпБ роЪрпЖропро▓ро┐ро┤роХрпНроХро┐ро▒родрпБ. роЗроирпНрод роЪро┐роХрпНроХро▓рпИродрпН родро╡ро┐ро░рпНроХрпНроХ, роирпАроЩрпНроХро│рпН [Python virtual environment](https://docs.python.org/3/library/venv.html) роРрокрпН рокропройрпНрокроЯрпБродрпНродро▓ро╛роорпН, роЗродрпБ роТро░рпБ роХрпБро▒ро┐рокрпНрокро┐роЯрпНроЯ роХрпЛрокрпНрокроХродрпНродро┐ро▓рпН Python роЗройрпН роироХро▓ро╛роХрпБроорпН, роорпЗро▓рпБроорпН роирпАроЩрпНроХро│рпН pip packages роР роиро┐ро▒рпБро╡рпБроорпНрокрпЛродрпБ роЕро╡рпИ роЕроирпНрод роХрпЛрокрпНрокроХродрпНродро┐ро▒рпНроХрпЗ роиро┐ро▒рпБро╡рокрпНрокроЯрпБроорпН.

##### рокрогро┐роХрпНроХрпВро▒рпНро▒рпБ - Python virtual environment роР роЕроорпИроХрпНроХро╡рпБроорпН

Python virtual environment роР роЕроорпИроХрпНроХро╡рпБроорпН рооро▒рпНро▒рпБроорпН MQTT pip packages роР роиро┐ро▒рпБро╡ро╡рпБроорпН.

1. роЙроЩрпНроХро│рпН terminal роЕро▓рпНро▓родрпБ command line роЗро▓рпН, рокрпБродро┐роп роХрпЛрокрпНрокроХродрпНродрпИ роЙро░рпБро╡ро╛роХрпНроХро╡рпБроорпН рооро▒рпНро▒рпБроорпН роЕродро┐ро▓рпН роЪрпЖро▓рпНро▓ро╡рпБроорпН:

    ```sh
    mkdir nightlight-server
    cd nightlight-server
    ```

1. `.venv` роХрпЛрокрпНрокроХродрпНродро┐ро▓рпН роТро░рпБ virtual environment роР роЙро░рпБро╡ро╛роХрпНроХ роХрпАро┤рпЗ роЙро│рпНро│родрпИ роЗропроХрпНроХро╡рпБроорпН:

    ```sh
    python3 -m venv .venv
    ```

    > ЁЯТБ Python 3 роРрокрпН рокропройрпНрокроЯрпБродрпНродро┐ virtual environment роР роЙро░рпБро╡ро╛роХрпНроХ Python 2 роХрпВроЯ роиро┐ро▒рпБро╡рокрпНрокроЯрпНроЯро┐ро░рпБроХрпНроХ ро╡ро╛ропрпНрокрпНрокрпБ роЙро│рпНро│родро╛ро▓рпН `python3` роР родрпЖро│ро┐ро╡ро╛роХ роЕро┤рпИроХрпНроХ ро╡рпЗрогрпНроЯрпБроорпН. Python 2 роиро┐ро▒рпБро╡рокрпНрокроЯрпНроЯро┐ро░рпБроирпНродро╛ро▓рпН `python` роР роЕро┤рпИрокрпНрокродрпБ Python 2 роРрокрпН рокропройрпНрокроЯрпБродрпНродрпБроорпН.

1. virtual environment роР роЪрпЖропро▓рпНрокроЯрпБродрпНродро╡рпБроорпН:

    * Windows роЗро▓рпН:
        * роирпАроЩрпНроХро│рпН Command Prompt роЕро▓рпНро▓родрпБ Windows Terminal ро╡ро┤ро┐ропро╛роХ Command Prompt роРрокрпН рокропройрпНрокроЯрпБродрпНродро┐ройро╛ро▓рпН, роХрпАро┤рпЗ роЙро│рпНро│родрпИ роЗропроХрпНроХро╡рпБроорпН:

            ```cmd
            .venv\Scripts\activate.bat
            ```

        * PowerShell роРрокрпН рокропройрпНрокроЯрпБродрпНродро┐ройро╛ро▓рпН, роХрпАро┤рпЗ роЙро│рпНро│родрпИ роЗропроХрпНроХро╡рпБроорпН:

            ```powershell
            .\.venv\Scripts\Activate.ps1
            ```

    * macOS роЕро▓рпНро▓родрпБ Linux роЗро▓рпН, роХрпАро┤рпЗ роЙро│рпНро│родрпИ роЗропроХрпНроХро╡рпБроорпН:

        ```cmd
        source ./.venv/bin/activate
        ```

    > ЁЯТБ роЗроирпНрод роХроЯрпНроЯро│рпИроХро│рпН virtual environment роР роЙро░рпБро╡ро╛роХрпНроХро┐роп роЗроЯродрпНродро┐ро▓ро┐ро░рпБроирпНродрпБ роЗропроХрпНроХрокрпНрокроЯ ро╡рпЗрогрпНроЯрпБроорпН. `.venv` роХрпЛрокрпНрокроХродрпНродро┐ро▒рпНроХрпБро│рпН роЪрпЖро▓рпНро▓ родрпЗро╡рпИропро┐ро▓рпНро▓рпИ, роирпАроЩрпНроХро│рпН activate command роР роЗропроХрпНроХро╡рпБроорпН, packages роР роиро┐ро▒рпБро╡ро╡рпБроорпН роЕро▓рпНро▓родрпБ code роР роЗропроХрпНроХро╡рпБроорпН, роирпАроЩрпНроХро│рпН virtual environment роР роЙро░рпБро╡ро╛роХрпНроХро┐роп роХрпЛрокрпНрокроХродрпНродро┐ро▓ро┐ро░рпБроирпНродрпБ.

1. virtual environment роЪрпЖропро▓рпНрокроЯрпБродрпНродрокрпНрокроЯрпНроЯ рокро┐ро▒роХрпБ, роЗропро▓рпНрокро╛рой `python` роХроЯрпНроЯро│рпИ virtual environment роР роЙро░рпБро╡ро╛роХрпНроХ рокропройрпНрокроЯрпБродрпНродро┐роп Python рокродро┐рокрпНрокрпИ роЗропроХрпНроХрпБроорпН. рокродро┐рокрпНрокрпИ роЕро▒ро┐роп роХрпАро┤рпЗ роЙро│рпНро│родрпИ роЗропроХрпНроХро╡рпБроорпН:

    ```sh
    python --version
    ```

    роЗродро▒рпНроХро╛рой output роХрпАро┤рпЗ роЙро│рпНро│родрпИрокрпН рокрпЛройрпНро▒родро╛роХ роЗро░рпБроХрпНроХрпБроорпН:

    ```output
    (.venv) тЮЬ  nightlight-server python --version
    Python 3.9.1
    ```

    > ЁЯТБ роЙроЩрпНроХро│рпН Python рокродро┐рокрпНрокрпБ рооро╛ро▒рпБрокроЯро▓ро╛роорпН - роЗродрпБ 3.6 роЕро▓рпНро▓родрпБ роЕродро▒рпНроХрпБ роорпЗро▓рпН рокродро┐рокрпНрокро╛роХ роЗро░рпБроирпНродро╛ро▓рпН роЪро░ро┐. роЗро▓рпНро▓рпИропрпЖройро┐ро▓рпН, роЗроирпНрод роХрпЛрокрпНрокроХродрпНродрпИ роирпАроХрпНроХро┐, Python роЗройрпН рокрпБродро┐роп рокродро┐рокрпНрокрпИ роиро┐ро▒рпБро╡ро┐ роорпАрогрпНроЯрпБроорпН роорпБропро▒рпНроЪро┐роХрпНроХро╡рпБроорпН.

1. [Paho-MQTT](https://pypi.org/project/paho-mqtt/) роОройрпНро▒ рокро┐ро░рокро▓рооро╛рой MQTT роирпВро▓роХродрпНродро┐ро▒рпНроХро╛рой pip package роР роиро┐ро▒рпБро╡ роХрпАро┤рпЗ роЙро│рпНро│ роХроЯрпНроЯро│рпИроХро│рпИ роЗропроХрпНроХро╡рпБроорпН:

    ```sh
    pip install paho-mqtt
    ```

    роЗроирпНрод pip package virtual environment роЗро▓рпН роороЯрпНроЯрпБроорпЗ роиро┐ро▒рпБро╡рокрпНрокроЯрпБроорпН, роЗродрпБ ро╡рпЖро│ро┐ропрпЗ роХро┐роЯрпИроХрпНроХро╛родрпБ.

#### server code роОро┤рпБродро╡рпБроорпН

Python роЗро▓рпН server code роЗрокрпНрокрпЛродрпБ роОро┤рпБродро▓ро╛роорпН.

##### рокрогро┐роХрпНроХрпВро▒рпНро▒рпБ - server code роОро┤рпБродро╡рпБроорпН

server code роОро┤рпБродро╡рпБроорпН.

1. virtual environment роЙро│рпНро│рпЗ Python file роР роЙро░рпБро╡ро╛роХрпНроХ `app.py` роОройрпНро▒рпБ рокрпЖропро░ро┐роЯ роХрпАро┤рпЗ роЙро│рпНро│родрпИ роЗропроХрпНроХро╡рпБроорпН:

    * Windows роЗро▓рпН:

        ```cmd
        type nul > app.py
        ```

    * macOS роЕро▓рпНро▓родрпБ Linux роЗро▓рпН:

        ```cmd
        touch app.py
        ```

1. родро▒рпНрокрпЛродрпИроп роХрпЛрокрпНрокроХродрпНродрпИ VS Code роЗро▓рпН родро┐ро▒роХрпНроХро╡рпБроорпН:

    ```sh
    code .
    ```

1. VS Code родрпКроЯроЩрпНроХрпБроорпНрокрпЛродрпБ, Python virtual environment роР роЪрпЖропро▓рпНрокроЯрпБродрпНродрпБроорпН. роЗродрпБ роХрпАро┤рпЗ роЙро│рпНро│ status bar роЗро▓рпН родрпЖро░ро┐ро╡ро┐роХрпНроХрокрпНрокроЯрпБроорпН:

    ![VS Code virtual environment роР родрпЗро░рпНроирпНродрпЖроЯрпБродрпНродродрпИ роХро╛роЯрпНроЯрпБроХро┐ро▒родрпБ](../../../../../translated_images/vscode-virtual-env.8ba42e04c3d533cf677e16cbe5ed9a3b80f62c6964472dc84b6f940800f0909f.ta.png)

1. VS Code Terminal роПро▒рпНроХройро╡рпЗ роЗропроЩрпНроХро┐роХрпН роХрпКрогрпНроЯро┐ро░рпБроирпНродро╛ро▓рпН, virtual environment роЕродро┐ро▓рпН роЪрпЖропро▓рпНрокроЯрпБродрпНродрокрпНрокроЯро╛родрпБ. Terminal роР **Kill the active terminal instance** рокрпКродрпНродро╛ройрпИ рокропройрпНрокроЯрпБродрпНродро┐ роорпБроЯро┐роХрпНроХро╡рпБроорпН:

    ![VS Code Kill the active terminal instance рокрпКродрпНродро╛ройрпИ роХро╛роЯрпНроЯрпБроХро┐ро▒родрпБ](../../../../../translated_images/vscode-kill-terminal.1cc4de7c6f25ee08f423f0ead714e61d069fac1eb2089e97b8a7bbcb3d45fe5e.ta.png)

1. рокрпБродро┐роп VS Code Terminal роР *Terminal -> New Terminal* роРродрпН родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН роЕро▓рпНро▓родрпБ `` CTRL+` `` роР роЕро┤рпБродрпНродро╡рпБроорпН. рокрпБродро┐роп terminal virtual environment роР роПро▒рпНро▒рпБроорпН, activate command роЗроЩрпНроХрпБ родрпЛройрпНро▒рпБроорпН. virtual environment (`.venv`) рокрпЖропро░рпБроорпН prompt роЗро▓рпН роЗро░рпБроХрпНроХрпБроорпН:

    ```output
    тЮЬ  nightlight-server source .venv/bin/activate
    (.venv) тЮЬ  nightlight 
    ```

1. VS Code explorer роЗро▓рпН `app.py` роХрпЛрокрпНрокрпИродрпН родро┐ро▒роирпНродрпБ роХрпАро┤рпЗ роЙро│рпНро│ code роРроЪрпН роЪрпЗро░рпНроХрпНроХро╡рпБроорпН:

    ```python
    import json
    import time
    
    import paho.mqtt.client as mqtt
    
    id = '<ID>'
    
    client_telemetry_topic = id + '/telemetry'
    client_name = id + 'nightlight_server'
    
    mqtt_client = mqtt.Client(client_name)
    mqtt_client.connect('test.mosquitto.org')
    
    mqtt_client.loop_start()
    
    def handle_telemetry(client, userdata, message):
        payload = json.loads(message.payload.decode())
        print("Message received:", payload)
    
    mqtt_client.subscribe(client_telemetry_topic)
    mqtt_client.on_message = handle_telemetry
    
    while True:
        time.sleep(2)
    ```

    6ро╡родрпБ ро╡ро░ро┐ропро┐ро▓рпН `<ID>` роР роЙроЩрпНроХро│рпН device code роЙро░рпБро╡ро╛роХрпНроХро┐роп рокрпЛродрпБ рокропройрпНрокроЯрпБродрпНродро┐роп родройро┐родрпНродрпБро╡рооро╛рой ID роорпВро▓роорпН рооро╛ро▒рпНро▒ро╡рпБроорпН.

    тЪая╕П роЗродрпБ **роЕродрпЗ ID** роЖроХ роЗро░рпБроХрпНроХ ро╡рпЗрогрпНроЯрпБроорпН, роЗро▓рпНро▓рпИропрпЖройро┐ро▓рпН server code роЪро░ро┐ропро╛рой topic роХрпНроХрпБ subscribe роЪрпЖропрпНропро╡рпЛ роЕро▓рпНро▓родрпБ publish роЪрпЖропрпНропро╡рпЛ роорпБроЯро┐ропро╛родрпБ.

    роЗроирпНрод code роТро░рпБ родройро┐родрпНродрпБро╡рооро╛рой рокрпЖропро░рпБроЯройрпН MQTT client роР роЙро░рпБро╡ро╛роХрпНроХро┐, *test.mosquitto.org* broker роХрпНроХрпБ роЗрогрпИроХрпНроХро┐ро▒родрпБ. рокро┐ройрпНройро░рпН, background thread роЗро▓рпН subscribe роЪрпЖропрпНропрокрпНрокроЯрпНроЯ topic роХро│ро┐ро▓рпН messages роХрпНроХро╛роХ роХрпЗроЯрпНроХрпБроорпН processing loop роР родрпКроЯроЩрпНроХрпБроХро┐ро▒родрпБ.

    client рокро┐ройрпНройро░рпН telemetry topic роЗро▓рпН messages роХрпНроХрпБ subscribe роЪрпЖропрпНроХро┐ро▒родрпБ, роорпЗро▓рпБроорпН message рокрпЖро▒рокрпНрокроЯрпБроорпН рокрпЛродрпБ роЕро┤рпИроХрпНроХрокрпНрокроЯрпБроорпН function роР ро╡ро░рпИропро▒рпБроХрпНроХро┐ро▒родрпБ. роТро░рпБ telemetry message рокрпЖро▒рокрпНрокроЯрпБроорпН рокрпЛродрпБ, `handle_telemetry` function роЕро┤рпИроХрпНроХрокрпНрокроЯрпБроорпН, console роЗро▓рпН message роР роЕроЪрпНроЪро┐роЯрпБроорпН.

    роЗро▒рпБродро┐ропро╛роХ, роТро░рпБ роорпБроЯро┐ро╡ро┐ро▓рпНро▓ро╛род loop application роР роЗропроХрпНроХ ро╡рпИроХрпНроХро┐ро▒родрпБ. MQTT client background thread роЗро▓рпН messages роХрпНроХрпБ роХрпЗроЯрпНроХро┐ро▒родрпБ рооро▒рпНро▒рпБроорпН роорпБроХрпНроХро┐роп application роЗропроЩрпНроХрпБроорпН ро╡ро░рпИ роЗропроЩрпНроХрпБроХро┐ро▒родрпБ.

1. VS Code terminal роЗро▓рпН Python app роР роЗропроХрпНроХ роХрпАро┤рпЗ роЙро│рпНро│родрпИ роЗропроХрпНроХро╡рпБроорпН:

    ```sh
    python app.py
    ```

    app IoT device роЗро▓рпН роЗро░рпБроирпНродрпБ messages роХрпЗроЯрпНроХродрпН родрпКроЯроЩрпНроХрпБроорпН.

1. роЙроЩрпНроХро│рпН device роЗропроЩрпНроХро┐роХрпН роХрпКрогрпНроЯро┐ро░рпБроХрпНроХро┐ро▒родрпБ рооро▒рпНро▒рпБроорпН telemetry messages роЕройрпБрокрпНрокрпБроХро┐ро▒родрпБ роОройрпНрокродрпИ роЙро▒рпБродро┐рокрпНрокроЯрпБродрпНродро╡рпБроорпН. роЙроЩрпНроХро│рпН physical роЕро▓рпНро▓родрпБ virtual device роЗро▓рпН detected light роЕро│ро╡рпБроХро│рпИ рооро╛ро▒рпНро▒ро╡рпБроорпН. рокрпЖро▒рокрпНрокроЯрпБроорпН messages terminal роЗро▓рпН роЕроЪрпНроЪро┐роЯрокрпНрокроЯрпБроорпН.

    ```output
    (.venv) тЮЬ  nightlight-server python app.py
    Message received: {'light': 0}
    Message received: {'light': 400}
    ```

    nightlight virtual environment роЗро▓рпН app.py роХрпЛрокрпНрокрпБ роЗропроЩрпНроХ ро╡рпЗрогрпНроЯрпБроорпН, nightlight-server virtual environment роЗро▓рпН app.py роХрпЛрокрпНрокрпБ роЕройрпБрокрпНрокрпБроорпН messages роР рокрпЖро▒.

> ЁЯТБ роЗроирпНрод code роР [code-server/server](../../../../../1-getting-started/lessons/4-connect-internet/code-server/server) роХрпЛрокрпНрокроХродрпНродро┐ро▓рпН роХро╛рогро▓ро╛роорпН.

### роОро╡рпНро╡ро│ро╡рпБ роЕроЯро┐роХрпНроХроЯро┐ telemetry роЕройрпБрокрпНрок ро╡рпЗрогрпНроЯрпБроорпН?

telemetry роЙроЯройрпН роорпБроХрпНроХро┐ропрооро╛рой рокро░ро┐роЪрпАро▓ройрпИ роОро╡рпНро╡ро│ро╡рпБ роЕроЯро┐роХрпНроХроЯро┐ роЕро│ро╡ро┐роЯро╡рпБроорпН рооро▒рпНро▒рпБроорпН родро░ро╡рпБроХро│рпИ роЕройрпБрокрпНрок ро╡рпЗрогрпНроЯрпБроорпН роОройрпНрокродрпБродро╛ройрпН. рокродро┐ро▓рпН - роЕродрпБ родрпЗро╡рпИроХрпНроХрпБ роПро▒рпНрок рооро╛ро▒рпБроорпН. роирпАроЩрпНроХро│рпН роЕроЯро┐роХрпНроХроЯро┐ роЕро│ро╡ро┐роЯро┐ройро╛ро▓рпН, роЕро│ро╡рпАроЯрпНроЯро┐ро▓рпН рооро╛ро▒рпНро▒роЩрпНроХро│рпБроХрпНроХрпБ ро╡ро┐ро░рпИро╡ро╛роХ рокродро┐ро▓ро│ро┐роХрпНроХ роорпБроЯро┐ропрпБроорпН, роЖройро╛ро▓рпН роирпАроЩрпНроХро│рпН роЕродро┐роХ роЪроХрпНродро┐, роЕродро┐роХ bandwidth рокропройрпНрокроЯрпБродрпНродрпБро╡рпАро░рпНроХро│рпН, роЕродро┐роХ родро░ро╡рпБроХро│рпИ роЙро░рпБро╡ро╛роХрпНроХрпБро╡рпАро░рпНроХро│рпН рооро▒рпНро▒рпБроорпН роЕро╡ро▒рпНро▒рпИ роЪрпЖропро▓рпНрокроЯрпБродрпНрод cloud resources роЕродро┐роХроорпН родрпЗро╡рпИрокрпНрокроЯрпБроорпН. роирпАроЩрпНроХро│рпН родрпЗро╡рпИропро╛рой роЕро│ро╡рпБроХрпНроХрпБ роороЯрпНроЯрпБроорпЗ роЕро│ро╡ро┐роЯ ро╡рпЗрогрпНроЯрпБроорпН, роЖройро╛ро▓рпН рооро┐роХ роЕродро┐роХрооро╛роХ роЕро│ро╡ро┐роЯроХрпНроХрпВроЯро╛родрпБ.

роТро░рпБ thermostat роХрпНроХрпБ, роЪро┐ро▓ роиро┐рооро┐роЯроЩрпНроХро│рпБроХрпНроХрпБ роТро░рпБроорпБро▒рпИ роЕро│ро╡ро┐роЯрпБро╡родрпБ рокрпЛродрпБрооро╛ройродрпБ, роПройрпЖройро┐ро▓рпН ро╡рпЖрокрпНрокроиро┐ро▓рпИ роЕроЯро┐роХрпНроХроЯро┐ рооро╛ро▒ро╛родрпБ. роирпАроЩрпНроХро│рпН роТро░рпБ роиро╛ро│рпБроХрпНроХрпБ роТро░рпБроорпБро▒рпИ роороЯрпНроЯрпБроорпЗ роЕро│ро╡ро┐роЯрпНроЯро╛ро▓рпН, роТро░рпБ роЪрпВро░ро┐ропроиро╛ро│рпН роородрпНродро┐ропро┐ро▓рпН роЗро░ро╡рпБроирпЗро░ ро╡рпЖрокрпНрокроиро┐ро▓рпИроХрпНроХрпБ роЙроЩрпНроХро│рпН ро╡рпАроЯрпНроЯрпИ ро╡рпЖрокрпНрокроорпВроЯрпНроЯ роорпБроЯро┐ропрпБроорпН, роЖройро╛ро▓рпН роирпАроЩрпНроХро│рпН роТро╡рпНро╡рпКро░рпБ ро╡ро┐роиро╛роЯро┐роХрпНроХрпБроорпН роЕро│ро╡ро┐роЯрпНроЯро╛ро▓рпН, родрпЗро╡рпИропро▒рпНро▒ duplicate ро╡рпЖрокрпНрокроиро┐ро▓рпИ роЕро│ро╡рпАроЯрпБроХро│рпН роЖропро┐ро░роХрпНроХрогроХрпНроХро┐ро▓рпН роЗро░рпБроХрпНроХрпБроорпН, роЗродрпБ рокропройро░рпНроХро│ро┐ройрпН роЗрогрпИроп ро╡рпЗроХродрпНродрпИропрпБроорпН bandwidth роРропрпБроорпН роХрпБро▒рпИроХрпНроХрпБроорпН (bandwidth родро┐роЯрпНроЯроЩрпНроХро│рпБроЯройрпН роЙро│рпНро│ро╡ро░рпНроХро│рпБроХрпНроХрпБ роТро░рпБ рокро┐ро░роЪрпНроЪро┐ройрпИ), роЕродро┐роХ роЪроХрпНродро┐ рокропройрпНрокроЯрпБродрпНродрпБроорпН, роЗродрпБ remote sensors рокрпЛройрпНро▒ battery powered devices роХрпНроХрпБ роТро░рпБ рокро┐ро░роЪрпНроЪро┐ройрпИропро╛роХ роЗро░рпБроХрпНроХро▓ро╛роорпН, роорпЗро▓рпБроорпН cloud computing resources роР роЕродро┐роХрооро╛роХ рокропройрпНрокроЯрпБродрпНродро┐ роЕро╡ро▒рпНро▒рпИ роЪрпЖропро▓рпНрокроЯрпБродрпНродро╡рпБроорпН роЪрпЗрооро┐роХрпНроХро╡рпБроорпН роЪрпЖро▓ро╡рпБроХро│рпИ роЕродро┐роХро░ро┐роХрпНроХрпБроорпН.

роТро░рпБ родрпКро┤ро┐ро▒рпНроЪро╛ро▓рпИропро┐ро▓рпН machinery data роР роХрогрпНроХро╛рогро┐роХрпНроХрпБроорпНрокрпЛродрпБ, роЕродрпБ родрпЛро▓рпНро╡ро┐ропроЯрпИропрпБроорпНрокрпЛродрпБ рокрпЗро░ро┤ро┐ро╡рпИ роПро▒рпНрокроЯрпБродрпНродро┐ роХрпЛроЯро┐роХрпНроХрогроХрпНроХро╛рой ро╡ро░рпБро╡ро╛ропрпН роЗро┤рокрпНрокрпИ роПро▒рпНрокроЯрпБродрпНродрпБроорпН, роЕрокрпНрокрпЛродрпБ роТро░рпБ ро╡ро┐роиро╛роЯро┐роХрпНроХрпБ рокро▓ роорпБро▒рпИ роЕро│ро╡ро┐роЯрпБро╡родрпБ роЕро╡роЪро┐ропрооро╛роХ роЗро░рпБроХрпНроХро▓ро╛роорпН. bandwidth ро╡рпАрогро╛роХрпБроорпН, роЖройро╛ро▓рпН роТро░рпБ machine роР роиро┐ро▒рпБродрпНродро┐ роЪро░ро┐роЪрпЖропрпНроп ро╡рпЗрогрпНроЯрпБроорпН роОройрпНрокродрпИ роХро╛роЯрпНроЯрпБроорпН telemetry роР родро╡ро▒ро╡ро┐роЯрпБро╡родрпБ роиро▓рпНро▓родро▓рпНро▓.

> ЁЯТБ роЗроирпНрод роЪрпВро┤ро▓ро┐ро▓рпН, роирпАроЩрпНроХро│рпН роорпБродро▓ро┐ро▓рпН telemetry роР роЪрпЖропро▓рпНрокроЯрпБродрпНрод edge device роР ро╡рпИродрпНродро┐ро░рпБроХрпНроХро▓ро╛роорпН, роЗродрпБ роЗрогрпИропродрпНродрпИрокрпН рокро▒рпНро▒ро┐роп роЪро╛ро░рпНрокрпИ роХрпБро▒рпИроХрпНроХрпБроорпН.

### роЗрогрпИрокрпНрокрпБ роЗро┤рокрпНрокрпБ

роЗрогрпИроп роЗрогрпИрокрпНрокрпБроХро│рпН роироорпНрокроХродрпНродройрпНроорпИропро▒рпНро▒ро╡рпИ, outages рокрпКродрпБро╡ро╛ройро╡рпИ. роЗроирпНрод роЪрпВро┤ро▓ро┐ро▓рпН IoT device роОройрпНрой роЪрпЖропрпНроп ро╡рпЗрогрпНроЯрпБроорпН - родро░ро╡рпБроХро│рпИ роЗро┤роХрпНроХ ро╡рпЗрогрпНроЯрпБрооро╛ роЕро▓рпНро▓родрпБ роЗрогрпИрокрпНрокрпБ роорпАрогрпНроЯрпБроорпН роПро▒рпНрокроЯрпБроорпН ро╡ро░рпИ роЕродрпИ роЪрпЗрооро┐роХрпНроХ ро╡рпЗрогрпНроЯрпБрооро╛? роорпАрогрпНроЯрпБроорпН, рокродро┐ро▓рпН роЕродрпБ родрпЗро╡рпИроХрпНроХрпБ роПро▒рпНрок рооро╛ро▒рпБроорпН.

роТро░рпБ thermostat роХрпНроХрпБ, рокрпБродро┐роп ро╡рпЖрокрпНрокроиро┐ро▓рпИ роЕро│ро╡рпАроЯрпБ роОроЯрпБроХрпНроХрокрпНрокроЯрпНроЯро╡рпБроЯройрпН родро░ро╡рпБроХро│рпИ роЗро┤роХрпНроХро▓ро╛роорпН. 20 роиро┐рооро┐роЯроЩрпНроХро│рпБроХрпНроХрпБ роорпБройрпНрокрпБ 20.5┬░C роЗро░рпБроирпНродродрпБ, роЖройро╛ро▓рпН родро▒рпНрокрпЛродрпБ ро╡рпЖрокрпНрокроиро┐ро▓рпИ 19┬░C роОройрпНро▒ро╛ро▓рпН, heating on роЕро▓рпНро▓родрпБ off роЖроХ роЗро░рпБроХрпНроХ ро╡рпЗрогрпНроЯрпБроорпН роОройрпНрокродрпИ родро▒рпНрокрпЛродрпИроп ро╡рпЖрокрпНрокроиро┐ро▓рпИ родрпАро░рпНрооро╛ройро┐роХрпНроХро┐ро▒родрпБ.

machinery роХрпНроХрпБ, роХрпБро▒ро┐рокрпНрокро╛роХ trends роРрокрпН рокро╛ро░рпНроХрпНроХ рокропройрпНрокроЯрпБродрпНродрокрпНрокроЯрпБроорпН родро░ро╡рпБроХро│рпИ роирпАроЩрпНроХро│рпН ро╡рпИродрпНродро┐ро░рпБроХрпНроХ ро╡ро┐ро░рпБроорпНрокро▓ро╛роорпН. роЪро┐ро▓ роирпЗро░роЩрпНроХро│ро┐ро▓рпН machine learning models родро░ро╡ро┐ройрпН роТро░рпБ роХрпБро▒ро┐рокрпНрокро┐роЯрпНроЯ роХро╛ро▓роХроЯрпНроЯродрпНродро┐ро▓ро┐ро░рпБроирпНродрпБ (роорпБроирпНродрпИроп роТро░рпБ роорогро┐ роирпЗро░роорпН рокрпЛройрпНро▒) anomalous data роР роХрогрпНроЯро▒ро┐роирпНродрпБ, predictive maintenance роХрпНроХрпБ рокропройрпНрокроЯрпБродрпНродрокрпНрокроЯрпБроорпН. роЗродрпБ machine роЙроЯройроЯро┐ропро╛роХ рокро┤рпБродрпБрокроЯрпБроорпН роорпБройрпНройро░рпН роЕродрпИ роЪро░ро┐роЪрпЖропрпНроп роЕро▓рпНро▓родрпБ рооро╛ро▒рпНро▒рпБро╡родро▒рпНроХро╛рой роЕро▒ро┐роХрпБро▒ро┐роХро│рпИродрпН родрпЗроЯрпБроХро┐ро▒родрпБ. роТро░рпБ machine роХрпНроХрпБ роЕройрпБрокрпНрокрокрпНрокроЯрпБроорпН роТро╡рпНро╡рпКро░рпБ bit of telemetry роР роирпАроЩрпНроХро│рпН ро╡ро┐ро░рпБроорпНрокро▓ро╛роорпН, роОройро╡рпЗ IoT device роорпАрогрпНроЯрпБроорпН роЗрогрпИроХрпНроХрпБроорпНрокрпЛродрпБ, роЗрогрпИроп outage роЗро▓рпН роЙро░рпБро╡ро╛роХрпНроХрокрпНрокроЯрпНроЯ роЕройрпИродрпНродрпБ telemetry роР роЕройрпБрокрпНрокрпБроорпН.

IoT device ро╡роЯро┐ро╡роорпИрокрпНрокро╛ро│ро░рпНроХро│рпН IoT device роЗрогрпИроп outage роЕро▓рпНро▓родрпБ signal роЗро┤рокрпНрокро╛ро▓рпН рокропройрпНрокроЯрпБродрпНродрокрпНрокроЯ роорпБроЯро┐ропрпБрооро╛ роОройрпНрокродрпИрокрпН рокро░ро┐роЪрпАро▓ро┐роХрпНроХ ро╡рпЗрогрпНроЯрпБроорпН. роТро░рпБ smart thermostat роЗрогрпИроп outage роХро╛ро░рогрооро╛роХ cloud роХрпНроХрпБ telemetry роЕройрпБрокрпНрок роорпБроЯро┐ропро╛род рокрпЛродрпБ heating роР роХроЯрпНроЯрпБрокрпНрокроЯрпБродрпНрод роЪро┐ро▓ decision роХро│рпИ роОроЯрпБроХрпНроХ ро╡рпЗрогрпНроЯрпБроорпН.

[![роЗроирпНрод Ferrari underground роЗро▓рпН cell reception роЗро▓рпНро▓ро╛род роЗроЯродрпНродро┐ро▓рпН upgrade роЪрпЖропрпНроп роорпБропро▒рпНроЪро┐родрпНродродро╛ро▓рпН роЪрпЖропро▓ро┐ро┤роирпНродродрпБ](../../../../../translated_images/bricked-car.dc38f8efadc6c59d76211f981a521efb300939283dee468f79503aae3ec67615.ta.png)](https://twitter.com/internetofshit/status/1315736960082808832)

MQTT роЗро▓рпН роЗрогрпИрокрпНрокрпБ роЗро┤рокрпНрокрпИроЪрпН роЪрооро╛ро│ро┐роХрпНроХ, device рооро▒рпНро▒рпБроорпН server code message delivery роР роЙро▒рпБродро┐рокрпНрокроЯрпБродрпНрод ро╡рпЗрогрпНроЯрпБроорпН, роЙродро╛ро░рогрооро╛роХ, reply topic роЗро▓рпН additional messages роорпВро▓роорпН reply роЪрпЖропрпНропрокрпНрокроЯ ро╡рпЗрогрпНроЯрпБроорпН, роЗро▓рпНро▓рпИропрпЖройро┐ро▓рпН роЕро╡рпИ queue роЪрпЖропрпНропрокрпНрокроЯ ро╡рпЗрогрпНроЯрпБроорпН, рокро┐ройрпНройро░рпН роорпАрогрпНроЯрпБроорпН роЕройрпБрокрпНрокрокрпНрокроЯ ро╡рпЗрогрпНроЯрпБроорпН.

## Commands

Commands роОройрпНрокродрпБ cloud роЗро▓рпН роЗро░рпБроирпНродрпБ device роХрпНроХрпБ роЕройрпБрокрпНрокрокрпНрокроЯрпБроорпН messages роЖроХрпБроорпН, роЗродрпБ роТро░рпБ роЪрпЖропро▓рпНрокро╛роЯрпНроЯрпИроЪрпН роЪрпЖропрпНроп device роР роЙродрпНродро░ро╡ро┐роЯрпБроХро┐ро▒родрпБ. рокрпЖро░рпБроорпНрокро╛ро▓рпБроорпН роЗродрпБ actuator роорпВро▓роорпН output роР ро╡ро┤роЩрпНроХрпБро╡родрпБ, роЖройро╛ро▓рпН роЗродрпБ device роХрпНроХрпБ reboot роЪрпЖропрпНроп роЕро▓рпНро▓родрпБ роХрпВроЯрпБродро▓рпН telemetry роР роЪрпЗроХро░ро┐родрпНродрпБ command роХрпНроХрпБ рокродро┐ро▓ро│ро┐роХрпНроХ роЙродрпНродро░ро╡ро┐роЯрпБроорпН.

![роЗрогрпИропродрпНродрпБроЯройрпН роЗрогрпИроХрпНроХрокрпНрокроЯрпНроЯ thermostat heating роР turn on роЪрпЖропрпНроп command роР рокрпЖро▒рпБроХро┐ро▒родрпБ](../../../../../translated_images/commands.d6c06bbbb3a02cce95f2831a1c331daf6dedd4e470c4aa2b0ae54f332016e504.ta.png)

роТро░рпБ thermostat cloud роЗро▓рпН роЗро░рпБроирпНродрпБ heating роР turn on роЪрпЖропрпНроп command роР рокрпЖро▒ро▓ро╛роорпН. роЕройрпИродрпНродрпБ sensors роЗройрпН telemetry data роЕроЯро┐рокрпНрокроЯрпИропро┐ро▓рпН, heating on роЖроХ роЗро░рпБроХрпНроХ ро╡рпЗрогрпНроЯрпБроорпН роОройрпНро▒рпБ cloud service роорпБроЯро┐ро╡рпБ роЪрпЖропрпНродро╛ро▓рпН, роЕродрпБ родрпКроЯро░рпНрокрпБроЯрпИроп command роР роЕройрпБрокрпНрокрпБроорпН.

### MQTT broker роХрпНроХрпБ commands роЕройрпБрокрпНрокро╡рпБроорпН

роЗрокрпНрокрпЛродрпБ, server code IoT device sensed light роЕро│ро╡рпБроХро│ро┐ройрпН роЕроЯро┐рокрпНрокроЯрпИропро┐ро▓рпН light роР роХроЯрпНроЯрпБрокрпНрокроЯрпБродрпНрод command роР роЕройрпБрокрпНрок ро╡рпЗрогрпНроЯрпБроорпН.

1. VS Code роЗро▓рпН server code роР родро┐ро▒роХрпНроХро╡рпБроорпН

1. `client_telemetry_topic` роР роЕро▒ро┐ро╡ро┐роХрпНроХро┐ро▒родро▒рпНроХрпБ рокро┐ро▒роХрпБ роХрпАро┤рпЗ роЙро│рпНро│ ро╡ро░ро┐ропрпИроЪрпН роЪрпЗро░рпНроХрпНроХро╡рпБроорпН:

    ```python
    server_command_topic = id + '/commands'
    ```

1. `handle_telemetry` function роЗройрпН роЗро▒рпБродро┐ропро┐ро▓рпН роХрпАро┤рпЗ роЙро│рпНро│ code роРроЪрпН роЪрпЗро░рпНроХрпНроХро╡рпБроорпН:

    ```python
    command = { 'led_on' : payload['light'] < 300 }
    print("Sending message:", command)
    
    client.publish(server_command_topic, json.dumps(command))
    ```

    роЗродрпБ command topic роХрпНроХрпБ JSON message роР роЕройрпБрокрпНрокрпБроХро┐ро▒родрпБ, light 300 роХрпНроХрпБ роХрпБро▒рпИро╡ро╛роХ роЗро░рпБроирпНродро╛ро▓рпН `led_on` true роЖроХро╡рпБроорпН, роЗро▓рпНро▓рпИропрпЖройро┐ро▓рпН false роЖроХро╡рпБроорпН. light 300 роХрпНроХрпБ роХрпБро▒рпИро╡ро╛роХ роЗро░рпБроирпНродро╛ро▓рпН, LED роР turn on роЪрпЖропрпНроп device роР true роЕройрпБрокрпНрокрпБроХро┐ро▒родрпБ.

1. роорпБройрпНрокрпЗ роЪрпЖропрпНродрокроЯро┐ code роР роЗропроХрпНроХро╡рпБроорпН

1. роЙроЩрпНроХро│рпН physical роЕро▓рпНро▓родрпБ virtual device роЗро▓рпН detected light роЕро│ро╡рпБроХро│рпИ рооро╛ро▒рпНро▒ро╡рпБроорпН. рокрпЖро▒рокрпНрокроЯрпБроорпН messages рооро▒рпНро▒рпБроорпН роЕройрпБрокрпНрокрокрпНрокроЯрпБроорпН commands terminal роЗро▓рпН роОро┤рпБродрокрпНрокроЯрпБроорпН:

    ```output
    (.venv) тЮЬ  nightlight-server python app.py
    Message received: {'light': 0}
    Sending message: {'led_on': True}
    Message received: {'light': 400}
    Sending message: {'led_on': False}
    ```

> ЁЯТБ telemetry рооро▒рпНро▒рпБроорпН commands роТро╡рпНро╡рпКройрпНро▒рпБроорпН родройро┐родрпНрод topic роЗро▓рпН роЕройрпБрокрпНрокрокрпНрокроЯрпБроХро┐ройрпНро▒рой. роЗродрпБ рокро▓ devices роЗройрпН telemetry роТро░рпЗ telemetry topic роЗро▓рпН родрпЛройрпНро▒рпБроорпН, рооро▒рпНро▒рпБроорпН commands рокро▓ devices роЗро▓рпН роТро░рпЗ commands topic роЗро▓рпН родрпЛройрпНро▒рпБроорпН. роирпАроЩрпНроХро│рпН роТро░рпБ роХрпБро▒ро┐рокрпНрокро┐роЯрпНроЯ device роХрпНроХрпБ command роЕройрпБрокрпНрок ро╡ро┐ро░рпБроорпНрокро┐ройро╛ро▓рпН, `/commands/device1`, `/commands/device2` рокрпЛройрпНро▒ родройро┐родрпНродрпБро╡рооро╛рой device id роЙроЯройрпН рокро▓ topics роРрокрпН рокропройрпНрокроЯрпБродрпНродро▓ро╛роорпН. роЕроирпНрод device роХрпНроХрпБ роороЯрпНроЯрпБроорпН messages роХрпЗроЯрпНроХ device роХрпЗроЯрпНроХрпБроорпН.

> ЁЯТБ роЗроирпНрод code роР [code-commands/server](../../../../../1-getting-started/lessons/4-connect-internet/code-commands/server) роХрпЛрокрпНрокроХродрпНродро┐ро▓рпН роХро╛рогро▓ро╛роорпН.

### IoT device роЗро▓рпН commands роР handle роЪрпЖропрпНропро╡рпБроорпН

роЗрокрпНрокрпЛродрпБ server роЗро▓рпН роЗро░рпБроирпНродрпБ commands роЕройрпБрокрпНрокрокрпНрокроЯрпБро╡родро╛ро▓рпН, IoT device роЗро▓рпН code роРроЪрпН роЪрпЗро░рпНродрпНродрпБ LED роР роХроЯрпНроЯрпБрокрпНрокроЯрпБродрпНродро▓ро╛роорпН.

MQTT broker роЗро▓рпН роЗро░рпБроирпНродрпБ commands роХрпЗроЯрпНроХ роХрпАро┤рпЗ роЙро│рпНро│ родрпКроЯро░рпНрокрпБроЯрпИроп рокроЯро┐роХро│рпИрокрпН рокро┐ройрпНрокро▒рпНро▒ро╡рпБроорпН:

* [Arduino - Wio Terminal](wio-terminal-commands.md)
* [Single-board computer - Raspberry Pi/Virtual IoT device](single-board-computer-commands.md)

роЗроирпНрод code роОро┤рпБродрокрпНрокроЯрпНроЯрпБ роЗропроЩрпНроХро┐роп рокро┐ро▒роХрпБ, light роЕро│ро╡рпБроХро│рпИ рооро╛ро▒рпНро▒ро┐ рокро░ро┐роЪрпЛродро┐роХрпНроХро╡рпБроорпН. server рооро▒рпНро▒рпБроорпН device роЗро▓рпН output роРрокрпН рокро╛ро░рпНроХрпНроХро╡рпБроорпН, light роЕро│ро╡рпБроХро│рпИ рооро╛ро▒рпНро▒рпБроорпНрокрпЛродрпБ LED роР роХро╡ройро┐роХрпНроХро╡рпБроорпН.

### роЗрогрпИрокрпНрокрпБ роЗро┤рокрпНрокрпБ

роТро░рпБ IoT device offline роЖроХ роЗро░рпБроирпНродро╛ро▓рпН cloud service command роР роЕройрпБрокрпНрок роОройрпНрой роЪрпЖропрпНроп ро╡рпЗрогрпНроЯрпБроорпН? роорпАрогрпНроЯрпБроорпН, рокродро┐ро▓рпН роЕродрпБ родрпЗро╡рпИроХрпНроХрпБ роПро▒рпНрок рооро╛ро▒рпБроорпН.

роЪроорпАрокродрпНродро┐роп command роорпБроирпНродрпИропродрпИ override роЪрпЖропрпНродро╛ро▓рпН, роорпБроирпНродрпИропро╡рпИ рокрпБро▒роХрпНроХрогро┐роХрпНроХрокрпНрокроЯро▓ро╛роорпН. cloud service heating роР turn on роЪрпЖропрпНроп command роЕройрпБрокрпНрокро┐ройро╛ро▓рпН, рокро┐ройрпНройро░рпН turn off роЪрпЖропрпНроп command роЕройрпБрокрпНрокро┐ройро╛ро▓рпН, on command рокрпБро▒роХрпНроХрогро┐роХрпНроХрокрпНрокроЯро▓ро╛роорпН рооро▒рпНро▒рпБроорпН роорпАрогрпНроЯрпБроорпН роЕройрпБрокрпНрокрокрпНрокроЯро╛родрпБ.

Commands ро╡ро░ро┐роЪрпИропро┐ро▓рпН роЪрпЖропро▓рпНрокроЯрпБродрпНродрокрпНрокроЯ ро╡рпЗрогрпНроЯрпБроорпН, роЙродро╛ро░рогрооро╛роХ robot arm роР роорпЗро▓рпЗ роироХро░рпНродрпНродро╡рпБроорпН, рокро┐ройрпНройро░рпН grabber роР роорпВроЯро╡рпБроорпН, роЕро╡рпИ connectivity роорпАрогрпНроЯрпБроорпН роПро▒рпНрокроЯрпБроорпН рокрпЛродрпБ ро╡ро░ро┐роЪрпИропро┐ро▓рпН роЕройрпБрокрпНрокрокрпНрокроЯ ро╡рпЗрогрпНроЯрпБроорпН.

тЬЕ device роЕро▓рпНро▓родрпБ server code commands роР роОрокрпНрокрпЛродрпБроорпН MQTT роорпВро▓роорпН ро╡ро░ро┐роЪрпИропро┐ро▓рпН роЕройрпБрокрпНрокро╡рпБроорпН рооро▒рпНро▒рпБроорпН handle роЪрпЖропрпНропро╡рпБроорпН роОрокрпНрокроЯро┐ роЙро▒рпБродро┐рокрпНрокроЯрпБродрпНрод роорпБроЯро┐ропрпБроорпН?

---

## ЁЯЪА роЪро╡ро╛ро▓рпН

роХроЯрпИроЪро┐ роорпВройрпНро▒рпБ рокро╛роЯроЩрпНроХро│ро┐ро▓рпН роЪро╡ро╛ро▓рпН роЙроЩрпНроХро│рпН ро╡рпАроЯрпНроЯро┐ро▓рпН, рокро│рпНро│ро┐ропро┐ро▓рпН роЕро▓рпНро▓родрпБ ро╡рпЗро▓рпИ роЗроЯродрпНродро┐ро▓рпН роЙро│рпНро│ IoT devices роР роОро╡рпНро╡ро│ро╡рпБ роЕродро┐роХрооро╛роХ рокроЯрпНроЯро┐ропро▓ро┐роЯ роорпБроЯро┐ропрпБроорпН роОройрпНрокродрпИрокрпН рокро╛ро░рпНроХрпНроХрпБроорпН, роЕро╡рпИ microcontrollers роЕро▓рпНро▓родрпБ single-board computers роЕро▓рпНро▓родрпБ роЗро░рогрпНроЯро┐ройрпН роХро▓ро╡рпИропро╛ро▓рпН роЙро░рпБро╡ро╛роХрпНроХрокрпНрокроЯрпНроЯрпБро│рпНро│родро╛ роОройрпНрокродрпИ роорпБроЯро┐ро╡рпБ роЪрпЖропрпНропро╡рпБроорпН, роЕро╡рпИ роОроирпНрод sensors рооро▒рпНро▒рпБроорпН actuators роРрокрпН рокропройрпНрокроЯрпБродрпНродрпБроХро┐ройрпНро▒рой роОройрпНрокродрпИрокрпН рокро▒рпНро▒ро┐ ропрпЛроЪро┐роХрпНроХро╡рпБроорпН.

роЗроирпНрод devices роХрпНроХрпБ, роЕро╡рпИ роОроирпНрод messages роР роЕройрпБрокрпНрокрпБроХро┐ройрпНро▒рой роЕро▓рпНро▓родрпБ рокрпЖро▒рпБроХро┐ройрпНро▒рой роОройрпНрокродрпИрокрпН рокро▒рпНро▒ро┐ ропрпЛроЪро┐роХрпНроХро╡рпБроорпН. роЕро╡рпИ роОроирпНрод telemetry роР роЕройрпБрокрпНрокрпБроХро┐ройрпНро▒рой? роОроирпНрод messages роЕро▓рпНро▓родрпБ commands роР рокрпЖро▒рпБроХро┐ройрпНро▒рой? роЕро╡рпИ рокро╛родрпБроХро╛рокрпНрокро╛роХ роЙро│рпНро│ройро╡ро╛ роОройрпНро▒рпБ роирпАроЩрпНроХро│рпН роиро┐ройрпИроХрпНроХро┐ро▒рпАро░рпНроХро│ро╛?

## Post-lecture quiz
[Post-lecture quiz](https://black-meadow-040d15503.1.azurestaticapps.net/quiz/8)

## роородро┐рокрпНрокрпАроЯрпБ & роЪрпБропрокропро┐ро▒рпНроЪро┐

MQTT рокро▒рпНро▒ро┐ роорпЗро▓рпБроорпН роЕро▒ро┐роп [MQTT Wikipedia рокроХрпНроХроорпН](https://wikipedia.org/wiki/MQTT) рокро╛ро░рпНроХрпНроХро╡рпБроорпН.

[Mosquitto](https://www.mosquitto.org) рокропройрпНрокроЯрпБродрпНродро┐ MQTT broker роР роирпАроЩрпНроХро│рпН роЗропроХрпНроХро┐, роЙроЩрпНроХро│рпН IoT роЪро╛родройроорпН рооро▒рпНро▒рпБроорпН роЪро░рпНро╡ро░рпН роХрпЛроЯро┐ро▓рпН роЗрогрпИроХрпНроХ роорпБропро▒рпНроЪро┐роХрпНроХро╡рпБроорпН.

> ЁЯТБ роХрпБро▒ро┐рокрпНрокрпБроХро│рпН - роЗропро▓рпНрокро╛роХ Mosquitto роЕройро╛ройро┐рооро╕рпН роЗрогрпИрокрпНрокрпБроХро│рпИ (роЕродро╛ро╡родрпБ рокропройро░рпН рокрпЖропро░рпН рооро▒рпНро▒рпБроорпН роХроЯро╡рпБроЪрпНроЪрпКро▓рпНро▓ро┐ройрпНро▒ро┐ роЗрогрпИрокрпНрокродрпБ) роЕройрпБроородро┐роХрпНроХро╛родрпБ, роорпЗро▓рпБроорпН роЕродрпБ роЗропроЩрпНроХрпБроорпН роХрогро┐ройро┐роХрпНроХрпБ ро╡рпЖро│ро┐ропрпЗ роЗро░рпБроирпНродрпБ роЗрогрпИрокрпНрокрпБроХро│рпИ роЕройрпБроородро┐роХрпНроХро╛родрпБ.
> роЗродрпИ [`mosquitto.conf` config file](https://www.mosquitto.org/man/mosquitto-conf-5.html) роорпВро▓роорпН роЪро░ро┐роЪрпЖропрпНропро▓ро╛роорпН, роЗродрпИ рокропройрпНрокроЯрпБродрпНродро┐:
>
> ```sh
> listener 1883 0.0.0.0
> allow_anonymous true
> ```

## рокрогро┐роХрпНроХрпВро▒рпНро▒рпБ

[MQTT рооро▒рпНро▒рпБроорпН рокро┐ро▒ родрпКроЯро░рпНрокрпБ роирпЖро▒ро┐роорпБро▒рпИроХро│рпИ роТрокрпНрокро┐роЯрпНроЯрпБ рооро╛ро▒рпБрокро╛роЯрпБроХро│рпИ роЖро░ро╛ропро╡рпБроорпН](assignment.md)

---

**роХрпБро▒ро┐рокрпНрокрпБ**:  
роЗроирпНрод роЖро╡рогроорпН [Co-op Translator](https://github.com/Azure/co-op-translator) роОройрпНро▒ AI роорпКро┤ро┐рокрпЖропро░рпНрокрпНрокрпБ роЪрпЗро╡рпИропрпИрокрпН рокропройрпНрокроЯрпБродрпНродро┐ роорпКро┤ро┐рокрпЖропро░рпНроХрпНроХрокрпНрокроЯрпНроЯрпБро│рпНро│родрпБ. роиро╛роЩрпНроХро│рпН родрпБро▓рпНро▓ро┐ропродрпНродро┐ро▒рпНроХро╛роХ роорпБропро▒рпНроЪро┐роХрпНроХро┐ройрпНро▒рпЛроорпН, роЖройро╛ро▓рпН родро╛ройро┐ропроЩрпНроХро┐ роорпКро┤ро┐рокрпЖропро░рпНрокрпНрокрпБроХро│ро┐ро▓рпН рокро┐ро┤рпИроХро│рпН роЕро▓рпНро▓родрпБ родро╡ро▒ро╛рой родроХро╡ро▓рпНроХро│рпН роЗро░рпБроХрпНроХроХрпНроХрпВроЯрпБроорпН роОройрпНрокродрпИ родропро╡рпБроЪрпЖропрпНродрпБ роХро╡ройродрпНродро┐ро▓рпН роХрпКро│рпНро│рпБроЩрпНроХро│рпН. роЕродройрпН родро╛ропрпНроорпКро┤ро┐ропро┐ро▓рпН роЙро│рпНро│ роорпВро▓ роЖро╡рогроорпН роЕродро┐роХро╛ро░рокрпНрокрпВро░рпНро╡ роЖродро╛ро░рооро╛роХ роХро░рпБродрокрпНрокроЯ ро╡рпЗрогрпНроЯрпБроорпН. роорпБроХрпНроХро┐ропрооро╛рой родроХро╡ро▓рпНроХро│рпБроХрпНроХрпБ, родрпКро┤ро┐ро▓рпНроорпБро▒рпИ рооройро┐род роорпКро┤ро┐рокрпЖропро░рпНрокрпНрокрпБ рокро░ро┐роирпНродрпБро░рпИроХрпНроХрокрпНрокроЯрпБроХро┐ро▒родрпБ. роЗроирпНрод роорпКро┤ро┐рокрпЖропро░рпНрокрпНрокрпИрокрпН рокропройрпНрокроЯрпБродрпНродрпБро╡родро╛ро▓рпН роПро▒рпНрокроЯрпБроорпН роОроирпНрод родро╡ро▒ро╛рой рокрпБро░ро┐родро▓рпНроХро│рпН роЕро▓рпНро▓родрпБ родро╡ро▒ро╛рой ро╡ро┐ро│роХрпНроХроЩрпНроХро│рпБроХрпНроХрпБ роиро╛роЩрпНроХро│рпН рокрпКро▒рпБрокрпНрокро▓рпНро▓.