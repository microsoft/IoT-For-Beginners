<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "0ac0afcfb40cb5970ef4cb74f01c32e9",
  "translation_date": "2025-10-11T12:23:43+00:00",
  "source_file": "6-consumer/lessons/1-speech-recognition/pi-audio.md",
  "language_code": "ta"
}
-->
# роЖроЯро┐ропрпЛ рокродро┐ро╡рпБ - ро░ро╛ро╕рпНрокрпЖро░рпНро░ро┐ рокрпИ

роЗроирпНрод рокро╛роЯродрпНродро┐ройрпН роЗроирпНрод рокроХрпБродро┐ропро┐ро▓рпН, роирпАроЩрпНроХро│рпН ро░ро╛ро╕рпНрокрпЖро░рпНро░ро┐ рокрпИ-ропро┐ро▓рпН роЖроЯро┐ропрпЛ рокродро┐ро╡рпИ роЪрпЖропрпНропрпБроорпН роХрпБро▒ро┐ропрпАроЯрпНроЯрпИ роОро┤рпБродрпБро╡рпАро░рпНроХро│рпН. роЖроЯро┐ропрпЛ рокродро┐ро╡рпБ роТро░рпБ рокрпКродрпНродро╛ройро╛ро▓рпН роХроЯрпНроЯрпБрокрпНрокроЯрпБродрпНродрокрпНрокроЯрпБроорпН.

## ро╣ро╛ро░рпНроЯрпНро╡рпЗро░рпНроХро│рпН

ро░ро╛ро╕рпНрокрпЖро░рпНро░ро┐ рокрпИ-роХрпНроХрпБ роЖроЯро┐ропрпЛ рокродро┐ро╡рпИ роХроЯрпНроЯрпБрокрпНрокроЯрпБродрпНрод роТро░рпБ рокрпКродрпНродро╛ройрпН родрпЗро╡рпИ.

роирпАроЩрпНроХро│рпН рокропройрпНрокроЯрпБродрпНродрпБроорпН рокрпКродрпНродро╛ройрпН роТро░рпБ Grove рокрпКродрпНродро╛ройрпН. роЗродрпБ роТро░рпБ роЯро┐роЬро┐роЯрпНроЯро▓рпН роЪрпЖройрпНроЪро╛ро░рпН роЖроХрпБроорпН, роЗродрпБ роЪро┐роХрпНройро▓рпИ роЖройрпН роЕро▓рпНро▓родрпБ роЖроГрокрпН роЪрпЖропрпНропрпБроорпН. роЗроирпНрод рокрпКродрпНродро╛ройрпНроХро│рпН рокрпКродрпНродро╛ройрпН роЕро┤рпБродрпНродрокрпНрокроЯрпНроЯро╛ро▓рпН роЙропро░рпН роЪро┐роХрпНройро▓рпН роЕройрпБрокрпНрокро╡рпБроорпН, роЕро┤рпБродрпНродрокрпНрокроЯро╛род рокрпЛродрпБ роХрпБро▒рпИроирпНрод роЪро┐роХрпНройро▓рпН роЕройрпБрокрпНрокро╡рпБроорпН роЕро▓рпНро▓родрпБ роЕро┤рпБродрпНродрокрпНрокроЯрпНроЯро╛ро▓рпН роХрпБро▒рпИроирпНрод роЪро┐роХрпНройро▓рпН роЕройрпБрокрпНрокро╡рпБроорпН, роЕро┤рпБродрпНродрокрпНрокроЯро╛род рокрпЛродрпБ роЙропро░рпН роЪро┐роХрпНройро▓рпН роЕройрпБрокрпНрокро╡рпБроорпН роЕроорпИроХрпНроХрокрпНрокроЯро▓ро╛роорпН.

роирпАроЩрпНроХро│рпН ReSpeaker 2-Mics Pi HAT-роР роорпИроХрпНро░рпЛроГрокрпЛройро╛роХ рокропройрпНрокроЯрпБродрпНродро┐ройро╛ро▓рпН, роЗроирпНрод HAT-ро▓рпН роПро▒рпНроХройро╡рпЗ роТро░рпБ рокрпКродрпНродро╛ройрпН рокрпКро░рпБродрпНродрокрпНрокроЯрпНроЯро┐ро░рпБрокрпНрокродро╛ро▓рпН, роТро░рпБ рокрпКродрпНродро╛ройрпИ роЗрогрпИроХрпНроХ родрпЗро╡рпИропро┐ро▓рпНро▓рпИ. роЕроЯрпБродрпНрод рокроХрпБродро┐роХрпНроХрпБ роЪрпЖро▓рпНро▓ро╡рпБроорпН.

### рокрпКродрпНродро╛ройрпИ роЗрогрпИроХрпНроХро╡рпБроорпН

рокрпКродрпНродро╛ройрпН Grove base hat-роХрпНроХрпБ роЗрогрпИроХрпНроХрокрпНрокроЯро▓ро╛роорпН.

#### рокрогро┐роХро│рпН - рокрпКродрпНродро╛ройрпИ роЗрогрпИроХрпНроХро╡рпБроорпН

![роТро░рпБ Grove рокрпКродрпНродро╛ройрпН](../../../../../translated_images/grove-button.a70cfbb809a8563681003250cf5b06d68cdcc68624f9e2f493d5a534ae2da1e5.ta.png)

1. Grove роХрпЗрокро┐ро│ро┐ройрпН роТро░рпБ роорпБройрпИропрпИ рокрпКродрпНродро╛ройрпН рооро╛роЯрпНропрпВро▓ро┐ро▓рпН роЙро│рпНро│ роЪро╛роХрпНроХрпЖроЯрпНроЯро┐ро▓рпН роЪрпЖро░рпБроХро╡рпБроорпН. роЗродрпБ роТро░рпБ ро╡ро┤ро┐ропро┐ро▓рпН роороЯрпНроЯрпБроорпЗ роЪрпЖро░рпБроХрокрпНрокроЯрпБроорпН.

1. ро░ро╛ро╕рпНрокрпЖро░рпНро░ро┐ рокрпИ роЖроГрокрпН роиро┐ро▓рпИропро┐ро▓рпН роЗро░рпБроХрпНроХрпБроорпН рокрпЛродрпБ, Grove роХрпЗрокро┐ро│ро┐ройрпН рооро▒рпНро▒ роорпБройрпИропрпИ рокрпИ-ропро┐ро▓рпН рокрпКро░рпБродрпНродрокрпНрокроЯрпНроЯ Grove Base hat-ро▓рпН **D5** роОройрпНро▒рпБ роХрпБро▒ро┐роХрпНроХрокрпНрокроЯрпНроЯ роЯро┐роЬро┐роЯрпНроЯро▓рпН роЪро╛роХрпНроХрпЖроЯрпНроЯро┐ро▓рпН роЗрогрпИроХрпНроХро╡рпБроорпН. роЗроирпНрод роЪро╛роХрпНроХрпЖроЯрпН GPIO рокро┐ройрпНроХро│рпБроХрпНроХрпБрокрпН рокроХрпНроХродрпНродро┐ро▓рпН роЙро│рпНро│ роЪро╛роХрпНроХрпЖроЯрпНроЯрпБроХро│ро┐ройрпН ро╡ро░ро┐роЪрпИропро┐ро▓рпН роЗроЯродрпБрокрпБро▒родрпНродро┐ро▓ро┐ро░рпБроирпНродрпБ роЗро░рогрпНроЯро╛ро╡родрпБ роЪро╛роХрпНроХрпЖроЯрпНроЯро╛роХрпБроорпН.

![D5 роЪро╛роХрпНроХрпЖроЯрпНроЯро┐ро▓рпН роЗрогрпИроХрпНроХрокрпНрокроЯрпНроЯ Grove рокрпКродрпНродро╛ройрпН](../../../../../translated_images/pi-button.c7a1a4f55943341ce1baf1057658e9a205804d4131d258e820c93f951df0abf3.ta.png)

## роЖроЯро┐ропрпЛ рокродро┐ро╡рпБ

Python роХрпБро▒ро┐ропрпАроЯрпНроЯрпИ рокропройрпНрокроЯрпБродрпНродро┐ роорпИроХрпНро░рпЛроГрокрпЛройро┐ро▓ро┐ро░рпБроирпНродрпБ роЖроЯро┐ропрпЛ рокродро┐ро╡рпИ роЪрпЖропрпНропро▓ро╛роорпН.

### рокрогро┐роХро│рпН - роЖроЯро┐ропрпЛ рокродро┐ро╡рпБ

1. рокрпИ-ропрпИ рокро╡ро░рпН роЖройрпН роЪрпЖропрпНродрпБ, роЕродрпБ родрпКроЯроЩрпНроХрпБроорпН ро╡ро░рпИ роХро╛родрпНродро┐ро░рпБроХрпНроХро╡рпБроорпН.

1. рокрпИ-ропро┐ро▓рпН роирпЗро░роЯро┐ропро╛роХ роЕро▓рпНро▓родрпБ Remote SSH extension роорпВро▓роорпН роЗрогрпИроирпНродрпБ VS Code-роР родрпКроЯроЩрпНроХро╡рпБроорпН.

1. PyAudio Pip package-ро▓рпН роЖроЯро┐ропрпЛ рокродро┐ро╡рпБроорпН, роорпАрогрпНроЯрпБроорпН роТро▓ро┐роХрпНроХро╡рпБроорпН роЪрпЖропрпНропрпБроорпН роЪрпЖропро▓рпНрокро╛роЯрпБроХро│рпН роЙро│рпНро│рой. роЗроирпНрод рокро╛роХрпНроХрпЗроЬрпН роЪро┐ро▓ роЖроЯро┐ропрпЛ роирпВро▓роХроЩрпНроХро│рпИ роорпБродро▓ро┐ро▓рпН роиро┐ро▒рпБро╡ ро╡рпЗрогрпНроЯрпБроорпН. роЗроирпНрод роХроЯрпНроЯро│рпИроХро│рпИ роЯрпЖро░рпНрооро┐ройро▓ро┐ро▓рпН роЗропроХрпНроХро╡рпБроорпН:

    ```sh
    sudo apt update
    sudo apt install libportaudio0 libportaudio2 libportaudiocpp0 portaudio19-dev libasound2-plugins --yes 
    ```

1. PyAudio Pip package-роР роиро┐ро▒рпБро╡ро╡рпБроорпН.

    ```sh
    pip3 install pyaudio
    ```

1. `smart-timer` роОройрпНро▒ рокрпБродро┐роп роХрпЛрокрпНрокрпБро▒рпИропрпИ роЙро░рпБро╡ро╛роХрпНроХро┐, роЗроирпНрод роХрпЛрокрпНрокрпБро▒рпИропро┐ро▓рпН `app.py` роОройрпНро▒ роХрпЛрокрпНрокрпИ роЪрпЗро░рпНроХрпНроХро╡рпБроорпН.

1. роЗроирпНрод роХрпЛрокрпНрокро┐ройрпН роорпЗро▓рпН рокро╛роХродрпНродро┐ро▓рпН рокро┐ройрпНро╡ро░рпБроорпН роЗро▒роХрпНроХрпБроородро┐роХро│рпИ роЪрпЗро░рпНроХрпНроХро╡рпБроорпН:

    ```python
    import io
    import pyaudio
    import time
    import wave
    
    from grove.factory import Factory
    ```

    роЗродрпБ `pyaudio` рооро╛роЯрпНропрпВро▓рпИ, wave роХрпЛрокрпНрокрпБроХро│рпИ роХрпИропро╛ро│ роЪро┐ро▓ Python рооро╛роЯрпНропрпВро▓рпНроХро│рпИ, рооро▒рпНро▒рпБроорпН `grove.factory` рооро╛роЯрпНропрпВро▓рпИ роЗро▒роХрпНроХрпБроородро┐ роЪрпЖропрпНропрпБроорпН `Factory`-роР роЗро▒роХрпНроХрпБроородро┐ роЪрпЖропрпНропрпБроорпН.

1. роЗродро▒рпНроХрпБ роХрпАро┤рпЗ, Grove рокрпКродрпНродро╛ройрпИ роЙро░рпБро╡ро╛роХрпНроХ роХрпБро▒ро┐ропрпАроЯрпНроЯрпИ роЪрпЗро░рпНроХрпНроХро╡рпБроорпН.

    роирпАроЩрпНроХро│рпН ReSpeaker 2-Mics Pi HAT-роР рокропройрпНрокроЯрпБродрпНродро┐ройро╛ро▓рпН, рокро┐ройрпНро╡ро░рпБроорпН роХрпБро▒ро┐ропрпАроЯрпНроЯрпИ рокропройрпНрокроЯрпБродрпНродро╡рпБроорпН:

    ```python
    # The button on the ReSpeaker 2-Mics Pi HAT
    button = Factory.getButton("GPIO-LOW", 17)
    ```

    роЗродрпБ **D17** рокрпЛро░рпНроЯро┐ро▓рпН роТро░рпБ рокрпКродрпНродро╛ройрпИ роЙро░рпБро╡ро╛роХрпНроХрпБроХро┐ро▒родрпБ, ReSpeaker 2-Mics Pi HAT-ро▓рпН роЙро│рпНро│ рокрпКродрпНродро╛ройрпН роЗрогрпИроХрпНроХрокрпНрокроЯрпНроЯ рокрпЛро░рпНроЯрпН. роЗроирпНрод рокрпКродрпНродро╛ройрпН роЕро┤рпБродрпНродрокрпНрокроЯрпНроЯро╛ро▓рпН роХрпБро▒рпИроирпНрод роЪро┐роХрпНройро▓рпН роЕройрпБрокрпНрокрпБроорпН ро╡роХрпИропро┐ро▓рпН роЕроорпИроХрпНроХрокрпНрокроЯрпНроЯрпБро│рпНро│родрпБ.

    роирпАроЩрпНроХро│рпН ReSpeaker 2-Mics Pi HAT-роР рокропройрпНрокроЯрпБродрпНродро╡ро┐ро▓рпНро▓рпИ, рооро▒рпНро▒рпБроорпН Grove base hat-роХрпНроХрпБ роЗрогрпИроХрпНроХрокрпНрокроЯрпНроЯ Grove рокрпКродрпНродро╛ройрпИ рокропройрпНрокроЯрпБродрпНродро┐ройро╛ро▓рпН, роЗроирпНрод роХрпБро▒ро┐ропрпАроЯрпНроЯрпИ рокропройрпНрокроЯрпБродрпНродро╡рпБроорпН.

    ```python
    button = Factory.getButton("GPIO-HIGH", 5)
    ```

    роЗродрпБ **D5** рокрпЛро░рпНроЯро┐ро▓рпН роТро░рпБ рокрпКродрпНродро╛ройрпИ роЙро░рпБро╡ро╛роХрпНроХрпБроХро┐ро▒родрпБ, роЗродрпБ роЕро┤рпБродрпНродрокрпНрокроЯрпНроЯро╛ро▓рпН роЙропро░рпН роЪро┐роХрпНройро▓рпН роЕройрпБрокрпНрокрпБроорпН ро╡роХрпИропро┐ро▓рпН роЕроорпИроХрпНроХрокрпНрокроЯрпНроЯрпБро│рпНро│родрпБ.

1. роЗродро▒рпНроХрпБ роХрпАро┤рпЗ, роЖроЯро┐ропрпЛро╡рпИ роХрпИропро╛ро│ PyAudio ро╡роХрпБрокрпНрокро┐ройрпН роТро░рпБ роЙродро╛ро░рогродрпНродрпИ роЙро░рпБро╡ро╛роХрпНроХро╡рпБроорпН:

    ```python
    audio = pyaudio.PyAudio()
    ```

1. роорпИроХрпНро░рпЛроГрокрпЛройрпН рооро▒рпНро▒рпБроорпН ро╕рпНрокрпАроХрпНроХро░рпБроХрпНроХро╛рой ро╣ро╛ро░рпНроЯрпНро╡рпЗро░ роХро╛ро░рпНроЯрпБ роОрогрпНрогрпИ роЕро▒ро┐ро╡ро┐роХрпНроХро╡рпБроорпН. роЗродрпБ роЗроирпНрод рокро╛роЯродрпНродро┐ро▓рпН роорпБройрпНрокрпБ `arecord -l` рооро▒рпНро▒рпБроорпН `aplay -l` роЗропроХрпНроХро┐ роХрогрпНроЯро▒ро┐роирпНрод роХро╛ро░рпНроЯрпБ роОрогрпН роЖроХрпБроорпН.

    ```python
    microphone_card_number = <microphone card number>
    speaker_card_number = <speaker card number>
    ```

    `<microphone card number>`-роР роЙроЩрпНроХро│рпН роорпИроХрпНро░рпЛроГрокрпЛройро┐ройрпН роХро╛ро░рпНроЯрпБ роОрогрпНрогро╛ро▓рпН рооро╛ро▒рпНро▒ро╡рпБроорпН.

    `<speaker card number>`-роР роЙроЩрпНроХро│рпН ро╕рпНрокрпАроХрпНроХро░ро┐ройрпН роХро╛ро░рпНроЯрпБ роОрогрпНрогро╛ро▓рпН рооро╛ро▒рпНро▒ро╡рпБроорпН, роЗродрпЗ роОрогрпНрогрпИ `alsa.conf` роХрпЛрокрпНрокро┐ро▓рпН роЕроорпИродрпНродрпАро░рпНроХро│рпН.

1. роЗродро▒рпНроХрпБ роХрпАро┤рпЗ, роЖроЯро┐ропрпЛ рокродро┐ро╡рпБ рооро▒рпНро▒рпБроорпН роорпАрогрпНроЯрпБроорпН роТро▓ро┐роХрпНроХ рокропройрпНрокроЯрпБродрпНродрокрпНрокроЯрпБроорпН рооро╛родро┐ро░ро┐ропро┐ройрпН ро╡ро┐роХро┐родродрпНродрпИ роЕро▒ро┐ро╡ро┐роХрпНроХро╡рпБроорпН. роирпАроЩрпНроХро│рпН рокропройрпНрокроЯрпБродрпНродрпБроорпН ро╣ро╛ро░рпНроЯрпНро╡рпЗро░рпИ рокрпКро▒рпБродрпНродрпБ роЗродрпИ рооро╛ро▒рпНро▒ ро╡рпЗрогрпНроЯро┐ роЗро░рпБроХрпНроХро▓ро╛роорпН.

    ```python
    rate = 48000 #48KHz
    ```

    роирпАроЩрпНроХро│рпН роЗроирпНрод роХрпБро▒ро┐ропрпАроЯрпНроЯрпИ роЗропроХрпНроХрпБроорпН рокрпЛродрпБ рооро╛родро┐ро░ро┐ ро╡ро┐роХро┐род рокро┐ро┤рпИроХро│рпН ро╡роирпНродро╛ро▓рпН, роЗроирпНрод роородро┐рокрпНрокрпИ `44100` роЕро▓рпНро▓родрпБ `16000` роЖроХ рооро╛ро▒рпНро▒ро╡рпБроорпН. роородро┐рокрпНрокрпБ роЕродро┐роХрооро╛роХ роЗро░рпБроирпНродро╛ро▓рпН, роТро▓ро┐ропро┐ройрпН родро░роорпН роорпЗроорпНрокроЯрпБроорпН.

1. роЗродро▒рпНроХрпБ роХрпАро┤рпЗ, `capture_audio` роОройрпНро▒ рокрпБродро┐роп роЪрпЖропро▓рпНрокро╛роЯрпНроЯрпИ роЙро░рпБро╡ро╛роХрпНроХро╡рпБроорпН. роЗродрпБ роорпИроХрпНро░рпЛроГрокрпЛройро┐ро▓ро┐ро░рпБроирпНродрпБ роЖроЯро┐ропрпЛ рокродро┐ро╡рпИ роЪрпЖропрпНроп роЕро┤рпИроХрпНроХрокрпНрокроЯрпБроорпН:

    ```python
    def capture_audio():
    ```

1. роЗроирпНрод роЪрпЖропро▓рпНрокро╛роЯрпНроЯрпБроХрпНроХрпБро│рпН, роЖроЯро┐ропрпЛ рокродро┐ро╡рпИ роЪрпЖропрпНроп рокро┐ройрпНро╡ро░рпБро╡ройро╡ро▒рпНро▒рпИ роЪрпЗро░рпНроХрпНроХро╡рпБроорпН:

    ```python
    stream = audio.open(format = pyaudio.paInt16,
                        rate = rate,
                        channels = 1, 
                        input_device_index = microphone_card_number,
                        input = True,
                        frames_per_buffer = 4096)

    frames = []

    while button.is_pressed():
        frames.append(stream.read(4096))

    stream.stop_stream()
    stream.close()
    ```

    роЗроирпНрод роХрпБро▒ро┐ропрпАроЯрпБ PyAudio рокрпКро░рпБро│рпИрокрпН рокропройрпНрокроЯрпБродрпНродро┐ роТро░рпБ роЖроЯро┐ропрпЛ роЙро│рпНро│рпАроЯрпНроЯрпБ ро╕рпНроЯрпНро░рпАроорпИ родро┐ро▒роХрпНроХро┐ро▒родрпБ. роЗроирпНрод ро╕рпНроЯрпНро░рпАроорпН роорпИроХрпНро░рпЛроГрокрпЛройро┐ро▓ро┐ро░рпБроирпНродрпБ 16KHz-ро▓рпН роЖроЯро┐ропрпЛ рокродро┐ро╡рпИ роЪрпЖропрпНроХро┐ро▒родрпБ, 4096 рокрпИроЯрпНроЯрпБроХро│ро┐ройрпН роЕро│ро╡ро┐ро▓ро╛рой рокроГрокро░рпНроХро│ро┐ро▓рпН рокродро┐ро╡рпИ роЪрпЖропрпНроХро┐ро▒родрпБ.

    роХрпБро▒ро┐ропрпАроЯрпБ Grove рокрпКродрпНродро╛ройрпН роЕро┤рпБродрпНродрокрпНрокроЯрпНроЯ ро╡ро░рпИ роороЯроХрпНроХро┐, роТро╡рпНро╡рпКро░рпБ роорпБро▒рпИропрпБроорпН роЗроирпНрод 4096 рокрпИроЯрпН рокроГрокро░рпНроХро│рпИ роТро░рпБ ро╡ро░ро┐роЪрпИропро┐ро▓рпН рокроЯро┐роХрпНроХро┐ро▒родрпБ.

    > ЁЯТБ `open` роорпБро▒рпИроорпИроХрпНроХрпБ роЕройрпБрокрпНрокрокрпНрокроЯрпБроорпН ро╡ро┐ро░рпБрокрпНрокроЩрпНроХро│рпИ [PyAudio роЖро╡рогроЩрпНроХро│ро┐ро▓рпН](https://people.csail.mit.edu/hubert/pyaudio/docs/) роорпЗро▓рпБроорпН рокроЯро┐роХрпНроХро▓ро╛роорпН.

    рокрпКродрпНродро╛ройрпН ро╡ро┐роЯрокрпНрокроЯрпНроЯро╡рпБроЯройрпН, ро╕рпНроЯрпНро░рпАроорпН роиро┐ро▒рпБродрпНродрокрпНрокроЯрпНроЯрпБ роорпВроЯрокрпНрокроЯрпБроорпН.

1. роЗроирпНрод роЪрпЖропро▓рпНрокро╛роЯрпНроЯро┐ройрпН роЗро▒рпБродро┐ропро┐ро▓рпН рокро┐ройрпНро╡ро░рпБро╡ройро╡ро▒рпНро▒рпИ роЪрпЗро░рпНроХрпНроХро╡рпБроорпН:

    ```python
    wav_buffer = io.BytesIO()
    with wave.open(wav_buffer, 'wb') as wavefile:
        wavefile.setnchannels(1)
        wavefile.setsampwidth(audio.get_sample_size(pyaudio.paInt16))
        wavefile.setframerate(rate)
        wavefile.writeframes(b''.join(frames))
        wav_buffer.seek(0)

    return wav_buffer
    ```

    роЗроирпНрод роХрпБро▒ро┐ропрпАроЯрпБ роТро░рпБ рокрпИройро░ро┐ рокроГрокро░рпИ роЙро░рпБро╡ро╛роХрпНроХро┐, рокродро┐ро╡рпБроЪрпЖропрпНропрокрпНрокроЯрпНроЯ роЕройрпИродрпНродрпБ роЖроЯро┐ропрпЛро╡рпИ [WAV роХрпЛрокрпНрокро╛роХ](https://wikipedia.org/wiki/WAV) роОро┤рпБродрпБроХро┐ро▒родрпБ. роЗродрпБ роТро░рпБ роХрпЛрокрпНрокро┐ро▓рпН роЪрпБро░рпБроХрпНроХрокрпНрокроЯро╛род роЖроЯро┐ропрпЛро╡рпИ роОро┤рпБродрпБро╡родро▒рпНроХро╛рой роТро░рпБ роиро┐ро▓рпИропро╛рой ро╡ро┤ро┐ропро╛роХрпБроорпН. роЗроирпНрод рокроГрокро░рпН рокро┐ройрпНройро░рпН родро┐ро░рпБрокрпНрокро┐ роЕройрпБрокрпНрокрокрпНрокроЯрпБроорпН.

1. роЖроЯро┐ропрпЛ рокроГрокро░рпИ роорпАрогрпНроЯрпБроорпН роТро▓ро┐роХрпНроХ `play_audio` роЪрпЖропро▓рпНрокро╛роЯрпНроЯрпИ роЪрпЗро░рпНроХрпНроХро╡рпБроорпН:

    ```python
    def play_audio(buffer):
        stream = audio.open(format = pyaudio.paInt16,
                            rate = rate,
                            channels = 1,
                            output_device_index = speaker_card_number,
                            output = True)
    
        with wave.open(buffer, 'rb') as wf:
            data = wf.readframes(4096)
    
            while len(data) > 0:
                stream.write(data)
                data = wf.readframes(4096)
    
            stream.close()
    ```

    роЗроирпНрод роЪрпЖропро▓рпНрокро╛роЯрпБ рооро▒рпНро▒рпКро░рпБ роЖроЯро┐ропрпЛ ро╕рпНроЯрпНро░рпАроорпИ родро┐ро▒роХрпНроХро┐ро▒родрпБ, роЗроирпНрод роорпБро▒рпИ ро╡рпЖро│ро┐ропрпАроЯрпНроЯрпБроХрпНроХро╛роХ - роЖроЯро┐ропрпЛро╡рпИ роТро▓ро┐роХрпНроХ. роЗродрпБ роЙро│рпНро│рпАроЯрпНроЯрпБ ро╕рпНроЯрпНро░рпАрооро┐ройрпН роЕродрпЗ роЕроорпИрокрпНрокрпБроХро│рпИрокрпН рокропройрпНрокроЯрпБродрпНродрпБроХро┐ро▒родрпБ. рокроГрокро░рпН роТро░рпБ wave роХрпЛрокрпНрокро╛роХ родро┐ро▒роХрпНроХрокрпНрокроЯрпНроЯрпБ, 4096 рокрпИроЯрпН родрпБрогрпНроЯрпБроХро│ро┐ро▓рпН ро╡рпЖро│ро┐ропрпАроЯрпНроЯрпБ ро╕рпНроЯрпНро░рпАрооро┐ро▓рпН роОро┤рпБродрокрпНрокроЯрпБроХро┐ро▒родрпБ, роЖроЯро┐ропрпЛ роТро▓ро┐роХрпНроХро┐ро▒родрпБ. ро╕рпНроЯрпНро░рпАроорпН рокро┐ройрпНройро░рпН роорпВроЯрокрпНрокроЯрпБроорпН.

1. `capture_audio` роЪрпЖропро▓рпНрокро╛роЯрпНроЯро┐ройрпН роХрпАро┤рпЗ рокро┐ройрпНро╡ро░рпБроорпН роХрпБро▒ро┐ропрпАроЯрпНроЯрпИ роЪрпЗро░рпНроХрпНроХро╡рпБроорпН, рокрпКродрпНродро╛ройрпН роЕро┤рпБродрпНродрокрпНрокроЯрпБроорпН ро╡ро░рпИ роороЯроХрпНроХро┐. рокрпКродрпНродро╛ройрпН роЕро┤рпБродрпНродрокрпНрокроЯрпНроЯро╡рпБроЯройрпН, роЖроЯро┐ропрпЛ рокродро┐ро╡рпБ роЪрпЖропрпНропрокрпНрокроЯрпБроорпН, рокро┐ройрпНройро░рпН роТро▓ро┐роХрпНроХрокрпНрокроЯрпБроорпН.

    ```python
    while True:
        while not button.is_pressed():
            time.sleep(.1)
        
        buffer = capture_audio()
        play_audio(buffer)
    ```

1. роХрпБро▒ро┐ропрпАроЯрпНроЯрпИ роЗропроХрпНроХро╡рпБроорпН. рокрпКродрпНродро╛ройрпИ роЕро┤рпБродрпНродро┐ роорпИроХрпНро░рпЛроГрокрпЛройро┐ро▓рпН рокрпЗроЪро╡рпБроорпН. роирпАроЩрпНроХро│рпН роорпБроЯро┐родрпНродро╡рпБроЯройрпН рокрпКродрпНродро╛ройрпИ ро╡ро┐роЯро╡рпБроорпН, роирпАроЩрпНроХро│рпН рокродро┐ро╡рпБ роЪрпЖропрпНродродрпИ роХрпЗроЯрпНроХро▓ро╛роорпН.

    PyAudio рокрпКро░рпБро│рпН роЙро░рпБро╡ро╛роХрпНроХрокрпНрокроЯрпБроорпН рокрпЛродрпБ роЪро┐ро▓ ALSA рокро┐ро┤рпИроХро│рпН ро╡ро░ро▓ро╛роорпН. роЗродрпБ роЙроЩрпНроХро│рпН рокрпИ-ропро┐ро▓рпН роЗро▓рпНро▓ро╛род роЖроЯро┐ропрпЛ роЪро╛родройроЩрпНроХро│рпБроХрпНроХро╛рой роХроЯрпНроЯроорпИрокрпНрокро┐ройрпН роХро╛ро░рогрооро╛роХрпБроорпН. роЗроирпНрод рокро┐ро┤рпИроХро│рпИ роирпАроЩрпНроХро│рпН рокрпБро▒роХрпНроХрогро┐роХрпНроХро▓ро╛роорпН.

    ```output
    pi@raspberrypi:~/smart-timer $ python3 app.py 
    ALSA lib pcm.c:2565:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.front
    ALSA lib pcm.c:2565:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.rear
    ALSA lib pcm.c:2565:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.center_lfe
    ALSA lib pcm.c:2565:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.side
    ```

    роирпАроЩрпНроХро│рпН рокро┐ройрпНро╡ро░рпБроорпН рокро┐ро┤рпИропрпИ рокрпЖро▒рпНро▒ро╛ро▓рпН:

    ```output
    OSError: [Errno -9997] Invalid sample rate
    ```

    `rate`-роР 44100 роЕро▓рпНро▓родрпБ 16000 роЖроХ рооро╛ро▒рпНро▒ро╡рпБроорпН.

> ЁЯТБ роЗроирпНрод роХрпБро▒ро┐ропрпАроЯрпНроЯрпИ [code-record/pi](../../../../../6-consumer/lessons/1-speech-recognition/code-record/pi) роХрпЛрокрпНрокрпБро▒рпИропро┐ро▓рпН роХро╛рогро▓ро╛роорпН.

ЁЯША роЙроЩрпНроХро│рпН роЖроЯро┐ропрпЛ рокродро┐ро╡рпБ роЪрпЖропро▓ро┐ ро╡рпЖро▒рпНро▒ро┐роХро░рооро╛роХ роорпБроЯро┐роирпНродродрпБ!

---

**роЕро▒ро┐ро╡ро┐рокрпНрокрпБ**:  
роЗроирпНрод роЖро╡рогроорпН [Co-op Translator](https://github.com/Azure/co-op-translator) роОройрпНро▒ AI роорпКро┤ро┐рокрпЖропро░рпНрокрпНрокрпБ роЪрпЗро╡рпИропрпИ рокропройрпНрокроЯрпБродрпНродро┐ роорпКро┤ро┐рокрпЖропро░рпНроХрпНроХрокрпНрокроЯрпНроЯрпБро│рпНро│родрпБ. роиро╛роЩрпНроХро│рпН родрпБро▓рпНро▓ро┐ропродрпНродро┐ро▒рпНроХро╛роХ роорпБропро▒рпНроЪро┐родрпНродро╛ро▓рпБроорпН, родро╛ройро┐ропроЩрпНроХро┐ роорпКро┤ро┐рокрпЖропро░рпНрокрпНрокрпБроХро│ро┐ро▓рпН рокро┐ро┤рпИроХро│рпН роЕро▓рпНро▓родрпБ родрпБро▓рпНро▓ро┐ропроХрпНроХрпБро▒рпИрокро╛роЯрпБроХро│рпН роЗро░рпБроХрпНроХроХрпНроХрпВроЯрпБроорпН роОройрпНрокродрпИ роХро╡ройродрпНродро┐ро▓рпН роХрпКро│рпНро│ро╡рпБроорпН. роЕродройрпН роЪрпКроирпНрод роорпКро┤ро┐ропро┐ро▓рпН роЙро│рпНро│ роорпВро▓ роЖро╡рогроорпН роЕродро┐роХро╛ро░рокрпНрокрпВро░рпНро╡ роЖродро╛ро░рооро╛роХ роХро░рпБродрокрпНрокроЯ ро╡рпЗрогрпНроЯрпБроорпН. роорпБроХрпНроХро┐ропрооро╛рой родроХро╡ро▓рпНроХро│рпБроХрпНроХрпБ, родрпКро┤ро┐ро▓рпНроорпБро▒рпИ рооройро┐род роорпКро┤ро┐рокрпЖропро░рпНрокрпНрокрпБ рокро░ро┐роирпНродрпБро░рпИроХрпНроХрокрпНрокроЯрпБроХро┐ро▒родрпБ. роЗроирпНрод роорпКро┤ро┐рокрпЖропро░рпНрокрпНрокрпИрокрпН рокропройрпНрокроЯрпБродрпНродрпБро╡родро╛ро▓рпН роПро▒рпНрокроЯрпБроорпН роОроирпНрод родро╡ро▒ро╛рой рокрпБро░ро┐родро▓рпНроХро│рпБроХрпНроХрпБроорпН роЕро▓рпНро▓родрпБ родро╡ро▒ро╛рой ро╡ро┐ро│роХрпНроХроЩрпНроХро│рпБроХрпНроХрпБроорпН роиро╛роЩрпНроХро│рпН рокрпКро▒рпБрокрпНрокро▓рпНро▓.