<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "2f336726b9410e97c3aaed76cc89b0d8",
  "translation_date": "2025-10-11T12:17:21+00:00",
  "source_file": "6-consumer/lessons/1-speech-recognition/wio-terminal-audio.md",
  "language_code": "ta"
}
-->
# роЖроЯро┐ропрпЛ рокродро┐ро╡рпБ - Wio Terminal

роЗроирпНрод рокро╛роЯродрпНродро┐ройрпН роЗроирпНрод рокроХрпБродро┐ропро┐ро▓рпН, Wio Terminal-ро▓рпН роЖроЯро┐ропрпЛ рокродро┐ро╡рпБ роЪрпЖропрпНроп роирпАроЩрпНроХро│рпН роХрпБро▒ро┐ропрпАроЯрпБ роОро┤рпБродрпБро╡рпАро░рпНроХро│рпН. роЖроЯро┐ропрпЛ рокродро┐ро╡рпБ Wio Terminal-ройрпН роорпЗро▓рпН роЙро│рпНро│ рокрпКродрпНродрпБроХро│ро┐ро▓рпН роТройрпНро▒ро╛ро▓рпН роХроЯрпНроЯрпБрокрпНрокроЯрпБродрпНродрокрпНрокроЯрпБроорпН.

## роЪро╛родройродрпНродрпИ роЖроЯро┐ропрпЛ рокродро┐ро╡рпБ роЪрпЖропрпНроп роиро┐ро░ро▓ро╛роХрпНроХроорпН роЪрпЖропрпНропрпБроЩрпНроХро│рпН

роорпИроХрпНро░рпЛроГрокрпЛройро┐ро▓ро┐ро░рпБроирпНродрпБ C++ роХрпБро▒ро┐ропрпАроЯрпНроЯрпИрокрпН рокропройрпНрокроЯрпБродрпНродро┐ роЖроЯро┐ропрпЛ рокродро┐ро╡рпБ роЪрпЖропрпНропро▓ро╛роорпН. Wio Terminal-роХрпНроХрпБ 192KB RAM роороЯрпНроЯрпБроорпЗ роЙро│рпНро│родрпБ, роЗродрпБ роЗро░рогрпНроЯрпБ ро╡ро┐роиро╛роЯро┐роХро│рпБроХрпНроХрпБ роорпЗро▓рпН роЖроЯро┐ропрпЛ рокродро┐ро╡рпБ роЪрпЖропрпНроп рокрпЛродрпБрооро╛ройродрпБ роЕро▓рпНро▓. роЗродрпБ 4MB роГрокрпНро│ро╛ро╖рпН роорпЖрооро░ро┐ропрпИропрпБроорпН роХрпКрогрпНроЯрпБро│рпНро│родрпБ, роОройро╡рпЗ роЗродрпИ рокропройрпНрокроЯрпБродрпНродро┐, рокродро┐ро╡рпБ роЪрпЖропрпНропрокрпНрокроЯрпНроЯ роЖроЯро┐ропрпЛро╡рпИ роГрокрпНро│ро╛ро╖рпН роорпЖрооро░ро┐ропро┐ро▓рпН роЪрпЗрооро┐роХрпНроХро▓ро╛роорпН.

роЙро│рпНро│роорпИроХрпНроХрокрпНрокроЯрпНроЯ роорпИроХрпНро░рпЛроГрокрпЛройрпН роТро░рпБ роЕройро▓ро╛роХрпН роЪро┐роХрпНройро▓рпИрокрпН рокродро┐ро╡рпБ роЪрпЖропрпНроХро┐ро▒родрпБ, роЗродрпБ Wio Terminal рокропройрпНрокроЯрпБродрпНродроХрпНроХрпВроЯро┐роп роЯро┐роЬро┐роЯрпНроЯро▓рпН роЪро┐роХрпНройро▓ро╛роХ рооро╛ро▒рпНро▒рокрпНрокроЯрпБроХро┐ро▒родрпБ. роЖроЯро┐ропрпЛро╡рпИ рокродро┐ро╡рпБ роЪрпЖропрпНропрпБроорпНрокрпЛродрпБ, родро░ро╡рпБроХро│рпИ роЪро░ро┐ропро╛рой роирпЗро░родрпНродро┐ро▓рпН рокродро┐ро╡рпБ роЪрпЖропрпНроп ро╡рпЗрогрпНроЯрпБроорпН - роЙродро╛ро░рогрооро╛роХ, 16KHz-ро▓рпН роЖроЯро┐ропрпЛ рокродро┐ро╡рпБ роЪрпЖропрпНроп, роЖроЯро┐ропрпЛро╡рпИ роЪро░ро┐ропро╛роХ 16,000 роорпБро▒рпИ роТро░рпБ ро╡ро┐ройро╛роЯро┐роХрпНроХрпБ рокродро┐ро╡рпБ роЪрпЖропрпНроп ро╡рпЗрогрпНроЯрпБроорпН, роТро╡рпНро╡рпКро░рпБ рооро╛родро┐ро░ро┐роХрпНроХрпБроорпН роЗроЯрпИропро┐ро▓рпН роЪроо роЗроЯрпИро╡рпЖро│ро┐ропрпБроЯройрпН. роЙроЩрпНроХро│рпН роХрпБро▒ро┐ропрпАроЯрпНроЯрпИ роЗродрпИроЪрпН роЪрпЖропрпНроп рокропройрпНрокроЯрпБродрпНродрпБро╡родро▒рпНроХрпБ рокродро┐ро▓ро╛роХ, роирпАроЩрпНроХро│рпН роирпЗро░роЯро┐ роорпЖрооро░ро┐ роЕрогрпБроХро▓рпН роХроЯрпНроЯрпБрокрпНрокро╛роЯрпНроЯро┐ропрпИ (DMAC) рокропройрпНрокроЯрпБродрпНродро▓ро╛роорпН. роЗродрпБ роТро░рпБ роЪро┐роХрпНройро▓рпИ роОроЩрпНроХро┐ро░рпБроирпНродрпЛ рокродро┐ро╡рпБ роЪрпЖропрпНродрпБ роорпЖрооро░ро┐ропро┐ро▓рпН роОро┤рпБрод роЙродро╡роХрпНроХрпВроЯро┐роп роЪрпБро▒рпНро▒рпБ роЕроорпИрокрпНрокрпБ, роЙроЩрпНроХро│рпН роХрпБро▒ро┐ропрпАроЯрпБ роЪрпЖропро▓ро┐ропро┐ро▓рпН роЗропроЩрпНроХрпБро╡родро┐ро▓рпН роЗроЯрпИропрпВро▒рпБ роЪрпЖропрпНропро╛рооро▓рпН.

тЬЕ DMA рокро▒рпНро▒ро┐ роорпЗро▓рпБроорпН роЕро▒ро┐роп [Wikipedia-роЗро▓рпН роирпЗро░роЯро┐ роорпЖрооро░ро┐ роЕрогрпБроХро▓рпН рокроХрпНроХроорпН](https://wikipedia.org/wiki/Direct_memory_access) рокро╛ро░рпНроХрпНроХро╡рпБроорпН.

![роорпИроХрпНро░рпЛроГрокрпЛройро┐ро▓ро┐ро░рпБроирпНродрпБ роЖроЯро┐ропрпЛ ADC-роХрпНроХрпБ роЪрпЖро▓рпНроХро┐ро▒родрпБ, рокро┐ройрпНройро░рпН DMAC-роХрпНроХрпБ. роЗродрпБ роТро░рпБ рокроГрокро░рпБроХрпНроХрпБ роОро┤рпБродрпБроХро┐ро▒родрпБ. роЗроирпНрод рокроГрокро░рпН роиро┐ро░роорпНрокро┐ропродрпБроорпН, роЗродрпБ роЪрпЖропро▓ро╛роХрпНроХрокрпНрокроЯрпБроХро┐ро▒родрпБ, роорпЗро▓рпБроорпН DMAC роЗро░рогрпНроЯро╛ро╡родрпБ рокроГрокро░рпБроХрпНроХрпБ роОро┤рпБродрпБроХро┐ро▒родрпБ](../../../../../translated_images/dmac-adc-buffers.4509aee49145c90bc2e1be472b8ed2ddfcb2b6a81ad3e559114aca55f5fff759.ta.png)

DMAC ADC-роЗро▓ро┐ро░рпБроирпНродрпБ 16,000 роорпБро▒рпИ роТро░рпБ ро╡ро┐ройро╛роЯро┐роХрпНроХрпБ 16KHz роЖроЯро┐ропрпЛро╡рпБроХрпНроХрпБ рокрпЛройрпНро▒ роиро┐ро▓рпИропро╛рой роЗроЯрпИро╡рпЖро│ро┐роХро│ро┐ро▓рпН роЖроЯро┐ропрпЛ рокродро┐ро╡рпБ роЪрпЖропрпНроп роорпБроЯро┐ропрпБроорпН. роЗродрпБ рокродро┐ро╡рпБ роЪрпЖропрпНропрокрпНрокроЯрпНроЯ родро░ро╡рпБроХро│рпИ роорпБройрпНроХрпВроЯрпНроЯро┐ропрпЗ роТродрпБроХрпНроХрокрпНрокроЯрпНроЯ роорпЖрооро░ро┐ рокроГрокро░рпБроХрпНроХрпБ роОро┤рпБрод роорпБроЯро┐ропрпБроорпН, роорпЗро▓рпБроорпН роЗродрпБ роиро┐ро░роорпНрокро┐ропродрпБроорпН, роЙроЩрпНроХро│рпН роХрпБро▒ро┐ропрпАроЯрпБ роЪрпЖропро▓ро╛роХрпНроХродрпНродро┐ро▒рпНроХрпБ роХро┐роЯрпИроХрпНроХроЪрпН роЪрпЖропрпНроп роорпБроЯро┐ропрпБроорпН. роЗроирпНрод роорпЖрооро░ро┐ропрпИрокрпН рокропройрпНрокроЯрпБродрпНродрпБро╡родрпБ роЖроЯро┐ропрпЛ рокродро┐ро╡рпИ родро╛роородрокрпНрокроЯрпБродрпНродро▓ро╛роорпН, роЖройро╛ро▓рпН роирпАроЩрпНроХро│рпН рокро▓ рокроГрокро░рпНроХро│рпИ роЕроорпИроХрпНроХро▓ро╛роорпН. DMAC рокроГрокро░рпН 1-роХрпНроХрпБ роОро┤рпБродрпБроХро┐ро▒родрпБ, рокро┐ройрпНройро░рпН роЗродрпБ роиро┐ро░роорпНрокро┐ропродрпБроорпН, роЙроЩрпНроХро│рпН роХрпБро▒ро┐ропрпАроЯрпБ рокроГрокро░рпН 1-роР роЪрпЖропро▓ро╛роХрпНроХ роЕро▒ро┐ро╡ро┐роХрпНроХро┐ро▒родрпБ, роЕродрпЗ роирпЗро░родрпНродро┐ро▓рпН DMAC рокроГрокро░рпН 2-роХрпНроХрпБ роОро┤рпБродрпБроХро┐ро▒родрпБ. рокроГрокро░рпН 2 роиро┐ро░роорпНрокро┐ропродрпБроорпН, роЙроЩрпНроХро│рпН роХрпБро▒ро┐ропрпАроЯрпБ роЕро▒ро┐ро╡ро┐роХрпНроХрокрпНрокроЯрпБроХро┐ро▒родрпБ, роорпЗро▓рпБроорпН рокроГрокро░рпН 1-роХрпНроХрпБ роорпАрогрпНроЯрпБроорпН роОро┤рпБродрпБроХро┐ро▒родрпБ. роЗро╡рпНро╡ро╛ро▒рпБ роТро╡рпНро╡рпКро░рпБ рокроГрокро░рпИропрпБроорпН роиро┐ро░рокрпНрокрпБро╡родро▒рпНроХрпБ роХрпБро▒рпИро╡ро╛рой роирпЗро░родрпНродро┐ро▓рпН роЪрпЖропро▓ро╛роХрпНроХро┐ройро╛ро▓рпН, роОроирпНродро╡рпКро░рпБ родро░ро╡рпИропрпБроорпН роЗро┤роХрпНроХрооро╛роЯрпНроЯрпАро░рпНроХро│рпН.

роТро╡рпНро╡рпКро░рпБ рокроГрокро░рпБроорпН рокродро┐ро╡рпБ роЪрпЖропрпНропрокрпНрокроЯрпНроЯродрпБроорпН, роЗродрпБ роГрокрпНро│ро╛ро╖рпН роорпЖрооро░ро┐роХрпНроХрпБ роОро┤рпБродрокрпНрокроЯро▓ро╛роорпН. роГрокрпНро│ро╛ро╖рпН роорпЖрооро░ро┐ропрпИ роХрпБро▒ро┐рокрпНрокро┐роЯрпНроЯ роорпБроХро╡ро░ро┐роХро│рпИрокрпН рокропройрпНрокроЯрпБродрпНродро┐ роОро┤рпБрод ро╡рпЗрогрпНроЯрпБроорпН, роОроЩрпНроХрпБ роОро┤рпБрод ро╡рпЗрогрпНроЯрпБроорпН рооро▒рпНро▒рпБроорпН роОро╡рпНро╡ро│ро╡рпБ рокрпЖро░ро┐ропродро╛роХ роОро┤рпБрод ро╡рпЗрогрпНроЯрпБроорпН роОройрпНрокродрпИ роХрпБро▒ро┐рокрпНрокро┐роЯ ро╡рпЗрогрпНроЯрпБроорпН, роЗродрпБ роорпЖрооро░ро┐ропро┐ро▓рпН рокрпИроЯрпНроЯрпБроХро│ро┐ройрпН ро╡ро░ро┐роЪрпИропрпИрокрпН рокрпБродрпБрокрпНрокро┐рокрпНрокродрпИрокрпН рокрпЛройрпНро▒родрпБ. роГрокрпНро│ро╛ро╖рпН роорпЖрооро░ро┐ропро┐ро▓рпН родро╛ройро┐ропроХрпНроХродрпНродройрпНроорпИ роЙро│рпНро│родрпБ, роЕродро╛ро╡родрпБ роЕро┤ро┐роХрпНроХ рооро▒рпНро▒рпБроорпН роОро┤рпБродрпБроорпН роЪрпЖропро▓рпНрокро╛роЯрпБроХро│рпН роТро░рпБ роиро┐ро▓рпИропро╛рой роЕро│ро╡ро┐ро▓рпН роороЯрпНроЯрпБрооро▓рпНро▓ро╛рооро▓рпН, роЕроирпНрод роЕро│ро╡рпБроХрпНроХрпБ роТро┤рпБроЩрпНроХрпБрокроЯрпБродрпНродрокрпНрокроЯрпБро╡родро┐ро▓рпБроорпН роЪро╛ро░рпНроирпНродрпБро│рпНро│родрпБ. роЙродро╛ро░рогрооро╛роХ, родро╛ройро┐ропроХрпНроХродрпНродройрпНроорпИ 4096 рокрпИроЯрпНроЯрпБроХро│рпН роОройрпНро▒ро╛ро▓рпН, роирпАроЩрпНроХро│рпН роорпБроХро╡ро░ро┐ 4200-ро▓рпН роЕро┤ро┐роХрпНроХ роХрпЛро░ро┐ройро╛ро▓рпН, роЗродрпБ роорпБроХро╡ро░ро┐ 4096 роорпБродро▓рпН 8192 ро╡ро░рпИ роЙро│рпНро│ роЕройрпИродрпНродрпБ родро░ро╡рпБроХро│рпИропрпБроорпН роЕро┤ро┐роХрпНроХро▓ро╛роорпН. роЗродройро╛ро▓рпН, роЖроЯро┐ропрпЛ родро░ро╡рпБроХро│рпИ роГрокрпНро│ро╛ро╖рпН роорпЖрооро░ро┐ропро┐ро▓рпН роОро┤рпБродрпБроорпНрокрпЛродрпБ, роЗродрпБ роЪро░ро┐ропро╛рой роЕро│ро╡рпБроХро│ро┐ро▓рпН родрпБрогрпНроЯрпБроХро│ро╛роХ роЗро░рпБроХрпНроХ ро╡рпЗрогрпНроЯрпБроорпН.

### рокрогро┐роХро│рпН - роГрокрпНро│ро╛ро╖рпН роорпЖрооро░ро┐ропрпИ роЕроорпИроХрпНроХро╡рпБроорпН

1. PlatformIO-роРрокрпН рокропройрпНрокроЯрпБродрпНродро┐ рокрпБродро┐роп Wio Terminal родро┐роЯрпНроЯродрпНродрпИ роЙро░рпБро╡ро╛роХрпНроХро╡рпБроорпН. роЗроирпНрод родро┐роЯрпНроЯродрпНродрпИ `smart-timer` роОройрпНро▒рпБ роЕро┤рпИроХрпНроХро╡рпБроорпН. `setup` роЪрпЖропро▓рпНрокро╛роЯрпНроЯро┐ро▓рпН роЪрпАро░ро┐ропро▓рпН рокрпЛро░рпНроЯрпНроЯрпИ роЕроорпИроХрпНроХ роХрпБро▒ро┐ропрпАроЯрпНроЯрпИроЪрпН роЪрпЗро░рпНроХрпНроХро╡рпБроорпН.

1. роГрокрпНро│ро╛ро╖рпН роорпЖрооро░ро┐роХрпНроХрпБ роЕрогрпБроХро▓рпИ ро╡ро┤роЩрпНроХ `platformio.ini` роХрпЛрокрпНрокро┐ро▓рпН рокро┐ройрпНро╡ро░рпБроорпН роирпВро▓роХ роЪро╛ро░рпНрокрпБроХро│рпИроЪрпН роЪрпЗро░рпНроХрпНроХро╡рпБроорпН:

    ```ini
    lib_deps =
        seeed-studio/Seeed Arduino FS @ 2.1.1
        seeed-studio/Seeed Arduino SFUD @ 2.0.2
    ```

1. `main.cpp` роХрпЛрокрпНрокрпИродрпН родро┐ро▒роирпНродрпБ, роГрокрпНро│ро╛ро╖рпН роорпЖрооро░ро┐ роирпВро▓роХродрпНродро┐ро▒рпНроХро╛рой рокро┐ройрпНро╡ро░рпБроорпН роЪрпЗро░рпНроХрпНроХро▓рпН роЗропроХрпНроХродрпНродрпИ роХрпЛрокрпНрокро┐ройрпН роорпЗро▓рпН роЪрпЗро░рпНроХрпНроХро╡рпБроорпН:

    ```cpp
    #include <sfud.h>
    #include <SPI.h>
    ```

    > ЁЯОУ SFUD роОройрпНрокродрпБ Serial Flash Universal Driver-роР роХрпБро▒ро┐роХрпНроХро┐ро▒родрпБ, роорпЗро▓рпБроорпН роЗродрпБ роЕройрпИродрпНродрпБ роГрокрпНро│ро╛ро╖рпН роорпЖрооро░ро┐ роЪро┐рокрпНроХро│рпБроЯройрпН ро╡рпЗро▓рпИ роЪрпЖропрпНроп ро╡роЯро┐ро╡роорпИроХрпНроХрокрпНрокроЯрпНроЯ роТро░рпБ роирпВро▓роХрооро╛роХрпБроорпН.

1. `setup` роЪрпЖропро▓рпНрокро╛роЯрпНроЯро┐ро▓рпН, роГрокрпНро│ро╛ро╖рпН роЪрпЗрооро┐рокрпНрокрпБ роирпВро▓роХродрпНродрпИ роЕроорпИроХрпНроХ рокро┐ройрпНро╡ро░рпБроорпН роХрпБро▒ро┐ропрпАроЯрпНроЯрпИроЪрпН роЪрпЗро░рпНроХрпНроХро╡рпБроорпН:

    ```cpp
    while (!(sfud_init() == SFUD_SUCCESS))
        ;

    sfud_qspi_fast_read_enable(sfud_get_device(SFUD_W25Q32_DEVICE_INDEX), 2);
    ```

    роЗродрпБ SFUD роирпВро▓роХроорпН родрпКроЯроЩрпНроХрпБроорпН ро╡ро░рпИ роороЯроЩрпНроХрпБроХро┐ро▒родрпБ, рокро┐ройрпНройро░рпН ро╡рпЗроХрооро╛рой ро╡ро╛роЪро┐рокрпНрокрпБроХро│рпИ роЗропроХрпНроХрпБроХро┐ро▒родрпБ. роЙро│рпНро│роорпИроХрпНроХрокрпНрокроЯрпНроЯ роГрокрпНро│ро╛ро╖рпН роорпЖрооро░ро┐ропрпИ Queued Serial Peripheral Interface (QSPI) рокропройрпНрокроЯрпБродрпНродро┐ роЕрогрпБроХро▓ро╛роорпН, роЗродрпБ роХрпБро▒рпИроирпНрод роЪрпЖропро▓ро┐ рокропройрпНрокро╛роЯрпНроЯрпБроЯройрпН роТро░рпБ ро╡ро░ро┐роЪрпИ роорпВро▓роорпН родрпКроЯро░рпНроЪрпНроЪро┐ропро╛рой роЕрогрпБроХро▓рпИ роЕройрпБроородро┐роХрпНроХрпБроорпН SPI роХроЯрпНроЯрпБрокрпНрокро╛роЯрпНроЯро┐ропро┐ройрпН роТро░рпБ ро╡роХрпИ. роЗродрпБ роГрокрпНро│ро╛ро╖рпН роорпЖрооро░ро┐ропрпИ ро╡ро╛роЪро┐роХрпНроХро╡рпБроорпН роОро┤рпБродро╡рпБроорпН ро╡рпЗроХрооро╛роХ роЪрпЖропрпНроХро┐ро▒родрпБ.

1. `src` роХрпЛрокрпНрокрпБро▒рпИропро┐ро▓рпН `flash_writer.h` роОройрпНро▒ рокрпБродро┐роп роХрпЛрокрпНрокрпИ роЙро░рпБро╡ро╛роХрпНроХро╡рпБроорпН.

1. роЗроирпНрод роХрпЛрокрпНрокро┐ройрпН роорпЗро▓рпН рокро┐ройрпНро╡ро░рпБро╡ройро╡ро▒рпНро▒рпИроЪрпН роЪрпЗро░рпНроХрпНроХро╡рпБроорпН:

    ```cpp
    #pragma once

    #include <Arduino.h>
    #include <sfud.h>
    ```

    роЗродрпБ роГрокрпНро│ро╛ро╖рпН роорпЖрооро░ро┐ропрпБроЯройрпН родрпКроЯро░рпНрокрпБ роХрпКро│рпНро│ SFUD роирпВро▓роХродрпНродро┐ро▒рпНроХро╛рой родро▓рпИрокрпНрокрпБ роХрпЛрокрпНрокрпИ роЙроЯрпНрокроЯ роЪро┐ро▓ родрпЗро╡рпИропро╛рой родро▓рпИрокрпНрокрпБ роХрпЛрокрпНрокрпБроХро│рпИроЪрпН роЪрпЗро░рпНроХрпНроХро┐ро▒родрпБ.

1. роЗроирпНрод рокрпБродро┐роп родро▓рпИрокрпНрокрпБ роХрпЛрокрпНрокро┐ро▓рпН `FlashWriter` роОройрпНро▒ ро╡роХрпИропрпИ ро╡ро░рпИропро▒рпБроХрпНроХро╡рпБроорпН:

    ```cpp
    class FlashWriter
    {
    public:
    
    private:
    };
    ```

1. `private` рокро┐ро░ро┐ро╡ро┐ро▓рпН рокро┐ройрпНро╡ро░рпБроорпН роХрпБро▒ро┐ропрпАроЯрпНроЯрпИроЪрпН роЪрпЗро░рпНроХрпНроХро╡рпБроорпН:

    ```cpp
    byte *_sfudBuffer;
    size_t _sfudBufferSize;
    size_t _sfudBufferPos;
    size_t _sfudBufferWritePos;

    const sfud_flash *_flash;
    ```

    роЗродрпБ роГрокрпНро│ро╛ро╖рпН роорпЖрооро░ро┐ропро┐ро▓рпН родро░ро╡рпБроХро│рпИ роОро┤рпБродрпБро╡родро▒рпНроХрпБ роорпБройрпН рокропройрпНрокроЯрпБродрпНрод рокроГрокро░рпБроХрпНроХро╛рой роЪро┐ро▓ рокрпБро▓роЩрпНроХро│рпИ ро╡ро░рпИропро▒рпБроХрпНроХро┐ро▒родрпБ. роТро░рпБ рокрпИроЯрпН ро╡ро░ро┐роЪрпИ, `_sfudBuffer`, родро░ро╡рпБроХро│рпИ роОро┤рпБродрпБро╡родро▒рпНроХрпБ роЙро│рпНро│родрпБ, роорпЗро▓рпБроорпН роЗродрпБ роиро┐ро░роорпНрокро┐ропродрпБроорпН, родро░ро╡рпБроХро│рпН роГрокрпНро│ро╛ро╖рпН роорпЖрооро░ро┐ропро┐ро▓рпН роОро┤рпБродрокрпНрокроЯрпБроорпН. `_sfudBufferPos` рокрпБро▓роорпН роЗроирпНрод рокроГрокро░ро┐ро▓рпН роОро┤рпБрод ╤В╨╡╨║роХCURRENT_LOCATION-роР роЪрпЗрооро┐роХрпНроХро┐ро▒родрпБ, роорпЗро▓рпБроорпН `_sfudBufferWritePos` роГрокрпНро│ро╛ро╖рпН роорпЖрооро░ро┐ропро┐ро▓рпН роОро┤рпБрод роЗроЯродрпНродрпИ роЪрпЗрооро┐роХрпНроХро┐ро▒родрпБ. `_flash` роОройрпНрокродрпБ роОро┤рпБрод роГрокрпНро│ро╛ро╖рпН роорпЖрооро░ро┐роХрпНроХрпБ роТро░рпБ роЪрпБроЯрпНроЯро┐ - роЪро┐ро▓ роорпИроХрпНро░рпЛроХрогрпНроЯрпНро░рпЛро▓ро░рпНроХро│рпБроХрпНроХрпБ рокро▓ роГрокрпНро│ро╛ро╖рпН роорпЖрооро░ро┐ роЪро┐рокрпНроХро│рпН роЙро│рпНро│рой.

1. роЗроирпНрод ро╡роХрпИропро┐ройрпН `public` рокро┐ро░ро┐ро╡ро┐ро▓рпН рокро┐ройрпНро╡ро░рпБроорпН роорпБро▒рпИроЪро╛ро░рпНроирпНрод роХрпБро▒ро┐ропрпАроЯрпНроЯрпИроЪрпН роЪрпЗро░рпНроХрпНроХро╡рпБроорпН:

    ```cpp
    void init()
    {
        _flash = sfud_get_device_table() + 0;
        _sfudBufferSize = _flash->chip.erase_gran;
        _sfudBuffer = new byte[_sfudBufferSize];
        _sfudBufferPos = 0;
        _sfudBufferWritePos = 0;
    }
    ```

    роЗродрпБ Wio Terminal-ро▓рпН роГрокрпНро│ро╛ро╖рпН роорпЖрооро░ро┐ропрпИ роОро┤рпБрод роЕроорпИроХрпНроХро┐ро▒родрпБ, роорпЗро▓рпБроорпН роГрокрпНро│ро╛ро╖рпН роорпЖрооро░ро┐ропро┐ройрпН родро╛ройро┐ропроХрпНроХродрпНродройрпНроорпИ роЕро│ро╡рпИ роЕроЯро┐рокрпНрокроЯрпИропро╛роХроХрпН роХрпКрогрпНроЯ рокроГрокро░рпНроХро│рпИ роЕроорпИроХрпНроХро┐ро▒родрпБ. роЗродрпБ роТро░рпБ `init` роорпБро▒рпИропро┐ро▓рпН роЙро│рпНро│родрпБ, роХроЯрпНроЯроорпИрокрпНрокро╛ро│ро░рпБроХрпНроХрпБ рокродро┐ро▓ро╛роХ, роЗродрпБ `setup` роЪрпЖропро▓рпНрокро╛роЯрпНроЯро┐ро▓рпН роГрокрпНро│ро╛ро╖рпН роорпЖрооро░ро┐ роЕроорпИроХрпНроХрокрпНрокроЯрпНроЯ рокро┐ро▒роХрпБ роЕро┤рпИроХрпНроХрокрпНрокроЯ ро╡рпЗрогрпНроЯрпБроорпН.

1. `public` рокро┐ро░ро┐ро╡ро┐ро▓рпН рокро┐ройрпНро╡ро░рпБроорпН роХрпБро▒ро┐ропрпАроЯрпНроЯрпИроЪрпН роЪрпЗро░рпНроХрпНроХро╡рпБроорпН:

    ```cpp
    void writeSfudBuffer(byte b)
    {
        _sfudBuffer[_sfudBufferPos++] = b;
        if (_sfudBufferPos == _sfudBufferSize)
        {
            sfud_erase_write(_flash, _sfudBufferWritePos, _sfudBufferSize, _sfudBuffer);
            _sfudBufferWritePos += _sfudBufferSize;
            _sfudBufferPos = 0;
        }
    }

    void writeSfudBuffer(byte *b, size_t len)
    {
        for (size_t i = 0; i < len; ++i)
        {
            writeSfudBuffer(b[i]);
        }
    }

    void flushSfudBuffer()
    {
        if (_sfudBufferPos > 0)
        {
            sfud_erase_write(_flash, _sfudBufferWritePos, _sfudBufferSize, _sfudBuffer);
            _sfudBufferWritePos += _sfudBufferSize;
            _sfudBufferPos = 0;
        }
    }
    ```

    роЗроирпНрод роХрпБро▒ро┐ропрпАроЯрпБ рокрпИроЯрпНроЯрпБроХро│рпИ роГрокрпНро│ро╛ро╖рпН роЪрпЗрооро┐рокрпНрокрпБ роЕроорпИрокрпНрокрпБроХрпНроХрпБ роОро┤рпБрод роорпБро▒рпИроЪро╛ро░рпНроирпНрод роорпБро▒рпИроХро│рпИ ро╡ро░рпИропро▒рпБроХрпНроХро┐ро▒родрпБ. роЗродрпБ роГрокрпНро│ро╛ро╖рпН роорпЖрооро░ро┐роХрпНроХрпБ роЪро░ро┐ропро╛рой роЕро│ро╡рпБроЯрпИроп роТро░рпБ роиро┐ройрпИро╡роХ рокроГрокро░рпБроХрпНроХрпБ роОро┤рпБродрпБро╡родройрпН роорпВро▓роорпН роЪрпЖропро▓рпНрокроЯрпБроХро┐ро▒родрпБ, роорпЗро▓рпБроорпН роЗродрпБ роиро┐ро░роорпНрокро┐ропродрпБроорпН, роЗродрпБ роГрокрпНро│ро╛ро╖рпН роорпЖрооро░ро┐роХрпНроХрпБ роОро┤рпБродрокрпНрокроЯрпБроХро┐ро▒родрпБ, роЕроирпНрод роЗроЯродрпНродро┐ро▓рпН роПро▒рпНроХройро╡рпЗ роЙро│рпНро│ родро░ро╡рпБроХро│рпИ роЕро┤ро┐роХрпНроХро┐ро▒родрпБ. `flushSfudBuffer` роОройрпНро▒ роорпБро▒рпИ роТро░рпБ роорпБро┤рпБроорпИропро▒рпНро▒ рокроГрокро░рпИ роОро┤рпБродрпБроХро┐ро▒родрпБ, роПройрпЖройро┐ро▓рпН рокродро┐ро╡рпБ роЪрпЖропрпНропрокрпНрокроЯрпБроорпН родро░ро╡рпБроХро│рпН родро╛ройро┐ропроХрпНроХродрпНродройрпНроорпИ роЕро│ро╡рпБроХро│ро┐ройрпН роЪро░ро┐ропро╛рой рокро▓рооро┐ро▓рпНро▓ро╛рооро▓рпН роЗро░рпБроХрпНроХрпБроорпН, роОройро╡рпЗ родро░ро╡ро┐ройрпН роЗро▒рпБродро┐ рокроХрпБродро┐ роОро┤рпБродрокрпНрокроЯ ро╡рпЗрогрпНроЯрпБроорпН.

    > ЁЯТБ роЗро▒рпБродро┐ рокроХрпБродро┐ родрпЗро╡рпИропро▒рпНро▒ роХрпВроЯрпБродро▓рпН родро░ро╡рпБроХро│рпИ роОро┤рпБродрпБроорпН, роЖройро╛ро▓рпН роЗродрпБ роЪро░ро┐, родрпЗро╡рпИропро╛рой родро░ро╡рпБроХро│рпН роороЯрпНроЯрпБроорпЗ ро╡ро╛роЪро┐роХрпНроХрокрпНрокроЯрпБроорпН.

### рокрогро┐роХро│рпН - роЖроЯро┐ропрпЛ рокродро┐ро╡рпИ роЕроорпИроХрпНроХро╡рпБроорпН

1. `src` роХрпЛрокрпНрокрпБро▒рпИропро┐ро▓рпН `config.h` роОройрпНро▒ рокрпБродро┐роп роХрпЛрокрпНрокрпИ роЙро░рпБро╡ро╛роХрпНроХро╡рпБроорпН.

1. роЗроирпНрод роХрпЛрокрпНрокро┐ройрпН роорпЗро▓рпН рокро┐ройрпНро╡ро░рпБро╡ройро╡ро▒рпНро▒рпИроЪрпН роЪрпЗро░рпНроХрпНроХро╡рпБроорпН:

    ```cpp
    #pragma once

    #define RATE 16000
    #define SAMPLE_LENGTH_SECONDS 4
    #define SAMPLES RATE * SAMPLE_LENGTH_SECONDS
    #define BUFFER_SIZE (SAMPLES * 2) + 44
    #define ADC_BUF_LEN 1600
    ```

    роЗроирпНрод роХрпБро▒ро┐ропрпАроЯрпБ роЖроЯро┐ропрпЛ рокродро┐ро╡рпБроХрпНроХро╛рой роЪро┐ро▓ роиро┐ро▓рпИропро╛рой роородро┐рокрпНрокрпБроХро│рпИ роЕроорпИроХрпНроХро┐ро▒родрпБ.

    | роиро┐ро▓рпИропро╛ройродрпБ              | роородро┐рокрпНрокрпБ  | ро╡ро┐ро│роХрпНроХроорпН |
    | --------------------- | -----: | - |
    | RATE                  | 16000  | роЖроЯро┐ропрпЛро╡рпБроХрпНроХро╛рой рооро╛родро┐ро░ро┐ ро╡ро┐роХро┐родроорпН. 16,000 роОройрпНрокродрпБ 16KHz |
    | SAMPLE_LENGTH_SECONDS | 4      | рокродро┐ро╡рпБ роЪрпЖропрпНроп ро╡рпЗрогрпНроЯро┐роп роЖроЯро┐ропрпЛ роирпАро│роорпН. роЗродрпБ 4 ро╡ро┐роиро╛роЯро┐роХро│ро╛роХ роЕроорпИроХрпНроХрокрпНрокроЯрпНроЯрпБро│рпНро│родрпБ. роирпАрогрпНроЯ роЖроЯро┐ропрпЛ рокродро┐ро╡рпБ роЪрпЖропрпНроп, роЗродрпИ роЕродро┐роХро░ро┐роХрпНроХро╡рпБроорпН. |
    | SAMPLES               | 64000  | рокродро┐ро╡рпБ роЪрпЖропрпНропрокрпНрокроЯрпБроорпН роорпКродрпНрод роЖроЯро┐ропрпЛ рооро╛родро┐ро░ро┐роХро│рпН. рооро╛родро┐ро░ро┐ ро╡ро┐роХро┐родроорпН * ро╡ро┐роиро╛роЯро┐роХро│ро┐ройрпН роОрогрпНрогро┐роХрпНроХрпИ |
    | BUFFER_SIZE           | 128044 | роЖроЯро┐ропрпЛ рокроГрокро░ро┐ройрпН роЕро│ро╡рпБ. роЖроЯро┐ропрпЛ WAV роХрпЛрокрпНрокро╛роХ рокродро┐ро╡рпБ роЪрпЖропрпНропрокрпНрокроЯрпБроорпН, роЗродрпБ 44 рокрпИроЯрпНроЯрпБроХро│рпН родро▓рпИрокрпНрокрпБ, рокро┐ройрпНройро░рпН 128,000 рокрпИроЯрпНроЯрпБроХро│рпН роЖроЯро┐ропрпЛ родро░ро╡рпБроХро│рпН (роТро╡рпНро╡рпКро░рпБ рооро╛родро┐ро░ро┐ропрпБроорпН 2 рокрпИроЯрпНроЯрпБроХро│рпН) |
    | ADC_BUF_LEN           | 1600   | DMAC-роЗро▓ро┐ро░рпБроирпНродрпБ роЖроЯро┐ропрпЛ рокродро┐ро╡рпБ роЪрпЖропрпНроп рокропройрпНрокроЯрпБродрпНрод рокроГрокро░рпНроХро│ро┐ройрпН роЕро│ро╡рпБ |

    > ЁЯТБ 4 ро╡ро┐роиро╛роЯро┐роХро│рпН роТро░рпБ роЯрпИрооро░рпИ роХрпЛро░рпБро╡родро▒рпНроХрпБ роХрпБро▒рпИро╡ро╛роХ роЗро░рпБроирпНродро╛ро▓рпН, `SAMPLE_LENGTH_SECONDS` роородро┐рокрпНрокрпИ роЕродро┐роХро░ро┐роХрпНроХро╡рпБроорпН, роорпЗро▓рпБроорпН рооро▒рпНро▒ роородро┐рокрпНрокрпБроХро│рпН роЕройрпИродрпНродрпБроорпН роорпАро│рпЖро┤рпБродрокрпНрокроЯрпБроорпН.

1. `src` роХрпЛрокрпНрокрпБро▒рпИропро┐ро▓рпН `mic.h` роОройрпНро▒ рокрпБродро┐роп роХрпЛрокрпНрокрпИ роЙро░рпБро╡ро╛роХрпНроХро╡рпБроорпН.

1. роЗроирпНрод роХрпЛрокрпНрокро┐ройрпН роорпЗро▓рпН рокро┐ройрпНро╡ро░рпБро╡ройро╡ро▒рпНро▒рпИроЪрпН роЪрпЗро░рпНроХрпНроХро╡рпБроорпН:

    ```cpp
    #pragma once

    #include <Arduino.h>

    #include "config.h"
    #include "flash_writer.h"
    ```

    роЗродрпБ `config.h` рооро▒рпНро▒рпБроорпН `FlashWriter` родро▓рпИрокрпНрокрпБ роХрпЛрокрпНрокрпБроХро│рпИ роЙроЯрпНрокроЯ роЪро┐ро▓ родрпЗро╡рпИропро╛рой родро▓рпИрокрпНрокрпБ роХрпЛрокрпНрокрпБроХро│рпИроЪрпН роЪрпЗро░рпНроХрпНроХро┐ро▒родрпБ.

1. роорпИроХрпНро░рпЛроГрокрпЛройро┐ро▓ро┐ро░рпБроирпНродрпБ рокродро┐ро╡рпБ роЪрпЖропрпНроп `Mic` ро╡роХрпИропрпИ ро╡ро░рпИропро▒рпБроХрпНроХ рокро┐ройрпНро╡ро░рпБро╡ройро╡ро▒рпНро▒рпИроЪрпН роЪрпЗро░рпНроХрпНроХро╡рпБроорпН:

    ```cpp
    class Mic
    {
    public:
        Mic()
        {
            _isRecording = false;
            _isRecordingReady = false;
        }
    
        void startRecording()
        {
            _isRecording = true;
            _isRecordingReady = false;
        }
    
        bool isRecording()
        {
            return _isRecording;
        }
    
        bool isRecordingReady()
        {
            return _isRecordingReady;
        }
    
    private:
        volatile bool _isRecording;
        volatile bool _isRecordingReady;
        FlashWriter _writer;
    };
    
    Mic mic;
    ```

    роЗроирпНрод ро╡роХрпИ родро▒рпНрокрпЛродрпБ рокродро┐ро╡рпБ родрпКроЯроЩрпНроХро┐ропродро╛, рооро▒рпНро▒рпБроорпН роТро░рпБ рокродро┐ро╡рпБ рокропройрпНрокроЯрпБродрпНрод родропро╛ро░ро╛роХ роЙро│рпНро│родро╛ роОройрпНрокродрпИ роХрогрпНроХро╛рогро┐роХрпНроХ роЪро┐ро▓ рокрпБро▓роЩрпНроХро│рпИ роороЯрпНроЯрпБроорпЗ роХрпКрогрпНроЯрпБро│рпНро│родрпБ. DMAC роЕроорпИроХрпНроХрокрпНрокроЯрпНроЯ рокро┐ро▒роХрпБ, роЗродрпБ родрпКроЯро░рпНроирпНродрпБ роиро┐ройрпИро╡роХ рокроГрокро░рпНроХро│рпБроХрпНроХрпБ роОро┤рпБродрпБроХро┐ро▒родрпБ, роОройро╡рпЗ `_isRecording` роХрпКроЯро┐ роЗроирпНрод рокроГрокро░рпНроХро│рпИ роЪрпЖропро▓ро╛роХрпНроХ ро╡рпЗрогрпНроЯрпБрооро╛ роЕро▓рпНро▓родрпБ рокрпБро▒роХрпНроХрогро┐роХрпНроХ ро╡рпЗрогрпНроЯрпБрооро╛ роОройрпНрокродрпИ родрпАро░рпНрооро╛ройро┐роХрпНроХро┐ро▒родрпБ. `_isRecordingReady` роХрпКроЯро┐ родрпЗро╡рпИропро╛рой 4 ро╡ро┐роиро╛роЯро┐роХро│ро┐ройрпН роЖроЯро┐ропрпЛ рокродро┐ро╡рпБ роЪрпЖропрпНропрокрпНрокроЯрпНроЯродрпБроорпН роЕроорпИроХрпНроХрокрпНрокроЯрпБроорпН. `_writer` рокрпБро▓роорпН роЖроЯро┐ропрпЛ родро░ро╡рпБроХро│рпИ роГрокрпНро│ро╛ро╖рпН роорпЖрооро░ро┐ропро┐ро▓рпН роЪрпЗрооро┐роХрпНроХ рокропройрпНрокроЯрпБродрпНродрокрпНрокроЯрпБроХро┐ро▒родрпБ.

    рокро┐ройрпНройро░рпН `Mic` ро╡роХрпИропро┐ройрпН роТро░рпБ роОроЯрпБродрпНродрпБроХрпНроХро╛роЯрпНроЯро┐ро▒рпНроХро╛рой роТро░рпБ роЙро▓роХро│ро╛ро╡ро┐роп рооро╛ро▒ро┐ роЕро▒ро┐ро╡ро┐роХрпНроХрокрпНрокроЯрпБроХро┐ро▒родрпБ.

1. `Mic` ро╡роХрпИропро┐ройрпН `private` рокро┐ро░ро┐ро╡ро┐ро▓рпН рокро┐ройрпНро╡ро░рпБроорпН роХрпБро▒ро┐ропрпАроЯрпНроЯрпИроЪрпН роЪрпЗро░рпНроХрпНроХро╡рпБроорпН:

    ```cpp
    typedef struct
    {
        uint16_t btctrl;
        uint16_t btcnt;
        uint32_t srcaddr;
        uint32_t dstaddr;
        uint32_t descaddr;
    } dmacdescriptor;

    // Globals - DMA and ADC
    volatile dmacdescriptor _wrb[DMAC_CH_NUM] __attribute__((aligned(16)));
    dmacdescriptor _descriptor_section[DMAC_CH_NUM] __attribute__((aligned(16)));
    dmacdescriptor _descriptor __attribute__((aligned(16)));

    void configureDmaAdc()
    {
        // Configure DMA to sample from ADC at a regular interval (triggered by timer/counter)
        DMAC->BASEADDR.reg = (uint32_t)_descriptor_section;                    // Specify the location of the descriptors
        DMAC->WRBADDR.reg = (uint32_t)_wrb;                                    // Specify the location of the write back descriptors
        DMAC->CTRL.reg = DMAC_CTRL_DMAENABLE | DMAC_CTRL_LVLEN(0xf);           // Enable the DMAC peripheral
        DMAC->Channel[1].CHCTRLA.reg = DMAC_CHCTRLA_TRIGSRC(TC5_DMAC_ID_OVF) | // Set DMAC to trigger on TC5 timer overflow
                                        DMAC_CHCTRLA_TRIGACT_BURST;             // DMAC burst transfer

        _descriptor.descaddr = (uint32_t)&_descriptor_section[1];                    // Set up a circular descriptor
        _descriptor.srcaddr = (uint32_t)&ADC1->RESULT.reg;                           // Take the result from the ADC0 RESULT register
        _descriptor.dstaddr = (uint32_t)_adc_buf_0 + sizeof(uint16_t) * ADC_BUF_LEN; // Place it in the adc_buf_0 array
        _descriptor.btcnt = ADC_BUF_LEN;                                             // Beat count
        _descriptor.btctrl = DMAC_BTCTRL_BEATSIZE_HWORD |                            // Beat size is HWORD (16-bits)
                                DMAC_BTCTRL_DSTINC |                                    // Increment the destination address
                                DMAC_BTCTRL_VALID |                                     // Descriptor is valid
                                DMAC_BTCTRL_BLOCKACT_SUSPEND;                           // Suspend DMAC channel 0 after block transfer
        memcpy(&_descriptor_section[0], &_descriptor, sizeof(_descriptor));          // Copy the descriptor to the descriptor section

        _descriptor.descaddr = (uint32_t)&_descriptor_section[0];                    // Set up a circular descriptor
        _descriptor.srcaddr = (uint32_t)&ADC1->RESULT.reg;                           // Take the result from the ADC0 RESULT register
        _descriptor.dstaddr = (uint32_t)_adc_buf_1 + sizeof(uint16_t) * ADC_BUF_LEN; // Place it in the adc_buf_1 array
        _descriptor.btcnt = ADC_BUF_LEN;                                             // Beat count
        _descriptor.btctrl = DMAC_BTCTRL_BEATSIZE_HWORD |                            // Beat size is HWORD (16-bits)
                                DMAC_BTCTRL_DSTINC |                                    // Increment the destination address
                                DMAC_BTCTRL_VALID |                                     // Descriptor is valid
                                DMAC_BTCTRL_BLOCKACT_SUSPEND;                           // Suspend DMAC channel 0 after block transfer
        memcpy(&_descriptor_section[1], &_descriptor, sizeof(_descriptor));          // Copy the descriptor to the descriptor section

        // Configure NVIC
        NVIC_SetPriority(DMAC_1_IRQn, 0); // Set the Nested Vector Interrupt Controller (NVIC) priority for DMAC1 to 0 (highest)
        NVIC_EnableIRQ(DMAC_1_IRQn);      // Connect DMAC1 to Nested Vector Interrupt Controller (NVIC)

        // Activate the suspend (SUSP) interrupt on DMAC channel 1
        DMAC->Channel[1].CHINTENSET.reg = DMAC_CHINTENSET_SUSP;

        // Configure ADC
        ADC1->INPUTCTRL.bit.MUXPOS = ADC_INPUTCTRL_MUXPOS_AIN12_Val; // Set the analog input to ADC0/AIN2 (PB08 - A4 on Metro M4)
        while (ADC1->SYNCBUSY.bit.INPUTCTRL)
            ;                              // Wait for synchronization
        ADC1->SAMPCTRL.bit.SAMPLEN = 0x00; // Set max Sampling Time Length to half divided ADC clock pulse (2.66us)
        while (ADC1->SYNCBUSY.bit.SAMPCTRL)
            ;                                         // Wait for synchronization
        ADC1->CTRLA.reg = ADC_CTRLA_PRESCALER_DIV128; // Divide Clock ADC GCLK by 128 (48MHz/128 = 375kHz)
        ADC1->CTRLB.reg = ADC_CTRLB_RESSEL_12BIT |    // Set ADC resolution to 12 bits
                            ADC_CTRLB_FREERUN;          // Set ADC to free run mode
        while (ADC1->SYNCBUSY.bit.CTRLB)
            ;                       // Wait for synchronization
        ADC1->CTRLA.bit.ENABLE = 1; // Enable the ADC
        while (ADC1->SYNCBUSY.bit.ENABLE)
            ;                       // Wait for synchronization
        ADC1->SWTRIG.bit.START = 1; // Initiate a software trigger to start an ADC conversion
        while (ADC1->SYNCBUSY.bit.SWTRIG)
            ; // Wait for synchronization

        // Enable DMA channel 1
        DMAC->Channel[1].CHCTRLA.bit.ENABLE = 1;

        // Configure Timer/Counter 5
        GCLK->PCHCTRL[TC5_GCLK_ID].reg = GCLK_PCHCTRL_CHEN |     // Enable peripheral channel for TC5
                                            GCLK_PCHCTRL_GEN_GCLK1; // Connect generic clock 0 at 48MHz

        TC5->COUNT16.WAVE.reg = TC_WAVE_WAVEGEN_MFRQ; // Set TC5 to Match Frequency (MFRQ) mode
        TC5->COUNT16.CC[0].reg = 3000 - 1;            // Set the trigger to 16 kHz: (4Mhz / 16000) - 1
        while (TC5->COUNT16.SYNCBUSY.bit.CC0)
            ; // Wait for synchronization

        // Start Timer/Counter 5
        TC5->COUNT16.CTRLA.bit.ENABLE = 1; // Enable the TC5 timer
        while (TC5->COUNT16.SYNCBUSY.bit.ENABLE)
            ; // Wait for synchronization
    }

    uint16_t _adc_buf_0[ADC_BUF_LEN];
    uint16_t _adc_buf_1[ADC_BUF_LEN];
    ```

    роЗроирпНрод роХрпБро▒ро┐ропрпАроЯрпБ DMAC-роР роЕроорпИроХрпНроХ, роЕродрпИ ADC-роХрпНроХрпБ роЗрогрпИродрпНродрпБ, `_adc_buf_0` рооро▒рпНро▒рпБроорпН `_adc_buf_1` роОройрпНро▒ роЗро░рогрпНроЯрпБ рооро╛ро▒рпБрокроЯрпНроЯ рокроГрокро░рпНроХро│рпИ роиро┐ро░рокрпНрок роЕроорпИроХрпНроХ `configureDmaAdc` роорпБро▒рпИропрпИ ро╡ро░рпИропро▒рпБроХрпНроХро┐ро▒родрпБ.

    > ЁЯТБ роорпИроХрпНро░рпЛроХрогрпНроЯрпНро░рпЛро▓ро░рпН роорпЗроорпНрокро╛роЯрпНроЯро┐ройрпН роХрпБро▒рпИрокро╛роЯрпБроХро│ро┐ро▓рпН роТройрпНро▒рпБ, ро╣ро╛ро░рпНроЯрпНро╡рпЗро░рпБроЯройрпН родрпКроЯро░рпНрокрпБ роХрпКро│рпНро│ родрпЗро╡рпИропро╛рой роХрпБро▒ро┐ропрпАроЯрпНроЯро┐ройрпН роЪро┐роХрпНроХро▓рпНродройрпНроорпИ, роЙроЩрпНроХро│рпН роХрпБро▒ро┐ропрпАроЯрпБ рооро┐роХро╡рпБроорпН роХрпБро▒рпИроирпНрод роиро┐ро▓рпИроорпИропро┐ро▓рпН ро╣ро╛ро░рпНроЯрпНро╡рпЗро░рпБроЯройрпН роирпЗро░роЯро┐ропро╛роХ родрпКроЯро░рпНрокрпБ роХрпКро│рпНро│ роЗропроЩрпНроХрпБроХро┐ро▒родрпБ. роТро░рпЗ-рокрпЛро░рпНроЯрпБ роХрогро┐ройро┐ роЕро▓рпНро▓родрпБ роЯрпЖро╕рпНроХрпНроЯро╛рокрпН роХрогро┐ройро┐роХрпНроХро╛рой роирпАроЩрпНроХро│рпН роОро┤рпБродрпБроорпН роХрпБро▒ро┐ропрпАроЯрпНроЯрпИро╡ро┐роЯ роЗроирпНрод роХрпБро▒ро┐ропрпАроЯрпБ роЪро┐роХрпНроХро▓ро╛ройродрпБ, роПройрпЖройро┐ро▓рпН роЙродро╡ роТро░рпБ роЗропроХрпНроХ роорпБро▒рпИроорпИ роЗро▓рпНро▓рпИ. роЗродрпИ роОро│ро┐роорпИрокрпНрокроЯрпБродрпНрод роЪро┐ро▓ роирпВро▓роХроЩрпНроХро│рпН роХро┐роЯрпИроХрпНроХро┐ройрпНро▒рой, роЖройро╛ро▓рпН роЗройрпНройрпБроорпН роиро┐ро▒рпИроп роЪро┐роХрпНроХро▓рпНродройрпНроорпИ роЙро│рпНро│родрпБ.

1. роЗродро▒рпНроХрпБ роХрпАро┤рпЗ рокро┐ройрпНро╡ро░рпБроорпН роХрпБро▒ро┐ропрпАроЯрпНроЯрпИроЪрпН роЪрпЗро░рпНроХрпНроХро╡рпБроорпН:

    ```cpp
    // WAV files have a header. This struct defines that header
    struct wavFileHeader
    {
        char riff[4];         /* "RIFF"                                  */
        long flength;         /* file length in bytes                    */
        char wave[4];         /* "WAVE"                                  */
        char fmt[4];          /* "fmt "                                  */
        long chunk_size;      /* size of FMT chunk in bytes (usually 16) */
        short format_tag;     /* 1=PCM, 257=Mu-Law, 258=A-Law, 259=ADPCM */
        short num_chans;      /* 1=mono, 2=stereo                        */
        long srate;           /* Sampling rate in samples per second     */
        long bytes_per_sec;   /* bytes per second = srate*bytes_per_samp */
        short bytes_per_samp; /* 2=16-bit mono, 4=16-bit stereo          */
        short bits_per_samp;  /* Number of bits per sample               */
        char data[4];         /* "data"                                  */
        long dlength;         /* data length in bytes (filelength - 44)  */
    };

    void initBufferHeader()
    {
        wavFileHeader wavh;

        strncpy(wavh.riff, "RIFF", 4);
        strncpy(wavh.wave, "WAVE", 4);
        strncpy(wavh.fmt, "fmt ", 4);
        strncpy(wavh.data, "data", 4);

        wavh.chunk_size = 16;
        wavh.format_tag = 1; // PCM
        wavh.num_chans = 1;  // mono
        wavh.srate = RATE;
        wavh.bytes_per_sec = (RATE * 1 * 16 * 1) / 8;
        wavh.bytes_per_samp = 2;
        wavh.bits_per_samp = 16;
        wavh.dlength = RATE * 2 * 1 * 16 / 2;
        wavh.flength = wavh.dlength + 44;

        _writer.writeSfudBuffer((byte *)&wavh, 44);
    }
    ```

    роЗроирпНрод роХрпБро▒ро┐ропрпАроЯрпБ WAV родро▓рпИрокрпНрокрпИ 44 рокрпИроЯрпНроЯрпБроХро│рпН роиро┐ройрпИро╡роХродрпНродрпИ роОроЯрпБродрпНродрпБроХрпНроХрпКро│рпНро│рпБроорпН роТро░рпБ роЕроорпИрокрпНрокро╛роХ ро╡ро░рпИропро▒рпБроХрпНроХро┐ро▒родрпБ. роЗродрпБ роЖроЯро┐ропрпЛ роХрпЛрокрпНрокрпБ ро╡ро┐роХро┐родроорпН, роЕро│ро╡рпБ, рооро▒рпНро▒рпБроорпН роЪрпЗройро▓рпНроХро│ро┐ройрпН роОрогрпНрогро┐роХрпНроХрпИ рокро▒рпНро▒ро┐роп ро╡ро┐ро╡ро░роЩрпНроХро│рпИ роОро┤рпБродрпБроХро┐ро▒родрпБ. роЗроирпНрод родро▓рпИрокрпНрокрпБ рокро┐ройрпНройро░рпН роГрокрпНро│ро╛ро╖рпН роорпЖрооро░ро┐ропро┐ро▓рпН роОро┤рпБродрокрпНрокроЯрпБроХро┐ро▒родрпБ.

1. роЗроирпНрод роХрпБро▒ро┐ропрпАроЯрпНроЯро┐ройрпН роХрпАро┤рпЗ, роЖроЯро┐ропрпЛ рокроГрокро░рпНроХро│рпН роЪрпЖропро▓ро╛роХрпНроХ родропро╛ро░ро╛роХ роЗро░рпБроХрпНроХрпБроорпН рокрпЛродрпБ роЕро┤рпИроХрпНроХрокрпНрокроЯрпБроорпН роорпБро▒рпИропрпИ роЕро▒ро┐ро╡ро┐роХрпНроХ рокро┐ройрпНро╡ро░рпБро╡ройро╡ро▒рпНро▒рпИроЪрпН роЪрпЗро░рпНроХрпНроХро╡рпБроорпН:

    ```cpp
    void audioCallback(uint16_t *buf, uint32_t buf_len)
    {
        static uint32_t idx = 44;

        if (_isRecording)
        {
            for (uint32_t i = 0; i < buf_len; i++)
            {
                int16_t audio_value = ((int16_t)buf[i] - 2048) * 16;

                _writer.writeSfudBuffer(audio_value & 0xFF);
                _writer.writeSfudBuffer((audio_value >> 8) & 0xFF);
            }

            idx += buf_len;
                
            if (idx >= BUFFER_SIZE)
            {
                _writer.flushSfudBuffer();
                idx = 44;
                _isRecording = false;
                _isRecordingReady = true;
            }
        }
    }
    ```

    роЖроЯро┐ропрпЛ рокроГрокро░рпНроХро│рпН ADC-роЗро▓ро┐ро░рпБроирпНродрпБ роЖроЯро┐ропрпЛ роХрпКрогрпНроЯ 16-рокро┐роЯрпН роорпБро┤рпБ роОрогрпНроХро│ро┐ройрпН ро╡ро░ро┐роЪрпИроХро│рпН. ADC 12-рокро┐роЯрпН роХрпИропрпКрокрпНрокрооро▒рпНро▒ роородро┐рокрпНрокрпБроХро│рпИ (0-1023) родро┐ро░рпБрокрпНрокрпБроХро┐ро▒родрпБ, роОройро╡рпЗ роЗро╡рпИ 16-рокро┐роЯрпН роХрпИропрпКрокрпНрокрооро▒рпНро▒ роородро┐рокрпНрокрпБроХро│ро╛роХ рооро╛ро▒рпНро▒рокрпНрокроЯ ро╡рпЗрогрпНроЯрпБроорпН, рокро┐ройрпНройро░рпН роЗро░рпБ рокрпИроЯрпНроЯрпБроХро│ро╛роХ рооро╛ро▒рпНро▒ро┐ роорпВро▓ рокрпИройро░ро┐ родро░ро╡ро╛роХ роЪрпЗрооро┐роХрпНроХ ро╡рпЗрогрпНроЯрпБроорпН.

    роЗроирпНрод рокрпИроЯрпНроЯрпБроХро│рпН роГрокрпНро│ро╛ро╖рпН роорпЖрооро░ро┐ рокроГрокро░рпНроХро│рпБроХрпНроХрпБ роОро┤рпБродрокрпНрокроЯрпБроХро┐ройрпНро▒рой. роОро┤рпБродрпБродро▓рпН 44-ро▓рпН родрпКроЯроЩрпНроХрпБроХро┐ро▒родрпБ - роЗродрпБ WAV роХрпЛрокрпНрокрпБ родро▓рпИрокрпНрокро╛роХ роОро┤рпБродрокрпНрокроЯрпНроЯ 44 рокрпИроЯрпНроЯрпБроХро│ро┐ройрпН роЗроЯрооро╛ро▒рпНро▒роорпН. родрпЗро╡рпИропро╛рой роЖроЯро┐ропрпЛ роирпАро│родрпНродро┐ро▒рпНроХро╛рой роЕройрпИродрпНродрпБ рокрпИроЯрпНроЯрпБроХро│рпБроорпН рокродро┐ро╡рпБ роЪрпЖропрпНропрокрпНрокроЯрпНроЯ рокро┐ро▒роХрпБ, роорпАродроорпБро│рпНро│ родро░ро╡рпБроХро│рпН роГрокрпНро│ро╛ро╖рпН роорпЖрооро░ро┐ропро┐ро▓рпН роОро┤рпБродрокрпНрокроЯрпБроХро┐ройрпНро▒рой.

1. `Mic` ро╡роХрпИропро┐ройрпН `public` рокро┐ро░ро┐ро╡ро┐ро▓рпН рокро┐ройрпНро╡ро░рпБроорпН роХрпБро▒ро┐ропрпАроЯрпНроЯрпИроЪрпН роЪрпЗро░рпНроХрпНроХро╡рпБроорпН:

    ```cpp
    void dmaHandler()
    {
        static uint8_t count = 0;

        if (DMAC->Channel[1].CHINTFLAG.bit.SUSP)
        {
            DMAC->Channel[1].CHCTRLB.reg = DMAC_CHCTRLB_CMD_RESUME;
            DMAC->Channel[1].CHINTFLAG.bit.SUSP = 1;

            if (count)
            {
                audioCallback(_adc_buf_0, ADC_BUF_LEN);
            }
            else
            {
                audioCallback(_adc_buf_1, ADC_BUF_LEN);
            }

            count = (count + 1) % 2;
        }
    }
    ```

    DMAC роЙроЩрпНроХро│рпН роХрпБро▒ро┐ропрпАроЯрпНроЯрпИ рокроГрокро░рпНроХро│рпИ роЪрпЖропро▓ро╛роХрпНроХ роЕро┤рпИроХрпНроХ роЗроирпНрод роХрпБро▒ро┐ропрпАроЯрпБ роЕро┤рпИроХрпНроХрокрпНрокроЯрпБроорпН. роЪрпЖропро▓ро╛роХрпНроХродрпНродро┐ро▒рпНроХро╛рой родро░ро╡рпБроХро│рпН роЙро│рпНро│родро╛ роОройрпНрокродрпИ роЪро░ро┐рокро╛ро░рпНроХрпНроХро┐ро▒родрпБ, роорпЗро▓рпБроорпН родрпКроЯро░рпНрокрпБроЯрпИроп рокроГрокро░рпБроЯройрпН `audioCallback` роорпБро▒рпИропрпИ роЕро┤рпИроХрпНроХро┐ро▒родрпБ.

1. ро╡роХрпИроХрпНроХрпБ ро╡рпЖро│ро┐ропрпЗ, `Mic mic;` роЕро▒ро┐ро╡ро┐рокрпНрокрпБроХрпНроХрпБрокрпН рокро┐ро▒роХрпБ, рокро┐ройрпНро╡ро░рпБроорпН роХрпБро▒ро┐ропрпАроЯрпНроЯрпИроЪрпН роЪрпЗро░рпНроХрпНроХро╡рпБроорпН:

    ```cpp
    void DMAC_1_Handler()
    {
        mic.dmaHandler();
    }
    ```

    `DMAC_1_Handler` DMAC роорпВро▓роорпН роЕро┤рпИроХрпНроХрокрпНрокроЯрпБроорпН, рокроГрокро░рпНроХро│рпН роЪрпЖропро▓ро╛роХрпНроХродрпНродро┐ро▒рпНроХрпБ родропро╛ро░ро╛роХ роЗро░рпБроХрпНроХрпБроорпН рокрпЛродрпБ. роЗроирпНрод роЪрпЖропро▓рпНрокро╛роЯрпБ рокрпЖропро░ро╛ро▓рпН роХрогрпНроЯрпБрокро┐роЯро┐роХрпНроХрокрпНрокроЯрпБроХро┐ро▒родрпБ, роОройро╡рпЗ роЕро┤рпИроХрпНроХ роЗродрпБ роЗро░рпБроХрпНроХ ро╡рпЗрогрпНроЯрпБроорпН.

1. `Mic` ро╡роХрпИропро┐ройрпН `public` рокро┐ро░ро┐ро╡ро┐ро▓рпН рокро┐ройрпНро╡ро░рпБроорпН роЗро░рогрпНроЯрпБ роорпБро▒рпИроХро│рпИроЪрпН роЪрпЗро░рпНроХрпНроХро╡рпБроорпН:

    ```cpp
    void init()
    {
        analogReference(AR_INTERNAL2V23);

        _writer.init();

        initBufferHeader();
        configureDmaAdc();
    }

    void reset()
    {
        _isRecordingReady = false;
        _isRecording = false;

        _writer.reset();

        initBufferHeader();
    }
    ```

    `init` роорпБро▒рпИ `Mic` ро╡роХрпИропрпИ родрпКроЯроЩрпНроХ роХрпБро▒ро┐ропрпАроЯрпНроЯрпИ роХрпКрогрпНроЯрпБро│рпНро│родрпБ. роЗроирпНрод роорпБро▒рпИ Mic рокро┐ройрпН роЪро░ро┐ропро╛рой рооро┐ройрпНройро┤рпБродрпНродродрпНродрпИ роЕроорпИроХрпНроХро┐ро▒родрпБ, роГрокрпНро│ро╛ро╖рпН роорпЖрооро░ро┐ роОро┤рпБродрпНродро╛ро│ро░рпИ роЕроорпИроХрпНроХро┐ро▒родрпБ, WAV роХрпЛрокрпНрокрпБ родро▓рпИрокрпНрокрпИ роОро┤рпБродрпБроХро┐ро▒родрпБ, роорпЗро▓рпБроорпН DMAC-роР роЕроорпИроХрпНроХро┐ро▒родрпБ. `reset` роорпБро▒рпИ роГрокрпНро│ро╛ро╖рпН роорпЖрооро░ро┐ропрпИ роорпАроЯрпНроЯроорпИроХрпНроХро┐ро▒родрпБ рооро▒рпНро▒рпБроорпН роЖроЯро┐ропрпЛ рокродро┐ро╡рпБ роЪрпЖропрпНропрокрпНрокроЯрпНроЯрпБ рокропройрпНрокроЯрпБродрпНродрокрпНрокроЯрпНроЯ рокро┐ро▒роХрпБ родро▓рпИрокрпНрокрпИ роорпАрогрпНроЯрпБроорпН роОро┤рпБродрпБроХро┐ро▒родрпБ.

### рокрогро┐роХро│рпН - роЖроЯро┐ропрпЛ рокродро┐ро╡рпБ

1. `main.cpp` роХрпЛрокрпНрокро┐ро▓рпН, `mic.h` родро▓рпИрокрпНрокрпБ роХрпЛрокрпНрокрпБроХрпНроХро╛рой роТро░рпБ роЪрпЗро░рпНроХрпНроХро▓рпН роЗропроХрпНроХродрпНродрпИроЪрпН роЪрпЗро░рпНроХрпНроХро╡рпБроорпН:

    ```cpp
    #include "mic.h"
    ```

1. `setup` роЪрпЖропро▓рпНрокро╛роЯрпНроЯро┐ро▓рпН, C рокрпКродрпНродро╛ройрпИ родрпКроЯроЩрпНроХрпБроЩрпНроХро│рпН. роЗроирпНрод рокрпКродрпНродро╛ройрпИ роЕро┤рпБродрпНродрпБроорпНрокрпЛродрпБ роЖроЯро┐ропрпЛ рокродро┐ро╡рпБ родрпКроЯроЩрпНроХрпБроорпН, роорпЗро▓рпБроорпН 4 ро╡ро┐роиро╛роЯро┐роХро│рпН родрпКроЯро░рпБроорпН:

    ```cpp
    pinMode(WIO_KEY_C, INPUT_PULLUP);
    ```

1. роЗродро▒рпНроХрпБ роХрпАро┤рпЗ, роорпИроХрпНро░рпЛроГрокрпЛройрпИ родрпКроЯроЩрпНроХрпБроЩрпНроХро│рпН, рокро┐ройрпНройро░рпН роЖроЯро┐ропрпЛ рокродро┐ро╡рпБ роЪрпЖропрпНроп родропро╛ро░ро╛роХ роЙро│рпНро│родрпБ роОройрпНрокродрпИ роХройрпНроЪрпЛро▓ро┐ро▓рпН роЕроЪрпНроЪро┐роЯрпБроЩрпНроХро│рпН:

    ```cpp
    mic.init();

    Serial.println("Ready.");
    ```

1. `loop` роЪрпЖропро▓рпНрокро╛роЯрпНроЯрпБроХрпНроХрпБ роорпЗро▓рпЗ, рокродро┐ро╡рпБ роЪрпЖропрпНропрокрпНрокроЯрпНроЯ роЖроЯро┐ропрпЛро╡рпИ роЪрпЖропро▓ро╛роХрпНроХ роТро░рпБ роЪрпЖропро▓рпНрокро╛роЯрпНроЯрпИ ро╡ро░рпИропро▒рпБроХрпНроХро╡рпБроорпН. родро▒рпНрокрпЛродрпБ роЗродрпБ роОродрпИропрпБроорпН роЪрпЖропрпНропро╛родрпБ, роЖройро╛ро▓рпН роЗроирпНрод рокро╛роЯродрпНродро┐ро▓рпН рокро┐ройрпНройро░рпН роЗродрпБ роЙро░рпИропро╛роХ рооро╛ро▒рпНро▒ роЕройрпБрокрпНрокрокрпНрокроЯрпБроорпН:

    ```cpp
    void processAudio()
    {
    
    }
    ```

1. `loop` роЪрпЖропро▓рпНрокро╛роЯрпНроЯро┐ро▓рпН рокро┐ройрпНро╡ро░рпБро╡ройро╡ро▒рпНро▒рпИроЪрпН роЪрпЗро░рпНроХрпНроХро╡рпБроорпН:

    ```cpp
    void loop()
    {
        if (digitalRead(WIO_KEY_C) == LOW && !mic.isRecording())
        {
            Serial.println("Starting recording...");
            mic.startRecording();
        }
    
        if (!mic.isRecording() && mic.isRecordingReady())
        {
            Serial.println("Finished recording");
    
            processAudio();
    
            mic.reset();
        }
    }
    ```

    роЗроирпНрод роХрпБро▒ро┐ропрпАроЯрпБ C рокрпКродрпНродро╛ройрпИроЪрпН роЪро░ро┐рокро╛ро░рпНроХрпНроХро┐ро▒родрпБ, роорпЗро▓рпБроорпН роЗродрпБ роЕро┤рпБродрпНродрокрпНрокроЯрпНроЯрпБ рокродро┐ро╡рпБ родрпКроЯроЩрпНроХро╡ро┐ро▓рпНро▓рпИ роОройрпНро▒ро╛ро▓рпН, `Mic` ро╡роХрпИропро┐ройрпН `_isRecording` рокрпБро▓роорпН роЙрогрпНроорпИропро╛роХ роЕроорпИроХрпНроХрокрпНрокроЯрпБроХро┐ро▒родрпБ. роЗродрпБ `Mic` ро╡роХрпИропро┐ройрпН `audioCallback` роорпБро▒рпИропрпИ 4 ро╡ро┐роиро╛роЯро┐роХро│рпН рокродро┐ро╡рпБ роЪрпЖропрпНропрпБроорпН ро╡ро░рпИ роЖроЯро┐ропрпЛ роЪрпЗрооро┐роХрпНроХроЪрпН роЪрпЖропрпНропрпБроорпН. 4 ро╡ро┐роиро╛роЯро┐роХро│рпН роЖроЯро┐ропрпЛ рокродро┐ро╡рпБ роЪрпЖропрпНропрокрпНрокроЯрпНроЯ рокро┐ро▒роХрпБ, `_isRecording` рокрпБро▓роорпН рокрпКропрпНропро╛роХ роЕроорпИроХрпНроХрокрпНрокроЯрпБроХро┐ро▒родрпБ, роорпЗро▓рпБроорпН `_isRecordingReady` рокрпБро▓роорпН роЙрогрпНроорпИропро╛роХ роЕроорпИроХрпНроХрокрпНрокроЯрпБроХро┐ро▒родрпБ. роЗродрпБ рокро┐ройрпНройро░рпН `loop` роЪрпЖропро▓

---

**роХрпБро▒ро┐рокрпНрокрпБ**:  
роЗроирпНрод роЖро╡рогроорпН [Co-op Translator](https://github.com/Azure/co-op-translator) роОройрпНро▒ AI роорпКро┤ро┐рокрпЖропро░рпНрокрпНрокрпБ роЪрпЗро╡рпИропрпИ рокропройрпНрокроЯрпБродрпНродро┐ роорпКро┤ро┐рокрпЖропро░рпНроХрпНроХрокрпНрокроЯрпНроЯрпБро│рпНро│родрпБ. роОроЩрпНроХро│рпН родро░родрпНродрпИ роЙро▒рпБродро┐рокрпНрокроЯрпБродрпНрод роорпБропро▒рпНроЪро┐роХрпНроХро┐ро▒рпЛроорпН, роЖройро╛ро▓рпН родро╛ройро┐ропроЩрпНроХро┐ роорпКро┤ро┐рокрпЖропро░рпНрокрпНрокрпБроХро│ро┐ро▓рпН рокро┐ро┤рпИроХро│рпН роЕро▓рпНро▓родрпБ родро╡ро▒рпБроХро│рпН роЗро░рпБроХрпНроХроХрпНроХрпВроЯрпБроорпН роОройрпНрокродрпИ роХро╡ройродрпНродро┐ро▓рпН роХрпКро│рпНро│ро╡рпБроорпН. роЕродройрпН родро╛ропрпНроорпКро┤ро┐ропро┐ро▓рпН роЙро│рпНро│ роорпВро▓ роЖро╡рогроорпН роЕродро┐роХро╛ро░рокрпНрокрпВро░рпНро╡ роЖродро╛ро░рооро╛роХ роХро░рпБродрокрпНрокроЯ ро╡рпЗрогрпНроЯрпБроорпН. роорпБроХрпНроХро┐ропрооро╛рой родроХро╡ро▓рпНроХро│рпБроХрпНроХрпБ, родрпКро┤ро┐ро▓рпНроорпБро▒рпИ рооройро┐род роорпКро┤ро┐рокрпЖропро░рпНрокрпНрокрпБ рокро░ро┐роирпНродрпБро░рпИроХрпНроХрокрпНрокроЯрпБроХро┐ро▒родрпБ. роЗроирпНрод роорпКро┤ро┐рокрпЖропро░рпНрокрпНрокрпИрокрпН рокропройрпНрокроЯрпБродрпНродрпБро╡родро╛ро▓рпН роПро▒рпНрокроЯрпБроорпН роОроирпНрод родро╡ро▒ро╛рой рокрпБро░ро┐родро▓рпНроХро│рпН роЕро▓рпНро▓родрпБ родро╡ро▒ро╛рой ро╡ро┐ро│роХрпНроХроЩрпНроХро│рпБроХрпНроХрпБ роиро╛роЩрпНроХро│рпН рокрпКро▒рпБрокрпНрокро▓рпНро▓.