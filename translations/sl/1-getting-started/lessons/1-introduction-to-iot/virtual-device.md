<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "52b4de6144b2efdced7797a5339d6035",
  "translation_date": "2025-08-28T14:01:29+00:00",
  "source_file": "1-getting-started/lessons/1-introduction-to-iot/virtual-device.md",
  "language_code": "sl"
}
-->
# Virtualni enojni raƒçunalnik

Namesto nakupa IoT naprave, skupaj s senzorji in aktuatorji, lahko uporabite svoj raƒçunalnik za simulacijo IoT strojne opreme. Projekt [CounterFit](https://github.com/CounterFit-IoT/CounterFit) vam omogoƒça, da lokalno za≈æenete aplikacijo, ki simulira IoT strojno opremo, kot so senzorji in aktuatorji, ter dostopate do teh senzorjev in aktuatorjev iz lokalne Python kode, napisane na enak naƒçin, kot bi jo napisali na Raspberry Pi z uporabo fiziƒçne strojne opreme.

## Namestitev

Za uporabo CounterFit boste morali na svoj raƒçunalnik namestiti nekaj brezplaƒçne programske opreme.

### Naloga

Namestite potrebno programsko opremo.

1. Namestite Python. Za navodila o namestitvi najnovej≈°e razliƒçice Pythona si oglejte [stran za prenose Pythona](https://www.python.org/downloads/).

1. Namestite Visual Studio Code (VS Code). To je urejevalnik, ki ga boste uporabljali za pisanje kode za virtualno napravo v Pythonu. Za navodila o namestitvi VS Code si oglejte [dokumentacijo VS Code](https://code.visualstudio.com?WT.mc_id=academic-17441-jabenn).

    > üíÅ Prosto lahko uporabljate katerikoli Python IDE ali urejevalnik za te lekcije, ƒçe imate raje kak≈°no drugo orodje, vendar bodo navodila v lekcijah temeljila na uporabi VS Code.

1. Namestite raz≈°iritev VS Code Pylance. To je raz≈°iritev za VS Code, ki zagotavlja podporo za Python. Za navodila o namestitvi te raz≈°iritve v VS Code si oglejte [dokumentacijo raz≈°iritve Pylance](https://marketplace.visualstudio.com/items?WT.mc_id=academic-17441-jabenn&itemName=ms-python.vscode-pylance).

Navodila za namestitev in konfiguracijo aplikacije CounterFit bodo podana ob ustreznem ƒçasu v navodilih za nalogo, saj se aplikacija namesti za vsak projekt posebej.

## Hello world

Obiƒçajno je, da ob zaƒçetku uporabe novega programskega jezika ali tehnologije ustvarite aplikacijo 'Hello World' - majhno aplikacijo, ki izpi≈°e besedilo, kot je `"Hello World"`, da preverite, ali so vsa orodja pravilno konfigurirana.

Aplikacija Hello World za virtualno IoT strojno opremo bo zagotovila, da imate pravilno name≈°ƒçen Python in Visual Studio Code. Prav tako se bo povezala s CounterFit za virtualne IoT senzorje in aktuatorje. Ne bo uporabljala nobene strojne opreme, le povezala se bo, da doka≈æe, da vse deluje.

Ta aplikacija bo v mapi z imenom `nightlight`, ki bo ponovno uporabljena z razliƒçnimi kodami v kasnej≈°ih delih te naloge za izdelavo aplikacije noƒçne luƒçke.

### Konfiguracija virtualnega okolja za Python

Ena od zmogljivih funkcij Pythona je mo≈ænost namestitve [Pip paketov](https://pypi.org) - to so paketi kode, ki jih napi≈°ejo drugi ljudje in objavijo na internetu. Pip paket lahko namestite na svoj raƒçunalnik z enim ukazom, nato pa ta paket uporabite v svoji kodi. Pip boste uporabljali za namestitev paketa za komunikacijo s CounterFit.

Privzeto, ko namestite paket, je ta na voljo povsod na va≈°em raƒçunalniku, kar lahko povzroƒçi te≈æave z razliƒçicami paketov - na primer, ena aplikacija je odvisna od ene razliƒçice paketa, ki pa se pokvari, ko namestite novo razliƒçico za drugo aplikacijo. Da bi se izognili tej te≈æavi, lahko uporabite [virtualno okolje za Python](https://docs.python.org/3/library/venv.html), ki je v bistvu kopija Pythona v namenski mapi, in ko namestite Pip pakete, se ti namestijo samo v to mapo.

> üíÅ ƒåe uporabljate Raspberry Pi, potem na tej napravi niste nastavili virtualnega okolja za upravljanje Pip paketov, ampak uporabljate globalne pakete, saj so Grove paketi globalno name≈°ƒçeni s skripto za namestitev.

#### Naloga - konfiguracija virtualnega okolja za Python

Konfigurirajte virtualno okolje za Python in namestite Pip pakete za CounterFit.

1. V terminalu ali ukazni vrstici za≈æenite naslednje na lokaciji po va≈°i izbiri, da ustvarite in se premaknete v novo mapo:

    ```sh
    mkdir nightlight
    cd nightlight
    ```

1. Zdaj za≈æenite naslednje, da ustvarite virtualno okolje v mapi `.venv`:

    ```sh
    python3 -m venv .venv
    ```

    > üíÅ Izrecno morate poklicati `python3`, da ustvarite virtualno okolje, za primer, ƒçe imate name≈°ƒçen Python 2 poleg Pythona 3 (najnovej≈°e razliƒçice). ƒåe imate name≈°ƒçen Python 2, bo klic `python` uporabil Python 2 namesto Pythona 3.

1. Aktivirajte virtualno okolje:

    * Na Windows:
        * ƒåe uporabljate Command Prompt ali Command Prompt prek Windows Terminala, za≈æenite:

            ```cmd
            .venv\Scripts\activate.bat
            ```

        * ƒåe uporabljate PowerShell, za≈æenite:

            ```powershell
            .\.venv\Scripts\Activate.ps1
            ```

            > ƒåe dobite napako o tem, da je izvajanje skriptov onemogoƒçeno na tem sistemu, boste morali omogoƒçiti izvajanje skriptov z nastavitvijo ustrezne politike izvajanja. To lahko storite tako, da za≈æenete PowerShell kot skrbnik in nato za≈æenete naslednji ukaz:

            ```powershell
            Set-ExecutionPolicy -ExecutionPolicy Unrestricted
            ```

            Vnesite `Y`, ko vas pozove k potrditvi. Nato ponovno za≈æenite PowerShell in poskusite znova.

            Politiko izvajanja lahko po potrebi pozneje ponastavite. Veƒç o tem si lahko preberete na [strani o politikah izvajanja v Microsoft Docs](https://docs.microsoft.com/powershell/module/microsoft.powershell.core/about/about_execution_policies?WT.mc_id=academic-17441-jabenn).

    * Na macOS ali Linux za≈æenite:

        ```cmd
        source ./.venv/bin/activate
        ```

    > üíÅ Te ukaze je treba zagnati z iste lokacije, kjer ste zagnali ukaz za ustvarjanje virtualnega okolja. Nikoli vam ne bo treba navigirati v mapo `.venv`, vedno morate zagnati ukaz za aktivacijo in ukaze za namestitev paketov ali zagon kode iz mape, v kateri ste bili, ko ste ustvarili virtualno okolje.

1. Ko je virtualno okolje aktivirano, bo privzeti ukaz `python` zagnal razliƒçico Pythona, ki je bila uporabljena za ustvarjanje virtualnega okolja. Za≈æenite naslednje, da preverite razliƒçico:

    ```sh
    python --version
    ```

    Izhod bi moral vsebovati naslednje:

    ```output
    (.venv) ‚ûú  nightlight python --version
    Python 3.9.1
    ```

    > üíÅ Va≈°a razliƒçica Pythona je lahko drugaƒçna - dokler je razliƒçica 3.6 ali vi≈°ja, je vse v redu. ƒåe ni, izbri≈°ite to mapo, namestite novej≈°o razliƒçico Pythona in poskusite znova.

1. Za≈æenite naslednje ukaze za namestitev Pip paketov za CounterFit. Ti paketi vkljuƒçujejo glavno aplikacijo CounterFit ter shime za strojno opremo Grove. Ti shimi vam omogoƒçajo pisanje kode, kot da bi programirali z uporabo fiziƒçnih senzorjev in aktuatorjev iz ekosistema Grove, vendar povezanih z virtualnimi IoT napravami.

    ```sh
    pip install CounterFit
    pip install counterfit-connection
    pip install counterfit-shims-grove
    ```

    Ti Pip paketi bodo name≈°ƒçeni samo v virtualnem okolju in ne bodo na voljo zunaj njega.

### Napi≈°ite kodo

Ko je virtualno okolje za Python pripravljeno, lahko napi≈°ete kodo za aplikacijo 'Hello World'.

#### Naloga - napi≈°ite kodo

Ustvarite Python aplikacijo, ki izpi≈°e `"Hello World"` v konzolo.

1. V terminalu ali ukazni vrstici za≈æenite naslednje znotraj virtualnega okolja, da ustvarite Python datoteko z imenom `app.py`:

    * Na Windows za≈æenite:

        ```cmd
        type nul > app.py
        ```

    * Na macOS ali Linux za≈æenite:

        ```cmd
        touch app.py
        ```

1. Odprite trenutno mapo v VS Code:

    ```sh
    code .
    ```

    > üíÅ ƒåe va≈° terminal na macOS vrne `command not found`, to pomeni, da VS Code ni bil dodan v va≈° PATH. VS Code lahko dodate v PATH tako, da sledite navodilom v [razdelku o zagonu iz ukazne vrstice v dokumentaciji VS Code](https://code.visualstudio.com/docs/setup/mac?WT.mc_id=academic-17441-jabenn#_launching-from-the-command-line) in nato za≈æenete ukaz. VS Code je privzeto dodan v PATH na Windows in Linux.

1. Ko se VS Code za≈æene, bo aktiviral virtualno okolje za Python. Izbrano virtualno okolje bo prikazano v spodnji vrstici stanja:

    ![VS Code prikazuje izbrano virtualno okolje](../../../../../translated_images/vscode-virtual-env.8ba42e04c3d533cf677e16cbe5ed9a3b80f62c6964472dc84b6f940800f0909f.sl.png)

1. ƒåe je terminal VS Code ≈æe aktiven, ko se VS Code za≈æene, virtualno okolje v njem ne bo aktivirano. Najla≈æje je ubiti terminal z gumbom **Kill the active terminal instance**:

    ![Gumb za ubijanje aktivnega terminala v VS Code](../../../../../translated_images/vscode-kill-terminal.1cc4de7c6f25ee08f423f0ead714e61d069fac1eb2089e97b8a7bbcb3d45fe5e.sl.png)

    Prepoznate lahko, ali je terminal aktiviral virtualno okolje, saj bo ime virtualnega okolja predpona na ukaznem pozivu terminala. Na primer, lahko je:

    ```sh
    (.venv) ‚ûú  nightlight
    ```

    ƒåe na pozivu ni `.venv` kot predpone, virtualno okolje ni aktivno v terminalu.

1. Za≈æenite nov terminal v VS Code z izbiro *Terminal -> New Terminal* ali s pritiskom na `` CTRL+` ``. Nov terminal bo nalo≈æil virtualno okolje, klic za aktivacijo pa se bo pojavil v terminalu. Poziv bo imel tudi ime virtualnega okolja (`.venv`):

    ```output
    ‚ûú  nightlight source .venv/bin/activate
    (.venv) ‚ûú  nightlight 
    ```

1. Odprite datoteko `app.py` iz raziskovalca VS Code in dodajte naslednjo kodo:

    ```python
    print('Hello World!')
    ```

    Funkcija `print` izpi≈°e karkoli ji je podano v konzolo.

1. V terminalu VS Code za≈æenite naslednje, da za≈æenete svojo Python aplikacijo:

    ```sh
    python app.py
    ```

    Izhod bo vseboval naslednje:

    ```output
    (.venv) ‚ûú  nightlight python app.py 
    Hello World!
    ```

üòÄ Va≈° program 'Hello World' je bil uspe≈°en!

### Pove≈æite 'strojno opremo'

Kot drugi korak 'Hello World' boste zagnali aplikacijo CounterFit in jo povezali s svojo kodo. To je virtualni ekvivalent priklopa IoT strojne opreme na razvojni komplet.

#### Naloga - pove≈æite 'strojno opremo'

1. V terminalu VS Code za≈æenite aplikacijo CounterFit z naslednjim ukazom:

    ```sh
    counterfit
    ```

    Aplikacija se bo zaƒçela izvajati in odprla v va≈°em spletnem brskalniku:

    ![Aplikacija CounterFit, ki se izvaja v brskalniku](../../../../../translated_images/counterfit-first-run.433326358b669b31d0e99c3513cb01bfbb13724d162c99cdcc8f51ecf5f9c779.sl.png)

    Oznaƒçena bo kot *Disconnected*, z LED luƒçko v zgornjem desnem kotu, ki bo ugasnjena.

1. Dodajte naslednjo kodo na vrh datoteke `app.py`:

    ```python
    from counterfit_connection import CounterFitConnection
    CounterFitConnection.init('127.0.0.1', 5000)
    ```

    Ta koda uvozi razred `CounterFitConnection` iz modula `counterfit_connection`, ki prihaja iz Pip paketa `counterfit-connection`, ki ste ga prej namestili. Nato inicializira povezavo z aplikacijo CounterFit, ki se izvaja na `127.0.0.1`, kar je IP naslov, ki ga lahko vedno uporabite za dostop do svojega lokalnega raƒçunalnika (pogosto imenovan *localhost*), na vratih 5000.

    > üíÅ ƒåe imate druge aplikacije, ki se izvajajo na vratih 5000, lahko to spremenite tako, da posodobite vrata v kodi in za≈æenete CounterFit z ukazom `CounterFit --port <port_number>`, pri ƒçemer `<port_number>` zamenjate s ≈°tevilko vrat, ki jih ≈æelite uporabiti.

1. Morali boste zagnati nov terminal v VS Code z izbiro gumba **Create a new integrated terminal**. To je zato, ker se aplikacija CounterFit izvaja v trenutnem terminalu.

    ![Gumb za ustvarjanje novega integriranega terminala v VS Code](../../../../../translated_images/vscode-new-terminal.77db8fc0f9cd31824b0e49a201beafe4ae4616d6c7339992cb2819e789b3eff9.sl.png)

1. V tem novem terminalu za≈æenite datoteko `app.py` kot prej. Status CounterFit se bo spremenil v **Connected**, LED luƒçka pa se bo pri≈ægala.

    ![CounterFit prikazuje status Connected](../../../../../translated_images/counterfit-connected.ed30b46d8f79b0921f3fc70be10366e596a89dca3f80c2224a9d9fc98fccf884.sl.png)

> üíÅ To kodo lahko najdete v mapi [code/virtual-device](../../../../../1-getting-started/lessons/1-introduction-to-iot/code/virtual-device).

üòÄ Va≈°a povezava s strojno opremo je bila uspe≈°na!

---

**Omejitev odgovornosti**:  
Ta dokument je bil preveden z uporabo storitve za prevajanje z umetno inteligenco [Co-op Translator](https://github.com/Azure/co-op-translator). ƒåeprav si prizadevamo za natanƒçnost, vas prosimo, da upo≈°tevate, da lahko avtomatizirani prevodi vsebujejo napake ali netoƒçnosti. Izvirni dokument v njegovem maternem jeziku je treba obravnavati kot avtoritativni vir. Za kljuƒçne informacije priporoƒçamo profesionalni ƒçlove≈°ki prevod. Ne prevzemamo odgovornosti za morebitna nesporazumevanja ali napaƒçne razlage, ki bi nastale zaradi uporabe tega prevoda.