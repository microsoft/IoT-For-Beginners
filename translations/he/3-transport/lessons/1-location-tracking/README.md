<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "52ed2bd997d08040f79a1a6ef2bac958",
  "translation_date": "2025-08-27T22:53:02+00:00",
  "source_file": "3-transport/lessons/1-location-tracking/README.md",
  "language_code": "he"
}
-->
# מעקב מיקום

![סקיצה של סקירה כללית של השיעור](../../../../../translated_images/lesson-11.9fddbac4b664c6d50ab7ac9bb32f1fc3f945f03760e72f7f43938073762fb017.he.jpg)

> סקיצה מאת [ניטיה נאראסימהאן](https://github.com/nitya). לחצו על התמונה לגרסה גדולה יותר.

## חידון לפני ההרצאה

[חידון לפני ההרצאה](https://black-meadow-040d15503.1.azurestaticapps.net/quiz/21)

## מבוא

התהליך המרכזי של העברת מזון מחקלאי לצרכן כולל העמסת ארגזי תוצרת על משאיות, ספינות, מטוסים או כלי תחבורה מסחריים אחרים, והובלת המזון למקום כלשהו - או ישירות ללקוח, או למרכז לוגיסטי או מחסן לעיבוד. כל התהליך מקצה לקצה, מהחקלאי לצרכן, הוא חלק מתהליך שנקרא *שרשרת אספקה*. הסרטון הבא מבית הספר לעסקים W. P. Carey של אוניברסיטת אריזונה סטייט מסביר את הרעיון של שרשרת האספקה וכיצד מנהלים אותה בפירוט רב יותר.

[![מהי ניהול שרשרת אספקה? סרטון מבית הספר לעסקים W. P. Carey של אוניברסיטת אריזונה סטייט](https://img.youtube.com/vi/Mi1QBxVjZAw/0.jpg)](https://www.youtube.com/watch?v=Mi1QBxVjZAw)

> 🎥 לחצו על התמונה למעלה לצפייה בסרטון

הוספת מכשירי IoT יכולה לשפר באופן דרמטי את שרשרת האספקה שלכם, לאפשר לכם לנהל היכן נמצאים פריטים, לתכנן טוב יותר את ההובלה והטיפול בסחורות, ולהגיב במהירות לבעיות.

כאשר מנהלים צי של כלי רכב כמו משאיות, חשוב לדעת היכן כל רכב נמצא בזמן נתון. ניתן להתקין חיישני GPS בכלי הרכב, אשר שולחים את מיקומם למערכות IoT, ומאפשרים לבעלים לזהות את מיקומם, לראות את המסלול שעברו, ולדעת מתי יגיעו ליעדם. רוב כלי הרכב פועלים מחוץ לטווח כיסוי WiFi, ולכן הם משתמשים ברשתות סלולריות לשליחת נתונים מסוג זה. לעיתים חיישן ה-GPS מובנה במכשירי IoT מורכבים יותר, כמו יומני נסיעה אלקטרוניים. מכשירים אלו עוקבים אחר משך הזמן שבו משאית נמצאת בנסיעה כדי להבטיח שהנהגים עומדים בחוקי העבודה המקומיים.

בשיעור זה תלמדו כיצד לעקוב אחר מיקום כלי רכב באמצעות חיישן מערכת מיקום גלובלית (GPS).

בשיעור זה נעסוק ב:

* [כלי רכב מחוברים](../../../../../3-transport/lessons/1-location-tracking)
* [קואורדינטות גיאו-מרחביות](../../../../../3-transport/lessons/1-location-tracking)
* [מערכות מיקום גלובליות (GPS)](../../../../../3-transport/lessons/1-location-tracking)
* [קריאת נתוני חיישן GPS](../../../../../3-transport/lessons/1-location-tracking)
* [נתוני GPS בפורמט NMEA](../../../../../3-transport/lessons/1-location-tracking)
* [פענוח נתוני חיישן GPS](../../../../../3-transport/lessons/1-location-tracking)

## כלי רכב מחוברים

IoT משנה את הדרך שבה סחורות מועברות על ידי יצירת צי של *כלי רכב מחוברים*. כלי רכב אלו מחוברים למערכות IT מרכזיות ומדווחים על מיקומם ונתונים מחיישנים אחרים. לצי של כלי רכב מחוברים יש מגוון רחב של יתרונות:

* מעקב מיקום - ניתן לזהות היכן נמצא רכב בכל זמן נתון, מה שמאפשר:

  * לקבל התראות כאשר רכב עומד להגיע ליעד כדי להכין צוות לפריקה
  * לאתר כלי רכב גנובים
  * לשלב נתוני מיקום ומסלול עם בעיות תנועה כדי לאפשר ניתוב מחדש של כלי רכב במהלך הנסיעה
  * לעמוד בדרישות מס. במדינות מסוימות מחייבים כלי רכב על פי כמות הקילומטרים שנסעו בכבישים ציבוריים (כמו [RUC של ניו זילנד](https://www.nzta.govt.nz/vehicles/licensing-rego/road-user-charges/)), כך שידיעה מתי רכב נמצא בכבישים ציבוריים לעומת כבישים פרטיים מקלה על חישוב המס הנדרש.
  * לדעת היכן לשלוח צוותי תחזוקה במקרה של תקלה

* טלמטריית נהג - יכולת לוודא שהנהגים שומרים על מהירות מותרת, פונים במהירות מתאימה, בולמים בצורה מוקדמת ויעילה, ונוהגים בבטחה. כלי רכב מחוברים יכולים לכלול גם מצלמות להקלטת אירועים. ניתן לקשר זאת לביטוח, ולהעניק הנחות לנהגים טובים.

* עמידה בשעות נהיגה - הבטחת נהגים נוהגים רק בשעות המותרות להם על פי חוק, בהתבסס על זמני הדלקת וכיבוי המנוע.

יתרונות אלו יכולים להשתלב - לדוגמה, שילוב עמידה בשעות נהיגה עם מעקב מיקום כדי לנתב מחדש נהגים אם אינם יכולים להגיע ליעדם במסגרת שעות הנהיגה המותרות. ניתן גם לשלב זאת עם טלמטריה ייחודית לכלי רכב, כמו נתוני טמפרטורה ממשאיות מבוקרות טמפרטורה, כדי לנתב מחדש כלי רכב אם המסלול הנוכחי יגרום לכך שהסחורה לא תישמר בטמפרטורה הנדרשת.

> 🎓 לוגיסטיקה היא תהליך של הובלת סחורות ממקום למקום, כמו מחווה לסופרמרקט דרך מחסן אחד או יותר. חקלאי אורז ארגזי עגבניות שמועמסים על משאית, מועברים למחסן מרכזי, ומועמסים על משאית שנייה שיכולה להכיל תערובת של סוגי תוצרת שונים, שמועברים לאחר מכן לסופרמרקט.

הרכיב המרכזי במעקב אחר כלי רכב הוא GPS - חיישנים שיכולים לזהות את מיקומם בכל מקום על פני כדור הארץ. בשיעור זה תלמדו כיצד להשתמש בחיישן GPS, החל מלמידה על אופן הגדרת מיקום על פני כדור הארץ.

## קואורדינטות גיאו-מרחביות

קואורדינטות גיאו-מרחביות משמשות להגדרת נקודות על פני כדור הארץ, בדומה לאופן שבו ניתן להשתמש בקואורדינטות כדי לצייר פיקסל על מסך מחשב או למקם תפרים ברקמה. עבור נקודה בודדת, יש זוג קואורדינטות. לדוגמה, הקמפוס של מיקרוסופט ברדמונד, וושינגטון, ארה"ב ממוקם ב-47.6423109, -122.1390293.

### קווי רוחב ואורך

כדור הארץ הוא כדור - מעגל תלת-ממדי. בשל כך, נקודות מוגדרות על ידי חלוקתו ל-360 מעלות, בדומה לגיאומטריה של מעגלים. קו רוחב מודד את מספר המעלות מצפון לדרום, וקו אורך מודד את מספר המעלות ממזרח למערב.

> 💁 אף אחד לא באמת יודע את הסיבה המקורית לכך שמעגלים מחולקים ל-360 מעלות. [עמוד הוויקיפדיה על מעלה (זווית)](https://wikipedia.org/wiki/Degree_(angle)) מכסה כמה מהסיבות האפשריות.

![קווי רוחב מ-90° בקוטב הצפוני, 45° באמצע הדרך בין הקוטב הצפוני לקו המשווה, 0° בקו המשווה, -45° באמצע הדרך בין קו המשווה לקוטב הדרומי, ו-90° בקוטב הדרומי](../../../../../translated_images/latitude-lines.11d8d91dfb2014a57437272d7db7fd6607243098e8685f06e0c5f1ec984cb7eb.he.png)

קו רוחב נמדד באמצעות קווים שמקיפים את כדור הארץ ורצים במקביל לקו המשווה, ומחלקים את ההמיספרות הצפונית והדרומית ל-90° כל אחת. קו המשווה נמצא ב-0°, הקוטב הצפוני ב-90°, הידוע גם כ-90° צפון, והקוטב הדרומי ב--90°, או 90° דרום.

קו אורך נמדד כמספר המעלות ממזרח למערב. נקודת ה-0° של קו האורך נקראת *מרידיאן הראשי*, והיא הוגדרה בשנת 1884 כקו מהקוטב הצפוני לקוטב הדרומי שעובר דרך [מצפה הכוכבים המלכותי בגריניץ', אנגליה](https://wikipedia.org/wiki/Royal_Observatory,_Greenwich).

![קווי אורך שנעים מ--180° מערבית למרידיאן הראשי, ל-0° במרידיאן הראשי, ל-180° מזרחית למרידיאן הראשי](../../../../../translated_images/longitude-meridians.ab4ef1c91c064586b0185a3c8d39e585903696c6a7d28c098a93a629cddb5d20.he.png)

> 🎓 מרידיאן הוא קו דמיוני ישר שעובר מהקוטב הצפוני לקוטב הדרומי, ויוצר חצי מעגל.

כדי למדוד את קו האורך של נקודה, מודדים את מספר המעלות סביב קו המשווה מהמרידיאן הראשי למרידיאן שעובר דרך אותה נקודה. קו אורך נע מ--180°, או 180° מערב, דרך 0° במרידיאן הראשי, ל-180°, או 180° מזרח. 180° ו--180° מתייחסים לאותה נקודה, המרידיאן הנגדי או המרידיאן ה-180. זהו מרידיאן בצד הנגדי של כדור הארץ מהמרידיאן הראשי.

> 💁 המרידיאן הנגדי אינו זהה לקו התאריך הבינלאומי, שנמצא בערך באותו מיקום, אך אינו קו ישר ומשתנה כדי להתאים לגבולות גיאו-פוליטיים.

✅ בצעו מחקר: נסו למצוא את קו הרוחב והאורך של המיקום הנוכחי שלכם.

### מעלות, דקות ושניות לעומת מעלות עשרוניות

באופן מסורתי, מדידות של מעלות רוחב ואורך נעשו באמצעות מערכת מספרים סקסגסימלית, או בסיס-60, מערכת מספרים ששימשה את הבבלים הקדמונים שביצעו את המדידות הראשונות של זמן ומרחק. אתם משתמשים בבסיס-60 כל יום כנראה מבלי לשים לב - חלוקת שעות ל-60 דקות ומחלקות ל-60 שניות.

קו אורך ורוחב נמדדים במעלות, דקות ושניות, כאשר דקה אחת היא 1/60 של מעלה, ושנייה אחת היא 1/60 דקה.

לדוגמה, בקו המשווה:

* 1° של רוחב הוא **111.3 קילומטרים**
* דקה אחת של רוחב היא 111.3/60 = **1.855 קילומטרים**
* שנייה אחת של רוחב היא 1.855/60 = **0.031 קילומטרים**

הסמל לדקה הוא גרש אחד, ולשנייה שני גרשים. 2 מעלות, 17 דקות, ו-43 שניות, לדוגמה, ייכתבו כ-2°17'43". חלקי שניות ניתנים כעשרוניים, לדוגמה חצי שנייה היא 0°0'0.5".

מחשבים אינם עובדים בבסיס-60, ולכן קואורדינטות אלו ניתנות כמעלות עשרוניות כאשר משתמשים בנתוני GPS במערכות מחשב. לדוגמה, 2°17'43" הוא 2.295277. בדרך כלל סימן המעלה מושמט.

קואורדינטות לנקודה תמיד ניתנות כ-`רוחב, אורך`, כך שהדוגמה הקודמת של הקמפוס של מיקרוסופט ב-47.6423109,-122.117198 כוללת:

* רוחב של 47.6423109 (47.6423109 מעלות צפונית לקו המשווה)
* אורך של -122.1390293 (122.1390293 מעלות מערבית למרידיאן הראשי).

![הקמפוס של מיקרוסופט ב-47.6423109,-122.117198](../../../../../translated_images/microsoft-gps-location-world.a321d481b010f6adfcca139b2ba0adc53b79f58a540495b8e2ce7f779ea64bfe.he.png)

## מערכות מיקום גלובליות (GPS)

מערכות GPS משתמשות בלוויינים רבים שמקיפים את כדור הארץ כדי לאתר את מיקומכם. סביר להניח שכבר השתמשתם במערכות GPS מבלי לדעת - כדי למצוא את מיקומכם באפליקציית מפות בטלפון כמו Apple Maps או Google Maps, או כדי לראות היכן נמצא הרכב שלכם באפליקציית הזמנת נסיעות כמו Uber או Lyft, או בעת שימוש בניווט לווייני (sat-nav) ברכב שלכם.

> 🎓 הלוויינים ב"ניווט לווייני" הם לווייני GPS!

מערכות GPS פועלות על ידי כך שמספר לוויינים שולחים אות עם מיקומם הנוכחי של כל לוויין, וחותמת זמן מדויקת. אותות אלו נשלחים בגלי רדיו ומזוהים על ידי אנטנה בחיישן ה-GPS. חיישן GPS מזהה אותות אלו, ומשתמש בזמן הנוכחי כדי למדוד כמה זמן לקח לאות להגיע מהלוויין לחיישן. מכיוון שמהירות גלי הרדיו קבועה, חיישן ה-GPS יכול להשתמש בחותמת הזמן שנשלחה כדי לחשב כמה רחוק החיישן מהלוויין. על ידי שילוב הנתונים משלושה לוויינים לפחות עם המיקומים שנשלחו, חיישן ה-GPS מסוגל לזהות את מיקומו על פני כדור הארץ.

> 💁 חיישני GPS זקוקים לאנטנות כדי לזהות גלי רדיו. האנטנות המובנות במשאיות וברכבים עם GPS מובנה ממוקמות כך שיקבלו אות טוב, בדרך כלל על השמשה הקדמית או הגג. אם אתם משתמשים במערכת GPS נפרדת, כמו סמארטפון או מכשיר IoT, עליכם לוודא שהאנטנה המובנית במערכת ה-GPS או בטלפון נראית לשמיים, כמו התקנה על השמשה הקדמית.

![על ידי ידיעת המרחק מהחיישן למספר לוויינים, ניתן לחשב את המיקום](../../../../../translated_images/gps-satellites.04acf1148fe25fbf1586bc2e8ba698e8d79b79a50c36824b38417dd13372b90f.he.png)

לווייני GPS מקיפים את כדור הארץ, ולא נמצאים בנקודה קבועה מעל החיישן, ולכן נתוני מיקום כוללים גובה מעל פני הים בנוסף לרוחב ואורך.

למערכות GPS היו בעבר מגבלות דיוק שהוטלו על ידי הצבא האמריקאי, שהגבילו את הדיוק לכ-5 מטרים. מגבלה זו הוסרה בשנת 2000, מה שאיפשר דיוק של 30 סנטימטרים. השגת דיוק זה אינה תמיד אפשרית בשל הפרעות באותות.

✅ אם יש לכם סמארטפון, הפעילו את אפליקציית המפות ובדקו עד כמה המיקום שלכם מדויק. ייתכן שיידרש זמן קצר עד שהטלפון יזהה מספר לוויינים כדי לקבל מיקום מדויק יותר.
💁 הלוויינים מכילים שעונים אטומיים מדויקים להפליא, אך הם סוטים ב-38 מיקרו-שניות (0.0000038 שניות) ביום בהשוואה לשעונים אטומיים על כדור הארץ. זאת בשל האטת הזמן ככל שהמהירות עולה, כפי שנחזה בתיאוריות היחסות הפרטית והכללית של איינשטיין - הלוויינים נעים מהר יותר מסיבוב כדור הארץ. סטייה זו שימשה להוכחת התחזיות של תיאוריות היחסות הפרטית והכללית, ויש להתחשב בה בתכנון מערכות GPS. למעשה, הזמן נע לאט יותר על לוויין GPS.
מערכות GPS פותחו והופעלו על ידי מספר מדינות ואיחודים פוליטיים, כולל ארה"ב, רוסיה, יפן, הודו, האיחוד האירופי וסין. חיישני GPS מודרניים יכולים להתחבר לרוב המערכות הללו כדי לקבל מיקום מהיר ומדויק יותר.

> 🎓 קבוצות הלוויינים בכל מערכת מכונות "קונסטלציות".

## קריאת נתוני חיישן GPS

רוב חיישני ה-GPS שולחים נתוני GPS באמצעות UART.

> ⚠️ UART הוסבר ב-[פרויקט 2, שיעור 2](../../../2-farm/lessons/2-detect-soil-moisture/README.md#universal-asynchronous-receiver-transmitter-uart). חזרו לשיעור זה במידת הצורך.

ניתן להשתמש בחיישן GPS במכשיר ה-IoT שלכם כדי לקבל נתוני GPS.

### משימה - חיבור חיישן GPS וקריאת נתוני GPS

עברו על המדריך הרלוונטי כדי לקרוא נתוני GPS באמצעות מכשיר ה-IoT שלכם:

* [Arduino - Wio Terminal](wio-terminal-gps-sensor.md)
* [מחשב חד-לוח - Raspberry Pi](pi-gps-sensor.md)
* [מחשב חד-לוח - מכשיר וירטואלי](virtual-device-gps-sensor.md)

## נתוני GPS בפורמט NMEA

כאשר הרצתם את הקוד שלכם, ייתכן שראיתם פלט שנראה כמו ג'יבריש. למעשה, מדובר בנתוני GPS סטנדרטיים, ולכל חלק בהם יש משמעות.

חיישני GPS מפיקים נתונים באמצעות הודעות NMEA, לפי תקן NMEA 0183. NMEA הוא ראשי תיבות של [National Marine Electronics Association](https://www.nmea.org), ארגון מסחרי אמריקאי שקובע תקנים לתקשורת בין מכשירים אלקטרוניים ימיים.

> 💁 תקן זה הוא קנייני ועולה לפחות 2,000 דולר, אך מספיק מידע עליו נמצא בתחום הציבורי כך שרובו פוענח וניתן לשימוש בקוד פתוח ובקוד שאינו מסחרי.

הודעות אלו מבוססות טקסט. כל הודעה מורכבת מ-*משפט* שמתחיל בתו `$`, ואחריו 2 תווים שמציינים את מקור ההודעה (למשל GP עבור מערכת ה-GPS האמריקאית, GN עבור GLONASS, מערכת ה-GPS הרוסית), ו-3 תווים שמציינים את סוג ההודעה. שאר ההודעה מורכבת משדות המופרדים בפסיקים, ומסתיימת בתו שורה חדשה.

חלק מסוגי ההודעות שניתן לקבל הם:

| סוג | תיאור |
| ---- | ----------- |
| GGA | נתוני מיקום GPS, כולל קו רוחב, קו אורך וגובה של חיישן ה-GPS, יחד עם מספר הלוויינים הנראים לצורך חישוב המיקום. |
| ZDA | התאריך והשעה הנוכחיים, כולל אזור הזמן המקומי |
| GSV | פרטים על הלוויינים הנראים - מוגדרים כלוויינים שחיישן ה-GPS יכול לזהות מהם אותות |

> 💁 נתוני GPS כוללים חותמות זמן, כך שמכשיר ה-IoT שלכם יכול לקבל את השעה מחיישן GPS במידת הצורך, במקום להסתמך על שרת NTP או שעון זמן אמת פנימי.

הודעת GGA כוללת את המיקום הנוכחי בפורמט `(dd)dmm.mmmm`, יחד עם תו יחיד שמציין כיוון. ה-`d` בפורמט הוא מעלות, ה-`m` הוא דקות, והשניות מופיעות כעשרוניות של דקות. לדוגמה, 2°17'43" יהיה 217.716666667 - 2 מעלות, 17.716666667 דקות.

תו הכיוון יכול להיות `N` או `S` עבור קו רוחב כדי לציין צפון או דרום, ו-`E` או `W` עבור קו אורך כדי לציין מזרח או מערב. לדוגמה, קו רוחב של 2°17'43" יהיה עם תו כיוון `N`, וקו רוחב של -2°17'43" יהיה עם תו כיוון `S`.

לדוגמה - המשפט NMEA `$GNGGA,020604.001,4738.538654,N,12208.341758,W,1,3,,164.7,M,-17.1,M,,*67`

* חלק קו הרוחב הוא `4738.538654,N`, שמומר ל-47.6423109 במעלות עשרוניות. `4738.538654` הוא 47.6423109, והכיוון הוא `N` (צפון), כך שזהו קו רוחב חיובי.

* חלק קו האורך הוא `12208.341758,W`, שמומר ל--122.1390293 במעלות עשרוניות. `12208.341758` הוא 122.1390293°, והכיוון הוא `W` (מערב), כך שזהו קו אורך שלילי.

## פענוח נתוני חיישן GPS

במקום להשתמש בנתוני NMEA גולמיים, עדיף לפענח אותם לפורמט שימושי יותר. קיימות ספריות קוד פתוח רבות שיכולות לעזור לחלץ נתונים שימושיים מהודעות NMEA הגולמיות.

### משימה - פענוח נתוני חיישן GPS

עברו על המדריך הרלוונטי כדי לפענח נתוני חיישן GPS באמצעות מכשיר ה-IoT שלכם:

* [Arduino - Wio Terminal](wio-terminal-gps-decode.md)
* [מחשב חד-לוח - Raspberry Pi/מכשיר IoT וירטואלי](single-board-computer-gps-decode.md)

---

## 🚀 אתגר

כתבו מפענח NMEA משלכם! במקום להסתמך על ספריות צד שלישי לפענוח משפטי NMEA, האם תוכלו לכתוב מפענח משלכם שיחלץ קו רוחב וקו אורך ממשפטי NMEA?

## חידון לאחר ההרצאה

[חידון לאחר ההרצאה](https://black-meadow-040d15503.1.azurestaticapps.net/quiz/22)

## סקירה ולימוד עצמי

* קראו עוד על קואורדינטות גיאוגרפיות בעמוד [Geographic coordinate system בויקיפדיה](https://wikipedia.org/wiki/Geographic_coordinate_system).
* קראו על מרידיאנים ראשיים בגופים שמימיים אחרים מלבד כדור הארץ בעמוד [Prime Meridian בויקיפדיה](https://wikipedia.org/wiki/Prime_meridian#Prime_meridian_on_other_planetary_bodies).
* חקרו את מערכות ה-GPS השונות של ממשלות ואיחודים פוליטיים שונים כמו האיחוד האירופי, יפן, רוסיה, הודו וארה"ב.

## משימה

[חקירת נתוני GPS נוספים](assignment.md)

---

**כתב ויתור**:  
מסמך זה תורגם באמצעות שירות תרגום מבוסס בינה מלאכותית [Co-op Translator](https://github.com/Azure/co-op-translator). למרות שאנו שואפים לדיוק, יש להיות מודעים לכך שתרגומים אוטומטיים עשויים להכיל שגיאות או אי דיוקים. המסמך המקורי בשפתו המקורית צריך להיחשב כמקור סמכותי. עבור מידע קריטי, מומלץ להשתמש בתרגום מקצועי על ידי אדם. איננו נושאים באחריות לאי הבנות או לפרשנויות שגויות הנובעות משימוש בתרגום זה.