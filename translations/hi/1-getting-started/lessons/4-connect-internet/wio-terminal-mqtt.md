<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "d6faf0e8d3c2d6d20c0aef2a305dab18",
  "translation_date": "2025-08-25T17:18:12+00:00",
  "source_file": "1-getting-started/lessons/4-connect-internet/wio-terminal-mqtt.md",
  "language_code": "hi"
}
-->
# рдЗрдВрдЯрд░рдиреЗрдЯ рдХреЗ рдЬрд░рд┐рдП рдЕрдкрдиреА рдирд╛рдЗрдЯрд▓рд╛рдЗрдЯ рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░реЗрдВ - Wio Terminal

IoT рдбрд┐рд╡рд╛рдЗрд╕ рдХреЛ *test.mosquitto.org* рдХреЗ рд╕рд╛рде MQTT рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЯреЗрд▓реАрдореЗрдЯреНрд░реА рдбреЗрдЯрд╛ рднреЗрдЬрдиреЗ рдФрд░ рд▓рд╛рдЗрдЯ рд╕реЗрдВрд╕рд░ рд░реАрдбрд┐рдВрдЧ рдХреЗ рд╕рд╛рде LED рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрдорд╛рдВрдб рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреЛрдб рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред

рдЗрд╕ рдкрд╛рда рдХреЗ рдЗрд╕ рднрд╛рдЧ рдореЗрдВ, рдЖрдк рдЕрдкрдиреЗ Wio Terminal рдХреЛ рдПрдХ MQTT рдмреНрд░реЛрдХрд░реНрд╕ рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░реЗрдВрдЧреЗред

## WiFi рдФрд░ MQTT Arduino рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдВ

MQTT рдмреНрд░реЛрдХрд░реНрд╕ рдХреЗ рд╕рд╛рде рд╕рдВрд╡рд╛рдж рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рдХреБрдЫ Arduino рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░рдиреА рд╣реЛрдВрдЧреА рддрд╛рдХрд┐ Wio Terminal рдХреЗ WiFi рдЪрд┐рдк рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХреЗ рдФрд░ MQTT рдХреЗ рд╕рд╛рде рд╕рдВрд╡рд╛рдж рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХреЗред Arduino рдбрд┐рд╡рд╛рдЗрд╕реЛрдВ рдХреЗ рд▓рд┐рдП рд╡рд┐рдХрд╛рд╕ рдХрд░рддреЗ рд╕рдордп, рдЖрдк рдХрдИ рдкреНрд░рдХрд╛рд░ рдХреА рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдЬреЛ рдУрдкрди-рд╕реЛрд░реНрд╕ рдХреЛрдб рдкреНрд░рджрд╛рди рдХрд░рддреА рд╣реИрдВ рдФрд░ рдХрдИ рдХреНрд╖рдорддрд╛рдУрдВ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рддреА рд╣реИрдВред Seeed Wio Terminal рдХреЗ рд▓рд┐рдП рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдкреНрд░рдХрд╛рд╢рд┐рдд рдХрд░рддрд╛ рд╣реИ, рдЬреЛ рдЗрд╕реЗ WiFi рдХреЗ рдЬрд░рд┐рдП рд╕рдВрд╡рд╛рдж рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреА рд╣реИрдВред рдЕрдиреНрдп рдбреЗрд╡рд▓рдкрд░реНрд╕ рдиреЗ MQTT рдмреНрд░реЛрдХрд░реНрд╕ рдХреЗ рд╕рд╛рде рд╕рдВрд╡рд╛рдж рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдкреНрд░рдХрд╛рд╢рд┐рдд рдХреА рд╣реИрдВ, рдФрд░ рдЖрдк рдЕрдкрдиреЗ рдбрд┐рд╡рд╛рдЗрд╕ рдХреЗ рд╕рд╛рде рдЗрдирдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВрдЧреЗред

рдпреЗ рд▓рд╛рдЗрдмреНрд░реЗрд░реА рд╕реЛрд░реНрд╕ рдХреЛрдб рдХреЗ рд░реВрдк рдореЗрдВ рдкреНрд░рджрд╛рди рдХреА рдЬрд╛рддреА рд╣реИрдВ, рдЬрд┐рдиреНрд╣реЗрдВ PlatformIO рдореЗрдВ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдЖрдпрд╛рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рдФрд░ рдЖрдкрдХреЗ рдбрд┐рд╡рд╛рдЗрд╕ рдХреЗ рд▓рд┐рдП рд╕рдВрдХрд▓рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред рдЗрд╕ рддрд░рд╣ Arduino рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдХрд┐рд╕реА рднреА рдбрд┐рд╡рд╛рдЗрд╕ рдкрд░ рдХрд╛рдо рдХрд░реЗрдВрдЧреА рдЬреЛ Arduino рдлреНрд░реЗрдорд╡рд░реНрдХ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддреА рд╣реИ, рдмрд╢рд░реНрддреЗ рдХрд┐ рдбрд┐рд╡рд╛рдЗрд╕ рдореЗрдВ рдЙрд╕ рд▓рд╛рдЗрдмреНрд░реЗрд░реА рджреНрд╡рд╛рд░рд╛ рдЖрд╡рд╢реНрдпрдХ рдХреЛрдИ рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ рд╣реЛред рдХреБрдЫ рд▓рд╛рдЗрдмреНрд░реЗрд░реА, рдЬреИрд╕реЗ Seeed WiFi рд▓рд╛рдЗрдмреНрд░реЗрд░реА, рдХреБрдЫ рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ рдХреЗ рд▓рд┐рдП рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╣реЛрддреА рд╣реИрдВред

рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдХреЛ рд╡реИрд╢реНрд╡рд┐рдХ рд░реВрдк рд╕реЗ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рдФрд░ рдЖрд╡рд╢реНрдпрдХрддрд╛ рдкрдбрд╝рдиреЗ рдкрд░ рд╕рдВрдХрд▓рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдпрд╛ рдХрд┐рд╕реА рд╡рд┐рд╢рд┐рд╖реНрдЯ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдореЗрдВред рдЗрд╕ рдЕрд╕рд╛рдЗрдирдореЗрдВрдЯ рдХреЗ рд▓рд┐рдП, рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдореЗрдВ рдЗрдВрд╕реНрдЯреЙрд▓ рдХреА рдЬрд╛рдПрдВрдЧреАред

тЬЕ рдЖрдк рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдкреНрд░рдмрдВрдзрди рдФрд░ рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдЦреЛрдЬрдиреЗ рдФрд░ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░рдиреЗ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реА [PlatformIO рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдбрд╛рдХреНрдпреВрдореЗрдВрдЯреЗрд╢рди](https://docs.platformio.org/en/latest/librarymanager/index.html) рдореЗрдВ рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

### рдХрд╛рд░реНрдп - WiFi рдФрд░ MQTT Arduino рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдВ

Arduino рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдВред

1. VS Code рдореЗрдВ рдирд╛рдЗрдЯрд▓рд╛рдЗрдЯ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдЦреЛрд▓реЗрдВред

1. `platformio.ini` рдлрд╛рдЗрд▓ рдХреЗ рдЕрдВрдд рдореЗрдВ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдЬреЛрдбрд╝реЗрдВ:

    ```ini
    lib_deps =
        seeed-studio/Seeed Arduino rpcWiFi @ 1.0.5
        seeed-studio/Seeed Arduino FS @ 2.1.1
        seeed-studio/Seeed Arduino SFUD @ 2.0.2
        seeed-studio/Seeed Arduino rpcUnified @ 2.1.3
        seeed-studio/Seeed_Arduino_mbedtls @ 3.0.1
    ```

    рдпрд╣ Seeed WiFi рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдЖрдпрд╛рдд рдХрд░рддрд╛ рд╣реИред `@ <number>` рд╕рд┐рдВрдЯреИрдХреНрд╕ рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдХреЗ рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╕рдВрд╕реНрдХрд░рдг рд╕рдВрдЦреНрдпрд╛ рдХреЛ рд╕рдВрджрд░реНрднрд┐рдд рдХрд░рддрд╛ рд╣реИред

    > ЁЯТБ рдЖрдк рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдХреЗ рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП `@ <number>` рд╣рдЯрд╛ рд╕рдХрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдпрд╣ рдЧрд╛рд░рдВрдЯреА рдирд╣реАрдВ рд╣реИ рдХрд┐ рдмрд╛рдж рдХреЗ рд╕рдВрд╕реНрдХрд░рдг рдиреАрдЪреЗ рджрд┐рдП рдЧрдП рдХреЛрдб рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░реЗрдВрдЧреЗред рдпрд╣рд╛рдВ рджрд┐рдпрд╛ рдЧрдпрд╛ рдХреЛрдб рдЗрд╕ рд╕рдВрд╕реНрдХрд░рдг рдХреЗ рд╕рд╛рде рдкрд░реАрдХреНрд╖рдг рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред

    рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдЬреЛрдбрд╝рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдкрдХреЛ рдмрд╕ рдЗрддрдирд╛ рд╣реА рдХрд░рдирд╛ рд╣реИред рдЕрдЧрд▓реА рдмрд╛рд░ рдЬрдм PlatformIO рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХреЛ рдмрдирд╛рдПрдЧрд╛, рддреЛ рдпрд╣ рдЗрди рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдХреЗ рд▓рд┐рдП рд╕реЛрд░реНрд╕ рдХреЛрдб рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдЧрд╛ рдФрд░ рдЗрд╕реЗ рдЖрдкрдХреЗ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдореЗрдВ рд╕рдВрдХрд▓рд┐рдд рдХрд░реЗрдЧрд╛ред

1. `lib_deps` рдореЗрдВ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдЬреЛрдбрд╝реЗрдВ:

    ```ini
    knolleary/PubSubClient @ 2.8
    ```

    рдпрд╣ [PubSubClient](https://github.com/knolleary/pubsubclient), рдПрдХ Arduino MQTT рдХреНрд▓рд╛рдЗрдВрдЯ рдЖрдпрд╛рдд рдХрд░рддрд╛ рд╣реИред

## WiFi рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░реЗрдВ

рдЕрдм Wio Terminal рдХреЛ WiFi рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред

### рдХрд╛рд░реНрдп - WiFi рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░реЗрдВ

Wio Terminal рдХреЛ WiFi рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░реЗрдВред

1. `src` рдлреЛрд▓реНрдбрд░ рдореЗрдВ `config.h` рдирд╛рдордХ рдПрдХ рдирдИ рдлрд╛рдЗрд▓ рдмрдирд╛рдПрдВред рдЖрдк рдРрд╕рд╛ `src` рдлреЛрд▓реНрдбрд░ рдпрд╛ рдЙрд╕рдХреЗ рдЕрдВрджрд░ `main.cpp` рдлрд╛рдЗрд▓ рдХрд╛ рдЪрдпрди рдХрд░рдХреЗ рдФрд░ рдПрдХреНрд╕рдкреНрд▓реЛрд░рд░ рд╕реЗ **New file** рдмрдЯрди рдХрд╛ рдЪрдпрди рдХрд░рдХреЗ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдпрд╣ рдмрдЯрди рдХреЗрд╡рд▓ рддрдм рджрд┐рдЦрд╛рдИ рджреЗрддрд╛ рд╣реИ рдЬрдм рдЖрдкрдХрд╛ рдХрд░реНрд╕рд░ рдПрдХреНрд╕рдкреНрд▓реЛрд░рд░ рдкрд░ рд╣реЛрддрд╛ рд╣реИред

    ![рдирдпрд╛ рдлрд╛рдЗрд▓ рдмрдЯрди](../../../../../translated_images/vscode-new-file-button.182702340fe6723c8cbb4cfa1a9a9fb0d0a5227643b4e46b91ff67b07a39a92f.hi.png)

1. рдЗрд╕ рдлрд╛рдЗрд▓ рдореЗрдВ рдЕрдкрдиреЗ WiFi рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕ рдХреЗ рд▓рд┐рдП рдХреЙрдиреНрд╕реНрдЯреЗрдВрдЯреНрд╕ рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреЛрдб рдЬреЛрдбрд╝реЗрдВ:

    ```cpp
    #pragma once

    #include <string>
    
    using namespace std;
    
    // WiFi credentials
    const char *SSID = "<SSID>";
    const char *PASSWORD = "<PASSWORD>";
    ```

    `<SSID>` рдХреЛ рдЕрдкрдиреЗ WiFi рдХреЗ SSID рд╕реЗ рдмрджрд▓реЗрдВред `<PASSWORD>` рдХреЛ рдЕрдкрдиреЗ WiFi рдкрд╛рд╕рд╡рд░реНрдб рд╕реЗ рдмрджрд▓реЗрдВред

1. `main.cpp` рдлрд╛рдЗрд▓ рдЦреЛрд▓реЗрдВред

1. рдлрд╛рдЗрд▓ рдХреЗ рд╢реАрд░реНрд╖ рдкрд░ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд `#include` рдирд┐рд░реНрджреЗрд╢ рдЬреЛрдбрд╝реЗрдВ:

    ```cpp
    #include <PubSubClient.h>
    #include <rpcWiFi.h>
    #include <SPI.h>
    
    #include "config.h"
    ```

    рдпрд╣ рдЙрди рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдХреЗ рд╣реЗрдбрд░ рдлрд╛рдЗрд▓реНрд╕ рдХреЛ рд╢рд╛рдорд┐рд▓ рдХрд░рддрд╛ рд╣реИ рдЬрд┐рдиреНрд╣реЗрдВ рдЖрдкрдиреЗ рдкрд╣рд▓реЗ рдЬреЛрдбрд╝рд╛ рдерд╛, рд╕рд╛рде рд╣реА рдХреЙрдиреНрдлрд╝рд┐рдЧ рд╣реЗрдбрд░ рдлрд╛рдЗрд▓ рдХреЛ рднреАред рдпреЗ рд╣реЗрдбрд░ рдлрд╛рдЗрд▓реНрд╕ PlatformIO рдХреЛ рд▓рд╛рдЗрдмреНрд░реЗрд░реА рд╕реЗ рдХреЛрдб рд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╣реИрдВред рдЗрди рд╣реЗрдбрд░ рдлрд╛рдЗрд▓реНрд╕ рдХреЛ рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рд╢рд╛рдорд┐рд▓ рдХрд┐рдП рдмрд┐рдирд╛, рдХреБрдЫ рдХреЛрдб рд╕рдВрдХрд▓рд┐рдд рдирд╣реАрдВ рд╣реЛрдЧрд╛ рдФрд░ рдЖрдкрдХреЛ рдХрдВрдкрд╛рдЗрд▓рд░ рддреНрд░реБрдЯрд┐рдпрд╛рдВ рдорд┐рд▓реЗрдВрдЧреАред

1. `setup` рдлрдВрдХреНрд╢рди рдХреЗ рдКрдкрд░ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреЛрдб рдЬреЛрдбрд╝реЗрдВ:

    ```cpp
    void connectWiFi()
    {
        while (WiFi.status() != WL_CONNECTED)
        {
            Serial.println("Connecting to WiFi..");
            WiFi.begin(SSID, PASSWORD);
            delay(500);
        }
    
        Serial.println("Connected!");
    }
    ```

    рдпрд╣ рдХреЛрдб рддрдм рддрдХ рд▓реВрдк рдХрд░рддрд╛ рд╣реИ рдЬрдм рддрдХ рдбрд┐рд╡рд╛рдЗрд╕ WiFi рд╕реЗ рдХрдиреЗрдХреНрдЯ рдирд╣реАрдВ рд╣реЛ рдЬрд╛рддрд╛, рдФрд░ SSID рдФрд░ рдкрд╛рд╕рд╡рд░реНрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдХрдиреЗрдХреНрдЯ рдХрд░рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░рддрд╛ рд╣реИред

1. рдкрд┐рдиреНрд╕ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж `setup` рдлрдВрдХреНрд╢рди рдХреЗ рдиреАрдЪреЗ рдЗрд╕ рдлрдВрдХреНрд╢рди рдХреЛ рдХреЙрд▓ рдХрд░реЗрдВ:

    ```cpp
    connectWiFi();
    ```

1. рдЗрд╕ рдХреЛрдб рдХреЛ рдЕрдкрдиреЗ рдбрд┐рд╡рд╛рдЗрд╕ рдкрд░ рдЕрдкрд▓реЛрдб рдХрд░реЗрдВ рдФрд░ рдЬрд╛рдВрдЪреЗрдВ рдХрд┐ WiFi рдХрдиреЗрдХреНрд╢рди рдХрд╛рдо рдХрд░ рд░рд╣рд╛ рд╣реИред рдЖрдкрдХреЛ рд╕реАрд░рд┐рдпрд▓ рдореЙрдирд┐рдЯрд░ рдореЗрдВ рдпрд╣ рджреЗрдЦрдирд╛ рдЪрд╛рд╣рд┐рдП:

    ```output
    > Executing task: platformio device monitor <
    
    --- Available filters and text transformations: colorize, debug, default, direct, hexlify, log2file, nocontrol, printable, send_on_enter, time
    --- More details at http://bit.ly/pio-monitor-filters
    --- Miniterm on /dev/cu.usbmodem1101  9600,8,N,1 ---
    --- Quit: Ctrl+C | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H ---
    Connecting to WiFi..
    Connected!
    ```

## MQTT рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░реЗрдВ

WiFi рд╕реЗ рдХрдиреЗрдХреНрдЯ рд╣реЛрдиреЗ рдХреЗ рдмрд╛рдж, Wio Terminal MQTT рдмреНрд░реЛрдХрд░реНрд╕ рд╕реЗ рдХрдиреЗрдХреНрдЯ рд╣реЛ рд╕рдХрддрд╛ рд╣реИред

### рдХрд╛рд░реНрдп - MQTT рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░реЗрдВ

MQTT рдмреНрд░реЛрдХрд░реНрд╕ рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░реЗрдВред

1. MQTT рдмреНрд░реЛрдХрд░реНрд╕ рдХреЗ рдХрдиреЗрдХреНрд╢рди рд╡рд┐рд╡рд░рдг рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП `config.h` рдлрд╛рдЗрд▓ рдХреЗ рдЕрдВрдд рдореЗрдВ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреЛрдб рдЬреЛрдбрд╝реЗрдВ:

    ```cpp
    // MQTT settings
    const string ID = "<ID>";
    
    const string BROKER = "test.mosquitto.org";
    const string CLIENT_NAME = ID + "nightlight_client";
    ```

    `<ID>` рдХреЛ рдПрдХ рдпреВрдирд┐рдХ ID рд╕реЗ рдмрджрд▓реЗрдВ, рдЬреЛ рдЗрд╕ рдбрд┐рд╡рд╛рдЗрд╕ рдХреНрд▓рд╛рдЗрдВрдЯ рдХрд╛ рдирд╛рдо рд╣реЛрдЧрд╛ рдФрд░ рдмрд╛рдж рдореЗрдВ рдЙрди рдЯреЙрдкрд┐рдХреНрд╕ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ рдЬрд┐рдиреНрд╣реЗрдВ рдпрд╣ рдбрд┐рд╡рд╛рдЗрд╕ рдкреНрд░рдХрд╛рд╢рд┐рдд рдФрд░ рд╕рдмреНрд╕рдХреНрд░рд╛рдЗрдм рдХрд░реЗрдЧрд╛ред *test.mosquitto.org* рдмреНрд░реЛрдХрд░реНрд╕ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рд╣реИ рдФрд░ рдХрдИ рд▓реЛрдЧ рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ, рдЬрд┐рдирдореЗрдВ рдЗрд╕ рдЕрд╕рд╛рдЗрдирдореЗрдВрдЯ рдкрд░ рдХрд╛рдо рдХрд░ рд░рд╣реЗ рдЕрдиреНрдп рдЫрд╛рддреНрд░ рднреА рд╢рд╛рдорд┐рд▓ рд╣реИрдВред рдПрдХ рдпреВрдирд┐рдХ MQTT рдХреНрд▓рд╛рдЗрдВрдЯ рдирд╛рдо рдФрд░ рдЯреЙрдкрд┐рдХ рдирд╛рдо рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рддрд╛ рд╣реИ рдХрд┐ рдЖрдкрдХрд╛ рдХреЛрдб рдХрд┐рд╕реА рдФрд░ рдХреЗ рдХреЛрдб рд╕реЗ рдЯрдХрд░рд╛рдПрдЧрд╛ рдирд╣реАрдВред рдЖрдкрдХреЛ рдЗрд╕ ID рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдмрд╛рдж рдореЗрдВ рд╕рд░реНрд╡рд░ рдХреЛрдб рдмрдирд╛рддреЗ рд╕рдордп рднреА рд╣реЛрдЧреАред

    > ЁЯТБ рдЖрдк [GUIDGen](https://www.guidgen.com) рдЬреИрд╕реА рд╡реЗрдмрд╕рд╛рдЗрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХ рдпреВрдирд┐рдХ ID рдЬрдирд░реЗрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

    `BROKER` MQTT рдмреНрд░реЛрдХрд░реНрд╕ рдХрд╛ URL рд╣реИред

    `CLIENT_NAME` рдЗрд╕ MQTT рдХреНрд▓рд╛рдЗрдВрдЯ рдХрд╛ рдмреНрд░реЛрдХрд░реНрд╕ рдкрд░ рдПрдХ рдпреВрдирд┐рдХ рдирд╛рдо рд╣реИред

1. `main.cpp` рдлрд╛рдЗрд▓ рдЦреЛрд▓реЗрдВ, рдФрд░ `connectWiFi` рдлрдВрдХреНрд╢рди рдХреЗ рдиреАрдЪреЗ рдФрд░ `setup` рдлрдВрдХреНрд╢рди рдХреЗ рдКрдкрд░ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреЛрдб рдЬреЛрдбрд╝реЗрдВ:

    ```cpp
    WiFiClient wioClient;
    PubSubClient client(wioClient);
    ```

    рдпрд╣ рдХреЛрдб Wio Terminal WiFi рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХ WiFi рдХреНрд▓рд╛рдЗрдВрдЯ рдмрдирд╛рддрд╛ рд╣реИ рдФрд░ рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдПрдХ MQTT рдХреНрд▓рд╛рдЗрдВрдЯ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд░рддрд╛ рд╣реИред

1. рдЗрд╕ рдХреЛрдб рдХреЗ рдиреАрдЪреЗ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдЬреЛрдбрд╝реЗрдВ:

    ```cpp
    void reconnectMQTTClient()
    {
        while (!client.connected())
        {
            Serial.print("Attempting MQTT connection...");
    
            if (client.connect(CLIENT_NAME.c_str()))
            {
                Serial.println("connected");
            }
            else
            {
                Serial.print("Retying in 5 seconds - failed, rc=");
                Serial.println(client.state());
                
                delay(5000);
            }
        }
    }
    ```

    рдпрд╣ рдлрдВрдХреНрд╢рди MQTT рдмреНрд░реЛрдХрд░реНрд╕ рд╕реЗ рдХрдиреЗрдХреНрд╢рди рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд░рддрд╛ рд╣реИ рдФрд░ рдпрджрд┐ рдХрдиреЗрдХреНрдЯреЗрдб рдирд╣реАрдВ рд╣реИ рддреЛ рдлрд┐рд░ рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░рддрд╛ рд╣реИред рдпрд╣ рддрдм рддрдХ рд▓реВрдк рдХрд░рддрд╛ рд╣реИ рдЬрдм рддрдХ рдпрд╣ рдХрдиреЗрдХреНрдЯ рдирд╣реАрдВ рд╣реЛ рдЬрд╛рддрд╛ рдФрд░ рдХреЙрдиреНрдлрд╝рд┐рдЧ рд╣реЗрдбрд░ рдлрд╛рдЗрд▓ рдореЗрдВ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдпреВрдирд┐рдХ рдХреНрд▓рд╛рдЗрдВрдЯ рдирд╛рдо рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдХрдиреЗрдХреНрдЯ рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░рддрд╛ рд╣реИред

    рдпрджрд┐ рдХрдиреЗрдХреНрд╢рди рд╡рд┐рдлрд▓ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдпрд╣ 5 рд╕реЗрдХрдВрдб рдмрд╛рдж рдлрд┐рд░ рд╕реЗ рдкреНрд░рдпрд╛рд╕ рдХрд░рддрд╛ рд╣реИред

1. `reconnectMQTTClient` рдлрдВрдХреНрд╢рди рдХреЗ рдиреАрдЪреЗ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреЛрдб рдЬреЛрдбрд╝реЗрдВ:

    ```cpp
    void createMQTTClient()
    {
        client.setServer(BROKER.c_str(), 1883);
        reconnectMQTTClient();
    }
    ```

    рдпрд╣ рдХреЛрдб рдХреНрд▓рд╛рдЗрдВрдЯ рдХреЗ рд▓рд┐рдП MQTT рдмреНрд░реЛрдХрд░реНрд╕ рд╕реЗрдЯ рдХрд░рддрд╛ рд╣реИ, рд╕рд╛рде рд╣реА рдПрдХ рдХреЙрд▓рдмреИрдХ рд╕реЗрдЯ рдХрд░рддрд╛ рд╣реИ рдЬрдм рдХреЛрдИ рд╕рдВрджреЗрд╢ рдкреНрд░рд╛рдкреНрдд рд╣реЛрддрд╛ рд╣реИред рдлрд┐рд░ рдпрд╣ рдмреНрд░реЛрдХрд░реНрд╕ рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░рддрд╛ рд╣реИред

1. WiFi рдХрдиреЗрдХреНрдЯ рд╣реЛрдиреЗ рдХреЗ рдмрд╛рдж `setup` рдлрдВрдХреНрд╢рди рдореЗрдВ `createMQTTClient` рдлрдВрдХреНрд╢рди рдХреЛ рдХреЙрд▓ рдХрд░реЗрдВред

1. рдкреВрд░реЗ `loop` рдлрдВрдХреНрд╢рди рдХреЛ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╕реЗ рдмрджрд▓реЗрдВ:

    ```cpp
    void loop()
    {
        reconnectMQTTClient();
        client.loop();
    
        delay(2000);
    }
    ```

    рдпрд╣ рдХреЛрдб MQTT рдмреНрд░реЛрдХрд░реНрд╕ рд╕реЗ рдлрд┐рд░ рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░рддрд╛ рд╣реИред рдпреЗ рдХрдиреЗрдХреНрд╢рди рдЖрд╕рд╛рдиреА рд╕реЗ рдЯреВрдЯ рд╕рдХрддреЗ рд╣реИрдВ, рдЗрд╕рд▓рд┐рдП рдирд┐рдпрдорд┐рдд рд░реВрдк рд╕реЗ рдЬрд╛рдВрдЪрдирд╛ рдФрд░ рдЖрд╡рд╢реНрдпрдХрддрд╛ рдкрдбрд╝рдиреЗ рдкрд░ рдлрд┐рд░ рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░рдирд╛ рдЙрдЪрд┐рдд рд╣реИред рдлрд┐рд░ рдпрд╣ MQTT рдХреНрд▓рд╛рдЗрдВрдЯ рдкрд░ `loop` рдореЗрдердб рдХреЛ рдХреЙрд▓ рдХрд░рддрд╛ рд╣реИ рддрд╛рдХрд┐ рдХрд┐рд╕реА рднреА рд╕рдВрджреЗрд╢ рдХреЛ рдкреНрд░реЛрд╕реЗрд╕ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХреЗ рдЬреЛ рд╕рдмреНрд╕рдХреНрд░рд╛рдЗрдм рдХрд┐рдП рдЧрдП рдЯреЙрдкрд┐рдХ рдкрд░ рдЖ рд░рд╣реЗ рд╣реИрдВред рдпрд╣ рдРрдк рд╕рд┐рдВрдЧрд▓-рдереНрд░реЗрдбреЗрдб рд╣реИ, рдЗрд╕рд▓рд┐рдП рд╕рдВрджреЗрд╢ рдмреИрдХрдЧреНрд░рд╛рдЙрдВрдб рдереНрд░реЗрдб рдкрд░ рдкреНрд░рд╛рдкреНрдд рдирд╣реАрдВ рдХрд┐рдП рдЬрд╛ рд╕рдХрддреЗ, рдЗрд╕рд▓рд┐рдП рдореБрдЦреНрдп рдереНрд░реЗрдб рдкрд░ рдиреЗрдЯрд╡рд░реНрдХ рдХрдиреЗрдХреНрд╢рди рдкрд░ рдкреНрд░рддреАрдХреНрд╖рд╛ рдХрд░ рд░рд╣реЗ рдХрд┐рд╕реА рднреА рд╕рдВрджреЗрд╢ рдХреЛ рдкреНрд░реЛрд╕реЗрд╕ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдордп рдЖрд╡рдВрдЯрд┐рдд рдХрд░рдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИред

    рдЕрдВрдд рдореЗрдВ, 2 рд╕реЗрдХрдВрдб рдХреА рджреЗрд░реА рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рддреА рд╣реИ рдХрд┐ рд▓рд╛рдЗрдЯ рд▓реЗрд╡рд▓ рдмрд╣реБрдд рдмрд╛рд░ рдирд╣реАрдВ рднреЗрдЬреЗ рдЬрд╛рддреЗ рдФрд░ рдбрд┐рд╡рд╛рдЗрд╕ рдХреА рдкрд╛рд╡рд░ рдЦрдкрдд рдХрдо рд╣реЛ рдЬрд╛рддреА рд╣реИред

1. рдХреЛрдб рдХреЛ рдЕрдкрдиреЗ Wio Terminal рдкрд░ рдЕрдкрд▓реЛрдб рдХрд░реЗрдВ, рдФрд░ рдбрд┐рд╡рд╛рдЗрд╕ рдХреЛ WiFi рдФрд░ MQTT рд╕реЗ рдХрдиреЗрдХреНрдЯ рд╣реЛрддреЗ рд╣реБрдП рджреЗрдЦрдиреЗ рдХреЗ рд▓рд┐рдП рд╕реАрд░рд┐рдпрд▓ рдореЙрдирд┐рдЯрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред

    ```output
    > Executing task: platformio device monitor <
    
    source /Users/jimbennett/GitHub/IoT-For-Beginners/1-getting-started/lessons/4-connect-internet/code-mqtt/wio-terminal/nightlight/.venv/bin/activate
    --- Available filters and text transformations: colorize, debug, default, direct, hexlify, log2file, nocontrol, printable, send_on_enter, time
    --- More details at http://bit.ly/pio-monitor-filters
    --- Miniterm on /dev/cu.usbmodem1201  9600,8,N,1 ---
    --- Quit: Ctrl+C | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H ---
    Connecting to WiFi..
    Connected!
    Attempting MQTT connection...connected
    ```

> ЁЯТБ рдЖрдк рдЗрд╕ рдХреЛрдб рдХреЛ [code-mqtt/wio-terminal](../../../../../1-getting-started/lessons/4-connect-internet/code-mqtt/wio-terminal) рдлреЛрд▓реНрдбрд░ рдореЗрдВ рдкрд╛ рд╕рдХрддреЗ рд╣реИрдВред

ЁЯША рдЖрдкрдиреЗ рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рдЕрдкрдиреЗ рдбрд┐рд╡рд╛рдЗрд╕ рдХреЛ рдПрдХ MQTT рдмреНрд░реЛрдХрд░реНрд╕ рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░ рд▓рд┐рдпрд╛ рд╣реИред

**рдЕрд╕реНрд╡реАрдХрд░рдг**:  
рдпрд╣ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ AI рдЕрдиреБрд╡рд╛рдж рд╕реЗрд╡рд╛ [Co-op Translator](https://github.com/Azure/co-op-translator) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЕрдиреБрд╡рд╛рджрд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред рдЬрдмрдХрд┐ рд╣рдо рд╕рдЯреАрдХрддрд╛ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░рддреЗ рд╣реИрдВ, рдХреГрдкрдпрд╛ рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдЕрдиреБрд╡рд╛рдж рдореЗрдВ рддреНрд░реБрдЯрд┐рдпрд╛рдВ рдпрд╛ рдЕрд╢реБрджреНрдзрд┐рдпрд╛рдВ рд╣реЛ рд╕рдХрддреА рд╣реИрдВред рдореВрд▓ рднрд╛рд╖рд╛ рдореЗрдВ рдЙрдкрд▓рдмреНрдз рдореВрд▓ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдХреЛ рдЖрдзрд┐рдХрд╛рд░рд┐рдХ рд╕реНрд░реЛрдд рдорд╛рдирд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред рдорд╣рддреНрд╡рдкреВрд░реНрдг рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рд▓рд┐рдП, рдкреЗрд╢реЗрд╡рд░ рдорд╛рдирд╡ рдЕрдиреБрд╡рд╛рдж рдХреА рд╕рд┐рдлрд╛рд░рд┐рд╢ рдХреА рдЬрд╛рддреА рд╣реИред рдЗрд╕ рдЕрдиреБрд╡рд╛рдж рдХреЗ рдЙрдкрдпреЛрдЧ рд╕реЗ рдЙрддреНрдкрдиреНрди рдХрд┐рд╕реА рднреА рдЧрд▓рддрдлрд╣рдореА рдпрд╛ рдЧрд▓рдд рд╡реНрдпрд╛рдЦреНрдпрд╛ рдХреЗ рд▓рд┐рдП рд╣рдо рдЬрд┐рдореНрдореЗрджрд╛рд░ рдирд╣реАрдВ рд╣реИрдВред