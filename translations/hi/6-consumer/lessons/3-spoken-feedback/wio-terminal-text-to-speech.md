<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "a202fa5889790a3777bfc33dd9f4b459",
  "translation_date": "2025-08-25T17:47:53+00:00",
  "source_file": "6-consumer/lessons/3-spoken-feedback/wio-terminal-text-to-speech.md",
  "language_code": "hi"
}
-->
# рдЯреЗрдХреНрд╕реНрдЯ рд╕реЗ рд╕реНрдкреАрдЪ - Wio Terminal

рдЗрд╕ рдкрд╛рда рдХреЗ рдЗрд╕ рднрд╛рдЧ рдореЗрдВ, рдЖрдк рдЯреЗрдХреНрд╕реНрдЯ рдХреЛ рд╕реНрдкреАрдЪ рдореЗрдВ рдмрджрд▓реЗрдВрдЧреЗ рддрд╛рдХрд┐ рдмреЛрд▓реЗ рдЧрдП рдлреАрдбрдмреИрдХ рдкреНрд░рджрд╛рди рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХреЗред

## рдЯреЗрдХреНрд╕реНрдЯ рд╕реЗ рд╕реНрдкреАрдЪ

рд╕реНрдкреАрдЪ рд╕рд░реНрд╡рд┐рд╕реЗрдЬ SDK, рдЬрд┐рд╕реЗ рдЖрдкрдиреЗ рдкрд┐рдЫрд▓реЗ рдкрд╛рда рдореЗрдВ рд╕реНрдкреАрдЪ рдХреЛ рдЯреЗрдХреНрд╕реНрдЯ рдореЗрдВ рдмрджрд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдерд╛, рдЯреЗрдХреНрд╕реНрдЯ рдХреЛ рд╡рд╛рдкрд╕ рд╕реНрдкреАрдЪ рдореЗрдВ рдмрджрд▓рдиреЗ рдХреЗ рд▓рд┐рдП рднреА рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред

## рд╡реЙрдпрд╕ рдХреА рд╕реВрдЪреА рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ

рд╕реНрдкреАрдЪ рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд░рддреЗ рд╕рдордп, рдЖрдкрдХреЛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╡реЙрдпрд╕ рдкреНрд░рджрд╛рди рдХрд░рдиреА рд╣реЛрдЧреА рдХреНрдпреЛрдВрдХрд┐ рд╕реНрдкреАрдЪ рд╡рд┐рднрд┐рдиреНрди рдкреНрд░рдХрд╛рд░ рдХреА рд╡реЙрдпрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЙрддреНрдкрдиреНрди рдХреА рдЬрд╛ рд╕рдХрддреА рд╣реИред рдкреНрд░рддреНрдпреЗрдХ рднрд╛рд╖рд╛ рд╡рд┐рднрд┐рдиреНрди рдкреНрд░рдХрд╛рд░ рдХреА рд╡реЙрдпрд╕ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддреА рд╣реИ, рдФрд░ рдЖрдк рд╕реНрдкреАрдЪ рд╕рд░реНрд╡рд┐рд╕реЗрдЬ SDK рд╕реЗ рдкреНрд░рддреНрдпреЗрдХ рднрд╛рд╖рд╛ рдХреЗ рд▓рд┐рдП рд╕рдорд░реНрдерд┐рдд рд╡реЙрдпрд╕ рдХреА рд╕реВрдЪреА рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдорд╛рдЗрдХреНрд░реЛрдХрдВрдЯреНрд░реЛрд▓рд░ рдХреА рд╕реАрдорд╛рдПрдВ рдпрд╣рд╛рдВ рдкреНрд░рднрд╛рд╡ рдбрд╛рд▓рддреА рд╣реИрдВ - рдЯреЗрдХреНрд╕реНрдЯ рд╕реЗ рд╕реНрдкреАрдЪ рд╕рд░реНрд╡рд┐рд╕реЗрдЬ рджреНрд╡рд╛рд░рд╛ рд╕рдорд░реНрдерд┐рдд рд╡реЙрдпрд╕ рдХреА рд╕реВрдЪреА рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреЙрд▓ рдПрдХ JSON рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рд╣реИ рдЬрд┐рд╕рдХрд╛ рдЖрдХрд╛рд░ 77KB рд╕реЗ рдЕрдзрд┐рдХ рд╣реИ, рдЬреЛ Wio Terminal рджреНрд╡рд╛рд░рд╛ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдмрд╣реБрдд рдмрдбрд╝рд╛ рд╣реИред рд▓реЗрдЦрди рдХреЗ рд╕рдордп, рдкреВрд░реА рд╕реВрдЪреА рдореЗрдВ 215 рд╡реЙрдпрд╕ рд╢рд╛рдорд┐рд▓ рд╣реИрдВ, рдкреНрд░рддреНрдпреЗрдХ рдХреЛ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд JSON рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рджреНрд╡рд╛рд░рд╛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ:

```json
{
    "Name": "Microsoft Server Speech Text to Speech Voice (en-US, AriaNeural)",
    "DisplayName": "Aria",
    "LocalName": "Aria",
    "ShortName": "en-US-AriaNeural",
    "Gender": "Female",
    "Locale": "en-US",
    "StyleList": [
        "chat",
        "customerservice",
        "narration-professional",
        "newscast-casual",
        "newscast-formal",
        "cheerful",
        "empathetic"
    ],
    "SampleRateHertz": "24000",
    "VoiceType": "Neural",
    "Status": "GA"
}
```

рдпрд╣ JSON **Aria** рд╡реЙрдпрд╕ рдХреЗ рд▓рд┐рдП рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рдХрдИ рд╡реЙрдпрд╕ рд╕реНрдЯрд╛рдЗрд▓ рд╣реИрдВред рдЯреЗрдХреНрд╕реНрдЯ рдХреЛ рд╕реНрдкреАрдЪ рдореЗрдВ рдмрджрд▓рддреЗ рд╕рдордп рдХреЗрд╡рд▓ `en-US-AriaNeural` рдЬреИрд╕реЗ рд╢реЙрд░реНрдЯрдиреЗрдо рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред

рдкреВрд░реА рд╕реВрдЪреА рдХреЛ рдорд╛рдЗрдХреНрд░реЛрдХрдВрдЯреНрд░реЛрд▓рд░ рдкрд░ рдбрд╛рдЙрдирд▓реЛрдб рдФрд░ рдбрд┐рдХреЛрдб рдХрд░рдиреЗ рдХреЗ рдмрдЬрд╛рдп, рдЖрдкрдХреЛ рдЙрд╕ рднрд╛рд╖рд╛ рдХреЗ рд▓рд┐рдП рд╡реЙрдпрд╕ рдХреА рд╕реВрдЪреА рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреБрдЫ рдФрд░ рд╕рд░реНрд╡рд░рд▓реЗрд╕ рдХреЛрдб рд▓рд┐рдЦрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреА рдЬрд┐рд╕реЗ рдЖрдк рдЙрдкрдпреЛрдЧ рдХрд░ рд░рд╣реЗ рд╣реИрдВ, рдФрд░ рдЗрд╕реЗ рдЕрдкрдиреЗ Wio Terminal рд╕реЗ рдХреЙрд▓ рдХрд░реЗрдВред рдЖрдкрдХрд╛ рдХреЛрдб рдлрд┐рд░ рд╕реВрдЪреА рд╕реЗ рдПрдХ рдЙрдкрдпреБрдХреНрдд рд╡реЙрдпрд╕ рдЪреБрди рд╕рдХрддрд╛ рд╣реИ, рдЬреИрд╕реЗ рдХрд┐ рдкрд╣рд▓реА рд╡реЙрдпрд╕ рдЬреЛ рдЙрд╕реЗ рдорд┐рд▓рддреА рд╣реИред

### рдХрд╛рд░реНрдп - рд╡реЙрдпрд╕ рдХреА рд╕реВрдЪреА рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕рд░реНрд╡рд░рд▓реЗрд╕ рдлрдВрдХреНрд╢рди рдмрдирд╛рдПрдВ

1. рдЕрдкрдиреЗ `smart-timer-trigger` рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХреЛ VS Code рдореЗрдВ рдЦреЛрд▓реЗрдВ рдФрд░ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ рдЯрд░реНрдорд┐рдирд▓ рдореЗрдВ рд╡рд░реНрдЪреБрдЕрд▓ рдПрдирд╡рд╛рдпрд░рдирдореЗрдВрдЯ рд╕рдХреНрд░рд┐рдп рд╣реИред рдпрджрд┐ рдирд╣реАрдВ, рддреЛ рдЯрд░реНрдорд┐рдирд▓ рдХреЛ рдмрдВрдж рдХрд░реЗрдВ рдФрд░ рдлрд┐рд░ рд╕реЗ рдмрдирд╛рдПрдВред

1. `local.settings.json` рдлрд╝рд╛рдЗрд▓ рдЦреЛрд▓реЗрдВ рдФрд░ рд╕реНрдкреАрдЪ API рдХреБрдВрдЬреА рдФрд░ рд╕реНрдерд╛рди рдХреЗ рд▓рд┐рдП рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдЬреЛрдбрд╝реЗрдВ:

    ```json
    "SPEECH_KEY": "<key>",
    "SPEECH_LOCATION": "<location>"
    ```

    `<key>` рдХреЛ рдЕрдкрдиреА рд╕реНрдкреАрдЪ рд╕рд░реНрд╡рд┐рд╕ рд░рд┐рд╕реЛрд░реНрд╕ рдХреА API рдХреБрдВрдЬреА рд╕реЗ рдмрджрд▓реЗрдВред `<location>` рдХреЛ рдЙрд╕ рд╕реНрдерд╛рди рд╕реЗ рдмрджрд▓реЗрдВ рдЬрд┐рд╕реЗ рдЖрдкрдиреЗ рд╕реНрдкреАрдЪ рд╕рд░реНрд╡рд┐рд╕ рд░рд┐рд╕реЛрд░реНрд╕ рдмрдирд╛рддреЗ рд╕рдордп рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдерд╛ред

1. рдЗрд╕ рдРрдк рдореЗрдВ рдПрдХ рдирдпрд╛ HTTP рдЯреНрд░рд┐рдЧрд░ `get-voices` рдирд╛рдордХ рдЬреЛрдбрд╝реЗрдВред рдЗрд╕реЗ VS Code рдЯрд░реНрдорд┐рдирд▓ рдореЗрдВ рдлрдВрдХреНрд╢рди рдРрдк рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХреЗ рд░реВрдЯ рдлрд╝реЛрд▓реНрдбрд░ рд╕реЗ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрдорд╛рдВрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдмрдирд╛рдПрдВ:

    ```sh
    func new --name get-voices --template "HTTP trigger"
    ```

    рдпрд╣ рдПрдХ HTTP рдЯреНрд░рд┐рдЧрд░ `get-voices` рдмрдирд╛рдПрдЧрд╛ред

1. `get-voices` рдлрд╝реЛрд▓реНрдбрд░ рдореЗрдВ `__init__.py` рдлрд╝рд╛рдЗрд▓ рдХреА рд╕рд╛рдордЧреНрд░реА рдХреЛ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╕реЗ рдмрджрд▓реЗрдВ:

    ```python
    import json
    import os
    import requests
    
    import azure.functions as func
    
    def main(req: func.HttpRequest) -> func.HttpResponse:
        location = os.environ['SPEECH_LOCATION']
        speech_key = os.environ['SPEECH_KEY']
    
        req_body = req.get_json()
        language = req_body['language']
    
        url = f'https://{location}.tts.speech.microsoft.com/cognitiveservices/voices/list'
    
        headers = {
            'Ocp-Apim-Subscription-Key': speech_key
        }
    
        response = requests.get(url, headers=headers)
        voices_json = json.loads(response.text)
    
        voices = filter(lambda x: x['Locale'].lower() == language.lower(), voices_json)
        voices = map(lambda x: x['ShortName'], voices)
    
        return func.HttpResponse(json.dumps(list(voices)), status_code=200)
    ```

    рдпрд╣ рдХреЛрдб рд╡реЙрдпрд╕ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдВрдбрдкреЙрдЗрдВрдЯ рдкрд░ HTTP рдЕрдиреБрд░реЛрдз рдХрд░рддрд╛ рд╣реИред рд╡реЙрдпрд╕ рдХреА рдпрд╣ рд╕реВрдЪреА рд╕рднреА рднрд╛рд╖рд╛рдУрдВ рдХреЗ рд▓рд┐рдП рд╡реЙрдпрд╕ рдХреЗ рд╕рд╛рде рдПрдХ рдмрдбрд╝рд╛ JSON рдмреНрд▓реЙрдХ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдЕрдиреБрд░реЛрдз рдмреЙрдбреА рдореЗрдВ рдкрд╛рд╕ рдХреА рдЧрдИ рднрд╛рд╖рд╛ рдХреЗ рд▓рд┐рдП рд╡реЙрдпрд╕ рдХреЛ рдлрд╝рд┐рд▓реНрдЯрд░ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдлрд┐рд░ рд╢реЙрд░реНрдЯрдиреЗрдо рдХреЛ рдирд┐рдХрд╛рд▓рд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ JSON рд╕реВрдЪреА рдХреЗ рд░реВрдк рдореЗрдВ рд▓реМрдЯрд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рдЯреЗрдХреНрд╕реНрдЯ рдХреЛ рд╕реНрдкреАрдЪ рдореЗрдВ рдмрджрд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдХреЗрд╡рд▓ рдЗрд╕ рд╢реЙрд░реНрдЯрдиреЗрдо рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ, рдЗрд╕рд▓рд┐рдП рдХреЗрд╡рд▓ рдпрд╣реА рдорд╛рди рд▓реМрдЯрд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред

    > ЁЯТБ рдЖрдк рдЖрд╡рд╢реНрдпрдХрддрд╛рдиреБрд╕рд╛рд░ рдлрд╝рд┐рд▓реНрдЯрд░ рдмрджрд▓ рд╕рдХрддреЗ рд╣реИрдВ рддрд╛рдХрд┐ рдХреЗрд╡рд▓ рд╡рд╣реА рд╡реЙрдпрд╕ рдЪреБрдиреА рдЬрд╛рдПрдВ рдЬреЛ рдЖрдк рдЪрд╛рд╣рддреЗ рд╣реИрдВред

    рдпрд╣ рдбреЗрдЯрд╛ рдХрд╛ рдЖрдХрд╛рд░ 77KB (рд▓реЗрдЦрди рдХреЗ рд╕рдордп) рд╕реЗ рдШрдЯрд╛рдХрд░ рдПрдХ рдмрд╣реБрдд рдЫреЛрдЯреЗ JSON рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдореЗрдВ рдмрджрд▓ рджреЗрддрд╛ рд╣реИред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, US рд╡реЙрдпрд╕ рдХреЗ рд▓рд┐рдП рдпрд╣ 408 рдмрд╛рдЗрдЯреНрд╕ рд╣реИред

1. рдЕрдкрдиреА рдлрдВрдХреНрд╢рди рдРрдк рдХреЛ рд▓реЛрдХрд▓реА рдЪрд▓рд╛рдПрдВред рдлрд┐рд░ рдЖрдк рдЗрд╕реЗ `text-to-timer` HTTP рдЯреНрд░рд┐рдЧрд░ рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд░рдиреЗ рдХреЗ рд╕рдорд╛рди рддрд░реАрдХреЗ рд╕реЗ `curl` рдЬреИрд╕реЗ рдЯреВрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдХреЙрд▓ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ рдЕрдкрдиреА рднрд╛рд╖рд╛ рдХреЛ JSON рдмреЙрдбреА рдХреЗ рд░реВрдк рдореЗрдВ рдкрд╛рд╕ рдХрд░реЗрдВ:

    ```json
    {
        "language":"<language>"
    }
    ```

    `<language>` рдХреЛ рдЕрдкрдиреА рднрд╛рд╖рд╛ рд╕реЗ рдмрджрд▓реЗрдВ, рдЬреИрд╕реЗ `en-GB` рдпрд╛ `zh-CN`ред

> ЁЯТБ рдЖрдк рдЗрд╕ рдХреЛрдб рдХреЛ [code-spoken-response/functions](../../../../../6-consumer/lessons/3-spoken-feedback/code-spoken-response/functions) рдлрд╝реЛрд▓реНрдбрд░ рдореЗрдВ рдкрд╛ рд╕рдХрддреЗ рд╣реИрдВред

### рдХрд╛рд░реНрдп - рдЕрдкрдиреЗ Wio Terminal рд╕реЗ рд╡реЙрдпрд╕ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ

1. рдпрджрд┐ `smart-timer` рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдкрд╣рд▓реЗ рд╕реЗ рдЦреБрд▓рд╛ рдирд╣реАрдВ рд╣реИ, рддреЛ рдЗрд╕реЗ VS Code рдореЗрдВ рдЦреЛрд▓реЗрдВред

1. `config.h` рд╣реЗрдбрд░ рдлрд╝рд╛рдЗрд▓ рдЦреЛрд▓реЗрдВ рдФрд░ рдЕрдкрдиреА рдлрдВрдХреНрд╢рди рдРрдк рдХреЗ рд▓рд┐рдП URL рдЬреЛрдбрд╝реЗрдВ:

    ```cpp
    const char *GET_VOICES_FUNCTION_URL = "<URL>";
    ```

    `<URL>` рдХреЛ рдЕрдкрдиреА рдлрдВрдХреНрд╢рди рдРрдк рдХреЗ `get-voices` HTTP рдЯреНрд░рд┐рдЧрд░ рдХреЗ URL рд╕реЗ рдмрджрд▓реЗрдВред рдпрд╣ `TEXT_TO_TIMER_FUNCTION_URL` рдХреЗ рдорд╛рди рдХреЗ рд╕рдорд╛рди рд╣реЛрдЧрд╛, рд╕рд┐рд╡рд╛рдп рдЗрд╕рдХреЗ рдХрд┐ рдлрдВрдХреНрд╢рди рдХрд╛ рдирд╛рдо `text-to-timer` рдХреЗ рдмрдЬрд╛рдп `get-voices` рд╣реЛрдЧрд╛ред

1. `src` рдлрд╝реЛрд▓реНрдбрд░ рдореЗрдВ рдПрдХ рдирдИ рдлрд╝рд╛рдЗрд▓ рдмрдирд╛рдПрдВ рдЬрд┐рд╕рдХрд╛ рдирд╛рдо `text_to_speech.h` рд╣реЛред рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдЯреЗрдХреНрд╕реНрдЯ рдХреЛ рд╕реНрдкреАрдЪ рдореЗрдВ рдмрджрд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдХреНрд▓рд╛рд╕ рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред

1. рдирдИ `text_to_speech.h` рдлрд╝рд╛рдЗрд▓ рдХреЗ рд╢реАрд░реНрд╖ рдкрд░ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдЗрдирдХреНрд▓реВрдб рдирд┐рд░реНрджреЗрд╢ рдЬреЛрдбрд╝реЗрдВ:

    ```cpp
    #pragma once

    #include <Arduino.h>
    #include <ArduinoJson.h>
    #include <HTTPClient.h>
    #include <Seeed_FS.h>
    #include <SD/Seeed_SD.h>
    #include <WiFiClient.h>
    #include <WiFiClientSecure.h>
    
    #include "config.h"
    #include "speech_to_text.h"
    ```

1. рдЗрд╕рдХреЗ рдиреАрдЪреЗ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреЛрдб рдЬреЛрдбрд╝реЗрдВ рддрд╛рдХрд┐ `TextToSpeech` рдХреНрд▓рд╛рд╕ рдХреЛ рдШреЛрд╖рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХреЗ, рд╕рд╛рде рд╣реА рдПрдХ рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдЬрд┐рд╕реЗ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЗ рдмрд╛рдХреА рд╣рд┐рд╕реНрд╕реЛрдВ рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХреЗ:

    ```cpp
    class TextToSpeech
    {
    public:
    private:
    };
    
    TextToSpeech textToSpeech;
    ```

1. рдЕрдкрдиреА рдлрдВрдХреНрд╢рди рдРрдк рдХреЛ рдХреЙрд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рдПрдХ WiFi рдХреНрд▓рд╛рдЗрдВрдЯ рдШреЛрд╖рд┐рдд рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред рдХреНрд▓рд╛рд╕ рдХреЗ `private` рд╕реЗрдХреНрд╢рди рдореЗрдВ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдЬреЛрдбрд╝реЗрдВ:

    ```cpp
    WiFiClient _client;
    ```

1. `private` рд╕реЗрдХреНрд╢рди рдореЗрдВ, рдЪрдпрдирд┐рдд рд╡реЙрдпрд╕ рдХреЗ рд▓рд┐рдП рдПрдХ рдлрд╝реАрд▓реНрдб рдЬреЛрдбрд╝реЗрдВ:

    ```cpp
    String _voice;
    ```

1. `public` рд╕реЗрдХреНрд╢рди рдореЗрдВ, рдПрдХ `init` рдлрдВрдХреНрд╢рди рдЬреЛрдбрд╝реЗрдВ рдЬреЛ рдкрд╣рд▓реА рд╡реЙрдпрд╕ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдЧрд╛:

    ```cpp
    void init()
    {
    }
    ```

1. рд╡реЙрдпрд╕ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдПрдХ JSON рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдХреЛ рдлрдВрдХреНрд╢рди рдРрдк рдореЗрдВ рднреЗрдЬрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП рдЬрд┐рд╕рдореЗрдВ рднрд╛рд╖рд╛ рд╣реЛред `init` рдлрдВрдХреНрд╢рди рдореЗрдВ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреЛрдб рдЬреЛрдбрд╝реЗрдВ рддрд╛рдХрд┐ рдпрд╣ JSON рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдмрдирд╛рдпрд╛ рдЬрд╛ рд╕рдХреЗ:

    ```cpp
    DynamicJsonDocument doc(1024);
    doc["language"] = LANGUAGE;

    String body;
    serializeJson(doc, body);
    ```

1. рдЗрд╕рдХреЗ рдмрд╛рдж рдПрдХ `HTTPClient` рдмрдирд╛рдПрдВ, рдлрд┐рд░ рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рд╡реЙрдпрд╕ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдлрдВрдХреНрд╢рди рдРрдк рдХреЛ рдХреЙрд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд░реЗрдВ, JSON рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдХреЛ рдкреЛрд╕реНрдЯ рдХрд░рддреЗ рд╣реБрдП:

    ```cpp
    HTTPClient httpClient;
    httpClient.begin(_client, GET_VOICES_FUNCTION_URL);

    int httpResponseCode = httpClient.POST(body);
    ```

1. рдЗрд╕рдХреЗ рдиреАрдЪреЗ рдХреЛрдб рдЬреЛрдбрд╝реЗрдВ рддрд╛рдХрд┐ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдХреЛ рдЪреЗрдХ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХреЗ, рдФрд░ рдпрджрд┐ рдпрд╣ 200 (рд╕рдлрд▓рддрд╛) рд╣реИ, рддреЛ рд╡реЙрдпрд╕ рдХреА рд╕реВрдЪреА рдирд┐рдХрд╛рд▓реА рдЬрд╛рдП рдФрд░ рд╕реВрдЪреА рд╕реЗ рдкрд╣рд▓реА рд╡реЙрдпрд╕ рдкреНрд░рд╛рдкреНрдд рдХреА рдЬрд╛рдП:

    ```cpp
    if (httpResponseCode == 200)
    {
        String result = httpClient.getString();
        Serial.println(result);

        DynamicJsonDocument doc(1024);
        deserializeJson(doc, result.c_str());

        JsonArray obj = doc.as<JsonArray>();
        _voice = obj[0].as<String>();

        Serial.print("Using voice ");
        Serial.println(_voice);
    }
    else
    {
        Serial.print("Failed to get voices - error ");
        Serial.println(httpResponseCode);
    }
    ```

1. рдЗрд╕рдХреЗ рдмрд╛рдж, HTTP рдХреНрд▓рд╛рдЗрдВрдЯ рдХрдиреЗрдХреНрд╢рди рдХреЛ рд╕рдорд╛рдкреНрдд рдХрд░реЗрдВ:

    ```cpp
    httpClient.end();
    ```

1. `main.cpp` рдлрд╝рд╛рдЗрд▓ рдЦреЛрд▓реЗрдВ, рдФрд░ рдЗрд╕ рдирдИ рд╣реЗрдбрд░ рдлрд╝рд╛рдЗрд▓ рдХреЛ рд╢рд╛рдорд┐рд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╢реАрд░реНрд╖ рдкрд░ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдЗрдирдХреНрд▓реВрдб рдирд┐рд░реНрджреЗрд╢ рдЬреЛрдбрд╝реЗрдВ:

    ```cpp
    #include "text_to_speech.h"
    ```

1. `setup` рдлрдВрдХреНрд╢рди рдореЗрдВ, `speechToText.init();` рдХреЙрд▓ рдХреЗ рдиреАрдЪреЗ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдЬреЛрдбрд╝реЗрдВ рддрд╛рдХрд┐ `TextToSpeech` рдХреНрд▓рд╛рд╕ рдХреЛ рдЗрдирд┐рд╢рд┐рдпрд▓рд╛рдЗрдЬрд╝ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХреЗ:

    ```cpp
    textToSpeech.init();
    ```

1. рдЗрд╕ рдХреЛрдб рдХреЛ рдмрд┐рд▓реНрдб рдХрд░реЗрдВ, рдЗрд╕реЗ рдЕрдкрдиреЗ Wio Terminal рдкрд░ рдЕрдкрд▓реЛрдб рдХрд░реЗрдВ рдФрд░ рдЗрд╕реЗ рд╕реАрд░рд┐рдпрд▓ рдореЙрдирд┐рдЯрд░ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЯреЗрд╕реНрдЯ рдХрд░реЗрдВред рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ рдЖрдкрдХреА рдлрдВрдХреНрд╢рди рдРрдк рдЪрд▓ рд░рд╣реА рд╣реИред

    рдЖрдкрдХреЛ рдлрдВрдХреНрд╢рди рдРрдк рд╕реЗ рд▓реМрдЯрд╛рдИ рдЧрдИ рдЙрдкрд▓рдмреНрдз рд╡реЙрдпрд╕ рдХреА рд╕реВрдЪреА рджрд┐рдЦрд╛рдИ рджреЗрдЧреА, рд╕рд╛рде рд╣реА рдЪрдпрдирд┐рдд рд╡реЙрдпрд╕ рднреАред

    ```output
    --- Available filters and text transformations: colorize, debug, default, direct, hexlify, log2file, nocontrol, printable, send_on_enter, time
    --- More details at http://bit.ly/pio-monitor-filters
    --- Miniterm on /dev/cu.usbmodem1101  9600,8,N,1 ---
    --- Quit: Ctrl+C | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H ---
    Connecting to WiFi..
    Connected!
    Got access token.
    ["en-US-JennyNeural", "en-US-JennyMultilingualNeural", "en-US-GuyNeural", "en-US-AriaNeural", "en-US-AmberNeural", "en-US-AnaNeural", "en-US-AshleyNeural", "en-US-BrandonNeural", "en-US-ChristopherNeural", "en-US-CoraNeural", "en-US-ElizabethNeural", "en-US-EricNeural", "en-US-JacobNeural", "en-US-MichelleNeural", "en-US-MonicaNeural", "en-US-AriaRUS", "en-US-BenjaminRUS", "en-US-GuyRUS", "en-US-ZiraRUS"]
    Using voice en-US-JennyNeural
    Ready.
    ```

## рдЯреЗрдХреНрд╕реНрдЯ рдХреЛ рд╕реНрдкреАрдЪ рдореЗрдВ рдмрджрд▓реЗрдВ

рдПрдХ рдмрд╛рд░ рдЖрдкрдХреЗ рдкрд╛рд╕ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╡реЙрдпрд╕ рд╣реЛ, рдЗрд╕реЗ рдЯреЗрдХреНрд╕реНрдЯ рдХреЛ рд╕реНрдкреАрдЪ рдореЗрдВ рдмрджрд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред рд╡реЙрдпрд╕ рдХреЗ рд╕рд╛рде рд╡рд╣реА рдореЗрдореЛрд░реА рд╕реАрдорд╛рдПрдВ рд╕реНрдкреАрдЪ рдХреЛ рдЯреЗрдХреНрд╕реНрдЯ рдореЗрдВ рдмрджрд▓рдиреЗ рдкрд░ рднреА рд▓рд╛рдЧреВ рд╣реЛрддреА рд╣реИрдВ, рдЗрд╕рд▓рд┐рдП рдЖрдкрдХреЛ рд╕реНрдкреАрдЪ рдХреЛ SD рдХрд╛рд░реНрдб рдкрд░ рд▓рд┐рдЦрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреА рддрд╛рдХрд┐ рдЗрд╕реЗ ReSpeaker рдкрд░ рдЪрд▓рд╛рдпрд╛ рдЬрд╛ рд╕рдХреЗред

> ЁЯТБ рдЗрд╕ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХреЗ рдкрд┐рдЫрд▓реЗ рдкрд╛рдареЛрдВ рдореЗрдВ рдЖрдкрдиреЗ рдорд╛рдЗрдХреНрд░реЛрдлреЛрди рд╕реЗ рдХреИрдкреНрдЪрд░ рдХреА рдЧрдИ рд╕реНрдкреАрдЪ рдХреЛ рд╕реНрдЯреЛрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдлреНрд▓реИрд╢ рдореЗрдореЛрд░реА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдерд╛ред рдЗрд╕ рдкрд╛рда рдореЗрдВ SD рдХрд╛рд░реНрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ рдХреНрдпреЛрдВрдХрд┐ Seeed рдСрдбрд┐рдпреЛ рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЗрд╕реЗ рдЪрд▓рд╛рдирд╛ рдЖрд╕рд╛рди рд╣реИред

рдПрдХ рдФрд░ рд╕реАрдорд╛ рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░рдирд╛ рд╣реИ, рд╕реНрдкреАрдЪ рд╕рд░реНрд╡рд┐рд╕ рд╕реЗ рдЙрдкрд▓рдмреНрдз рдСрдбрд┐рдпреЛ рдбреЗрдЯрд╛ рдФрд░ Wio Terminal рджреНрд╡рд╛рд░рд╛ рд╕рдорд░реНрдерд┐рдд рдлреЙрд░реНрдореЗрдЯред рдкреВрд░реНрдг рдХрдВрдкреНрдпреВрдЯрд░реЛрдВ рдХреЗ рд╡рд┐рдкрд░реАрдд, рдорд╛рдЗрдХреНрд░реЛрдХрдВрдЯреНрд░реЛрд▓рд░ рдХреЗ рд▓рд┐рдП рдСрдбрд┐рдпреЛ рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдСрдбрд┐рдпреЛ рдлреЙрд░реНрдореЗрдЯ рдореЗрдВ рдмрд╣реБрдд рд╕реАрдорд┐рдд рд╣реЛ рд╕рдХрддреА рд╣реИрдВред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, Seeed Arduino Audio рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдЬреЛ ReSpeaker рдкрд░ рд╕рд╛рдЙрдВрдб рдЪрд▓рд╛ рд╕рдХрддреА рд╣реИ, рдХреЗрд╡рд▓ 44.1KHz рд╕реИрдВрдкрд▓ рд░реЗрдЯ рдкрд░ рдСрдбрд┐рдпреЛ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддреА рд╣реИред Azure рд╕реНрдкреАрдЪ рд╕рд░реНрд╡рд┐рд╕реЗрдЬ рдХрдИ рдлреЙрд░реНрдореЗрдЯ рдореЗрдВ рдСрдбрд┐рдпреЛ рдкреНрд░рджрд╛рди рдХрд░ рд╕рдХрддреА рд╣реИрдВ, рд▓реЗрдХрд┐рди рдЙрдирдореЗрдВ рд╕реЗ рдХреЛрдИ рднреА рдЗрд╕ рд╕реИрдВрдкрд▓ рд░реЗрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ, рд╡реЗ рдХреЗрд╡рд▓ 8KHz, 16KHz, 24KHz рдФрд░ 48KHz рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реИрдВред рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рдСрдбрд┐рдпреЛ рдХреЛ 44.1KHz рдореЗрдВ рдлрд┐рд░ рд╕реЗ рд╕реИрдВрдкрд▓ рдХрд░рдирд╛ рд╣реЛрдЧрд╛, рдЬреЛ Wio Terminal рдХреЗ рдкрд╛рд╕ рдЕрдзрд┐рдХ рд╕рдВрд╕рд╛рдзрди, рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдореЗрдореЛрд░реА, рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреАред

рдЬрдм рдЗрд╕ рддрд░рд╣ рдХреЗ рдбреЗрдЯрд╛ рдХреЛ рд╣реЗрд░рдлреЗрд░ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ, рддреЛ рдЕрдХреНрд╕рд░ рд╕рд░реНрд╡рд░рд▓реЗрд╕ рдХреЛрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдмреЗрд╣рддрд░ рд╣реЛрддрд╛ рд╣реИ, рдЦрд╛рд╕рдХрд░ рдпрджрд┐ рдбреЗрдЯрд╛ рд╡реЗрдм рдХреЙрд▓ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдкреНрд░рд╛рдкреНрдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реЛред Wio Terminal рдПрдХ рд╕рд░реНрд╡рд░рд▓реЗрд╕ рдлрдВрдХреНрд╢рди рдХреЛ рдХреЙрд▓ рдХрд░ рд╕рдХрддрд╛ рд╣реИ, рдЯреЗрдХреНрд╕реНрдЯ рдХреЛ рдмрджрд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдкрд╛рд╕ рдХрд░ рд╕рдХрддрд╛ рд╣реИ, рдФрд░ рд╕рд░реНрд╡рд░рд▓реЗрд╕ рдлрдВрдХреНрд╢рди рдЯреЗрдХреНрд╕реНрдЯ рдХреЛ рд╕реНрдкреАрдЪ рдореЗрдВ рдмрджрд▓рдиреЗ рдХреЗ рд▓рд┐рдП рд╕реНрдкреАрдЪ рд╕рд░реНрд╡рд┐рд╕ рдХреЛ рдХреЙрд▓ рдХрд░ рд╕рдХрддрд╛ рд╣реИ, рд╕рд╛рде рд╣реА рдСрдбрд┐рдпреЛ рдХреЛ рдЖрд╡рд╢реНрдпрдХ рд╕реИрдВрдкрд▓ рд░реЗрдЯ рдореЗрдВ рдлрд┐рд░ рд╕реЗ рд╕реИрдВрдкрд▓ рдХрд░ рд╕рдХрддрд╛ рд╣реИред рдлрд┐рд░ рдпрд╣ рдСрдбрд┐рдпреЛ рдХреЛ рдЙрд╕ рдлреЙрд░реНрдо рдореЗрдВ рд▓реМрдЯрд╛ рд╕рдХрддрд╛ рд╣реИ рдЬрд┐рд╕рдХреА Wio Terminal рдХреЛ рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рддрд╛рдХрд┐ рдЗрд╕реЗ SD рдХрд╛рд░реНрдб рдкрд░ рд╕реНрдЯреЛрд░ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХреЗ рдФрд░ ReSpeaker рдкрд░ рдЪрд▓рд╛рдпрд╛ рдЬрд╛ рд╕рдХреЗред

### рдХрд╛рд░реНрдп - рдЯреЗрдХреНрд╕реНрдЯ рдХреЛ рд╕реНрдкреАрдЪ рдореЗрдВ рдмрджрд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕рд░реНрд╡рд░рд▓реЗрд╕ рдлрдВрдХреНрд╢рди рдмрдирд╛рдПрдВ

1. рдЕрдкрдиреЗ `smart-timer-trigger` рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХреЛ VS Code рдореЗрдВ рдЦреЛрд▓реЗрдВ рдФрд░ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ рдЯрд░реНрдорд┐рдирд▓ рдореЗрдВ рд╡рд░реНрдЪреБрдЕрд▓ рдПрдирд╡рд╛рдпрд░рдирдореЗрдВрдЯ рд╕рдХреНрд░рд┐рдп рд╣реИред рдпрджрд┐ рдирд╣реАрдВ, рддреЛ рдЯрд░реНрдорд┐рдирд▓ рдХреЛ рдмрдВрдж рдХрд░реЗрдВ рдФрд░ рдлрд┐рд░ рд╕реЗ рдмрдирд╛рдПрдВред

1. рдЗрд╕ рдРрдк рдореЗрдВ рдПрдХ рдирдпрд╛ HTTP рдЯреНрд░рд┐рдЧрд░ `text-to-speech` рдирд╛рдордХ рдЬреЛрдбрд╝реЗрдВред рдЗрд╕реЗ VS Code рдЯрд░реНрдорд┐рдирд▓ рдореЗрдВ рдлрдВрдХреНрд╢рди рдРрдк рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХреЗ рд░реВрдЯ рдлрд╝реЛрд▓реНрдбрд░ рд╕реЗ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрдорд╛рдВрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдмрдирд╛рдПрдВ:

    ```sh
    func new --name text-to-speech --template "HTTP trigger"
    ```

    рдпрд╣ рдПрдХ HTTP рдЯреНрд░рд┐рдЧрд░ `text-to-speech` рдмрдирд╛рдПрдЧрд╛ред

1. [librosa](https://librosa.org) Pip рдкреИрдХреЗрдЬ рдореЗрдВ рдСрдбрд┐рдпреЛ рдХреЛ рдлрд┐рд░ рд╕реЗ рд╕реИрдВрдкрд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдлрдВрдХреНрд╢рди рд╣реИрдВ, рдЗрд╕рд▓рд┐рдП рдЗрд╕реЗ `requirements.txt` рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдЬреЛрдбрд╝реЗрдВ:

    ```sh
    librosa
    ```

    рдЗрд╕реЗ рдЬреЛрдбрд╝рдиреЗ рдХреЗ рдмрд╛рдж, рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрдорд╛рдВрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ Pip рдкреИрдХреЗрдЬ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдВ:

    ```sh
    pip install -r requirements.txt
    ```

    > тЪая╕П рдпрджрд┐ рдЖрдк Linux, рдЬрд┐рд╕рдореЗрдВ Raspberry Pi OS рд╢рд╛рдорд┐рд▓ рд╣реИ, рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд░рд╣реЗ рд╣реИрдВ, рддреЛ рдЖрдкрдХреЛ `libsndfile` рдХреЛ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрдорд╛рдВрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░рдирд╛ рдкрдбрд╝ рд╕рдХрддрд╛ рд╣реИ:
    >
    > ```sh
    > sudo apt update
    > sudo apt install libsndfile1-dev
    > ```

1. рдЯреЗрдХреНрд╕реНрдЯ рдХреЛ рд╕реНрдкреАрдЪ рдореЗрдВ рдмрджрд▓рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдк рд╕реАрдзреЗ рд╕реНрдкреАрдЪ API рдХреБрдВрдЬреА рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗ, рдЗрд╕рдХреЗ рдмрдЬрд╛рдп рдЖрдкрдХреЛ рдПрдХ рдПрдХреНрд╕реЗрд╕ рдЯреЛрдХрди рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд░рдирд╛ рд╣реЛрдЧрд╛, рдПрдХреНрд╕реЗрд╕ рдЯреЛрдХрди рдЕрдиреБрд░реЛрдз рдХреЛ рдкреНрд░рдорд╛рдгрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП API рдХреБрдВрдЬреА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реБрдПред `text-to-speech` рдлрд╝реЛрд▓реНрдбрд░ рд╕реЗ `__init__.py` рдлрд╝рд╛рдЗрд▓ рдЦреЛрд▓реЗрдВ рдФрд░ рдЗрд╕рдореЗрдВ рд╕рднреА рдХреЛрдб рдХреЛ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╕реЗ рдмрджрд▓реЗрдВ:

    ```python
    import io
    import os
    import requests
    
    import librosa
    import soundfile as sf
    import azure.functions as func
    
    location = os.environ['SPEECH_LOCATION']
    speech_key = os.environ['SPEECH_KEY']
    
    def get_access_token():
        headers = {
            'Ocp-Apim-Subscription-Key': speech_key
        }
    
        token_endpoint = f'https://{location}.api.cognitive.microsoft.com/sts/v1.0/issuetoken'
        response = requests.post(token_endpoint, headers=headers)
        return str(response.text)
    ```

    рдпрд╣ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рд╕реЗ рдкрдврд╝реЗ рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ рд╕реНрдерд╛рди рдФрд░ рд╕реНрдкреАрдЪ рдХреБрдВрдЬреА рдХреЗ рд▓рд┐рдП рдХреЙрдиреНрд╕реНрдЯреЗрдВрдЯреНрд╕ рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддрд╛ рд╣реИред рдлрд┐рд░ рдпрд╣ `get_access_token` рдлрдВрдХреНрд╢рди рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддрд╛ рд╣реИ рдЬреЛ рд╕реНрдкреАрдЪ рд╕рд░реНрд╡рд┐рд╕ рдХреЗ рд▓рд┐рдП рдПрдХреНрд╕реЗрд╕ рдЯреЛрдХрди рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдЧрд╛ред

1. рдЗрд╕ рдХреЛрдб рдХреЗ рдиреАрдЪреЗ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдЬреЛрдбрд╝реЗрдВ:

    ```python
    playback_format = 'riff-48khz-16bit-mono-pcm'

    def main(req: func.HttpRequest) -> func.HttpResponse:
        req_body = req.get_json()
        language = req_body['language']
        voice = req_body['voice']
        text = req_body['text']
    
        url = f'https://{location}.tts.speech.microsoft.com/cognitiveservices/v1'
    
        headers = {
            'Authorization': 'Bearer ' + get_access_token(),
            'Content-Type': 'application/ssml+xml',
            'X-Microsoft-OutputFormat': playback_format
        }
    
        ssml =  f'<speak version=\'1.0\' xml:lang=\'{language}\'>'
        ssml += f'<voice xml:lang=\'{language}\' name=\'{voice}\'>'
        ssml += text
        ssml += '</voice>'
        ssml += '</speak>'
    
        response = requests.post(url, headers=headers, data=ssml.encode('utf-8'))
    
        raw_audio, sample_rate = librosa.load(io.BytesIO(response.content), sr=48000)
        resampled = librosa.resample(raw_audio, sample_rate, 44100)
        
        output_buffer = io.BytesIO()
        sf.write(output_buffer, resampled, 44100, 'PCM_16', format='wav')
        output_buffer.seek(0)
    
        return func.HttpResponse(output_buffer.read(), status_code=200)
    ```

    рдпрд╣ рдЯреЗрдХреНрд╕реНрдЯ рдХреЛ рд╕реНрдкреАрдЪ рдореЗрдВ рдмрджрд▓рдиреЗ рд╡рд╛рд▓реЗ HTTP рдЯреНрд░рд┐рдЧрд░ рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддрд╛ рд╣реИред рдпрд╣ JSON рдмреЙрдбреА рд╕реЗ рдЯреЗрдХреНрд╕реНрдЯ, рднрд╛рд╖рд╛ рдФрд░ рд╡реЙрдпрд╕ рдХреЛ рдирд┐рдХрд╛рд▓рддрд╛ рд╣реИ, рд╕реНрдкреАрдЪ рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреБрдЫ SSML рдмрдирд╛рддрд╛ рд╣реИ, рдлрд┐рд░ рд╕рдВрдмрдВрдзрд┐рдд REST API рдХреЛ рдПрдХреНрд╕реЗрд╕ рдЯреЛрдХрди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдкреНрд░рдорд╛рдгрд┐рдд рдХрд░рддрд╛ рд╣реИред рдпрд╣ REST API рдХреЙрд▓ рдСрдбрд┐рдпреЛ рдХреЛ 16-рдмрд┐рдЯ, 48KHz рдореЛрдиреЛ WAV рдлрд╝рд╛рдЗрд▓ рдХреЗ рд░реВрдк рдореЗрдВ рд▓реМрдЯрд╛рддрд╛ рд╣реИ, рдЬрд┐рд╕реЗ `playback_format` рдХреЗ рдорд╛рди рджреНрд╡рд╛рд░рд╛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдЬрд┐рд╕реЗ REST API рдХреЙрд▓ рдореЗрдВ рднреЗрдЬрд╛ рдЬрд╛рддрд╛ рд╣реИред

    рдлрд┐рд░ рдЗрд╕реЗ `librosa` рджреНрд╡рд╛рд░рд╛ 48KHz рдХреЗ рд╕реИрдВрдкрд▓ рд░реЗрдЯ рд╕реЗ 44.1KHz рдХреЗ рд╕реИрдВрдкрд▓ рд░реЗрдЯ рдореЗрдВ рдлрд┐рд░ рд╕реЗ рд╕реИрдВрдкрд▓ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдлрд┐рд░ рдЗрд╕ рдСрдбрд┐рдпреЛ рдХреЛ рдПрдХ рдмрд╛рдЗрдирд░реА рдмрдлрд░ рдореЗрдВ рд╕реЗрд╡ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдЬрд┐рд╕реЗ рдлрд┐рд░ рд▓реМрдЯрд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред

1. рдЕрдкрдиреА рдлрдВрдХреНрд╢рди рдРрдк рдХреЛ рд▓реЛрдХрд▓реА рдЪрд▓рд╛рдПрдВ, рдпрд╛ рдЗрд╕реЗ рдХреНрд▓рд╛рдЙрдб рдореЗрдВ рдбрд┐рдкреНрд▓реЙрдп рдХрд░реЗрдВред рдлрд┐рд░ рдЖрдк рдЗрд╕реЗ `text-to-timer` HTTP рдЯреНрд░рд┐рдЧрд░ рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд░рдиреЗ рдХреЗ рд╕рдорд╛рди рддрд░реАрдХреЗ рд╕реЗ `curl` рдЬреИрд╕реЗ рдЯреВрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдХреЙрд▓ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ рднрд╛рд╖рд╛, рд╡реЙрдпрд╕ рдФрд░ рдЯреЗрдХреНрд╕реНрдЯ рдХреЛ JSON рдмреЙрдбреА рдХреЗ рд░реВрдк рдореЗрдВ рдкрд╛рд╕ рдХрд░реЗрдВ:

    ```json
    {
        "language": "<language>",
        "voice": "<voice>",
        "text": "<text>"
    }
    ```

    `<language>` рдХреЛ рдЕрдкрдиреА рднрд╛рд╖рд╛ рд╕реЗ рдмрджрд▓реЗрдВ, рдЬреИрд╕реЗ `en-GB` рдпрд╛ `zh-CN`ред `<voice>` рдХреЛ рдЙрд╕ рд╡реЙрдпрд╕ рд╕реЗ рдмрджрд▓реЗрдВ рдЬрд┐рд╕реЗ рдЖрдк рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВред `<text>` рдХреЛ рдЙрд╕ рдЯреЗрдХреНрд╕реНрдЯ рд╕реЗ рдмрджрд▓реЗрдВ рдЬрд┐рд╕реЗ рдЖрдк рд╕реНрдкреАрдЪ рдореЗрдВ рдмрджрд▓рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВред рдЖрдк рдЖрдЙрдЯрдкреБрдЯ рдХреЛ рдПрдХ рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рд╕реЗрд╡ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдЗрд╕реЗ рдХрд┐рд╕реА рднреА рдСрдбрд┐рдпреЛ рдкреНрд▓реЗрдпрд░ рдХреЗ рд╕рд╛рде рдЪрд▓рд╛ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ WAV рдлрд╝рд╛рдЗрд▓ рдЪрд▓рд╛ рд╕рдХрддрд╛ рд╣реИред

    рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, "Hello" рдХреЛ US English рдореЗрдВ Jenny Neural рд╡реЙрдпрд╕ рдХреЗ рд╕рд╛рде рд╕реНрдкреАрдЪ рдореЗрдВ рдмрджрд▓рдиреЗ рдХреЗ рд▓рд┐рдП, рдЬрдм рдлрдВрдХреНрд╢рди рдРрдк рд▓реЛрдХрд▓реА рдЪрд▓ рд░рд╣реА рд╣реЛ, рддреЛ рдЖрдк рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд `curl` рдХрдорд╛рдВрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:

    ```sh
    curl -X GET 'http://localhost:7071/api/text-to-speech' \
         -H 'Content-Type: application/json' \
         -o hello.wav \
         -d '{
           "language":"en-US",
           "voice": "en-US-JennyNeural",
           "text": "Hello"
         }'
    ```

    рдпрд╣ рдСрдбрд┐рдпреЛ рдХреЛ рд╡рд░реНрддрдорд╛рди рдбрд╛рдпрд░реЗрдХреНрдЯрд░реА рдореЗрдВ `hello.wav` рдореЗрдВ рд╕реЗрд╡ рдХрд░реЗрдЧрд╛ред

> ЁЯТБ рдЖрдк рдЗрд╕ рдХреЛрдб рдХреЛ [code-spoken-response/functions](../../../../../6-consumer/lessons/3-spoken-feedback/code-spoken-response/functions) рдлрд╝реЛрд▓реНрдбрд░ рдореЗрдВ рдкрд╛ рд╕рдХрддреЗ рд╣реИрдВред

### рдХрд╛рд░реНрдп - рдЕрдкрдиреЗ Wio Terminal рд╕реЗ рд╕реНрдкреАрдЪ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ

1. рдпрджрд┐ `smart-timer` рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдкрд╣рд▓реЗ рд╕реЗ рдЦреБрд▓рд╛ рдирд╣реАрдВ рд╣реИ, рддреЛ рдЗрд╕реЗ VS Code рдореЗрдВ рдЦреЛрд▓реЗрдВред

1. `config.h` рд╣реЗрдбрд░ рдлрд╝рд╛рдЗрд▓ рдЦреЛрд▓реЗрдВ рдФрд░ рдЕрдкрдиреА рдлрдВрдХреНрд╢рди рдРрдк рдХреЗ рд▓рд┐рдП URL рдЬреЛрдбрд╝реЗрдВ:

    ```cpp
    const char *TEXT_TO_SPEECH_FUNCTION_URL = "<URL>";
    ```

    `<URL>` рдХреЛ рдЕрдкрдиреА рдлрдВрдХреНрд╢рди рдРрдк рдХреЗ `text-to-speech` HTTP рдЯреНрд░рд┐рдЧрд░ рдХреЗ URL рд╕реЗ рдмрджрд▓реЗрдВред рдпрд╣ `TEXT_TO_TIMER_FUNCTION_URL` рдХреЗ рдорд╛рди рдХреЗ рд╕рдорд╛рди рд╣реЛрдЧрд╛, рд╕рд┐рд╡рд╛рдп рдЗрд╕рдХреЗ рдХрд┐ рдлрдВрдХреНрд╢рди рдХрд╛ рдирд╛рдо `text-to-timer` рдХреЗ рдмрдЬрд╛рдп `text-to-speech` рд╣реЛрдЧрд╛ред

1. `text_to_speech.h` рд╣реЗрдбрд░ рдлрд╝рд╛рдЗрд▓ рдЦреЛрд▓реЗрдВ, рдФрд░ `TextToSpeech` рдХреНрд▓рд╛рд╕ рдХреЗ `public` рд╕реЗрдХреНрд╢рди рдореЗрдВ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдореЗрдердб рдЬреЛрдбрд╝реЗрдВ:

    ```cpp
    void convertTextToSpeech(String text)
    {
    }
    ```

1. `convertTextToSpeech` рдореЗрдердб рдореЗрдВ, рдлрдВрдХреНрд╢рди рдРрдк рдХреЛ рднреЗрдЬрдиреЗ рдХреЗ рд▓рд┐рдП JSON рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреЛрдб рдЬреЛрдбрд╝реЗрдВ:

    ```cpp
    DynamicJsonDocument doc(1024);
    doc["language"] = LANGUAGE;
    doc["voice"] = _voice;
    doc["text"] = text;

    String body;
    serializeJson(doc, body);
    ```

    рдпрд╣ рднрд╛рд╖рд╛, рд╡реЙрдпрд╕ рдФрд░ рдЯреЗрдХреНрд╕реНрдЯ рдХреЛ JSON рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдореЗрдВ рд▓рд┐рдЦрддрд╛ рд╣реИ, рдлрд┐рд░ рдЗрд╕реЗ рдПрдХ рд╕реНрдЯреНрд░рд┐рдВрдЧ рдореЗрдВ рд╕реАрд░рд┐рдпрд▓рд╛рдЗрдЬрд╝ рдХрд░рддрд╛ рд╣реИред

1. рдЗрд╕рдХреЗ рдиреАрдЪреЗ, рдлрдВрдХреНрд╢рди рдРрдк рдХреЛ рдХреЙрд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреЛрдб рдЬреЛрдбрд╝реЗрдВ:

    ```cpp
    HTTPClient httpClient;
    httpClient.begin(_client, TEXT_TO_SPEECH_FUNCTION_URL);

    int httpResponseCode = httpClient.POST(body);
    ```

    рдпрд╣ рдПрдХ HTTPClient рдмрдирд╛рддрд╛ рд╣реИ, рдлрд┐рд░ JSON рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ `text-to-speech` HTTP рдЯреНрд░рд┐рдЧрд░ рдХреЛ POST рдЕрдиреБрд░реЛрдз рдХрд░рддрд╛ рд╣реИред

1. рдпрджрд┐ рдХреЙрд▓ рд╕рдлрд▓ рд╣реЛрддреА рд╣реИ, рддреЛ рдлрдВрдХреНрд╢рди рдРрдк рдХреЙрд▓ рд╕реЗ рд▓реМрдЯрд╛рдП рдЧрдП рд░реЙ рдмрд╛рдЗрдирд░реА рдбреЗрдЯрд╛ рдХреЛ SD рдХрд╛рд░реНрдб рдкрд░ рдПрдХ рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рд╕реНрдЯреНрд░реАрдо рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреЛрдб рдЬреЛрдбрд╝реЗрдВ:

    ```cpp
    if (httpResponseCode == 200)
    {            
        File wav_file = SD.open("SPEECH.WAV", FILE_WRITE);
        httpClient.writeToStream(&wav_file);
        wav_file.close();
    }
    else
    {
        Serial.print("Failed to get speech - error ");
        Serial.println(httpResponseCode);
    }
    ```

    рдпрд╣ рдХреЛрдб рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдХреА рдЬрд╛рдВрдЪ рдХрд░рддрд╛ рд╣реИ, рдФрд░ рдпрджрд┐ рдпрд╣ 200 (рд╕рдлрд▓рддрд╛) рд╣реИ, рддреЛ рдмрд╛рдЗрдирд░реА рдбреЗрдЯрд╛ рдХреЛ SD рдХрд╛рд░реНрдб рдХреА рд░реВрдЯ рдореЗрдВ `SPEECH.WAV` рдирд╛рдордХ рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рд╕реНрдЯреНрд░реАрдо рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред

1. рдЗрд╕ рдореЗрдердб рдХреЗ рдЕрдВрдд рдореЗрдВ, HTTP рдХрдиреЗрдХреНрд╢рди рдХреЛ рдмрдВрдж рдХрд░реЗрдВ:

    ```cpp
    httpClient.end();
    ```

1. рдЕрдм рдЯреЗрдХреНрд╕реНрдЯ рдХреЛ рд╕реНрдкреАрдЪ рдореЗрдВ рдмрджрд▓рдХрд░ рдСрдбрд┐рдпреЛ рдореЗрдВ рдХрдиреНрд╡рд░реНрдЯ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред `main.cpp` рдлрд╝рд╛рдЗрд▓ рдореЗрдВ, `say` рдлрдВрдХреНрд╢рди рдХреЗ рдЕрдВрдд рдореЗрдВ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд▓рд╛рдЗрди рдЬреЛрдбрд╝реЗрдВ рддрд╛рдХрд┐ рдмреЛрд▓реЗ рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ рдЯреЗрдХреНрд╕реНрдЯ рдХреЛ рдСрдбрд┐рдпреЛ рдореЗрдВ рдмрджрд▓рд╛ рдЬрд╛ рд╕рдХреЗ:
```cpp
    textToSpeech.convertTextToSpeech(text);
    ```

### рдХрд╛рд░реНрдп - рдЕрдкрдиреЗ Wio Terminal рд╕реЗ рдСрдбрд┐рдпреЛ рдЪрд▓рд╛рдПрдВ

**рдЬрд▓реНрдж рдЖ рд░рд╣рд╛ рд╣реИ**

## рдЕрдкрдиреЗ рдлрд╝рдВрдХреНрд╢рдиреНрд╕ рдРрдк рдХреЛ рдХреНрд▓рд╛рдЙрдб рдкрд░ рдбрд┐рдкреНрд▓реЙрдп рдХрд░рдирд╛

рдлрд╝рдВрдХреНрд╢рдиреНрд╕ рдРрдк рдХреЛ рд▓реЛрдХрд▓реА рдЪрд▓рд╛рдиреЗ рдХрд╛ рдХрд╛рд░рдг рдпрд╣ рд╣реИ рдХрд┐ Linux рдкрд░ `librosa` Pip рдкреИрдХреЗрдЬ рдХреА рдПрдХ рдирд┐рд░реНрднрд░рддрд╛ рдРрд╕реА рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдкрд░ рд╣реИ рдЬреЛ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рдЗрдВрд╕реНрдЯреЙрд▓ рдирд╣реАрдВ рд╣реЛрддреА рд╣реИ, рдФрд░ рдЗрд╕реЗ рдлрд╝рдВрдХреНрд╢рди рдРрдк рдЪрд▓рд╛рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред рдлрд╝рдВрдХреНрд╢рди рдРрдкреНрд╕ рд╕рд░реНрд╡рд░рд▓реЗрд╕ рд╣реЛрддреЗ рд╣реИрдВ - рдЖрдкрдХреЗ рдкрд╛рд╕ рдХреЛрдИ рд╕рд░реНрд╡рд░ рдирд╣реАрдВ рд╣реЛрддрд╛ рдЬрд┐рд╕реЗ рдЖрдк рдЦреБрдж рдореИрдиреЗрдЬ рдХрд░ рд╕рдХреЗрдВ, рдЗрд╕рд▓рд┐рдП рдЗрд╕ рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдХреЛ рдкрд╣рд▓реЗ рд╕реЗ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░рдиреЗ рдХрд╛ рдХреЛрдИ рддрд░реАрдХрд╛ рдирд╣реАрдВ рд╣реИред

рдЗрд╕рдХрд╛ рд╕рдорд╛рдзрд╛рди рдпрд╣ рд╣реИ рдХрд┐ рдЖрдк рдЕрдкрдиреЗ рдлрд╝рдВрдХреНрд╢рдиреНрд╕ рдРрдк рдХреЛ рдПрдХ Docker рдХрдВрдЯреЗрдирд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдбрд┐рдкреНрд▓реЙрдп рдХрд░реЗрдВред рдпрд╣ рдХрдВрдЯреЗрдирд░ рдХреНрд▓рд╛рдЙрдб рджреНрд╡рд╛рд░рд╛ рддрдм рдбрд┐рдкреНрд▓реЙрдп рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдЬрдм рднреА рдЖрдкрдХреЗ рдлрд╝рдВрдХреНрд╢рди рдРрдк рдХрд╛ рдирдпрд╛ рдЗрдВрд╕реНрдЯреЗрдВрд╕ рд╢реБрд░реВ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ (рдЬреИрд╕реЗ рдХрд┐ рдЬрдм рдбрд┐рдорд╛рдВрдб рдЙрдкрд▓рдмреНрдз рд╕рдВрд╕рд╛рдзрдиреЛрдВ рд╕реЗ рдЕрдзрд┐рдХ рд╣реЛ рдЬрд╛рддреА рд╣реИ, рдпрд╛ рдпрджрд┐ рдлрд╝рдВрдХреНрд╢рди рдРрдк рдХрд╛ рдЙрдкрдпреЛрдЧ рдХреБрдЫ рд╕рдордп рд╕реЗ рдирд╣реАрдВ рд╣реБрдЖ рд╣реИ рдФрд░ рдЗрд╕реЗ рдмрдВрдж рдХрд░ рджрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ)ред

Linux рдкрд░ рдХрд╕реНрдЯрдо рдХрдВрдЯреЗрдирд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдлрд╝рдВрдХреНрд╢рди рдмрдирд╛рдиреЗ рдФрд░ Docker рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдбрд┐рдкреНрд▓реЙрдп рдХрд░рдиреЗ рдХреЗ рдирд┐рд░реНрджреЗрд╢ рдЖрдк [Microsoft Docs рдкрд░ Linux рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдХрд╕реНрдЯрдо рдХрдВрдЯреЗрдирд░ рдореЗрдВ рдлрд╝рдВрдХреНрд╢рди рдмрдирд╛рдиреЗ рдХреА рдбрд╛рдХреНрдпреВрдореЗрдВрдЯреЗрд╢рди](https://docs.microsoft.com/azure/azure-functions/functions-create-function-linux-custom-image?WT.mc_id=academic-17441-jabenn&tabs=bash%2Cazurecli&pivots=programming-language-python) рдореЗрдВ рдкрд╛ рд╕рдХрддреЗ рд╣реИрдВред

рдПрдХ рдмрд╛рд░ рдпрд╣ рдбрд┐рдкреНрд▓реЙрдп рд╣реЛ рдЬрд╛рдиреЗ рдХреЗ рдмрд╛рдж, рдЖрдк рдЕрдкрдиреЗ Wio Terminal рдХреЛрдб рдХреЛ рдЗрд╕ рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкреЛрд░реНрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ:

1. Azure Functions рдкреНрд░рдорд╛рдгрдкрддреНрд░ рдХреЛ `config.h` рдореЗрдВ рдЬреЛрдбрд╝реЗрдВ:

    ```cpp
    const char *FUNCTIONS_CERTIFICATE =
        "-----BEGIN CERTIFICATE-----\r\n"
        "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\r\n"
        "-----END CERTIFICATE-----\r\n";
    ```

1. рд╕рднреА `<WiFiClient.h>` рдЗрдирдХреНрд▓реВрдбреНрд╕ рдХреЛ `<WiFiClientSecure.h>` рдореЗрдВ рдмрджрд▓реЗрдВред

1. рд╕рднреА `WiFiClient` рдлрд╝реАрд▓реНрдбреНрд╕ рдХреЛ `WiFiClientSecure` рдореЗрдВ рдмрджрд▓реЗрдВред

1. рд╣рд░ рдЙрд╕ рдХреНрд▓рд╛рд╕ рдореЗрдВ рдЬрд┐рд╕рдореЗрдВ `WiFiClientSecure` рдлрд╝реАрд▓реНрдб рд╣реИ, рдПрдХ рдХрдВрд╕реНрдЯреНрд░рдХреНрдЯрд░ рдЬреЛрдбрд╝реЗрдВ рдФрд░ рдЙрд╕ рдХрдВрд╕реНрдЯреНрд░рдХреНрдЯрд░ рдореЗрдВ рдкреНрд░рдорд╛рдгрдкрддреНрд░ рд╕реЗрдЯ рдХрд░реЗрдВ:

    ```cpp
    _client.setCACert(FUNCTIONS_CERTIFICATE);
    ```

**рдЕрд╕реНрд╡реАрдХрд░рдг**:  
рдпрд╣ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ AI рдЕрдиреБрд╡рд╛рдж рд╕реЗрд╡рд╛ [Co-op Translator](https://github.com/Azure/co-op-translator) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЕрдиреБрд╡рд╛рджрд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред рдЬрдмрдХрд┐ рд╣рдо рд╕рдЯреАрдХрддрд╛ рдХреЗ рд▓рд┐рдП рдкреНрд░рдпрд╛рд╕рд░рдд рд╣реИрдВ, рдХреГрдкрдпрд╛ рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдЕрдиреБрд╡рд╛рдж рдореЗрдВ рддреНрд░реБрдЯрд┐рдпрд╛рдВ рдпрд╛ рдЕрд╢реБрджреНрдзрд┐рдпрд╛рдВ рд╣реЛ рд╕рдХрддреА рд╣реИрдВред рдореВрд▓ рднрд╛рд╖рд╛ рдореЗрдВ рдЙрдкрд▓рдмреНрдз рдореВрд▓ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдХреЛ рдкреНрд░рд╛рдорд╛рдгрд┐рдХ рд╕реНрд░реЛрдд рдорд╛рдирд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред рдорд╣рддреНрд╡рдкреВрд░реНрдг рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рд▓рд┐рдП, рдкреЗрд╢реЗрд╡рд░ рдорд╛рдирд╡ рдЕрдиреБрд╡рд╛рдж рдХреА рд╕рд┐рдлрд╛рд░рд┐рд╢ рдХреА рдЬрд╛рддреА рд╣реИред рдЗрд╕ рдЕрдиреБрд╡рд╛рдж рдХреЗ рдЙрдкрдпреЛрдЧ рд╕реЗ рдЙрддреНрдкрдиреНрди рдХрд┐рд╕реА рднреА рдЧрд▓рддрдлрд╣рдореА рдпрд╛ рдЧрд▓рдд рд╡реНрдпрд╛рдЦреНрдпрд╛ рдХреЗ рд▓рд┐рдП рд╣рдо рдЙрддреНрддрд░рджрд╛рдпреА рдирд╣реАрдВ рд╣реИрдВред