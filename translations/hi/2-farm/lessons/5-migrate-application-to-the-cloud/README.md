<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "5f2d2f4a5a023c93ab34a0cc5b47c0c4",
  "translation_date": "2025-08-25T16:53:49+00:00",
  "source_file": "2-farm/lessons/5-migrate-application-to-the-cloud/README.md",
  "language_code": "hi"
}
-->
# рдЕрдкрдиреА рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд▓реЙрдЬрд┐рдХ рдХреЛ рдХреНрд▓рд╛рдЙрдб рдореЗрдВ рдорд╛рдЗрдЧреНрд░реЗрдЯ рдХрд░реЗрдВ

![рдЗрд╕ рдкрд╛рда рдХрд╛ рд╕реНрдХреЗрдЪ рдиреЛрдЯ](../../../../../translated_images/lesson-9.dfe99c8e891f48e179724520da9f5794392cf9a625079281ccdcbf09bd85e1b6.hi.jpg)

> рд╕реНрдХреЗрдЪ рдиреЛрдЯ [рдирд┐рддреНрдпрд╛ рдирд░рд╕рд┐рдореНрд╣рди](https://github.com/nitya) рджреНрд╡рд╛рд░рд╛ред рдмрдбрд╝реЗ рд╕рдВрд╕реНрдХрд░рдг рдХреЗ рд▓рд┐рдП рдЫрд╡рд┐ рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВред

рдпрд╣ рдкрд╛рда [IoT for Beginners Project 2 - Digital Agriculture series](https://youtube.com/playlist?list=PLmsFUfdnGr3yCutmcVg6eAUEfsGiFXgcx) рдХреЗ рд╣рд┐рд╕реНрд╕реЗ рдХреЗ рд░реВрдк рдореЗрдВ [Microsoft Reactor](https://developer.microsoft.com/reactor/?WT.mc_id=academic-17441-jabenn) рд╕реЗ рд╕рд┐рдЦрд╛рдпрд╛ рдЧрдпрд╛ рдерд╛ред

[![рдЕрдкрдиреЗ IoT рдбрд┐рд╡рд╛рдЗрд╕ рдХреЛ рд╕рд░реНрд╡рд░рд▓реЗрд╕ рдХреЛрдб рд╕реЗ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░реЗрдВ](https://img.youtube.com/vi/VVZDcs5u1_I/0.jpg)](https://youtu.be/VVZDcs5u1_I)

## рдкреНрд░реА-рд▓реЗрдХреНрдЪрд░ рдХреНрд╡рд┐рдЬрд╝

[рдкреНрд░реА-рд▓реЗрдХреНрдЪрд░ рдХреНрд╡рд┐рдЬрд╝](https://black-meadow-040d15503.1.azurestaticapps.net/quiz/17)

## рдкрд░рд┐рдЪрдп

рдкрд┐рдЫрд▓реЗ рдкрд╛рда рдореЗрдВ, рдЖрдкрдиреЗ рд╕реАрдЦрд╛ рдХрд┐ рдЕрдкрдиреЗ рдкреМрдзреЛрдВ рдХреА рдорд┐рдЯреНрдЯреА рдХреА рдирдореА рдХреА рдирд┐рдЧрд░рд╛рдиреА рдФрд░ рд░рд┐рд▓реЗ рдирд┐рдпрдВрддреНрд░рдг рдХреЛ рдХреНрд▓рд╛рдЙрдб-рдЖрдзрд╛рд░рд┐рдд IoT рд╕реЗрд╡рд╛ рд╕реЗ рдХреИрд╕реЗ рдЬреЛрдбрд╝рд╛ рдЬрд╛рдПред рдЕрдЧрд▓рд╛ рдХрджрдо рдЙрд╕ рд╕рд░реНрд╡рд░ рдХреЛрдб рдХреЛ рдХреНрд▓рд╛рдЙрдб рдореЗрдВ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рдирд╛ рд╣реИ рдЬреЛ рд░рд┐рд▓реЗ рдХреЗ рд╕рдордп рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░рддрд╛ рд╣реИред рдЗрд╕ рдкрд╛рда рдореЗрдВ, рдЖрдк рд╕реАрдЦреЗрдВрдЧреЗ рдХрд┐ рдЗрд╕реЗ рд╕рд░реНрд╡рд░рд▓реЗрд╕ рдлрдВрдХреНрд╢рдиреНрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдХреИрд╕реЗ рдХрд░рдирд╛ рд╣реИред

рдЗрд╕ рдкрд╛рда рдореЗрдВ рд╣рдо рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╡рд┐рд╖рдпреЛрдВ рдХреЛ рдХрд╡рд░ рдХрд░реЗрдВрдЧреЗ:

* [рд╕рд░реНрд╡рд░рд▓реЗрд╕ рдХреНрдпрд╛ рд╣реИ?](../../../../../2-farm/lessons/5-migrate-application-to-the-cloud)
* [рдПрдХ рд╕рд░реНрд╡рд░рд▓реЗрд╕ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдмрдирд╛рдПрдВ](../../../../../2-farm/lessons/5-migrate-application-to-the-cloud)
* [IoT рд╣рдм рдЗрд╡реЗрдВрдЯ рдЯреНрд░рд┐рдЧрд░ рдмрдирд╛рдПрдВ](../../../../../2-farm/lessons/5-migrate-application-to-the-cloud)
* [рд╕рд░реНрд╡рд░рд▓реЗрд╕ рдХреЛрдб рд╕реЗ рдбрд╛рдпрд░реЗрдХреНрдЯ рдореЗрдердб рд░рд┐рдХреНрд╡реЗрд╕реНрдЯ рднреЗрдЬреЗрдВ](../../../../../2-farm/lessons/5-migrate-application-to-the-cloud)
* [рдЕрдкрдиреЗ рд╕рд░реНрд╡рд░рд▓реЗрд╕ рдХреЛрдб рдХреЛ рдХреНрд▓рд╛рдЙрдб рдореЗрдВ рдбрд┐рдкреНрд▓реЙрдп рдХрд░реЗрдВ](../../../../../2-farm/lessons/5-migrate-application-to-the-cloud)

## рд╕рд░реНрд╡рд░рд▓реЗрд╕ рдХреНрдпрд╛ рд╣реИ?

рд╕рд░реНрд╡рд░рд▓реЗрд╕, рдпрд╛ рд╕рд░реНрд╡рд░рд▓реЗрд╕ рдХрдВрдкреНрдпреВрдЯрд┐рдВрдЧ, рдЫреЛрдЯреЗ рдХреЛрдб рдмреНрд▓реЙрдХреНрд╕ рдмрдирд╛рдиреЗ рдХрд╛ рддрд░реАрдХрд╛ рд╣реИ рдЬреЛ рд╡рд┐рднрд┐рдиреНрди рдкреНрд░рдХрд╛рд░ рдХреА рдШрдЯрдирд╛рдУрдВ рдХреЗ рдЬрд╡рд╛рдм рдореЗрдВ рдХреНрд▓рд╛рдЙрдб рдореЗрдВ рдЪрд▓рддреЗ рд╣реИрдВред рдЬрдм рдШрдЯрдирд╛ рд╣реЛрддреА рд╣реИ, рддреЛ рдЖрдкрдХрд╛ рдХреЛрдб рдЪрд▓рддрд╛ рд╣реИ рдФрд░ рдШрдЯрдирд╛ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдбреЗрдЯрд╛ рдкреНрд░рд╛рдкреНрдд рдХрд░рддрд╛ рд╣реИред рдпреЗ рдШрдЯрдирд╛рдПрдВ рдХрдИ рд╕реНрд░реЛрддреЛрдВ рд╕реЗ рд╣реЛ рд╕рдХрддреА рд╣реИрдВ, рдЬреИрд╕реЗ рд╡реЗрдм рдЕрдиреБрд░реЛрдз, рдХрд┐рд╕реА рдХрддрд╛рд░ рдореЗрдВ рдбрд╛рд▓реЗ рдЧрдП рд╕рдВрджреЗрд╢, рдбреЗрдЯрд╛рдмреЗрд╕ рдореЗрдВ рдбреЗрдЯрд╛ рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрди, рдпрд╛ IoT рдбрд┐рд╡рд╛рдЗрд╕ рджреНрд╡рд╛рд░рд╛ IoT рд╕реЗрд╡рд╛ рдХреЛ рднреЗрдЬреЗ рдЧрдП рд╕рдВрджреЗрд╢ред

![IoT рд╕реЗрд╡рд╛ рд╕реЗ рд╕рд░реНрд╡рд░рд▓реЗрд╕ рд╕реЗрд╡рд╛ рддрдХ рднреЗрдЬреЗ рдЬрд╛ рд░рд╣реЗ рд╕рдВрджреЗрд╢, рдЬреЛ рдПрдХ рд╕рд╛рде рдХрдИ рдлрдВрдХреНрд╢рдиреНрд╕ рджреНрд╡рд╛рд░рд╛ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд┐рдП рдЬрд╛ рд░рд╣реЗ рд╣реИрдВ](../../../../../translated_images/iot-messages-to-serverless.0194da1cc0732bb7d0f823aed3fce54735c6b1ad3bf36089804d8aaefc0a774f.hi.png)

> ЁЯТБ рдпрджрд┐ рдЖрдкрдиреЗ рдкрд╣рд▓реЗ рдбреЗрдЯрд╛рдмреЗрд╕ рдЯреНрд░рд┐рдЧрд░реНрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рд╣реИ, рддреЛ рдЗрд╕реЗ рдЙрд╕реА рддрд░рд╣ рд╕рдордЭ рд╕рдХрддреЗ рд╣реИрдВ, рдЬреИрд╕реЗ рдХреЛрдб рдХрд┐рд╕реА рдШрдЯрдирд╛ рдЬреИрд╕реЗ рдХрд┐ рдкрдВрдХреНрддрд┐ рдбрд╛рд▓рдиреЗ рдкрд░ рдЯреНрд░рд┐рдЧрд░ рд╣реЛрддрд╛ рд╣реИред

![рдЬрдм рдХрдИ рдШрдЯрдирд╛рдПрдВ рдПрдХ рд╕рд╛рде рднреЗрдЬреА рдЬрд╛рддреА рд╣реИрдВ, рддреЛ рд╕рд░реНрд╡рд░рд▓реЗрд╕ рд╕реЗрд╡рд╛ рдЙрдиреНрд╣реЗрдВ рдПрдХ рд╕рд╛рде рдЪрд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рд╕реНрдХреЗрд▓ рдХрд░рддреА рд╣реИ](../../../../../translated_images/serverless-scaling.f8c769adf0413fd17be1af4f07ff63016b347e2ff869be6c4abb211f9e93909d.hi.png)

рдЖрдкрдХрд╛ рдХреЛрдб рдХреЗрд╡рд▓ рддрдм рдЪрд▓рддрд╛ рд╣реИ рдЬрдм рдШрдЯрдирд╛ рд╣реЛрддреА рд╣реИ, рдЕрдиреНрдп рд╕рдордп рдореЗрдВ рдЖрдкрдХрд╛ рдХреЛрдб рд╕рдХреНрд░рд┐рдп рдирд╣реАрдВ рд░рд╣рддрд╛ред рдШрдЯрдирд╛ рд╣реЛрддреА рд╣реИ, рдЖрдкрдХрд╛ рдХреЛрдб рд▓реЛрдб рд╣реЛрддрд╛ рд╣реИ рдФрд░ рдЪрд▓рддрд╛ рд╣реИред рдпрд╣ рд╕рд░реНрд╡рд░рд▓реЗрд╕ рдХреЛ рдмрд╣реБрдд рд╕реНрдХреЗрд▓реЗрдмрд▓ рдмрдирд╛рддрд╛ рд╣реИ - рдпрджрд┐ рдХрдИ рдШрдЯрдирд╛рдПрдВ рдПрдХ рд╕рд╛рде рд╣реЛрддреА рд╣реИрдВ, рддреЛ рдХреНрд▓рд╛рдЙрдб рдкреНрд░рджрд╛рддрд╛ рдЖрдкрдХреЗ рдлрдВрдХреНрд╢рди рдХреЛ рдЬрд┐рддрдиреА рдмрд╛рд░ рдЬрд░реВрд░рдд рд╣реЛ рдЙрддрдиреА рдмрд╛рд░ рдПрдХ рд╕рд╛рде рдЪрд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рд╕реНрдХреЗрд▓ рдХрд░ рд╕рдХрддрд╛ рд╣реИред рдЗрд╕рдХрд╛ рдиреБрдХрд╕рд╛рди рдпрд╣ рд╣реИ рдХрд┐ рдпрджрд┐ рдЖрдкрдХреЛ рдШрдЯрдирд╛рдУрдВ рдХреЗ рдмреАрдЪ рдЬрд╛рдирдХрд╛рд░реА рд╕рд╛рдЭрд╛ рдХрд░рдиреА рд╣реИ, рддреЛ рдЖрдкрдХреЛ рдЗрд╕реЗ рдореЗрдореЛрд░реА рдореЗрдВ рд╕реНрдЯреЛрд░ рдХрд░рдиреЗ рдХреЗ рдмрдЬрд╛рдп рдХрд┐рд╕реА рдбреЗрдЯрд╛рдмреЗрд╕ рдореЗрдВ рд╕рд╣реЗрдЬрдирд╛ рд╣реЛрдЧрд╛ред

рдЖрдкрдХрд╛ рдХреЛрдб рдПрдХ рдлрдВрдХреНрд╢рди рдХреЗ рд░реВрдк рдореЗрдВ рд▓рд┐рдЦрд╛ рдЬрд╛рддрд╛ рд╣реИ рдЬреЛ рдШрдЯрдирд╛ рдХреЗ рд╡рд┐рд╡рд░рдг рдХреЛ рдПрдХ рдкреИрд░рд╛рдореАрдЯрд░ рдХреЗ рд░реВрдк рдореЗрдВ рд▓реЗрддрд╛ рд╣реИред рдЖрдк рдЗрди рд╕рд░реНрд╡рд░рд▓реЗрд╕ рдлрдВрдХреНрд╢рдиреНрд╕ рдХреЛ рд▓рд┐рдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдХрдИ рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рднрд╛рд╖рд╛рдУрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

> ЁЯОУ рд╕рд░реНрд╡рд░рд▓реЗрд╕ рдХреЛ рдлрдВрдХреНрд╢рдиреНрд╕ рдРрдЬрд╝ рдП рд╕рд░реНрд╡рд┐рд╕ (FaaS) рднреА рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рдкреНрд░рддреНрдпреЗрдХ рдЗрд╡реЗрдВрдЯ рдЯреНрд░рд┐рдЧрд░ рдХреЛ рдХреЛрдб рдореЗрдВ рдПрдХ рдлрдВрдХреНрд╢рди рдХреЗ рд░реВрдк рдореЗрдВ рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред

рдирд╛рдо рдХреЗ рдмрд╛рд╡рдЬреВрдж, рд╕рд░реНрд╡рд░рд▓реЗрд╕ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рд╕рд░реНрд╡рд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИред рдирд╛рдордХрд░рдг рдЗрд╕рд▓рд┐рдП рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рдПрдХ рдбреЗрд╡рд▓рдкрд░ рдХреЗ рд░реВрдк рдореЗрдВ рдЖрдкрдХреЛ рдЕрдкрдиреЗ рдХреЛрдб рдХреЛ рдЪрд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╕рд░реНрд╡рд░реЛрдВ рдХреА рдкрд░рд╡рд╛рд╣ рдирд╣реАрдВ рд╣реЛрддреА, рдЖрдкрдХреЛ рдХреЗрд╡рд▓ рдпрд╣ рдкрд░рд╡рд╛рд╣ рд╣реЛрддреА рд╣реИ рдХрд┐ рдЖрдкрдХрд╛ рдХреЛрдб рдШрдЯрдирд╛ рдХреЗ рдЬрд╡рд╛рдм рдореЗрдВ рдЪрд▓реЗред рдХреНрд▓рд╛рдЙрдб рдкреНрд░рджрд╛рддрд╛ рдХреЗ рдкрд╛рд╕ рдПрдХ рд╕рд░реНрд╡рд░рд▓реЗрд╕ *рд░рдирдЯрд╛рдЗрдо* рд╣реЛрддрд╛ рд╣реИ рдЬреЛ рд╕рд░реНрд╡рд░, рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ, рд╕реНрдЯреЛрд░реЗрдЬ, CPU, рдореЗрдореЛрд░реА рдФрд░ рдЖрдкрдХреЗ рдХреЛрдб рдХреЛ рдЪрд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рдЕрдиреНрдп рд╕рднреА рдЪреАрдЬреЛрдВ рдХреЛ рдкреНрд░рдмрдВрдзрд┐рдд рдХрд░рддрд╛ рд╣реИред рдЗрд╕ рдореЙрдбрд▓ рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рдЖрдк рд╕реЗрд╡рд╛ рдХреЗ рд▓рд┐рдП рдкреНрд░рддрд┐ рд╕рд░реНрд╡рд░ рднреБрдЧрддрд╛рди рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗ, рдХреНрдпреЛрдВрдХрд┐ рдХреЛрдИ рд╕рд░реНрд╡рд░ рдирд╣реАрдВ рд╣реИред рдЗрд╕рдХреЗ рдмрдЬрд╛рдп рдЖрдк рдЕрдкрдиреЗ рдХреЛрдб рдХреЗ рдЪрд▓рдиреЗ рдХреЗ рд╕рдордп рдФрд░ рдЙрдкрдпреЛрдЧ рдХреА рдЧрдИ рдореЗрдореЛрд░реА рдХреЗ рд▓рд┐рдП рднреБрдЧрддрд╛рди рдХрд░рддреЗ рд╣реИрдВред

> ЁЯТ░ рд╕рд░реНрд╡рд░рд▓реЗрд╕ рдХреНрд▓рд╛рдЙрдб рдореЗрдВ рдХреЛрдб рдЪрд▓рд╛рдиреЗ рдХреЗ рд╕рдмрд╕реЗ рд╕рд╕реНрддреЗ рддрд░реАрдХреЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ рд╣реИред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рд▓реЗрдЦрди рдХреЗ рд╕рдордп, рдПрдХ рдХреНрд▓рд╛рдЙрдб рдкреНрд░рджрд╛рддрд╛ рдЖрдкрдХреЗ рд╕рднреА рд╕рд░реНрд╡рд░рд▓реЗрд╕ рдлрдВрдХреНрд╢рдиреНрд╕ рдХреЛ рдПрдХ рдорд╣реАрдиреЗ рдореЗрдВ рд╕рдВрдпреБрдХреНрдд рд░реВрдк рд╕реЗ 1,000,000 рдмрд╛рд░ рдЪрд▓рд╛рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ, рдЙрд╕рдХреЗ рдмрд╛рдж рд╡реЗ рдкреНрд░рддреНрдпреЗрдХ 1,000,000 рдирд┐рд╖реНрдкрд╛рджрди рдХреЗ рд▓рд┐рдП US$0.20 рдЪрд╛рд░реНрдЬ рдХрд░рддреЗ рд╣реИрдВред рдЬрдм рдЖрдкрдХрд╛ рдХреЛрдб рдирд╣реАрдВ рдЪрд▓ рд░рд╣рд╛ рд╣реЛрддрд╛ рд╣реИ, рддреЛ рдЖрдк рднреБрдЧрддрд╛рди рдирд╣реАрдВ рдХрд░рддреЗред

IoT рдбреЗрд╡рд▓рдкрд░ рдХреЗ рд░реВрдк рдореЗрдВ, рд╕рд░реНрд╡рд░рд▓реЗрд╕ рдореЙрдбрд▓ рдЖрджрд░реНрд╢ рд╣реИред рдЖрдк рдПрдХ рдлрдВрдХреНрд╢рди рд▓рд┐рдЦ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ рдХрд┐рд╕реА рднреА IoT рдбрд┐рд╡рд╛рдЗрд╕ рджреНрд╡рд╛рд░рд╛ рдЖрдкрдХреЗ рдХреНрд▓рд╛рдЙрдб-рд╣реЛрд╕реНрдЯреЗрдб IoT рд╕реЗрд╡рд╛ рдХреЛ рднреЗрдЬреЗ рдЧрдП рд╕рдВрджреЗрд╢реЛрдВ рдХреЗ рдЬрд╡рд╛рдм рдореЗрдВ рдХреЙрд▓ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рдЖрдкрдХрд╛ рдХреЛрдб рд╕рднреА рднреЗрдЬреЗ рдЧрдП рд╕рдВрджреЗрд╢реЛрдВ рдХреЛ рд╕рдВрднрд╛рд▓реЗрдЧрд╛, рд▓реЗрдХрд┐рди рдХреЗрд╡рд▓ рддрдм рдЪрд▓реЗрдЧрд╛ рдЬрдм рдЬрд░реВрд░рдд рд╣реЛред

тЬЕ рдЙрд╕ рдХреЛрдб рдХреЛ рджреЗрдЦреЗрдВ рдЬреЛ рдЖрдкрдиреЗ MQTT рдкрд░ рд╕рдВрджреЗрд╢реЛрдВ рдХреЛ рд╕реБрдирдиреЗ рдХреЗ рд▓рд┐рдП рд╕рд░реНрд╡рд░ рдХреЛрдб рдХреЗ рд░реВрдк рдореЗрдВ рд▓рд┐рдЦрд╛ рдерд╛ред рдпрд╣ рдХреНрд▓рд╛рдЙрдб рдореЗрдВ рд╕рд░реНрд╡рд░рд▓реЗрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдХреИрд╕реЗ рдЪрд▓ рд╕рдХрддрд╛ рд╣реИ? рдЖрдкрдХреЛ рд▓рдЧрддрд╛ рд╣реИ рдХрд┐ рдХреЛрдб рдХреЛ рд╕рд░реНрд╡рд░рд▓реЗрд╕ рдХрдВрдкреНрдпреВрдЯрд┐рдВрдЧ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреИрд╕реЗ рдмрджрд▓рд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ?

> ЁЯТБ рд╕рд░реНрд╡рд░рд▓реЗрд╕ рдореЙрдбрд▓ рдЕрдиреНрдп рдХреНрд▓рд╛рдЙрдб рд╕реЗрд╡рд╛рдУрдВ рдореЗрдВ рднреА рдЬрд╛ рд░рд╣рд╛ рд╣реИ, рдХреЛрдб рдЪрд▓рд╛рдиреЗ рдХреЗ рдЕрд▓рд╛рд╡рд╛ред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдХреНрд▓рд╛рдЙрдб рдореЗрдВ рд╕рд░реНрд╡рд░рд▓реЗрд╕ рдбреЗрдЯрд╛рдмреЗрд╕ рдЙрдкрд▓рдмреНрдз рд╣реИрдВ рдЬреЛ рд╕рд░реНрд╡рд░рд▓реЗрд╕ рдкреНрд░рд╛рдЗрд╕рд┐рдВрдЧ рдореЙрдбрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ, рдЬрд╣рд╛рдВ рдЖрдк рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЗ рдЦрд┐рд▓рд╛рдл рдХрд┐рдП рдЧрдП рдкреНрд░рддреНрдпреЗрдХ рдЕрдиреБрд░реЛрдз рдХреЗ рд▓рд┐рдП рднреБрдЧрддрд╛рди рдХрд░рддреЗ рд╣реИрдВ, рдЬреИрд╕реЗ рдХрд┐ рдХреНрд╡реЗрд░реА рдпрд╛ рдЗрдирд╕рд░реНрдЯред рдЖрдорддреМрд░ рдкрд░ рдпрд╣ рдореВрд▓реНрдп рдирд┐рд░реНрдзрд╛рд░рдг рдЗрд╕ рдмрд╛рдд рдкрд░ рдЖрдзрд╛рд░рд┐рдд рд╣реЛрддрд╛ рд╣реИ рдХрд┐ рдЕрдиреБрд░реЛрдз рдХреЛ рд╕реЗрд╡рд╛ рджреЗрдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рддрдирд╛ рдХрд╛рдо рдХрд┐рдпрд╛ рдЧрдпрд╛ред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдПрдХ рдкреНрд░рд╛рдердорд┐рдХ рдХреБрдВрдЬреА рдХреЗ рдЦрд┐рд▓рд╛рдл рдПрдХ рдкрдВрдХреНрддрд┐ рдХрд╛ рдЪрдпрди рдПрдХ рдЬрдЯрд┐рд▓ рдСрдкрд░реЗрд╢рди рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рдХрдо рдЦрд░реНрдЪ рд╣реЛрдЧрд╛ рдЬреЛ рдХрдИ рддрд╛рд▓рд┐рдХрд╛рдУрдВ рдХреЛ рдЬреЛрдбрд╝рддрд╛ рд╣реИ рдФрд░ рд╣рдЬрд╛рд░реЛрдВ рдкрдВрдХреНрддрд┐рдпреЛрдВ рдХреЛ рд▓реМрдЯрд╛рддрд╛ рд╣реИред

## рдПрдХ рд╕рд░реНрд╡рд░рд▓реЗрд╕ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдмрдирд╛рдПрдВ

Microsoft рдХрд╛ рд╕рд░реНрд╡рд░рд▓реЗрд╕ рдХрдВрдкреНрдпреВрдЯрд┐рдВрдЧ рд╕реЗрд╡рд╛ Azure Functions рдХрд╣рд▓рд╛рддреА рд╣реИред

![Azure Functions рдХрд╛ рд▓реЛрдЧреЛ](../../../../../translated_images/azure-functions-logo.1cfc8e3204c9c44aaf80fcf406fc8544d80d7f00f8d3e8ed6fed764563e17564.hi.png)

рдиреАрдЪреЗ рджрд┐рдпрд╛ рдЧрдпрд╛ рдЫреЛрдЯрд╛ рд╡реАрдбрд┐рдпреЛ Azure Functions рдХрд╛ рдЕрд╡рд▓реЛрдХрди рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ:

[![Azure Functions рдЕрд╡рд▓реЛрдХрди рд╡реАрдбрд┐рдпреЛ](https://img.youtube.com/vi/8-jz5f_JyEQ/0.jpg)](https://www.youtube.com/watch?v=8-jz5f_JyEQ)

> ЁЯОе рдКрдкрд░ рджреА рдЧрдИ рдЫрд╡рд┐ рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВ рд╡реАрдбрд┐рдпреЛ рджреЗрдЦрдиреЗ рдХреЗ рд▓рд┐рдПред

тЬЕ рдХреБрдЫ рд╕рдордп рдирд┐рдХрд╛рд▓реЗрдВ рдФрд░ [Microsoft Azure Functions рджрд╕реНрддрд╛рд╡реЗрдЬрд╝](https://docs.microsoft.com/azure/azure-functions/functions-overview?WT.mc_id=academic-17441-jabenn) рдореЗрдВ Azure Functions рдХрд╛ рдЕрд╡рд▓реЛрдХрди рдкрдврд╝реЗрдВред

Azure Functions рд▓рд┐рдЦрдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдк рдЕрдкрдиреА рдкрд╕рдВрдж рдХреА рднрд╛рд╖рд╛ рдореЗрдВ Azure Functions рдРрдк рд╕реЗ рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВред Azure Functions Python, JavaScript, TypeScript, C#, F#, Java, рдФрд░ Powershell рдХреЛ рд╕рдкреЛрд░реНрдЯ рдХрд░рддрд╛ рд╣реИред рдЗрд╕ рдкрд╛рда рдореЗрдВ, рдЖрдк Python рдореЗрдВ Azure Functions рдРрдк рд▓рд┐рдЦрдирд╛ рд╕реАрдЦреЗрдВрдЧреЗред

> ЁЯТБ Azure Functions рдХрд╕реНрдЯрдо рд╣реИрдВрдбрд▓рд░реНрд╕ рдХреЛ рднреА рд╕рдкреЛрд░реНрдЯ рдХрд░рддрд╛ рд╣реИ, рдЬрд┐рд╕рд╕реЗ рдЖрдк рдЕрдкрдиреЗ рдлрдВрдХреНрд╢рдиреНрд╕ рдХреЛ рдХрд┐рд╕реА рднреА рднрд╛рд╖рд╛ рдореЗрдВ рд▓рд┐рдЦ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ HTTP рдЕрдиреБрд░реЛрдзреЛрдВ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддреА рд╣реИ, рдЬрд┐рд╕рдореЗрдВ COBOL рдЬреИрд╕реА рдкреБрд░рд╛рдиреА рднрд╛рд╖рд╛рдПрдВ рднреА рд╢рд╛рдорд┐рд▓ рд╣реИрдВред

Functions рдРрдкреНрд╕ рдореЗрдВ рдПрдХ рдпрд╛ рдЕрдзрд┐рдХ *рдЯреНрд░рд┐рдЧрд░реНрд╕* рд╣реЛрддреЗ рд╣реИрдВ - рдлрдВрдХреНрд╢рдиреНрд╕ рдЬреЛ рдШрдЯрдирд╛рдУрдВ рдХреЗ рдЬрд╡рд╛рдм рдореЗрдВ рдЪрд▓рддреЗ рд╣реИрдВред рдЖрдк рдПрдХ Functions рдРрдк рдореЗрдВ рдХрдИ рдЯреНрд░рд┐рдЧрд░реНрд╕ рд░рдЦ рд╕рдХрддреЗ рд╣реИрдВ, рдЬреЛ рд╕рднреА рд╕рд╛рдорд╛рдиреНрдп рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рд╕рд╛рдЭрд╛ рдХрд░рддреЗ рд╣реИрдВред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЗ Functions рдРрдк рдХреЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдЖрдкрдХреЗ IoT рд╣рдм рдХрд╛ рдХрдиреЗрдХреНрд╢рди рд╡рд┐рд╡рд░рдг рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рдФрд░ рдРрдк рдХреЗ рд╕рднреА рдлрдВрдХреНрд╢рдиреНрд╕ рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдХрдиреЗрдХреНрдЯ рдФрд░ рдШрдЯрдирд╛рдУрдВ рдХреЛ рд╕реБрди рд╕рдХрддреЗ рд╣реИрдВред

### рдХрд╛рд░реНрдп - Azure Functions рдЯреВрд▓рд┐рдВрдЧ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдВ

> рд▓реЗрдЦрди рдХреЗ рд╕рдордп, Azure Functions рдХреЛрдб рдЯреВрд▓реНрд╕ Apple Silicon рдкрд░ Python рдкреНрд░реЛрдЬреЗрдХреНрдЯреНрд╕ рдХреЗ рд╕рд╛рде рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдХрд╛рдо рдирд╣реАрдВ рдХрд░ рд░рд╣реЗ рд╣реИрдВред рдЖрдкрдХреЛ рдЗрд╕рдХреЗ рдмрдЬрд╛рдп Intel-рдЖрдзрд╛рд░рд┐рдд Mac, Windows PC, рдпрд╛ Linux PC рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред

Azure Functions рдХреА рдПрдХ рдмрдбрд╝реА рд╡рд┐рд╢реЗрд╖рддрд╛ рдпрд╣ рд╣реИ рдХрд┐ рдЖрдк рдЙрдиреНрд╣реЗрдВ рд▓реЛрдХрд▓реА рдЪрд▓рд╛ рд╕рдХрддреЗ рд╣реИрдВред рд╡рд╣реА рд░рдирдЯрд╛рдЗрдо рдЬреЛ рдХреНрд▓рд╛рдЙрдб рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЖрдкрдХреЗ рдХрдВрдкреНрдпреВрдЯрд░ рдкрд░ рдЪрд▓ рд╕рдХрддрд╛ рд╣реИ, рдЬрд┐рд╕рд╕реЗ рдЖрдк рдХреЛрдб рд▓рд┐рдЦ рд╕рдХрддреЗ рд╣реИрдВ рдЬреЛ IoT рд╕рдВрджреЗрд╢реЛрдВ рдХрд╛ рдЬрд╡рд╛рдм рджреЗрддрд╛ рд╣реИ рдФрд░ рдЗрд╕реЗ рд▓реЛрдХрд▓реА рдЪрд▓рд╛ рд╕рдХрддреЗ рд╣реИрдВред рдЖрдк рдШрдЯрдирд╛рдУрдВ рдХреЛ рд╕рдВрднрд╛рд▓рддреЗ рд╕рдордп рдЕрдкрдиреЗ рдХреЛрдб рдХреЛ рдбрд┐рдмрдЧ рднреА рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдПрдХ рдмрд╛рд░ рдЬрдм рдЖрдк рдЕрдкрдиреЗ рдХреЛрдб рд╕реЗ рд╕рдВрддреБрд╖реНрдЯ рд╣реЛ рдЬрд╛рддреЗ рд╣реИрдВ, рддреЛ рдЗрд╕реЗ рдХреНрд▓рд╛рдЙрдб рдореЗрдВ рдбрд┐рдкреНрд▓реЙрдп рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред

Azure Functions рдЯреВрд▓рд┐рдВрдЧ CLI рдХреЗ рд░реВрдк рдореЗрдВ рдЙрдкрд▓рдмреНрдз рд╣реИ, рдЬрд┐рд╕реЗ Azure Functions Core Tools рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИред

1. [Azure Functions Core Tools рджрд╕реНрддрд╛рд╡реЗрдЬрд╝](https://docs.microsoft.com/azure/azure-functions/functions-run-local?WT.mc_id=academic-17441-jabenn) рдкрд░ рджрд┐рдП рдЧрдП рдирд┐рд░реНрджреЗрд╢реЛрдВ рдХрд╛ рдкрд╛рд▓рди рдХрд░рдХреЗ Azure Functions рдХреЛрд░ рдЯреВрд▓реНрд╕ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдВред

1. VS Code рдХреЗ рд▓рд┐рдП Azure Functions рдПрдХреНрд╕рдЯреЗрдВрд╢рди рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдВред рдпрд╣ рдПрдХреНрд╕рдЯреЗрдВрд╢рди Azure Functions рдмрдирд╛рдиреЗ, рдбрд┐рдмрдЧ рдХрд░рдиреЗ рдФрд░ рдбрд┐рдкреНрд▓реЙрдп рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдорд░реНрдерди рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред [Azure Functions рдПрдХреНрд╕рдЯреЗрдВрд╢рди рджрд╕реНрддрд╛рд╡реЗрдЬрд╝](https://marketplace.visualstudio.com/items?WT.mc_id=academic-17441-jabenn&itemName=ms-azuretools.vscode-azurefunctions) рдореЗрдВ рджрд┐рдП рдЧрдП рдирд┐рд░реНрджреЗрд╢реЛрдВ рдХрд╛ рдкрд╛рд▓рди рдХрд░рдХреЗ рдЗрд╕реЗ VS Code рдореЗрдВ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдВред

рдЬрдм рдЖрдк рдЕрдкрдиреЗ Azure Functions рдРрдк рдХреЛ рдХреНрд▓рд╛рдЙрдб рдореЗрдВ рдбрд┐рдкреНрд▓реЙрдп рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдЗрд╕реЗ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдлрд╝рд╛рдЗрд▓реЛрдВ рдФрд░ рд▓реЙрдЧ рдлрд╝рд╛рдЗрд▓реЛрдВ рдЬреИрд╕реА рдЪреАрдЬреЛрдВ рдХреЛ рд╕реНрдЯреЛрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдереЛрдбрд╝реА рдорд╛рддреНрд░рд╛ рдореЗрдВ рдХреНрд▓рд╛рдЙрдб рд╕реНрдЯреЛрд░реЗрдЬ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рд╣реЛрддрд╛ рд╣реИред рдЬрдм рдЖрдк рдЕрдкрдиреЗ Functions рдРрдк рдХреЛ рд▓реЛрдХрд▓реА рдЪрд▓рд╛рддреЗ рд╣реИрдВ, рддреЛ рдЖрдкрдХреЛ рдХреНрд▓рд╛рдЙрдб рд╕реНрдЯреЛрд░реЗрдЬ рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░рдирд╛ рд╣реЛрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдХреНрд▓рд╛рдЙрдб рд╕реНрдЯреЛрд░реЗрдЬ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рдмрдЬрд╛рдп, рдЖрдк рдПрдХ рд╕реНрдЯреЛрд░реЗрдЬ рдПрдореБрд▓реЗрдЯрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдЬрд┐рд╕реЗ [Azurite](https://github.com/Azure/Azurite) рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИред рдпрд╣ рд▓реЛрдХрд▓реА рдЪрд▓рддрд╛ рд╣реИ рд▓реЗрдХрд┐рди рдХреНрд▓рд╛рдЙрдб рд╕реНрдЯреЛрд░реЗрдЬ рдХреА рддрд░рд╣ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред

> ЁЯОУ Azure рдореЗрдВ, Azure Functions рджреНрд╡рд╛рд░рд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рдиреЗ рд╡рд╛рд▓рд╛ рд╕реНрдЯреЛрд░реЗрдЬ рдПрдХ Azure Storage Account рд╣реЛрддрд╛ рд╣реИред рдпреЗ рдЦрд╛рддреЗ рдлрд╝рд╛рдЗрд▓реЗрдВ, рдмреНрд▓реЙрдмреНрд╕, рддрд╛рд▓рд┐рдХрд╛рдУрдВ рдореЗрдВ рдбреЗрдЯрд╛ рдпрд╛ рдХрддрд╛рд░реЛрдВ рдореЗрдВ рдбреЗрдЯрд╛ рд╕реНрдЯреЛрд░ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдЖрдк рдПрдХ рд╕реНрдЯреЛрд░реЗрдЬ рдЕрдХрд╛рдЙрдВрдЯ рдХреЛ рдХрдИ рдРрдкреНрд╕ рдХреЗ рдмреАрдЪ рд╕рд╛рдЭрд╛ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдЬреИрд╕реЗ рдХрд┐ рдПрдХ Functions рдРрдк рдФрд░ рдПрдХ рд╡реЗрдм рдРрдкред

1. Azurite рдПрдХ Node.js рдРрдк рд╣реИ, рдЗрд╕рд▓рд┐рдП рдЖрдкрдХреЛ Node.js рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред рдЖрдк [Node.js рд╡реЗрдмрд╕рд╛рдЗрдЯ](https://nodejs.org/) рдкрд░ рдбрд╛рдЙрдирд▓реЛрдб рдФрд░ рдЗрдВрд╕реНрдЯреЙрд▓ рдирд┐рд░реНрджреЗрд╢ рдкрд╛ рд╕рдХрддреЗ рд╣реИрдВред рдпрджрд┐ рдЖрдк Mac рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд░рд╣реЗ рд╣реИрдВ, рддреЛ рдЖрдк рдЗрд╕реЗ [Homebrew](https://formulae.brew.sh/formula/node) рд╕реЗ рднреА рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

1. рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрдорд╛рдВрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ Azurite рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдВ (`npm` рдПрдХ рдЯреВрд▓ рд╣реИ рдЬреЛ Node.js рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░рддреЗ рд╕рдордп рдЗрдВрд╕реНрдЯреЙрд▓ рд╣реЛрддрд╛ рд╣реИ):

    ```sh
    npm install -g azurite
    ```

1. Azurite рдХреЗ рд▓рд┐рдП рдбреЗрдЯрд╛ рд╕реНрдЯреЛрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП `azurite` рдирд╛рдордХ рдПрдХ рдлрд╝реЛрд▓реНрдбрд░ рдмрдирд╛рдПрдВ:

    ```sh
    mkdir azurite
    ```

1. Azurite рдЪрд▓рд╛рдПрдВ, рдЗрд╕реЗ рдЗрд╕ рдирдП рдлрд╝реЛрд▓реНрдбрд░ рдХреЛ рдкрд╛рд╕ рдХрд░рддреЗ рд╣реБрдП:

    ```sh
    azurite --location azurite
    ```

    Azurite рд╕реНрдЯреЛрд░реЗрдЬ рдПрдореБрд▓реЗрдЯрд░ рд▓реЙрдиреНрдЪ рд╣реЛрдЧрд╛ рдФрд░ рд▓реЛрдХрд▓ Functions рд░рдирдЯрд╛рдЗрдо рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░ рд╣реЛрдЧрд╛ред

    ```output
    тЮЬ  ~ azurite --location azurite  
    Azurite Blob service is starting at http://127.0.0.1:10000
    Azurite Blob service is successfully listening at http://127.0.0.1:10000
    Azurite Queue service is starting at http://127.0.0.1:10001
    Azurite Queue service is successfully listening at http://127.0.0.1:10001
    Azurite Table service is starting at http://127.0.0.1:10002
    Azurite Table service is successfully listening at http://127.0.0.1:10002
    ```

### рдХрд╛рд░реНрдп - рдПрдХ Azure Functions рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдмрдирд╛рдПрдВ

Azure Functions CLI рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХ рдирдпрд╛ Functions рдРрдк рдмрдирд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред

1. рдЕрдкрдиреЗ Functions рдРрдк рдХреЗ рд▓рд┐рдП рдПрдХ рдлрд╝реЛрд▓реНрдбрд░ рдмрдирд╛рдПрдВ рдФрд░ рдЙрд╕рдореЗрдВ рдЬрд╛рдПрдВред рдЗрд╕реЗ `soil-moisture-trigger` рдирд╛рдо рджреЗрдВ:

    ```sh
    mkdir soil-moisture-trigger
    cd soil-moisture-trigger
    ```

1. рдЗрд╕ рдлрд╝реЛрд▓реНрдбрд░ рдХреЗ рдЕрдВрджрд░ рдПрдХ Python рд╡рд░реНрдЪреБрдЕрд▓ рдПрдирд╡рд╛рдпрд░рдирдореЗрдВрдЯ рдмрдирд╛рдПрдВ:

    ```sh
    python3 -m venv .venv
    ```

1. рд╡рд░реНрдЪреБрдЕрд▓ рдПрдирд╡рд╛рдпрд░рдирдореЗрдВрдЯ рдХреЛ рд╕рдХреНрд░рд┐рдп рдХрд░реЗрдВ:

    * Windows рдкрд░:
        * рдпрджрд┐ рдЖрдк Command Prompt рдпрд╛ Windows Terminal рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ Command Prompt рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд░рд╣реЗ рд╣реИрдВ, рддреЛ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдЪрд▓рд╛рдПрдВ:

            ```cmd
            .venv\Scripts\activate.bat
            ```

        * рдпрджрд┐ рдЖрдк PowerShell рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд░рд╣реЗ рд╣реИрдВ, рддреЛ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдЪрд▓рд╛рдПрдВ:

            ```powershell
            .\.venv\Scripts\Activate.ps1
            ```

    * macOS рдпрд╛ Linux рдкрд░, рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдЪрд▓рд╛рдПрдВ:

        ```cmd
        source ./.venv/bin/activate
        ```

    > ЁЯТБ рдпреЗ рдХрдорд╛рдВрдб рдЙрд╕реА рд╕реНрдерд╛рди рд╕реЗ рдЪрд▓рд╛рдП рдЬрд╛рдиреЗ рдЪрд╛рд╣рд┐рдП рдЬрд╣рд╛рдВ рдЖрдкрдиреЗ рд╡рд░реНрдЪреБрдЕрд▓ рдПрдирд╡рд╛рдпрд░рдирдореЗрдВрдЯ рдмрдирд╛рдиреЗ рдХрд╛ рдХрдорд╛рдВрдб рдЪрд▓рд╛рдпрд╛ рдерд╛ред рдЖрдкрдХреЛ `.venv` рдлрд╝реЛрд▓реНрдбрд░ рдореЗрдВ рдХрднреА рднреА рдиреЗрд╡рд┐рдЧреЗрдЯ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реЛрдЧреА, рдЖрдкрдХреЛ рд╣рдореЗрд╢рд╛ рд╕рдХреНрд░рд┐рдп рдХрд░рдиреЗ рдХрд╛ рдХрдорд╛рдВрдб рдФрд░ рдкреИрдХреЗрдЬ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░рдиреЗ рдпрд╛ рдХреЛрдб рдЪрд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдХрдорд╛рдВрдб рдЙрд╕реА рдлрд╝реЛрд▓реНрдбрд░ рд╕реЗ рдЪрд▓рд╛рдирд╛ рдЪрд╛рд╣рд┐рдП рдЬрд╣рд╛рдВ рдЖрдкрдиреЗ рд╡рд░реНрдЪреБрдЕрд▓ рдПрдирд╡рд╛рдпрд░рдирдореЗрдВрдЯ рдмрдирд╛рдпрд╛ рдерд╛ред

1. рдЗрд╕ рдлрд╝реЛрд▓реНрдбрд░ рдореЗрдВ Functions рдРрдк рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрдорд╛рдВрдб рдЪрд▓рд╛рдПрдВ:

    ```sh
    func init --worker-runtime python soil-moisture-trigger
    ```

    рдпрд╣ рд╡рд░реНрддрдорд╛рди рдлрд╝реЛрд▓реНрдбрд░ рдХреЗ рдЕрдВрджрд░ рддреАрди рдлрд╝рд╛рдЗрд▓реЗрдВ рдмрдирд╛рдПрдЧрд╛:

    * `host.json` - рдпрд╣ JSON рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдЖрдкрдХреЗ Functions рдРрдк рдХреЗ рд▓рд┐рдП рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХреЛ рд╢рд╛рдорд┐рд▓ рдХрд░рддрд╛ рд╣реИред рдЖрдкрдХреЛ рдЗрди рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реЛрдЧреАред
    * `local.settings.json` - рдпрд╣ JSON рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдЖрдкрдХреЗ рдРрдк рджреНрд╡рд╛рд░рд╛ рд▓реЛрдХрд▓реА рдЪрд▓рд╛рдП рдЬрд╛рдиреЗ рдкрд░ рдЙрдкрдпреЛрдЧ рдХреА рдЬрд╛рдиреЗ рд╡рд╛рд▓реА рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХреЛ рд╢рд╛рдорд┐рд▓ рдХрд░рддрд╛ рд╣реИ, рдЬреИрд╕реЗ рдХрд┐ рдЖрдкрдХреЗ IoT рд╣рдм рдХреЗ рд▓рд┐рдП рдХрдиреЗрдХреНрд╢рди рд╕реНрдЯреНрд░рд┐рдВрдЧреНрд╕ред рдпреЗ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХреЗрд╡рд▓ рд▓реЛрдХрд▓ рд╣реИрдВ рдФрд░ рдЗрдиреНрд╣реЗрдВ рд╕реЛрд░реНрд╕ рдХреЛрдб рдХрдВрдЯреНрд░реЛрд▓ рдореЗрдВ рдирд╣реАрдВ рдЬреЛрдбрд╝рд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред рдЬрдм рдЖрдк рдРрдк рдХреЛ рдХреНрд▓рд╛рдЙрдб рдореЗрдВ рдбрд┐рдкреНрд▓реЙрдп рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдпреЗ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдбрд┐рдкреНрд▓реЙрдп рдирд╣реАрдВ рд╣реЛрддреАрдВ, рдмрд▓реНрдХрд┐ рдЖрдкрдХреА рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рд╕реЗ рд▓реЛрдб рд╣реЛрддреА рд╣реИрдВред рдЗрд╕реЗ рдЗрд╕ рдкрд╛рда рдореЗрдВ рдмрд╛рдж рдореЗрдВ рдХрд╡рд░ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред
    * `requirements.txt` - рдпрд╣ рдПрдХ [Pip requirements рдлрд╝рд╛рдЗрд▓](https://pip.pypa.io/en/stable/user_guide/#requirements-files) рд╣реИ рдЬреЛ рдЖрдкрдХреЗ Functions рдРрдк рдХреЛ рдЪрд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ Pip рдкреИрдХреЗрдЬреЛрдВ рдХреЛ рд╢рд╛рдорд┐рд▓ рдХрд░рддреА рд╣реИред

1. `local.settings.json` рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдЙрд╕ рд╕реНрдЯреЛрд░реЗрдЬ рдЕрдХрд╛рдЙрдВрдЯ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕реЗрдЯрд┐рдВрдЧ рд╣реЛрддреА рд╣реИ рдЬрд┐рд╕реЗ Functions рдРрдк рдЙрдкрдпреЛрдЧ рдХрд░реЗрдЧрд╛ред рдпрд╣ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рдЦрд╛рд▓реА рд╕реЗрдЯрд┐рдВрдЧ рд╣реЛрддреА рд╣реИ, рдЗрд╕рд▓рд┐рдП рдЗрд╕реЗ рд╕реЗрдЯ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред Azurite рд▓реЛрдХрд▓ рд╕реНрдЯреЛрд░реЗрдЬ рдПрдореБрд▓реЗрдЯрд░ рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЗрд╕ рдорд╛рди рдХреЛ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдкрд░ рд╕реЗрдЯ рдХрд░реЗрдВ:

    ```json
    "AzureWebJobsStorage": "UseDevelopmentStorage=true",
    ```

1. рдЖрд╡рд╢реНрдпрдХ Pip рдкреИрдХреЗрдЬреЛрдВ рдХреЛ requirements рдлрд╝рд╛рдЗрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдВ:

    ```sh
    pip install -r requirements.txt
    ```

    > ЁЯТБ рдЖрд╡рд╢реНрдпрдХ Pip рдкреИрдХреЗрдЬреЛрдВ рдХреЛ рдЗрд╕ рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП, рддрд╛рдХрд┐ рдЬрдм Functions рдРрдк рдХреЛ рдХреНрд▓рд╛рдЙрдб рдореЗрдВ рдбрд┐рдкреНрд▓реЙрдп рдХрд┐рдпрд╛ рдЬрд╛рдП, рддреЛ рд░рдирдЯрд╛рдЗрдо рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░ рд╕рдХреЗ рдХрд┐ рдпрд╣ рд╕рд╣реА рдкреИрдХреЗрдЬ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░рддрд╛ рд╣реИред

1. рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐ рд╕рдм рдХреБрдЫ рд╕рд╣реА рдврдВрдЧ рд╕реЗ рдХрд╛рдо рдХрд░ рд░рд╣рд╛ рд╣реИ, рдЖрдк Functions рд░рдирдЯрд╛рдЗрдо рд╢реБрд░реВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдЗрд╕реЗ рд╢реБрд░реВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрдорд╛рдВрдб рдЪрд▓рд╛рдПрдВ:

    ```sh
    func start
    ```

    рдЖрдк рджреЗрдЦреЗрдВрдЧреЗ рдХрд┐ рд░рдирдЯрд╛рдЗрдо рд╢реБрд░реВ рд╣реЛрддрд╛ рд╣реИ рдФрд░ рд░рд┐рдкреЛрд░реНрдЯ рдХрд░рддрд╛ рд╣реИ рдХрд┐ рдЙрд╕реЗ рдХреЛрдИ рдЬреЙрдм рдлрдВрдХреНрд╢рдиреНрд╕ (рдЯреНрд░рд┐рдЧрд░реНрд╕) рдирд╣реАрдВ рдорд┐рд▓реЗ рд╣реИрдВред

    ```output
    (.venv) тЮЬ  soil-moisture-trigger func start
    Found Python version 3.9.1 (python3).
    
    Azure Functions Core Tools
    Core Tools Version:       3.0.3442 Commit hash: 6bfab24b2743f8421475d996402c398d2fe4a9e0  (64-bit)
    Function Runtime Version: 3.0.15417.0
    
    [2021-05-05T01:24:46.795Z] No job functions found.
    ```
> тЪая╕П рдпрджрд┐ рдЖрдкрдХреЛ рдлрд╝рд╛рдпрд░рд╡реЙрд▓ рдиреЛрдЯрд┐рдлрд┐рдХреЗрд╢рди рдорд┐рд▓рддрд╛ рд╣реИ, рддреЛ рдПрдХреНрд╕реЗрд╕ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдВ рдХреНрдпреЛрдВрдХрд┐ `func` рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЛ рдЖрдкрдХреЗ рдиреЗрдЯрд╡рд░реНрдХ рдкрд░ рдкрдврд╝рдиреЗ рдФрд░ рд▓рд┐рдЦрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред
> тЪая╕П рдпрджрд┐ рдЖрдк macOS рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд░рд╣реЗ рд╣реИрдВ, рддреЛ рдЖрдЙрдЯрдкреБрдЯ рдореЗрдВ рдЪреЗрддрд╛рд╡рдирд┐рдпрд╛рдВ рд╣реЛ рд╕рдХрддреА рд╣реИрдВ:
>
> ```output
    > (.venv) тЮЬ  soil-moisture-trigger func start
    > Found Python version 3.9.1 (python3).
    >
    > Azure Functions Core Tools
    > Core Tools Version:       3.0.3442 Commit hash: 6bfab24b2743f8421475d996402c398d2fe4a9e0  (64-bit)
    > Function Runtime Version: 3.0.15417.0
    >
    > [2021-06-16T08:18:28.315Z] Cannot create directory for shared memory usage: /dev/shm/AzureFunctions
    > [2021-06-16T08:18:28.316Z] System.IO.FileSystem: Access to the path '/dev/shm/AzureFunctions' is denied. Operation not permitted.
    > [2021-06-16T08:18:30.361Z] No job functions found.
    > ```
>
> рдЬрдм рддрдХ Functions рдРрдк рд╕рд╣реА рддрд░реАрдХреЗ рд╕реЗ рд╢реБрд░реВ рд╣реЛ рдФрд░ рдЪрд▓ рд░рд╣реЗ рдлрдВрдХреНрд╢рдиреНрд╕ рдХреЛ рд╕реВрдЪреАрдмрджреНрдз рдХрд░реЗ, рдЖрдк рдЗрдиреНрд╣реЗрдВ рдЕрдирджреЗрдЦрд╛ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдЬреИрд╕рд╛ рдХрд┐ [Microsoft Docs Q&A рдкрд░ рдЗрд╕ рдкреНрд░рд╢реНрди](https://docs.microsoft.com/answers/questions/396617/azure-functions-core-tools-error-osx-devshmazurefu.html?WT.mc_id=academic-17441-jabenn) рдореЗрдВ рдЙрд▓реНрд▓реЗрдЦ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдЗрд╕реЗ рдЕрдирджреЗрдЦрд╛ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред

1. `ctrl+c` рджрдмрд╛рдХрд░ Functions рдРрдк рдХреЛ рдмрдВрдж рдХрд░реЗрдВред

1. рд╡рд░реНрддрдорд╛рди рдлрд╝реЛрд▓реНрдбрд░ рдХреЛ VS Code рдореЗрдВ рдЦреЛрд▓реЗрдВ, рдпрд╛ рддреЛ VS Code рдЦреЛрд▓рдХрд░ рдЗрд╕ рдлрд╝реЛрд▓реНрдбрд░ рдХреЛ рдЦреЛрд▓реЗрдВ, рдпрд╛ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрдорд╛рдВрдб рдЪрд▓рд╛рдХрд░:

    ```sh
    code .
    ```

    VS Code рдЖрдкрдХреЗ Functions рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдПрдЧрд╛ рдФрд░ рдПрдХ рдиреЛрдЯрд┐рдлрд┐рдХреЗрд╢рди рджрд┐рдЦрд╛рдПрдЧрд╛ рдЬрд┐рд╕рдореЗрдВ рд▓рд┐рдЦрд╛ рд╣реЛрдЧрд╛:

    ```output
    Detected an Azure Functions Project in folder "soil-moisture-trigger" that may have been created outside of
    VS Code. Initialize for optimal use with VS Code?
    ```

    ![рдиреЛрдЯрд┐рдлрд┐рдХреЗрд╢рди](../../../../../translated_images/vscode-azure-functions-init-notification.bd19b49229963edb5311fb3a79445ea469424759d2917ee2f2eb6f92d65d5086.hi.png)

    рдЗрд╕ рдиреЛрдЯрд┐рдлрд┐рдХреЗрд╢рди рд╕реЗ **Yes** рдЪреБрдиреЗрдВред

1. рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ VS Code рдЯрд░реНрдорд┐рдирд▓ рдореЗрдВ Python рд╡рд░реНрдЪреБрдЕрд▓ рдПрдирд╡рд╛рдпрд░рдирдореЗрдВрдЯ рдЪрд▓ рд░рд╣рд╛ рд╣реИред рдпрджрд┐ рдЖрд╡рд╢реНрдпрдХ рд╣реЛ рддреЛ рдЗрд╕реЗ рд╕рдорд╛рдкреНрдд рдХрд░реЗрдВ рдФрд░ рдкреБрдирдГ рдкреНрд░рд╛рд░рдВрдн рдХрд░реЗрдВред

## IoT Hub рдЗрд╡реЗрдВрдЯ рдЯреНрд░рд┐рдЧрд░ рдмрдирд╛рдПрдВ

Functions рдРрдк рдЖрдкрдХреЗ рд╕рд░реНрд╡рд░рд▓реЗрд╕ рдХреЛрдб рдХрд╛ рд╢реЗрд▓ рд╣реИред IoT Hub рдЗрд╡реЗрдВрдЯреНрд╕ рдХрд╛ рдЬрд╡рд╛рдм рджреЗрдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдк рдЗрд╕ рдРрдк рдореЗрдВ рдПрдХ IoT Hub рдЯреНрд░рд┐рдЧрд░ рдЬреЛрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВред рдпрд╣ рдЯреНрд░рд┐рдЧрд░ рдЙрди рд╕рдВрджреЗрд╢реЛрдВ рдХреА рд╕реНрдЯреНрд░реАрдо рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдЬреЛ IoT Hub рдХреЛ рднреЗрдЬреЗ рдЬрд╛рддреЗ рд╣реИрдВ рдФрд░ рдЙрдирдХрд╛ рдЬрд╡рд╛рдм рджреЗрддреЗ рд╣реИрдВред рдЗрди рд╕рдВрджреЗрд╢реЛрдВ рдХреА рд╕реНрдЯреНрд░реАрдо рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЗ рдЯреНрд░рд┐рдЧрд░ рдХреЛ IoT Hubs рдХреЗ *рдЗрд╡реЗрдВрдЯ рд╣рдм рд╕рдВрдЧрдд рдПрдВрдбрдкреЙрдЗрдВрдЯ* рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред

IoT Hub рдПрдХ рдЕрдиреНрдп Azure рд╕реЗрд╡рд╛, Azure Event Hubs, рдкрд░ рдЖрдзрд╛рд░рд┐рдд рд╣реИред Event Hubs рдПрдХ рд╕реЗрд╡рд╛ рд╣реИ рдЬреЛ рдЖрдкрдХреЛ рд╕рдВрджреЗрд╢ рднреЗрдЬрдиреЗ рдФрд░ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреА рд╣реИ, рдФрд░ IoT Hub рдЗрд╕реЗ IoT рдбрд┐рд╡рд╛рдЗрд╕реЛрдВ рдХреЗ рд▓рд┐рдП рд╕реБрд╡рд┐рдзрд╛рдУрдВ рдХреЗ рд╕рд╛рде рд╡рд┐рд╕реНрддрд╛рд░рд┐рдд рдХрд░рддрд╛ рд╣реИред IoT Hub рд╕реЗ рд╕рдВрджреЗрд╢ рдкрдврд╝рдиреЗ рдХреЗ рд▓рд┐рдП рдХрдиреЗрдХреНрдЯ рдХрд░рдиреЗ рдХрд╛ рддрд░реАрдХрд╛ рд╡рд╣реА рд╣реИ рдЬреИрд╕рд╛ рдЖрдк Event Hubs рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╕рдордп рдХрд░реЗрдВрдЧреЗред

тЬЕ рдереЛрдбрд╝рд╛ рд╢реЛрдз рдХрд░реЗрдВ: [Azure Event Hubs рджрд╕реНрддрд╛рд╡реЗрдЬрд╝](https://docs.microsoft.com/azure/event-hubs/event-hubs-about?WT.mc_id=academic-17441-jabenn) рдореЗрдВ Event Hubs рдХрд╛ рдЕрд╡рд▓реЛрдХрди рдкрдврд╝реЗрдВред рдЗрд╕рдХреА рдмреБрдирд┐рдпрд╛рджреА рд╕реБрд╡рд┐рдзрд╛рдУрдВ рдХреА рддреБрд▓рдирд╛ IoT Hub рд╕реЗ рдХреИрд╕реЗ рд╣реЛрддреА рд╣реИ?

IoT рдбрд┐рд╡рд╛рдЗрд╕ рдХреЛ IoT Hub рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЗрд╕реЗ рдПрдХ рдЧреБрдкреНрдд рдХреБрдВрдЬреА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ рдЬреЛ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рддрд╛ рд╣реИ рдХрд┐ рдХреЗрд╡рд▓ рдЕрдиреБрдордд рдбрд┐рд╡рд╛рдЗрд╕ рд╣реА рдХрдиреЗрдХреНрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдпрд╣реА рдмрд╛рдд рд╕рдВрджреЗрд╢ рдкрдврд╝рдиреЗ рдХреЗ рд▓рд┐рдП рдХрдиреЗрдХреНрдЯ рдХрд░рдиреЗ рдкрд░ рднреА рд▓рд╛рдЧреВ рд╣реЛрддреА рд╣реИ; рдЖрдкрдХреЗ рдХреЛрдб рдХреЛ рдПрдХ рдХрдиреЗрдХреНрд╢рди рд╕реНрдЯреНрд░рд┐рдВрдЧ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреА рдЬрд┐рд╕рдореЗрдВ рдПрдХ рдЧреБрдкреНрдд рдХреБрдВрдЬреА рдФрд░ IoT Hub рдХрд╛ рд╡рд┐рд╡рд░рдг рд╢рд╛рдорд┐рд▓ рд╣реЛрдЧрд╛ред

> ЁЯТБ рдЖрдкрдХреЛ рдЬреЛ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдХрдиреЗрдХреНрд╢рди рд╕реНрдЯреНрд░рд┐рдВрдЧ рдорд┐рд▓рддреА рд╣реИ рдЙрд╕рдореЗрдВ **iothubowner** рдЕрдиреБрдорддрд┐рдпрд╛рдВ рд╣реЛрддреА рд╣реИрдВ, рдЬреЛ рдЗрд╕реЗ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рдХрд┐рд╕реА рднреА рдХреЛрдб рдХреЛ IoT Hub рдкрд░ рдкреВрд░реНрдг рдЕрдиреБрдорддрд┐рдпрд╛рдВ рджреЗрддреА рд╣реИрдВред рдЖрджрд░реНрд╢ рд░реВрдк рд╕реЗ, рдЖрдкрдХреЛ рдХреЗрд╡рд▓ рдЖрд╡рд╢реНрдпрдХ рдиреНрдпреВрдирддрдо рд╕реНрддрд░ рдХреА рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреЗ рд╕рд╛рде рдХрдиреЗрдХреНрдЯ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдПред рдЗрд╕реЗ рдЕрдЧрд▓реЗ рдкрд╛рда рдореЗрдВ рдХрд╡рд░ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред

рдПрдХ рдмрд╛рд░ рдЬрдм рдЖрдкрдХрд╛ рдЯреНрд░рд┐рдЧрд░ рдХрдиреЗрдХреНрдЯ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ IoT Hub рдХреЛ рднреЗрдЬреЗ рдЧрдП рдкреНрд░рддреНрдпреЗрдХ рд╕рдВрджреЗрд╢ рдХреЗ рд▓рд┐рдП рдлрд╝рдВрдХреНрд╢рди рдХреЗ рдЕрдВрджрд░ рдХрд╛ рдХреЛрдб рдХреЙрд▓ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛, рдЪрд╛рд╣реЗ рд╡рд╣ рд╕рдВрджреЗрд╢ рдХрд┐рд╕ рдбрд┐рд╡рд╛рдЗрд╕ рдиреЗ рднреЗрдЬрд╛ рд╣реЛред рдЯреНрд░рд┐рдЧрд░ рдХреЛ рд╕рдВрджреЗрд╢ рдПрдХ рдкреИрд░рд╛рдореАрдЯрд░ рдХреЗ рд░реВрдк рдореЗрдВ рдкрд╛рд╕ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред

### рдХрд╛рд░реНрдп - рдЗрд╡реЗрдВрдЯ рд╣рдм рд╕рдВрдЧрдд рдПрдВрдбрдкреЙрдЗрдВрдЯ рдХрдиреЗрдХреНрд╢рди рд╕реНрдЯреНрд░рд┐рдВрдЧ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ

1. VS Code рдЯрд░реНрдорд┐рдирд▓ рд╕реЗ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрдорд╛рдВрдб рдЪрд▓рд╛рдПрдВ рддрд╛рдХрд┐ IoT Hubs рдЗрд╡реЗрдВрдЯ рд╣рдм рд╕рдВрдЧрдд рдПрдВрдбрдкреЙрдЗрдВрдЯ рдХреЗ рд▓рд┐рдП рдХрдиреЗрдХреНрд╢рди рд╕реНрдЯреНрд░рд┐рдВрдЧ рдкреНрд░рд╛рдкреНрдд рд╣реЛ:

    ```sh
    az iot hub connection-string show --default-eventhub \
                                      --output table \
                                      --hub-name <hub_name>
    ```

    `<hub_name>` рдХреЛ рдЕрдкрдиреЗ IoT Hub рдХреЗ рдирд╛рдо рд╕реЗ рдмрджрд▓реЗрдВред

1. VS Code рдореЗрдВ `local.settings.json` рдлрд╝рд╛рдЗрд▓ рдЦреЛрд▓реЗрдВред `Values` рд╕реЗрдХреНрд╢рди рдХреЗ рдЕрдВрджрд░ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдЕрддрд┐рд░рд┐рдХреНрдд рдорд╛рди рдЬреЛрдбрд╝реЗрдВ:

    ```json
    "IOT_HUB_CONNECTION_STRING": "<connection string>"
    ```

    `<connection string>` рдХреЛ рдкрд┐рдЫрд▓реЗ рдЪрд░рдг рд╕реЗ рдкреНрд░рд╛рдкреНрдд рдорд╛рди рд╕реЗ рдмрджрд▓реЗрдВред рдЗрд╕реЗ рд╡реИрдз JSON рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдКрдкрд░ рдХреА рдкрдВрдХреНрддрд┐ рдХреЗ рдмрд╛рдж рдПрдХ рдХреЙрдорд╛ рдЬреЛрдбрд╝рдирд╛ рд╣реЛрдЧрд╛ред

### рдХрд╛рд░реНрдп - рдЗрд╡реЗрдВрдЯ рдЯреНрд░рд┐рдЧрд░ рдмрдирд╛рдПрдВ

рдЕрдм рдЖрдк рдЗрд╡реЗрдВрдЯ рдЯреНрд░рд┐рдЧрд░ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░ рд╣реИрдВред

1. VS Code рдЯрд░реНрдорд┐рдирд▓ рд╕реЗ `soil-moisture-trigger` рдлрд╝реЛрд▓реНрдбрд░ рдХреЗ рдЕрдВрджрд░ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрдорд╛рдВрдб рдЪрд▓рд╛рдПрдВ:

    ```sh
    func new --name iot-hub-trigger --template "Azure Event Hub trigger"
    ```

    рдпрд╣ рдПрдХ рдирдпрд╛ рдлрд╝рдВрдХреНрд╢рди рдмрдирд╛рдПрдЧрд╛ рдЬрд┐рд╕рдХрд╛ рдирд╛рдо `iot-hub-trigger` рд╣реЛрдЧрд╛ред рдЯреНрд░рд┐рдЧрд░ IoT Hub рдкрд░ рдЗрд╡реЗрдВрдЯ рд╣рдм рд╕рдВрдЧрдд рдПрдВрдбрдкреЙрдЗрдВрдЯ рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░реЗрдЧрд╛, рддрд╛рдХрд┐ рдЖрдк рдЗрд╡реЗрдВрдЯ рд╣рдм рдЯреНрд░рд┐рдЧрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХреЗрдВред IoT Hub рдХреЗ рд▓рд┐рдП рдХреЛрдИ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдЯреНрд░рд┐рдЧрд░ рдирд╣реАрдВ рд╣реИред

рдпрд╣ `soil-moisture-trigger` рдлрд╝реЛрд▓реНрдбрд░ рдХреЗ рдЕрдВрджрд░ рдПрдХ рдлрд╝реЛрд▓реНрдбрд░ рдмрдирд╛рдПрдЧрд╛ рдЬрд┐рд╕рдХрд╛ рдирд╛рдо `iot-hub-trigger` рд╣реЛрдЧрд╛, рдЬрд┐рд╕рдореЗрдВ рдпрд╣ рдлрд╝рдВрдХреНрд╢рди рд╣реЛрдЧрд╛ред рдЗрд╕ рдлрд╝реЛрд▓реНрдбрд░ рдореЗрдВ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдлрд╛рдЗрд▓реЗрдВ рд╣реЛрдВрдЧреА:

* `__init__.py` - рдпрд╣ Python рдХреЛрдб рдлрд╝рд╛рдЗрд▓ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рдЯреНрд░рд┐рдЧрд░ рд╣реЛрддрд╛ рд╣реИ, рдФрд░ рдпрд╣ рдлрд╝реЛрд▓реНрдбрд░ рдХреЛ Python рдореЙрдбреНрдпреВрд▓ рдореЗрдВ рдмрджрд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдорд╛рдирдХ Python рдлрд╝рд╛рдЗрд▓ рдирд╛рдо рдХрдиреНрд╡реЗрдВрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИред

    рдЗрд╕ рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреЛрдб рд╣реЛрдЧрд╛:

    ```python
    import logging

    import azure.functions as func


    def main(event: func.EventHubEvent):
        logging.info('Python EventHub trigger processed an event: %s',
                    event.get_body().decode('utf-8'))
    ```

    рдЯреНрд░рд┐рдЧрд░ рдХрд╛ рдореБрдЦреНрдп рднрд╛рдЧ `main` рдлрд╝рдВрдХреНрд╢рди рд╣реИред рдпрд╣ рдлрд╝рдВрдХреНрд╢рди IoT Hub рд╕реЗ рдЖрдиреЗ рд╡рд╛рд▓реЗ рдЗрд╡реЗрдВрдЯреНрд╕ рдХреЗ рд╕рд╛рде рдХреЙрд▓ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рдЗрд╕ рдлрд╝рдВрдХреНрд╢рди рдореЗрдВ `event` рдирд╛рдордХ рдПрдХ рдкреИрд░рд╛рдореАрдЯрд░ рд╣реЛрддрд╛ рд╣реИ рдЬреЛ рдПрдХ `EventHubEvent` рд╣реЛрддрд╛ рд╣реИред рд╣рд░ рдмрд╛рд░ рдЬрдм IoT Hub рдХреЛ рд╕рдВрджреЗрд╢ рднреЗрдЬрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдпрд╣ рдлрд╝рдВрдХреНрд╢рди рдЙрд╕ рд╕рдВрджреЗрд╢ рдХреЛ `event` рдХреЗ рд░реВрдк рдореЗрдВ рдкрд╛рд╕ рдХрд░рддрд╛ рд╣реИ, рд╕рд╛рде рд╣реА рдЙрди рдЧреБрдгреЛрдВ рдХреЗ рд╕рд╛рде рдЬреЛ рдЖрдкрдиреЗ рдкрд┐рдЫрд▓реЗ рдкрд╛рда рдореЗрдВ рдПрдиреЛрдЯреЗрд╢рди рдХреЗ рд░реВрдк рдореЗрдВ рджреЗрдЦреЗ рдереЗред

    рдЗрд╕ рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рдореБрдЦреНрдп рднрд╛рдЧ рдЗрд╡реЗрдВрдЯ рдХреЛ рд▓реЙрдЧ рдХрд░рддрд╛ рд╣реИред

* `function.json` - рдЗрд╕рдореЗрдВ рдЯреНрд░рд┐рдЧрд░ рдХреЗ рд▓рд┐рдП рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рд╣реЛрддрд╛ рд╣реИред рдореБрдЦреНрдп рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди `bindings` рдирд╛рдордХ рд╕реЗрдХреНрд╢рди рдореЗрдВ рд╣реЛрддрд╛ рд╣реИред рдмрд╛рдЗрдВрдбрд┐рдВрдЧ Azure Functions рдФрд░ рдЕрдиреНрдп Azure рд╕реЗрд╡рд╛рдУрдВ рдХреЗ рдмреАрдЪ рдХрдиреЗрдХреНрд╢рди рдХреЗ рд▓рд┐рдП рд╢рдмреНрдж рд╣реИред рдЗрд╕ рдлрд╝рдВрдХреНрд╢рди рдореЗрдВ рдЗрд╡реЗрдВрдЯ рд╣рдм рдХреЗ рд▓рд┐рдП рдПрдХ рдЗрдирдкреБрдЯ рдмрд╛рдЗрдВрдбрд┐рдВрдЧ рд╣реИ - рдпрд╣ рдЗрд╡реЗрдВрдЯ рд╣рдм рд╕реЗ рдХрдиреЗрдХреНрдЯ рд╣реЛрддрд╛ рд╣реИ рдФрд░ рдбреЗрдЯрд╛ рдкреНрд░рд╛рдкреНрдд рдХрд░рддрд╛ рд╣реИред

    > ЁЯТБ рдЖрдк рдЖрдЙрдЯрдкреБрдЯ рдмрд╛рдЗрдВрдбрд┐рдВрдЧ рднреА рдЬреЛрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВ рддрд╛рдХрд┐ рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рдЖрдЙрдЯрдкреБрдЯ рдХрд┐рд╕реА рдЕрдиреНрдп рд╕реЗрд╡рд╛ рдХреЛ рднреЗрдЬрд╛ рдЬрд╛ рд╕рдХреЗред рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЖрдк рдбреЗрдЯрд╛рдмреЗрд╕ рдХреЗ рд▓рд┐рдП рдПрдХ рдЖрдЙрдЯрдкреБрдЯ рдмрд╛рдЗрдВрдбрд┐рдВрдЧ рдЬреЛрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ IoT Hub рдЗрд╡реЗрдВрдЯ рдХреЛ рдлрд╝рдВрдХреНрд╢рди рд╕реЗ рд╡рд╛рдкрд╕ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдФрд░ рдпрд╣ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдбреЗрдЯрд╛рдмреЗрд╕ рдореЗрдВ рд╕рдореНрдорд┐рд▓рд┐рдд рд╣реЛ рдЬрд╛рдПрдЧрд╛ред

    тЬЕ рдереЛрдбрд╝рд╛ рд╢реЛрдз рдХрд░реЗрдВ: [Azure Functions рдЯреНрд░рд┐рдЧрд░реНрд╕ рдФрд░ рдмрд╛рдЗрдВрдбрд┐рдВрдЧреНрд╕ рдЕрд╡рдзрд╛рд░рдгрд╛рдУрдВ](https://docs.microsoft.com/azure/azure-functions/functions-triggers-bindings?WT.mc_id=academic-17441-jabenn&tabs=python) рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдореЗрдВ рдмрд╛рдЗрдВрдбрд┐рдВрдЧреНрд╕ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдкрдврд╝реЗрдВред

    `bindings` рд╕реЗрдХреНрд╢рди рдореЗрдВ рдмрд╛рдЗрдВрдбрд┐рдВрдЧ рдХреЗ рд▓рд┐рдП рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рд╢рд╛рдорд┐рд▓ рд╣реИред рд░реБрдЪрд┐ рдХреЗ рдорд╛рди рд╣реИрдВ:

  * `"type": "eventHubTrigger"` - рдпрд╣ рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдмрддрд╛рддрд╛ рд╣реИ рдХрд┐ рдЗрд╕реЗ Event Hub рд╕реЗ рдЗрд╡реЗрдВрдЯреНрд╕ рд╕реБрдирдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред
  * `"name": "events"` - рдпрд╣ Event Hub рдЗрд╡реЗрдВрдЯреНрд╕ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкреИрд░рд╛рдореАрдЯрд░ рдирд╛рдо рд╣реИред рдпрд╣ Python рдХреЛрдб рдореЗрдВ `main` рдлрд╝рдВрдХреНрд╢рди рдореЗрдВ рдкреИрд░рд╛рдореАрдЯрд░ рдирд╛рдо рд╕реЗ рдореЗрд▓ рдЦрд╛рддрд╛ рд╣реИред
  * `"direction": "in"` - рдпрд╣ рдПрдХ рдЗрдирдкреБрдЯ рдмрд╛рдЗрдВрдбрд┐рдВрдЧ рд╣реИ, рдЗрд╡реЗрдВрдЯ рд╣рдм рд╕реЗ рдбреЗрдЯрд╛ рдлрд╝рдВрдХреНрд╢рди рдореЗрдВ рдЖрддрд╛ рд╣реИред
  * `"connection": ""` - рдпрд╣ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддрд╛ рд╣реИ рдХрд┐ рдХрдиреЗрдХреНрд╢рди рд╕реНрдЯреНрд░рд┐рдВрдЧ рдХреЛ рдкрдврд╝рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рд╕ рд╕реЗрдЯрд┐рдВрдЧ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рд╣реИред рд╕реНрдерд╛рдиреАрдп рд░реВрдк рд╕реЗ рдЪрд▓рд╛рдиреЗ рдкрд░, рдпрд╣ `local.settings.json` рдлрд╝рд╛рдЗрд▓ рд╕реЗ рдЗрд╕ рд╕реЗрдЯрд┐рдВрдЧ рдХреЛ рдкрдврд╝реЗрдЧрд╛ред

    > ЁЯТБ рдХрдиреЗрдХреНрд╢рди рд╕реНрдЯреНрд░рд┐рдВрдЧ рдХреЛ `function.json` рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдЗрд╕реЗ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рд╕реЗ рдкрдврд╝рд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред рдРрд╕рд╛ рдЗрд╕рд▓рд┐рдП рд╣реИ рддрд╛рдХрд┐ рдЖрдк рдЧрд▓рддреА рд╕реЗ рдЕрдкрдиреА рдХрдиреЗрдХреНрд╢рди рд╕реНрдЯреНрд░рд┐рдВрдЧ рдХреЛ рдЙрдЬрд╛рдЧрд░ рди рдХрд░реЗрдВред

1. [Azure Functions рдЯреЗрдореНрдкрд▓реЗрдЯ рдореЗрдВ рдПрдХ рдмрдЧ](https://github.com/Azure/azure-functions-templates/issues/1250) рдХреЗ рдХрд╛рд░рдг, `function.json` рдореЗрдВ `cardinality` рдлрд╝реАрд▓реНрдб рдХреЗ рд▓рд┐рдП рдПрдХ рдЧрд▓рдд рдорд╛рди рд╣реИред рдЗрд╕ рдлрд╝реАрд▓реНрдб рдХреЛ `many` рд╕реЗ `one` рдореЗрдВ рдЕрдкрдбреЗрдЯ рдХрд░реЗрдВ:

    ```json
    "cardinality": "one",
    ```

1. `function.json` рдлрд╝рд╛рдЗрд▓ рдореЗрдВ `"connection"` рдХреЗ рдорд╛рди рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░реЗрдВ рддрд╛рдХрд┐ рдпрд╣ `local.settings.json` рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдЬреЛрдбрд╝реЗ рдЧрдП рдирдП рдорд╛рди рдХреА рдУрд░ рдЗрд╢рд╛рд░рд╛ рдХрд░реЗ:

    ```json
    "connection": "IOT_HUB_CONNECTION_STRING",
    ```

    > ЁЯТБ рдпрд╛рдж рд░рдЦреЗрдВ - рдЗрд╕реЗ рд╕реЗрдЯрд┐рдВрдЧ рдХреА рдУрд░ рдЗрд╢рд╛рд░рд╛ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП, рдЗрд╕рдореЗрдВ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдХрдиреЗрдХреНрд╢рди рд╕реНрдЯреНрд░рд┐рдВрдЧ рдирд╣реАрдВ рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдПред

1. рдХрдиреЗрдХреНрд╢рди рд╕реНрдЯреНрд░рд┐рдВрдЧ рдореЗрдВ `eventHubName` рдорд╛рди рд╣реЛрддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП `function.json` рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдЗрд╕рдХреЗ рд▓рд┐рдП рдорд╛рди рдХреЛ рдЦрд╛рд▓реА рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред рдЗрд╕ рдорд╛рди рдХреЛ рдЦрд╛рд▓реА рд╕реНрдЯреНрд░рд┐рдВрдЧ рдореЗрдВ рдЕрдкрдбреЗрдЯ рдХрд░реЗрдВ:

    ```json
    "eventHubName": "",
    ```

### рдХрд╛рд░реНрдп - рдЗрд╡реЗрдВрдЯ рдЯреНрд░рд┐рдЧрд░ рдЪрд▓рд╛рдПрдВ

1. рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ рдЖрдк IoT Hub рдЗрд╡реЗрдВрдЯ рдореЙрдирд┐рдЯрд░ рдирд╣реАрдВ рдЪрд▓рд╛ рд░рд╣реЗ рд╣реИрдВред рдпрджрд┐ рдпрд╣ Functions рдРрдк рдХреЗ рд╕рд╛рде рдПрдХ рд╣реА рд╕рдордп рдореЗрдВ рдЪрд▓ рд░рд╣рд╛ рд╣реИ, рддреЛ Functions рдРрдк рдХрдиреЗрдХреНрдЯ рдирд╣реАрдВ рдХрд░ рдкрд╛рдПрдЧрд╛ рдФрд░ рдЗрд╡реЗрдВрдЯреНрд╕ рдХрд╛ рдЙрдкрднреЛрдЧ рдирд╣реАрдВ рдХрд░ рдкрд╛рдПрдЧрд╛ред

    > ЁЯТБ рдХрдИ рдРрдкреНрд╕ IoT Hub рдПрдВрдбрдкреЙрдЗрдВрдЯреНрд╕ рд╕реЗ рд╡рд┐рднрд┐рдиреНрди *рдХрдВрдЬреНрдпреВрдорд░ рдЧреНрд░реБрдкреНрд╕* рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдХрдиреЗрдХреНрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдЗрдиреНрд╣реЗрдВ рдмрд╛рдж рдХреЗ рдкрд╛рда рдореЗрдВ рдХрд╡рд░ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред

1. Functions рдРрдк рдЪрд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП, VS Code рдЯрд░реНрдорд┐рдирд▓ рд╕реЗ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрдорд╛рдВрдб рдЪрд▓рд╛рдПрдВ:

    ```sh
    func start
    ```

    Functions рдРрдк рд╢реБрд░реВ рд╣реЛ рдЬрд╛рдПрдЧрд╛, рдФрд░ `iot-hub-trigger` рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдПрдЧрд╛ред рдпрд╣ рдкрд┐рдЫрд▓реЗ рджрд┐рди рдореЗрдВ IoT Hub рдХреЛ рднреЗрдЬреЗ рдЧрдП рдХрд┐рд╕реА рднреА рдЗрд╡реЗрдВрдЯ рдХреЛ рдкреНрд░реЛрд╕реЗрд╕ рдХрд░реЗрдЧрд╛ред

    ```output
    (.venv) тЮЬ  soil-moisture-trigger func start
    Found Python version 3.9.1 (python3).
    
    Azure Functions Core Tools
    Core Tools Version:       3.0.3442 Commit hash: 6bfab24b2743f8421475d996402c398d2fe4a9e0  (64-bit)
    Function Runtime Version: 3.0.15417.0
    
    Functions:
    
            iot-hub-trigger: eventHubTrigger
    
    For detailed output, run func with --verbose flag.
    [2021-05-05T02:44:07.517Z] Worker process started and initialized.
    [2021-05-05T02:44:09.202Z] Executing 'Functions.iot-hub-trigger' (Reason='(null)', Id=802803a5-eae9-4401-a1f4-176631456ce4)
    [2021-05-05T02:44:09.205Z] Trigger Details: PartitionId: 0, Offset: 1011240-1011632, EnqueueTimeUtc: 2021-05-04T19:04:04.2030000Z-2021-05-04T19:04:04.3900000Z, SequenceNumber: 2546-2547, Count: 2
    [2021-05-05T02:44:09.352Z] Python EventHub trigger processed an event: {"soil_moisture":628}
    [2021-05-05T02:44:09.354Z] Python EventHub trigger processed an event: {"soil_moisture":624}
    [2021-05-05T02:44:09.395Z] Executed 'Functions.iot-hub-trigger' (Succeeded, Id=802803a5-eae9-4401-a1f4-176631456ce4, Duration=245ms)
    ```

    рдкреНрд░рддреНрдпреЗрдХ рдлрд╝рдВрдХреНрд╢рди рдХреЙрд▓ рдХреЗ рд▓рд┐рдП рдЖрдЙрдЯрдкреБрдЯ рдореЗрдВ `Executing 'Functions.iot-hub-trigger'`/`Executed 'Functions.iot-hub-trigger'` рдмреНрд▓реЙрдХ рд╣реЛрдЧрд╛, рддрд╛рдХрд┐ рдЖрдк рджреЗрдЦ рд╕рдХреЗрдВ рдХрд┐ рдкреНрд░рддреНрдпреЗрдХ рдлрд╝рдВрдХреНрд╢рди рдХреЙрд▓ рдореЗрдВ рдХрд┐рддрдиреЗ рд╕рдВрджреЗрд╢ рдкреНрд░реЛрд╕реЗрд╕ рдХрд┐рдП рдЧрдПред

1. рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ рдЖрдкрдХрд╛ IoT рдбрд┐рд╡рд╛рдЗрд╕ рдЪрд▓ рд░рд╣рд╛ рд╣реИред рдЖрдк Functions рдРрдк рдореЗрдВ рдирдП рдорд┐рдЯреНрдЯреА рдХреА рдирдореА рдХреЗ рд╕рдВрджреЗрд╢ рджреЗрдЦреЗрдВрдЧреЗред

1. Functions рдРрдк рдХреЛ рдмрдВрдж рдХрд░реЗрдВ рдФрд░ рдкреБрдирдГ рдкреНрд░рд╛рд░рдВрдн рдХрд░реЗрдВред рдЖрдк рджреЗрдЦреЗрдВрдЧреЗ рдХрд┐ рдпрд╣ рдкрд┐рдЫрд▓реЗ рд╕рдВрджреЗрд╢реЛрдВ рдХреЛ рдлрд┐рд░ рд╕реЗ рдкреНрд░реЛрд╕реЗрд╕ рдирд╣реАрдВ рдХрд░реЗрдЧрд╛, рдпрд╣ рдХреЗрд╡рд▓ рдирдП рд╕рдВрджреЗрд╢реЛрдВ рдХреЛ рдкреНрд░реЛрд╕реЗрд╕ рдХрд░реЗрдЧрд╛ред

> ЁЯТБ VS Code рдЖрдкрдХреЗ Functions рдХреЛ рдбрд┐рдмрдЧ рдХрд░рдиреЗ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИред рдЖрдк рдХреЛрдб рдХреА рдкреНрд░рддреНрдпреЗрдХ рдкрдВрдХреНрддрд┐ рдХреА рд╢реБрд░реБрдЖрдд рдореЗрдВ рдХреНрд▓рд┐рдХ рдХрд░рдХреЗ рдмреНрд░реЗрдХ рдкреЙрдЗрдВрдЯ рд╕реЗрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдпрд╛ рдХреЛрдб рдХреА рдПрдХ рдкрдВрдХреНрддрд┐ рдкрд░ рдХрд░реНрд╕рд░ рд░рдЦрдХрд░ *Run -> Toggle breakpoint* рдЪреБрди рд╕рдХрддреЗ рд╣реИрдВ, рдпрд╛ `F9` рджрдмрд╛ рд╕рдХрддреЗ рд╣реИрдВред рдЖрдк *Run -> Start debugging* рдЪреБрдирдХрд░, `F5` рджрдмрд╛рдХрд░, рдпрд╛ *Run and debug* рдкреИрди рдХрд╛ рдЪрдпрди рдХрд░рдХреЗ рдФрд░ **Start debugging** рдмрдЯрди рдЪреБрдирдХрд░ рдбрд┐рдмрдЧрд░ рд▓реЙрдиреНрдЪ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдРрд╕рд╛ рдХрд░рдХреЗ рдЖрдк рдкреНрд░реЛрд╕реЗрд╕ рдХрд┐рдП рдЬрд╛ рд░рд╣реЗ рдЗрд╡реЗрдВрдЯреНрд╕ рдХрд╛ рд╡рд┐рд╡рд░рдг рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВред

#### рд╕рдорд╕реНрдпрд╛ рдирд┐рд╡рд╛рд░рдг

* рдпрджрд┐ рдЖрдкрдХреЛ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рддреНрд░реБрдЯрд┐ рдорд┐рд▓рддреА рд╣реИ:

    ```output
    The listener for function 'Functions.iot-hub-trigger' was unable to start. Microsoft.WindowsAzure.Storage: Connection refused. System.Net.Http: Connection refused. System.Private.CoreLib: Connection refused.
    ```

    рдЬрд╛рдВрдЪреЗрдВ рдХрд┐ Azurite рдЪрд▓ рд░рд╣рд╛ рд╣реИ рдФрд░ рдЖрдкрдиреЗ `local.settings.json` рдлрд╝рд╛рдЗрд▓ рдореЗрдВ `AzureWebJobsStorage` рдХреЛ `UseDevelopmentStorage=true` рдкрд░ рд╕реЗрдЯ рдХрд┐рдпрд╛ рд╣реИред

* рдпрджрд┐ рдЖрдкрдХреЛ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рддреНрд░реБрдЯрд┐ рдорд┐рд▓рддреА рд╣реИ:

    ```output
    System.Private.CoreLib: Exception while executing function: Functions.iot-hub-trigger. System.Private.CoreLib: Result: Failure Exception: AttributeError: 'list' object has no attribute 'get_body'
    ```

    рдЬрд╛рдВрдЪреЗрдВ рдХрд┐ рдЖрдкрдиреЗ `function.json` рдлрд╝рд╛рдЗрд▓ рдореЗрдВ `cardinality` рдХреЛ `one` рдкрд░ рд╕реЗрдЯ рдХрд┐рдпрд╛ рд╣реИред

* рдпрджрд┐ рдЖрдкрдХреЛ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рддреНрд░реБрдЯрд┐ рдорд┐рд▓рддреА рд╣реИ:

    ```output
    Azure.Messaging.EventHubs: The path to an Event Hub may be specified as part of the connection string or as a separate value, but not both.  Please verify that your connection string does not have the `EntityPath` token if you are passing an explicit Event Hub name. (Parameter 'connectionString').
    ```

    рдЬрд╛рдВрдЪреЗрдВ рдХрд┐ рдЖрдкрдиреЗ `function.json` рдлрд╝рд╛рдЗрд▓ рдореЗрдВ `eventHubName` рдХреЛ рдЦрд╛рд▓реА рд╕реНрдЯреНрд░рд┐рдВрдЧ рдкрд░ рд╕реЗрдЯ рдХрд┐рдпрд╛ рд╣реИред

## рд╕рд░реНрд╡рд░рд▓реЗрд╕ рдХреЛрдб рд╕реЗ рдбрд╛рдпрд░реЗрдХреНрдЯ рдореЗрдердб рд░рд┐рдХреНрд╡реЗрд╕реНрдЯ рднреЗрдЬреЗрдВ

рдЕрдм рддрдХ рдЖрдкрдХрд╛ Functions рдРрдк Event Hub рд╕рдВрдЧрдд рдПрдВрдбрдкреЙрдЗрдВрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ IoT Hub рд╕реЗ рд╕рдВрджреЗрд╢ рд╕реБрди рд░рд╣рд╛ рд╣реИред рдЕрдм рдЖрдкрдХреЛ IoT рдбрд┐рд╡рд╛рдЗрд╕ рдХреЛ рдХрдорд╛рдВрдб рднреЗрдЬрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред рдпрд╣ IoT Hub рд╕реЗ *Registry Manager* рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдПрдХ рдЕрд▓рдЧ рдХрдиреЗрдХреНрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред Registry Manager рдПрдХ рдЙрдкрдХрд░рдг рд╣реИ рдЬреЛ рдЖрдкрдХреЛ IoT Hub рдХреЗ рд╕рд╛рде рдкрдВрдЬреАрдХреГрдд рдбрд┐рд╡рд╛рдЗрд╕реЛрдВ рдХреЛ рджреЗрдЦрдиреЗ рдФрд░ рдЙрди рдбрд┐рд╡рд╛рдЗрд╕реЛрдВ рдХреЗ рд╕рд╛рде рд╕рдВрд╡рд╛рдж рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред рдЖрдк рдЗрд╕реЗ рдХреНрд▓рд╛рдЙрдб рд╕реЗ рдбрд┐рд╡рд╛рдЗрд╕ рд╕рдВрджреЗрд╢ рднреЗрдЬрдиреЗ, рдбрд╛рдпрд░реЗрдХреНрдЯ рдореЗрдердб рд░рд┐рдХреНрд╡реЗрд╕реНрдЯ рднреЗрдЬрдиреЗ, рдпрд╛ рдбрд┐рд╡рд╛рдЗрд╕ рдЯреНрд╡рд┐рди рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдЖрдк рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ IoT Hub рд╕реЗ IoT рдбрд┐рд╡рд╛рдЗрд╕реЛрдВ рдХреЛ рдкрдВрдЬреАрдХреГрдд рдХрд░рдиреЗ, рдЕрдкрдбреЗрдЯ рдХрд░рдиреЗ рдпрд╛ рд╣рдЯрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рднреА рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

Registry Manager рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рдПрдХ рдХрдиреЗрдХреНрд╢рди рд╕реНрдЯреНрд░рд┐рдВрдЧ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреАред

### рдХрд╛рд░реНрдп - Registry Manager рдХрдиреЗрдХреНрд╢рди рд╕реНрдЯреНрд░рд┐рдВрдЧ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ

1. рдХрдиреЗрдХреНрд╢рди рд╕реНрдЯреНрд░рд┐рдВрдЧ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрдорд╛рдВрдб рдЪрд▓рд╛рдПрдВ:

    ```sh
    az iot hub connection-string show --policy-name service \
                                      --output table \
                                      --hub-name <hub_name>
    ```

    `<hub_name>` рдХреЛ рдЕрдкрдиреЗ IoT Hub рдХреЗ рдирд╛рдо рд╕реЗ рдмрджрд▓реЗрдВред

    рдХрдиреЗрдХреНрд╢рди рд╕реНрдЯреНрд░рд┐рдВрдЧ *ServiceConnect* рдкреЙрд▓рд┐рд╕реА рдХреЗ рд▓рд┐рдП `--policy-name service` рдкреИрд░рд╛рдореАрдЯрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЕрдиреБрд░реЛрдз рдХреА рдЬрд╛рддреА рд╣реИред рдЬрдм рдЖрдк рдХрдиреЗрдХреНрд╢рди рд╕реНрдЯреНрд░рд┐рдВрдЧ рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдЖрдк рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рд╡рд╣ рдХрдиреЗрдХреНрд╢рди рд╕реНрдЯреНрд░рд┐рдВрдЧ рдХрд┐рди рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдЧрд╛ред ServiceConnect рдкреЙрд▓рд┐рд╕реА рдЖрдкрдХреЗ рдХреЛрдб рдХреЛ рдХрдиреЗрдХреНрдЯ рдХрд░рдиреЗ рдФрд░ IoT рдбрд┐рд╡рд╛рдЗрд╕реЛрдВ рдХреЛ рд╕рдВрджреЗрд╢ рднреЗрдЬрдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреА рд╣реИред

    тЬЕ рдереЛрдбрд╝рд╛ рд╢реЛрдз рдХрд░реЗрдВ: [IoT Hub рдЕрдиреБрдорддрд┐рдпрд╛рдВ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝](https://docs.microsoft.com/azure/iot-hub/iot-hub-devguide-security#iot-hub-permissions?WT.mc_id=academic-17441-jabenn) рдореЗрдВ рд╡рд┐рднрд┐рдиреНрди рдкреЙрд▓рд┐рд╕рд┐рдпреЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдкрдврд╝реЗрдВред

1. VS Code рдореЗрдВ `local.settings.json` рдлрд╝рд╛рдЗрд▓ рдЦреЛрд▓реЗрдВред `Values` рд╕реЗрдХреНрд╢рди рдХреЗ рдЕрдВрджрд░ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдЕрддрд┐рд░рд┐рдХреНрдд рдорд╛рди рдЬреЛрдбрд╝реЗрдВ:

    ```json
    "REGISTRY_MANAGER_CONNECTION_STRING": "<connection string>"
    ```

    `<connection string>` рдХреЛ рдкрд┐рдЫрд▓реЗ рдЪрд░рдг рд╕реЗ рдкреНрд░рд╛рдкреНрдд рдорд╛рди рд╕реЗ рдмрджрд▓реЗрдВред рдЗрд╕реЗ рд╡реИрдз JSON рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдКрдкрд░ рдХреА рдкрдВрдХреНрддрд┐ рдХреЗ рдмрд╛рдж рдПрдХ рдХреЙрдорд╛ рдЬреЛрдбрд╝рдирд╛ рд╣реЛрдЧрд╛ред

### рдХрд╛рд░реНрдп - рдбрд┐рд╡рд╛рдЗрд╕ рдХреЛ рдбрд╛рдпрд░реЗрдХреНрдЯ рдореЗрдердб рд░рд┐рдХреНрд╡реЗрд╕реНрдЯ рднреЗрдЬреЗрдВ

1. Registry Manager рдХреЗ рд▓рд┐рдП SDK рдПрдХ Pip рдкреИрдХреЗрдЬ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЙрдкрд▓рдмреНрдз рд╣реИред рдЗрд╕ рдкреИрдХреЗрдЬ рдкрд░ рдирд┐рд░реНрднрд░рддрд╛ рдЬреЛрдбрд╝рдиреЗ рдХреЗ рд▓рд┐рдП `requirements.txt` рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдкрдВрдХреНрддрд┐ рдЬреЛрдбрд╝реЗрдВ:

    ```sh
    azure-iot-hub
    ```

1. рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ VS Code рдЯрд░реНрдорд┐рдирд▓ рдореЗрдВ рд╡рд░реНрдЪреБрдЕрд▓ рдПрдирд╡рд╛рдпрд░рдирдореЗрдВрдЯ рд╕рдХреНрд░рд┐рдп рд╣реИ, рдФрд░ Pip рдкреИрдХреЗрдЬ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрдорд╛рдВрдб рдЪрд▓рд╛рдПрдВ:

    ```sh
    pip install -r requirements.txt
    ```

1. `__init__.py` рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдЗрдореНрдкреЛрд░реНрдЯреНрд╕ рдЬреЛрдбрд╝реЗрдВ:

    ```python
    import json
    import os
    from azure.iot.hub import IoTHubRegistryManager
    from azure.iot.hub.models import CloudToDeviceMethod
    ```

    рдпрд╣ рдХреБрдЫ рд╕рд┐рд╕реНрдЯрдо рд▓рд╛рдЗрдмреНрд░реЗрд░реАрдЬрд╝ рдХреЗ рд╕рд╛рде-рд╕рд╛рде Registry Manager рдХреЗ рд╕рд╛рде рд╕рдВрд╡рд╛рдж рдХрд░рдиреЗ рдФрд░ рдбрд╛рдпрд░реЗрдХреНрдЯ рдореЗрдердб рд░рд┐рдХреНрд╡реЗрд╕реНрдЯ рднреЗрдЬрдиреЗ рдХреЗ рд▓рд┐рдП рд▓рд╛рдЗрдмреНрд░реЗрд░реАрдЬрд╝ рдХреЛ рдЗрдореНрдкреЛрд░реНрдЯ рдХрд░рддрд╛ рд╣реИред

1. `main` рдореЗрдердб рдХреЗ рдЕрдВрджрд░ рдХрд╛ рдХреЛрдб рд╣рдЯрд╛ рджреЗрдВ, рд▓реЗрдХрд┐рди рдореЗрдердб рдХреЛ рдмрдирд╛рдП рд░рдЦреЗрдВред

1. `main` рдореЗрдердб рдореЗрдВ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреЛрдб рдЬреЛрдбрд╝реЗрдВ:

    ```python
    body = json.loads(event.get_body().decode('utf-8'))
    device_id = event.iothub_metadata['connection-device-id']

    logging.info(f'Received message: {body} from {device_id}')
    ```

    рдпрд╣ рдХреЛрдб рдЗрд╡реЗрдВрдЯ рдХреЗ рдмреЙрдбреА рдХреЛ рдирд┐рдХрд╛рд▓рддрд╛ рд╣реИ рдЬрд┐рд╕рдореЗрдВ IoT рдбрд┐рд╡рд╛рдЗрд╕ рджреНрд╡рд╛рд░рд╛ рднреЗрдЬрд╛ рдЧрдпрд╛ JSON рд╕рдВрджреЗрд╢ рд╣реЛрддрд╛ рд╣реИред

    рдлрд┐рд░ рдпрд╣ рд╕рдВрджреЗрд╢ рдХреЗ рд╕рд╛рде рдкрд╛рд╕ рдХрд┐рдП рдЧрдП рдПрдиреЛрдЯреЗрд╢рди рд╕реЗ рдбрд┐рд╡рд╛рдЗрд╕ ID рдкреНрд░рд╛рдкреНрдд рдХрд░рддрд╛ рд╣реИред рдЗрд╡реЗрдВрдЯ рдХрд╛ рдмреЙрдбреА рднреЗрдЬрд╛ рдЧрдпрд╛ рдЯреЗрд▓реАрдореЗрдЯреНрд░реА рд╕рдВрджреЗрд╢ рд╣реЛрддрд╛ рд╣реИ, рдФрд░ `iothub_metadata` рдбрд┐рдХреНрд╢рдирд░реА рдореЗрдВ IoT Hub рджреНрд╡рд╛рд░рд╛ рд╕реЗрдЯ рдХрд┐рдП рдЧрдП рдЧреБрдг рд╣реЛрддреЗ рд╣реИрдВ рдЬреИрд╕реЗ рдХрд┐ рднреЗрдЬрдиреЗ рд╡рд╛рд▓реЗ рдбрд┐рд╡рд╛рдЗрд╕ рдХрд╛ ID рдФрд░ рд╕рдВрджреЗрд╢ рднреЗрдЬреЗ рдЬрд╛рдиреЗ рдХрд╛ рд╕рдордпред

    рдпрд╣ рдЬрд╛рдирдХрд╛рд░реА рд▓реЙрдЧ рдХреА рдЬрд╛рддреА рд╣реИред рдЬрдм рдЖрдк Functions рдРрдк рдХреЛ рд╕реНрдерд╛рдиреАрдп рд░реВрдк рд╕реЗ рдЪрд▓рд╛рддреЗ рд╣реИрдВ рддреЛ рдЖрдк рдЯрд░реНрдорд┐рдирд▓ рдореЗрдВ рдпрд╣ рд▓реЙрдЧрд┐рдВрдЧ рджреЗрдЦреЗрдВрдЧреЗред

1. рдЗрд╕рдХреЗ рдиреАрдЪреЗ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреЛрдб рдЬреЛрдбрд╝реЗрдВ:

    ```python
    soil_moisture = body['soil_moisture']

    if soil_moisture > 450:
        direct_method = CloudToDeviceMethod(method_name='relay_on', payload='{}')
    else:
        direct_method = CloudToDeviceMethod(method_name='relay_off', payload='{}')
    ```

    рдпрд╣ рдХреЛрдб рд╕рдВрджреЗрд╢ рд╕реЗ рдорд┐рдЯреНрдЯреА рдХреА рдирдореА рдкреНрд░рд╛рдкреНрдд рдХрд░рддрд╛ рд╣реИред рдлрд┐рд░ рдорд┐рдЯреНрдЯреА рдХреА рдирдореА рдХреА рдЬрд╛рдВрдЪ рдХрд░рддрд╛ рд╣реИ, рдФрд░ рдорд╛рди рдХреЗ рдЖрдзрд╛рд░ рдкрд░ `relay_on` рдпрд╛ `relay_off` рдбрд╛рдпрд░реЗрдХреНрдЯ рдореЗрдердб рд░рд┐рдХреНрд╡реЗрд╕реНрдЯ рдХреЗ рд▓рд┐рдП рдПрдХ рд╣реЗрд▓реНрдкрд░ рдХреНрд▓рд╛рд╕ рдмрдирд╛рддрд╛ рд╣реИред рдореЗрдердб рд░рд┐рдХреНрд╡реЗрд╕реНрдЯ рдХреЛ рдХрд┐рд╕реА рдкреЗрд▓реЛрдб рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реЛрддреА рд╣реИ, рдЗрд╕рд▓рд┐рдП рдПрдХ рдЦрд╛рд▓реА JSON рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рднреЗрдЬрд╛ рдЬрд╛рддрд╛ рд╣реИред

1. рдЗрд╕рдХреЗ рдиреАрдЪреЗ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреЛрдб рдЬреЛрдбрд╝реЗрдВ:

    ```python
    logging.info(f'Sending direct method request for {direct_method.method_name} for device {device_id}')

    registry_manager_connection_string = os.environ['REGISTRY_MANAGER_CONNECTION_STRING']
    registry_manager = IoTHubRegistryManager(registry_manager_connection_string)
    ```
рдпрд╣ рдХреЛрдб `local.settings.json` рдлрд╝рд╛рдЗрд▓ рд╕реЗ `REGISTRY_MANAGER_CONNECTION_STRING` рдХреЛ рд▓реЛрдб рдХрд░рддрд╛ рд╣реИред рдЗрд╕ рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдореМрдЬреВрдж рдорд╛рди рдкрд░реНрдпрд╛рд╡рд░рдг рдЪрд░ рдХреЗ рд░реВрдк рдореЗрдВ рдЙрдкрд▓рдмреНрдз рд╣реЛрддреЗ рд╣реИрдВ, рдФрд░ рдЗрдиреНрд╣реЗрдВ `os.environ` рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдкрдврд╝рд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдЬреЛ рд╕рднреА рдкрд░реНрдпрд╛рд╡рд░рдг рдЪрд░ рдХрд╛ рдПрдХ рдбрд┐рдХреНрд╢рдирд░реА рд▓реМрдЯрд╛рддрд╛ рд╣реИред

> ЁЯТБ рдЬрдм рдпрд╣ рдХреЛрдб рдХреНрд▓рд╛рдЙрдб рдореЗрдВ рдбрд┐рдкреНрд▓реЙрдп рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ `local.settings.json` рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдореМрдЬреВрдж рдорд╛рди *Application Settings* рдХреЗ рд░реВрдк рдореЗрдВ рд╕реЗрдЯ рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВ, рдФрд░ рдЗрдиреНрд╣реЗрдВ рдкрд░реНрдпрд╛рд╡рд░рдг рдЪрд░ рд╕реЗ рдкрдврд╝рд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред

рдЗрд╕рдХреЗ рдмрд╛рдж рдХреЛрдб рдХрдиреЗрдХреНрд╢рди рд╕реНрдЯреНрд░рд┐рдВрдЧ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ Registry Manager рд╣реЗрд▓реНрдкрд░ рдХреНрд▓рд╛рд╕ рдХрд╛ рдПрдХ рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдмрдирд╛рддрд╛ рд╣реИред

1. рдЗрд╕рдХреЗ рдиреАрдЪреЗ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреЛрдб рдЬреЛрдбрд╝реЗрдВ:

    ```python
    registry_manager.invoke_device_method(device_id, direct_method)

    logging.info('Direct method request sent!')
    ```

    рдпрд╣ рдХреЛрдб рд░рдЬрд┐рд╕реНрдЯреНрд░реА рдореИрдиреЗрдЬрд░ рдХреЛ рдЙрд╕ рдбрд┐рд╡рд╛рдЗрд╕ рдХреЛ рдбрд╛рдпрд░реЗрдХреНрдЯ рдореЗрдердб рд░рд┐рдХреНрд╡реЗрд╕реНрдЯ рднреЗрдЬрдиреЗ рдХреЗ рд▓рд┐рдП рдХрд╣рддрд╛ рд╣реИ рдЬрд┐рд╕рдиреЗ рдЯреЗрд▓реАрдореЗрдЯреНрд░реА рднреЗрдЬреА рд╣реИред

    > ЁЯТБ рдкрд╣рд▓реЗ рдХреЗ рдкрд╛рдареЛрдВ рдореЗрдВ рдЖрдкрдиреЗ MQTT рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЬреЛ рдРрдк рдмрдирд╛рдП рдереЗ, рдЙрдирдореЗрдВ рд░рд┐рд▓реЗ рдХрдВрдЯреНрд░реЛрд▓ рдХрдорд╛рдВрдб рд╕рднреА рдбрд┐рд╡рд╛рдЗрд╕реЛрдВ рдХреЛ рднреЗрдЬреЗ рдЬрд╛рддреЗ рдереЗред рдХреЛрдб рдиреЗ рдпрд╣ рдорд╛рди рд▓рд┐рдпрд╛ рдерд╛ рдХрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рдХреЗрд╡рд▓ рдПрдХ рдбрд┐рд╡рд╛рдЗрд╕ рд╣реЛрдЧрд╛ред рдЗрд╕ рд╕рдВрд╕реНрдХрд░рдг рдореЗрдВ рдХреЛрдб рдПрдХ рд╣реА рдбрд┐рд╡рд╛рдЗрд╕ рдХреЛ рдореЗрдердб рд░рд┐рдХреНрд╡реЗрд╕реНрдЯ рднреЗрдЬрддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдпрд╣ рдХрдИ рд╕реЗрдЯрдЕрдкреНрд╕ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░реЗрдЧрд╛, рдЬреИрд╕реЗ рдХрд┐ рдирдореА рд╕реЗрдВрд╕рд░ рдФрд░ рд░рд┐рд▓реЗ, рдФрд░ рд╕рд╣реА рдбрд┐рд╡рд╛рдЗрд╕ рдХреЛ рд╕рд╣реА рдбрд╛рдпрд░реЗрдХреНрдЯ рдореЗрдердб рд░рд┐рдХреНрд╡реЗрд╕реНрдЯ рднреЗрдЬреЗрдЧрд╛ред

1. Functions рдРрдк рдЪрд▓рд╛рдПрдВ рдФрд░ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ рдЖрдкрдХрд╛ IoT рдбрд┐рд╡рд╛рдЗрд╕ рдбреЗрдЯрд╛ рднреЗрдЬ рд░рд╣рд╛ рд╣реИред рдЖрдк рджреЗрдЦреЗрдВрдЧреЗ рдХрд┐ рд╕рдВрджреЗрд╢ рдкреНрд░реЛрд╕реЗрд╕ рд╣реЛ рд░рд╣реЗ рд╣реИрдВ рдФрд░ рдбрд╛рдпрд░реЗрдХреНрдЯ рдореЗрдердб рд░рд┐рдХреНрд╡реЗрд╕реНрдЯ рднреЗрдЬреЗ рдЬрд╛ рд░рд╣реЗ рд╣реИрдВред рдорд┐рдЯреНрдЯреА рдореЗрдВ рдирдореА рд╕реЗрдВрд╕рд░ рдХреЛ рдЕрдВрджрд░ рдФрд░ рдмрд╛рд╣рд░ рд▓реЗ рдЬрд╛рдХрд░ рдорд╛рди рдмрджрд▓рддреЗ рд╣реБрдП рджреЗрдЦреЗрдВ рдФрд░ рд░рд┐рд▓реЗ рдХреЛ рдЪрд╛рд▓реВ рдФрд░ рдмрдВрдж рд╣реЛрддреЗ рд╣реБрдП рджреЗрдЦреЗрдВред

> ЁЯТБ рдЖрдк рдЗрд╕ рдХреЛрдб рдХреЛ [code/functions](../../../../../2-farm/lessons/5-migrate-application-to-the-cloud/code/functions) рдлрд╝реЛрд▓реНрдбрд░ рдореЗрдВ рдкрд╛ рд╕рдХрддреЗ рд╣реИрдВред

## рдЕрдкрдиреЗ рд╕рд░реНрд╡рд░рд▓реЗрд╕ рдХреЛрдб рдХреЛ рдХреНрд▓рд╛рдЙрдб рдореЗрдВ рдбрд┐рдкреНрд▓реЙрдп рдХрд░реЗрдВ

рдЖрдкрдХрд╛ рдХреЛрдб рдЕрдм рд▓реЛрдХрд▓ рдкрд░ рдХрд╛рдо рдХрд░ рд░рд╣рд╛ рд╣реИ, рддреЛ рдЕрдЧрд▓рд╛ рдХрджрдо Functions рдРрдк рдХреЛ рдХреНрд▓рд╛рдЙрдб рдореЗрдВ рдбрд┐рдкреНрд▓реЙрдп рдХрд░рдирд╛ рд╣реИред

### рдХрд╛рд░реНрдп - рдХреНрд▓рд╛рдЙрдб рд╕рдВрд╕рд╛рдзрди рдмрдирд╛рдПрдВ

рдЖрдкрдХреЗ Functions рдРрдк рдХреЛ Azure рдореЗрдВ Functions App рд╕рдВрд╕рд╛рдзрди рдореЗрдВ рдбрд┐рдкреНрд▓реЙрдп рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рдЬреЛ рдЖрдкрдХреЗ IoT Hub рдХреЗ рд▓рд┐рдП рдмрдирд╛рдП рдЧрдП Resource Group рдХреЗ рдЕрдВрджрд░ рд╣реЛрдЧрд╛ред рдЖрдкрдХреЛ Azure рдореЗрдВ рдПрдХ Storage Account рднреА рдмрдирд╛рдирд╛ рд╣реЛрдЧрд╛ рддрд╛рдХрд┐ рд▓реЛрдХрд▓ рдкрд░ рдЪрд▓ рд░рд╣реЗ рдЗрдореНрдпреВрд▓реЗрдЯреЗрдб рд╕реНрдЯреЛрд░реЗрдЬ рдХреЛ рдмрджрд▓рд╛ рдЬрд╛ рд╕рдХреЗред

1. рд╕реНрдЯреЛрд░реЗрдЬ рдЕрдХрд╛рдЙрдВрдЯ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрдорд╛рдВрдб рдЪрд▓рд╛рдПрдВ:

    ```sh
    az storage account create --resource-group soil-moisture-sensor \
                              --sku Standard_LRS \
                              --name <storage_name> 
    ```

    `<storage_name>` рдХреЛ рдЕрдкрдиреЗ рд╕реНрдЯреЛрд░реЗрдЬ рдЕрдХрд╛рдЙрдВрдЯ рдХреЗ рд▓рд┐рдП рдПрдХ рдирд╛рдо рд╕реЗ рдмрджрд▓реЗрдВред рдпрд╣ рдирд╛рдо рд╡реИрд╢реНрд╡рд┐рдХ рд░реВрдк рд╕реЗ рдЕрджреНрд╡рд┐рддреАрдп рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рд╕реНрдЯреЛрд░реЗрдЬ рдЕрдХрд╛рдЙрдВрдЯ рддрдХ рдкрд╣реБрдВрдЪрдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ URL рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рдмрдирддрд╛ рд╣реИред рдЗрд╕ рдирд╛рдо рдореЗрдВ рдХреЗрд╡рд▓ рдЫреЛрдЯреЗ рдЕрдХреНрд╖рд░ рдФрд░ рд╕рдВрдЦреНрдпрд╛рдПрдВ рдЙрдкрдпреЛрдЧ рдХреА рдЬрд╛ рд╕рдХрддреА рд╣реИрдВ, рдХреЛрдИ рдЕрдиреНрдп рд╡рд░реНрдг рдирд╣реАрдВ, рдФрд░ рдпрд╣ 24 рд╡рд░реНрдгреЛрдВ рддрдХ рд╕реАрдорд┐рдд рд╣реИред рдХреБрдЫ рдРрд╕рд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ рдЬреИрд╕реЗ `sms` рдФрд░ рдЕрдВрдд рдореЗрдВ рдПрдХ рдЕрджреНрд╡рд┐рддреАрдп рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛ рдЬреЛрдбрд╝реЗрдВ, рдЬреИрд╕реЗ рдХреБрдЫ рд░реИрдВрдбрдо рд╢рдмреНрдж рдпрд╛ рдЖрдкрдХрд╛ рдирд╛рдоред

    `--sku Standard_LRS` рдореВрд▓реНрдп рдирд┐рд░реНрдзрд╛рд░рдг рд╕реНрддрд░ рдХрд╛ рдЪрдпрди рдХрд░рддрд╛ рд╣реИ, рдЬреЛ рд╕рдмрд╕реЗ рдХрдо рд▓рд╛рдЧрдд рд╡рд╛рд▓реЗ рд╕рд╛рдорд╛рдиреНрдп-рдЙрджреНрджреЗрд╢реНрдп рд╡рд╛рд▓реЗ рдЕрдХрд╛рдЙрдВрдЯ рдХреЛ рдЪреБрдирддрд╛ рд╣реИред рд╕реНрдЯреЛрд░реЗрдЬ рдХрд╛ рдХреЛрдИ рдореБрдлреНрдд рд╕реНрддрд░ рдирд╣реАрдВ рд╣реИ, рдФрд░ рдЖрдк рдЬреЛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ рдЙрд╕рдХреЗ рд▓рд┐рдП рднреБрдЧрддрд╛рди рдХрд░рддреЗ рд╣реИрдВред рд▓рд╛рдЧрдд рдЕрдкреЗрдХреНрд╖рд╛рдХреГрдд рдХрдо рд╣реИ, рд╕рдмрд╕реЗ рдорд╣рдВрдЧрд╛ рд╕реНрдЯреЛрд░реЗрдЬ рдкреНрд░рддрд┐ рдЧреАрдЧрд╛рдмрд╛рдЗрдЯ рдкреНрд░рддрд┐ рдорд╛рд╣ US$0.05 рд╕реЗ рдХрдо рд╣реИред

    тЬЕ рдореВрд▓реНрдп рдирд┐рд░реНрдзрд╛рд░рдг рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ [Azure Storage Account pricing page](https://azure.microsoft.com/pricing/details/storage/?WT.mc_id=academic-17441-jabenn) рдкрд░ рдкрдврд╝реЗрдВред

1. рдПрдХ Function App рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрдорд╛рдВрдб рдЪрд▓рд╛рдПрдВ:

    ```sh
    az functionapp create --resource-group soil-moisture-sensor \
                          --runtime python \
                          --functions-version 3 \
                          --os-type Linux \
                          --consumption-plan-location <location> \
                          --storage-account <storage_name> \
                          --name <functions_app_name>
    ```

    `<location>` рдХреЛ рдЙрд╕ рд╕реНрдерд╛рди рд╕реЗ рдмрджрд▓реЗрдВ рдЬрд┐рд╕реЗ рдЖрдкрдиреЗ рдкрд┐рдЫрд▓реЗ рдкрд╛рда рдореЗрдВ Resource Group рдмрдирд╛рддреЗ рд╕рдордп рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдерд╛ред

    `<storage_name>` рдХреЛ рдЙрд╕ рд╕реНрдЯреЛрд░реЗрдЬ рдЕрдХрд╛рдЙрдВрдЯ рдХреЗ рдирд╛рдо рд╕реЗ рдмрджрд▓реЗрдВ рдЬрд┐рд╕реЗ рдЖрдкрдиреЗ рдкрд┐рдЫрд▓реЗ рдЪрд░рдг рдореЗрдВ рдмрдирд╛рдпрд╛ рдерд╛ред

    `<functions_app_name>` рдХреЛ рдЕрдкрдиреЗ Functions App рдХреЗ рд▓рд┐рдП рдПрдХ рдЕрджреНрд╡рд┐рддреАрдп рдирд╛рдо рд╕реЗ рдмрджрд▓реЗрдВред рдпрд╣ рдирд╛рдо рд╡реИрд╢реНрд╡рд┐рдХ рд░реВрдк рд╕реЗ рдЕрджреНрд╡рд┐рддреАрдп рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ Functions App рддрдХ рдкрд╣реБрдВрдЪрдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ URL рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рдмрдирддрд╛ рд╣реИред рдХреБрдЫ рдРрд╕рд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ рдЬреИрд╕реЗ `soil-moisture-sensor-` рдФрд░ рдЕрдВрдд рдореЗрдВ рдПрдХ рдЕрджреНрд╡рд┐рддреАрдп рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛ рдЬреЛрдбрд╝реЗрдВ, рдЬреИрд╕реЗ рдХреБрдЫ рд░реИрдВрдбрдо рд╢рдмреНрдж рдпрд╛ рдЖрдкрдХрд╛ рдирд╛рдоред

    `--functions-version 3` рд╡рд┐рдХрд▓реНрдк Azure Functions рдХреЗ рд╕рдВрд╕реНрдХрд░рдг рдХреЛ рд╕реЗрдЯ рдХрд░рддрд╛ рд╣реИред рд╕рдВрд╕реНрдХрд░рдг 3 рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рд╣реИред

    `--os-type Linux` Functions рд░рдирдЯрд╛рдЗрдо рдХреЛ рдЗрди рдлрдВрдХреНрд╢рдиреНрд╕ рдХреЛ рд╣реЛрд╕реНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП Linux рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд╣рддрд╛ рд╣реИред Functions рдХреЛ Linux рдпрд╛ Windows рдкрд░ рд╣реЛрд╕реНрдЯ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЧрдП рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рднрд╛рд╖рд╛ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ред Python рдРрдкреНрд╕ рдХреЗрд╡рд▓ Linux рдкрд░ рд╕рдорд░реНрдерд┐рдд рд╣реИрдВред

### рдХрд╛рд░реНрдп - рдЕрдкрдиреЗ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдЕрдкрд▓реЛрдб рдХрд░реЗрдВ

рдЬрдм рдЖрдкрдиреЗ рдЕрдкрдиреЗ Functions App рдХреЛ рд╡рд┐рдХрд╕рд┐рдд рдХрд┐рдпрд╛, рддреЛ рдЖрдкрдиреЗ IoT Hub рдХреЗ рд▓рд┐рдП рдХрдиреЗрдХреНрд╢рди рд╕реНрдЯреНрд░рд┐рдВрдЧреНрд╕ рдХреЗ рд▓рд┐рдП `local.settings.json` рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдХреБрдЫ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рд╕рдВрдЧреНрд░рд╣реАрдд рдХреАрдВред рдЗрдиреНрд╣реЗрдВ Azure рдореЗрдВ рдЖрдкрдХреЗ Functions App рдореЗрдВ Application Settings рдореЗрдВ рд▓рд┐рдЦрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП рддрд╛рдХрд┐ рдЖрдкрдХрд╛ рдХреЛрдб рдЗрдиреНрд╣реЗрдВ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХреЗред

> ЁЯОУ `local.settings.json` рдлрд╝рд╛рдЗрд▓ рдХреЗрд╡рд▓ рд▓реЛрдХрд▓ рд╡рд┐рдХрд╛рд╕ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХреЗ рд▓рд┐рдП рд╣реИ, рдФрд░ рдЗрдиреНрд╣реЗрдВ рд╕реНрд░реЛрдд рдХреЛрдб рдирд┐рдпрдВрддреНрд░рдг, рдЬреИрд╕реЗ GitHub, рдореЗрдВ рдЪреЗрдХ-рдЗрди рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред рдЬрдм рдХреНрд▓рд╛рдЙрдб рдореЗрдВ рдбрд┐рдкреНрд▓реЙрдп рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ Application Settings рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред Application Settings рдХреНрд▓рд╛рдЙрдб рдореЗрдВ рд╣реЛрд╕реНрдЯ рдХрд┐рдП рдЧрдП key/value рдЬреЛрдбрд╝реЗ рд╣реИрдВ рдФрд░ рдЗрдиреНрд╣реЗрдВ рдкрд░реНрдпрд╛рд╡рд░рдг рдЪрд░ рд╕реЗ рдкрдврд╝рд╛ рдЬрд╛рддрд╛ рд╣реИ, рдпрд╛ рддреЛ рдЖрдкрдХреЗ рдХреЛрдб рдореЗрдВ рдпрд╛ рд░рдирдЯрд╛рдЗрдо рджреНрд╡рд╛рд░рд╛ рдЬрдм рдЖрдкрдХрд╛ рдХреЛрдб IoT Hub рд╕реЗ рдХрдиреЗрдХреНрдЯ рд╣реЛрддрд╛ рд╣реИред

1. Functions App Application Settings рдореЗрдВ `IOT_HUB_CONNECTION_STRING` рд╕реЗрдЯрд┐рдВрдЧ рд╕реЗрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрдорд╛рдВрдб рдЪрд▓рд╛рдПрдВ:

    ```sh
    az functionapp config appsettings set --resource-group soil-moisture-sensor \
                                          --name <functions_app_name> \
                                          --settings "IOT_HUB_CONNECTION_STRING=<connection string>"
    ```

    `<functions_app_name>` рдХреЛ рдЙрд╕ рдирд╛рдо рд╕реЗ рдмрджрд▓реЗрдВ рдЬрд┐рд╕реЗ рдЖрдкрдиреЗ рдЕрдкрдиреЗ Functions App рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдерд╛ред

    `<connection string>` рдХреЛ рдЕрдкрдиреЗ `local.settings.json` рдлрд╝рд╛рдЗрд▓ рд╕реЗ `IOT_HUB_CONNECTION_STRING` рдХреЗ рдорд╛рди рд╕реЗ рдмрджрд▓реЗрдВред

1. рдКрдкрд░ рджрд┐рдП рдЧрдП рдЪрд░рдг рдХреЛ рджреЛрд╣рд░рд╛рдПрдВ, рд▓реЗрдХрд┐рди `REGISTRY_MANAGER_CONNECTION_STRING` рдХреЗ рдорд╛рди рдХреЛ `local.settings.json` рдлрд╝рд╛рдЗрд▓ рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рдорд╛рди рд╕реЗ рд╕реЗрдЯ рдХрд░реЗрдВред

рдЬрдм рдЖрдк рдпреЗ рдХрдорд╛рдВрдб рдЪрд▓рд╛рддреЗ рд╣реИрдВ, рддреЛ рд╡реЗ Functions App рдХреЗ рд▓рд┐рдП рд╕рднреА Application Settings рдХреА рд╕реВрдЪреА рднреА рдЖрдЙрдЯрдкреБрдЯ рдХрд░реЗрдВрдЧреЗред рдЖрдк рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдпрд╣ рдЬрд╛рдВрдЪрдиреЗ рдХреЗ рд▓рд┐рдП рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рдЖрдкрдХреЗ рдорд╛рди рд╕рд╣реА рддрд░реАрдХреЗ рд╕реЗ рд╕реЗрдЯ рдХрд┐рдП рдЧрдП рд╣реИрдВред

> ЁЯТБ рдЖрдк рджреЗрдЦреЗрдВрдЧреЗ рдХрд┐ `AzureWebJobsStorage` рдХреЗ рд▓рд┐рдП рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдПрдХ рдорд╛рди рд╕реЗрдЯ рд╣реИред рдЖрдкрдХреЗ `local.settings.json` рдлрд╝рд╛рдЗрд▓ рдореЗрдВ, рдЗрд╕реЗ рд▓реЛрдХрд▓ рд╕реНрдЯреЛрд░реЗрдЬ рдЗрдореНрдпреВрд▓реЗрдЯрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕реЗрдЯ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред рдЬрдм рдЖрдкрдиреЗ Functions App рдмрдирд╛рдпрд╛, рддреЛ рдЖрдкрдиреЗ рд╕реНрдЯреЛрд░реЗрдЬ рдЕрдХрд╛рдЙрдВрдЯ рдХреЛ рдПрдХ рдкреИрд░рд╛рдореАрдЯрд░ рдХреЗ рд░реВрдк рдореЗрдВ рдкрд╛рд╕ рдХрд┐рдпрд╛, рдФрд░ рдпрд╣ рдЗрд╕ рд╕реЗрдЯрд┐рдВрдЧ рдореЗрдВ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рд╕реЗрдЯ рд╣реЛ рдЧрдпрд╛ред

### рдХрд╛рд░реНрдп - рдЕрдкрдиреЗ Functions App рдХреЛ рдХреНрд▓рд╛рдЙрдб рдореЗрдВ рдбрд┐рдкреНрд▓реЙрдп рдХрд░реЗрдВ

рдЕрдм рдЬрдм Functions App рддреИрдпрд╛рд░ рд╣реИ, рддреЛ рдЖрдкрдХрд╛ рдХреЛрдб рдбрд┐рдкреНрд▓реЙрдп рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред

1. рдЕрдкрдиреЗ Functions App рдХреЛ рдкреНрд░рдХрд╛рд╢рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП VS Code рдЯрд░реНрдорд┐рдирд▓ рд╕реЗ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрдорд╛рдВрдб рдЪрд▓рд╛рдПрдВ:

    ```sh
    func azure functionapp publish <functions_app_name>
    ```

    `<functions_app_name>` рдХреЛ рдЙрд╕ рдирд╛рдо рд╕реЗ рдмрджрд▓реЗрдВ рдЬрд┐рд╕реЗ рдЖрдкрдиреЗ рдЕрдкрдиреЗ Functions App рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдерд╛ред

рдХреЛрдб рдХреЛ рдкреИрдХ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ рдФрд░ Functions App рдХреЛ рднреЗрдЬрд╛ рдЬрд╛рдПрдЧрд╛, рдЬрд╣рд╛рдВ рдЗрд╕реЗ рдбрд┐рдкреНрд▓реЙрдп рдФрд░ рд╢реБрд░реВ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред рдмрд╣реБрдд рд╕рд╛рд░реЗ рдХрдВрд╕реЛрд▓ рдЖрдЙрдЯрдкреБрдЯ рд╣реЛрдВрдЧреЗ, рдЬреЛ рдбрд┐рдкреНрд▓реЙрдпрдореЗрдВрдЯ рдХреА рдкреБрд╖реНрдЯрд┐ рдФрд░ рдбрд┐рдкреНрд▓реЙрдп рдХрд┐рдП рдЧрдП рдлрдВрдХреНрд╢рдиреНрд╕ рдХреА рд╕реВрдЪреА рдХреЗ рд╕рд╛рде рд╕рдорд╛рдкреНрдд рд╣реЛрдВрдЧреЗред рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ рд╕реВрдЪреА рдореЗрдВ рдХреЗрд╡рд▓ рдЯреНрд░рд┐рдЧрд░ рд╢рд╛рдорд┐рд▓ рд╣реЛрдЧрд╛ред

```output
Deployment successful.
Remote build succeeded!
Syncing triggers...
Functions in soil-moisture-sensor:
    iot-hub-trigger - [eventHubTrigger]
```

рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ рдЖрдкрдХрд╛ IoT рдбрд┐рд╡рд╛рдЗрд╕ рдЪрд▓ рд░рд╣рд╛ рд╣реИред рдорд┐рдЯреНрдЯреА рдХреА рдирдореА рдХреЛ рд╕рдорд╛рдпреЛрдЬрд┐рдд рдХрд░рдХреЗ рдирдореА рд╕реНрддрд░ рдмрджрд▓реЗрдВ, рдпрд╛ рд╕реЗрдВрд╕рд░ рдХреЛ рдорд┐рдЯреНрдЯреА рдХреЗ рдЕрдВрджрд░ рдФрд░ рдмрд╛рд╣рд░ рд▓реЗ рдЬрд╛рдПрдВред рдЖрдк рджреЗрдЦреЗрдВрдЧреЗ рдХрд┐ рдорд┐рдЯреНрдЯреА рдХреА рдирдореА рдмрджрд▓рддреЗ рд╣реА рд░рд┐рд▓реЗ рдЪрд╛рд▓реВ рдФрд░ рдмрдВрдж рд╣реЛ рд░рд╣рд╛ рд╣реИред

---

## ЁЯЪА рдЪреБрдиреМрддреА

рдкрд┐рдЫрд▓реЗ рдкрд╛рда рдореЗрдВ, рдЖрдкрдиреЗ рд░рд┐рд▓реЗ рдХреЗ рд▓рд┐рдП рдЯрд╛рдЗрдорд┐рдВрдЧ рдХреЛ рдкреНрд░рдмрдВрдзрд┐рдд рдХрд┐рдпрд╛ рдерд╛, рдЬрдм рд░рд┐рд▓реЗ рдЪрд╛рд▓реВ рдерд╛ рдФрд░ рдереЛрдбрд╝реА рджреЗрд░ рдмрд╛рдж рдмрдВрдж рд╣реЛ рдЧрдпрд╛ рдерд╛, рддреЛ MQTT рд╕рдВрджреЗрд╢реЛрдВ рд╕реЗ рдЕрдирд╕рдмреНрд╕рдХреНрд░рд╛рдЗрдм рдХрд░рдХреЗред рдЖрдк рдпрд╣рд╛рдВ рдЗрд╕ рд╡рд┐рдзрд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗ - рдЖрдк рдЕрдкрдиреЗ IoT Hub рдЯреНрд░рд┐рдЧрд░ рдХреЛ рдЕрдирд╕рдмреНрд╕рдХреНрд░рд╛рдЗрдм рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗред

рд╕реЛрдЪреЗрдВ рдХрд┐ рдЖрдк рдЕрдкрдиреЗ Functions App рдореЗрдВ рдЗрд╕реЗ рд╕рдВрднрд╛рд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрд▓рдЧ-рдЕрд▓рдЧ рддрд░реАрдХреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХреИрд╕реЗ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

## рдкреЛрд╕реНрдЯ-рд▓реЗрдХреНрдЪрд░ рдХреНрд╡рд┐рдЬрд╝

[рдкреЛрд╕реНрдЯ-рд▓реЗрдХреНрдЪрд░ рдХреНрд╡рд┐рдЬрд╝](https://black-meadow-040d15503.1.azurestaticapps.net/quiz/18)

## рд╕рдореАрдХреНрд╖рд╛ рдФрд░ рд╕реНрд╡-рдЕрдзреНрдпрдпрди

* [Serverless Computing page on Wikipedia](https://wikipedia.org/wiki/Serverless_computing) рдкрд░ рд╕рд░реНрд╡рд░рд▓реЗрд╕ рдХрдВрдкреНрдпреВрдЯрд┐рдВрдЧ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдкрдврд╝реЗрдВред
* Azure рдореЗрдВ рд╕рд░реНрд╡рд░рд▓реЗрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдФрд░ рдЕрдзрд┐рдХ рдЙрджрд╛рд╣рд░рдгреЛрдВ рд╕рд╣рд┐рдд [Go serverless for your IoT needs Azure blog post](https://azure.microsoft.com/blog/go-serverless-for-your-iot-needs/?WT.mc_id=academic-17441-jabenn) рдкрд░ рдкрдврд╝реЗрдВред
* [Azure Functions YouTube channel](https://www.youtube.com/c/AzureFunctions) рдкрд░ Azure Functions рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЕрдзрд┐рдХ рдЬрд╛рдиреЗрдВред

## рдЕрд╕рд╛рдЗрдирдореЗрдВрдЯ

[рдореИрдиреБрдЕрд▓ рд░рд┐рд▓реЗ рдирд┐рдпрдВрддреНрд░рдг рдЬреЛрдбрд╝реЗрдВ](assignment.md)

**рдЕрд╕реНрд╡реАрдХрд░рдг**:  
рдпрд╣ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ AI рдЕрдиреБрд╡рд╛рдж рд╕реЗрд╡рд╛ [Co-op Translator](https://github.com/Azure/co-op-translator) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЕрдиреБрд╡рд╛рджрд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред рдЬрдмрдХрд┐ рд╣рдо рд╕рдЯреАрдХрддрд╛ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░рддреЗ рд╣реИрдВ, рдХреГрдкрдпрд╛ рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдЕрдиреБрд╡рд╛рдж рдореЗрдВ рддреНрд░реБрдЯрд┐рдпрд╛рдВ рдпрд╛ рдЕрд╢реБрджреНрдзрд┐рдпрд╛рдВ рд╣реЛ рд╕рдХрддреА рд╣реИрдВред рдореВрд▓ рднрд╛рд╖рд╛ рдореЗрдВ рдЙрдкрд▓рдмреНрдз рдореВрд▓ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдХреЛ рдкреНрд░рд╛рдорд╛рдгрд┐рдХ рд╕реНрд░реЛрдд рдорд╛рдирд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред рдорд╣рддреНрд╡рдкреВрд░реНрдг рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рд▓рд┐рдП, рдкреЗрд╢реЗрд╡рд░ рдорд╛рдирд╡ рдЕрдиреБрд╡рд╛рдж рдХреА рд╕рд┐рдлрд╛рд░рд┐рд╢ рдХреА рдЬрд╛рддреА рд╣реИред рдЗрд╕ рдЕрдиреБрд╡рд╛рдж рдХреЗ рдЙрдкрдпреЛрдЧ рд╕реЗ рдЙрддреНрдкрдиреНрди рдХрд┐рд╕реА рднреА рдЧрд▓рддрдлрд╣рдореА рдпрд╛ рдЧрд▓рдд рд╡реНрдпрд╛рдЦреНрдпрд╛ рдХреЗ рд▓рд┐рдП рд╣рдо рдЙрддреНрддрд░рджрд╛рдпреА рдирд╣реАрдВ рд╣реИрдВред