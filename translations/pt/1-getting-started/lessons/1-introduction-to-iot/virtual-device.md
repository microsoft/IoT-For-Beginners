<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "52b4de6144b2efdced7797a5339d6035",
  "translation_date": "2025-08-25T22:13:21+00:00",
  "source_file": "1-getting-started/lessons/1-introduction-to-iot/virtual-device.md",
  "language_code": "pt"
}
-->
# Computador de placa √∫nica virtual

Em vez de comprar um dispositivo IoT, juntamente com sensores e atuadores, pode usar o seu computador para simular hardware IoT. O [projeto CounterFit](https://github.com/CounterFit-IoT/CounterFit) permite executar uma aplica√ß√£o localmente que simula hardware IoT, como sensores e atuadores, e aceder a esses sensores e atuadores a partir de c√≥digo Python local, escrito da mesma forma que escreveria num Raspberry Pi utilizando hardware f√≠sico.

## Configura√ß√£o

Para usar o CounterFit, precisar√° de instalar algum software gratuito no seu computador.

### Tarefa

Instale o software necess√°rio.

1. Instale o Python. Consulte a [p√°gina de downloads do Python](https://www.python.org/downloads/) para obter instru√ß√µes sobre como instalar a vers√£o mais recente do Python.

1. Instale o Visual Studio Code (VS Code). Este ser√° o editor que usar√° para escrever o c√≥digo do seu dispositivo virtual em Python. Consulte a [documenta√ß√£o do VS Code](https://code.visualstudio.com?WT.mc_id=academic-17441-jabenn) para obter instru√ß√µes sobre como instalar o VS Code.

    > üíÅ Est√° livre para usar qualquer IDE ou editor de Python para estas li√ß√µes, caso tenha uma ferramenta preferida, mas as instru√ß√µes das li√ß√µes ser√£o baseadas no uso do VS Code.

1. Instale a extens√£o Pylance para o VS Code. Esta √© uma extens√£o para o VS Code que fornece suporte √† linguagem Python. Consulte a [documenta√ß√£o da extens√£o Pylance](https://marketplace.visualstudio.com/items?WT.mc_id=academic-17441-jabenn&itemName=ms-python.vscode-pylance) para obter instru√ß√µes sobre como instalar esta extens√£o no VS Code.

As instru√ß√µes para instalar e configurar a aplica√ß√£o CounterFit ser√£o fornecidas no momento relevante nas instru√ß√µes do exerc√≠cio, pois a instala√ß√£o √© feita por projeto.

## Hello World

√â tradicional, ao come√ßar com uma nova linguagem de programa√ß√£o ou tecnologia, criar uma aplica√ß√£o 'Hello World' - uma pequena aplica√ß√£o que exibe algo como o texto `"Hello World"` para mostrar que todas as ferramentas est√£o configuradas corretamente.

A aplica√ß√£o Hello World para o hardware IoT virtual garantir√° que tem o Python e o Visual Studio Code instalados corretamente. Tamb√©m se conectar√° ao CounterFit para os sensores e atuadores IoT virtuais. N√£o usar√° nenhum hardware, apenas se conectar√° para provar que tudo est√° a funcionar.

Esta aplica√ß√£o estar√° numa pasta chamada `nightlight`, e ser√° reutilizada com c√≥digo diferente em partes posteriores deste exerc√≠cio para construir a aplica√ß√£o de luz noturna.

### Configurar um ambiente virtual Python

Uma das funcionalidades poderosas do Python √© a capacidade de instalar [pacotes Pip](https://pypi.org) - pacotes de c√≥digo escritos por outras pessoas e publicados na Internet. Pode instalar um pacote Pip no seu computador com um √∫nico comando e, em seguida, usar esse pacote no seu c√≥digo. Usar√° o Pip para instalar um pacote que permite comunicar com o CounterFit.

Por padr√£o, quando instala um pacote, ele fica dispon√≠vel em todo o computador, o que pode levar a problemas com vers√µes de pacotes - como uma aplica√ß√£o depender de uma vers√£o de um pacote que deixa de funcionar quando instala uma nova vers√£o para outra aplica√ß√£o. Para contornar este problema, pode usar um [ambiente virtual Python](https://docs.python.org/3/library/venv.html), essencialmente uma c√≥pia do Python numa pasta dedicada, e quando instala pacotes Pip, eles s√£o instalados apenas nessa pasta.

> üíÅ Se estiver a usar um Raspberry Pi, n√£o configurou um ambiente virtual nesse dispositivo para gerir pacotes Pip, em vez disso, est√° a usar pacotes globais, pois os pacotes Grove s√£o instalados globalmente pelo script de instala√ß√£o.

#### Tarefa - configurar um ambiente virtual Python

Configure um ambiente virtual Python e instale os pacotes Pip para o CounterFit.

1. No seu terminal ou linha de comandos, execute o seguinte num local √† sua escolha para criar e navegar para um novo diret√≥rio:

    ```sh
    mkdir nightlight
    cd nightlight
    ```

1. Agora execute o seguinte para criar um ambiente virtual na pasta `.venv`:

    ```sh
    python3 -m venv .venv
    ```

    > üíÅ Precisa de chamar explicitamente `python3` para criar o ambiente virtual, caso tenha o Python 2 instalado al√©m do Python 3 (a vers√£o mais recente). Se tiver o Python 2 instalado, chamar `python` usar√° o Python 2 em vez do Python 3.

1. Ative o ambiente virtual:

    * No Windows:
        * Se estiver a usar o Command Prompt ou o Command Prompt atrav√©s do Windows Terminal, execute:

            ```cmd
            .venv\Scripts\activate.bat
            ```

        * Se estiver a usar o PowerShell, execute:

            ```powershell
            .\.venv\Scripts\Activate.ps1
            ```

            > Se receber um erro sobre a execu√ß√£o de scripts estar desativada neste sistema, precisar√° de ativar a execu√ß√£o de scripts definindo uma pol√≠tica de execu√ß√£o apropriada. Pode fazer isso ao iniciar o PowerShell como administrador e, em seguida, executar o seguinte comando:

            ```powershell
            Set-ExecutionPolicy -ExecutionPolicy Unrestricted
            ```

            Insira `Y` quando solicitado a confirmar. Depois, reinicie o PowerShell e tente novamente.

            Pode redefinir esta pol√≠tica de execu√ß√£o mais tarde, se necess√°rio. Pode ler mais sobre isso na [p√°gina de Pol√≠ticas de Execu√ß√£o na documenta√ß√£o da Microsoft](https://docs.microsoft.com/powershell/module/microsoft.powershell.core/about/about_execution_policies?WT.mc_id=academic-17441-jabenn).

    * No macOS ou Linux, execute:

        ```cmd
        source ./.venv/bin/activate
        ```

    > üíÅ Estes comandos devem ser executados a partir do mesmo local onde executou o comando para criar o ambiente virtual. Nunca precisar√° de navegar para dentro da pasta `.venv`, deve sempre executar o comando de ativa√ß√£o e quaisquer comandos para instalar pacotes ou executar c√≥digo a partir da pasta onde estava quando criou o ambiente virtual.

1. Uma vez ativado o ambiente virtual, o comando padr√£o `python` executar√° a vers√£o do Python usada para criar o ambiente virtual. Execute o seguinte para obter a vers√£o:

    ```sh
    python --version
    ```

    O resultado deve conter o seguinte:

    ```output
    (.venv) ‚ûú  nightlight python --version
    Python 3.9.1
    ```

    > üíÅ A sua vers√£o do Python pode ser diferente - desde que seja a vers√£o 3.6 ou superior, est√° tudo bem. Caso contr√°rio, elimine esta pasta, instale uma vers√£o mais recente do Python e tente novamente.

1. Execute os seguintes comandos para instalar os pacotes Pip para o CounterFit. Estes pacotes incluem a aplica√ß√£o principal do CounterFit, bem como shims para hardware Grove. Estes shims permitem escrever c√≥digo como se estivesse a programar com sensores e atuadores f√≠sicos do ecossistema Grove, mas conectados a dispositivos IoT virtuais.

    ```sh
    pip install CounterFit
    pip install counterfit-connection
    pip install counterfit-shims-grove
    ```

    Estes pacotes Pip ser√£o instalados apenas no ambiente virtual e n√£o estar√£o dispon√≠veis fora dele.

### Escrever o c√≥digo

Depois de o ambiente virtual Python estar pronto, pode escrever o c√≥digo para a aplica√ß√£o 'Hello World'.

#### Tarefa - escrever o c√≥digo

Crie uma aplica√ß√£o Python para imprimir `"Hello World"` no terminal.

1. No seu terminal ou linha de comandos, execute o seguinte dentro do ambiente virtual para criar um ficheiro Python chamado `app.py`:

    * No Windows, execute:

        ```cmd
        type nul > app.py
        ```

    * No macOS ou Linux, execute:

        ```cmd
        touch app.py
        ```

1. Abra a pasta atual no VS Code:

    ```sh
    code .
    ```

    > üíÅ Se o seu terminal retornar `command not found` no macOS, significa que o VS Code n√£o foi adicionado ao seu PATH. Pode adicionar o VS Code ao PATH seguindo as instru√ß√µes na [sec√ß√£o de Lan√ßamento a partir da linha de comandos na documenta√ß√£o do VS Code](https://code.visualstudio.com/docs/setup/mac?WT.mc_id=academic-17441-jabenn#_launching-from-the-command-line) e executar o comando novamente. O VS Code √© adicionado ao PATH por padr√£o no Windows e Linux.

1. Quando o VS Code for iniciado, ativar√° o ambiente virtual Python. O ambiente virtual selecionado aparecer√° na barra de estado inferior:

    ![VS Code mostrando o ambiente virtual selecionado](../../../../../translated_images/vscode-virtual-env.8ba42e04c3d533cf677e16cbe5ed9a3b80f62c6964472dc84b6f940800f0909f.pt.png)

1. Se o Terminal do VS Code j√° estiver em execu√ß√£o quando o VS Code for iniciado, ele n√£o ter√° o ambiente virtual ativado. A forma mais f√°cil de resolver isso √© encerrar o terminal usando o bot√£o **Kill the active terminal instance**:

    ![Bot√£o Kill the active terminal instance no VS Code](../../../../../translated_images/vscode-kill-terminal.1cc4de7c6f25ee08f423f0ead714e61d069fac1eb2089e97b8a7bbcb3d45fe5e.pt.png)

    Pode verificar se o terminal tem o ambiente virtual ativado, pois o nome do ambiente virtual ser√° um prefixo no prompt do terminal. Por exemplo, pode ser:

    ```sh
    (.venv) ‚ûú  nightlight
    ```

    Se n√£o tiver `.venv` como prefixo no prompt, o ambiente virtual n√£o est√° ativo no terminal.

1. Inicie um novo Terminal do VS Code selecionando *Terminal -> New Terminal*, ou pressionando `` CTRL+` ``. O novo terminal carregar√° o ambiente virtual, e a chamada para ativ√°-lo aparecer√° no terminal. O prompt tamb√©m ter√° o nome do ambiente virtual (`.venv`):

    ```output
    ‚ûú  nightlight source .venv/bin/activate
    (.venv) ‚ûú  nightlight 
    ```

1. Abra o ficheiro `app.py` no explorador do VS Code e adicione o seguinte c√≥digo:

    ```python
    print('Hello World!')
    ```

    A fun√ß√£o `print` imprime no terminal o que for passado para ela.

1. No terminal do VS Code, execute o seguinte para executar a sua aplica√ß√£o Python:

    ```sh
    python app.py
    ```

    O seguinte ser√° exibido no terminal:

    ```output
    (.venv) ‚ûú  nightlight python app.py 
    Hello World!
    ```

üòÄ O seu programa 'Hello World' foi um sucesso!

### Conectar o 'hardware'

Como um segundo passo do 'Hello World', ir√° executar a aplica√ß√£o CounterFit e conectar o seu c√≥digo a ela. Este √© o equivalente virtual a ligar algum hardware IoT a um kit de desenvolvimento.

#### Tarefa - conectar o 'hardware'

1. No terminal do VS Code, inicie a aplica√ß√£o CounterFit com o seguinte comando:

    ```sh
    counterfit
    ```

    A aplica√ß√£o come√ßar√° a ser executada e abrir√° no seu navegador:

    ![A aplica√ß√£o CounterFit a ser executada num navegador](../../../../../translated_images/counterfit-first-run.433326358b669b31d0e99c3513cb01bfbb13724d162c99cdcc8f51ecf5f9c779.pt.png)

    Ser√° marcada como *Disconnected*, com o LED no canto superior direito desligado.

1. Adicione o seguinte c√≥digo ao in√≠cio do ficheiro `app.py`:

    ```python
    from counterfit_connection import CounterFitConnection
    CounterFitConnection.init('127.0.0.1', 5000)
    ```

    Este c√≥digo importa a classe `CounterFitConnection` do m√≥dulo `counterfit_connection`, que vem do pacote Pip `counterfit-connection` que instalou anteriormente. Em seguida, inicializa uma conex√£o com a aplica√ß√£o CounterFit em execu√ß√£o no `127.0.0.1`, que √© um endere√ßo IP que pode sempre usar para aceder ao seu computador local (frequentemente referido como *localhost*), na porta 5000.

    > üíÅ Se tiver outras aplica√ß√µes a usar a porta 5000, pode alterar isso atualizando a porta no c√≥digo e executando o CounterFit usando `CounterFit --port <port_number>`, substituindo `<port_number>` pela porta que deseja usar.

1. Precisar√° de iniciar um novo terminal no VS Code selecionando o bot√£o **Create a new integrated terminal**. Isto porque a aplica√ß√£o CounterFit est√° a ser executada no terminal atual.

    ![Bot√£o Create a new integrated terminal no VS Code](../../../../../translated_images/vscode-new-terminal.77db8fc0f9cd31824b0e49a201beafe4ae4616d6c7339992cb2819e789b3eff9.pt.png)

1. Neste novo terminal, execute o ficheiro `app.py` como antes. O estado do CounterFit mudar√° para **Connected** e o LED acender√°.

    ![CounterFit mostrando como conectado](../../../../../translated_images/counterfit-connected.ed30b46d8f79b0921f3fc70be10366e596a89dca3f80c2224a9d9fc98fccf884.pt.png)

> üíÅ Pode encontrar este c√≥digo na pasta [code/virtual-device](../../../../../1-getting-started/lessons/1-introduction-to-iot/code/virtual-device).

üòÄ A sua conex√£o com o hardware foi um sucesso!

**Aviso Legal**:  
Este documento foi traduzido utilizando o servi√ßo de tradu√ß√£o por IA [Co-op Translator](https://github.com/Azure/co-op-translator). Embora nos esforcemos pela precis√£o, esteja ciente de que tradu√ß√µes autom√°ticas podem conter erros ou imprecis√µes. O documento original na sua l√≠ngua nativa deve ser considerado a fonte autorit√°ria. Para informa√ß√µes cr√≠ticas, recomenda-se a tradu√ß√£o profissional realizada por humanos. N√£o nos responsabilizamos por quaisquer mal-entendidos ou interpreta√ß√µes incorretas decorrentes do uso desta tradu√ß√£o.