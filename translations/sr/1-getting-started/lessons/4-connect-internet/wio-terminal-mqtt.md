<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "d6faf0e8d3c2d6d20c0aef2a305dab18",
  "translation_date": "2025-08-28T13:49:57+00:00",
  "source_file": "1-getting-started/lessons/4-connect-internet/wio-terminal-mqtt.md",
  "language_code": "sr"
}
-->
# –ö–æ–Ω—Ç—Ä–æ–ª–∏—à–∏—Ç–µ —Å–≤–æ—ò–µ –Ω–æ—õ–Ω–æ —Å–≤–µ—Ç–ª–æ –ø—Ä–µ–∫–æ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ - Wio Terminal

IoT —É—Ä–µ—í–∞—ò —Ç—Ä–µ–±–∞ –¥–∞ –±—É–¥–µ –ø—Ä–æ–≥—Ä–∞–º–∏—Ä–∞–Ω –¥–∞ –∫–æ–º—É–Ω–∏—Ü–∏—Ä–∞ —Å–∞ *test.mosquitto.org* –∫–æ—Ä–∏—Å—Ç–µ—õ–∏ MQTT –∑–∞ —Å–ª–∞—ö–µ —Ç–µ–ª–µ–º–µ—Ç—Ä–∏—ò—Å–∫–∏—Ö –≤—Ä–µ–¥–Ω–æ—Å—Ç–∏ —Å–∞ –æ—á–∏—Ç–∞–≤–∞—ö–µ–º —Å–µ–Ω–∑–æ—Ä–∞ —Å–≤–µ—Ç–ª–æ—Å—Ç–∏ –∏ –ø—Ä–∏–º–∞—ö–µ –∫–æ–º–∞–Ω–¥–∏ –∑–∞ –∫–æ–Ω—Ç—Ä–æ–ª—É LED –¥–∏–æ–¥–µ.

–£ –æ–≤–æ–º –¥–µ–ª—É –ª–µ–∫—Ü–∏—ò–µ, –ø–æ–≤–µ–∑–∞—õ–µ—Ç–µ —Å–≤–æ—ò Wio Terminal —Å–∞ MQTT –±—Ä–æ–∫–µ—Ä–æ–º.

## –ò–Ω—Å—Ç–∞–ª–∏—Ä–∞—ò—Ç–µ WiFi –∏ MQTT Arduino –±–∏–±–ª–∏–æ—Ç–µ–∫–µ

–î–∞ –±–∏—Å—Ç–µ –∫–æ–º—É–Ω–∏—Ü–∏—Ä–∞–ª–∏ —Å–∞ MQTT –±—Ä–æ–∫–µ—Ä–æ–º, –ø–æ—Ç—Ä–µ–±–Ω–æ —ò–µ –¥–∞ –∏–Ω—Å—Ç–∞–ª–∏—Ä–∞—Ç–µ –Ω–µ–∫–µ Arduino –±–∏–±–ª–∏–æ—Ç–µ–∫–µ –∫–æ—ò–µ –æ–º–æ–≥—É—õ–∞–≤–∞—ò—É –∫–æ—Ä–∏—à—õ–µ—ö–µ WiFi —á–∏–ø–∞ —É Wio Terminal-—É –∏ –∫–æ–º—É–Ω–∏–∫–∞—Ü–∏—ò—É –ø—Ä–µ–∫–æ MQTT-–∞. –ü—Ä–∏–ª–∏–∫–æ–º —Ä–∞–∑–≤–æ—ò–∞ –∑–∞ Arduino —É—Ä–µ—í–∞—ò–µ, –º–æ–∂–µ—Ç–µ –∫–æ—Ä–∏—Å—Ç–∏—Ç–∏ —à–∏—Ä–æ–∫ —Å–ø–µ–∫—Ç–∞—Ä –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∫–æ—ò–µ —Å–∞–¥—Ä–∂–µ –æ—Ç–≤–æ—Ä–µ–Ω–∏ –∫–æ–¥ –∏ –∏–º–ø–ª–µ–º–µ–Ω—Ç–∏—Ä–∞—ò—É –≤–µ–ª–∏–∫–∏ –±—Ä–æ—ò —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–Ω–æ—Å—Ç–∏. Seeed –æ–±—ò–∞–≤—ô—É—ò–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ –∑–∞ Wio Terminal –∫–æ—ò–µ –æ–º–æ–≥—É—õ–∞–≤–∞—ò—É –∫–æ–º—É–Ω–∏–∫–∞—Ü–∏—ò—É –ø—Ä–µ–∫–æ WiFi-–∞. –î—Ä—É–≥–∏ –ø—Ä–æ–≥—Ä–∞–º–µ—Ä–∏ —Å—É –æ–±—ò–∞–≤–∏–ª–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ –∑–∞ –∫–æ–º—É–Ω–∏–∫–∞—Ü–∏—ò—É —Å–∞ MQTT –±—Ä–æ–∫–µ—Ä–∏–º–∞, –∏ –∫–æ—Ä–∏—Å—Ç–∏—õ–µ—Ç–µ –∏—Ö —Å–∞ —Å–≤–æ—ò–∏–º —É—Ä–µ—í–∞—ò–µ–º.

–û–≤–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ —Å—É –¥–æ—Å—Ç—É–ø–Ω–µ –∫–∞–æ –∏–∑–≤–æ—Ä–Ω–∏ –∫–æ–¥ –∫–æ—ò–∏ —Å–µ –º–æ–∂–µ –∞—É—Ç–æ–º–∞—Ç—Å–∫–∏ —É–≤–æ–∑–∏—Ç–∏ —É PlatformIO –∏ –∫–æ–º–ø–∞—ò–ª–∏—Ä–∞—Ç–∏ –∑–∞ –≤–∞—à —É—Ä–µ—í–∞—ò. –ù–∞ –æ–≤–∞—ò –Ω–∞—á–∏–Ω Arduino –±–∏–±–ª–∏–æ—Ç–µ–∫–µ —õ–µ —Ä–∞–¥–∏—Ç–∏ –Ω–∞ –±–∏–ª–æ –∫–æ–º —É—Ä–µ—í–∞—ò—É –∫–æ—ò–∏ –ø–æ–¥—Ä–∂–∞–≤–∞ Arduino –æ–∫–≤–∏—Ä, –ø–æ–¥ —É—Å–ª–æ–≤–æ–º –¥–∞ —É—Ä–µ—í–∞—ò –∏–º–∞ —Å–ø–µ—Ü–∏—Ñ–∏—á–∞–Ω —Ö–∞—Ä–¥–≤–µ—Ä –∫–æ—ò–∏ —ò–µ –ø–æ—Ç—Ä–µ–±–∞–Ω –∑–∞ —Ç—É –±–∏–±–ª–∏–æ—Ç–µ–∫—É. –ù–µ–∫–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ, –∫–∞–æ —à—Ç–æ —Å—É Seeed WiFi –±–∏–±–ª–∏–æ—Ç–µ–∫–µ, —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–µ —Å—É –∑–∞ –æ–¥—Ä–µ—í–µ–Ω–∏ —Ö–∞—Ä–¥–≤–µ—Ä.

–ë–∏–±–ª–∏–æ—Ç–µ–∫–µ —Å–µ –º–æ–≥—É –∏–Ω—Å—Ç–∞–ª–∏—Ä–∞—Ç–∏ –≥–ª–æ–±–∞–ª–Ω–æ –∏ –∫–æ–º–ø–∞—ò–ª–∏—Ä–∞—Ç–∏ –∞–∫–æ —ò–µ –ø–æ—Ç—Ä–µ–±–Ω–æ, –∏–ª–∏ —É –æ–¥—Ä–µ—í–µ–Ω–∏ –ø—Ä–æ—ò–µ–∫–∞—Ç. –ó–∞ –æ–≤–∞—ò –∑–∞–¥–∞—Ç–∞–∫, –±–∏–±–ª–∏–æ—Ç–µ–∫–µ —õ–µ –±–∏—Ç–∏ –∏–Ω—Å—Ç–∞–ª–∏—Ä–∞–Ω–µ —É –ø—Ä–æ—ò–µ–∫–∞—Ç.

‚úÖ –ú–æ–∂–µ—Ç–µ —Å–∞–∑–Ω–∞—Ç–∏ –≤–∏—à–µ –æ —É–ø—Ä–∞–≤—ô–∞—ö—É –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º–∞ –∏ –∫–∞–∫–æ –¥–∞ –ø—Ä–æ–Ω–∞—í–µ—Ç–µ –∏ –∏–Ω—Å—Ç–∞–ª–∏—Ä–∞—Ç–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ —É [PlatformIO –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—ò–∏ –æ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º–∞](https://docs.platformio.org/en/latest/librarymanager/index.html).

### –ó–∞–¥–∞—Ç–∞–∫ - –∏–Ω—Å—Ç–∞–ª–∏—Ä–∞—ò—Ç–µ WiFi –∏ MQTT Arduino –±–∏–±–ª–∏–æ—Ç–µ–∫–µ

–ò–Ω—Å—Ç–∞–ª–∏—Ä–∞—ò—Ç–µ Arduino –±–∏–±–ª–∏–æ—Ç–µ–∫–µ.

1. –û—Ç–≤–æ—Ä–∏—Ç–µ –ø—Ä–æ—ò–µ–∫–∞—Ç –Ω–æ—õ–Ω–æ–≥ —Å–≤–µ—Ç–ª–∞ —É VS Code-—É.

1. –î–æ–¥–∞—ò—Ç–µ —Å–ª–µ–¥–µ—õ–µ –Ω–∞ –∫—Ä–∞—ò `platformio.ini` –¥–∞—Ç–æ—Ç–µ–∫–µ:

    ```ini
    lib_deps =
        seeed-studio/Seeed Arduino rpcWiFi @ 1.0.5
        seeed-studio/Seeed Arduino FS @ 2.1.1
        seeed-studio/Seeed Arduino SFUD @ 2.0.2
        seeed-studio/Seeed Arduino rpcUnified @ 2.1.3
        seeed-studio/Seeed_Arduino_mbedtls @ 3.0.1
    ```

    –û–≤–æ —É–≤–æ–∑–∏ Seeed WiFi –±–∏–±–ª–∏–æ—Ç–µ–∫–µ. –°–∏–Ω—Ç–∞–∫—Å–∞ `@ <number>` —Å–µ –æ–¥–Ω–æ—Å–∏ –Ω–∞ –æ–¥—Ä–µ—í–µ–Ω–∏ –±—Ä–æ—ò –≤–µ—Ä–∑–∏—ò–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ.

    > üíÅ –ú–æ–∂–µ—Ç–µ —É–∫–ª–æ–Ω–∏—Ç–∏ `@ <number>` –¥–∞ —É–≤–µ–∫ –∫–æ—Ä–∏—Å—Ç–∏—Ç–µ –Ω–∞—ò–Ω–æ–≤–∏—ò—É –≤–µ—Ä–∑–∏—ò—É –±–∏–±–ª–∏–æ—Ç–µ–∫–∞, –∞–ª–∏ –Ω–µ–º–∞ –≥–∞—Ä–∞–Ω—Ü–∏—ò–∞ –¥–∞ —õ–µ –Ω–æ–≤–∏—ò–µ –≤–µ—Ä–∑–∏—ò–µ —Ä–∞–¥–∏—Ç–∏ —Å–∞ –∫–æ–¥–æ–º –∏—Å–ø–æ–¥. –ö–æ–¥ –æ–≤–¥–µ —ò–µ —Ç–µ—Å—Ç–∏—Ä–∞–Ω —Å–∞ –æ–≤–æ–º –≤–µ—Ä–∑–∏—ò–æ–º –±–∏–±–ª–∏–æ—Ç–µ–∫–∞.

    –û–≤–æ —ò–µ —Å–≤–µ —à—Ç–æ —Ç—Ä–µ–±–∞ –¥–∞ —É—Ä–∞–¥–∏—Ç–µ –¥–∞ –±–∏—Å—Ç–µ –¥–æ–¥–∞–ª–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ. –°–ª–µ–¥–µ—õ–∏ –ø—É—Ç –∫–∞–¥–∞ PlatformIO –∫–æ–º–ø–∞—ò–ª–∏—Ä–∞ –ø—Ä–æ—ò–µ–∫–∞—Ç, –ø—Ä–µ—É–∑–µ—õ–µ –∏–∑–≤–æ—Ä–Ω–∏ –∫–æ–¥ –∑–∞ –æ–≤–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ –∏ –∫–æ–º–ø–∞—ò–ª–∏—Ä–∞—Ç–∏ –≥–∞ —É –≤–∞—à –ø—Ä–æ—ò–µ–∫–∞—Ç.

1. –î–æ–¥–∞—ò—Ç–µ —Å–ª–µ–¥–µ—õ–µ —É `lib_deps`:

    ```ini
    knolleary/PubSubClient @ 2.8
    ```

    –û–≤–æ —É–≤–æ–∑–∏ [PubSubClient](https://github.com/knolleary/pubsubclient), Arduino MQTT –∫–ª–∏—ò–µ–Ω—Ç.

## –ü–æ–≤–µ–∂–∏—Ç–µ —Å–µ –Ω–∞ WiFi

Wio Terminal —Å–∞–¥–∞ –º–æ–∂–µ –±–∏—Ç–∏ –ø–æ–≤–µ–∑–∞–Ω –Ω–∞ WiFi.

### –ó–∞–¥–∞—Ç–∞–∫ - –ø–æ–≤–µ–∂–∏—Ç–µ —Å–µ –Ω–∞ WiFi

–ü–æ–≤–µ–∂–∏—Ç–µ Wio Terminal –Ω–∞ WiFi.

1. –ù–∞–ø—Ä–∞–≤–∏—Ç–µ –Ω–æ–≤—É –¥–∞—Ç–æ—Ç–µ–∫—É —É `src` —Ñ–æ–ª–¥–µ—Ä—É –ø–æ–¥ –Ω–∞–∑–∏–≤–æ–º `config.h`. –ú–æ–∂–µ—Ç–µ —Ç–æ —É—Ä–∞–¥–∏—Ç–∏ —Ç–∞–∫–æ —à—Ç–æ —õ–µ—Ç–µ –∏–∑–∞–±—Ä–∞—Ç–∏ `src` —Ñ–æ–ª–¥–µ—Ä –∏–ª–∏ `main.cpp` –¥–∞—Ç–æ—Ç–µ–∫—É —É–Ω—É—Ç–∞—Ä —ö–µ–≥–∞, –∏ –∏–∑–∞–±—Ä–∞—Ç–∏ –¥—É–≥–º–µ **New file** –∏–∑ –µ–∫—Å–ø–ª–æ—Ä–µ—Ä–∞. –û–≤–æ –¥—É–≥–º–µ —Å–µ –ø–æ—ò–∞–≤—ô—É—ò–µ —Å–∞–º–æ –∫–∞–¥–∞ —ò–µ –≤–∞—à –∫—É—Ä—Å–æ—Ä –∏–∑–Ω–∞–¥ –µ–∫—Å–ø–ª–æ—Ä–µ—Ä–∞.

    ![–î—É–≥–º–µ –∑–∞ –Ω–æ–≤—É –¥–∞—Ç–æ—Ç–µ–∫—É](../../../../../translated_images/vscode-new-file-button.182702340fe6723c8cbb4cfa1a9a9fb0d0a5227643b4e46b91ff67b07a39a92f.sr.png)

1. –î–æ–¥–∞—ò—Ç–µ —Å–ª–µ–¥–µ—õ–∏ –∫–æ–¥ —É –æ–≤—É –¥–∞—Ç–æ—Ç–µ–∫—É –¥–∞ –¥–µ—Ñ–∏–Ω–∏—à–µ—Ç–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–µ –∑–∞ —Å–≤–æ—ò–µ WiFi –∞–∫—Ä–µ–¥–∏—Ç–∏–≤–µ:

    ```cpp
    #pragma once

    #include <string>
    
    using namespace std;
    
    // WiFi credentials
    const char *SSID = "<SSID>";
    const char *PASSWORD = "<PASSWORD>";
    ```

    –ó–∞–º–µ–Ω–∏—Ç–µ `<SSID>` —Å–∞ SSID-–æ–º –≤–∞—à–µ–≥ WiFi-–∞. –ó–∞–º–µ–Ω–∏—Ç–µ `<PASSWORD>` —Å–∞ –ª–æ–∑–∏–Ω–∫–æ–º –≤–∞—à–µ–≥ WiFi-–∞.

1. –û—Ç–≤–æ—Ä–∏—Ç–µ `main.cpp` –¥–∞—Ç–æ—Ç–µ–∫—É.

1. –î–æ–¥–∞—ò—Ç–µ —Å–ª–µ–¥–µ—õ–µ `#include` –¥–∏—Ä–µ–∫—Ç–∏–≤–µ –Ω–∞ –≤—Ä—Ö –¥–∞—Ç–æ—Ç–µ–∫–µ:

    ```cpp
    #include <PubSubClient.h>
    #include <rpcWiFi.h>
    #include <SPI.h>
    
    #include "config.h"
    ```

    –û–≤–æ —É–∫—ô—É—á—É—ò–µ —Ö–µ–¥–µ—Ä –¥–∞—Ç–æ—Ç–µ–∫–µ –∑–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ –∫–æ—ò–µ —Å—Ç–µ —Ä–∞–Ω–∏—ò–µ –¥–æ–¥–∞–ª–∏, –∫–∞–æ –∏ —Ö–µ–¥–µ—Ä –¥–∞—Ç–æ—Ç–µ–∫—É –∑–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—ò—É. –û–≤–µ —Ö–µ–¥–µ—Ä –¥–∞—Ç–æ—Ç–µ–∫–µ —Å—É –ø–æ—Ç—Ä–µ–±–Ω–µ –¥–∞ –±–∏ PlatformIO —É–≤–µ–æ –∫–æ–¥ –∏–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞. –ë–µ–∑ –µ–∫—Å–ø–ª–∏—Ü–∏—Ç–Ω–æ–≥ —É–∫—ô—É—á–∏–≤–∞—ö–∞ –æ–≤–∏—Ö —Ö–µ–¥–µ—Ä –¥–∞—Ç–æ—Ç–µ–∫–∞, –Ω–µ–∫–∏ –∫–æ–¥ –Ω–µ—õ–µ –±–∏—Ç–∏ –∫–æ–º–ø–∞—ò–ª–∏—Ä–∞–Ω –∏ –¥–æ–±–∏—õ–µ—Ç–µ –≥—Ä–µ—à–∫–µ –∫–æ–º–ø–∞—ò–ª–µ—Ä–∞.

1. –î–æ–¥–∞—ò—Ç–µ —Å–ª–µ–¥–µ—õ–∏ –∫–æ–¥ –∏–∑–Ω–∞–¥ `setup` —Ñ—É–Ω–∫—Ü–∏—ò–µ:

    ```cpp
    void connectWiFi()
    {
        while (WiFi.status() != WL_CONNECTED)
        {
            Serial.println("Connecting to WiFi..");
            WiFi.begin(SSID, PASSWORD);
            delay(500);
        }
    
        Serial.println("Connected!");
    }
    ```

    –û–≤–∞—ò –∫–æ–¥ –ø–µ—Ç—ô–∞ –¥–æ–∫ —É—Ä–µ—í–∞—ò –Ω–∏—ò–µ –ø–æ–≤–µ–∑–∞–Ω –Ω–∞ WiFi –∏ –ø–æ–∫—É—à–∞–≤–∞ –¥–∞ —Å–µ –ø–æ–≤–µ–∂–µ –∫–æ—Ä–∏—Å—Ç–µ—õ–∏ SSID –∏ –ª–æ–∑–∏–Ω–∫—É –∏–∑ —Ö–µ–¥–µ—Ä –¥–∞—Ç–æ—Ç–µ–∫–µ –∑–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—ò—É.

1. –î–æ–¥–∞—ò—Ç–µ –ø–æ–∑–∏–≤ –æ–≤–æ—ò —Ñ—É–Ω–∫—Ü–∏—ò–∏ –Ω–∞ –∫—Ä–∞—ò—É `setup` —Ñ—É–Ω–∫—Ü–∏—ò–µ, –Ω–∞–∫–æ–Ω —à—Ç–æ —Å—É –ø–∏–Ω–æ–≤–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Å–∞–Ω–∏.

    ```cpp
    connectWiFi();
    ```

1. –£—á–∏—Ç–∞—ò—Ç–µ –æ–≤–∞—ò –∫–æ–¥ –Ω–∞ —Å–≤–æ—ò —É—Ä–µ—í–∞—ò –¥–∞ –ø—Ä–æ–≤–µ—Ä–∏—Ç–µ –¥–∞ –ª–∏ WiFi –≤–µ–∑–∞ —Ä–∞–¥–∏. –¢—Ä–µ–±–∞–ª–æ –±–∏ –¥–∞ –≤–∏–¥–∏—Ç–µ –æ–≤–æ —É —Å–µ—Ä–∏—ò—Å–∫–æ–º –º–æ–Ω–∏—Ç–æ—Ä—É.

    ```output
    > Executing task: platformio device monitor <
    
    --- Available filters and text transformations: colorize, debug, default, direct, hexlify, log2file, nocontrol, printable, send_on_enter, time
    --- More details at http://bit.ly/pio-monitor-filters
    --- Miniterm on /dev/cu.usbmodem1101  9600,8,N,1 ---
    --- Quit: Ctrl+C | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H ---
    Connecting to WiFi..
    Connected!
    ```

## –ü–æ–≤–µ–∂–∏—Ç–µ —Å–µ –Ω–∞ MQTT

–ö–∞–¥–∞ —ò–µ Wio Terminal –ø–æ–≤–µ–∑–∞–Ω –Ω–∞ WiFi, –º–æ–∂–µ —Å–µ –ø–æ–≤–µ–∑–∞—Ç–∏ –Ω–∞ MQTT –±—Ä–æ–∫–µ—Ä.

### –ó–∞–¥–∞—Ç–∞–∫ - –ø–æ–≤–µ–∂–∏—Ç–µ —Å–µ –Ω–∞ MQTT

–ü–æ–≤–µ–∂–∏—Ç–µ —Å–µ –Ω–∞ MQTT –±—Ä–æ–∫–µ—Ä.

1. –î–æ–¥–∞—ò—Ç–µ —Å–ª–µ–¥–µ—õ–∏ –∫–æ–¥ –Ω–∞ –∫—Ä–∞—ò `config.h` –¥–∞—Ç–æ—Ç–µ–∫–µ –¥–∞ –¥–µ—Ñ–∏–Ω–∏—à–µ—Ç–µ –¥–µ—Ç–∞—ô–µ –≤–µ–∑–µ –∑–∞ MQTT –±—Ä–æ–∫–µ—Ä:

    ```cpp
    // MQTT settings
    const string ID = "<ID>";
    
    const string BROKER = "test.mosquitto.org";
    const string CLIENT_NAME = ID + "nightlight_client";
    ```

    –ó–∞–º–µ–Ω–∏—Ç–µ `<ID>` —Å–∞ —ò–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–∏–º ID-–æ–º –∫–æ—ò–∏ —õ–µ —Å–µ –∫–æ—Ä–∏—Å—Ç–∏—Ç–∏ –∫–∞–æ –∏–º–µ –æ–≤–æ–≥ –∫–ª–∏—ò–µ–Ω—Ç–∞ —É—Ä–µ—í–∞—ò–∞, –∞ –∫–∞—Å–Ω–∏—ò–µ –∏ –∑–∞ —Ç–µ–º–µ –∫–æ—ò–µ –æ–≤–∞—ò —É—Ä–µ—í–∞—ò –æ–±—ò–∞–≤—ô—É—ò–µ –∏ –Ω–∞ –∫–æ—ò–µ —Å–µ –ø—Ä–µ—Ç–ø–ª–∞—õ—É—ò–µ. *test.mosquitto.org* –±—Ä–æ–∫–µ—Ä —ò–µ —ò–∞–≤–Ω–∏ –∏ –∫–æ—Ä–∏—Å—Ç–∏ –≥–∞ –º–Ω–æ–≥–æ —ô—É–¥–∏, —É–∫—ô—É—á—É—ò—É—õ–∏ –¥—Ä—É–≥–µ —Å—Ç—É–¥–µ–Ω—Ç–µ –∫–æ—ò–∏ —Ä–∞–¥–µ –Ω–∞ –æ–≤–æ–º –∑–∞–¥–∞—Ç–∫—É. –ò–º–∞—ö–µ —ò–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–æ–≥ –∏–º–µ–Ω–∞ MQTT –∫–ª–∏—ò–µ–Ω—Ç–∞ –∏ –∏–º–µ–Ω–∞ —Ç–µ–º–∞ –æ—Å–∏–≥—É—Ä–∞–≤–∞ –¥–∞ –≤–∞—à –∫–æ–¥ –Ω–µ—õ–µ –±–∏—Ç–∏ —É —Å—É–∫–æ–±—É —Å–∞ –∫–æ–¥–æ–º –¥—Ä—É–≥–∏—Ö.

    > üíÅ –ú–æ–∂–µ—Ç–µ –∫–æ—Ä–∏—Å—Ç–∏—Ç–∏ –≤–µ–±-—Å–∞—ò—Ç –∫–∞–æ —à—Ç–æ —ò–µ [GUIDGen](https://www.guidgen.com) –¥–∞ –≥–µ–Ω–µ—Ä–∏—à–µ—Ç–µ —ò–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–∏ ID.

    `BROKER` —ò–µ URL MQTT –±—Ä–æ–∫–µ—Ä–∞.

    `CLIENT_NAME` —ò–µ —ò–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–æ –∏–º–µ –∑–∞ –æ–≤–∞—ò MQTT –∫–ª–∏—ò–µ–Ω—Ç –Ω–∞ –±—Ä–æ–∫–µ—Ä—É.

1. –û—Ç–≤–æ—Ä–∏—Ç–µ `main.cpp` –¥–∞—Ç–æ—Ç–µ–∫—É –∏ –¥–æ–¥–∞—ò—Ç–µ —Å–ª–µ–¥–µ—õ–∏ –∫–æ–¥ –∏—Å–ø–æ–¥ `connectWiFi` —Ñ—É–Ω–∫—Ü–∏—ò–µ –∏ –∏–∑–Ω–∞–¥ `setup` —Ñ—É–Ω–∫—Ü–∏—ò–µ:

    ```cpp
    WiFiClient wioClient;
    PubSubClient client(wioClient);
    ```

    –û–≤–∞—ò –∫–æ–¥ –∫—Ä–µ–∏—Ä–∞ WiFi –∫–ª–∏—ò–µ–Ω—Ç –∫–æ—Ä–∏—Å—Ç–µ—õ–∏ Wio Terminal WiFi –±–∏–±–ª–∏–æ—Ç–µ–∫–µ –∏ –∫–æ—Ä–∏—Å—Ç–∏ –≥–∞ –∑–∞ –∫—Ä–µ–∏—Ä–∞—ö–µ MQTT –∫–ª–∏—ò–µ–Ω—Ç–∞.

1. –ò—Å–ø–æ–¥ –æ–≤–æ–≥ –∫–æ–¥–∞, –¥–æ–¥–∞—ò—Ç–µ —Å–ª–µ–¥–µ—õ–µ:

    ```cpp
    void reconnectMQTTClient()
    {
        while (!client.connected())
        {
            Serial.print("Attempting MQTT connection...");
    
            if (client.connect(CLIENT_NAME.c_str()))
            {
                Serial.println("connected");
            }
            else
            {
                Serial.print("Retying in 5 seconds - failed, rc=");
                Serial.println(client.state());
                
                delay(5000);
            }
        }
    }
    ```

    –û–≤–∞ —Ñ—É–Ω–∫—Ü–∏—ò–∞ —Ç–µ—Å—Ç–∏—Ä–∞ –≤–µ–∑—É —Å–∞ MQTT –±—Ä–æ–∫–µ—Ä–æ–º –∏ –ø–æ–Ω–æ–≤–æ —Å–µ –ø–æ–≤–µ–∑—É—ò–µ –∞–∫–æ –Ω–∏—ò–µ –ø–æ–≤–µ–∑–∞–Ω. –ü–µ—Ç—ô–∞ —Å–≤–µ –≤—Ä–µ–º–µ –¥–æ–∫ –Ω–∏—ò–µ –ø–æ–≤–µ–∑–∞–Ω –∏ –ø–æ–∫—É—à–∞–≤–∞ –¥–∞ —Å–µ –ø–æ–≤–µ–∂–µ –∫–æ—Ä–∏—Å—Ç–µ—õ–∏ —ò–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–æ –∏–º–µ –∫–ª–∏—ò–µ–Ω—Ç–∞ –¥–µ—Ñ–∏–Ω–∏—Å–∞–Ω–æ —É —Ö–µ–¥–µ—Ä –¥–∞—Ç–æ—Ç–µ—Ü–∏ –∑–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—ò—É.

    –ê–∫–æ –≤–µ–∑–∞ –Ω–µ —É—Å–ø–µ, –ø–æ–Ω–æ–≤–æ –ø–æ–∫—É—à–∞–≤–∞ –Ω–∞–∫–æ–Ω 5 —Å–µ–∫—É–Ω–¥–∏.

1. –î–æ–¥–∞—ò—Ç–µ —Å–ª–µ–¥–µ—õ–∏ –∫–æ–¥ –∏—Å–ø–æ–¥ `reconnectMQTTClient` —Ñ—É–Ω–∫—Ü–∏—ò–µ:

    ```cpp
    void createMQTTClient()
    {
        client.setServer(BROKER.c_str(), 1883);
        reconnectMQTTClient();
    }
    ```

    –û–≤–∞—ò –∫–æ–¥ –ø–æ—Å—Ç–∞–≤—ô–∞ MQTT –±—Ä–æ–∫–µ—Ä –∑–∞ –∫–ª–∏—ò–µ–Ω—Ç–∞, –∫–∞–æ –∏ –ø–æ–¥–µ—à–∞–≤–∞—ö–µ callback-–∞ –∫–∞–¥–∞ —Å–µ –ø–æ—Ä—É–∫–∞ –ø—Ä–∏–º–∏. –ó–∞—Ç–∏–º –ø–æ–∫—É—à–∞–≤–∞ –¥–∞ —Å–µ –ø–æ–≤–µ–∂–µ –Ω–∞ –±—Ä–æ–∫–µ—Ä.

1. –ü–æ–∑–æ–≤–∏—Ç–µ `createMQTTClient` —Ñ—É–Ω–∫—Ü–∏—ò—É —É `setup` —Ñ—É–Ω–∫—Ü–∏—ò–∏ –Ω–∞–∫–æ–Ω —à—Ç–æ —ò–µ WiFi –ø–æ–≤–µ–∑–∞–Ω.

1. –ó–∞–º–µ–Ω–∏—Ç–µ —Ü–µ–ª—É `loop` —Ñ—É–Ω–∫—Ü–∏—ò—É —Å–ª–µ–¥–µ—õ–∏–º:

    ```cpp
    void loop()
    {
        reconnectMQTTClient();
        client.loop();
    
        delay(2000);
    }
    ```

    –û–≤–∞—ò –∫–æ–¥ –ø–æ—á–∏—ö–µ –ø–æ–Ω–æ–≤–Ω–∏–º –ø–æ–≤–µ–∑–∏–≤–∞—ö–µ–º –Ω–∞ MQTT –±—Ä–æ–∫–µ—Ä. –û–≤–µ –≤–µ–∑–µ —Å–µ –ª–∞–∫–æ –ø—Ä–µ–∫–∏–¥–∞—ò—É, –ø–∞ —ò–µ –≤—Ä–µ–¥–Ω–æ —Ä–µ–¥–æ–≤–Ω–æ –ø—Ä–æ–≤–µ—Ä–∞–≤–∞—Ç–∏ –∏ –ø–æ–Ω–æ–≤–æ —Å–µ –ø–æ–≤–µ–∑–∏–≤–∞—Ç–∏ –∞–∫–æ —ò–µ –ø–æ—Ç—Ä–µ–±–Ω–æ. –ó–∞—Ç–∏–º –ø–æ–∑–∏–≤–∞ `loop` –º–µ—Ç–æ–¥ –Ω–∞ MQTT –∫–ª–∏—ò–µ–Ω—Ç—É –¥–∞ –æ–±—Ä–∞–¥–∏ —Å–≤–µ –ø–æ—Ä—É–∫–µ –∫–æ—ò–µ —Å—Ç–∏–∂—É –Ω–∞ —Ç–µ–º—É –Ω–∞ –∫–æ—ò—É —ò–µ –ø—Ä–µ—Ç–ø–ª–∞—õ–µ–Ω. –û–≤–∞ –∞–ø–ª–∏–∫–∞—Ü–∏—ò–∞ —ò–µ —ò–µ–¥–Ω–æ–Ω–∏—à–∫–∞, –ø–∞ –ø–æ—Ä—É–∫–µ –Ω–µ –º–æ–≥—É –±–∏—Ç–∏ –ø—Ä–∏–º—ô–µ–Ω–µ —É –ø–æ–∑–∞–¥–∏–Ω—Å–∫–æ–º –Ω–∏—à—É, —Ç–µ —ò–µ –ø–æ—Ç—Ä–µ–±–Ω–æ –æ–¥–≤–æ—ò–∏—Ç–∏ –≤—Ä–µ–º–µ –Ω–∞ –≥–ª–∞–≤–Ω–æ–º –Ω–∏—à—É –∑–∞ –æ–±—Ä–∞–¥—É –ø–æ—Ä—É–∫–∞ –∫–æ—ò–µ —á–µ–∫–∞—ò—É –Ω–∞ –º—Ä–µ–∂–Ω–æ—ò –≤–µ–∑–∏.

    –ù–∞ –∫—Ä–∞—ò—É, –∫–∞—à—ö–µ—ö–µ –æ–¥ 2 —Å–µ–∫—É–Ω–¥–µ –æ—Å–∏–≥—É—Ä–∞–≤–∞ –¥–∞ —Å–µ –Ω–∏–≤–æ–∏ —Å–≤–µ—Ç–ª–æ—Å—Ç–∏ –Ω–µ —à–∞—ô—É –ø—Ä–µ—á–µ—Å—Ç–æ –∏ —Å–º–∞—ö—É—ò–µ –ø–æ—Ç—Ä–æ—à—ö—É –µ–Ω–µ—Ä–≥–∏—ò–µ —É—Ä–µ—í–∞—ò–∞.

1. –£—á–∏—Ç–∞—ò—Ç–µ –∫–æ–¥ –Ω–∞ —Å–≤–æ—ò Wio Terminal –∏ –∫–æ—Ä–∏—Å—Ç–∏—Ç–µ —Å–µ—Ä–∏—ò—Å–∫–∏ –º–æ–Ω–∏—Ç–æ—Ä –¥–∞ –≤–∏–¥–∏—Ç–µ –∫–∞–∫–æ —Å–µ —É—Ä–µ—í–∞—ò –ø–æ–≤–µ–∑—É—ò–µ –Ω–∞ WiFi –∏ MQTT.

    ```output
    > Executing task: platformio device monitor <
    
    source /Users/jimbennett/GitHub/IoT-For-Beginners/1-getting-started/lessons/4-connect-internet/code-mqtt/wio-terminal/nightlight/.venv/bin/activate
    --- Available filters and text transformations: colorize, debug, default, direct, hexlify, log2file, nocontrol, printable, send_on_enter, time
    --- More details at http://bit.ly/pio-monitor-filters
    --- Miniterm on /dev/cu.usbmodem1201  9600,8,N,1 ---
    --- Quit: Ctrl+C | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H ---
    Connecting to WiFi..
    Connected!
    Attempting MQTT connection...connected
    ```

> üíÅ –û–≤–∞—ò –∫–æ–¥ –º–æ–∂–µ—Ç–µ –ø—Ä–æ–Ω–∞—õ–∏ —É [code-mqtt/wio-terminal](../../../../../1-getting-started/lessons/4-connect-internet/code-mqtt/wio-terminal) —Ñ–æ–ª–¥–µ—Ä—É.

üòÄ –£—Å–ø–µ—à–Ω–æ —Å—Ç–µ –ø–æ–≤–µ–∑–∞–ª–∏ —Å–≤–æ—ò —É—Ä–µ—í–∞—ò –Ω–∞ MQTT –±—Ä–æ–∫–µ—Ä.

---

**–û–¥—Ä–∏—Ü–∞—ö–µ –æ–¥ –æ–¥–≥–æ–≤–æ—Ä–Ω–æ—Å—Ç–∏**:  
–û–≤–∞—ò –¥–æ–∫—É–º–µ–Ω—Ç —ò–µ –ø—Ä–µ–≤–µ–¥–µ–Ω –∫–æ—Ä–∏—à—õ–µ—ö–µ–º —É—Å–ª—É–≥–µ –∑–∞ –ø—Ä–µ–≤–æ—í–µ—ö–µ –ø–æ–º–æ—õ—É –≤–µ—à—Ç–∞—á–∫–µ –∏–Ω—Ç–µ–ª–∏–≥–µ–Ω—Ü–∏—ò–µ [Co-op Translator](https://github.com/Azure/co-op-translator). –ò–∞–∫–æ —Å–µ —Ç—Ä—É–¥–∏–º–æ –¥–∞ –æ–±–µ–∑–±–µ–¥–∏–º–æ —Ç–∞—á–Ω–æ—Å—Ç, –º–æ–ª–∏–º–æ –≤–∞—Å –¥–∞ –∏–º–∞—Ç–µ —É –≤–∏–¥—É –¥–∞ –∞—É—Ç–æ–º–∞—Ç—Å–∫–∏ –ø—Ä–µ–≤–æ–¥–∏ –º–æ–≥—É —Å–∞–¥—Ä–∂–∞—Ç–∏ –≥—Ä–µ—à–∫–µ –∏–ª–∏ –Ω–µ—Ç–∞—á–Ω–æ—Å—Ç–∏. –û—Ä–∏–≥–∏–Ω–∞–ª–Ω–∏ –¥–æ–∫—É–º–µ–Ω—Ç –Ω–∞ —ö–µ–≥–æ–≤–æ–º –∏–∑–≤–æ—Ä–Ω–æ–º —ò–µ–∑–∏–∫—É —Ç—Ä–µ–±–∞ —Å–º–∞—Ç—Ä–∞—Ç–∏ –º–µ—Ä–æ–¥–∞–≤–Ω–∏–º –∏–∑–≤–æ—Ä–æ–º. –ó–∞ –∫—Ä–∏—Ç–∏—á–Ω–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—ò–µ –ø—Ä–µ–ø–æ—Ä—É—á—É—ò–µ —Å–µ –ø—Ä–æ—Ñ–µ—Å–∏–æ–Ω–∞–ª–Ω–∏ –ø—Ä–µ–≤–æ–¥ –æ–¥ —Å—Ç—Ä–∞–Ω–µ —ô—É–¥–∏. –ù–µ –ø—Ä–µ—É–∑–∏–º–∞–º–æ –æ–¥–≥–æ–≤–æ—Ä–Ω–æ—Å—Ç –∑–∞ –±–∏–ª–æ –∫–∞–∫–≤–∞ –ø–æ–≥—Ä–µ—à–Ω–∞ —Ç—É–º–∞—á–µ—ö–∞ –∏–ª–∏ –Ω–µ—Å–ø–æ—Ä–∞–∑—É–º–µ –∫–æ—ò–∏ –º–æ–≥—É –Ω–∞—Å—Ç–∞—Ç–∏ —É—Å–ª–µ–¥ –∫–æ—Ä–∏—à—õ–µ—ö–∞ –æ–≤–æ–≥ –ø—Ä–µ–≤–æ–¥–∞.