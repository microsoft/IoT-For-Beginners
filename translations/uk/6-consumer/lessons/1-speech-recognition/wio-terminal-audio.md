<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "2f336726b9410e97c3aaed76cc89b0d8",
  "translation_date": "2025-08-28T16:31:03+00:00",
  "source_file": "6-consumer/lessons/1-speech-recognition/wio-terminal-audio.md",
  "language_code": "uk"
}
-->
# –ó–∞—Ö–æ–ø–ª–µ–Ω–Ω—è –∞—É–¥—ñ–æ - Wio Terminal

–£ —Ü—ñ–π —á–∞—Å—Ç–∏–Ω—ñ —É—Ä–æ–∫—É –≤–∏ –Ω–∞–ø–∏—à–µ—Ç–µ –∫–æ–¥ –¥–ª—è –∑–∞—Ö–æ–ø–ª–µ–Ω–Ω—è –∞—É–¥—ñ–æ –Ω–∞ –≤–∞—à–æ–º—É Wio Terminal. –ó–∞—Ö–æ–ø–ª–µ–Ω–Ω—è –∞—É–¥—ñ–æ –±—É–¥–µ –∫–µ—Ä—É–≤–∞—Ç–∏—Å—è –æ–¥–Ω—ñ—î—é –∑ –∫–Ω–æ–ø–æ–∫ –Ω–∞ –≤–µ—Ä—Ö–Ω—ñ–π —á–∞—Å—Ç–∏–Ω—ñ Wio Terminal.

## –ü—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è –ø—Ä–∏—Å—Ç—Ä–æ—é –¥–ª—è –∑–∞—Ö–æ–ø–ª–µ–Ω–Ω—è –∞—É–¥—ñ–æ

–í–∏ –º–æ–∂–µ—Ç–µ –∑–∞—Ö–æ–ø–ª—é–≤–∞—Ç–∏ –∞—É–¥—ñ–æ –∑ –º—ñ–∫—Ä–æ—Ñ–æ–Ω–∞ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –∫–æ–¥—É –Ω–∞ C++. Wio Terminal –º–∞—î –ª–∏—à–µ 192KB –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ—ó –ø–∞–º'—è—Ç—ñ, —á–æ–≥–æ –Ω–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ –¥–ª—è –∑–∞—Ö–æ–ø–ª–µ–Ω–Ω—è –±—ñ–ª—å—à–µ –∫—ñ–ª—å–∫–æ—Ö —Å–µ–∫—É–Ω–¥ –∞—É–¥—ñ–æ. –û–¥–Ω–∞–∫ –≤—ñ–Ω —Ç–∞–∫–æ–∂ –º–∞—î 4MB —Ñ–ª–µ—à-–ø–∞–º'—è—Ç—ñ, —è–∫—É –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –∑–∞—Ö–æ–ø–ª–µ–Ω–æ–≥–æ –∞—É–¥—ñ–æ.

–í–±—É–¥–æ–≤–∞–Ω–∏–π –º—ñ–∫—Ä–æ—Ñ–æ–Ω –∑–∞—Ö–æ–ø–ª—é—î –∞–Ω–∞–ª–æ–≥–æ–≤–∏–π —Å–∏–≥–Ω–∞–ª, —è–∫–∏–π –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –Ω–∞ —Ü–∏—Ñ—Ä–æ–≤–∏–π —Å–∏–≥–Ω–∞–ª, —â–æ –º–æ–∂–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ Wio Terminal. –ü—ñ–¥ —á–∞—Å –∑–∞—Ö–æ–ø–ª–µ–Ω–Ω—è –∞—É–¥—ñ–æ –¥–∞–Ω—ñ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–∞—Ö–æ–ø–ª—é–≤–∞—Ç–∏ —É –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –º–æ–º–µ–Ω—Ç - –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —â–æ–± –∑–∞—Ö–æ–ø–∏—Ç–∏ –∞—É–¥—ñ–æ –Ω–∞ —á–∞—Å—Ç–æ—Ç—ñ 16KHz, –∞—É–¥—ñ–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–∞—Ö–æ–ø–ª—é–≤–∞—Ç–∏ —Ç–æ—á–Ω–æ 16,000 —Ä–∞–∑—ñ–≤ –Ω–∞ —Å–µ–∫—É–Ω–¥—É –∑ —Ä—ñ–≤–Ω–∏–º–∏ —ñ–Ω—Ç–µ—Ä–≤–∞–ª–∞–º–∏ –º—ñ–∂ –∫–æ–∂–Ω–∏–º –∑—Ä–∞–∑–∫–æ–º. –ó–∞–º—ñ—Å—Ç—å —Ç–æ–≥–æ, —â–æ–± –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –≤–∞—à –∫–æ–¥ –¥–ª—è —Ü—å–æ–≥–æ, –≤–∏ –º–æ–∂–µ—Ç–µ —Å–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏—Å—è –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä–æ–º –ø—Ä—è–º–æ–≥–æ –¥–æ—Å—Ç—É–ø—É –¥–æ –ø–∞–º'—è—Ç—ñ (DMAC). –¶–µ –∞–ø–∞—Ä–∞—Ç–Ω–∞ —Å—Ö–µ–º–∞, —è–∫–∞ –º–æ–∂–µ –∑–∞—Ö–æ–ø–ª—é–≤–∞—Ç–∏ —Å–∏–≥–Ω–∞–ª –∑ –ø–µ–≤–Ω–æ–≥–æ –¥–∂–µ—Ä–µ–ª–∞ —ñ –∑–∞–ø–∏—Å—É–≤–∞—Ç–∏ –π–æ–≥–æ –≤ –ø–∞–º'—è—Ç—å –±–µ–∑ –ø–µ—Ä–µ—Ä–∏–≤–∞–Ω–Ω—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –≤–∞—à–æ–≥–æ –∫–æ–¥—É –Ω–∞ –ø—Ä–æ—Ü–µ—Å–æ—Ä—ñ.

‚úÖ –î—ñ–∑–Ω–∞–π—Ç–µ—Å—è –±—ñ–ª—å—à–µ –ø—Ä–æ DMA –Ω–∞ [—Å—Ç–æ—Ä—ñ–Ω—Ü—ñ –ø—Ä—è–º–æ–≥–æ –¥–æ—Å—Ç—É–ø—É –¥–æ –ø–∞–º'—è—Ç—ñ —É –í—ñ–∫—ñ–ø–µ–¥—ñ—ó](https://wikipedia.org/wiki/Direct_memory_access).

![–ê—É–¥—ñ–æ –∑ –º—ñ–∫—Ä–æ—Ñ–æ–Ω–∞ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å —á–µ—Ä–µ–∑ ADC, –ø–æ—Ç—ñ–º –¥–æ DMAC. DMAC –∑–∞–ø–∏—Å—É—î –¥–∞–Ω—ñ –≤ –æ–¥–∏–Ω –±—É—Ñ–µ—Ä. –ö–æ–ª–∏ —Ü–µ–π –±—É—Ñ–µ—Ä –∑–∞–ø–æ–≤–Ω–µ–Ω–∏–π, –≤—ñ–Ω –æ–±—Ä–æ–±–ª—è—î—Ç—å—Å—è, –∞ DMAC –∑–∞–ø–∏—Å—É—î –¥–∞–Ω—ñ –≤ –¥—Ä—É–≥–∏–π –±—É—Ñ–µ—Ä](../../../../../translated_images/dmac-adc-buffers.4509aee49145c90bc2e1be472b8ed2ddfcb2b6a81ad3e559114aca55f5fff759.uk.png)

DMAC –º–æ–∂–µ –∑–∞—Ö–æ–ø–ª—é–≤–∞—Ç–∏ –∞—É–¥—ñ–æ –∑ ADC –Ω–∞ —Ñ—ñ–∫—Å–æ–≤–∞–Ω–∏—Ö —ñ–Ω—Ç–µ—Ä–≤–∞–ª–∞—Ö, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, 16,000 —Ä–∞–∑—ñ–≤ –Ω–∞ —Å–µ–∫—É–Ω–¥—É –¥–ª—è –∞—É–¥—ñ–æ 16KHz. –í—ñ–Ω –º–æ–∂–µ –∑–∞–ø–∏—Å—É–≤–∞—Ç–∏ —Ü—ñ –¥–∞–Ω—ñ —É –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ –≤–∏–¥—ñ–ª–µ–Ω–∏–π –±—É—Ñ–µ—Ä –ø–∞–º'—è—Ç—ñ, —ñ –∫–æ–ª–∏ —Ü–µ–π –±—É—Ñ–µ—Ä –∑–∞–ø–æ–≤–Ω–µ–Ω–∏–π, –≤—ñ–Ω —Å—Ç–∞—î –¥–æ—Å—Ç—É–ø–Ω–∏–º –¥–ª—è –≤–∞—à–æ–≥–æ –∫–æ–¥—É –¥–ª—è –æ–±—Ä–æ–±–∫–∏. –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ü—ñ—î—ó –ø–∞–º'—è—Ç—ñ –º–æ–∂–µ –∑–∞—Ç—Ä–∏–º–∞—Ç–∏ –∑–∞—Ö–æ–ø–ª–µ–Ω–Ω—è –∞—É–¥—ñ–æ, –∞–ª–µ –≤–∏ –º–æ–∂–µ—Ç–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –∫—ñ–ª—å–∫–∞ –±—É—Ñ–µ—Ä—ñ–≤. DMAC –∑–∞–ø–∏—Å—É—î –¥–∞–Ω—ñ –≤ –±—É—Ñ–µ—Ä 1, –ø–æ—Ç—ñ–º, –∫–æ–ª–∏ –≤—ñ–Ω –∑–∞–ø–æ–≤–Ω–µ–Ω–∏–π, –ø–æ–≤—ñ–¥–æ–º–ª—è—î –≤–∞—à –∫–æ–¥ –¥–ª—è –æ–±—Ä–æ–±–∫–∏ –±—É—Ñ–µ—Ä–∞ 1, –ø–æ–∫–∏ DMAC –∑–∞–ø–∏—Å—É—î –¥–∞–Ω—ñ –≤ –±—É—Ñ–µ—Ä 2. –ö–æ–ª–∏ –±—É—Ñ–µ—Ä 2 –∑–∞–ø–æ–≤–Ω–µ–Ω–∏–π, –≤—ñ–Ω –ø–æ–≤—ñ–¥–æ–º–ª—è—î –≤–∞—à –∫–æ–¥ —ñ –ø–æ–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è –¥–æ –∑–∞–ø–∏—Å—É –≤ –±—É—Ñ–µ—Ä 1. –¢–∞–∫–∏–º —á–∏–Ω–æ–º, —è–∫—â–æ –≤–∏ –æ–±—Ä–æ–±–ª—è—î—Ç–µ –∫–æ–∂–µ–Ω –±—É—Ñ–µ—Ä —à–≤–∏–¥—à–µ, –Ω—ñ–∂ —á–∞—Å, –Ω–µ–æ–±—Ö—ñ–¥–Ω–∏–π –¥–ª—è –π–æ–≥–æ –∑–∞–ø–æ–≤–Ω–µ–Ω–Ω—è, –≤–∏ –Ω–µ –≤—Ç—Ä–∞—Ç–∏—Ç–µ –∂–æ–¥–Ω–∏—Ö –¥–∞–Ω–∏—Ö.

–ü—ñ—Å–ª—è –∑–∞—Ö–æ–ø–ª–µ–Ω–Ω—è –∫–æ–∂–Ω–æ–≥–æ –±—É—Ñ–µ—Ä–∞ –π–æ–≥–æ –º–æ–∂–Ω–∞ –∑–∞–ø–∏—Å–∞—Ç–∏ —É —Ñ–ª–µ—à-–ø–∞–º'—è—Ç—å. –§–ª–µ—à-–ø–∞–º'—è—Ç—å –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–∞–ø–∏—Å—É–≤–∞—Ç–∏, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ –≤–∏–∑–Ω–∞—á–µ–Ω—ñ –∞–¥—Ä–µ—Å–∏, –≤–∫–∞–∑—É—é—á–∏, –∫—É–¥–∏ –∑–∞–ø–∏—Å—É–≤–∞—Ç–∏ —ñ —è–∫–æ–≥–æ —Ä–æ–∑–º—ñ—Ä—É –∑–∞–ø–∏—Å—É–≤–∞—Ç–∏, –ø–æ–¥—ñ–±–Ω–æ –¥–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –º–∞—Å–∏–≤—É –±–∞–π—Ç—ñ–≤ —É –ø–∞–º'—è—Ç—ñ. –§–ª–µ—à-–ø–∞–º'—è—Ç—å –º–∞—î –≥—Ä–∞–Ω—É–ª—è—Ä–Ω—ñ—Å—Ç—å, —Ç–æ–±—Ç–æ –æ–ø–µ—Ä–∞—Ü—ñ—ó —Å—Ç–∏—Ä–∞–Ω–Ω—è —ñ –∑–∞–ø–∏—Å—É –∑–∞–ª–µ–∂–∞—Ç—å –Ω–µ –ª–∏—à–µ –≤—ñ–¥ —Ñ—ñ–∫—Å–æ–≤–∞–Ω–æ–≥–æ —Ä–æ–∑–º—ñ—Ä—É, –∞–ª–µ –π –≤—ñ–¥ –≤–∏—Ä—ñ–≤–Ω—é–≤–∞–Ω–Ω—è –¥–æ —Ü—å–æ–≥–æ —Ä–æ–∑–º—ñ—Ä—É. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, —è–∫—â–æ –≥—Ä–∞–Ω—É–ª—è—Ä–Ω—ñ—Å—Ç—å —Å—Ç–∞–Ω–æ–≤–∏—Ç—å 4096 –±–∞–π—Ç—ñ–≤, —ñ –≤–∏ –∑–∞–ø–∏—Ç—É—î—Ç–µ —Å—Ç–∏—Ä–∞–Ω–Ω—è –∑–∞ –∞–¥—Ä–µ—Å–æ—é 4200, —Ü–µ –º–æ–∂–µ —Å—Ç–µ—Ä—Ç–∏ –≤—Å—ñ –¥–∞–Ω—ñ –∑ –∞–¥—Ä–µ—Å–∏ 4096 –¥–æ 8192. –¶–µ –æ–∑–Ω–∞—á–∞—î, —â–æ –∫–æ–ª–∏ –≤–∏ –∑–∞–ø–∏—Å—É—î—Ç–µ –∞—É–¥—ñ–æ –¥–∞–Ω—ñ —É —Ñ–ª–µ—à-–ø–∞–º'—è—Ç—å, —Ü–µ –º–∞—î –±—É—Ç–∏ —É —à–º–∞—Ç–∫–∞—Ö –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Ä–æ–∑–º—ñ—Ä—É.

### –ó–∞–≤–¥–∞–Ω–Ω—è - –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ñ–ª–µ—à-–ø–∞–º'—è—Ç—ñ

1. –°—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤–∏–π –ø—Ä–æ–µ–∫—Ç Wio Terminal –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é PlatformIO. –ù–∞–∑–≤—ñ—Ç—å —Ü–µ–π –ø—Ä–æ–µ–∫—Ç `smart-timer`. –î–æ–¥–∞–π—Ç–µ –∫–æ–¥ —É —Ñ—É–Ω–∫—Ü—ñ—é `setup` –¥–ª—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ–≥–æ –ø–æ—Ä—Ç—É.

1. –î–æ–¥–∞–π—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ –¥–æ —Ñ–∞–π–ª—É `platformio.ini`, —â–æ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–æ—Å—Ç—É–ø –¥–æ —Ñ–ª–µ—à-–ø–∞–º'—è—Ç—ñ:

    ```ini
    lib_deps =
        seeed-studio/Seeed Arduino FS @ 2.1.1
        seeed-studio/Seeed Arduino SFUD @ 2.0.2
    ```

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ —Ñ–∞–π–ª `main.cpp` —ñ –¥–æ–¥–∞–π—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω—É –¥–∏—Ä–µ–∫—Ç–∏–≤—É –≤–∫–ª—é—á–µ–Ω–Ω—è –¥–ª—è –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ —Ñ–ª–µ—à-–ø–∞–º'—è—Ç—ñ —É –≤–µ—Ä—Ö–Ω—ñ–π —á–∞—Å—Ç–∏–Ω—ñ —Ñ–∞–π–ª—É:

    ```cpp
    #include <sfud.h>
    #include <SPI.h>
    ```

    > üéì SFUD –æ–∑–Ω–∞—á–∞—î Serial Flash Universal Driver, —ñ —Ü–µ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞, —Ä–æ–∑—Ä–æ–±–ª–µ–Ω–∞ –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ —É—Å—ñ–º–∞ —á—ñ–ø–∞–º–∏ —Ñ–ª–µ—à-–ø–∞–º'—è—Ç—ñ.

1. –£ —Ñ—É–Ω–∫—Ü—ñ—ó `setup` –¥–æ–¥–∞–π—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω–∏–π –∫–æ–¥ –¥–ª—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ —Ñ–ª–µ—à-–ø–∞–º'—è—Ç—ñ:

    ```cpp
    while (!(sfud_init() == SFUD_SUCCESS))
        ;

    sfud_qspi_fast_read_enable(sfud_get_device(SFUD_W25Q32_DEVICE_INDEX), 2);
    ```

    –¶–µ–π –∫–æ–¥ —Ü–∏–∫–ª—ñ—á–Ω–æ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è, –ø–æ–∫–∏ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ SFUD –Ω–µ –±—É–¥–µ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–∞, –∞ –ø–æ—Ç—ñ–º —É–≤—ñ–º–∫–Ω–µ–Ω–æ —à–≤–∏–¥–∫–µ —á–∏—Ç–∞–Ω–Ω—è. –í–±—É–¥–æ–≤–∞–Ω–∞ —Ñ–ª–µ—à-–ø–∞–º'—è—Ç—å –º–æ–∂–µ –±—É—Ç–∏ –¥–æ—Å—Ç—É–ø–Ω–∞ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é Queued Serial Peripheral Interface (QSPI), —Ç–∏–ø—É SPI-–∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∞, —è–∫–∏–π –¥–æ–∑–≤–æ–ª—è—î –±–µ–∑–ø–µ—Ä–µ—Ä–≤–Ω–∏–π –¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ —á–µ—Ä–≥—É –∑ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–º –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º –ø—Ä–æ—Ü–µ—Å–æ—Ä–∞. –¶–µ —Ä–æ–±–∏—Ç—å —á–∏—Ç–∞–Ω–Ω—è —ñ –∑–∞–ø–∏—Å —É —Ñ–ª–µ—à-–ø–∞–º'—è—Ç—å —à–≤–∏–¥—à–∏–º–∏.

1. –°—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤–∏–π —Ñ–∞–π–ª —É –ø–∞–ø—Ü—ñ `src` –ø—ñ–¥ –Ω–∞–∑–≤–æ—é `flash_writer.h`.

1. –î–æ–¥–∞–π—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω–µ —É –≤–µ—Ä—Ö–Ω—ñ–π —á–∞—Å—Ç–∏–Ω—ñ —Ü—å–æ–≥–æ —Ñ–∞–π–ª—É:

    ```cpp
    #pragma once

    #include <Arduino.h>
    #include <sfud.h>
    ```

    –¶–µ –≤–∫–ª—é—á–∞—î –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤—ñ —Ñ–∞–π–ª–∏, –≤–∫–ª—é—á–∞—é—á–∏ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤–∏–π —Ñ–∞–π–ª –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ SFUD –¥–ª—è –≤–∑–∞—î–º–æ–¥—ñ—ó –∑ —Ñ–ª–µ—à-–ø–∞–º'—è—Ç—Ç—é.

1. –í–∏–∑–Ω–∞—á—Ç–µ –∫–ª–∞—Å —É —Ü—å–æ–º—É –Ω–æ–≤–æ–º—É –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤–æ–º—É —Ñ–∞–π–ª—ñ –ø—ñ–¥ –Ω–∞–∑–≤–æ—é `FlashWriter`:

    ```cpp
    class FlashWriter
    {
    public:
    
    private:
    };
    ```

1. –£ —Å–µ–∫—Ü—ñ—ó `private` –¥–æ–¥–∞–π—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω–∏–π –∫–æ–¥:

    ```cpp
    byte *_sfudBuffer;
    size_t _sfudBufferSize;
    size_t _sfudBufferPos;
    size_t _sfudBufferWritePos;

    const sfud_flash *_flash;
    ```

    –¶–µ –≤–∏–∑–Ω–∞—á–∞—î –¥–µ—è–∫—ñ –ø–æ–ª—è –¥–ª—è –±—É—Ñ–µ—Ä–∞, —è–∫–∏–π –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö –ø–µ—Ä–µ–¥ –∑–∞–ø–∏—Å–æ–º —É —Ñ–ª–µ—à-–ø–∞–º'—è—Ç—å. –Ñ –º–∞—Å–∏–≤ –±–∞–π—Ç—ñ–≤ `_sfudBuffer` –¥–ª—è –∑–∞–ø–∏—Å—É –¥–∞–Ω–∏—Ö, —ñ –∫–æ–ª–∏ –≤—ñ–Ω –∑–∞–ø–æ–≤–Ω–µ–Ω–∏–π, –¥–∞–Ω—ñ –∑–∞–ø–∏—Å—É—é—Ç—å—Å—è —É —Ñ–ª–µ—à-–ø–∞–º'—è—Ç—å. –ü–æ–ª–µ `_sfudBufferPos` –∑–±–µ—Ä—ñ–≥–∞—î –ø–æ—Ç–æ—á–Ω–µ –º—ñ—Å—Ü–µ –¥–ª—è –∑–∞–ø–∏—Å—É –≤ —Ü—å–æ–º—É –±—É—Ñ–µ—Ä—ñ, –∞ `_sfudBufferWritePos` –∑–±–µ—Ä—ñ–≥–∞—î –º—ñ—Å—Ü–µ —É —Ñ–ª–µ—à-–ø–∞–º'—è—Ç—ñ –¥–ª—è –∑–∞–ø–∏—Å—É. `_flash` - —Ü–µ –≤–∫–∞–∑—ñ–≤–Ω–∏–∫ –Ω–∞ —Ñ–ª–µ—à-–ø–∞–º'—è—Ç—å –¥–ª—è –∑–∞–ø–∏—Å—É - –¥–µ—è–∫—ñ –º—ñ–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∏ –º–∞—é—Ç—å –∫—ñ–ª—å–∫–∞ —á—ñ–ø—ñ–≤ —Ñ–ª–µ—à-–ø–∞–º'—è—Ç—ñ.

1. –î–æ–¥–∞–π—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω–∏–π –º–µ—Ç–æ–¥ –¥–æ —Å–µ–∫—Ü—ñ—ó `public` –¥–ª—è —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó —Ü—å–æ–≥–æ –∫–ª–∞—Å—É:

    ```cpp
    void init()
    {
        _flash = sfud_get_device_table() + 0;
        _sfudBufferSize = _flash->chip.erase_gran;
        _sfudBuffer = new byte[_sfudBufferSize];
        _sfudBufferPos = 0;
        _sfudBufferWritePos = 0;
    }
    ```

    –¶–µ –Ω–∞–ª–∞—à—Ç–æ–≤—É—î —Ñ–ª–µ—à-–ø–∞–º'—è—Ç—å –Ω–∞ Wio Terminal –¥–ª—è –∑–∞–ø–∏—Å—É —ñ –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î –±—É—Ñ–µ—Ä–∏ –Ω–∞ –æ—Å–Ω–æ–≤—ñ —Ä–æ–∑–º—ñ—Ä—É –∑–µ—Ä–Ω–∞ —Ñ–ª–µ—à-–ø–∞–º'—è—Ç—ñ. –¶–µ –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ –º–µ—Ç–æ–¥—ñ `init`, –∞ –Ω–µ –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ñ, –æ—Å–∫—ñ–ª—å–∫–∏ —Ü–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ –ø—ñ—Å–ª—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ñ–ª–µ—à-–ø–∞–º'—è—Ç—ñ —É —Ñ—É–Ω–∫—Ü—ñ—ó `setup`.

1. –î–æ–¥–∞–π—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω–∏–π –∫–æ–¥ –¥–æ —Å–µ–∫—Ü—ñ—ó `public`:

    ```cpp
    void writeSfudBuffer(byte b)
    {
        _sfudBuffer[_sfudBufferPos++] = b;
        if (_sfudBufferPos == _sfudBufferSize)
        {
            sfud_erase_write(_flash, _sfudBufferWritePos, _sfudBufferSize, _sfudBuffer);
            _sfudBufferWritePos += _sfudBufferSize;
            _sfudBufferPos = 0;
        }
    }

    void writeSfudBuffer(byte *b, size_t len)
    {
        for (size_t i = 0; i < len; ++i)
        {
            writeSfudBuffer(b[i]);
        }
    }

    void flushSfudBuffer()
    {
        if (_sfudBufferPos > 0)
        {
            sfud_erase_write(_flash, _sfudBufferWritePos, _sfudBufferSize, _sfudBuffer);
            _sfudBufferWritePos += _sfudBufferSize;
            _sfudBufferPos = 0;
        }
    }
    ```

    –¶–µ–π –∫–æ–¥ –≤–∏–∑–Ω–∞—á–∞—î –º–µ—Ç–æ–¥–∏ –¥–ª—è –∑–∞–ø–∏—Å—É –±–∞–π—Ç—ñ–≤ —É —Å–∏—Å—Ç–µ–º—É –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è —Ñ–ª–µ—à-–ø–∞–º'—è—Ç—ñ. –í—ñ–Ω –ø—Ä–∞—Ü—é—î, –∑–∞–ø–∏—Å—É—é—á–∏ —É –±—É—Ñ–µ—Ä –ø–∞–º'—è—Ç—ñ, —è–∫–∏–π –º–∞—î –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π —Ä–æ–∑–º—ñ—Ä –¥–ª—è —Ñ–ª–µ—à-–ø–∞–º'—è—Ç—ñ, —ñ –∫–æ–ª–∏ —Ü–µ–π –±—É—Ñ–µ—Ä –∑–∞–ø–æ–≤–Ω–µ–Ω–∏–π, –≤—ñ–Ω –∑–∞–ø–∏—Å—É—î—Ç—å—Å—è —É —Ñ–ª–µ—à-–ø–∞–º'—è—Ç—å, —Å—Ç–∏—Ä–∞—é—á–∏ –±—É–¥—å-—è–∫—ñ —ñ—Å–Ω—É—é—á—ñ –¥–∞–Ω—ñ —É —Ü—å–æ–º—É –º—ñ—Å—Ü—ñ. –¢–∞–∫–æ–∂ —î –º–µ—Ç–æ–¥ `flushSfudBuffer` –¥–ª—è –∑–∞–ø–∏—Å—É –Ω–µ–ø–æ–≤–Ω–æ–≥–æ –±—É—Ñ–µ—Ä–∞, –æ—Å–∫—ñ–ª—å–∫–∏ –¥–∞–Ω—ñ, —â–æ –∑–∞—Ö–æ–ø–ª—é—é—Ç—å—Å—è, –Ω–µ –±—É–¥—É—Ç—å —Ç–æ—á–Ω–∏–º–∏ –∫—Ä–∞—Ç–Ω–∏–º–∏ —Ä–æ–∑–º—ñ—Ä—É –∑–µ—Ä–Ω–∞, —Ç–æ–º—É –∫—ñ–Ω—Ü–µ–≤–∞ —á–∞—Å—Ç–∏–Ω–∞ –¥–∞–Ω–∏—Ö –ø–æ–≤–∏–Ω–Ω–∞ –±—É—Ç–∏ –∑–∞–ø–∏—Å–∞–Ω–∞.

    > üíÅ –ö—ñ–Ω—Ü–µ–≤–∞ —á–∞—Å—Ç–∏–Ω–∞ –¥–∞–Ω–∏—Ö –∑–∞–ø–∏—à–µ –¥–æ–¥–∞—Ç–∫–æ–≤—ñ –Ω–µ–±–∞–∂–∞–Ω—ñ –¥–∞–Ω—ñ, –∞–ª–µ —Ü–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –æ—Å–∫—ñ–ª—å–∫–∏ –±—É–¥–µ —á–∏—Ç–∞—Ç–∏—Å—è –ª–∏—à–µ –ø–æ—Ç—Ä—ñ–±–Ω—ñ –¥–∞–Ω—ñ.

### –ó–∞–≤–¥–∞–Ω–Ω—è - –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–∞—Ö–æ–ø–ª–µ–Ω–Ω—è –∞—É–¥—ñ–æ

1. –°—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤–∏–π —Ñ–∞–π–ª —É –ø–∞–ø—Ü—ñ `src` –ø—ñ–¥ –Ω–∞–∑–≤–æ—é `config.h`.

1. –î–æ–¥–∞–π—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω–µ —É –≤–µ—Ä—Ö–Ω—ñ–π —á–∞—Å—Ç–∏–Ω—ñ —Ü—å–æ–≥–æ —Ñ–∞–π–ª—É:

    ```cpp
    #pragma once

    #define RATE 16000
    #define SAMPLE_LENGTH_SECONDS 4
    #define SAMPLES RATE * SAMPLE_LENGTH_SECONDS
    #define BUFFER_SIZE (SAMPLES * 2) + 44
    #define ADC_BUF_LEN 1600
    ```

    –¶–µ–π –∫–æ–¥ –Ω–∞–ª–∞—à—Ç–æ–≤—É—î –¥–µ—è–∫—ñ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∏ –¥–ª—è –∑–∞—Ö–æ–ø–ª–µ–Ω–Ω—è –∞—É–¥—ñ–æ.

    | –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞             | –ó–Ω–∞—á–µ–Ω–Ω—è | –û–ø–∏—Å |
    | --------------------- | -------: | - |
    | RATE                  | 16000    | –ß–∞—Å—Ç–æ—Ç–∞ –≤–∏–±—ñ—Ä–∫–∏ –¥–ª—è –∞—É–¥—ñ–æ. 16,000 - —Ü–µ 16KHz |
    | SAMPLE_LENGTH_SECONDS | 4        | –¢—Ä–∏–≤–∞–ª—ñ—Å—Ç—å –∞—É–¥—ñ–æ –¥–ª—è –∑–∞—Ö–æ–ø–ª–µ–Ω–Ω—è. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –Ω–∞ 4 —Å–µ–∫—É–Ω–¥–∏. –©–æ–± –∑–∞–ø–∏—Å–∞—Ç–∏ –¥–æ–≤—à–µ –∞—É–¥—ñ–æ, –∑–±—ñ–ª—å—à—ñ—Ç—å —Ü–µ –∑–Ω–∞—á–µ–Ω–Ω—è. |
    | SAMPLES               | 64000    | –ó–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∞—É–¥—ñ–æ –∑—Ä–∞–∑–∫—ñ–≤, —è–∫—ñ –±—É–¥—É—Ç—å –∑–∞—Ö–æ–ø–ª–µ–Ω—ñ. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ —è–∫ —á–∞—Å—Ç–æ—Ç–∞ –≤–∏–±—ñ—Ä–∫–∏ * –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Å–µ–∫—É–Ω–¥ |
    | BUFFER_SIZE           | 128044   | –†–æ–∑–º—ñ—Ä –±—É—Ñ–µ—Ä–∞ –∞—É–¥—ñ–æ –¥–ª—è –∑–∞—Ö–æ–ø–ª–µ–Ω–Ω—è. –ê—É–¥—ñ–æ –±—É–¥–µ –∑–∞—Ö–æ–ø–ª–µ–Ω–æ —è–∫ WAV-—Ñ–∞–π–ª, —è–∫–∏–π –º–∞—î 44 –±–∞–π—Ç–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞, –ø–æ—Ç—ñ–º 128,000 –±–∞–π—Ç—ñ–≤ –∞—É–¥—ñ–æ –¥–∞–Ω–∏—Ö (–∫–æ–∂–µ–Ω –∑—Ä–∞–∑–æ–∫ - 2 –±–∞–π—Ç–∏) |
    | ADC_BUF_LEN           | 1600     | –†–æ–∑–º—ñ—Ä –±—É—Ñ–µ—Ä—ñ–≤ –¥–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø—Ä–∏ –∑–∞—Ö–æ–ø–ª–µ–Ω–Ω—ñ –∞—É–¥—ñ–æ –∑ DMAC |

    > üíÅ –Ø–∫—â–æ –≤–∏ –≤–≤–∞–∂–∞—î—Ç–µ, —â–æ 4 —Å–µ–∫—É–Ω–¥–∏ –∑–∞–Ω–∞–¥—Ç–æ –∫–æ—Ä–æ—Ç–∫–∏–π —á–∞—Å –¥–ª—è –∑–∞–ø–∏—Ç—É —Ç–∞–π–º–µ—Ä–∞, –≤–∏ –º–æ–∂–µ—Ç–µ –∑–±—ñ–ª—å—à–∏—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è `SAMPLE_LENGTH_SECONDS`, —ñ –≤—Å—ñ —ñ–Ω—à—ñ –∑–Ω–∞—á–µ–Ω–Ω—è –±—É–¥—É—Ç—å –ø–µ—Ä–µ—Ä–∞—Ö–æ–≤–∞–Ω—ñ.

1. –°—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤–∏–π —Ñ–∞–π–ª —É –ø–∞–ø—Ü—ñ `src` –ø—ñ–¥ –Ω–∞–∑–≤–æ—é `mic.h`.

1. –î–æ–¥–∞–π—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω–µ —É –≤–µ—Ä—Ö–Ω—ñ–π —á–∞—Å—Ç–∏–Ω—ñ —Ü—å–æ–≥–æ —Ñ–∞–π–ª—É:

    ```cpp
    #pragma once

    #include <Arduino.h>

    #include "config.h"
    #include "flash_writer.h"
    ```

    –¶–µ –≤–∫–ª—é—á–∞—î –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤—ñ —Ñ–∞–π–ª–∏, –≤–∫–ª—é—á–∞—é—á–∏ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤—ñ —Ñ–∞–π–ª–∏ `config.h` —ñ `FlashWriter`.

1. –î–æ–¥–∞–π—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω–µ –¥–ª—è –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –∫–ª–∞—Å—É `Mic`, —è–∫–∏–π –º–æ–∂–µ –∑–∞—Ö–æ–ø–ª—é–≤–∞—Ç–∏ –¥–∞–Ω—ñ –∑ –º—ñ–∫—Ä–æ—Ñ–æ–Ω–∞:

    ```cpp
    class Mic
    {
    public:
        Mic()
        {
            _isRecording = false;
            _isRecordingReady = false;
        }
    
        void startRecording()
        {
            _isRecording = true;
            _isRecordingReady = false;
        }
    
        bool isRecording()
        {
            return _isRecording;
        }
    
        bool isRecordingReady()
        {
            return _isRecordingReady;
        }
    
    private:
        volatile bool _isRecording;
        volatile bool _isRecordingReady;
        FlashWriter _writer;
    };
    
    Mic mic;
    ```

    –¶–µ–π –∫–ª–∞—Å –Ω–∞—Ä–∞–∑—ñ –º–∞—î –ª–∏—à–µ –∫—ñ–ª—å–∫–∞ –ø–æ–ª—ñ–≤ –¥–ª—è –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è, —á–∏ —Ä–æ–∑–ø–æ—á–∞—Ç–æ –∑–∞–ø–∏—Å, —ñ —á–∏ –≥–æ—Ç–æ–≤–∏–π –∑–∞–ø–∏—Å –¥–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è. –ö–æ–ª–∏ DMAC –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π, –≤—ñ–Ω –±–µ–∑–ø–µ—Ä–µ—Ä–≤–Ω–æ –∑–∞–ø–∏—Å—É—î –¥–∞–Ω—ñ —É –±—É—Ñ–µ—Ä–∏ –ø–∞–º'—è—Ç—ñ, —Ç–æ–º—É –ø—Ä–∞–ø–æ—Ä–µ—Ü—å `_isRecording` –≤–∏–∑–Ω–∞—á–∞—î, —á–∏ —Ü—ñ –¥–∞–Ω—ñ –ø–æ–≤–∏–Ω–Ω—ñ –æ–±—Ä–æ–±–ª—è—Ç–∏—Å—è —á–∏ —ñ–≥–Ω–æ—Ä—É–≤–∞—Ç–∏—Å—è. –ü—Ä–∞–ø–æ—Ä–µ—Ü—å `_isRecordingReady` –±—É–¥–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–π, –∫–æ–ª–∏ –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ 4 —Å–µ–∫—É–Ω–¥–∏ –∞—É–¥—ñ–æ –±—É–¥—É—Ç—å –∑–∞—Ö–æ–ø–ª–µ–Ω—ñ. –ü–æ–ª–µ `_writer` –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –∞—É–¥—ñ–æ –¥–∞–Ω–∏—Ö —É —Ñ–ª–µ—à-–ø–∞–º'—è—Ç—å.

    –ü–æ—Ç—ñ–º –æ–≥–æ–ª–æ—à—É—î—Ç—å—Å—è –≥–ª–æ–±–∞–ª—å–Ω–∞ –∑–º—ñ–Ω–Ω–∞ –¥–ª—è –µ–∫–∑–µ–º–ø–ª—è—Ä–∞ –∫–ª–∞—Å—É `Mic`.

1. –î–æ–¥–∞–π—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω–∏–π –∫–æ–¥ –¥–æ —Å–µ–∫—Ü—ñ—ó `private` –∫–ª–∞—Å—É `Mic`:

    ```cpp
    typedef struct
    {
        uint16_t btctrl;
        uint16_t btcnt;
        uint32_t srcaddr;
        uint32_t dstaddr;
        uint32_t descaddr;
    } dmacdescriptor;

    // Globals - DMA and ADC
    volatile dmacdescriptor _wrb[DMAC_CH_NUM] __attribute__((aligned(16)));
    dmacdescriptor _descriptor_section[DMAC_CH_NUM] __attribute__((aligned(16)));
    dmacdescriptor _descriptor __attribute__((aligned(16)));

    void configureDmaAdc()
    {
        // Configure DMA to sample from ADC at a regular interval (triggered by timer/counter)
        DMAC->BASEADDR.reg = (uint32_t)_descriptor_section;                    // Specify the location of the descriptors
        DMAC->WRBADDR.reg = (uint32_t)_wrb;                                    // Specify the location of the write back descriptors
        DMAC->CTRL.reg = DMAC_CTRL_DMAENABLE | DMAC_CTRL_LVLEN(0xf);           // Enable the DMAC peripheral
        DMAC->Channel[1].CHCTRLA.reg = DMAC_CHCTRLA_TRIGSRC(TC5_DMAC_ID_OVF) | // Set DMAC to trigger on TC5 timer overflow
                                        DMAC_CHCTRLA_TRIGACT_BURST;             // DMAC burst transfer

        _descriptor.descaddr = (uint32_t)&_descriptor_section[1];                    // Set up a circular descriptor
        _descriptor.srcaddr = (uint32_t)&ADC1->RESULT.reg;                           // Take the result from the ADC0 RESULT register
        _descriptor.dstaddr = (uint32_t)_adc_buf_0 + sizeof(uint16_t) * ADC_BUF_LEN; // Place it in the adc_buf_0 array
        _descriptor.btcnt = ADC_BUF_LEN;                                             // Beat count
        _descriptor.btctrl = DMAC_BTCTRL_BEATSIZE_HWORD |                            // Beat size is HWORD (16-bits)
                                DMAC_BTCTRL_DSTINC |                                    // Increment the destination address
                                DMAC_BTCTRL_VALID |                                     // Descriptor is valid
                                DMAC_BTCTRL_BLOCKACT_SUSPEND;                           // Suspend DMAC channel 0 after block transfer
        memcpy(&_descriptor_section[0], &_descriptor, sizeof(_descriptor));          // Copy the descriptor to the descriptor section

        _descriptor.descaddr = (uint32_t)&_descriptor_section[0];                    // Set up a circular descriptor
        _descriptor.srcaddr = (uint32_t)&ADC1->RESULT.reg;                           // Take the result from the ADC0 RESULT register
        _descriptor.dstaddr = (uint32_t)_adc_buf_1 + sizeof(uint16_t) * ADC_BUF_LEN; // Place it in the adc_buf_1 array
        _descriptor.btcnt = ADC_BUF_LEN;                                             // Beat count
        _descriptor.btctrl = DMAC_BTCTRL_BEATSIZE_HWORD |                            // Beat size is HWORD (16-bits)
                                DMAC_BTCTRL_DSTINC |                                    // Increment the destination address
                                DMAC_BTCTRL_VALID |                                     // Descriptor is valid
                                DMAC_BTCTRL_BLOCKACT_SUSPEND;                           // Suspend DMAC channel 0 after block transfer
        memcpy(&_descriptor_section[1], &_descriptor, sizeof(_descriptor));          // Copy the descriptor to the descriptor section

        // Configure NVIC
        NVIC_SetPriority(DMAC_1_IRQn, 0); // Set the Nested Vector Interrupt Controller (NVIC) priority for DMAC1 to 0 (highest)
        NVIC_EnableIRQ(DMAC_1_IRQn);      // Connect DMAC1 to Nested Vector Interrupt Controller (NVIC)

        // Activate the suspend (SUSP) interrupt on DMAC channel 1
        DMAC->Channel[1].CHINTENSET.reg = DMAC_CHINTENSET_SUSP;

        // Configure ADC
        ADC1->INPUTCTRL.bit.MUXPOS = ADC_INPUTCTRL_MUXPOS_AIN12_Val; // Set the analog input to ADC0/AIN2 (PB08 - A4 on Metro M4)
        while (ADC1->SYNCBUSY.bit.INPUTCTRL)
            ;                              // Wait for synchronization
        ADC1->SAMPCTRL.bit.SAMPLEN = 0x00; // Set max Sampling Time Length to half divided ADC clock pulse (2.66us)
        while (ADC1->SYNCBUSY.bit.SAMPCTRL)
            ;                                         // Wait for synchronization
        ADC1->CTRLA.reg = ADC_CTRLA_PRESCALER_DIV128; // Divide Clock ADC GCLK by 128 (48MHz/128 = 375kHz)
        ADC1->CTRLB.reg = ADC_CTRLB_RESSEL_12BIT |    // Set ADC resolution to 12 bits
                            ADC_CTRLB_FREERUN;          // Set ADC to free run mode
        while (ADC1->SYNCBUSY.bit.CTRLB)
            ;                       // Wait for synchronization
        ADC1->CTRLA.bit.ENABLE = 1; // Enable the ADC
        while (ADC1->SYNCBUSY.bit.ENABLE)
            ;                       // Wait for synchronization
        ADC1->SWTRIG.bit.START = 1; // Initiate a software trigger to start an ADC conversion
        while (ADC1->SYNCBUSY.bit.SWTRIG)
            ; // Wait for synchronization

        // Enable DMA channel 1
        DMAC->Channel[1].CHCTRLA.bit.ENABLE = 1;

        // Configure Timer/Counter 5
        GCLK->PCHCTRL[TC5_GCLK_ID].reg = GCLK_PCHCTRL_CHEN |     // Enable peripheral channel for TC5
                                            GCLK_PCHCTRL_GEN_GCLK1; // Connect generic clock 0 at 48MHz

        TC5->COUNT16.WAVE.reg = TC_WAVE_WAVEGEN_MFRQ; // Set TC5 to Match Frequency (MFRQ) mode
        TC5->COUNT16.CC[0].reg = 3000 - 1;            // Set the trigger to 16 kHz: (4Mhz / 16000) - 1
        while (TC5->COUNT16.SYNCBUSY.bit.CC0)
            ; // Wait for synchronization

        // Start Timer/Counter 5
        TC5->COUNT16.CTRLA.bit.ENABLE = 1; // Enable the TC5 timer
        while (TC5->COUNT16.SYNCBUSY.bit.ENABLE)
            ; // Wait for synchronization
    }

    uint16_t _adc_buf_0[ADC_BUF_LEN];
    uint16_t _adc_buf_1[ADC_BUF_LEN];
    ```

    –¶–µ–π –∫–æ–¥ –≤–∏–∑–Ω–∞—á–∞—î –º–µ—Ç–æ–¥ `configureDmaAdc`, —è–∫–∏–π –Ω–∞–ª–∞—à—Ç–æ–≤—É—î DMAC, –ø—ñ–¥–∫–ª—é—á–∞—é—á–∏ –π–æ–≥–æ –¥–æ ADC —ñ –≤—Å—Ç–∞–Ω–æ–≤–ª—é—é—á–∏ –π–æ–≥–æ –¥–ª—è –∑–∞–ø–æ–≤–Ω–µ–Ω–Ω—è –¥–≤–æ—Ö —Ä—ñ–∑–Ω–∏—Ö —á–µ—Ä–≥—É—é—á–∏—Ö –±—É—Ñ–µ—Ä—ñ–≤, `_adc_buf_0` —ñ `_adc_buf_1`.

    > üíÅ –û–¥–Ω–∏–º —ñ–∑ –Ω–µ–¥–æ–ª—ñ–∫—ñ–≤ —Ä–æ–∑—Ä–æ–±–∫–∏ –¥–ª—è –º—ñ–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä—ñ–≤ —î —Å–∫–ª–∞–¥–Ω—ñ—Å—Ç—å –∫–æ–¥—É, –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ–≥–æ –¥–ª—è –≤–∑–∞—î–º–æ–¥—ñ—ó –∑ –∞–ø–∞—Ä–∞—Ç–Ω–∏–º –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è–º, –æ—Å–∫—ñ–ª—å–∫–∏ –≤–∞—à –∫–æ–¥ –ø—Ä–∞—Ü—é—î –Ω–∞ –¥—É–∂–µ –Ω–∏–∑—å–∫–æ–º—É —Ä—ñ–≤–Ω—ñ, –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ –≤–∑–∞—î–º–æ–¥—ñ—é—á–∏ –∑ –∞–ø–∞—Ä–∞—Ç–Ω–∏–º –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è–º. –¶–µ–π –∫–æ–¥ —Å–∫–ª–∞–¥–Ω—ñ—à–∏–π, –Ω—ñ–∂ —Ç–æ–π, —è–∫–∏–π –≤–∏ –± –Ω–∞–ø–∏—Å–∞–ª–∏ –¥–ª—è –æ–¥–Ω–æ–ø–ª–∞—Ç–Ω–æ–≥–æ –∫–æ–º–ø'—é—Ç–µ—Ä–∞ –∞–±–æ –Ω–∞—Å—Ç—ñ–ª—å–Ω–æ–≥–æ –∫–æ–º–ø'—é—Ç–µ—Ä–∞, –æ—Å–∫—ñ–ª—å–∫–∏ –Ω–µ–º–∞—î –æ–ø–µ—Ä–∞—Ü—ñ–π–Ω–æ—ó —Å–∏—Å—Ç–µ–º–∏, —è–∫–∞ –± –¥–æ–ø–æ–º–∞–≥–∞–ª–∞. –î–µ—è–∫—ñ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ñ, —è–∫—ñ –º–æ–∂—É—Ç—å —Å–ø—Ä–æ—Å—Ç–∏—Ç–∏ —Ü–µ, –∞–ª–µ –≤—Å–µ –æ–¥–Ω–æ –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è –±–∞–≥–∞—Ç–æ —Å–∫–ª–∞–¥–Ω–æ—Å—Ç—ñ.

1. –ù–∏–∂—á–µ —Ü—å–æ–≥–æ –¥–æ–¥–∞–π—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω–∏–π –∫–æ–¥:

    ```cpp
    // WAV files have a header. This struct defines that header
    struct wavFileHeader
    {
        char riff[4];         /* "RIFF"                                  */
        long flength;         /* file length in bytes                    */
        char wave[4];         /* "WAVE"                                  */
        char fmt[4];          /* "fmt "                                  */
        long chunk_size;      /* size of FMT chunk in bytes (usually 16) */
        short format_tag;     /* 1=PCM, 257=Mu-Law, 258=A-Law, 259=ADPCM */
        short num_chans;      /* 1=mono, 2=stereo                        */
        long srate;           /* Sampling rate in samples per second     */
        long bytes_per_sec;   /* bytes per second = srate*bytes_per_samp */
        short bytes_per_samp; /* 2=16-bit mono, 4=16-bit stereo          */
        short bits_per_samp;  /* Number of bits per sample               */
        char data[4];         /* "data"                                  */
        long dlength;         /* data length in bytes (filelength - 44)  */
    };

    void initBufferHeader()
    {
        wavFileHeader wavh;

        strncpy(wavh.riff, "RIFF", 4);
        strncpy(wavh.wave, "WAVE", 4);
        strncpy(wavh.fmt, "fmt ", 4);
        strncpy(wavh.data, "data", 4);

        wavh.chunk_size = 16;
        wavh.format_tag = 1; // PCM
        wavh.num_chans = 1;  // mono
        wavh.srate = RATE;
        wavh.bytes_per_sec = (RATE * 1 * 16 * 1) / 8;
        wavh.bytes_per_samp = 2;
        wavh.bits_per_samp = 16;
        wavh.dlength = RATE * 2 * 1 * 16 / 2;
        wavh.flength = wavh.dlength + 44;

        _writer.writeSfudBuffer((byte *)&wavh, 44);
    }
    ```

    –¶–µ–π –∫–æ–¥ –≤–∏–∑–Ω–∞—á–∞—î –∑–∞–≥–æ–ª–æ–≤–æ–∫ WAV —è–∫ —Å—Ç—Ä—É–∫—Ç—É—Ä—É, —è–∫–∞ –∑–∞–π–º–∞—î 44 –±–∞–π—Ç–∏ –ø–∞–º'—è—Ç—ñ. –í—ñ–Ω –∑–∞–ø–∏—Å—É—î –¥–µ—Ç–∞–ª—ñ –ø—Ä–æ —á–∞—Å—Ç–æ—Ç—É, —Ä–æ–∑–º—ñ—Ä —ñ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∫–∞–Ω–∞–ª—ñ–≤ –∞—É–¥—ñ–æ—Ñ–∞–π–ª—É. –¶–µ–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ –ø–æ—Ç—ñ–º –∑–∞–ø–∏—Å—É—î—Ç—å—Å—è —É —Ñ–ª–µ—à-–ø–∞–º'—è—Ç—å.

1. –ù–∏–∂—á–µ —Ü—å–æ–≥–æ –∫–æ–¥—É –¥–æ–¥–∞–π—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω–µ –¥–ª—è –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è –º–µ—Ç–æ–¥—É, —è–∫–∏–π –±—É–¥–µ –≤–∏–∫–ª–∏–∫–∞–Ω–∏–π, –∫–æ–ª–∏ –±—É—Ñ–µ—Ä–∏ –∞—É–¥—ñ–æ –≥–æ—Ç–æ–≤—ñ –¥–æ –æ–±—Ä–æ–±–∫–∏:

    ```cpp
    void audioCallback(uint16_t *buf, uint32_t buf_len)
    {
        static uint32_t idx = 44;

        if (_isRecording)
        {
            for (uint32_t i = 0; i < buf_len; i++)
            {
                int16_t audio_value = ((int16_t)buf[i] - 2048) * 16;

                _writer.writeSfudBuffer(audio_value & 0xFF);
                _writer.writeSfudBuffer((audio_value >> 8) & 0xFF);
            }

            idx += buf_len;
                
            if (idx >= BUFFER_SIZE)
            {
                _writer.flushSfudBuffer();
                idx = 44;
                _isRecording = false;
                _isRecordingReady = true;
            }
        }
    }
    ```

    –ë—É—Ñ–µ—Ä–∏ –∞—É–¥—ñ–æ - —Ü–µ –º–∞—Å–∏–≤–∏ 16-–±—ñ—Ç–Ω–∏—Ö —Ü—ñ–ª–∏—Ö —á–∏—Å–µ–ª, —â–æ –º—ñ—Å—Ç—è—Ç—å –∞—É–¥—ñ–æ –∑ ADC. ADC –ø–æ–≤–µ—Ä—Ç–∞—î 12-–±—ñ—Ç–Ω—ñ –±–µ–∑–∑–Ω–∞–∫–æ–≤—ñ –∑–Ω–∞—á–µ–Ω–Ω—è (0-1023), —Ç–æ–º—É —ó—Ö –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–µ—Ä–µ—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–∞ 16-–±—ñ—Ç–Ω—ñ –∑–Ω–∞–∫–æ–≤—ñ –∑–Ω–∞—á–µ–Ω–Ω—è, –∞ –ø–æ—Ç—ñ–º –ø–µ—Ä–µ—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–∞ 2 –±–∞–π—Ç–∏ –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è —è–∫ —Å–∏—Ä–∏—Ö –±—ñ–Ω–∞—Ä–Ω–∏—Ö –¥–∞–Ω–∏—Ö.

    –¶—ñ –±–∞–π—Ç–∏ –∑–∞–ø–∏—Å—É—é—Ç—å—Å—è —É –±—É—Ñ–µ—Ä–∏ —Ñ–ª–µ—à-–ø–∞–º'—è—Ç—ñ. –ó–∞–ø–∏—Å –ø–æ—á–∏–Ω–∞—î—Ç—å—Å—è –∑ —ñ–Ω–¥–µ–∫—Å—É 44 - —Ü–µ –∑–º—ñ—â–µ–Ω–Ω—è –≤—ñ–¥ 44 –±–∞–π—Ç—ñ–≤, –∑–∞–ø–∏—Å–∞–Ω–∏—Ö —è–∫ –∑–∞–≥–æ–ª–æ–≤–æ–∫ WAV-—Ñ–∞–π–ª—É. –ü—ñ—Å–ª—è —Ç–æ–≥–æ, —è–∫ –≤—Å—ñ –±–∞–π—Ç–∏, –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –¥–ª—è –ø–æ—Ç—Ä—ñ–±–Ω–æ—ó —Ç—Ä–∏–≤–∞–ª–æ—Å—Ç—ñ –∞—É–¥—ñ–æ, –∑–∞—Ö–æ–ø–ª–µ–Ω—ñ, –∑–∞–ª–∏—à–∫–æ–≤—ñ –¥–∞–Ω—ñ –∑–∞–ø–∏—Å—É—é—Ç—å—Å—è —É —Ñ–ª–µ—à-–ø–∞–º'—è—Ç—å.

1. –£ —Å–µ–∫—Ü—ñ—ó `public` –∫–ª–∞—Å—É `Mic` –¥–æ–¥–∞–π—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω–∏–π –∫–æ–¥:

    ```cpp
    void dmaHandler()
    {
        static uint8_t count = 0;

        if (DMAC->Channel[1].CHINTFLAG.bit.SUSP)
        {
            DMAC->Channel[1].CHCTRLB.reg = DMAC_CHCTRLB_CMD_RESUME;
            DMAC->Channel[1].CHINTFLAG.bit.SUSP = 1;

            if (count)
            {
                audioCallback(_adc_buf_0, ADC_BUF_LEN);
            }
            else
            {
                audioCallback(_adc_buf_1, ADC_BUF_LEN);
            }

            count = (count + 1) % 2;
        }
    }
    ```

    –¶–µ–π –∫–æ–¥ –±—É–¥–µ –≤–∏–∫–ª–∏–∫–∞–Ω–∏–π DMAC, —â–æ–± –ø–æ–≤—ñ–¥–æ–º–∏—Ç–∏ –≤–∞—à –∫–æ–¥ –ø—Ä–æ –≥–æ—Ç–æ–≤–Ω—ñ—Å—Ç—å –±—É—Ñ–µ—Ä—ñ–≤ –¥–æ –æ–±—Ä–æ–±–∫–∏. –í—ñ–Ω –ø–µ—Ä–µ–≤—ñ—Ä—è—î, —á–∏ —î –¥–∞–Ω—ñ –¥–ª—è –æ–±—Ä–æ–±–∫–∏, —ñ –≤–∏–∫–ª–∏–∫–∞—î –º–µ—Ç–æ–¥ `audioCallback` –∑ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏–º –±—É—Ñ–µ—Ä–æ–º.

1. –ó–æ–≤–Ω—ñ –∫–ª–∞—Å—É, –ø—ñ—Å–ª—è –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è `Mic mic;`, –¥–æ–¥–∞–π—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω–∏–π –∫–æ–¥:

    ```cpp
    void DMAC_1_Handler()
    {
        mic.dmaHandler();
    }
    ```

    `DMAC_1_Handler` –±—É–¥–µ –≤–∏–∫–ª–∏–∫–∞–Ω–∏–π DMAC, –∫–æ–ª–∏ –±—É—Ñ–µ—Ä–∏ –≥–æ—Ç–æ–≤—ñ –¥–æ –æ–±—Ä–æ–±–∫–∏. –¶—è —Ñ—É–Ω–∫—Ü—ñ—è –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –∑–∞ –Ω–∞–∑–≤–æ—é, —Ç–æ–º—É –ø—Ä–æ—Å—Ç–æ –ø–æ–≤–∏–Ω–Ω–∞ —ñ—Å–Ω—É–≤–∞—Ç–∏, —â–æ–± –±—É—Ç–∏ –≤–∏–∫–ª–∏–∫–∞–Ω–æ—é.

1. –î–æ–¥–∞–π—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω—ñ –¥–≤–∞ –º–µ—Ç–æ–¥–∏ –¥–æ —Å–µ–∫—Ü—ñ—ó `public` –∫–ª–∞—Å—É `Mic`:

    ```cpp
    void init()
    {
        analogReference(AR_INTERNAL2V23);

        _writer.init();

        initBufferHeader();
        configureDmaAdc();
    }

    void reset()
    {
        _isRecordingReady = false;
        _isRecording = false;

        _writer.reset();

        initBufferHeader();
    }
    ```

    –ú–µ—Ç–æ–¥ `init` –º—ñ—Å—Ç–∏—Ç—å –∫–æ–¥ –¥–ª—è —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó –∫–ª–∞—Å—É `Mic`. –¶–µ–π –º–µ—Ç–æ–¥ –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î –ø—Ä–∞–≤–∏–ª—å–Ω—É –Ω–∞–ø—Ä—É–≥—É –¥–ª—è –ø—ñ–Ω—É –º—ñ–∫—Ä–æ—Ñ–æ–Ω–∞, –Ω–∞–ª–∞—à—Ç–æ–≤—É—î –∑–∞–ø–∏—Å—É–≤–∞—á —Ñ–ª–µ—à-–ø–∞–º'—è—Ç—ñ, –∑–∞–ø–∏—Å—É—î –∑–∞–≥–æ–ª–æ–≤–æ–∫ WAV-—Ñ–∞–π–ª—É —ñ –Ω–∞–ª–∞—à—Ç–æ–≤—É—î DMAC. –ú–µ—Ç–æ–¥ `reset` —Å–∫–∏–¥–∞—î —Ñ–ª–µ—à-–ø–∞–º'—è—Ç—å —ñ –ø–æ–≤—Ç–æ—Ä–Ω–æ –∑–∞–ø–∏—Å—É—î –∑–∞–≥–æ–ª–æ–≤–æ–∫ –ø—ñ—Å–ª—è —Ç–æ–≥–æ, —è–∫ –∞—É–¥—ñ–æ –±—É–ª–æ –∑–∞—Ö–æ–ø–ª–µ–Ω–æ —ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–æ.

### –ó–∞–≤–¥–∞–Ω–Ω—è - –∑–∞—Ö–æ–ø–ª–µ–Ω–Ω—è –∞—É–¥—ñ–æ

1. –£ —Ñ–∞–π–ª—ñ `main.cpp` –¥–æ–¥–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–∏–≤—É –≤–∫–ª—é—á–µ–Ω–Ω—è –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤–æ–≥–æ —Ñ–∞–π–ª—É `mic.h`:

    ```cpp
    #include "mic.h"
    ```

1. –£ —Ñ—É–Ω–∫—Ü—ñ—ó `setup` —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫—É C. –ó–∞—Ö–æ–ø–ª–µ–Ω–Ω—è –∞—É–¥—ñ–æ –ø–æ—á–Ω–µ—Ç—å—Å—è, –∫–æ–ª–∏ —Ü—è –∫–Ω–æ–ø–∫–∞ –±—É–¥–µ –Ω–∞—Ç–∏—Å–Ω—É—Ç–∞, —ñ —Ç—Ä–∏–≤–∞—Ç–∏–º–µ 4 —Å–µ–∫—É–Ω–¥–∏:

    ```cpp
    pinMode(WIO_KEY_C, INPUT_PULLUP);
    ```

1. –ù–∏–∂—á–µ —Ü—å–æ–≥–æ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É–π—Ç–µ –º—ñ–∫—Ä–æ—Ñ–æ–Ω, –∞ –ø–æ—Ç—ñ–º –≤–∏–≤–µ–¥—ñ—Ç—å —É –∫–æ–Ω—Å–æ–ª—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –≥–æ—Ç–æ–≤–Ω—ñ—Å—Ç—å –¥–æ –∑–∞—Ö–æ–ø–ª–µ–Ω–Ω—è –∞—É–¥—ñ–æ:

    ```cpp
    mic.init();

    Serial.println("Ready.");
    ```

1. –ù–∞–¥ —Ñ—É–Ω–∫—Ü—ñ—î—é `loop` –≤–∏–∑–Ω–∞—á—Ç–µ —Ñ—É–Ω–∫—Ü—ñ—é –¥–ª—è –æ–±—Ä–æ–±–∫–∏ –∑–∞—Ö–æ–ø–ª–µ–Ω–æ–≥–æ –∞—É–¥—ñ–æ. –ù–∞—Ä–∞–∑—ñ –≤–æ–Ω–∞ –Ω—ñ—á–æ–≥–æ –Ω–µ —Ä–æ–±–∏—Ç—å, –∞–ª–µ –ø—ñ–∑–Ω—ñ—à–µ –≤ —Ü—å–æ–º—É —É—Ä–æ—Ü—ñ –≤–æ–Ω–∞ –±—É–¥–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏—Å—è –¥–ª—è –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è –º–æ–≤–ª–µ–Ω–Ω—è —É —Ç–µ–∫—Å—Ç:

    ```cpp
    void processAudio()
    {
    
    }
    ```

1. –î–æ–¥–∞–π—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω–µ –¥–æ —Ñ—É–Ω–∫—Ü—ñ—ó `loop`:

    ```cpp
    void loop()
    {
        if (digitalRead(WIO_KEY_C) == LOW && !mic.isRecording())
        {
            Serial.println("Starting recording...");
            mic.startRecording();
        }
    
        if (!mic.isRecording() && mic.isRecordingReady())
        {
            Serial.println("Finished recording");
    
            processAudio();
    
            mic.reset();
        }
    }
    ```

    –¶–µ–π –∫–æ–¥ –ø–µ—Ä–µ–≤—ñ—Ä—è—î –∫–Ω–æ–ø–∫—É C, —ñ —è–∫—â–æ –≤–æ–Ω–∞ –Ω–∞—Ç–∏—Å–Ω—É—Ç–∞ —ñ –∑–∞–ø–∏—Å —â–µ –Ω–µ —Ä–æ–∑–ø–æ—á–∞—Ç–æ, —Ç–æ –ø–æ–ª–µ `_isRecording` –∫–ª–∞—Å—É `Mic` –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î—Ç—å—Å—è —É true. –¶–µ –ø—Ä–∏–∑–≤–µ–¥–µ –¥–æ —Ç–æ–≥–æ, —â–æ –º–µ—Ç–æ–¥ `audioCallback` –∫–ª–∞—Å—É `Mic` –±—É–¥–µ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ –∞—É–¥—ñ–æ, –ø–æ–∫–∏ –Ω–µ –±—É–¥–µ –∑–∞—Ö–æ–ø–ª–µ–Ω–æ 4 —Å–µ–∫—É–Ω–¥–∏. –ü—ñ—Å–ª—è —Ç–æ–≥–æ, —è–∫ 4 —Å–µ–∫—É–Ω–¥–∏ –∞—É–¥—ñ–æ –±—É–ª–∏ –∑–∞—Ö–æ–ø–ª–µ–Ω—ñ, –ø–æ–ª–µ `_isRecording` –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î—Ç—å—Å—è —É false, –∞ –ø–æ–ª–µ `_isRecordingReady` –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î—Ç—å—Å—è —É true. –¶–µ –ø–æ—Ç—ñ–º –ø–µ—Ä–µ–≤—ñ—Ä—è—î—Ç—å—Å—è —É —Ñ—É–Ω–∫—Ü—ñ—ó `loop`, —ñ –∫–æ–ª–∏ –∑–Ω–∞—á–µ–Ω–Ω—è true, –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è —Ñ—É–Ω–∫—Ü—ñ—è `processAudio`, –∞ –ø–æ—Ç—ñ–º –∫–ª–∞—Å –º—ñ–∫—Ä–æ—Ñ–æ–Ω–∞ —Å–∫–∏–¥–∞—î—Ç—å—Å—è.

1. –ó–±–µ—Ä—ñ—Ç—å —Ü–µ–π –∫–æ–¥, –∑–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ –π–æ–≥–æ –Ω–∞ –≤–∞—à Wio Terminal —ñ –ø—Ä–æ—Ç–µ—Å—Ç—É–π—Ç–µ —á–µ—Ä–µ–∑ —Å–µ—Ä—ñ–π–Ω–∏–π –º–æ–Ω—ñ—Ç–æ—Ä. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –∫–Ω–æ–ø–∫—É C (—Ç—É, —â–æ –∑–ª—ñ–≤–∞, –Ω–∞–π–±–ª–∏–∂—á–µ –¥–æ –ø–µ—Ä–µ–º–∏–∫–∞—á–∞ –∂–∏–≤–ª–µ–Ω–Ω—è) —ñ –≥–æ–≤–æ—Ä—ñ—Ç—å. –ë—É–¥–µ –∑–∞—Ö–æ–ø–ª–µ–Ω–æ 4 —Å–µ–∫—É–Ω–¥–∏ –∞—É–¥—ñ–æ.

    ```output
    --- Available filters and text transformations: colorize, debug, default, direct, hexlify, log2file, nocontrol, printable, send_on_enter, time
    --- More details at http://bit.ly/pio-monitor-filters
    --- Miniterm on /dev/cu.usbmodem1101  9600,8,N,1 ---
    --- Quit: Ctrl+C | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H ---
    Ready.
    Starting recording...
    Finished recording
    ```
üíÅ –í–∏ –º–æ–∂–µ—Ç–µ –∑–Ω–∞–π—Ç–∏ —Ü–µ–π –∫–æ–¥ —É –ø–∞–ø—Ü—ñ [code-record/wio-terminal](../../../../../6-consumer/lessons/1-speech-recognition/code-record/wio-terminal).
–í–∞—à –¥–æ–¥–∞—Ç–æ–∫ –¥–ª—è –∑–∞–ø–∏—Å—É –∞—É–¥—ñ–æ —Å—Ç–∞–≤ —É—Å–ø—ñ—à–Ω–∏–º!

---

**–í—ñ–¥–º–æ–≤–∞ –≤—ñ–¥ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–æ—Å—Ç—ñ**:  
–¶–µ–π –¥–æ–∫—É–º–µ–Ω—Ç –±—É–≤ –ø–µ—Ä–µ–∫–ª–∞–¥–µ–Ω–∏–π –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é —Å–µ—Ä–≤—ñ—Å—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –ø–µ—Ä–µ–∫–ª–∞–¥—É [Co-op Translator](https://github.com/Azure/co-op-translator). –•–æ—á–∞ –º–∏ –ø—Ä–∞–≥–Ω–µ–º–æ –¥–æ —Ç–æ—á–Ω–æ—Å—Ç—ñ, –±—É–¥—å –ª–∞—Å–∫–∞, –º–∞–π—Ç–µ –Ω–∞ —É–≤–∞–∑—ñ, —â–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ –ø–µ—Ä–µ–∫–ª–∞–¥–∏ –º–æ–∂—É—Ç—å –º—ñ—Å—Ç–∏—Ç–∏ –ø–æ–º–∏–ª–∫–∏ –∞–±–æ –Ω–µ—Ç–æ—á–Ω–æ—Å—Ç—ñ. –û—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∏–π –¥–æ–∫—É–º–µ–Ω—Ç –Ω–∞ –π–æ–≥–æ —Ä—ñ–¥–Ω—ñ–π –º–æ–≤—ñ —Å–ª—ñ–¥ –≤–≤–∞–∂–∞—Ç–∏ –∞–≤—Ç–æ—Ä–∏—Ç–µ—Ç–Ω–∏–º –¥–∂–µ—Ä–µ–ª–æ–º. –î–ª—è –∫—Ä–∏—Ç–∏—á–Ω–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó —Ä–µ–∫–æ–º–µ–Ω–¥—É—î—Ç—å—Å—è –ø—Ä–æ—Ñ–µ—Å—ñ–π–Ω–∏–π –ª—é–¥—Å—å–∫–∏–π –ø–µ—Ä–µ–∫–ª–∞–¥. –ú–∏ –Ω–µ –Ω–µ—Å–µ–º–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–æ—Å—Ç—ñ –∑–∞ –±—É–¥—å-—è–∫—ñ –Ω–µ–ø–æ—Ä–æ–∑—É–º—ñ–Ω–Ω—è –∞–±–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ñ —Ç–ª—É–º–∞—á–µ–Ω–Ω—è, —â–æ –≤–∏–Ω–∏–∫–∞—é—Ç—å –≤–Ω–∞—Å–ª—ñ–¥–æ–∫ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ü—å–æ–≥–æ –ø–µ—Ä–µ–∫–ª–∞–¥—É.