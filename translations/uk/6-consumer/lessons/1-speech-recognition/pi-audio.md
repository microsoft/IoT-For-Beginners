<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "0ac0afcfb40cb5970ef4cb74f01c32e9",
  "translation_date": "2025-08-28T16:26:15+00:00",
  "source_file": "6-consumer/lessons/1-speech-recognition/pi-audio.md",
  "language_code": "uk"
}
-->
# –ó–∞—Ö–æ–ø–ª–µ–Ω–Ω—è –∞—É–¥—ñ–æ - Raspberry Pi

–£ —Ü—ñ–π —á–∞—Å—Ç–∏–Ω—ñ —É—Ä–æ–∫—É –≤–∏ –Ω–∞–ø–∏—à–µ—Ç–µ –∫–æ–¥ –¥–ª—è –∑–∞—Ö–æ–ø–ª–µ–Ω–Ω—è –∞—É–¥—ñ–æ –Ω–∞ –≤–∞—à–æ–º—É Raspberry Pi. –ó–∞—Ö–æ–ø–ª–µ–Ω–Ω—è –∞—É–¥—ñ–æ –±—É–¥–µ –∫–æ–Ω—Ç—Ä–æ–ª—é–≤–∞—Ç–∏—Å—è –∫–Ω–æ–ø–∫–æ—é.

## –ê–ø–∞—Ä–∞—Ç–Ω–µ –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è

Raspberry Pi –ø–æ—Ç—Ä–µ–±—É—î –∫–Ω–æ–ø–∫–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∑–∞—Ö–æ–ø–ª–µ–Ω–Ω—è–º –∞—É–¥—ñ–æ.

–ö–Ω–æ–ø–∫–∞, —è–∫—É –≤–∏ –±—É–¥–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏, ‚Äî —Ü–µ –∫–Ω–æ–ø–∫–∞ Grove. –¶–µ —Ü–∏—Ñ—Ä–æ–≤–∏–π –¥–∞—Ç—á–∏–∫, —è–∫–∏–π –≤–º–∏–∫–∞—î –∞–±–æ –≤–∏–º–∏–∫–∞—î —Å–∏–≥–Ω–∞–ª. –¶—ñ –∫–Ω–æ–ø–∫–∏ –º–æ–∂–Ω–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ —Ç–∞–∫, —â–æ–± –≤–æ–Ω–∏ –Ω–∞–¥—Å–∏–ª–∞–ª–∏ –≤–∏—Å–æ–∫–∏–π —Å–∏–≥–Ω–∞–ª, –∫–æ–ª–∏ –∫–Ω–æ–ø–∫–∞ –Ω–∞—Ç–∏—Å–Ω—É—Ç–∞, —ñ –Ω–∏–∑—å–∫–∏–π, –∫–æ–ª–∏ –Ω—ñ, –∞–±–æ –Ω–∏–∑—å–∫–∏–π, –∫–æ–ª–∏ –Ω–∞—Ç–∏—Å–Ω—É—Ç–∞, —ñ –≤–∏—Å–æ–∫–∏–π, –∫–æ–ª–∏ –Ω—ñ.

–Ø–∫—â–æ –≤–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ –º—ñ–∫—Ä–æ—Ñ–æ–Ω ReSpeaker 2-Mics Pi HAT, —Ç–æ –Ω–µ–º–∞—î –ø–æ—Ç—Ä–µ–±–∏ –ø—ñ–¥–∫–ª—é—á–∞—Ç–∏ –∫–Ω–æ–ø–∫—É, –æ—Å–∫—ñ–ª—å–∫–∏ —Ü—è –ø–ª–∞—Ç–∞ –≤–∂–µ –º–∞—î –≤–±—É–¥–æ–≤–∞–Ω—É –∫–Ω–æ–ø–∫—É. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ —Ä–æ–∑–¥—ñ–ª—É.

### –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –∫–Ω–æ–ø–∫–∏

–ö–Ω–æ–ø–∫—É –º–æ–∂–Ω–∞ –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏ –¥–æ –±–∞–∑–æ–≤–æ—ó –ø–ª–∞—Ç–∏ Grove.

#### –ó–∞–≤–¥–∞–Ω–Ω—è - –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏ –∫–Ω–æ–ø–∫—É

![–ö–Ω–æ–ø–∫–∞ Grove](../../../../../translated_images/grove-button.a70cfbb809a8563681003250cf5b06d68cdcc68624f9e2f493d5a534ae2da1e5.uk.png)

1. –í—Å—Ç–∞–≤—Ç–µ –æ–¥–∏–Ω –∫—ñ–Ω–µ—Ü—å –∫–∞–±–µ–ª—é Grove —É —Ä–æ–∑'—î–º –Ω–∞ –º–æ–¥—É–ª—ñ –∫–Ω–æ–ø–∫–∏. –í—ñ–Ω –≤—Å—Ç–∞–≤–ª—è—î—Ç—å—Å—è –ª–∏—à–µ –≤ –æ–¥–Ω–æ–º—É –Ω–∞–ø—Ä—è–º–∫—É.

1. –ó –≤–∏–º–∫–Ω–µ–Ω–∏–º Raspberry Pi –ø—ñ–¥–∫–ª—é—á—ñ—Ç—å —ñ–Ω—à–∏–π –∫—ñ–Ω–µ—Ü—å –∫–∞–±–µ–ª—é Grove –¥–æ —Ü–∏—Ñ—Ä–æ–≤–æ–≥–æ —Ä–æ–∑'—î–º—É, –ø–æ–∑–Ω–∞—á–µ–Ω–æ–≥–æ **D5**, –Ω–∞ –±–∞–∑–æ–≤—ñ–π –ø–ª–∞—Ç—ñ Grove, –ø—ñ–¥–∫–ª—é—á–µ–Ω—ñ–π –¥–æ Pi. –¶–µ–π —Ä–æ–∑'—î–º —î –¥—Ä—É–≥–∏–º –∑–ª—ñ–≤–∞ –≤ —Ä—è–¥—É —Ä–æ–∑'—î–º—ñ–≤ –ø–æ—Ä—É—á —ñ–∑ GPIO-–ø—ñ–Ω–∞–º–∏.

![–ö–Ω–æ–ø–∫–∞ Grove –ø—ñ–¥–∫–ª—é—á–µ–Ω–∞ –¥–æ —Ä–æ–∑'—î–º—É D5](../../../../../translated_images/pi-button.c7a1a4f55943341ce1baf1057658e9a205804d4131d258e820c93f951df0abf3.uk.png)

## –ó–∞—Ö–æ–ø–ª–µ–Ω–Ω—è –∞—É–¥—ñ–æ

–í–∏ –º–æ–∂–µ—Ç–µ –∑–∞—Ö–æ–ø–ª—é–≤–∞—Ç–∏ –∞—É–¥—ñ–æ –∑ –º—ñ–∫—Ä–æ—Ñ–æ–Ω–∞ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –∫–æ–¥—É –Ω–∞ Python.

### –ó–∞–≤–¥–∞–Ω–Ω—è - –∑–∞—Ö–æ–ø–∏—Ç–∏ –∞—É–¥—ñ–æ

1. –£–≤—ñ–º–∫–Ω—ñ—Ç—å Pi —ñ –¥–æ—á–µ–∫–∞–π—Ç–µ—Å—è –π–æ–≥–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è.

1. –ó–∞–ø—É—Å—Ç—ñ—Ç—å VS Code, –∞–±–æ –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ –Ω–∞ Pi, –∞–±–æ –ø—ñ–¥–∫–ª—é—á—ñ—Ç—å—Å—è —á–µ—Ä–µ–∑ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è Remote SSH.

1. –ü–∞–∫–µ—Ç PyAudio Pip –º–∞—î —Ñ—É–Ω–∫—Ü—ñ—ó –¥–ª—è –∑–∞–ø–∏—Å—É —Ç–∞ –≤—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è –∞—É–¥—ñ–æ. –¶–µ–π –ø–∞–∫–µ—Ç –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –¥–µ—è–∫–∏—Ö –∞—É–¥—ñ–æ-–±—ñ–±–ª—ñ–æ—Ç–µ–∫, —è–∫—ñ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ —Å–ø–æ—á–∞—Ç–∫—É. –í–∏–∫–æ–Ω–∞–π—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω—ñ –∫–æ–º–∞–Ω–¥–∏ –≤ —Ç–µ—Ä–º—ñ–Ω–∞–ª—ñ –¥–ª—è —ó—Ö –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è:

    ```sh
    sudo apt update
    sudo apt install libportaudio0 libportaudio2 libportaudiocpp0 portaudio19-dev libasound2-plugins --yes 
    ```

1. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –ø–∞–∫–µ—Ç PyAudio Pip.

    ```sh
    pip3 install pyaudio
    ```

1. –°—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤—É –ø–∞–ø–∫—É –ø—ñ–¥ –Ω–∞–∑–≤–æ—é `smart-timer` —ñ –¥–æ–¥–∞–π—Ç–µ —Ñ–∞–π–ª –ø—ñ–¥ –Ω–∞–∑–≤–æ—é `app.py` –¥–æ —Ü—ñ—î—ó –ø–∞–ø–∫–∏.

1. –î–æ–¥–∞–π—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω—ñ —ñ–º–ø–æ—Ä—Ç–∏ –Ω–∞ –ø–æ—á–∞—Ç–∫—É —Ü—å–æ–≥–æ —Ñ–∞–π–ª—É:

    ```python
    import io
    import pyaudio
    import time
    import wave
    
    from grove.factory import Factory
    ```

    –¶–µ —ñ–º–ø–æ—Ä—Ç—É—î –º–æ–¥—É–ª—å `pyaudio`, –¥–µ—è–∫—ñ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ñ –º–æ–¥—É–ª—ñ Python –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ wave-—Ñ–∞–π–ª–∞–º–∏, –∞ —Ç–∞–∫–æ–∂ –º–æ–¥—É–ª—å `grove.factory` –¥–ª—è —ñ–º–ø–æ—Ä—Ç—É `Factory` –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–ª–∞—Å—É –∫–Ω–æ–ø–∫–∏.

1. –ù–∏–∂—á–µ —Ü—å–æ–≥–æ –¥–æ–¥–∞–π—Ç–µ –∫–æ–¥ –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–Ω–æ–ø–∫–∏ Grove.

    –Ø–∫—â–æ –≤–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ ReSpeaker 2-Mics Pi HAT, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω–∏–π –∫–æ–¥:

    ```python
    # The button on the ReSpeaker 2-Mics Pi HAT
    button = Factory.getButton("GPIO-LOW", 17)
    ```

    –¶–µ —Å—Ç–≤–æ—Ä—é—î –∫–Ω–æ–ø–∫—É –Ω–∞ –ø–æ—Ä—Ç—É **D17**, –ø–æ—Ä—Ç—É, –¥–æ —è–∫–æ–≥–æ –ø—ñ–¥–∫–ª—é—á–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ –Ω–∞ ReSpeaker 2-Mics Pi HAT. –¶—è –∫–Ω–æ–ø–∫–∞ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∞ –Ω–∞ –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—è –Ω–∏–∑—å–∫–æ–≥–æ —Å–∏–≥–Ω–∞–ª—É –ø—Ä–∏ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—ñ.

    –Ø–∫—â–æ –≤–∏ –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ ReSpeaker 2-Mics Pi HAT, –∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ –∫–Ω–æ–ø–∫—É Grove, –ø—ñ–¥–∫–ª—é—á–µ–Ω—É –¥–æ –±–∞–∑–æ–≤–æ—ó –ø–ª–∞—Ç–∏, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —Ü–µ–π –∫–æ–¥:

    ```python
    button = Factory.getButton("GPIO-HIGH", 5)
    ```

    –¶–µ —Å—Ç–≤–æ—Ä—é—î –∫–Ω–æ–ø–∫—É –Ω–∞ –ø–æ—Ä—Ç—É **D5**, —è–∫–∞ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∞ –Ω–∞ –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—è –≤–∏—Å–æ–∫–æ–≥–æ —Å–∏–≥–Ω–∞–ª—É –ø—Ä–∏ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—ñ.

1. –ù–∏–∂—á–µ —Ü—å–æ–≥–æ —Å—Ç–≤–æ—Ä—ñ—Ç—å –µ–∫–∑–µ–º–ø–ª—è—Ä –∫–ª–∞—Å—É PyAudio –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –∞—É–¥—ñ–æ:

    ```python
    audio = pyaudio.PyAudio()
    ```

1. –í–∫–∞–∂—ñ—Ç—å –Ω–æ–º–µ—Ä –∞–ø–∞—Ä–∞—Ç–Ω–æ—ó –∫–∞—Ä—Ç–∏ –¥–ª—è –º—ñ–∫—Ä–æ—Ñ–æ–Ω–∞ —Ç–∞ –¥–∏–Ω–∞–º—ñ–∫–∞. –¶–µ –±—É–¥–µ –Ω–æ–º–µ—Ä –∫–∞—Ä—Ç–∏, —è–∫–∏–π –≤–∏ –∑–Ω–∞–π—à–ª–∏, –≤–∏–∫–æ–Ω–∞–≤—à–∏ `arecord -l` —ñ `aplay -l` —Ä–∞–Ω—ñ—à–µ –≤ —Ü—å–æ–º—É —É—Ä–æ—Ü—ñ.

    ```python
    microphone_card_number = <microphone card number>
    speaker_card_number = <speaker card number>
    ```

    –ó–∞–º—ñ–Ω—ñ—Ç—å `<microphone card number>` –Ω–∞ –Ω–æ–º–µ—Ä –∫–∞—Ä—Ç–∏ –≤–∞—à–æ–≥–æ –º—ñ–∫—Ä–æ—Ñ–æ–Ω–∞.

    –ó–∞–º—ñ–Ω—ñ—Ç—å `<speaker card number>` –Ω–∞ –Ω–æ–º–µ—Ä –∫–∞—Ä—Ç–∏ –≤–∞—à–æ–≥–æ –¥–∏–Ω–∞–º—ñ–∫–∞, —Ç–æ–π —Å–∞–º–∏–π –Ω–æ–º–µ—Ä, —è–∫–∏–π –≤–∏ –≤—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ —É —Ñ–∞–π–ª—ñ `alsa.conf`.

1. –ù–∏–∂—á–µ —Ü—å–æ–≥–æ –≤–∫–∞–∂—ñ—Ç—å —á–∞—Å—Ç–æ—Ç—É –≤–∏–±—ñ—Ä–∫–∏ –¥–ª—è –∑–∞—Ö–æ–ø–ª–µ–Ω–Ω—è —Ç–∞ –≤—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è –∞—É–¥—ñ–æ. –ú–æ–∂–ª–∏–≤–æ, –≤–∞–º –¥–æ–≤–µ–¥–µ—Ç—å—Å—è –∑–º—ñ–Ω–∏—Ç–∏ —Ü–µ –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –∞–ø–∞—Ä–∞—Ç–Ω–æ–≥–æ –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è, —è–∫–µ –≤–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ.

    ```python
    rate = 48000 #48KHz
    ```

    –Ø–∫—â–æ –≤–∏ –æ—Ç—Ä–∏–º–∞—î—Ç–µ –ø–æ–º–∏–ª–∫–∏ —á–∞—Å—Ç–æ—Ç–∏ –≤–∏–±—ñ—Ä–∫–∏ –ø—ñ–¥ —á–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —Ü—å–æ–≥–æ –∫–æ–¥—É, –∑–º—ñ–Ω—ñ—Ç—å —Ü–µ –∑–Ω–∞—á–µ–Ω–Ω—è –Ω–∞ `44100` –∞–±–æ `16000`. –ß–∏–º –≤–∏—â–µ –∑–Ω–∞—á–µ–Ω–Ω—è, —Ç–∏–º –∫—Ä–∞—â–∞ —è–∫—ñ—Å—Ç—å –∑–≤—É–∫—É.

1. –ù–∏–∂—á–µ —Ü—å–æ–≥–æ —Å—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤—É —Ñ—É–Ω–∫—Ü—ñ—é –ø—ñ–¥ –Ω–∞–∑–≤–æ—é `capture_audio`. –í–æ–Ω–∞ –±—É–¥–µ –≤–∏–∫–ª–∏–∫–∞—Ç–∏—Å—è –¥–ª—è –∑–∞—Ö–æ–ø–ª–µ–Ω–Ω—è –∞—É–¥—ñ–æ –∑ –º—ñ–∫—Ä–æ—Ñ–æ–Ω–∞:

    ```python
    def capture_audio():
    ```

1. –í—Å–µ—Ä–µ–¥–∏–Ω—ñ —Ü—ñ—î—ó —Ñ—É–Ω–∫—Ü—ñ—ó –¥–æ–¥–∞–π—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω–µ –¥–ª—è –∑–∞—Ö–æ–ø–ª–µ–Ω–Ω—è –∞—É–¥—ñ–æ:

    ```python
    stream = audio.open(format = pyaudio.paInt16,
                        rate = rate,
                        channels = 1, 
                        input_device_index = microphone_card_number,
                        input = True,
                        frames_per_buffer = 4096)

    frames = []

    while button.is_pressed():
        frames.append(stream.read(4096))

    stream.stop_stream()
    stream.close()
    ```

    –¶–µ–π –∫–æ–¥ –≤—ñ–¥–∫—Ä–∏–≤–∞—î –∞—É–¥—ñ–æ-–≤—Ö—ñ–¥–Ω–∏–π –ø–æ—Ç—ñ–∫ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –æ–±'—î–∫—Ç–∞ PyAudio. –¶–µ–π –ø–æ—Ç—ñ–∫ –±—É–¥–µ –∑–∞—Ö–æ–ø–ª—é–≤–∞—Ç–∏ –∞—É–¥—ñ–æ –∑ –º—ñ–∫—Ä–æ—Ñ–æ–Ω–∞ –Ω–∞ —á–∞—Å—Ç–æ—Ç—ñ 16 –∫–ì—Ü, –∑–∞—Ö–æ–ø–ª—é—é—á–∏ –π–æ–≥–æ –≤ –±—É—Ñ–µ—Ä–∏ —Ä–æ–∑–º—ñ—Ä–æ–º 4096 –±–∞–π—Ç.

    –ö–æ–¥ –ø–æ—Ç—ñ–º —Ü–∏–∫–ª—ñ—á–Ω–æ –ø—Ä–∞—Ü—é—î, –ø–æ–∫–∏ –∫–Ω–æ–ø–∫–∞ Grove –Ω–∞—Ç–∏—Å–Ω—É—Ç–∞, –∑—á–∏—Ç—É—é—á–∏ —Ü—ñ –±—É—Ñ–µ—Ä–∏ —Ä–æ–∑–º—ñ—Ä–æ–º 4096 –±–∞–π—Ç —É –º–∞—Å–∏–≤ –∫–æ–∂–Ω–æ–≥–æ —Ä–∞–∑—É.

    > üíÅ –í–∏ –º–æ–∂–µ—Ç–µ –¥—ñ–∑–Ω–∞—Ç–∏—Å—è –±—ñ–ª—å—à–µ –ø—Ä–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏, –ø–µ—Ä–µ–¥–∞–Ω—ñ –º–µ—Ç–æ–¥—É `open`, —É [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó PyAudio](https://people.csail.mit.edu/hubert/pyaudio/docs/).

    –ü—ñ—Å–ª—è —Ç–æ–≥–æ, —è–∫ –∫–Ω–æ–ø–∫–∞ –≤—ñ–¥–ø—É—â–µ–Ω–∞, –ø–æ—Ç—ñ–∫ –∑—É–ø–∏–Ω—è—î—Ç—å—Å—è —ñ –∑–∞–∫—Ä–∏–≤–∞—î—Ç—å—Å—è.

1. –î–æ–¥–∞–π—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω–µ –≤ –∫—ñ–Ω—Ü—ñ —Ü—ñ—î—ó —Ñ—É–Ω–∫—Ü—ñ—ó:

    ```python
    wav_buffer = io.BytesIO()
    with wave.open(wav_buffer, 'wb') as wavefile:
        wavefile.setnchannels(1)
        wavefile.setsampwidth(audio.get_sample_size(pyaudio.paInt16))
        wavefile.setframerate(rate)
        wavefile.writeframes(b''.join(frames))
        wav_buffer.seek(0)

    return wav_buffer
    ```

    –¶–µ–π –∫–æ–¥ —Å—Ç–≤–æ—Ä—é—î –¥–≤—ñ–π–∫–æ–≤–∏–π –±—É—Ñ–µ—Ä —ñ –∑–∞–ø–∏—Å—É—î –≤—Å–µ –∑–∞—Ö–æ–ø–ª–µ–Ω–µ –∞—É–¥—ñ–æ –≤ –Ω—å–æ–≥–æ —è–∫ [WAV-—Ñ–∞–π–ª](https://wikipedia.org/wiki/WAV). –¶–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π —Å–ø–æ—Å—ñ–± –∑–∞–ø–∏—Å—É –Ω–µ–∑–∂–∞—Ç–æ–≥–æ –∞—É–¥—ñ–æ —É —Ñ–∞–π–ª. –ü–æ—Ç—ñ–º —Ü–µ–π –±—É—Ñ–µ—Ä –ø–æ–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è.

1. –î–æ–¥–∞–π—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω—É —Ñ—É–Ω–∫—Ü—ñ—é `play_audio` –¥–ª—è –≤—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è –∞—É–¥—ñ–æ –∑ –±—É—Ñ–µ—Ä–∞:

    ```python
    def play_audio(buffer):
        stream = audio.open(format = pyaudio.paInt16,
                            rate = rate,
                            channels = 1,
                            output_device_index = speaker_card_number,
                            output = True)
    
        with wave.open(buffer, 'rb') as wf:
            data = wf.readframes(4096)
    
            while len(data) > 0:
                stream.write(data)
                data = wf.readframes(4096)
    
            stream.close()
    ```

    –¶—è —Ñ—É–Ω–∫—Ü—ñ—è –≤—ñ–¥–∫—Ä–∏–≤–∞—î —ñ–Ω—à–∏–π –∞—É–¥—ñ–æ-–ø–æ—Ç—ñ–∫, —Ü—å–æ–≥–æ —Ä–∞–∑—É –¥–ª—è –≤–∏–≤–æ–¥—É - –¥–ª—è –≤—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è –∞—É–¥—ñ–æ. –í–æ–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Ç—ñ –∂ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è, —â–æ –π –≤—Ö—ñ–¥–Ω–∏–π –ø–æ—Ç—ñ–∫. –ë—É—Ñ–µ—Ä –≤—ñ–¥–∫—Ä–∏–≤–∞—î—Ç—å—Å—è —è–∫ wave-—Ñ–∞–π–ª —ñ –∑–∞–ø–∏—Å—É—î—Ç—å—Å—è —É –≤–∏—Ö—ñ–¥–Ω–∏–π –ø–æ—Ç—ñ–∫ —à–º–∞—Ç–∫–∞–º–∏ –ø–æ 4096 –±–∞–π—Ç, –≤—ñ–¥—Ç–≤–æ—Ä—é—é—á–∏ –∞—É–¥—ñ–æ. –ü–æ—Ç—ñ–∫ –ø–æ—Ç—ñ–º –∑–∞–∫—Ä–∏–≤–∞—î—Ç—å—Å—è.

1. –î–æ–¥–∞–π—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω–∏–π –∫–æ–¥ –Ω–∏–∂—á–µ —Ñ—É–Ω–∫—Ü—ñ—ó `capture_audio`, —â–æ–± –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ —Ü–∏–∫–ª –¥–æ –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—è –∫–Ω–æ–ø–∫–∏. –ü—ñ—Å–ª—è –Ω–∞—Ç–∏—Å–∫–∞–Ω–Ω—è –∫–Ω–æ–ø–∫–∏ –∞—É–¥—ñ–æ –∑–∞—Ö–æ–ø–ª—é—î—Ç—å—Å—è, –∞ –ø–æ—Ç—ñ–º –≤—ñ–¥—Ç–≤–æ—Ä—é—î—Ç—å—Å—è.

    ```python
    while True:
        while not button.is_pressed():
            time.sleep(.1)
        
        buffer = capture_audio()
        play_audio(buffer)
    ```

1. –ó–∞–ø—É—Å—Ç—ñ—Ç—å –∫–æ–¥. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –∫–Ω–æ–ø–∫—É —ñ –≥–æ–≤–æ—Ä—ñ—Ç—å —É –º—ñ–∫—Ä–æ—Ñ–æ–Ω. –í—ñ–¥–ø—É—Å—Ç—ñ—Ç—å –∫–Ω–æ–ø–∫—É, –∫–æ–ª–∏ –∑–∞–∫—ñ–Ω—á–∏—Ç–µ, —ñ –≤–∏ –ø–æ—á—É—î—Ç–µ –∑–∞–ø–∏—Å.

    –í–∏ –º–æ–∂–µ—Ç–µ –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–µ—è–∫—ñ –ø–æ–º–∏–ª–∫–∏ ALSA –ø—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ –µ–∫–∑–µ–º–ø–ª—è—Ä–∞ PyAudio. –¶–µ –ø–æ–≤'—è–∑–∞–Ω–æ –∑ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—î—é –Ω–∞ Pi –¥–ª—è –∞—É–¥—ñ–æ-–ø—Ä–∏—Å—Ç—Ä–æ—ó–≤, —è–∫–∏—Ö —É –≤–∞—Å –Ω–µ–º–∞—î. –í–∏ –º–æ–∂–µ—Ç–µ —ñ–≥–Ω–æ—Ä—É–≤–∞—Ç–∏ —Ü—ñ –ø–æ–º–∏–ª–∫–∏.

    ```output
    pi@raspberrypi:~/smart-timer $ python3 app.py 
    ALSA lib pcm.c:2565:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.front
    ALSA lib pcm.c:2565:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.rear
    ALSA lib pcm.c:2565:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.center_lfe
    ALSA lib pcm.c:2565:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.side
    ```

    –Ø–∫—â–æ –≤–∏ –æ—Ç—Ä–∏–º–∞—î—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω—É –ø–æ–º–∏–ª–∫—É:

    ```output
    OSError: [Errno -9997] Invalid sample rate
    ```

    —Ç–æ–¥—ñ –∑–º—ñ–Ω—ñ—Ç—å `rate` –Ω–∞ 44100 –∞–±–æ 16000.

> üíÅ –í–∏ –º–æ–∂–µ—Ç–µ –∑–Ω–∞–π—Ç–∏ —Ü–µ–π –∫–æ–¥ —É –ø–∞–ø—Ü—ñ [code-record/pi](../../../../../6-consumer/lessons/1-speech-recognition/code-record/pi).

üòÄ –í–∞—à–∞ –ø—Ä–æ–≥—Ä–∞–º–∞ –¥–ª—è –∑–∞–ø–∏—Å—É –∞—É–¥—ñ–æ –±—É–ª–∞ —É—Å–ø—ñ—à–Ω–æ—é!

---

**–í—ñ–¥–º–æ–≤–∞ –≤—ñ–¥ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–æ—Å—Ç—ñ**:  
–¶–µ–π –¥–æ–∫—É–º–µ–Ω—Ç –±—É–≤ –ø–µ—Ä–µ–∫–ª–∞–¥–µ–Ω–∏–π –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é —Å–µ—Ä–≤—ñ—Å—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –ø–µ—Ä–µ–∫–ª–∞–¥—É [Co-op Translator](https://github.com/Azure/co-op-translator). –•–æ—á–∞ –º–∏ –ø—Ä–∞–≥–Ω–µ–º–æ –¥–æ —Ç–æ—á–Ω–æ—Å—Ç—ñ, –±—É–¥—å –ª–∞—Å–∫–∞, –º–∞–π—Ç–µ –Ω–∞ —É–≤–∞–∑—ñ, —â–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ –ø–µ—Ä–µ–∫–ª–∞–¥–∏ –º–æ–∂—É—Ç—å –º—ñ—Å—Ç–∏—Ç–∏ –ø–æ–º–∏–ª–∫–∏ –∞–±–æ –Ω–µ—Ç–æ—á–Ω–æ—Å—Ç—ñ. –û—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∏–π –¥–æ–∫—É–º–µ–Ω—Ç –Ω–∞ –π–æ–≥–æ —Ä—ñ–¥–Ω—ñ–π –º–æ–≤—ñ —Å–ª—ñ–¥ –≤–≤–∞–∂–∞—Ç–∏ –∞–≤—Ç–æ—Ä–∏—Ç–µ—Ç–Ω–∏–º –¥–∂–µ—Ä–µ–ª–æ–º. –î–ª—è –∫—Ä–∏—Ç–∏—á–Ω–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó —Ä–µ–∫–æ–º–µ–Ω–¥—É—î—Ç—å—Å—è –ø—Ä–æ—Ñ–µ—Å—ñ–π–Ω–∏–π –ª—é–¥—Å—å–∫–∏–π –ø–µ—Ä–µ–∫–ª–∞–¥. –ú–∏ –Ω–µ –Ω–µ—Å–µ–º–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–æ—Å—Ç—ñ –∑–∞ –±—É–¥—å-—è–∫—ñ –Ω–µ–ø–æ—Ä–æ–∑—É–º—ñ–Ω–Ω—è –∞–±–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ñ —Ç–ª—É–º–∞—á–µ–Ω–Ω—è, —â–æ –≤–∏–Ω–∏–∫–∞—é—Ç—å —É —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ü—å–æ–≥–æ –ø–µ—Ä–µ–∫–ª–∞–¥—É.