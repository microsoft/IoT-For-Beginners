<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "3ac42e284a7222c0e83d2d43231a364f",
  "translation_date": "2025-08-28T18:03:33+00:00",
  "source_file": "2-farm/lessons/4-migrate-your-plant-to-the-cloud/single-board-computer-connect-hub.md",
  "language_code": "uk"
}
-->
# –ü—ñ–¥–∫–ª—é—á—ñ—Ç—å –≤–∞—à IoT-–ø—Ä–∏—Å—Ç—Ä—ñ–π –¥–æ —Ö–º–∞—Ä–∏ - –í—ñ—Ä—Ç—É–∞–ª—å–Ω–µ IoT –æ–±–ª–∞–¥–Ω–∞–Ω–Ω—è —Ç–∞ Raspberry Pi

–£ —Ü—ñ–π —á–∞—Å—Ç–∏–Ω—ñ —É—Ä–æ–∫—É –≤–∏ –ø—ñ–¥–∫–ª—é—á–∏—Ç–µ –≤–∞—à –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–∏–π IoT-–ø—Ä–∏—Å—Ç—Ä—ñ–π –∞–±–æ Raspberry Pi –¥–æ IoT Hub, —â–æ–± –Ω–∞–¥—Å–∏–ª–∞—Ç–∏ —Ç–µ–ª–µ–º–µ—Ç—Ä—ñ—é —Ç–∞ –æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏ –∫–æ–º–∞–Ω–¥–∏.

## –ü—ñ–¥–∫–ª—é—á—ñ—Ç—å –≤–∞—à –ø—Ä–∏—Å—Ç—Ä—ñ–π –¥–æ IoT Hub

–ù–∞—Å—Ç—É–ø–Ω–∏–π –∫—Ä–æ–∫ ‚Äî –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏ –≤–∞—à –ø—Ä–∏—Å—Ç—Ä—ñ–π –¥–æ IoT Hub.

### –ó–∞–≤–¥–∞–Ω–Ω—è - –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ IoT Hub

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ –ø–∞–ø–∫—É `soil-moisture-sensor` —É VS Code. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–µ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ –∑–∞–ø—É—â–µ–Ω–µ –≤ —Ç–µ—Ä–º—ñ–Ω–∞–ª—ñ, —è–∫—â–æ –≤–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–∏–π IoT-–ø—Ä–∏—Å—Ç—Ä—ñ–π.

1. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∫—ñ–ª—å–∫–∞ –¥–æ–¥–∞—Ç–∫–æ–≤–∏—Ö –ø–∞–∫–µ—Ç—ñ–≤ Pip:

    ```sh
    pip3 install azure-iot-device
    ```

    `azure-iot-device` ‚Äî —Ü–µ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ –¥–ª—è –∑–≤‚Äô—è–∑–∫—É –∑ –≤–∞—à–∏–º IoT Hub.

1. –î–æ–¥–∞–π—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω—ñ —ñ–º–ø–æ—Ä—Ç–∏ –Ω–∞ –ø–æ—á–∞—Ç–æ–∫ —Ñ–∞–π–ª—É `app.py`, –Ω–∏–∂—á–µ —ñ—Å–Ω—É—é—á–∏—Ö —ñ–º–ø–æ—Ä—Ç—ñ–≤:

    ```python
    from azure.iot.device import IoTHubDeviceClient, Message, MethodResponse
    ```

    –¶–µ–π –∫–æ–¥ —ñ–º–ø–æ—Ä—Ç—É—î SDK –¥–ª—è –∑–≤‚Äô—è–∑–∫—É –∑ –≤–∞—à–∏–º IoT Hub.

1. –í–∏–¥–∞–ª—ñ—Ç—å —Ä—è–¥–æ–∫ `import paho.mqtt.client as mqtt`, –æ—Å–∫—ñ–ª—å–∫–∏ —Ü—è –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ –±—ñ–ª—å—à–µ –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–∞. –í–∏–¥–∞–ª—ñ—Ç—å –≤–µ—Å—å –∫–æ–¥ MQTT, –≤–∫–ª—é—á–∞—é—á–∏ –Ω–∞–∑–≤–∏ —Ç–µ–º, –≤–µ—Å—å –∫–æ–¥, —è–∫–∏–π –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î `mqtt_client`, —ñ `handle_command`. –ó–∞–ª–∏—à—Ç–µ —Ü–∏–∫–ª `while True:`, –ø—Ä–æ—Å—Ç–æ –≤–∏–¥–∞–ª—ñ—Ç—å —Ä—è–¥–æ–∫ `mqtt_client.publish` –∑ —Ü—å–æ–≥–æ —Ü–∏–∫–ª—É.

1. –î–æ–¥–∞–π—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω–∏–π –∫–æ–¥ –Ω–∏–∂—á–µ —ñ–º–ø–æ—Ä—Ç—ñ–≤:

    ```python
    connection_string = "<connection string>"
    ```

    –ó–∞–º—ñ–Ω—ñ—Ç—å `<connection string>` –Ω–∞ —Ä—è–¥–æ–∫ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è, —è–∫–∏–π –≤–∏ –æ—Ç—Ä–∏–º–∞–ª–∏ –¥–ª—è –ø—Ä–∏—Å—Ç—Ä–æ—é —Ä–∞–Ω—ñ—à–µ –≤ —Ü—å–æ–º—É —É—Ä–æ—Ü—ñ.

    > üíÅ –¶–µ –Ω–µ –Ω–∞–π–∫—Ä–∞—â–∞ –ø—Ä–∞–∫—Ç–∏–∫–∞. –†—è–¥–∫–∏ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –Ω—ñ–∫–æ–ª–∏ –Ω–µ —Å–ª—ñ–¥ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ –≤ –≤–∏—Ö—ñ–¥–Ω–æ–º—É –∫–æ–¥—ñ, –æ—Å–∫—ñ–ª—å–∫–∏ —ó—Ö –º–æ–∂–Ω–∞ –¥–æ–¥–∞—Ç–∏ –¥–æ —Å–∏—Å—Ç–µ–º–∏ –∫–æ–Ω—Ç—Ä–æ–ª—é –≤–µ—Ä—Å—ñ–π —ñ –∑–Ω–∞–π—Ç–∏ –±—É–¥—å-—Ö—Ç–æ. –ú–∏ —Ä–æ–±–∏–º–æ —Ü–µ —Ç—É—Ç –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç–∏. –Ü–¥–µ–∞–ª—å–Ω–æ –±—É–ª–æ –± –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —â–æ—Å—å –Ω–∞ –∫—à—Ç–∞–ª—Ç –∑–º—ñ–Ω–Ω–æ—ó —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ —Ç–∞ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, —è–∫ [`python-dotenv`](https://pypi.org/project/python-dotenv/). –í–∏ –¥—ñ–∑–Ω–∞—î—Ç–µ—Å—è –±—ñ–ª—å—à–µ –ø—Ä–æ —Ü–µ –≤ –Ω–∞—Å—Ç—É–ø–Ω–æ–º—É —É—Ä–æ—Ü—ñ.

1. –ù–∏–∂—á–µ —Ü—å–æ–≥–æ –∫–æ–¥—É –¥–æ–¥–∞–π—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω–µ, —â–æ–± —Å—Ç–≤–æ—Ä–∏—Ç–∏ –æ–±‚Äô—î–∫—Ç –∫–ª—ñ—î–Ω—Ç–∞ –ø—Ä–∏—Å—Ç—Ä–æ—é, —è–∫–∏–π –º–æ–∂–µ —Å–ø—ñ–ª–∫—É–≤–∞—Ç–∏—Å—è –∑ IoT Hub, —ñ –ø—ñ–¥–∫–ª—é—á—ñ—Ç—å –π–æ–≥–æ:

    ```python
    device_client = IoTHubDeviceClient.create_from_connection_string(connection_string)

    print('Connecting')
    device_client.connect()
    print('Connected')
    ```

1. –ó–∞–ø—É—Å—Ç—ñ—Ç—å —Ü–µ–π –∫–æ–¥. –í–∏ –ø–æ–±–∞—á–∏—Ç–µ, —è–∫ –≤–∞—à –ø—Ä–∏—Å—Ç—Ä—ñ–π –ø—ñ–¥–∫–ª—é—á–∞—î—Ç—å—Å—è.

    ```output
    pi@raspberrypi:~/soil-moisture-sensor $ python3 app.py 
    Connecting
    Connected
    Soil moisture: 379
    ```

## –ù–∞–¥—Å–∏–ª–∞–Ω–Ω—è —Ç–µ–ª–µ–º–µ—Ç—Ä—ñ—ó

–¢–µ–ø–µ—Ä, –∫–æ–ª–∏ –≤–∞—à –ø—Ä–∏—Å—Ç—Ä—ñ–π –ø—ñ–¥–∫–ª—é—á–µ–Ω–∏–π, –≤–∏ –º–æ–∂–µ—Ç–µ –Ω–∞–¥—Å–∏–ª–∞—Ç–∏ —Ç–µ–ª–µ–º–µ—Ç—Ä—ñ—é –¥–æ IoT Hub –∑–∞–º—ñ—Å—Ç—å –±—Ä–æ–∫–µ—Ä–∞ MQTT.

### –ó–∞–≤–¥–∞–Ω–Ω—è - –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—è —Ç–µ–ª–µ–º–µ—Ç—Ä—ñ—ó

1. –î–æ–¥–∞–π—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω–∏–π –∫–æ–¥ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ —Ü–∏–∫–ª—É `while True`, –ø—Ä—è–º–æ –ø–µ—Ä–µ–¥ `sleep`:

    ```python
    message = Message(json.dumps({ 'soil_moisture': soil_moisture }))
    device_client.send_message(message)
    ```

    –¶–µ–π –∫–æ–¥ —Å—Ç–≤–æ—Ä—é—î IoT Hub `Message`, —â–æ –º—ñ—Å—Ç–∏—Ç—å –ø–æ–∫–∞–∑–Ω–∏–∫ –≤–æ–ª–æ–≥–æ—Å—Ç—ñ “ë—Ä—É–Ω—Ç—É —É –≤–∏–≥–ª—è–¥—ñ JSON-—Ä—è–¥–∫–∞, –∞ –ø–æ—Ç—ñ–º –Ω–∞–¥—Å–∏–ª–∞—î –π–æ–≥–æ –¥–æ IoT Hub —è–∫ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤—ñ–¥ –ø—Ä–∏—Å—Ç—Ä–æ—é –¥–æ —Ö–º–∞—Ä–∏.

## –û–±—Ä–æ–±–∫–∞ –∫–æ–º–∞–Ω–¥

–í–∞—à –ø—Ä–∏—Å—Ç—Ä—ñ–π –º–∞—î –æ–±—Ä–æ–±–ª—è—Ç–∏ –∫–æ–º–∞–Ω–¥—É –≤—ñ–¥ —Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ –∫–æ–¥—É –¥–ª—è –∫–µ—Ä—É–≤–∞–Ω–Ω—è —Ä–µ–ª–µ. –¶–µ –Ω–∞–¥—Å–∏–ª–∞—î—Ç—å—Å—è —è–∫ –∑–∞–ø–∏—Ç –ø—Ä—è–º–æ–≥–æ –º–µ—Ç–æ–¥—É.

## –ó–∞–≤–¥–∞–Ω–Ω—è - –æ–±—Ä–æ–±–∫–∞ –∑–∞–ø–∏—Ç—É –ø—Ä—è–º–æ–≥–æ –º–µ—Ç–æ–¥—É

1. –î–æ–¥–∞–π—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω–∏–π –∫–æ–¥ –ø–µ—Ä–µ–¥ —Ü–∏–∫–ª–æ–º `while True`:

    ```python
    def handle_method_request(request):
        print("Direct method received - ", request.name)
    
        if request.name == "relay_on":
            relay.on()
        elif request.name == "relay_off":
            relay.off()    
    ```

    –¶–µ –≤–∏–∑–Ω–∞—á–∞—î –º–µ—Ç–æ–¥ `handle_method_request`, —è–∫–∏–π –±—É–¥–µ –≤–∏–∫–ª–∏–∫–∞–Ω–∏–π, –∫–æ–ª–∏ IoT Hub –≤–∏–∫–ª–∏–∫–∞—î –ø—Ä—è–º–∏–π –º–µ—Ç–æ–¥. –ö–æ–∂–µ–Ω –ø—Ä—è–º–∏–π –º–µ—Ç–æ–¥ –º–∞—î –Ω–∞–∑–≤—É, —ñ —Ü–µ–π –∫–æ–¥ –æ—á—ñ–∫—É—î –º–µ—Ç–æ–¥–∏ –∑ –Ω–∞–∑–≤–æ—é `relay_on` –¥–ª—è —É–≤—ñ–º–∫–Ω–µ–Ω–Ω—è —Ä–µ–ª–µ —Ç–∞ `relay_off` –¥–ª—è –≤–∏–º–∫–Ω–µ–Ω–Ω—è —Ä–µ–ª–µ.

    > üíÅ –¶–µ —Ç–∞–∫–æ–∂ –º–æ–∂–Ω–∞ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –≤ –æ–¥–Ω–æ–º—É –∑–∞–ø–∏—Ç—ñ –ø—Ä—è–º–æ–≥–æ –º–µ—Ç–æ–¥—É, –ø–µ—Ä–µ–¥–∞—é—á–∏ –±–∞–∂–∞–Ω–∏–π —Å—Ç–∞–Ω —Ä–µ–ª–µ –≤ –∫–æ—Ä–∏—Å–Ω–æ–º—É –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ, —è–∫–µ –º–æ–∂–Ω–∞ –ø–µ—Ä–µ–¥–∞—Ç–∏ –∑ –∑–∞–ø–∏—Ç–æ–º –º–µ—Ç–æ–¥—É —Ç–∞ –æ—Ç—Ä–∏–º–∞—Ç–∏ –∑ –æ–±‚Äô—î–∫—Ç–∞ `request`.

1. –ü—Ä—è–º—ñ –º–µ—Ç–æ–¥–∏ –≤–∏–º–∞–≥–∞—é—Ç—å –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ, —â–æ–± –ø–æ–≤—ñ–¥–æ–º–∏—Ç–∏ –≤–∏–∫–ª–∏–∫–∞—é—á–∏–π –∫–æ–¥, —â–æ –≤–æ–Ω–∏ –±—É–ª–∏ –æ–±—Ä–æ–±–ª–µ–Ω—ñ. –î–æ–¥–∞–π—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω–∏–π –∫–æ–¥ –≤ –∫—ñ–Ω—Ü—ñ —Ñ—É–Ω–∫—Ü—ñ—ó `handle_method_request`, —â–æ–± —Å—Ç–≤–æ—Ä–∏—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—å –Ω–∞ –∑–∞–ø–∏—Ç:

    ```python
    method_response = MethodResponse.create_from_method_request(request, 200)
    device_client.send_method_response(method_response)
    ```

    –¶–µ–π –∫–æ–¥ –Ω–∞–¥—Å–∏–ª–∞—î –≤—ñ–¥–ø–æ–≤—ñ–¥—å –Ω–∞ –∑–∞–ø–∏—Ç –ø—Ä—è–º–æ–≥–æ –º–µ—Ç–æ–¥—É –∑ HTTP-—Å—Ç–∞—Ç—É—Å–æ–º 200 —ñ –ø–æ–≤–µ—Ä—Ç–∞—î —ó—ó –¥–æ IoT Hub.

1. –î–æ–¥–∞–π—Ç–µ –Ω–∞—Å—Ç—É–ø–Ω–∏–π –∫–æ–¥ –Ω–∏–∂—á–µ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Ü—ñ—î—ó —Ñ—É–Ω–∫—Ü—ñ—ó:

    ```python
    device_client.on_method_request_received = handle_method_request
    ```

    –¶–µ–π –∫–æ–¥ –ø–æ–≤—ñ–¥–æ–º–ª—è—î –∫–ª—ñ—î–Ω—Ç—É IoT Hub –≤–∏–∫–ª–∏–∫–∞—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ—é `handle_method_request`, –∫–æ–ª–∏ –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è –ø—Ä—è–º–∏–π –º–µ—Ç–æ–¥.

> üíÅ –í–∏ –º–æ–∂–µ—Ç–µ –∑–Ω–∞–π—Ç–∏ —Ü–µ–π –∫–æ–¥ —É –ø–∞–ø—Ü—ñ [code/pi](../../../../../2-farm/lessons/4-migrate-your-plant-to-the-cloud/code/pi) –∞–±–æ [code/virtual-device](../../../../../2-farm/lessons/4-migrate-your-plant-to-the-cloud/code/virtual-device).

üòÄ –í–∞—à–∞ –ø—Ä–æ–≥—Ä–∞–º–∞ –¥–∞—Ç—á–∏–∫–∞ –≤–æ–ª–æ–≥–æ—Å—Ç—ñ “ë—Ä—É–Ω—Ç—É –ø—ñ–¥–∫–ª—é—á–µ–Ω–∞ –¥–æ –≤–∞—à–æ–≥–æ IoT Hub!

---

**–í—ñ–¥–º–æ–≤–∞ –≤—ñ–¥ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–æ—Å—Ç—ñ**:  
–¶–µ–π –¥–æ–∫—É–º–µ–Ω—Ç –±—É–ª–æ –ø–µ—Ä–µ–∫–ª–∞–¥–µ–Ω–æ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é —Å–µ—Ä–≤—ñ—Å—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–≥–æ –ø–µ—Ä–µ–∫–ª–∞–¥—É [Co-op Translator](https://github.com/Azure/co-op-translator). –•–æ—á–∞ –º–∏ –ø—Ä–∞–≥–Ω–µ–º–æ –¥–æ —Ç–æ—á–Ω–æ—Å—Ç—ñ, –±—É–¥—å –ª–∞—Å–∫–∞, –º–∞–π—Ç–µ –Ω–∞ —É–≤–∞–∑—ñ, —â–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ –ø–µ—Ä–µ–∫–ª–∞–¥–∏ –º–æ–∂—É—Ç—å –º—ñ—Å—Ç–∏—Ç–∏ –ø–æ–º–∏–ª–∫–∏ –∞–±–æ –Ω–µ—Ç–æ—á–Ω–æ—Å—Ç—ñ. –û—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∏–π –¥–æ–∫—É–º–µ–Ω—Ç –Ω–∞ –π–æ–≥–æ —Ä—ñ–¥–Ω—ñ–π –º–æ–≤—ñ —Å–ª—ñ–¥ –≤–≤–∞–∂–∞—Ç–∏ –∞–≤—Ç–æ—Ä–∏—Ç–µ—Ç–Ω–∏–º –¥–∂–µ—Ä–µ–ª–æ–º. –î–ª—è –∫—Ä–∏—Ç–∏—á–Ω–æ –≤–∞–∂–ª–∏–≤–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó —Ä–µ–∫–æ–º–µ–Ω–¥—É—î—Ç—å—Å—è –ø—Ä–æ—Ñ–µ—Å—ñ–π–Ω–∏–π –ª—é–¥—Å—å–∫–∏–π –ø–µ—Ä–µ–∫–ª–∞–¥. –ú–∏ –Ω–µ –Ω–µ—Å–µ–º–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–æ—Å—Ç—ñ –∑–∞ –±—É–¥—å-—è–∫—ñ –Ω–µ–ø–æ—Ä–æ–∑—É–º—ñ–Ω–Ω—è –∞–±–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ñ —Ç–ª—É–º–∞—á–µ–Ω–Ω—è, —â–æ –≤–∏–Ω–∏–∫–∞—é—Ç—å —É —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ü—å–æ–≥–æ –ø–µ—Ä–µ–∫–ª–∞–¥—É.