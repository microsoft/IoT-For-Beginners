<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "52b4de6144b2efdced7797a5339d6035",
  "translation_date": "2025-08-28T03:35:50+00:00",
  "source_file": "1-getting-started/lessons/1-introduction-to-iot/virtual-device.md",
  "language_code": "br"
}
-->
# Computador de placa √∫nica virtual

Em vez de comprar um dispositivo IoT, junto com sensores e atuadores, voc√™ pode usar seu computador para simular hardware IoT. O [projeto CounterFit](https://github.com/CounterFit-IoT/CounterFit) permite que voc√™ execute um aplicativo localmente que simula hardware IoT, como sensores e atuadores, e acesse esses sensores e atuadores a partir de c√≥digo Python local, escrito da mesma forma que voc√™ faria em um Raspberry Pi usando hardware f√≠sico.

## Configura√ß√£o

Para usar o CounterFit, voc√™ precisar√° instalar alguns softwares gratuitos no seu computador.

### Tarefa

Instale o software necess√°rio.

1. Instale o Python. Consulte a [p√°gina de downloads do Python](https://www.python.org/downloads/) para instru√ß√µes sobre como instalar a vers√£o mais recente do Python.

1. Instale o Visual Studio Code (VS Code). Este ser√° o editor que voc√™ usar√° para escrever o c√≥digo do dispositivo virtual em Python. Consulte a [documenta√ß√£o do VS Code](https://code.visualstudio.com?WT.mc_id=academic-17441-jabenn) para instru√ß√µes sobre como instalar o VS Code.

    > üíÅ Voc√™ est√° livre para usar qualquer IDE ou editor de Python para estas li√ß√µes, caso tenha uma ferramenta preferida, mas as li√ß√µes fornecer√£o instru√ß√µes baseadas no uso do VS Code.

1. Instale a extens√£o Pylance do VS Code. Esta √© uma extens√£o para o VS Code que oferece suporte √† linguagem Python. Consulte a [documenta√ß√£o da extens√£o Pylance](https://marketplace.visualstudio.com/items?WT.mc_id=academic-17441-jabenn&itemName=ms-python.vscode-pylance) para instru√ß√µes sobre como instalar esta extens√£o no VS Code.

As instru√ß√µes para instalar e configurar o aplicativo CounterFit ser√£o fornecidas no momento relevante nas instru√ß√µes da tarefa, pois ele √© instalado por projeto.

## Ol√° Mundo

√â tradicional, ao come√ßar com uma nova linguagem de programa√ß√£o ou tecnologia, criar um aplicativo 'Ol√° Mundo' - um pequeno aplicativo que exibe algo como o texto `"Ol√° Mundo"` para mostrar que todas as ferramentas est√£o configuradas corretamente.

O aplicativo Ol√° Mundo para o hardware IoT virtual garantir√° que voc√™ tenha o Python e o Visual Studio Code instalados corretamente. Ele tamb√©m se conectar√° ao CounterFit para os sensores e atuadores IoT virtuais. N√£o usar√° nenhum hardware, apenas se conectar√° para provar que tudo est√° funcionando.

Este aplicativo estar√° em uma pasta chamada `nightlight`, e ser√° reutilizado com diferentes c√≥digos em partes posteriores desta tarefa para construir o aplicativo de luz noturna.

### Configurar um ambiente virtual Python

Uma das caracter√≠sticas poderosas do Python √© a capacidade de instalar [pacotes Pip](https://pypi.org) - pacotes de c√≥digo escritos por outras pessoas e publicados na Internet. Voc√™ pode instalar um pacote Pip no seu computador com um √∫nico comando e, em seguida, usar esse pacote no seu c√≥digo. Voc√™ usar√° o Pip para instalar um pacote que se comunica com o CounterFit.

Por padr√£o, quando voc√™ instala um pacote, ele fica dispon√≠vel em todo o seu computador, e isso pode levar a problemas com vers√µes de pacotes - como um aplicativo depender de uma vers√£o de um pacote que quebra quando voc√™ instala uma nova vers√£o para outro aplicativo. Para contornar esse problema, voc√™ pode usar um [ambiente virtual Python](https://docs.python.org/3/library/venv.html), essencialmente uma c√≥pia do Python em uma pasta dedicada, e quando voc√™ instala pacotes Pip, eles s√£o instalados apenas nessa pasta.

> üíÅ Se voc√™ estiver usando um Raspberry Pi, ent√£o n√£o configurou um ambiente virtual nesse dispositivo para gerenciar pacotes Pip, em vez disso, est√° usando pacotes globais, j√° que os pacotes Grove s√£o instalados globalmente pelo script de instala√ß√£o.

#### Tarefa - configurar um ambiente virtual Python

Configure um ambiente virtual Python e instale os pacotes Pip para o CounterFit.

1. No seu terminal ou linha de comando, execute o seguinte em um local de sua escolha para criar e navegar at√© um novo diret√≥rio:

    ```sh
    mkdir nightlight
    cd nightlight
    ```

1. Agora execute o seguinte para criar um ambiente virtual na pasta `.venv`:

    ```sh
    python3 -m venv .venv
    ```

    > üíÅ Voc√™ precisa chamar explicitamente `python3` para criar o ambiente virtual, caso tenha o Python 2 instalado al√©m do Python 3 (a vers√£o mais recente). Se voc√™ tiver o Python 2 instalado, chamar `python` usar√° o Python 2 em vez do Python 3.

1. Ative o ambiente virtual:

    * No Windows:
        * Se estiver usando o Prompt de Comando ou o Prompt de Comando pelo Windows Terminal, execute:

            ```cmd
            .venv\Scripts\activate.bat
            ```

        * Se estiver usando o PowerShell, execute:

            ```powershell
            .\.venv\Scripts\Activate.ps1
            ```

            > Se voc√™ receber um erro sobre scripts n√£o poderem ser executados neste sistema, ser√° necess√°rio habilitar a execu√ß√£o de scripts configurando uma pol√≠tica de execu√ß√£o apropriada. Voc√™ pode fazer isso iniciando o PowerShell como administrador e executando o seguinte comando:

            ```powershell
            Set-ExecutionPolicy -ExecutionPolicy Unrestricted
            ```

            Digite `Y` quando solicitado a confirmar. Em seguida, reinicie o PowerShell e tente novamente.

            Voc√™ pode redefinir essa pol√≠tica de execu√ß√£o posteriormente, se necess√°rio. Voc√™ pode ler mais sobre isso na [p√°gina de Pol√≠ticas de Execu√ß√£o na documenta√ß√£o da Microsoft](https://docs.microsoft.com/powershell/module/microsoft.powershell.core/about/about_execution_policies?WT.mc_id=academic-17441-jabenn).

    * No macOS ou Linux, execute:

        ```cmd
        source ./.venv/bin/activate
        ```

    > üíÅ Esses comandos devem ser executados no mesmo local onde voc√™ executou o comando para criar o ambiente virtual. Voc√™ nunca precisar√° navegar para dentro da pasta `.venv`, sempre deve executar o comando de ativa√ß√£o e quaisquer comandos para instalar pacotes ou executar c√≥digo a partir da pasta onde estava ao criar o ambiente virtual.

1. Uma vez que o ambiente virtual foi ativado, o comando padr√£o `python` executar√° a vers√£o do Python que foi usada para criar o ambiente virtual. Execute o seguinte para obter a vers√£o:

    ```sh
    python --version
    ```

    A sa√≠da deve conter o seguinte:

    ```output
    (.venv) ‚ûú  nightlight python --version
    Python 3.9.1
    ```

    > üíÅ Sua vers√£o do Python pode ser diferente - desde que seja a vers√£o 3.6 ou superior, est√° tudo certo. Caso contr√°rio, exclua esta pasta, instale uma vers√£o mais recente do Python e tente novamente.

1. Execute os seguintes comandos para instalar os pacotes Pip para o CounterFit. Esses pacotes incluem o aplicativo principal do CounterFit, bem como shims para hardware Grove. Esses shims permitem que voc√™ escreva c√≥digo como se estivesse programando usando sensores e atuadores f√≠sicos do ecossistema Grove, mas conectados a dispositivos IoT virtuais.

    ```sh
    pip install CounterFit
    pip install counterfit-connection
    pip install counterfit-shims-grove
    ```

    Esses pacotes Pip ser√£o instalados apenas no ambiente virtual e n√£o estar√£o dispon√≠veis fora dele.

### Escreva o c√≥digo

Depois que o ambiente virtual Python estiver pronto, voc√™ pode escrever o c√≥digo para o aplicativo 'Ol√° Mundo'.

#### Tarefa - escreva o c√≥digo

Crie um aplicativo Python para imprimir `"Ol√° Mundo"` no console.

1. No seu terminal ou linha de comando, execute o seguinte dentro do ambiente virtual para criar um arquivo Python chamado `app.py`:

    * No Windows, execute:

        ```cmd
        type nul > app.py
        ```

    * No macOS ou Linux, execute:

        ```cmd
        touch app.py
        ```

1. Abra a pasta atual no VS Code:

    ```sh
    code .
    ```

    > üíÅ Se o seu terminal retornar `command not found` no macOS, significa que o VS Code n√£o foi adicionado ao seu PATH. Voc√™ pode adicionar o VS Code ao seu PATH seguindo as instru√ß√µes na [se√ß√£o de Lan√ßamento pela linha de comando da documenta√ß√£o do VS Code](https://code.visualstudio.com/docs/setup/mac?WT.mc_id=academic-17441-jabenn#_launching-from-the-command-line) e executar o comando novamente. O VS Code √© adicionado ao PATH por padr√£o no Windows e Linux.

1. Quando o VS Code for iniciado, ele ativar√° o ambiente virtual Python. O ambiente virtual selecionado aparecer√° na barra de status inferior:

    ![VS Code mostrando o ambiente virtual selecionado](../../../../../translated_images/vscode-virtual-env.8ba42e04c3d533cf677e16cbe5ed9a3b80f62c6964472dc84b6f940800f0909f.br.png)

1. Se o Terminal do VS Code j√° estiver em execu√ß√£o quando o VS Code for iniciado, ele n√£o ter√° o ambiente virtual ativado. A maneira mais f√°cil de resolver isso √© encerrar o terminal usando o bot√£o **Kill the active terminal instance**:

    ![Bot√£o do VS Code para encerrar a inst√¢ncia ativa do terminal](../../../../../translated_images/vscode-kill-terminal.1cc4de7c6f25ee08f423f0ead714e61d069fac1eb2089e97b8a7bbcb3d45fe5e.br.png)

    Voc√™ pode verificar se o terminal tem o ambiente virtual ativado, pois o nome do ambiente virtual ser√° um prefixo no prompt do terminal. Por exemplo, pode ser:

    ```sh
    (.venv) ‚ûú  nightlight
    ```

    Se voc√™ n√£o tiver `.venv` como prefixo no prompt, o ambiente virtual n√£o est√° ativo no terminal.

1. Inicie um novo terminal do VS Code selecionando *Terminal -> New Terminal*, ou pressionando `` CTRL+` ``. O novo terminal carregar√° o ambiente virtual, e a chamada para ativ√°-lo aparecer√° no terminal. O prompt tamb√©m ter√° o nome do ambiente virtual (`.venv`):

    ```output
    ‚ûú  nightlight source .venv/bin/activate
    (.venv) ‚ûú  nightlight 
    ```

1. Abra o arquivo `app.py` no explorador do VS Code e adicione o seguinte c√≥digo:

    ```python
    print('Hello World!')
    ```

    A fun√ß√£o `print` imprime o que for passado para ela no console.

1. No terminal do VS Code, execute o seguinte para rodar seu aplicativo Python:

    ```sh
    python app.py
    ```

    A seguinte sa√≠da aparecer√°:

    ```output
    (.venv) ‚ûú  nightlight python app.py 
    Hello World!
    ```

üòÄ Seu programa 'Ol√° Mundo' foi um sucesso!

### Conecte o 'hardware'

Como um segundo passo do 'Ol√° Mundo', voc√™ executar√° o aplicativo CounterFit e conectar√° seu c√≥digo a ele. Este √© o equivalente virtual de conectar algum hardware IoT a um kit de desenvolvimento.

#### Tarefa - conecte o 'hardware'

1. No terminal do VS Code, inicie o aplicativo CounterFit com o seguinte comando:

    ```sh
    counterfit
    ```

    O aplicativo come√ßar√° a ser executado e abrir√° no seu navegador:

    ![O aplicativo CounterFit rodando em um navegador](../../../../../translated_images/counterfit-first-run.433326358b669b31d0e99c3513cb01bfbb13724d162c99cdcc8f51ecf5f9c779.br.png)

    Ele ser√° marcado como *Disconnected*, com o LED no canto superior direito apagado.

1. Adicione o seguinte c√≥digo ao topo do arquivo `app.py`:

    ```python
    from counterfit_connection import CounterFitConnection
    CounterFitConnection.init('127.0.0.1', 5000)
    ```

    Este c√≥digo importa a classe `CounterFitConnection` do m√≥dulo `counterfit_connection`, que vem do pacote pip `counterfit-connection` instalado anteriormente. Em seguida, inicializa uma conex√£o com o aplicativo CounterFit rodando em `127.0.0.1`, que √© um endere√ßo IP que voc√™ pode sempre usar para acessar seu computador local (frequentemente chamado de *localhost*), na porta 5000.

    > üíÅ Se voc√™ tiver outros aplicativos rodando na porta 5000, pode alterar isso atualizando a porta no c√≥digo e executando o CounterFit usando `CounterFit --port <port_number>`, substituindo `<port_number>` pela porta que deseja usar.

1. Voc√™ precisar√° iniciar um novo terminal do VS Code selecionando o bot√£o **Create a new integrated terminal**. Isso porque o aplicativo CounterFit est√° rodando no terminal atual.

    ![Bot√£o do VS Code para criar um novo terminal integrado](../../../../../translated_images/vscode-new-terminal.77db8fc0f9cd31824b0e49a201beafe4ae4616d6c7339992cb2819e789b3eff9.br.png)

1. No novo terminal, execute o arquivo `app.py` como antes. O status do CounterFit mudar√° para **Connected** e o LED acender√°.

    ![CounterFit mostrando como conectado](../../../../../translated_images/counterfit-connected.ed30b46d8f79b0921f3fc70be10366e596a89dca3f80c2224a9d9fc98fccf884.br.png)

> üíÅ Voc√™ pode encontrar este c√≥digo na pasta [code/virtual-device](../../../../../1-getting-started/lessons/1-introduction-to-iot/code/virtual-device).

üòÄ Sua conex√£o com o hardware foi um sucesso!

---

**Aviso Legal**:  
Este documento foi traduzido utilizando o servi√ßo de tradu√ß√£o por IA [Co-op Translator](https://github.com/Azure/co-op-translator). Embora nos esforcemos para garantir a precis√£o, esteja ciente de que tradu√ß√µes automatizadas podem conter erros ou imprecis√µes. O documento original em seu idioma nativo deve ser considerado a fonte autoritativa. Para informa√ß√µes cr√≠ticas, recomenda-se a tradu√ß√£o profissional realizada por humanos. N√£o nos responsabilizamos por quaisquer mal-entendidos ou interpreta√ß√µes equivocadas decorrentes do uso desta tradu√ß√£o.