<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "4efc74299e19f5d08f2f3f34451a11ba",
  "translation_date": "2025-08-26T22:16:22+00:00",
  "source_file": "2-farm/lessons/1-predict-plant-growth/single-board-computer-temp-publish.md",
  "language_code": "mo"
}
-->
# ç™¼ä½ˆæº«åº¦ - è™›æ“¬ç‰©è¯ç¶²ç¡¬é«”èˆ‡æ¨¹è“æ´¾

åœ¨æœ¬èª²ç¨‹ä¸­ï¼Œæ‚¨å°‡é€é MQTT ç™¼ä½ˆç”±æ¨¹è“æ´¾æˆ–è™›æ“¬ç‰©è¯ç¶²è¨­å‚™æª¢æ¸¬åˆ°çš„æº«åº¦å€¼ï¼Œä»¥ä¾¿ç¨å¾Œç”¨æ–¼è¨ˆç®— GDDã€‚

## ç™¼ä½ˆæº«åº¦

ä¸€æ—¦è®€å–åˆ°æº«åº¦å€¼ï¼Œå°±å¯ä»¥é€é MQTT ç™¼ä½ˆåˆ°æŸäº›ã€Œä¼ºæœå™¨ã€ä»£ç¢¼ï¼Œè©²ä»£ç¢¼å°‡è®€å–é€™äº›å€¼ä¸¦å­˜å„²å®ƒå€‘ï¼Œä»¥ä¾¿ç”¨æ–¼ GDD è¨ˆç®—ã€‚

### ä»»å‹™ - ç™¼ä½ˆæº«åº¦

ç·¨ç¨‹è¨­å‚™ä»¥ç™¼ä½ˆæº«åº¦æ•¸æ“šã€‚

1. å¦‚æœå°šæœªæ‰“é–‹ï¼Œè«‹æ‰“é–‹ `temperature-sensor` æ‡‰ç”¨ç¨‹å¼å°ˆæ¡ˆã€‚

1. é‡è¤‡æ‚¨åœ¨ç¬¬ 4 èª²ä¸­æ‰€åšçš„æ­¥é©Ÿä»¥é€£æ¥åˆ° MQTT ä¸¦ç™¼é€é™æ¸¬æ•¸æ“šï¼Œæ‚¨å°‡ä½¿ç”¨ç›¸åŒçš„å…¬å…± Mosquitto brokerã€‚

    é€™äº›æ­¥é©ŸåŒ…æ‹¬ï¼š

    - æ·»åŠ  MQTT pip å¥—ä»¶
    - æ·»åŠ é€£æ¥åˆ° MQTT broker çš„ä»£ç¢¼
    - æ·»åŠ ç™¼ä½ˆé™æ¸¬æ•¸æ“šçš„ä»£ç¢¼

    > âš ï¸ å¦‚æœ‰éœ€è¦ï¼Œè«‹åƒè€ƒ [é€£æ¥åˆ° MQTT çš„æŒ‡å°](../../../1-getting-started/lessons/4-connect-internet/single-board-computer-mqtt.md) å’Œ [ç™¼é€é™æ¸¬æ•¸æ“šçš„æŒ‡å°](../../../1-getting-started/lessons/4-connect-internet/single-board-computer-telemetry.md)ï¼ˆç¬¬ 4 èª²ï¼‰ã€‚

1. ç¢ºä¿ `client_name` åæ˜ æ­¤å°ˆæ¡ˆçš„åç¨±ï¼š

    ```python
    client_name = id + 'temperature_sensor_client'
    ```

1. å°æ–¼é™æ¸¬æ•¸æ“šï¼Œèˆ‡å…¶ç™¼é€å…‰ç·šå€¼ï¼Œä¸å¦‚ç™¼é€å¾ DHT æ„Ÿæ¸¬å™¨è®€å–çš„æº«åº¦å€¼ï¼Œä¸¦å°‡å…¶ä½œç‚º JSON æ–‡ä»¶ä¸­çš„ `temperature` å±¬æ€§ï¼š

    ```python
    _, temp = sensor.read()
    telemetry = json.dumps({'temperature' : temp})
    ```

1. æº«åº¦å€¼ä¸éœ€è¦é »ç¹è®€å–â€”â€”åœ¨çŸ­æ™‚é–“å…§ä¸æœƒæœ‰å¤ªå¤§è®ŠåŒ–ï¼Œå› æ­¤å°‡ `time.sleep` è¨­ç½®ç‚º 10 åˆ†é˜ï¼š

    ```cpp
    time.sleep(10 * 60);
    ```

    > ğŸ’ `sleep` å‡½æ•¸ä»¥ç§’ç‚ºå–®ä½ï¼Œå› æ­¤ç‚ºäº†æ›´å®¹æ˜“é–±è®€ï¼Œè©²å€¼æ˜¯é€šéè¨ˆç®—å¾—å‡ºçš„ã€‚1 åˆ†é˜æœ‰ 60 ç§’ï¼Œå› æ­¤ 10 x (1 åˆ†é˜çš„ 60 ç§’) å¾—å‡º 10 åˆ†é˜çš„å»¶é²ã€‚

1. ä»¥èˆ‡ä¹‹å‰ä½œæ¥­éƒ¨åˆ†ç›¸åŒçš„æ–¹å¼é‹è¡Œä»£ç¢¼ã€‚å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯è™›æ“¬ç‰©è¯ç¶²è¨­å‚™ï¼Œè«‹ç¢ºä¿ CounterFit æ‡‰ç”¨ç¨‹å¼æ­£åœ¨é‹è¡Œï¼Œä¸¦ä¸”æ¿•åº¦å’Œæº«åº¦æ„Ÿæ¸¬å™¨å·²åœ¨æ­£ç¢ºçš„å¼•è…³ä¸Šå‰µå»ºã€‚

    ```output
    pi@raspberrypi:~/temperature-sensor $ python3 app.py
    MQTT connected!
    Sending telemetry  {"temperature": 25}
    Sending telemetry  {"temperature": 25}
    ```

> ğŸ’ æ‚¨å¯ä»¥åœ¨ [code-publish-temperature/virtual-device](../../../../../2-farm/lessons/1-predict-plant-growth/code-publish-temperature/virtual-device) è³‡æ–™å¤¾æˆ– [code-publish-temperature/pi](../../../../../2-farm/lessons/1-predict-plant-growth/code-publish-temperature/pi) è³‡æ–™å¤¾ä¸­æ‰¾åˆ°æ­¤ä»£ç¢¼ã€‚

ğŸ˜€ æ‚¨å·²æˆåŠŸå°‡æº«åº¦ä½œç‚ºé™æ¸¬æ•¸æ“šå¾æ‚¨çš„è¨­å‚™ç™¼ä½ˆå‡ºå»ã€‚

---

**å…è²¬è²æ˜**ï¼š  
æœ¬æ–‡ä»¶å·²ä½¿ç”¨ AI ç¿»è­¯æœå‹™ [Co-op Translator](https://github.com/Azure/co-op-translator) é€²è¡Œç¿»è­¯ã€‚å„˜ç®¡æˆ‘å€‘åŠªåŠ›ç¢ºä¿ç¿»è­¯çš„æº–ç¢ºæ€§ï¼Œä½†è«‹æ³¨æ„ï¼Œè‡ªå‹•ç¿»è­¯å¯èƒ½åŒ…å«éŒ¯èª¤æˆ–ä¸æº–ç¢ºä¹‹è™•ã€‚åŸå§‹æ–‡ä»¶çš„æ¯èªç‰ˆæœ¬æ‡‰è¢«è¦–ç‚ºæ¬Šå¨ä¾†æºã€‚å°æ–¼é—œéµä¿¡æ¯ï¼Œå»ºè­°å°‹æ±‚å°ˆæ¥­äººå·¥ç¿»è­¯ã€‚æˆ‘å€‘å°å› ä½¿ç”¨æ­¤ç¿»è­¯è€Œå¼•èµ·çš„ä»»ä½•èª¤è§£æˆ–éŒ¯èª¤è§£é‡‹ä¸æ‰¿æ“”è²¬ä»»ã€‚