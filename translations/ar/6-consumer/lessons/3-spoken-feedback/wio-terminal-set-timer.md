<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "012b69d57d898d670adf61304f42a137",
  "translation_date": "2025-08-27T00:11:15+00:00",
  "source_file": "6-consumer/lessons/3-spoken-feedback/wio-terminal-set-timer.md",
  "language_code": "ar"
}
-->
# ุถุจุท ูุคูุช - Wio Terminal

ูู ูุฐุง ุงูุฌุฒุก ูู ุงูุฏุฑุณุ ุณุชููู ุจุงุณุชุฏุนุงุก ุงูููุฏ ุงูุฎุงูู ูู ุงูุฎูุงุฏู ูููู ุงูููุงูุ ูุถุจุท ูุคูุช ุนูู ุฌูุงุฒ Wio Terminal ุจูุงุกู ุนูู ุงููุชุงุฆุฌ.

## ุถุจุท ูุคูุช

ุงููุต ุงูุฐู ูุชู ุฅุฑุฌุงุนู ูู ุงุณุชุฏุนุงุก ุชุญููู ุงูููุงู ุฅูู ูุต ูุญุชุงุฌ ุฅูู ุฅุฑุณุงูู ุฅูู ุงูููุฏ ุงูุฎุงูู ูู ุงูุฎูุงุฏู ููุชู ูุนุงูุฌุชู ุจูุงุณุทุฉ LUISุ ุญูุซ ูุชู ุฅุฑุฌุงุน ุนุฏุฏ ุงูุซูุงูู ูููุคูุช. ูููู ุงุณุชุฎุฏุงู ูุฐุง ุงูุนุฏุฏ ูู ุงูุซูุงูู ูุถุจุท ุงููุคูุช.

ุงููููุฑูููุชุฑููุฑุฒ ูุง ุชุฏุนู ุจุดูู ุทุจูุนู ุชุนุฏุฏ ุงูุฎููุท ูู Arduinoุ ูุฐูู ูุง ุชูุฌุฏ ูุฆุงุช ูุคูุช ููุงุณูุฉ ููุง ูุฏ ุชุฌุฏ ุนูุฏ ุงูุจุฑูุฌุฉ ุจูุบุฉ Python ุฃู ูุบุงุช ุนุงููุฉ ุงููุณุชูู ุงูุฃุฎุฑู. ุจุฏูุงู ูู ุฐููุ ููููู ุงุณุชุฎุฏุงู ููุชุจุงุช ุงููุคูุช ุงูุชู ุชุนูู ุนู ุทุฑูู ููุงุณ ุงูููุช ุงููููุถู ูู ูุธููุฉ `loop` ูุงุณุชุฏุนุงุก ุงููุธุงุฆู ุนูุฏ ุงูุชูุงุก ุงูููุช.

### ุงููููุฉ - ุฅุฑุณุงู ุงููุต ุฅูู ุงูุฏุงูุฉ ุงูุฎุงููุฉ ูู ุงูุฎูุงุฏู

1. ุงูุชุญ ูุดุฑูุน `smart-timer` ูู VS Code ุฅุฐุง ูู ููู ููุชูุญูุง ุจุงููุนู.

1. ุงูุชุญ ููู ุงูุฑุฃุณ `config.h` ูุฃุถู ุนููุงู URL ูุชุทุจูู ุงูุฏุงูุฉ ุงูุฎุงุต ุจู:

    ```cpp
    const char *TEXT_TO_TIMER_FUNCTION_URL = "<URL>";
    ```

    ุงุณุชุจุฏู `<URL>` ุจุนููุงู URL ูุชุทุจูู ุงูุฏุงูุฉ ุงูุฐู ุญุตูุช ุนููู ูู ุงูุฎุทูุฉ ุงูุฃุฎูุฑุฉ ูู ุงูุฏุฑุณ ุงูุณุงุจูุ ูุดูุฑูุง ุฅูู ุนููุงู IP ูุฌูุงุฒู ุงููุญูู ุงูุฐู ูุดุบู ุชุทุจูู ุงูุฏุงูุฉ.

1. ุฃูุดุฆ ููููุง ุฌุฏูุฏูุง ูู ูุฌูุฏ `src` ุจุงุณู `language_understanding.h`. ุณูุชู ุงุณุชุฎุฏุงู ูุฐุง ุงูููู ูุชุนุฑูู ูุฆุฉ ูุฅุฑุณุงู ุงูููุงู ุงููุนุชุฑู ุจู ุฅูู ุชุทุจูู ุงูุฏุงูุฉ ูุชุญูููู ุฅูู ุซูุงูู ุจุงุณุชุฎุฏุงู LUIS.

1. ุฃุถู ูุง ููู ุฅูู ุฃุนูู ูุฐุง ุงูููู:

    ```cpp
    #pragma once
    
    #include <Arduino.h>
    #include <ArduinoJson.h>
    #include <HTTPClient.h>
    #include <WiFiClient.h>
    
    #include "config.h"
    ```

    ูุชุถูู ูุฐุง ุจุนุถ ูููุงุช ุงูุฑุฃุณ ุงููุทููุจุฉ.

1. ุนุฑู ูุฆุฉ ุจุงุณู `LanguageUnderstanding`ุ ูุฃุนูู ุนู ูุซูู ููุฐู ุงููุฆุฉ:

    ```cpp
    class LanguageUnderstanding
    {
    public:
    private:
    };

    LanguageUnderstanding languageUnderstanding;
    ```

1. ูุงุณุชุฏุนุงุก ุชุทุจูู ุงูุฏุงูุฉ ุงูุฎุงุต ุจูุ ุชุญุชุงุฌ ุฅูู ุฅุนูุงู ุนููู WiFi. ุฃุถู ูุง ููู ุฅูู ุงููุณู `private` ูู ุงููุฆุฉ:

    ```cpp
    WiFiClient _client;
    ```

1. ูู ุงููุณู `public`ุ ุฃุนูู ุนู ุทุฑููุฉ ุจุงุณู `GetTimerDuration` ูุงุณุชุฏุนุงุก ุชุทุจูู ุงูุฏุงูุฉ:

    ```cpp
    int GetTimerDuration(String text)
    {
    }
    ```

1. ูู ุทุฑููุฉ `GetTimerDuration`ุ ุฃุถู ุงูููุฏ ุงูุชุงูู ูุจูุงุก JSON ููุชู ุฅุฑุณุงูู ุฅูู ุชุทุจูู ุงูุฏุงูุฉ:

    ```cpp
    DynamicJsonDocument doc(1024);
    doc["text"] = text;

    String body;
    serializeJson(doc, body);
    ```

    ูููู ูุฐุง ุจุชุญููู ุงููุต ุงูููุฑุฑ ุฅูู ุทุฑููุฉ `GetTimerDuration` ุฅูู JSON ุจุงูุดูู ุงูุชุงูู:

    ```json
    {
        "text" : "<text>"
    }
    ```

    ุญูุซ `<text>` ูู ุงููุต ุงูููุฑุฑ ุฅูู ุงูุฏุงูุฉ.

1. ุฃุณูู ูุฐุงุ ุฃุถู ุงูููุฏ ุงูุชุงูู ูุฅุฌุฑุงุก ุงุณุชุฏุนุงุก ูุชุทุจูู ุงูุฏุงูุฉ:

    ```cpp
    HTTPClient httpClient;
    httpClient.begin(_client, TEXT_TO_TIMER_FUNCTION_URL);

    int httpResponseCode = httpClient.POST(body);
    ```

    ูููู ูุฐุง ุจุฅุฌุฑุงุก ุทูุจ POST ุฅูู ุชุทุจูู ุงูุฏุงูุฉุ ูุน ุชูุฑูุฑ ุฌุณู JSON ูุงูุญุตูู ุนูู ุฑูุฒ ุงูุงุณุชุฌุงุจุฉ.

1. ุฃุถู ุงูููุฏ ุงูุชุงูู ุฃุณูู ูุฐุง:

    ```cpp
    int seconds = 0;
    if (httpResponseCode == 200)
    {
        String result = httpClient.getString();
        Serial.println(result);

        DynamicJsonDocument doc(1024);
        deserializeJson(doc, result.c_str());

        JsonObject obj = doc.as<JsonObject>();
        seconds = obj["seconds"].as<int>();
    }
    else
    {
        Serial.print("Failed to understand text - error ");
        Serial.println(httpResponseCode);
    }
    ```

    ูุชุญูู ูุฐุง ุงูููุฏ ูู ุฑูุฒ ุงูุงุณุชุฌุงุจุฉ. ุฅุฐุง ูุงู 200 (ูุฌุงุญ)ุ ูุชู ุงุณุชุฑุฏุงุฏ ุนุฏุฏ ุงูุซูุงูู ูููุคูุช ูู ุฌุณู ุงูุงุณุชุฌุงุจุฉ. ุฎูุงู ุฐููุ ูุชู ุฅุฑุณุงู ุฎุทุฃ ุฅูู ุดุงุดุฉ ุงููุฑุงูุจุฉ ุงูุชุณูุณููุฉ ููุชู ุชุนููู ุนุฏุฏ ุงูุซูุงูู ุฅูู 0.

1. ุฃุถู ุงูููุฏ ุงูุชุงูู ุฅูู ููุงูุฉ ูุฐู ุงูุทุฑููุฉ ูุฅุบูุงู ุงูุงุชุตุงู ุจู HTTP ูุฅุฑุฌุงุน ุนุฏุฏ ุงูุซูุงูู:

    ```cpp
    httpClient.end();

    return seconds;
    ```

1. ูู ููู `main.cpp`ุ ูู ุจุชุถููู ููู ุงูุฑุฃุณ ุงูุฌุฏูุฏ ูุฐุง:

    ```cpp
    #include "speech_to_text.h"
    ```

1. ูู ููุงูุฉ ูุธููุฉ `processAudio`ุ ุงุณุชุฏุนู ุทุฑููุฉ `GetTimerDuration` ููุญุตูู ุนูู ูุฏุฉ ุงููุคูุช:

    ```cpp
    int total_seconds = languageUnderstanding.GetTimerDuration(text);
    ```

    ูููู ูุฐุง ุจุชุญููู ุงููุต ูู ุงุณุชุฏุนุงุก ูุฆุฉ `SpeechToText` ุฅูู ุนุฏุฏ ุงูุซูุงูู ูููุคูุช.

### ุงููููุฉ - ุถุจุท ูุคูุช

ูููู ุงุณุชุฎุฏุงู ุนุฏุฏ ุงูุซูุงูู ูุถุจุท ูุคูุช.

1. ุฃุถู ุชุจุนูุฉ ููุชุจุฉ ุงููุคูุช ุฅูู ููู `platformio.ini` ูุฅุถุงูุฉ ููุชุจุฉ ูุถุจุท ุงููุคูุช:

    ```ini
    contrem/arduino-timer @ 2.3.0
    ```

1. ุฃุถู ุชูุฌูู ุชุถููู ููุฐู ุงูููุชุจุฉ ุฅูู ููู `main.cpp`:

    ```cpp
    #include <arduino-timer.h>
    ```

1. ููู ูุธููุฉ `processAudio`ุ ุฃุถู ุงูููุฏ ุงูุชุงูู:

    ```cpp
    auto timer = timer_create_default();
    ```

    ูููู ูุฐุง ุงูููุฏ ุจุฅุนูุงู ูุคูุช ุจุงุณู `timer`.

1. ุฃุณูู ูุฐุงุ ุฃุถู ุงูููุฏ ุงูุชุงูู:

    ```cpp
    void say(String text)
    {
        Serial.print("Saying ");
        Serial.println(text);
    }
    ```

    ุชููู ูุธููุฉ `say` ูู ุงูููุงูุฉ ุจุชุญููู ุงููุต ุฅูู ููุงูุ ูููู ูู ุงูููุช ุงูุญุงูู ุณุชูุชุจ ุงููุต ุงูููุฑุฑ ุฅูู ุดุงุดุฉ ุงููุฑุงูุจุฉ ุงูุชุณูุณููุฉ.

1. ุฃุณูู ูุธููุฉ `say`ุ ุฃุถู ุงูููุฏ ุงูุชุงูู:

    ```cpp
    bool timerExpired(void *announcement)
    {
        say((char *)announcement);
        return false;
    }
    ```

    ูุฐู ูุธููุฉ ุฑุฏ ูุฏุงุก ูุชู ุงุณุชุฏุนุงุคูุง ุนูุฏ ุงูุชูุงุก ุงููุคูุช. ูุชู ุชูุฑูุฑ ุฑุณุงูุฉ ูุชููุงู ุนูุฏ ุงูุชูุงุก ุงููุคูุช. ูููู ุฃู ุชุชูุฑุฑ ุงููุคูุชุงุชุ ููููู ุงูุชุญูู ูู ุฐูู ูู ุฎูุงู ูููุฉ ุงูุฅุฑุฌุงุน ููุฐู ุงููุธููุฉ - ุชูุฑุฌุน `false`ุ ูุฅุฎุจุงุฑ ุงููุคูุช ุจุนุฏู ุงูุชุดุบูู ูุฑุฉ ุฃุฎุฑู.

1. ุฃุถู ุงูููุฏ ุงูุชุงูู ุฅูู ููุงูุฉ ูุธููุฉ `processAudio`:

    ```cpp
    if (total_seconds == 0)
    {
        return;
    }

    int minutes = total_seconds / 60;
    int seconds = total_seconds % 60;
    ```

    ูุชุญูู ูุฐุง ุงูููุฏ ูู ุฅุฌูุงูู ุนุฏุฏ ุงูุซูุงููุ ูุฅุฐุง ูุงู 0ุ ูุฅูู ูุนูุฏ ูู ุงุณุชุฏุนุงุก ุงููุธููุฉ ุจุญูุซ ูุง ูุชู ุถุจุท ุฃู ูุคูุชุงุช. ุซู ูููู ุจุชุญููู ุฅุฌูุงูู ุนุฏุฏ ุงูุซูุงูู ุฅูู ุฏูุงุฆู ูุซูุงูู.

1. ุฃุณูู ูุฐุง ุงูููุฏุ ุฃุถู ูุง ููู ูุฅูุดุงุก ุฑุณุงูุฉ ุชููุงู ุนูุฏ ุจุฏุก ุงููุคูุช:

    ```cpp
    String begin_message;
    if (minutes > 0)
    {
        begin_message += minutes;
        begin_message += " minute ";
    }
    if (seconds > 0)
    {
        begin_message += seconds;
        begin_message += " second ";
    }

    begin_message += "timer started.";
    ```

1. ุฃุณูู ูุฐุงุ ุฃุถู ููุฏูุง ูุดุงุจููุง ูุฅูุดุงุก ุฑุณุงูุฉ ุชููุงู ุนูุฏ ุงูุชูุงุก ุงููุคูุช:

    ```cpp
    String end_message("Times up on your ");
    if (minutes > 0)
    {
        end_message += minutes;
        end_message += " minute ";
    }
    if (seconds > 0)
    {
        end_message += seconds;
        end_message += " second ";
    }

    end_message += "timer.";
    ```

1. ุจุนุฏ ุฐููุ ูู ุฑุณุงูุฉ ุจุฏุก ุงููุคูุช:

    ```cpp
    say(begin_message);
    ```

1. ูู ููุงูุฉ ูุฐู ุงููุธููุฉุ ูู ุจุชุดุบูู ุงููุคูุช:

    ```cpp
    timer.in(total_seconds * 1000, timerExpired, (void *)(end_message.c_str()));
    ```

    ูููู ูุฐุง ุจุชุดุบูู ุงููุคูุช. ูุชู ุถุจุท ุงููุคูุช ุจุงุณุชุฎุฏุงู ุงููููู ุซุงููุฉุ ูุฐูู ูุชู ุถุฑุจ ุฅุฌูุงูู ุนุฏุฏ ุงูุซูุงูู ูู 1,000 ูุชุญูููู ุฅูู ูููู ุซุงููุฉ. ูุชู ุชูุฑูุฑ ูุธููุฉ `timerExpired` ููุธููุฉ ุฑุฏ ูุฏุงุกุ ููุชู ุชูุฑูุฑ `end_message` ููุณูุทุฉ ูุชูุฑูุฑูุง ุฅูู ุฑุฏ ุงููุฏุงุก. ุชูุจู ูุฐู ุงููุธููุฉ ููุท ุงููุณูุทุงุช ูู ุงูููุน `void *`ุ ูุฐูู ูุชู ุชุญููู ุงููุต ุจุดูู ููุงุณุจ.

1. ุฃุฎูุฑูุงุ ูุญุชุงุฌ ุงููุคูุช ุฅูู *ุงูุนูู*ุ ููุชู ุฐูู ูู ูุธููุฉ `loop`. ุฃุถู ุงูููุฏ ุงูุชุงูู ุฅูู ููุงูุฉ ูุธููุฉ `loop`:

    ```cpp
    timer.tick();
    ```

1. ูู ุจุจูุงุก ูุฐุง ุงูููุฏุ ูุงุฑูุนู ุฅูู ุฌูุงุฒ Wio Terminal ุงูุฎุงุต ุจู ูุงุฎุชุจุฑู ูู ุฎูุงู ุดุงุดุฉ ุงููุฑุงูุจุฉ ุงูุชุณูุณููุฉ. ุจูุฌุฑุฏ ุฑุคูุฉ `Ready` ูู ุดุงุดุฉ ุงููุฑุงูุจุฉ ุงูุชุณูุณููุฉุ ุงุถุบุท ุนูู ุงูุฒุฑ C (ุงูุฒุฑ ุงูููุฌูุฏ ุนูู ุงูุฌุงูุจ ุงูุฃูุณุฑุ ุงูุฃูุฑุจ ุฅูู ููุชุงุญ ุงูุชุดุบูู)ุ ูุชุญุฏุซ. ุณูุชู ุงูุชูุงุท 4 ุซูุงูู ูู ุงูุตูุชุ ูุชุญููููุง ุฅูู ูุตุ ุซู ุฅุฑุณุงููุง ุฅูู ุชุทุจูู ุงูุฏุงูุฉ ุงูุฎุงุต ุจูุ ูุณูุชู ุถุจุท ูุคูุช. ุชุฃูุฏ ูู ุชุดุบูู ุชุทุจูู ุงูุฏุงูุฉ ุงูุฎุงุต ุจู ูุญูููุง.

    ุณุชุฑู ูุชู ูุจุฏุฃ ุงููุคูุชุ ููุชู ููุชูู.

    ```output
    --- Available filters and text transformations: colorize, debug, default, direct, hexlify, log2file, nocontrol, printable, send_on_enter, time
    --- More details at http://bit.ly/pio-monitor-filters
    --- Miniterm on /dev/cu.usbmodem1101  9600,8,N,1 ---
    --- Quit: Ctrl+C | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H ---
    Connecting to WiFi..
    Connected!
    Got access token.
    Ready.
    Starting recording...
    Finished recording
    Sending speech...
    Speech sent!
    {"RecognitionStatus":"Success","DisplayText":"Set a 2 minute and 27 second timer.","Offset":4700000,"Duration":35300000}
    Set a 2 minute and 27 second timer.
    {"seconds": 147}
    2 minute 27 second timer started.
    Times up on your 2 minute 27 second timer.
    ```

> ๐ ููููู ุงูุนุซูุฑ ุนูู ูุฐุง ุงูููุฏ ูู ุงููุฌูุฏ [code-timer/wio-terminal](../../../../../6-consumer/lessons/3-spoken-feedback/code-timer/wio-terminal).

๐ ููุฏ ูุฌุญ ุจุฑูุงูุฌ ุงููุคูุช ุงูุฎุงุต ุจู!

---

**ุฅุฎูุงุก ุงููุณุคูููุฉ**:  
ุชู ุชุฑุฌูุฉ ูุฐุง ุงููุณุชูุฏ ุจุงุณุชุฎุฏุงู ุฎุฏูุฉ ุงูุชุฑุฌูุฉ ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู [Co-op Translator](https://github.com/Azure/co-op-translator). ุจูููุง ูุณุนู ูุชุญููู ุงูุฏูุฉุ ูุฑุฌู ุงูุนูู ุฃู ุงูุชุฑุฌูุงุช ุงูุขููุฉ ูุฏ ุชุญุชูู ุนูู ุฃุฎุทุงุก ุฃู ูุนูููุงุช ุบูุฑ ุฏูููุฉ. ูุฌุจ ุงุนุชุจุงุฑ ุงููุณุชูุฏ ุงูุฃุตูู ุจูุบุชู ุงูุฃุตููุฉ ูู ุงููุตุฏุฑ ุงูููุซูู. ููุญุตูู ุนูู ูุนูููุงุช ุญุงุณูุฉุ ูููุตู ุจุงูุงุณุชุนุงูุฉ ุจุชุฑุฌูุฉ ุจุดุฑูุฉ ุงุญุชุฑุงููุฉ. ูุญู ุบูุฑ ูุณุคูููู ุนู ุฃู ุณูุก ููู ุฃู ุชูุณูุฑุงุช ุฎุงุทุฆุฉ ูุงุชุฌุฉ ุนู ุงุณุชุฎุฏุงู ูุฐู ุงูุชุฑุฌูุฉ.