<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "606f3af1c78e3741e48ce77c31cea626",
  "translation_date": "2025-08-27T00:12:40+00:00",
  "source_file": "6-consumer/lessons/3-spoken-feedback/pi-text-to-speech.md",
  "language_code": "ar"
}
-->
# ุชุญููู ุงููุต ุฅูู ููุงู - Raspberry Pi

ูู ูุฐุง ุงูุฌุฒุก ูู ุงูุฏุฑุณุ ุณุชููู ุจูุชุงุจุฉ ููุฏ ูุชุญููู ุงููุต ุฅูู ููุงู ุจุงุณุชุฎุฏุงู ุฎุฏูุฉ ุงูููุงู.

## ุชุญููู ุงููุต ุฅูู ููุงู ุจุงุณุชุฎุฏุงู ุฎุฏูุฉ ุงูููุงู

ูููู ุฅุฑุณุงู ุงููุต ุฅูู ุฎุฏูุฉ ุงูููุงู ุจุงุณุชุฎุฏุงู ูุงุฌูุฉ REST API ููุญุตูู ุนูู ุงูููุงู ูููู ุตูุชู ูููู ุชุดุบููู ุนูู ุฌูุงุฒ ุฅูุชุฑูุช ุงูุฃุดูุงุก ุงูุฎุงุต ุจู. ุนูุฏ ุทูุจ ุงูููุงูุ ุชุญุชุงุฌ ุฅูู ุชุญุฏูุฏ ุงูุตูุช ุงูุฐู ุณูุชู ุงุณุชุฎุฏุงููุ ุญูุซ ูููู ุชูููุฏ ุงูููุงู ุจุงุณุชุฎุฏุงู ูุฌููุนุฉ ูุชููุนุฉ ูู ุงูุฃุตูุงุช ุงููุฎุชููุฉ.

ูู ูุบุฉ ุชุฏุนู ูุฌููุนุฉ ูู ุงูุฃุตูุงุช ุงููุฎุชููุฉุ ูููููู ุฅุฑุณุงู ุทูุจ REST ุฅูู ุฎุฏูุฉ ุงูููุงู ููุญุตูู ุนูู ูุงุฆูุฉ ุงูุฃุตูุงุช ุงููุฏุนููุฉ ููู ูุบุฉ.

### ุงููููุฉ - ุงูุญุตูู ุนูู ุตูุช

1. ุงูุชุญ ูุดุฑูุน `smart-timer` ูู VS Code.

1. ุฃุถู ุงูููุฏ ุงูุชุงูู ููู ุฏุงูุฉ `say` ูุทูุจ ูุงุฆูุฉ ุงูุฃุตูุงุช ููุบุฉ ูุนููุฉ:

    ```python
    def get_voice():
        url = f'https://{location}.tts.speech.microsoft.com/cognitiveservices/voices/list'
    
        headers = {
            'Authorization': 'Bearer ' + get_access_token()
        }
    
        response = requests.get(url, headers=headers)
        voices_json = json.loads(response.text)
    
        first_voice = next(x for x in voices_json if x['Locale'].lower() == language.lower() and x['VoiceType'] == 'Neural')
        return first_voice['ShortName']
    
    voice = get_voice()
    print(f'Using voice {voice}')
    ```

    ูููู ูุฐุง ุงูููุฏ ุจุชุนุฑูู ุฏุงูุฉ ุชุณูู `get_voice` ุชุณุชุฎุฏู ุฎุฏูุฉ ุงูููุงู ููุญุตูู ุนูู ูุงุฆูุฉ ุงูุฃุตูุงุช. ุซู ูุนุซุฑ ุนูู ุฃูู ุตูุช ูุชุทุงุจู ูุน ุงููุบุฉ ุงููุณุชุฎุฏูุฉ.

    ูุชู ุงุณุชุฏุนุงุก ูุฐู ุงูุฏุงูุฉ ูุชุฎุฒูู ุฃูู ุตูุชุ ููุชู ุทุจุงุนุฉ ุงุณู ุงูุตูุช ุฅูู ูุญุฏุฉ ุงูุชุญูู. ูููู ุทูุจ ูุฐุง ุงูุตูุช ูุฑุฉ ูุงุญุฏุฉ ูุงุณุชุฎุฏุงู ุงููููุฉ ููู ุงุณุชุฏุนุงุก ูุชุญููู ุงููุต ุฅูู ููุงู.

    > ๐ ููููู ุงูุญุตูู ุนูู ุงููุงุฆูุฉ ุงููุงููุฉ ููุฃุตูุงุช ุงููุฏุนููุฉ ูู [ูุซุงุฆู ุฏุนู ุงููุบุฉ ูุงูุตูุช ุนูู Microsoft Docs](https://docs.microsoft.com/azure/cognitive-services/speech-service/language-support?WT.mc_id=academic-17441-jabenn#text-to-speech). ุฅุฐุง ููุช ุชุฑุบุจ ูู ุงุณุชุฎุฏุงู ุตูุช ูุนููุ ููููู ุฅุฒุงูุฉ ูุฐู ุงูุฏุงูุฉ ูุชุญุฏูุฏ ุงูุตูุช ูุฏูููุง ุจุงุณุชุฎุฏุงู ุงุณู ุงูุตูุช ูู ูุฐู ุงููุซุงุฆู. ุนูู ุณุจูู ุงููุซุงู:
    >
    > ```python
    > voice = 'hi-IN-SwaraNeural'
    > ```

### ุงููููุฉ - ุชุญููู ุงููุต ุฅูู ููุงู

1. ุฃุณูู ูุฐุงุ ูู ุจุชุนุฑูู ุซุงุจุช ูุชูุณูู ุงูุตูุช ุงูุฐู ุณูุชู ุงุณุชุฑุฏุงุฏู ูู ุฎุฏูุงุช ุงูููุงู. ุนูุฏ ุทูุจ ุงูุตูุชุ ููููู ุงูููุงู ุจุฐูู ุจูุฌููุนุฉ ูู ุงูุชูุณููุงุช ุงููุฎุชููุฉ.

    ```python
    playback_format = 'riff-48khz-16bit-mono-pcm'
    ```

    ูุนุชูุฏ ุงูุชูุณูู ุงูุฐู ููููู ุงุณุชุฎุฏุงูู ุนูู ุฌูุงุฒู. ุฅุฐุง ูุงุฌูุช ุฃุฎุทุงุก `Invalid sample rate` ุนูุฏ ุชุดุบูู ุงูุตูุชุ ูู ุจุชุบููุฑ ูุฐุง ุฅูู ูููุฉ ุฃุฎุฑู. ููููู ุงูุนุซูุฑ ุนูู ูุงุฆูุฉ ุงูููู ุงููุฏุนููุฉ ูู [ูุซุงุฆู REST API ูุชุญููู ุงููุต ุฅูู ููุงู ุนูู Microsoft Docs](https://docs.microsoft.com/azure/cognitive-services/speech-service/rest-text-to-speech?WT.mc_id=academic-17441-jabenn#audio-outputs). ุณุชุญุชุงุฌ ุฅูู ุงุณุชุฎุฏุงู ุตูุช ุจุชูุณูู `riff`ุ ูุงูููู ุงูุชู ููููู ุชุฌุฑุจุชูุง ูู `riff-16khz-16bit-mono-pcm`ุ `riff-24khz-16bit-mono-pcm` ู `riff-48khz-16bit-mono-pcm`.

1. ุฃุณูู ูุฐุงุ ูู ุจุชุนุฑูู ุฏุงูุฉ ุชุณูู `get_speech` ูุชุญููู ุงููุต ุฅูู ููุงู ุจุงุณุชุฎุฏุงู REST API ูุฎุฏูุฉ ุงูููุงู:

    ```python
    def get_speech(text):
    ```

1. ูู ุฏุงูุฉ `get_speech`ุ ูู ุจุชุนุฑูู ุนููุงู URL ุงูุฐู ุณูุชู ุงุณุชุฏุนุงุคู ูุงูุฑุคูุณ ุงูุชู ุณูุชู ุชูุฑูุฑูุง:

    ```python
        url = f'https://{location}.tts.speech.microsoft.com/cognitiveservices/v1'
    
        headers = {
            'Authorization': 'Bearer ' + get_access_token(),
            'Content-Type': 'application/ssml+xml',
            'X-Microsoft-OutputFormat': playback_format
        }
    ```

    ูุชู ููุง ุฅุนุฏุงุฏ ุงูุฑุคูุณ ูุงุณุชุฎุฏุงู ุฑูุฒ ูุตูู ุชู ุฅูุดุงุคูุ ูุชุญุฏูุฏ ุงููุญุชูู ูู SSML ูุชุญุฏูุฏ ุชูุณูู ุงูุตูุช ุงููุทููุจ.

1. ุฃุณูู ูุฐุงุ ูู ุจุชุนุฑูู SSML ุงูุฐู ุณูุชู ุฅุฑุณุงูู ุฅูู REST API:

    ```python
    ssml =  f'<speak version=\'1.0\' xml:lang=\'{language}\'>'
    ssml += f'<voice xml:lang=\'{language}\' name=\'{voice}\'>'
    ssml += text
    ssml += '</voice>'
    ssml += '</speak>'
    ```

    ูููู ูุฐุง SSML ุจุชุญุฏูุฏ ุงููุบุฉ ูุงูุตูุช ุงููุณุชุฎุฏูุ ุจุงูุฅุถุงูุฉ ุฅูู ุงููุต ุงูุฐู ุณูุชู ุชุญูููู.

1. ุฃุฎูุฑูุงุ ุฃุถู ููุฏูุง ูู ูุฐู ุงูุฏุงูุฉ ูุฅุฌุฑุงุก ุทูุจ REST ูุฅุฑุฌุงุน ุงูุจูุงูุงุช ุงูุตูุชูุฉ ุงูุซูุงุฆูุฉ:

    ```python
    response = requests.post(url, headers=headers, data=ssml.encode('utf-8'))
    return io.BytesIO(response.content)
    ```

### ุงููููุฉ - ุชุดุบูู ุงูุตูุช

1. ุฃุณูู ุฏุงูุฉ `get_speech`ุ ูู ุจุชุนุฑูู ุฏุงูุฉ ุฌุฏูุฏุฉ ูุชุดุบูู ุงูุตูุช ุงูุฐู ุชู ุฅุฑุฌุงุนู ูู ุงุณุชุฏุนุงุก REST API:

    ```python
    def play_speech(speech):
    ```

1. ุงูุตูุช `speech` ุงูุฐู ูุชู ุชูุฑูุฑู ุฅูู ูุฐู ุงูุฏุงูุฉ ุณูููู ุงูุจูุงูุงุช ุงูุตูุชูุฉ ุงูุซูุงุฆูุฉ ุงูุชู ุชู ุฅุฑุฌุงุนูุง ูู REST API. ุงุณุชุฎุฏู ุงูููุฏ ุงูุชุงูู ููุชุญ ูุฐุง ูููู wave ูุชูุฑูุฑู ุฅูู PyAudio ูุชุดุบูู ุงูุตูุช:

    ```python
    def play_speech(speech):
        with wave.open(speech, 'rb') as wave_file:
            stream = audio.open(format=audio.get_format_from_width(wave_file.getsampwidth()),
                                channels=wave_file.getnchannels(),
                                rate=wave_file.getframerate(),
                                output_device_index=speaker_card_number,
                                output=True)

            data = wave_file.readframes(4096)

            while len(data) > 0:
                stream.write(data)
                data = wave_file.readframes(4096)

            stream.stop_stream()
            stream.close()
    ```

    ูุณุชุฎุฏู ูุฐุง ุงูููุฏ ุชุฏูู PyAudioุ ุชูุงููุง ูุซู ุงูุชูุงุท ุงูุตูุช. ุงููุฑู ููุง ูู ุฃู ุงูุชุฏูู ูุชู ุฅุนุฏุงุฏู ูุชุฏูู ุฅุฎุฑุงุฌุ ููุชู ูุฑุงุกุฉ ุงูุจูุงูุงุช ูู ุงูุจูุงูุงุช ุงูุตูุชูุฉ ูุฏูุนูุง ุฅูู ุงูุชุฏูู.

    ุจุฏูุงู ูู ุชุญุฏูุฏ ุชูุงุตูู ุงูุชุฏูู ูุซู ูุนุฏู ุงูุนููุฉ ูุฏูููุงุ ูุชู ูุฑุงุกุชูุง ูู ุงูุจูุงูุงุช ุงูุตูุชูุฉ.

1. ุงุณุชุจุฏู ูุญุชููุงุช ุฏุงูุฉ `say` ุจุงูุชุงูู:

    ```python
    speech = get_speech(text)
    play_speech(speech)
    ```

    ูููู ูุฐุง ุงูููุฏ ุจุชุญููู ุงููุต ุฅูู ููุงู ูุจูุงูุงุช ุตูุชูุฉ ุซูุงุฆูุฉุ ุซู ูููู ุจุชุดุบูู ุงูุตูุช.

1. ูู ุจุชุดุบูู ุงูุชุทุจููุ ูุชุฃูุฏ ูู ุชุดุบูู ุชุทุจูู ุงููุธููุฉ ุฃูุถูุง. ูู ุจุถุจุท ุจุนุถ ุงููุคูุชุงุชุ ูุณุชุณูุน ุงุณุชุฌุงุจุฉ ุตูุชูุฉ ุชุฎุจุฑู ุจุฃูู ุชู ุถุจุท ุงููุคูุช ุงูุฎุงุต ุจูุ ุซู ุงุณุชุฌุงุจุฉ ุตูุชูุฉ ุฃุฎุฑู ุนูุฏ ุงูุชูุงุก ุงููุคูุช.

    ุฅุฐุง ูุงุฌูุช ุฃุฎุทุงุก `Invalid sample rate`ุ ูู ุจุชุบููุฑ `playback_format` ููุง ูู ููุถุญ ุฃุนูุงู.

> ๐ ููููู ุงูุนุซูุฑ ุนูู ูุฐุง ุงูููุฏ ูู [ุงููุฌูุฏ code-spoken-response/pi](../../../../../6-consumer/lessons/3-spoken-feedback/code-spoken-response/pi).

๐ ููุฏ ูุงู ุจุฑูุงูุฌ ุงููุคูุช ุงูุฎุงุต ุจู ูุงุฌุญูุง!

---

**ุฅุฎูุงุก ุงููุณุคูููุฉ**:  
ุชู ุชุฑุฌูุฉ ูุฐุง ุงููุณุชูุฏ ุจุงุณุชุฎุฏุงู ุฎุฏูุฉ ุงูุชุฑุฌูุฉ ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู [Co-op Translator](https://github.com/Azure/co-op-translator). ุจูููุง ูุณุนู ูุชุญููู ุงูุฏูุฉุ ูุฑุฌู ุงูุนูู ุฃู ุงูุชุฑุฌูุงุช ุงูุขููุฉ ูุฏ ุชุญุชูู ุนูู ุฃุฎุทุงุก ุฃู ูุนูููุงุช ุบูุฑ ุฏูููุฉ. ูุฌุจ ุงุนุชุจุงุฑ ุงููุณุชูุฏ ุงูุฃุตูู ุจูุบุชู ุงูุฃุตููุฉ ุงููุตุฏุฑ ุงูุฑุณูู. ููุญุตูู ุนูู ูุนูููุงุช ุญุงุณูุฉุ ูููุตู ุจุงูุงุณุชุนุงูุฉ ุจุชุฑุฌูุฉ ุจุดุฑูุฉ ุงุญุชุฑุงููุฉ. ูุญู ุบูุฑ ูุณุคูููู ุนู ุฃู ุณูุก ููู ุฃู ุชูุณูุฑุงุช ุฎุงุทุฆุฉ ูุงุชุฌุฉ ุนู ุงุณุชุฎุฏุงู ูุฐู ุงูุชุฑุฌูุฉ.