<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "af249a24d4fe4f4de4806adbc3bc9d86",
  "translation_date": "2025-08-27T00:32:32+00:00",
  "source_file": "6-consumer/lessons/1-speech-recognition/pi-speech-to-text.md",
  "language_code": "ar"
}
-->
# ุชุญููู ุงูููุงู ุฅูู ูุต - Raspberry Pi

ูู ูุฐุง ุงูุฌุฒุก ูู ุงูุฏุฑุณุ ุณุชูุชุจ ููุฏูุง ูุชุญููู ุงูููุงู ูู ุงูุตูุช ุงูููุชูุท ุฅูู ูุต ุจุงุณุชุฎุฏุงู ุฎุฏูุฉ ุงูุชุนุฑู ุนูู ุงูููุงู.

## ุฅุฑุณุงู ุงูุตูุช ุฅูู ุฎุฏูุฉ ุงูุชุนุฑู ุนูู ุงูููุงู

ูููู ุฅุฑุณุงู ุงูุตูุช ุฅูู ุฎุฏูุฉ ุงูุชุนุฑู ุนูู ุงูููุงู ุจุงุณุชุฎุฏุงู ูุงุฌูุฉ REST API. ูุงุณุชุฎุฏุงู ุงูุฎุฏูุฉุ ุชุญุชุงุฌ ุฃููุงู ุฅูู ุทูุจ ุฑูุฒ ูุตูู (Access Token)ุ ุซู ุงุณุชุฎุฏุงู ูุฐุง ุงูุฑูุฒ ูููุตูู ุฅูู ูุงุฌูุฉ REST API. ุชูุชูู ุตูุงุญูุฉ ุฑููุฒ ุงููุตูู ุจุนุฏ 10 ุฏูุงุฆูุ ูุฐุง ูุฌุจ ุฃู ูุทูุจ ุงูููุฏ ุงูุฎุงุต ุจู ุงูุฑููุฒ ุจุดูู ููุชุธู ูุถูุงู ุฃููุง ุฏุงุฆููุง ูุญุฏุซุฉ.

### ุงููููุฉ - ุงูุญุตูู ุนูู ุฑูุฒ ูุตูู

1. ุงูุชุญ ูุดุฑูุน `smart-timer` ุนูู ุฌูุงุฒ Raspberry Pi ุงูุฎุงุต ุจู.

1. ูู ุจุฅุฒุงูุฉ ูุธููุฉ `play_audio`. ูู ุชุนุฏ ูุฐู ุงููุธููุฉ ุถุฑูุฑูุฉ ูุฃูู ูุง ุชุฑูุฏ ุฃู ููุฑุฑ ุงููุคูุช ุงูุฐูู ูุง ููุชู.

1. ุฃุถู ุงูุงุณุชูุฑุงุฏ ุงูุชุงูู ุฅูู ุฃุนูู ููู `app.py`:

    ```python
    import requests
    ```

1. ุฃุถู ุงูููุฏ ุงูุชุงูู ููู ุญููุฉ `while True` ูุชุญุฏูุฏ ุจุนุถ ุงูุฅุนุฏุงุฏุงุช ูุฎุฏูุฉ ุงูุชุนุฑู ุนูู ุงูููุงู:

    ```python
    speech_api_key = '<key>'
    location = '<location>'
    language = '<language>'
    ```

    ุงุณุชุจุฏู `<key>` ุจููุชุงุญ API ุงูุฎุงุต ุจููุฑุฏ ุฎุฏูุฉ ุงูุชุนุฑู ุนูู ุงูููุงู. ุงุณุชุจุฏู `<location>` ุจุงููููุน ุงูุฐู ุงุณุชุฎุฏูุชู ุนูุฏ ุฅูุดุงุก ููุฑุฏ ุฎุฏูุฉ ุงูุชุนุฑู ุนูู ุงูููุงู.

    ุงุณุชุจุฏู `<language>` ุจุงุณู ุงููุบุฉ ุงูุชู ุณุชุชุญุฏุซ ุจูุงุ ุนูู ุณุจูู ุงููุซุงู `en-GB` ููุฅูุฌููุฒูุฉุ ุฃู `zn-HK` ูููุงูุชูููุฉ. ููููู ุงูุนุซูุฑ ุนูู ูุงุฆูุฉ ุจุงููุบุงุช ุงููุฏุนููุฉ ูุฃุณูุงุฆูุง ูู [ูุซุงุฆู ุฏุนู ุงููุบุฉ ูุงูุตูุช ุนูู ูููุน Microsoft](https://docs.microsoft.com/azure/cognitive-services/speech-service/language-support?WT.mc_id=academic-17441-jabenn#speech-to-text).

1. ุฃุณูู ุฐููุ ุฃุถู ุงููุธููุฉ ุงูุชุงููุฉ ููุญุตูู ุนูู ุฑูุฒ ุงููุตูู:

    ```python
    def get_access_token():
        headers = {
            'Ocp-Apim-Subscription-Key': speech_api_key
        }
    
        token_endpoint = f'https://{location}.api.cognitive.microsoft.com/sts/v1.0/issuetoken'
        response = requests.post(token_endpoint, headers=headers)
        return str(response.text)
    ```

    ุชุณุชุฏุนู ูุฐู ุงููุธููุฉ ููุทุฉ ููุงูุฉ ูุฅุตุฏุงุฑ ุงูุฑููุฒุ ูุน ุชูุฑูุฑ ููุชุงุญ API ูุนููุงู. ุชุนูุฏ ูุฐู ุงูุงุณุชุฏุนุงุก ุฑูุฒ ูุตูู ูููู ุงุณุชุฎุฏุงูู ูุงุณุชุฏุนุงุก ุฎุฏูุงุช ุงูุชุนุฑู ุนูู ุงูููุงู.

1. ุฃุณูู ุฐููุ ูู ุจุชุนุฑูู ูุธููุฉ ูุชุญููู ุงูููุงู ูู ุงูุตูุช ุงูููุชูุท ุฅูู ูุต ุจุงุณุชุฎุฏุงู REST API:

    ```python
    def convert_speech_to_text(buffer):
    ```

1. ุฏุงุฎู ูุฐู ุงููุธููุฉุ ูู ุจุฅุนุฏุงุฏ ุนููุงู URL ุงูุฎุงุต ุจู REST API ูุงูุนูุงููู:

    ```python
    url = f'https://{location}.stt.speech.microsoft.com/speech/recognition/conversation/cognitiveservices/v1'

    headers = {
        'Authorization': 'Bearer ' + get_access_token(),
        'Content-Type': f'audio/wav; codecs=audio/pcm; samplerate={rate}',
        'Accept': 'application/json;text/xml'
    }

    params = {
        'language': language
    }
    ```

    ูููู ูุฐุง ุงูููุฏ ุจุจูุงุก ุนููุงู URL ุจุงุณุชุฎุฏุงู ูููุน ููุฑุฏ ุฎุฏูุงุช ุงูุชุนุฑู ุนูู ุงูููุงู. ุซู ูููุฃ ุงูุนูุงููู ุจุฑูุฒ ุงููุตูู ูู ูุธููุฉ `get_access_token`ุ ุจุงูุฅุถุงูุฉ ุฅูู ูุนุฏู ุงูุนููุฉ ุงููุณุชุฎุฏู ูุงูุชูุงุท ุงูุตูุช. ูุฃุฎูุฑูุงุ ูุญุฏุฏ ุจุนุถ ุงููุนููุงุช ุงูุชู ูุชู ุชูุฑูุฑูุง ูุน ุนููุงู URL ูุงูุชู ุชุญุชูู ุนูู ุงููุบุฉ ูู ุงูุตูุช.

1. ุฃุณูู ุฐููุ ุฃุถู ุงูููุฏ ุงูุชุงูู ูุงุณุชุฏุนุงุก REST API ูุงุณุชุฑุฌุงุน ุงููุต:

    ```python
    response = requests.post(url, headers=headers, params=params, data=buffer)
    response_json = response.json()

    if response_json['RecognitionStatus'] == 'Success':
        return response_json['DisplayText']
    else:
        return ''
    ```

    ูุณุชุฏุนู ูุฐุง ุงูููุฏ ุนููุงู URL ูููู ุชุดููุฑ ุงููููุฉ JSON ุงูุชู ุชุฃุชู ูู ุงูุงุณุชุฌุงุจุฉ. ูุดูุฑ ุงูุญูู `RecognitionStatus` ูู ุงูุงุณุชุฌุงุจุฉ ุฅูู ูุง ุฅุฐุง ูุงู ุงูุงุณุชุฏุนุงุก ูุฏ ุชููู ูู ุงุณุชุฎุฑุงุฌ ุงูููุงู ูุชุญูููู ุฅูู ูุต ุจูุฌุงุญุ ูุฅุฐุง ูุงูุช ุงููููุฉ `Success`ุ ูุชู ุฅุฑุฌุงุน ุงููุต ูู ุงููุธููุฉุ ูุฅูุง ูุชู ุฅุฑุฌุงุน ุณูุณูุฉ ูุงุฑุบุฉ.

1. ููู ุญููุฉ `while True:`ุ ูู ุจุชุนุฑูู ูุธููุฉ ููุนุงูุฌุฉ ุงููุต ุงูุฐู ุชู ุฅุฑุฌุงุนู ูู ุฎุฏูุฉ ุชุญููู ุงูููุงู ุฅูู ูุต. ุณุชููู ูุฐู ุงููุธููุฉ ููุท ุจุทุจุงุนุฉ ุงููุต ุฅูู ูุญุฏุฉ ุงูุชุญูู ูู ุงูููุช ุงูุญุงูู.

    ```python
    def process_text(text):
        print(text)
    ```

1. ุฃุฎูุฑูุงุ ุงุณุชุจุฏู ุงุณุชุฏุนุงุก `play_audio` ูู ุญููุฉ `while True` ุจุงุณุชุฏุนุงุก ูุธููุฉ `convert_speech_to_text`ุ ูุน ุชูุฑูุฑ ุงููุต ุฅูู ูุธููุฉ `process_text`:

    ```python
    text = convert_speech_to_text(buffer)
    process_text(text)
    ```

1. ูู ุจุชุดุบูู ุงูููุฏ. ุงุถุบุท ุนูู ุงูุฒุฑ ูุชุญุฏุซ ูู ุงููููุฑูููู. ุญุฑุฑ ุงูุฒุฑ ุนูุฏ ุงูุงูุชูุงุกุ ูุณูุชู ุชุญููู ุงูุตูุช ุฅูู ูุต ูุทุจุงุนุฉ ุงููุต ุฅูู ูุญุฏุฉ ุงูุชุญูู.

    ```output
    pi@raspberrypi:~/smart-timer $ python3 app.py 
    Hello world.
    Welcome to IoT for beginners.
    ```

    ุฌุฑุจ ุฃููุงุนูุง ูุฎุชููุฉ ูู ุงูุฌููุ ุจุงูุฅุถุงูุฉ ุฅูู ุงูุฌูู ุงูุชู ุชุญุชูู ุนูู ูููุงุช ุชุจุฏู ูุชุดุงุจูุฉ ูููู ููุง ูุนุงูู ูุฎุชููุฉ. ุนูู ุณุจูู ุงููุซุงูุ ุฅุฐุง ููุช ุชุชุญุฏุซ ุจุงููุบุฉ ุงูุฅูุฌููุฒูุฉุ ูู "I want to buy two bananas and an apple too"ุ ููุงุญุธ ููู ุณูุชู ุงุณุชุฎุฏุงู ุงููููุงุช ุงูุตุญูุญุฉ "to"ุ "two"ุ ู"too" ุจูุงุกู ุนูู ุณูุงู ุงููููุฉุ ูููุณ ููุท ุตูุชูุง.

> ๐ ููููู ุงูุนุซูุฑ ุนูู ูุฐุง ุงูููุฏ ูู ุงููุฌูุฏ [code-speech-to-text/pi](../../../../../6-consumer/lessons/1-speech-recognition/code-speech-to-text/pi).

๐ ููุฏ ูุฌุญ ุจุฑูุงูุฌ ุชุญููู ุงูููุงู ุฅูู ูุต ุงูุฎุงุต ุจู!

---

**ุฅุฎูุงุก ุงููุณุคูููุฉ**:  
ุชู ุชุฑุฌูุฉ ูุฐุง ุงููุณุชูุฏ ุจุงุณุชุฎุฏุงู ุฎุฏูุฉ ุงูุชุฑุฌูุฉ ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู [Co-op Translator](https://github.com/Azure/co-op-translator). ุจูููุง ูุณุนู ูุชุญููู ุงูุฏูุฉุ ูุฑุฌู ุงูุนูู ุฃู ุงูุชุฑุฌูุงุช ุงูุขููุฉ ูุฏ ุชุญุชูู ุนูู ุฃุฎุทุงุก ุฃู ูุนูููุงุช ุบูุฑ ุฏูููุฉ. ูุฌุจ ุงุนุชุจุงุฑ ุงููุณุชูุฏ ุงูุฃุตูู ุจูุบุชู ุงูุฃุตููุฉ ุงููุตุฏุฑ ุงูููุซูู. ููุญุตูู ุนูู ูุนูููุงุช ุญุงุณูุฉุ ูููุตู ุจุงูุงุณุชุนุงูุฉ ุจุชุฑุฌูุฉ ุจุดุฑูุฉ ุงุญุชุฑุงููุฉ. ูุญู ุบูุฑ ูุณุคูููู ุนู ุฃู ุณูุก ููู ุฃู ุชูุณูุฑุงุช ุฎุงุทุฆุฉ ุชูุดุฃ ุนู ุงุณุชุฎุฏุงู ูุฐู ุงูุชุฑุฌูุฉ.