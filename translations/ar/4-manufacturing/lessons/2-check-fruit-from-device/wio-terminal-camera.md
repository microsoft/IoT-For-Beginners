<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "160be8c0f558687f6686dca64f10f739",
  "translation_date": "2025-08-26T21:54:23+00:00",
  "source_file": "4-manufacturing/lessons/2-check-fruit-from-device/wio-terminal-camera.md",
  "language_code": "ar"
}
-->
# ุงูุชูุงุท ุตูุฑุฉ - Wio Terminal

ูู ูุฐุง ุงูุฌุฒุก ูู ุงูุฏุฑุณุ ุณุชุถูู ูุงููุฑุง ุฅูู Wio Terminal ุงูุฎุงุต ุจูุ ูุชูุชูุท ุตูุฑูุง ูููุง.

## ุงูุฃุฌูุฒุฉ

ูุญุชุงุฌ Wio Terminal ุฅูู ูุงููุฑุง.

ุงููุงููุฑุง ุงูุชู ุณุชุณุชุฎุฏููุง ูู [ArduCam Mini 2MP Plus](https://www.arducam.com/product/arducam-2mp-spi-camera-b0067-arduino/). ูุฐู ูุงููุฑุง ุจุฏูุฉ 2 ููุฌุงุจูุณู ุชุนุชูุฏ ุนูู ูุณุชุดุนุฑ ุงูุตูุฑ OV2640. ุชุชูุงุตู ุนุจุฑ ูุงุฌูุฉ SPI ูุงูุชูุงุท ุงูุตูุฑุ ูุชุณุชุฎุฏู I2C ูุชูููู ุงููุณุชุดุนุฑ.

## ุชูุตูู ุงููุงููุฑุง

ูุง ุชุญุชูู ArduCam ุนูู ููุจุณ Groveุ ุจู ุชุชุตู ุจูู ูู SPI ูI2C ุนุจุฑ ุฏุจุงุจูุณ GPIO ุนูู Wio Terminal.

### ุงููููุฉ - ุชูุตูู ุงููุงููุฑุง

ูู ุจุชูุตูู ุงููุงููุฑุง.

![ูุณุชุดุนุฑ ArduCam](../../../../../translated_images/arducam.20e4e4cbb268296570b5914e20d6c349fc42ddac9ed4e1b9deba2188204eebae.ar.png)

1. ูุฌุจ ุชูุตูู ุงูุฏุจุงุจูุณ ุงูููุฌูุฏุฉ ูู ูุงุนุฏุฉ ArduCam ุจุฏุจุงุจูุณ GPIO ุนูู Wio Terminal. ูุชุณููู ุงูุนุซูุฑ ุนูู ุงูุฏุจุงุจูุณ ุงูุตุญูุญุฉุ ูู ุจุชุซุจูุช ููุตู ุฏุจุงุจูุณ GPIO ุงูุฐู ูุฃุชู ูุน Wio Terminal ุญูู ุงูุฏุจุงุจูุณ:

    ![Wio Terminal ูุน ููุตู ุฏุจุงุจูุณ GPIO](../../../../../translated_images/wio-terminal-pin-sticker.b90b1535937b84bd00d853f0004aea74fac2aec04b43f14b887796b2633f855e.ar.png)

1. ุจุงุณุชุฎุฏุงู ุฃุณูุงู ุงูุชูุตููุ ูู ุจุฅุฌุฑุงุก ุงูุงุชุตุงูุงุช ุงูุชุงููุฉ:

    | ุฏุจูุณ ArduCAM | ุฏุจูุณ Wio Terminal | ุงููุตู                                 |
    | ------------ | ----------------- | ------------------------------------- |
    | CS           | 24 (SPI_CS)       | ุงุฎุชูุงุฑ ุดุฑูุญุฉ SPI                      |
    | MOSI         | 19 (SPI_MOSI)     | ุฎุฑุฌ ูุญุฏุฉ ุงูุชุญูู SPIุ ุฅุฏุฎุงู ุงูุทุฑููุฉ    |
    | MISO         | 21 (SPI_MISO)     | ุฅุฏุฎุงู ูุญุฏุฉ ุงูุชุญูู SPIุ ุฎุฑุฌ ุงูุทุฑููุฉ    |
    | SCK          | 23 (SPI_SCLK)     | ุณุงุนุฉ SPI ุงูุชุณูุณููุฉ                    |
    | GND          | 6 (GND)           | ุงูุฃุฑุถู - 0 ูููุช                       |
    | VCC          | 4 (5V)            | ูุตุฏุฑ ุทุงูุฉ 5 ูููุช                      |
    | SDA          | 3 (I2C1_SDA)      | ุจูุงูุงุช ุชุณูุณููุฉ I2C                    |
    | SCL          | 5 (I2C1_SCL)      | ุณุงุนุฉ ุชุณูุณููุฉ I2C                      |

    ![Wio Terminal ูุชุตู ุจู ArduCam ุจุงุณุชุฎุฏุงู ุฃุณูุงู ุงูุชูุตูู](../../../../../translated_images/arducam-wio-terminal-connections.a4d5a4049bdb5ab800a2877389fc6ecf5e4ff307e6451ff56c517e6786467d0a.ar.png)

    ุชููุฑ ุงุชุตุงูุงุช GND ูVCC ูุตุฏุฑ ุทุงูุฉ 5 ูููุช ูู ArduCam. ุชุนูู ุงููุงููุฑุง ุจุฌูุฏ 5 ูููุชุ ุนูู ุนูุณ ูุณุชุดุนุฑุงุช Grove ุงูุชู ุชุนูู ุจุฌูุฏ 3 ูููุช. ูุฃุชู ูุฐุง ุงูุทุงูุฉ ูุจุงุดุฑุฉ ูู ุงุชุตุงู USB-C ุงูุฐู ูุบุฐู ุงูุฌูุงุฒ.

    > ๐ ุจุงููุณุจุฉ ูุงุชุตุงู SPIุ ูุง ุชุฒุงู ุชุณููุงุช ุงูุฏุจุงุจูุณ ุนูู ArduCam ูุฃุณูุงุก ุฏุจุงุจูุณ Wio Terminal ุงููุณุชุฎุฏูุฉ ูู ุงูููุฏ ุชุณุชุฎุฏู ุงูุชุณููุฉ ุงููุฏููุฉ. ุณุชุณุชุฎุฏู ุงูุชุนูููุงุช ูู ูุฐุง ุงูุฏุฑุณ ุงูุชุณููุฉ ุงูุฌุฏูุฏุฉุ ุจุงุณุชุซูุงุก ุนูุฏูุง ุชูุณุชุฎุฏู ุฃุณูุงุก ุงูุฏุจุงุจูุณ ูู ุงูููุฏ.

1. ููููู ุงูุขู ุชูุตูู Wio Terminal ุจุฌูุงุฒ ุงูููุจููุชุฑ ุงูุฎุงุต ุจู.

## ุจุฑูุฌุฉ ุงูุฌูุงุฒ ููุงุชุตุงู ุจุงููุงููุฑุง

ูููู ุงูุขู ุจุฑูุฌุฉ Wio Terminal ูุงุณุชุฎุฏุงู ูุงููุฑุง ArduCAM ุงููุฑููุฉ.

### ุงููููุฉ - ุจุฑูุฌุฉ ุงูุฌูุงุฒ ููุงุชุตุงู ุจุงููุงููุฑุง

1. ูู ุจุฅูุดุงุก ูุดุฑูุน ุฌุฏูุฏ ูู Wio Terminal ุจุงุณุชุฎุฏุงู PlatformIO. ูู ุจุชุณููุฉ ูุฐุง ุงููุดุฑูุน `fruit-quality-detector`. ุฃุถู ุงูููุฏ ูู ูุธููุฉ `setup` ูุชูููู ุงููููุฐ ุงูุชุณูุณูู.

1. ุฃุถู ุงูููุฏ ููุงุชุตุงู ุจุดุจูุฉ WiFiุ ูุน ุจูุงูุงุช ุงุนุชูุงุฏ WiFi ุงูุฎุงุตุฉ ุจู ูู ููู ูุณูู `config.h`. ูุง ุชูุณู ุฅุถุงูุฉ ุงูููุชุจุงุช ุงููุทููุจุฉ ุฅูู ููู `platformio.ini`.

1. ููุชุจุฉ ArduCam ุบูุฑ ูุชููุฑุฉ ูููุชุจุฉ Arduino ูููู ุชุซุจูุชูุง ูู ููู `platformio.ini`. ุจุฏูุงู ูู ุฐููุ ุณุชุญุชุงุฌ ุฅูู ุชุซุจูุชูุง ูู ุงููุตุฏุฑ ูู ุตูุญุฉ GitHub ุงูุฎุงุตุฉ ุจูู. ููููู ุงูุญุตูู ุนูููุง ุฅูุง ุนู ุทุฑูู:

    * ุงุณุชูุณุงุฎ ุงููุณุชูุฏุน ูู [https://github.com/ArduCAM/Arduino.git](https://github.com/ArduCAM/Arduino.git)
    * ุงูุชูุฌู ุฅูู ุงููุณุชูุฏุน ุนูู GitHub ูู [github.com/ArduCAM/Arduino](https://github.com/ArduCAM/Arduino) ูุชูุฒูู ุงูููุฏ ูููู ูุถุบูุท ูู ุฒุฑ **Code**

1. ุชุญุชุงุฌ ููุท ุฅูู ูุฌูุฏ `ArduCAM` ูู ูุฐุง ุงูููุฏ. ุงูุณุฎ ุงููุฌูุฏ ุจุงููุงูู ุฅูู ูุฌูุฏ `lib` ูู ูุดุฑูุนู.

    > โ๏ธ ูุฌุจ ูุณุฎ ุงููุฌูุฏ ุจุงููุงููุ ุจุญูุซ ูููู ุงูููุฏ ูู `lib/ArduCam`. ูุง ุชูู ููุท ุจูุณุฎ ูุญุชููุงุช ูุฌูุฏ `ArduCam` ุฅูู ูุฌูุฏ `lib`ุ ุจู ุงูุณุฎ ุงููุฌูุฏ ุจุงููุงูู.

1. ูุนูู ููุฏ ููุชุจุฉ ArduCam ูุน ุฃููุงุน ูุชุนุฏุฏุฉ ูู ุงููุงููุฑุงุช. ูุชู ุชูููู ููุน ุงููุงููุฑุง ุงูุฐู ุชุฑูุฏ ุงุณุชุฎุฏุงูู ุจุงุณุชุฎุฏุงู ุฃุนูุงู ุงููุชุฑุฌู - ููุฐุง ูุญุงูุธ ุนูู ุญุฌู ุงูููุชุจุฉ ุงููุฏูุฌุฉ ุตุบูุฑูุง ูุฏุฑ ุงูุฅููุงู ุนู ุทุฑูู ุฅุฒุงูุฉ ุงูููุฏ ุงูุฎุงุต ุจุงููุงููุฑุงุช ุงูุชู ูุง ุชุณุชุฎุฏููุง. ูุชูููู ุงูููุชุจุฉ ููุงููุฑุง OV2640ุ ุฃุถู ูุง ููู ุฅูู ููุงูุฉ ููู `platformio.ini`:

    ```ini
    build_flags =
        -DARDUCAM_SHIELD_V2
        -DOV2640_CAM
    ```

    ูุฐุง ูุญุฏุฏ ุนูููู ูููุชุฑุฌู:

      * `ARDUCAM_SHIELD_V2` ูุฅุฎุจุงุฑ ุงูููุชุจุฉ ุฃู ุงููุงููุฑุง ููุฌูุฏุฉ ุนูู ููุญุฉ Arduinoุ ุชูุนุฑู ุจุงุณู ุงูุฏุฑุน.
      * `OV2640_CAM` ูุฅุฎุจุงุฑ ุงูููุชุจุฉ ุจุชุถููู ุงูููุฏ ุงูุฎุงุต ุจูุงููุฑุง OV2640 ููุท.

1. ุฃุถู ููู ุฑุฃุณ ุฅูู ูุฌูุฏ `src` ูุณูู `camera.h`. ุณูุญุชูู ูุฐุง ุงูููู ุนูู ุงูููุฏ ููุชูุงุตู ูุน ุงููุงููุฑุง. ุฃุถู ุงูููุฏ ุงูุชุงูู ุฅูู ูุฐุง ุงูููู:

    ```cpp
    #pragma once
    
    #include <ArduCAM.h>
    #include <Wire.h>
    
    class Camera
    {
    public:
        Camera(int format, int image_size) : _arducam(OV2640, PIN_SPI_SS)
        {
            _format = format;
            _image_size = image_size;
        }
    
        bool init()
        {
            // Reset the CPLD
            _arducam.write_reg(0x07, 0x80);
            delay(100);
    
            _arducam.write_reg(0x07, 0x00);
            delay(100);
    
            // Check if the ArduCAM SPI bus is OK
            _arducam.write_reg(ARDUCHIP_TEST1, 0x55);
            if (_arducam.read_reg(ARDUCHIP_TEST1) != 0x55)
            {
                return false;
            }
                
            // Change MCU mode
            _arducam.set_mode(MCU2LCD_MODE);
    
            uint8_t vid, pid;
    
            // Check if the camera module type is OV2640
            _arducam.wrSensorReg8_8(0xff, 0x01);
            _arducam.rdSensorReg8_8(OV2640_CHIPID_HIGH, &vid);
            _arducam.rdSensorReg8_8(OV2640_CHIPID_LOW, &pid);
            if ((vid != 0x26) && ((pid != 0x41) || (pid != 0x42)))
            {
                return false;
            }
            
            _arducam.set_format(_format);
            _arducam.InitCAM();
            _arducam.OV2640_set_JPEG_size(_image_size);
            _arducam.OV2640_set_Light_Mode(Auto);
            _arducam.OV2640_set_Special_effects(Normal);
            delay(1000);
    
            return true;
        }
    
        void startCapture()
        {
            _arducam.flush_fifo();
            _arducam.clear_fifo_flag();
            _arducam.start_capture();
        }
    
        bool captureReady()
        {
            return _arducam.get_bit(ARDUCHIP_TRIG, CAP_DONE_MASK);
        }
    
        bool readImageToBuffer(byte **buffer, uint32_t &buffer_length)
        {
            if (!captureReady()) return false;
    
            // Get the image file length
            uint32_t length = _arducam.read_fifo_length();
            buffer_length = length;
    
            if (length >= MAX_FIFO_SIZE)
            {
                return false;
            }
            if (length == 0)
            {
                return false;
            }
    
            // create the buffer
            byte *buf = new byte[length];
    
            uint8_t temp = 0, temp_last = 0;
            int i = 0;
            uint32_t buffer_pos = 0;
            bool is_header = false;
    
            _arducam.CS_LOW();
            _arducam.set_fifo_burst();
            
            while (length--)
            {
                temp_last = temp;
                temp = SPI.transfer(0x00);
                //Read JPEG data from FIFO
                if ((temp == 0xD9) && (temp_last == 0xFF)) //If find the end ,break while,
                {
                    buf[buffer_pos] = temp;
    
                    buffer_pos++;
                    i++;
                    
                    _arducam.CS_HIGH();
                }
                if (is_header == true)
                {
                    //Write image data to buffer if not full
                    if (i < 256)
                    {
                        buf[buffer_pos] = temp;
                        buffer_pos++;
                        i++;
                    }
                    else
                    {
                        _arducam.CS_HIGH();
    
                        i = 0;
                        buf[buffer_pos] = temp;
    
                        buffer_pos++;
                        i++;
    
                        _arducam.CS_LOW();
                        _arducam.set_fifo_burst();
                    }
                }
                else if ((temp == 0xD8) & (temp_last == 0xFF))
                {
                    is_header = true;
    
                    buf[buffer_pos] = temp_last;
                    buffer_pos++;
                    i++;
    
                    buf[buffer_pos] = temp;
                    buffer_pos++;
                    i++;
                }
            }
            
            _arducam.clear_fifo_flag();
    
            _arducam.set_format(_format);
            _arducam.InitCAM();
            _arducam.OV2640_set_JPEG_size(_image_size);
    
            // return the buffer
            *buffer = buf;
        }
    
    private:
        ArduCAM _arducam;
        int _format;
        int _image_size;
    };
    ```

    ูุฐุง ููุฏ ููุฎูุถ ุงููุณุชูู ูููู ุจุชูููู ุงููุงููุฑุง ุจุงุณุชุฎุฏุงู ููุชุจุงุช ArduCamุ ููุณุชุฎุฑุฌ ุงูุตูุฑ ุนูุฏ ุงูุญุงุฌุฉ ุจุงุณุชุฎุฏุงู ูุงูู SPI. ูุฐุง ุงูููุฏ ูุญุฏุฏ ุฌุฏูุง ูู ArduCamุ ูุฐุง ูุง ุชุญุชุงุฌ ุฅูู ุงูููู ุจุดุฃู ููููุฉ ุนููู ูู ูุฐู ุงููุฑุญูุฉ.

1. ูู `main.cpp`ุ ุฃุถู ุงูููุฏ ุงูุชุงูู ุชุญุช ุนุจุงุฑุงุช `include` ุงูุฃุฎุฑู ูุชุถููู ูุฐุง ุงูููู ุงูุฌุฏูุฏ ูุฅูุดุงุก ูุซูู ููุฆุฉ ุงููุงููุฑุง:

    ```cpp
    #include "camera.h"

    Camera camera = Camera(JPEG, OV2640_640x480);
    ```

    ูุฐุง ููุดุฆ `Camera` ูุญูุธ ุงูุตูุฑ ููููุงุช JPEG ุจุฏูุฉ 640 ร 480. ุนูู ุงูุฑุบู ูู ุฏุนู ุฏูุงุช ุฃุนูู (ุญุชู 3280x2464)ุ ูุฅู ุงููุตูู ูุนูู ุนูู ุตูุฑ ุฃุตุบุฑ ุจูุซูุฑ (227x227)ุ ูุฐุง ูุง ุชูุฌุฏ ุญุงุฌุฉ ูุงูุชูุงุท ูุฅุฑุณุงู ุตูุฑ ุฃูุจุฑ.

1. ุฃุถู ุงูููุฏ ุงูุชุงูู ุฃุณูู ูุฐุง ูุชุนุฑูู ูุธููุฉ ูุชูููู ุงููุงููุฑุง:

    ```cpp
    void setupCamera()
    {
        pinMode(PIN_SPI_SS, OUTPUT);
        digitalWrite(PIN_SPI_SS, HIGH);
    
        Wire.begin();
        SPI.begin();
    
        if (!camera.init())
        {
            Serial.println("Error setting up the camera!");
        }
    }
    ```

    ุชุจุฏุฃ ูุธููุฉ `setupCamera` ุจุชูููู ุฏุจูุณ ุงุฎุชูุงุฑ ุดุฑูุญุฉ SPI (`PIN_SPI_SS`) ููุฑุชูุนุ ููุง ูุฌุนู Wio Terminal ูุญุฏุฉ ุงูุชุญูู SPI. ุซู ุชุจุฏุฃ ูุงููุงุช I2C ูSPI. ูุฃุฎูุฑูุงุ ุชููู ุจุชููุฆุฉ ูุฆุฉ ุงููุงููุฑุง ุงูุชู ุชูููู ุฅุนุฏุงุฏุงุช ูุณุชุดุนุฑ ุงููุงููุฑุง ูุชุถูู ุฃู ูู ุดูุก ูุชุตู ุจุดูู ุตุญูุญ.

1. ูู ุจุงุณุชุฏุนุงุก ูุฐู ุงููุธููุฉ ูู ููุงูุฉ ูุธููุฉ `setup`:

    ```cpp
    setupCamera();
    ```

1. ูู ุจุจูุงุก ูุฑูุน ูุฐุง ุงูููุฏุ ูุชุญูู ูู ุงูุฅุฎุฑุงุฌ ูู ุงูุดุงุดุฉ ุงูุชุณูุณููุฉ. ุฅุฐุง ุฑุฃูุช `Error setting up the camera!` ูุชุญูู ูู ุงูุฃุณูุงู ููุชุฃูุฏ ูู ุฃู ุฌููุน ุงููุงุจูุงุช ุชูุตู ุงูุฏุจุงุจูุณ ุงูุตุญูุญุฉ ุนูู ArduCam ุจุงูุฏุจุงุจูุณ ุงูุตุญูุญุฉ ุนูู GPIO ูู Wio Terminalุ ูุฃู ุฌููุน ุฃุณูุงู ุงูุชูุตูู ูุซุจุชุฉ ุจุดูู ุตุญูุญ.

## ุงูุชูุงุท ุตูุฑุฉ

ูููู ุงูุขู ุจุฑูุฌุฉ Wio Terminal ูุงูุชูุงุท ุตูุฑุฉ ุนูุฏ ุงูุถุบุท ุนูู ุฒุฑ.

### ุงููููุฉ - ุงูุชูุงุท ุตูุฑุฉ

1. ุชุนูู ุงููุชุญููุงุช ุงูุฏูููุฉ ุนูู ุชุดุบูู ุงูููุฏ ุงูุฎุงุต ุจู ุจุดูู ูุณุชูุฑุ ูุฐุง ููุณ ูู ุงูุณูู ุชุดุบูู ุดูุก ูุซู ุงูุชูุงุท ุตูุฑุฉ ุฏูู ุงูุงุณุชุฌุงุจุฉ ููุณุชุดุนุฑ. ูุญุชูู Wio Terminal ุนูู ุฃุฒุฑุงุฑุ ูุฐุง ูููู ุฅุนุฏุงุฏ ุงููุงููุฑุง ูุชุดุบูููุง ุจูุงุณุทุฉ ุฃุญุฏ ุงูุฃุฒุฑุงุฑ. ุฃุถู ุงูููุฏ ุงูุชุงูู ุฅูู ููุงูุฉ ูุธููุฉ `setup` ูุชูููู ุฒุฑ C (ุฃุญุฏ ุงูุฃุฒุฑุงุฑ ุงูุซูุงุซุฉ ูู ุงูุฃุนููุ ุงูุฃูุฑุจ ุฅูู ููุชุงุญ ุงูุชุดุบูู).

    ![ุฒุฑ C ูู ุงูุฃุนูู ุจุงููุฑุจ ูู ููุชุงุญ ุงูุชุดุบูู](../../../../../translated_images/wio-terminal-c-button.73df3cb1c1445ea07ee98316af0e7925fcb43135df0abed58d3d4822b2589c3b.ar.png)

    ```cpp
    pinMode(WIO_KEY_C, INPUT_PULLUP);
    ```

    ูุถุน `INPUT_PULLUP` ูุนูุณ ุงูุฅุฏุฎุงู ุจุดูู ุฃุณุงุณู. ุนูู ุณุจูู ุงููุซุงูุ ุนุงุฏุฉู ูุง ูุฑุณู ุงูุฒุฑ ุฅุดุงุฑุฉ ููุฎูุถุฉ ุนูุฏูุง ูุง ูุชู ุงูุถุบุท ุนูููุ ูุฅุดุงุฑุฉ ุนุงููุฉ ุนูุฏ ุงูุถุบุท ุนููู. ุนูุฏ ุถุจุทู ุนูู `INPUT_PULLUP`ุ ูุฑุณู ุฅุดุงุฑุฉ ุนุงููุฉ ุนูุฏูุง ูุง ูุชู ุงูุถุบุท ุนูููุ ูุฅุดุงุฑุฉ ููุฎูุถุฉ ุนูุฏ ุงูุถุบุท ุนููู.

1. ุฃุถู ูุธููุฉ ูุงุฑุบุฉ ููุงุณุชุฌุงุจุฉ ูุถุบุท ุงูุฒุฑ ูุจู ูุธููุฉ `loop`:

    ```cpp
    void buttonPressed()
    {
        
    }
    ```

1. ูู ุจุงุณุชุฏุนุงุก ูุฐู ุงููุธููุฉ ูู ุทุฑููุฉ `loop` ุนูุฏูุง ูุชู ุงูุถุบุท ุนูู ุงูุฒุฑ:

    ```cpp
    void loop()
    {
        if (digitalRead(WIO_KEY_C) == LOW)
        {
            buttonPressed();
            delay(2000);
        }
    
        delay(200);
    }
    ```

    ูุชุญูู ูุฐุง ุงูููุชุงุญ ููุนุฑูุฉ ูุง ุฅุฐุง ูุงู ุงูุฒุฑ ูุถุบูุทูุง. ุฅุฐุง ุชู ุงูุถุบุท ุนูููุ ูุชู ุงุณุชุฏุนุงุก ูุธููุฉ `buttonPressed`ุ ูุชุชุฃุฎุฑ ุงูุญููุฉ ููุฏุฉ ุซุงููุชูู. ูุฐุง ูุฅุชุงุญุฉ ุงูููุช ูุชุญุฑูุฑ ุงูุฒุฑ ุญุชู ูุง ูุชู ุชุณุฌูู ุงูุถุบุท ุงูุทููู ูุฑุชูู.

    > ๐ ุงูุฒุฑ ูู Wio Terminal ูุถุจูุท ุนูู `INPUT_PULLUP`ุ ูุฐุง ูุฑุณู ุฅุดุงุฑุฉ ุนุงููุฉ ุนูุฏูุง ูุง ูุชู ุงูุถุบุท ุนูููุ ูุฅุดุงุฑุฉ ููุฎูุถุฉ ุนูุฏ ุงูุถุบุท ุนููู.

1. ุฃุถู ุงูููุฏ ุงูุชุงูู ุฅูู ูุธููุฉ `buttonPressed`:

    ```cpp
    camera.startCapture();
 
    while (!camera.captureReady())
        delay(100);

    Serial.println("Image captured");

    byte *buffer;
    uint32_t length;

    if (camera.readImageToBuffer(&buffer, length))
    {
        Serial.print("Image read to buffer with length ");
        Serial.println(length);

        delete(buffer);
    }
    ```

    ูุจุฏุฃ ูุฐุง ุงูููุฏ ุงูุชูุงุท ุงููุงููุฑุง ุนู ุทุฑูู ุงุณุชุฏุนุงุก `startCapture`. ูุง ุชุนูู ุฃุฌูุฒุฉ ุงููุงููุฑุง ุนู ุทุฑูู ุฅุนุงุฏุฉ ุงูุจูุงูุงุช ุนูุฏ ุทูุจูุงุ ุจู ุชุฑุณู ุชุนูููุงุช ูุจุฏุก ุงูุงูุชูุงุทุ ูุณุชุนูู ุงููุงููุฑุง ูู ุงูุฎูููุฉ ูุงูุชูุงุท ุงูุตูุฑุฉุ ูุชุญููููุง ุฅูู JPEGุ ูุชุฎุฒูููุง ูู ุฐุงูุฑุฉ ูุญููุฉ ุนูู ุงููุงููุฑุง ููุณูุง. ุซู ูุชุญูู ุงุณุชุฏุนุงุก `captureReady` ููุนุฑูุฉ ูุง ุฅุฐุง ูุงู ุงูุชูุงุท ุงูุตูุฑุฉ ูุฏ ุงูุชูู.

    ุจูุฌุฑุฏ ุงูุชูุงุก ุงูุงูุชูุงุทุ ูุชู ูุณุฎ ุจูุงูุงุช ุงูุตูุฑุฉ ูู ุงูุฐุงูุฑุฉ ุงููุคูุชุฉ ุนูู ุงููุงููุฑุง ุฅูู ุฐุงูุฑุฉ ูุญููุฉ (ูุตูููุฉ ูู ุงูุจุงูุชุงุช) ุจุงุณุชุฎุฏุงู ุงุณุชุฏุนุงุก `readImageToBuffer`. ูุชู ุฅุฑุณุงู ุทูู ุงูุฐุงูุฑุฉ ุงููุคูุชุฉ ุฅูู ุงูุดุงุดุฉ ุงูุชุณูุณููุฉ.

1. ูู ุจุจูุงุก ูุฑูุน ูุฐุง ุงูููุฏุ ูุชุญูู ูู ุงูุฅุฎุฑุงุฌ ุนูู ุงูุดุงุดุฉ ุงูุชุณูุณููุฉ. ูู ูู ูุฑุฉ ุชุถุบุท ูููุง ุนูู ุฒุฑ Cุ ุณูุชู ุงูุชูุงุท ุตูุฑุฉ ูุณุชุฑู ุญุฌู ุงูุตูุฑุฉ ูุชู ุฅุฑุณุงูู ุฅูู ุงูุดุงุดุฉ ุงูุชุณูุณููุฉ.

    ```output
    Connecting to WiFi..
    Connected!
    Image captured
    Image read to buffer with length 9224
    Image captured
    Image read to buffer with length 11272
    ```

    ุณุชููู ุฃุญุฌุงู ุงูุตูุฑ ูุฎุชููุฉ. ูุชู ุถุบุทูุง ููููุงุช JPEG ูุญุฌู ููู JPEG ูุฏูุฉ ูุนููุฉ ูุนุชูุฏ ุนูู ูุง ูู ููุฌูุฏ ูู ุงูุตูุฑุฉ.

> ๐ ููููู ุงูุนุซูุฑ ุนูู ูุฐุง ุงูููุฏ ูู ูุฌูุฏ [code-camera/wio-terminal](../../../../../4-manufacturing/lessons/2-check-fruit-from-device/code-camera/wio-terminal).

๐ ููุฏ ูุฌุญุช ูู ุงูุชูุงุท ุงูุตูุฑ ุจุงุณุชุฎุฏุงู Wio Terminal ุงูุฎุงุต ุจู.

## ุงุฎุชูุงุฑู - ุงูุชุญูู ูู ุตูุฑ ุงููุงููุฑุง ุจุงุณุชุฎุฏุงู ุจุทุงูุฉ SD

ุฃุณูู ุทุฑููุฉ ูุฑุคูุฉ ุงูุตูุฑ ุงูุชู ุชู ุงูุชูุงุทูุง ุจูุงุณุทุฉ ุงููุงููุฑุง ูู ูุชุงุจุชูุง ุฅูู ุจุทุงูุฉ SD ูู Wio Terminal ุซู ุนุฑุถูุง ุนูู ุฌูุงุฒ ุงูููุจููุชุฑ ุงูุฎุงุต ุจู. ูู ุจูุฐู ุงูุฎุทูุฉ ุฅุฐุง ูุงู ูุฏูู ุจุทุงูุฉ microSD ุงุญุชูุงุทูุฉ ูููุจุณ microSD ูู ุฌูุงุฒ ุงูููุจููุชุฑ ุงูุฎุงุต ุจูุ ุฃู ูุญูู.

ูุฏุนู Wio Terminal ููุท ุจุทุงูุงุช microSD ุจุณุนุฉ ุชุตู ุฅูู 16 ุฌูุฌุงุจุงูุช. ุฅุฐุง ูุงู ูุฏูู ุจุทุงูุฉ SD ุฃูุจุฑุ ููู ุชุนูู.

### ุงููููุฉ - ุงูุชุญูู ูู ุตูุฑ ุงููุงููุฑุง ุจุงุณุชุฎุฏุงู ุจุทุงูุฉ SD

1. ูู ุจุชููุฆุฉ ุจุทุงูุฉ microSD ูู FAT32 ุฃู exFAT ุจุงุณุชุฎุฏุงู ุงูุชุทุจููุงุช ุฐุงุช ุงูุตูุฉ ุนูู ุฌูุงุฒ ุงูููุจููุชุฑ ุงูุฎุงุต ุจู (Disk Utility ุนูู macOSุ File Explorer ุนูู Windowsุ ุฃู ุจุงุณุชุฎุฏุงู ุฃุฏูุงุช ุณุทุฑ ุงูุฃูุงูุฑ ูู Linux).

1. ุฃุฏุฎู ุจุทุงูุฉ microSD ูู ุงูููุจุณ ุฃุณูู ููุชุงุญ ุงูุชุดุบูู ูุจุงุดุฑุฉ. ุชุฃูุฏ ูู ุฃููุง ุฏุฎูุช ุจุงููุงูู ุญุชู ุชููุฑ ูุชุจูู ูู ููุงููุงุ ูุฏ ุชุญุชุงุฌ ุฅูู ุฏูุนูุง ุจุงุณุชุฎุฏุงู ุธูุฑ ุฃู ุฃุฏุงุฉ ุฑููุนุฉ.

1. ุฃุถู ุนุจุงุฑุงุช ุงูุชุถููู ุงูุชุงููุฉ ูู ุฃุนูู ููู `main.cpp`:

    ```cpp
    #include "SD/Seeed_SD.h"
    #include <Seeed_FS.h>
    ```

1. ุฃุถู ุงููุธููุฉ ุงูุชุงููุฉ ูุจู ูุธููุฉ `setup`:

    ```cpp
    void setupSDCard()
    {
        while (!SD.begin(SDCARD_SS_PIN, SDCARD_SPI))
        {
            Serial.println("SD Card Error");
        }
    }
    ```

    ูููู ูุฐุง ุจุชูููู ุจุทุงูุฉ SD ุจุงุณุชุฎุฏุงู ูุงูู SPI.

1. ูู ุจุงุณุชุฏุนุงุก ูุฐู ุงููุธููุฉ ูู ูุธููุฉ `setup`:

    ```cpp
    setupSDCard();
    ```

1. ุฃุถู ุงูููุฏ ุงูุชุงูู ููู ูุธููุฉ `buttonPressed`:

    ```cpp
    int fileNum = 1;

    void saveToSDCard(byte *buffer, uint32_t length)
    {
        char buff[16];
        sprintf(buff, "%d.jpg", fileNum);
        fileNum++;
    
        File outFile = SD.open(buff, FILE_WRITE );
        outFile.write(buffer, length);
        outFile.close();

        Serial.print("Image written to file ");
        Serial.println(buff);
    }
    ```

    ูุฐุง ูุนุฑูู ูุชุบูุฑูุง ุนุงููููุง ูุนุฏุฏ ุงููููุงุช. ูุชู ุงุณุชุฎุฏุงู ูุฐุง ูุฃุณูุงุก ูููุงุช ุงูุตูุฑ ุจุญูุซ ูููู ุงูุชูุงุท ุตูุฑ ูุชุนุฏุฏุฉ ุจุฃุณูุงุก ูููุงุช ูุชุฒุงูุฏุฉ - `1.jpg`ุ `2.jpg` ูููุฐุง.

    ุซู ูุนุฑูู ูุธููุฉ `saveToSDCard` ุงูุชู ุชุฃุฎุฐ ุฐุงูุฑุฉ ูุคูุชุฉ ูู ุจูุงูุงุช ุงูุจุงูุชุ ูุทูู ุงูุฐุงูุฑุฉ ุงููุคูุชุฉ. ูุชู ุฅูุดุงุก ุงุณู ููู ุจุงุณุชุฎุฏุงู ุนุฏุฏ ุงููููุงุชุ ููุชู ุฒูุงุฏุฉ ุนุฏุฏ ุงููููุงุช ุงุณุชุนุฏุงุฏูุง ููููู ุงูุชุงูู. ูุชู ูุชุงุจุฉ ุงูุจูุงูุงุช ุงูุซูุงุฆูุฉ ูู ุงูุฐุงูุฑุฉ ุงููุคูุชุฉ ุฅูู ุงูููู.

1. ูู ุจุงุณุชุฏุนุงุก ูุธููุฉ `saveToSDCard` ูู ูุธููุฉ `buttonPressed`. ูุฌุจ ุฃู ูููู ุงูุงุณุชุฏุนุงุก **ูุจู** ุญุฐู ุงูุฐุงูุฑุฉ ุงููุคูุชุฉ:

    ```cpp
    Serial.print("Image read to buffer with length ");
    Serial.println(length);

    saveToSDCard(buffer, length);
    
    delete(buffer);
    ```

1. ูู ุจุจูุงุก ูุฑูุน ูุฐุง ุงูููุฏุ ูุชุญูู ูู ุงูุฅุฎุฑุงุฌ ุนูู ุงูุดุงุดุฉ ุงูุชุณูุณููุฉ. ูู ูู ูุฑุฉ ุชุถุบุท ูููุง ุนูู ุฒุฑ Cุ ุณูุชู ุงูุชูุงุท ุตูุฑุฉ ูุญูุธูุง ุนูู ุจุทุงูุฉ SD.

    ```output
    Connecting to WiFi..
    Connected!
    Image captured
    Image read to buffer with length 16392
    Image written to file 1.jpg
    Image captured
    Image read to buffer with length 14344
    Image written to file 2.jpg
    ```

1. ูู ุจุฅููุงู ุชุดุบูู ุจุทุงูุฉ microSD ููู ุจุฅุฎุฑุงุฌูุง ุนู ุทุฑูู ุฏูุนูุง ููููุงู ูุฅุทูุงููุงุ ูุณุชุฎุฑุฌ. ูุฏ ุชุญุชุงุฌ ุฅูู ุงุณุชุฎุฏุงู ุฃุฏุงุฉ ุฑููุนุฉ ููููุงู ุจุฐูู. ูู ุจุชูุตูู ุจุทุงูุฉ microSD ุจุฌูุงุฒ ุงูููุจููุชุฑ ุงูุฎุงุต ุจู ูุนุฑุถ ุงูุตูุฑ.

    ![ุตูุฑุฉ ููุฒุฉ ุชู ุงูุชูุงุทูุง ุจุงุณุชุฎุฏุงู ArduCam](../../../../../translated_images/banana-arducam.be1b32d4267a8194b0fd042362e56faa431da9cd4af172051b37243ea9be0256.ar.jpg)
> ๐ ูุฏ ูุณุชุบุฑู ุงูุฃูุฑ ุจุถุน ุตูุฑ ุญุชู ูุชููู ุชูุงุฒู ุงูููู ุงูุฃุจูุถ ูู ุงููุงููุฑุง. ุณุชูุงุญุธ ุฐูู ุจูุงุกู ุนูู ููู ุงูุตูุฑ ุงูููุชูุทุฉุ ูุฏ ุชุจุฏู ุงูุตูุฑ ุงูุฃููู ุบูุฑ ูุชูุงุฒูุฉ ูู ุงูุฃููุงู. ููููู ุฏุงุฆููุง ุงูุชุบูุจ ุนูู ุฐูู ุนู ุทุฑูู ุชุนุฏูู ุงูููุฏ ูุงูุชูุงุท ุจุถุน ุตูุฑ ูุชู ุชุฌุงูููุง ูู ูุธููุฉ `setup`.


---

**ุฅุฎูุงุก ุงููุณุคูููุฉ**:  
ุชู ุชุฑุฌูุฉ ูุฐุง ุงููุณุชูุฏ ุจุงุณุชุฎุฏุงู ุฎุฏูุฉ ุงูุชุฑุฌูุฉ ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู [Co-op Translator](https://github.com/Azure/co-op-translator). ุจูููุง ูุณุนู ูุชุญููู ุงูุฏูุฉุ ูุฑุฌู ุงูุนูู ุฃู ุงูุชุฑุฌูุงุช ุงูุขููุฉ ูุฏ ุชุญุชูู ุนูู ุฃุฎุทุงุก ุฃู ูุนูููุงุช ุบูุฑ ุฏูููุฉ. ูุฌุจ ุงุนุชุจุงุฑ ุงููุณุชูุฏ ุงูุฃุตูู ุจูุบุชู ุงูุฃุตููุฉ ูู ุงููุตุฏุฑ ุงูููุซูู. ููุญุตูู ุนูู ูุนูููุงุช ุญุงุณูุฉุ ูููุตู ุจุงูุงุณุชุนุงูุฉ ุจุชุฑุฌูุฉ ุจุดุฑูุฉ ุงุญุชุฑุงููุฉ. ูุญู ุบูุฑ ูุณุคูููู ุนู ุฃู ุณูุก ููู ุฃู ุชูุณูุฑุงุช ุฎุงุทุฆุฉ ูุงุชุฌุฉ ุนู ุงุณุชุฎุฏุงู ูุฐู ุงูุชุฑุฌูุฉ.