<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "d6faf0e8d3c2d6d20c0aef2a305dab18",
  "translation_date": "2025-08-26T23:19:42+00:00",
  "source_file": "1-getting-started/lessons/4-connect-internet/wio-terminal-mqtt.md",
  "language_code": "ar"
}
-->
# ุงูุชุญูู ูู ุถูุก ุงูููู ุนุจุฑ ุงูุฅูุชุฑูุช - Wio Terminal

ูุญุชุงุฌ ุฌูุงุฒ ุฅูุชุฑูุช ุงูุฃุดูุงุก ุฅูู ุงูุจุฑูุฌุฉ ููุชูุงุตู ูุน *test.mosquitto.org* ุจุงุณุชุฎุฏุงู MQTT ูุฅุฑุณุงู ููู ุงูููุงุณ ุนู ุจุนุฏ ูุน ูุฑุงุกุฉ ูุณุชุดุนุฑ ุงูุถูุกุ ูุงุณุชูุจุงู ุงูุฃูุงูุฑ ููุชุญูู ูู LED.

ูู ูุฐุง ุงูุฌุฒุก ูู ุงูุฏุฑุณุ ุณุชููู ุจุชูุตูู Wio Terminal ุจุฎุงุฏู MQTT.

## ุชุซุจูุช ููุชุจุงุช WiFi ูMQTT ุงูุฎุงุตุฉ ุจู Arduino

ููุชูุงุตู ูุน ุฎุงุฏู MQTTุ ุชุญุชุงุฌ ุฅูู ุชุซุจูุช ุจุนุถ ููุชุจุงุช Arduino ูุงุณุชุฎุฏุงู ุดุฑูุญุฉ WiFi ูู Wio Terminalุ ูุงูุชูุงุตู ูุน MQTT. ุนูุฏ ุชุทููุฑ ุฃุฌูุฒุฉ Arduinoุ ููููู ุงุณุชุฎุฏุงู ูุฌููุนุฉ ูุงุณุนุฉ ูู ุงูููุชุจุงุช ุงูุชู ุชุญุชูู ุนูู ููุฏ ููุชูุญ ุงููุตุฏุฑ ูุชููุฑ ูุฌููุนุฉ ูุจูุฑุฉ ูู ุงูุฅููุงููุงุช. ุชูุดุฑ Seeed ููุชุจุงุช ูู Wio Terminal ุชุณูุญ ูู ุจุงูุชูุงุตู ุนุจุฑ WiFi. ููุง ูุดุฑ ูุทูุฑูู ุขุฎุฑูู ููุชุจุงุช ููุชูุงุตู ูุน ุฎูุงุฏู MQTTุ ูุณุชุณุชุฎุฏู ูุฐู ุงูููุชุจุงุช ูุน ุฌูุงุฒู.

ุชููุฏู ูุฐู ุงูููุชุจุงุช ูููุฏ ูุตุฏุฑ ูููู ุงุณุชูุฑุงุฏู ุชููุงุฆููุง ุฅูู PlatformIO ูุชุฌููุนู ูุฌูุงุฒู. ุจูุฐู ุงูุทุฑููุฉุ ุณุชุนูู ููุชุจุงุช Arduino ุนูู ุฃู ุฌูุงุฒ ูุฏุนู ุฅุทุงุฑ ุนูู Arduinoุ ุจุดุฑุท ุฃู ูุญุชูู ุงูุฌูุงุฒ ุนูู ุฃู ุฃุฌูุฒุฉ ูุญุฏุฏุฉ ุชุญุชุงุฌูุง ุชูู ุงูููุชุจุฉ. ุจุนุถ ุงูููุชุจุงุชุ ูุซู ููุชุจุงุช Seeed WiFiุ ุชููู ูุฎุตุตุฉ ูุฃุฌูุฒุฉ ูุนููุฉ.

ูููู ุชุซุจูุช ุงูููุชุจุงุช ุนุงููููุง ูุชุฌููุนูุง ุฅุฐุง ูุฒู ุงูุฃูุฑุ ุฃู ุฏุงุฎู ูุดุฑูุน ูุนูู. ูู ูุฐู ุงููููุฉุ ุณูุชู ุชุซุจูุช ุงูููุชุจุงุช ุฏุงุฎู ุงููุดุฑูุน.

โ ููููู ูุนุฑูุฉ ุงููุฒูุฏ ุนู ุฅุฏุงุฑุฉ ุงูููุชุจุงุช ูููููุฉ ุงูุนุซูุฑ ุนูู ุงูููุชุจุงุช ูุชุซุจูุชูุง ูู [ูุซุงุฆู ููุชุจุฉ PlatformIO](https://docs.platformio.org/en/latest/librarymanager/index.html).

### ุงููููุฉ - ุชุซุจูุช ููุชุจุงุช WiFi ูMQTT ุงูุฎุงุตุฉ ุจู Arduino

ูู ุจุชุซุจูุช ููุชุจุงุช Arduino.

1. ุงูุชุญ ูุดุฑูุน ุถูุก ุงูููู ูู VS Code.

1. ุฃุถู ูุง ููู ุฅูู ููุงูุฉ ููู `platformio.ini`:

    ```ini
    lib_deps =
        seeed-studio/Seeed Arduino rpcWiFi @ 1.0.5
        seeed-studio/Seeed Arduino FS @ 2.1.1
        seeed-studio/Seeed Arduino SFUD @ 2.0.2
        seeed-studio/Seeed Arduino rpcUnified @ 2.1.3
        seeed-studio/Seeed_Arduino_mbedtls @ 3.0.1
    ```

    ูุฐุง ูุณุชูุฑุฏ ููุชุจุงุช Seeed WiFi. ุชุดูุฑ ุตูุบุฉ `@ <number>` ุฅูู ุฑูู ุฅุตุฏุงุฑ ูุนูู ููููุชุจุฉ.

    > ๐ ููููู ุฅุฒุงูุฉ `@ <number>` ูุงุณุชุฎุฏุงู ุฃุญุฏุซ ุฅุตุฏุงุฑ ูู ุงูููุชุจุงุช ุฏุงุฆููุงุ ูููู ูุง ุชูุฌุฏ ุถูุงูุงุช ุจุฃู ุงูุฅุตุฏุงุฑุงุช ุงูุฃุญุฏุซ ุณุชุนูู ูุน ุงูููุฏ ุฃุฏูุงู. ุชู ุงุฎุชุจุงุฑ ุงูููุฏ ููุง ูุน ูุฐุง ุงูุฅุตุฏุงุฑ ูู ุงูููุชุจุงุช.

    ูุฐุง ูู ูุง ุชุญุชุงุฌู ูุฅุถุงูุฉ ุงูููุชุจุงุช. ูู ุงููุฑุฉ ุงููุงุฏูุฉ ุงูุชู ูููู ูููุง PlatformIO ุจุจูุงุก ุงููุดุฑูุนุ ุณูููู ุจุชูุฒูู ุงูููุฏ ุงููุตุฏุฑ ููุฐู ุงูููุชุจุงุช ูุชุฌููุนู ุฏุงุฎู ูุดุฑูุนู.

1. ุฃุถู ูุง ููู ุฅูู `lib_deps`:

    ```ini
    knolleary/PubSubClient @ 2.8
    ```

    ูุฐุง ูุณุชูุฑุฏ [PubSubClient](https://github.com/knolleary/pubsubclient)ุ ููู ุนููู MQTT ูู Arduino.

## ุงูุงุชุตุงู ุจุดุจูุฉ WiFi

ูููู ุงูุขู ุชูุตูู Wio Terminal ุจุดุจูุฉ WiFi.

### ุงููููุฉ - ุงูุงุชุตุงู ุจุดุจูุฉ WiFi

ูู ุจุชูุตูู Wio Terminal ุจุดุจูุฉ WiFi.

1. ุฃูุดุฆ ููููุง ุฌุฏูุฏูุง ูู ูุฌูุฏ `src` ูุณูู `config.h`. ููููู ุงูููุงู ุจุฐูู ุนู ุทุฑูู ุชุญุฏูุฏ ูุฌูุฏ `src`ุ ุฃู ููู `main.cpp` ุจุฏุงุฎููุ ูุงุฎุชูุงุฑ ุฒุฑ **ููู ุฌุฏูุฏ** ูู ุงููุณุชูุดู. ูุธูุฑ ูุฐุง ุงูุฒุฑ ููุท ุนูุฏูุง ูููู ุงููุคุดุฑ ููู ุงููุณุชูุดู.

    ![ุฒุฑ ุงูููู ุงูุฌุฏูุฏ](../../../../../translated_images/vscode-new-file-button.182702340fe6723c8cbb4cfa1a9a9fb0d0a5227643b4e46b91ff67b07a39a92f.ar.png)

1. ุฃุถู ุงูููุฏ ุงูุชุงูู ุฅูู ูุฐุง ุงูููู ูุชุนุฑูู ุงูุซูุงุจุช ุงูุฎุงุตุฉ ุจุจูุงูุงุช ุงุนุชูุงุฏ ุดุจูุฉ WiFi:

    ```cpp
    #pragma once

    #include <string>
    
    using namespace std;
    
    // WiFi credentials
    const char *SSID = "<SSID>";
    const char *PASSWORD = "<PASSWORD>";
    ```

    ุงุณุชุจุฏู `<SSID>` ุจุงุณู ุดุจูุฉ WiFi ุงูุฎุงุตุฉ ุจู. ุงุณุชุจุฏู `<PASSWORD>` ุจูููุฉ ูุฑูุฑ ุดุจูุฉ WiFi ุงูุฎุงุตุฉ ุจู.

1. ุงูุชุญ ููู `main.cpp`.

1. ุฃุถู ุชูุฌููุงุช `#include` ุงูุชุงููุฉ ุฅูู ุฃุนูู ุงูููู:

    ```cpp
    #include <PubSubClient.h>
    #include <rpcWiFi.h>
    #include <SPI.h>
    
    #include "config.h"
    ```

    ูุฐุง ูุชุถูู ูููุงุช ุงูุฑุฃุณ ููููุชุจุงุช ุงูุชู ุฃุถูุชูุง ุณุงุจููุงุ ุจุงูุฅุถุงูุฉ ุฅูู ููู ุฑุฃุณ ุงูุชูููู. ูุฐู ุงููููุงุช ุงูุฑุฃุณ ุถุฑูุฑูุฉ ูุฅุฎุจุงุฑ PlatformIO ุจุฌูุจ ุงูููุฏ ูู ุงูููุชุจุงุช. ุจุฏูู ุชุถููู ูุฐู ุงููููุงุช ุงูุฑุฃุณ ุจุดูู ุตุฑูุญุ ูู ูุชู ุชุฌููุน ุจุนุถ ุงูููุฏ ูุณุชุธูุฑ ุฃุฎุทุงุก ูู ุงููุชุฑุฌู.

1. ุฃุถู ุงูููุฏ ุงูุชุงูู ุฃุนูู ูุธููุฉ `setup`:

    ```cpp
    void connectWiFi()
    {
        while (WiFi.status() != WL_CONNECTED)
        {
            Serial.println("Connecting to WiFi..");
            WiFi.begin(SSID, PASSWORD);
            delay(500);
        }
    
        Serial.println("Connected!");
    }
    ```

    ูููู ูุฐุง ุงูููุฏ ุจุงูุชูุฑุงุฑ ุฃุซูุงุก ุนุฏู ุงุชุตุงู ุงูุฌูุงุฒ ุจุดุจูุฉ WiFiุ ููุญุงูู ุงูุงุชุตุงู ุจุงุณุชุฎุฏุงู ุงุณู ุงูุดุจูุฉ ููููุฉ ุงููุฑูุฑ ูู ููู ุฑุฃุณ ุงูุชูููู.

1. ุฃุถู ุงุณุชุฏุนุงุก ููุฐู ุงููุธููุฉ ูู ููุงูุฉ ูุธููุฉ `setup`ุ ุจุนุฏ ุชูููู ุงูุฏุจุงุจูุณ.

    ```cpp
    connectWiFi();
    ```

1. ูู ุจุฑูุน ูุฐุง ุงูููุฏ ุฅูู ุฌูุงุฒู ููุชุญูู ูู ุฃู ุงุชุตุงู WiFi ูุนูู. ูุฌุจ ุฃู ุชุฑู ุฐูู ูู ุดุงุดุฉ ุงููุฑุงูุจุฉ ุงูุชุณูุณููุฉ.

    ```output
    > Executing task: platformio device monitor <
    
    --- Available filters and text transformations: colorize, debug, default, direct, hexlify, log2file, nocontrol, printable, send_on_enter, time
    --- More details at http://bit.ly/pio-monitor-filters
    --- Miniterm on /dev/cu.usbmodem1101  9600,8,N,1 ---
    --- Quit: Ctrl+C | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H ---
    Connecting to WiFi..
    Connected!
    ```

## ุงูุงุชุตุงู ุจู MQTT

ุจูุฌุฑุฏ ุงุชุตุงู Wio Terminal ุจุดุจูุฉ WiFiุ ููููู ุงูุงุชุตุงู ุจุฎุงุฏู MQTT.

### ุงููููุฉ - ุงูุงุชุตุงู ุจู MQTT

ูู ุจุงูุงุชุตุงู ุจุฎุงุฏู MQTT.

1. ุฃุถู ุงูููุฏ ุงูุชุงูู ุฅูู ููุงูุฉ ููู `config.h` ูุชุนุฑูู ุชูุงุตูู ุงูุงุชุตุงู ุจุฎุงุฏู MQTT:

    ```cpp
    // MQTT settings
    const string ID = "<ID>";
    
    const string BROKER = "test.mosquitto.org";
    const string CLIENT_NAME = ID + "nightlight_client";
    ```

    ุงุณุชุจุฏู `<ID>` ุจูุนุฑู ูุฑูุฏ ุณูุชู ุงุณุชุฎุฏุงูู ูุงุณู ุนููู ุงูุฌูุงุฒุ ููุงุญููุง ููููุงุถูุน ุงูุชู ููุดุฑูุง ูุฐุง ุงูุฌูุงุฒ ููุดุชุฑู ูููุง. ุฎุงุฏู *test.mosquitto.org* ุนุงู ููุณุชุฎุฏูู ุงูุนุฏูุฏ ูู ุงูุฃุดุฎุงุตุ ุจูุง ูู ุฐูู ุทูุงุจ ุขุฎุฑูู ูุนูููู ุนูู ูุฐุง ุงูุชูุฑูู. ูุถูู ูุฌูุฏ ุงุณู ุนููู MQTT ูุฑูุฏ ูุฃุณูุงุก ููุงุถูุน ูุฑูุฏุฉ ุฃู ุงูููุฏ ุงูุฎุงุต ุจู ูู ูุชุนุงุฑุถ ูุน ุฃู ุดุฎุต ุขุฎุฑ. ุณุชุญุชุงุฌ ุฃูุถูุง ุฅูู ูุฐุง ุงููุนุฑู ุนูุฏ ุฅูุดุงุก ููุฏ ุงูุฎุงุฏู ูุงุญููุง ูู ูุฐุง ุงูุชูุฑูู.

    > ๐ ููููู ุงุณุชุฎุฏุงู ูููุน ูุซู [GUIDGen](https://www.guidgen.com) ูุฅูุดุงุก ูุนุฑู ูุฑูุฏ.

    `BROKER` ูู ุนููุงู URL ูุฎุงุฏู MQTT.

    `CLIENT_NAME` ูู ุงุณู ูุฑูุฏ ููุฐุง ุงูุนููู MQTT ุนูู ุงูุฎุงุฏู.

1. ุงูุชุญ ููู `main.cpp`ุ ูุฃุถู ุงูููุฏ ุงูุชุงูู ุฃุณูู ูุธููุฉ `connectWiFi` ูุฃุนูู ูุธููุฉ `setup`:

    ```cpp
    WiFiClient wioClient;
    PubSubClient client(wioClient);
    ```

    ูููู ูุฐุง ุงูููุฏ ุจุฅูุดุงุก ุนููู WiFi ุจุงุณุชุฎุฏุงู ููุชุจุงุช WiFi ุงูุฎุงุตุฉ ุจู Wio Terminal ููุณุชุฎุฏูู ูุฅูุดุงุก ุนููู MQTT.

1. ุฃุณูู ูุฐุง ุงูููุฏุ ุฃุถู ูุง ููู:

    ```cpp
    void reconnectMQTTClient()
    {
        while (!client.connected())
        {
            Serial.print("Attempting MQTT connection...");
    
            if (client.connect(CLIENT_NAME.c_str()))
            {
                Serial.println("connected");
            }
            else
            {
                Serial.print("Retying in 5 seconds - failed, rc=");
                Serial.println(client.state());
                
                delay(5000);
            }
        }
    }
    ```

    ุชุฎุชุจุฑ ูุฐู ุงููุธููุฉ ุงูุงุชุตุงู ุจุฎุงุฏู MQTT ูุชุนูุฏ ุงูุงุชุตุงู ุฅุฐุง ูู ููู ูุชุตููุง. ุชููู ุจุงูุชูุฑุงุฑ ุทูุงู ุงูููุช ุงูุฐู ูุง ูููู ููู ูุชุตููุง ูุชุญุงูู ุงูุงุชุตุงู ุจุงุณุชุฎุฏุงู ุงุณู ุงูุนููู ุงููุฑูุฏ ุงููุญุฏุฏ ูู ููู ุฑุฃุณ ุงูุชูููู.

    ุฅุฐุง ูุดู ุงูุงุชุตุงูุ ูุฅูู ูุนูุฏ ุงููุญุงููุฉ ุจุนุฏ 5 ุซูุงูู.

1. ุฃุถู ุงูููุฏ ุงูุชุงูู ุฃุณูู ูุธููุฉ `reconnectMQTTClient`:

    ```cpp
    void createMQTTClient()
    {
        client.setServer(BROKER.c_str(), 1883);
        reconnectMQTTClient();
    }
    ```

    ูููู ูุฐุง ุงูููุฏ ุจุชุนููู ุฎุงุฏู MQTT ููุนูููุ ุจุงูุฅุถุงูุฉ ุฅูู ุฅุนุฏุงุฏ ุฑุฏ ุงูุงุชุตุงู ุนูุฏ ุงุณุชูุงู ุฑุณุงูุฉ. ุซู ูุญุงูู ุงูุงุชุตุงู ุจุงูุฎุงุฏู.

1. ูู ุจุงุณุชุฏุนุงุก ูุธููุฉ `createMQTTClient` ูู ูุธููุฉ `setup` ุจุนุฏ ุงุชุตุงู WiFi.

1. ุงุณุชุจุฏู ูุธููุฉ `loop` ุจุงููุงูู ุจูุง ููู:

    ```cpp
    void loop()
    {
        reconnectMQTTClient();
        client.loop();
    
        delay(2000);
    }
    ```

    ูุจุฏุฃ ูุฐุง ุงูููุฏ ุจุฅุนุงุฏุฉ ุงูุงุชุตุงู ุจุฎุงุฏู MQTT. ูููู ูุทุน ูุฐู ุงูุงุชุตุงูุงุช ุจุณูููุฉุ ูุฐุง ูู ุงููููุฏ ุงูุชุญูู ุจุงูุชุธุงู ูุฅุนุงุฏุฉ ุงูุงุชุตุงู ุฅุฐุง ูุฒู ุงูุฃูุฑ. ุซู ูุณุชุฏุนู ุทุฑููุฉ `loop` ุนูู ุนููู MQTT ููุนุงูุฌุฉ ุฃู ุฑุณุงุฆู ูุงุฑุฏุฉ ุนูู ุงูููุถูุน ุงููุดุชุฑู ููู. ูุฐุง ุงูุชุทุจูู ุฃุญุงุฏู ุงูุฎูุทุ ูุฐุง ูุง ูููู ุงุณุชูุจุงู ุงูุฑุณุงุฆู ุนูู ุฎูุท ุฎูููุ ูุจุงูุชุงูู ูุฌุจ ุชุฎุตูุต ููุช ุนูู ุงูุฎูุท ุงูุฑุฆูุณู ููุนุงูุฌุฉ ุฃู ุฑุณุงุฆู ุชูุชุธุฑ ุนูู ุงุชุตุงู ุงูุดุจูุฉ.

    ุฃุฎูุฑูุงุ ูุถูู ุชุฃุฎูุฑ ููุฏุฉ ุซุงููุชูู ุนุฏู ุฅุฑุณุงู ูุณุชููุงุช ุงูุถูุก ุจุดูู ูุชูุฑุฑ ุฌุฏูุง ููููู ูู ุงุณุชููุงู ุงูุทุงูุฉ ููุฌูุงุฒ.

1. ูู ุจุฑูุน ุงูููุฏ ุฅูู ุฌูุงุฒ Wio Terminalุ ูุงุณุชุฎุฏู ุดุงุดุฉ ุงููุฑุงูุจุฉ ุงูุชุณูุณููุฉ ูุฑุคูุฉ ุงูุฌูุงุฒ ูุชุตู ุจุดุจูุฉ WiFi ูMQTT.

    ```output
    > Executing task: platformio device monitor <
    
    source /Users/jimbennett/GitHub/IoT-For-Beginners/1-getting-started/lessons/4-connect-internet/code-mqtt/wio-terminal/nightlight/.venv/bin/activate
    --- Available filters and text transformations: colorize, debug, default, direct, hexlify, log2file, nocontrol, printable, send_on_enter, time
    --- More details at http://bit.ly/pio-monitor-filters
    --- Miniterm on /dev/cu.usbmodem1201  9600,8,N,1 ---
    --- Quit: Ctrl+C | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H ---
    Connecting to WiFi..
    Connected!
    Attempting MQTT connection...connected
    ```

> ๐ ููููู ุงูุนุซูุฑ ุนูู ูุฐุง ุงูููุฏ ูู ูุฌูุฏ [code-mqtt/wio-terminal](../../../../../1-getting-started/lessons/4-connect-internet/code-mqtt/wio-terminal).

๐ ููุฏ ูุฌุญุช ูู ุชูุตูู ุฌูุงุฒู ุจุฎุงุฏู MQTT.

---

**ุฅุฎูุงุก ุงููุณุคูููุฉ**:  
ุชู ุชุฑุฌูุฉ ูุฐุง ุงููุณุชูุฏ ุจุงุณุชุฎุฏุงู ุฎุฏูุฉ ุงูุชุฑุฌูุฉ ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู [Co-op Translator](https://github.com/Azure/co-op-translator). ุจูููุง ูุณุนู ูุชุญููู ุงูุฏูุฉุ ูุฑุฌู ุงูุนูู ุฃู ุงูุชุฑุฌูุงุช ุงูุขููุฉ ูุฏ ุชุญุชูู ุนูู ุฃุฎุทุงุก ุฃู ูุนูููุงุช ุบูุฑ ุฏูููุฉ. ูุฌุจ ุงุนุชุจุงุฑ ุงููุณุชูุฏ ุงูุฃุตูู ุจูุบุชู ุงูุฃุตููุฉ ุงููุตุฏุฑ ุงูุฑุณูู. ููุญุตูู ุนูู ูุนูููุงุช ุญุงุณูุฉุ ูููุตู ุจุงูุงุณุชุนุงูุฉ ุจุชุฑุฌูุฉ ุจุดุฑูุฉ ุงุญุชุฑุงููุฉ. ูุญู ุบูุฑ ูุณุคูููู ุนู ุฃู ุณูุก ููู ุฃู ุชูุณูุฑุงุช ุฎุงุทุฆุฉ ุชูุดุฃ ุนู ุงุณุชุฎุฏุงู ูุฐู ุงูุชุฑุฌูุฉ.