<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "3ac42e284a7222c0e83d2d43231a364f",
  "translation_date": "2025-08-27T12:03:20+00:00",
  "source_file": "2-farm/lessons/4-migrate-your-plant-to-the-cloud/single-board-computer-connect-hub.md",
  "language_code": "pa"
}
-->
# เจเจชเจฃเจพ IoT เจกเจฟเจตเจพเจเจธ เจเจฒเจพเจเจก เจจเจพเจฒ เจเฉเฉเฉ - เจตเจฐเจเฉเจเจฒ IoT เจนเจพเจฐเจกเจตเฉเจเจฐ เจเจคเฉ เจฐเจพเจธเจชเจฌเฉเจฐเฉ เจชเจพเจ

เจเจธ เจชเจพเจ เจฆเฉ เจเจธ เจนเจฟเฉฑเจธเฉ เจตเจฟเฉฑเจ, เจคเฉเจธเฉเจ เจเจชเจฃเฉ เจตเจฐเจเฉเจเจฒ IoT เจกเจฟเจตเจพเจเจธ เจเจพเจ เจฐเจพเจธเจชเจฌเฉเจฐเฉ เจชเจพเจ เจจเฉเฉฐ เจเจชเจฃเฉ IoT เจนเฉฑเจฌ เจจเจพเจฒ เจเฉเฉเฉเจเฉ, เจคเจพเจ เจเฉ เจเฉเจฒเฉเจฎเฉเจเจฐเฉ เจญเฉเจ เจธเจเฉ เจเจคเฉ เจเจฎเจพเจเจก เจชเฉเจฐเจพเจชเจค เจเจฐ เจธเจเฉเฅค

## เจเจชเจฃเฉ เจกเจฟเจตเจพเจเจธ เจจเฉเฉฐ IoT เจนเฉฑเจฌ เจจเจพเจฒ เจเฉเฉเฉ

เจเจเจฒเจพ เจเจฆเจฎ เจคเฉเจนเจพเจกเฉ เจกเจฟเจตเจพเจเจธ เจจเฉเฉฐ IoT เจนเฉฑเจฌ เจจเจพเจฒ เจเฉเฉเจจเจพ เจนเฉเฅค

### เจเจพเจธเจ - IoT เจนเฉฑเจฌ เจจเจพเจฒ เจเฉเฉเฉ

1. `soil-moisture-sensor` เจซเฉเจฒเจกเจฐ เจจเฉเฉฐ VS Code เจตเจฟเฉฑเจ เจเฉเจฒเฉเจนเฉเฅค เจฏเจเฉเจจเฉ เจฌเจฃเจพเจ เจเจฟ เจตเจฐเจเฉเจเจฒ เจเจจเจตเจพเจเจฐเจจเจฎเฉเจเจ เจเจฐเจฎเฉเจจเจฒ เจตเจฟเฉฑเจ เจเฉฑเจฒ เจฐเจฟเจนเจพ เจนเฉ เจเฉ เจคเฉเจธเฉเจ เจตเจฐเจเฉเจเจฒ IoT เจกเจฟเจตเจพเจเจธ เจตเจฐเจค เจฐเจนเฉ เจนเฉเฅค

1. เจเฉเจ เจตเจพเจงเฉ Pip เจชเฉเจเฉเจ เจเฉฐเจธเจเจพเจฒ เจเจฐเฉ:

    ```sh
    pip3 install azure-iot-device
    ```

    `azure-iot-device` เจคเฉเจนเจพเจกเฉ IoT เจนเฉฑเจฌ เจจเจพเจฒ เจธเฉฐเจเจพเจฐ เจเจฐเจจ เจฒเจ เจเฉฑเจ เจฒเจพเจเจฌเฉเจฐเฉเจฐเฉ เจนเฉเฅค

1. เจนเฉเจเจพเจ เจฆเจฟเฉฑเจคเฉ เจเจฎเจชเฉเจฐเจเจธ เจจเฉเฉฐ `app.py` เจซเจพเจเจฒ เจฆเฉ เจถเฉเจฐเฉ เจตเจฟเฉฑเจ เจฎเฉเจเฉเจฆเจพ เจเจฎเจชเฉเจฐเจเจธ เจฆเฉ เจนเฉเจเจพเจ เจธเจผเจพเจฎเจฒ เจเจฐเฉ:

    ```python
    from azure.iot.device import IoTHubDeviceClient, Message, MethodResponse
    ```

    เจเจน เจเฉเจก เจคเฉเจนเจพเจกเฉ IoT เจนเฉฑเจฌ เจจเจพเจฒ เจธเฉฐเจเจพเจฐ เจเจฐเจจ เจฒเจ SDK เจจเฉเฉฐ เจเจฎเจชเฉเจฐเจ เจเจฐเจฆเจพ เจนเฉเฅค

1. `import paho.mqtt.client as mqtt` เจฒเจพเจเจจ เจจเฉเฉฐ เจนเจเจพเจ เจเจฟเจเจเจเจฟ เจเจน เจฒเจพเจเจฌเฉเจฐเฉเจฐเฉ เจนเฉเจฃ เจฒเฉเฉเฉเจเจฆเฉ เจจเจนเฉเจ เจนเฉเฅค เจธเจพเจฐเฉ MQTT เจเฉเจก เจจเฉเฉฐ เจนเจเจพเจ เจเจฟเจธ เจตเจฟเฉฑเจ เจเจพเจชเจฟเจ เจจเจพเจ, `mqtt_client` เจตเจฐเจคเจฃ เจตเจพเจฒเจพ เจเฉเจก เจเจคเฉ `handle_command` เจธเจผเจพเจฎเจฒ เจนเฉเฅค `while True:` เจฒเฉเจช เจจเฉเฉฐ เจฐเฉฑเจเฉ, เจธเจฟเจฐเจซ เจเจธ เจฒเฉเจช เจตเจฟเฉฑเจเฉเจ `mqtt_client.publish` เจฒเจพเจเจจ เจจเฉเฉฐ เจนเจเจพเจเฅค

1. เจเจฎเจชเฉเจฐเจ เจธเจเฉเจเจฎเฉเจเจเจธ เจฆเฉ เจนเฉเจเจพเจ เจนเฉเจเจพเจ เจฆเจฟเฉฑเจคเจพ เจเฉเจก เจธเจผเจพเจฎเจฒ เจเจฐเฉ:

    ```python
    connection_string = "<connection string>"
    ```

    `<connection string>` เจจเฉเฉฐ เจเจธ เจชเจพเจ เจตเจฟเฉฑเจ เจชเจนเจฟเจฒเจพเจ เจชเฉเจฐเจพเจชเจค เจเฉเจคเฉ เจกเจฟเจตเจพเจเจธ เจฒเจ เจเจจเฉเจเจธเจผเจจ เจธเจเฉเจฐเจฟเฉฐเจ เจจเจพเจฒ เจฌเจฆเจฒเฉเฅค

    > ๐ เจเจน เจธเจนเฉ เจคเจฐเฉเจเจพ เจจเจนเฉเจ เจนเฉเฅค เจเจจเฉเจเจธเจผเจจ เจธเจเฉเจฐเจฟเฉฐเจเจเจผ เจจเฉเฉฐ เจเจฆเฉ เจตเฉ เจธเฉเจฐเจธ เจเฉเจก เจตเจฟเฉฑเจ เจธเจเฉเจฐ เจจเจนเฉเจ เจเจฐเจจเจพ เจเจพเจนเฉเจฆเจพ, เจเจฟเจเจเจเจฟ เจเจน เจธเฉเจฐเจธ เจเฉเจก เจเฉฐเจเจฐเฉเจฒ เจตเจฟเฉฑเจ เจเฉเฉฑเจ เจเฉเจคเจพ เจเจพ เจธเจเจฆเจพ เจนเฉ เจเจคเฉ เจเจฟเจธเฉ เจตเฉ เจฆเฉเจเจฐเจพ เจฒเฉฑเจญเจฟเจ เจเจพ เจธเจเจฆเจพ เจนเฉเฅค เจเจธเฉเจ เจเจน เจธเจฟเจฐเจซ เจธเจนเฉเจฒเจค เจฒเจ เจเจฐ เจฐเจนเฉ เจนเจพเจเฅค เจเจฆเจฐเจธเจผ เจคเฉเจฐ 'เจคเฉ เจคเฉเจนเจพเจจเฉเฉฐ เจเฉเจ เจเจฟเจตเฉเจ เจเจจเจตเจพเจเจฐเจจเจฎเฉเจเจ เจตเฉเจฐเฉเจเจฌเจฒ เจเจคเฉ [`python-dotenv`](https://pypi.org/project/python-dotenv/) เจตเจฐเจเฉ เจเฉเจฒ เจฆเฉ เจตเจฐเจคเฉเจ เจเจฐเจจเฉ เจเจพเจนเฉเจฆเฉ เจนเฉเฅค เจคเฉเจธเฉเจ เจเจธ เจฌเจพเจฐเฉ เจเจเจฒเฉ เจชเจพเจ เจตเจฟเฉฑเจ เจนเฉเจฐ เจธเจฟเฉฑเจเฉเจเฉเฅค

1. เจเจธ เจเฉเจก เจฆเฉ เจนเฉเจเจพเจ, เจนเฉเจเจพเจ เจฆเจฟเฉฑเจคเจพ เจเฉเจก เจธเจผเจพเจฎเจฒ เจเจฐเฉ เจคเจพเจ เจเฉ เจเฉฑเจ เจกเจฟเจตเจพเจเจธ เจเจฒเจพเจเฉฐเจ เจเจฌเจเฉเจเจ เจฌเจฃเจพเจเจ เจเจพ เจธเจเฉ เจเฉ IoT เจนเฉฑเจฌ เจจเจพเจฒ เจธเฉฐเจเจพเจฐ เจเจฐ เจธเจเฉ เจเจคเฉ เจเจธเจจเฉเฉฐ เจเจจเฉเจเจ เจเจฐ เจธเจเฉ:

    ```python
    device_client = IoTHubDeviceClient.create_from_connection_string(connection_string)

    print('Connecting')
    device_client.connect()
    print('Connected')
    ```

1. เจเจธ เจเฉเจก เจจเฉเฉฐ เจเจฒเจพเจเฅค เจคเฉเจธเฉเจ เจฆเฉเจเฉเจเฉ เจเจฟ เจคเฉเจนเจพเจกเจพ เจกเจฟเจตเจพเจเจธ เจเจจเฉเจเจ เจนเฉ เจเจฟเจ เจนเฉเฅค

    ```output
    pi@raspberrypi:~/soil-moisture-sensor $ python3 app.py 
    Connecting
    Connected
    Soil moisture: 379
    ```

## เจเฉเจฒเฉเจฎเฉเจเจฐเฉ เจญเฉเจเฉ

เจนเฉเจฃ เจเจฆเฉเจ เจคเฉเจนเจพเจกเจพ เจกเจฟเจตเจพเจเจธ เจเจจเฉเจเจ เจนเฉ เจเจฟเจ เจนเฉ, เจคเฉเจธเฉเจ MQTT เจฌเฉเจฐเฉเจเจฐ เจฆเฉ เจฌเจเจพเจ IoT เจนเฉฑเจฌ เจจเฉเฉฐ เจเฉเจฒเฉเจฎเฉเจเจฐเฉ เจญเฉเจ เจธเจเจฆเฉ เจนเฉเฅค

### เจเจพเจธเจ - เจเฉเจฒเฉเจฎเฉเจเจฐเฉ เจญเฉเจเฉ

1. เจนเฉเจเจพเจ เจฆเจฟเฉฑเจคเจพ เจเฉเจก `while True` เจฒเฉเจช เจฆเฉ เจเฉฐเจฆเจฐ, เจธเจฟเจฐเจซ เจธเจฒเฉเจช เจคเฉเจ เจชเจนเจฟเจฒเจพเจ เจธเจผเจพเจฎเจฒ เจเจฐเฉ:

    ```python
    message = Message(json.dumps({ 'soil_moisture': soil_moisture }))
    device_client.send_message(message)
    ```

    เจเจน เจเฉเจก เจเฉฑเจ IoT เจนเฉฑเจฌ `Message` เจฌเจฃเจพเจเจเจฆเจพ เจนเฉ เจเจฟเจธ เจตเจฟเฉฑเจ เจฎเจฟเฉฑเจเฉ เจฆเฉ เจจเจฎเฉ เจฆเฉ เจชเฉเจเฉเจฒ JSON เจธเจเฉเจฐเจฟเฉฐเจ เจฆเฉ เจฐเฉเจช เจตเจฟเฉฑเจ เจนเฉเฉฐเจฆเฉ เจนเฉ, เจเจคเฉ เจเจธเจจเฉเฉฐ IoT เจนเฉฑเจฌ เจจเฉเฉฐ เจกเจฟเจตเจพเจเจธ เจคเฉเจ เจเจฒเจพเจเจก เจธเฉเจจเฉเจนเฉ เจตเจเฉเจ เจญเฉเจเจฆเจพ เจนเฉเฅค

## เจเจฎเจพเจเจกเจธ เจจเฉเฉฐ เจนเฉเจเจกเจฒ เจเจฐเฉ

เจคเฉเจนเจพเจกเฉ เจกเจฟเจตเจพเจเจธ เจจเฉเฉฐ เจธเจฐเจตเจฐ เจเฉเจก เจคเฉเจ เจเฉฑเจ เจเจฎเจพเจเจก เจนเฉเจเจกเจฒ เจเจฐเจจ เจฆเฉ เจฒเฉเฉ เจนเฉ เจคเจพเจ เจเฉ เจฐเฉเจฒเฉ เจจเฉเฉฐ เจเฉฐเจเจฐเฉเจฒ เจเฉเจคเจพ เจเจพ เจธเจเฉเฅค เจเจน เจเฉฑเจ เจกเจพเจเจฐเฉเจเจ เจฎเฉเจฅเจก เจฐเจฟเจเจตเฉเจธเจ เจตเจเฉเจ เจญเฉเจเจฟเจ เจเจพเจเจฆเจพ เจนเฉเฅค

## เจเจพเจธเจ - เจกเจพเจเจฐเฉเจเจ เจฎเฉเจฅเจก เจฐเจฟเจเจตเฉเจธเจ เจจเฉเฉฐ เจนเฉเจเจกเจฒ เจเจฐเฉ

1. `while True` เจฒเฉเจช เจคเฉเจ เจชเจนเจฟเจฒเจพเจ เจนเฉเจเจพเจ เจฆเจฟเฉฑเจคเจพ เจเฉเจก เจธเจผเจพเจฎเจฒ เจเจฐเฉ:

    ```python
    def handle_method_request(request):
        print("Direct method received - ", request.name)
    
        if request.name == "relay_on":
            relay.on()
        elif request.name == "relay_off":
            relay.off()    
    ```

    เจเจน เจเฉฑเจ เจฎเฉเจฅเจก, `handle_method_request`, เจจเฉเฉฐ เจชเจฐเจฟเจญเจพเจธเจผเจฟเจค เจเจฐเจฆเจพ เจนเฉ เจเฉ IoT เจนเฉฑเจฌ เจฆเฉเจเจฐเจพ เจเฉฑเจ เจกเจพเจเจฐเฉเจเจ เจฎเฉเจฅเจก เจเจพเจฒ เจเฉเจคเฉ เจเจพเจฃ 'เจคเฉ เจเจพเจฒ เจเฉเจคเจพ เจเจพเจตเฉเจเจพเฅค เจนเจฐ เจกเจพเจเจฐเฉเจเจ เจฎเฉเจฅเจก เจฆเจพ เจเฉฑเจ เจจเจพเจ เจนเฉเฉฐเจฆเจพ เจนเฉ, เจเจคเฉ เจเจน เจเฉเจก เจเฉฑเจ เจฎเฉเจฅเจก เจฆเฉ เจเจฎเฉเจฆ เจเจฐเจฆเจพ เจนเฉ เจเจฟเจธเจจเฉเฉฐ `relay_on` เจฐเฉเจฒเฉ เจจเฉเฉฐ เจเจพเจฒเฉ เจเจฐเจจ เจฒเจ เจเจคเฉ `relay_off` เจฐเฉเจฒเฉ เจจเฉเฉฐ เจฌเฉฐเจฆ เจเจฐเจจ เจฒเจ เจเจฟเจนเจพ เจเจพเจเจฆเจพ เจนเฉเฅค

    > ๐ เจเจน เจเฉฑเจ เจธเจฟเฉฐเจเจฒ เจกเจพเจเจฐเฉเจเจ เจฎเฉเจฅเจก เจฐเจฟเจเจตเฉเจธเจ เจตเจฟเฉฑเจ เจตเฉ เจฒเจพเจเฉ เจเฉเจคเจพ เจเจพ เจธเจเจฆเจพ เจนเฉ, เจเจฟเจธ เจตเจฟเฉฑเจ เจฐเฉเจฒเฉ เจฆเฉ เจเจพเจนเฉเจฆเฉ เจธเจฅเจฟเจคเฉ เจจเฉเฉฐ เจเฉฑเจ เจชเฉเจฒเฉเจก เจตเจฟเฉฑเจ เจชเจพเจธ เจเฉเจคเจพ เจเจพ เจธเจเจฆเจพ เจนเฉ เจเฉ เจฎเฉเจฅเจก เจฐเจฟเจเจตเฉเจธเจ เจจเจพเจฒ เจชเจพเจธ เจเฉเจคเจพ เจเจพ เจธเจเจฆเจพ เจนเฉ เจเจคเฉ `request` เจเจฌเจเฉเจเจ เจคเฉเจ เจเจชเจฒเจฌเจง เจนเฉ เจธเจเจฆเจพ เจนเฉเฅค

1. เจกเจพเจเจฐเฉเจเจ เจฎเฉเจฅเจกเจธ เจจเฉเฉฐ เจเฉฑเจ เจฐเจฟเจธเจชเจพเจเจธ เจฆเฉ เจฒเฉเฉ เจนเฉเฉฐเจฆเฉ เจนเฉ เจคเจพเจ เจเฉ เจเจพเจฒ เจเจฐเจจ เจตเจพเจฒเฉ เจเฉเจก เจจเฉเฉฐ เจฆเฉฑเจธเจฟเจ เจเจพ เจธเจเฉ เจเจฟ เจเจน เจนเฉเจเจกเจฒ เจเฉเจคเจพ เจเจฟเจ เจนเฉเฅค `handle_method_request` เจซเฉฐเจเจธเจผเจจ เจฆเฉ เจเฉฐเจค เจตเจฟเฉฑเจ เจนเฉเจเจพเจ เจฆเจฟเฉฑเจคเจพ เจเฉเจก เจธเจผเจพเจฎเจฒ เจเจฐเฉ เจคเจพเจ เจเฉ เจฐเจฟเจเจตเฉเจธเจ เจฒเจ เจเฉฑเจ เจฐเจฟเจธเจชเจพเจเจธ เจฌเจฃเจพเจเจ เจเจพ เจธเจเฉ:

    ```python
    method_response = MethodResponse.create_from_method_request(request, 200)
    device_client.send_method_response(method_response)
    ```

    เจเจน เจเฉเจก เจกเจพเจเจฐเฉเจเจ เจฎเฉเจฅเจก เจฐเจฟเจเจตเฉเจธเจ เจจเฉเฉฐ HTTP เจธเจเฉเจเจธ เจเฉเจก 200 เจฆเฉ เจจเจพเจฒ เจเฉฑเจ เจฐเจฟเจธเจชเจพเจเจธ เจญเฉเจเจฆเจพ เจนเฉ, เจเจคเฉ เจเจธเจจเฉเฉฐ IoT เจนเฉฑเจฌ เจจเฉเฉฐ เจตเจพเจชเจธ เจญเฉเจเจฆเจพ เจนเฉเฅค

1. เจเจธ เจซเฉฐเจเจธเจผเจจ เจชเจฐเจฟเจญเจพเจธเจผเจพ เจฆเฉ เจนเฉเจเจพเจ เจนเฉเจเจพเจ เจฆเจฟเฉฑเจคเจพ เจเฉเจก เจธเจผเจพเจฎเจฒ เจเจฐเฉ:

    ```python
    device_client.on_method_request_received = handle_method_request
    ```

    เจเจน เจเฉเจก IoT เจนเฉฑเจฌ เจเจฒเจพเจเฉฐเจ เจจเฉเฉฐ เจฆเฉฑเจธเจฆเจพ เจนเฉ เจเจฟ เจเจฆเฉเจ เจเฉฑเจ เจกเจพเจเจฐเฉเจเจ เจฎเฉเจฅเจก เจเจพเจฒ เจเฉเจคเจพ เจเจพเจตเฉ เจคเจพเจ `handle_method_request` เจซเฉฐเจเจธเจผเจจ เจจเฉเฉฐ เจเจพเจฒ เจเจฐเฉเฅค

> ๐ เจคเฉเจธเฉเจ เจเจน เจเฉเจก [code/pi](../../../../../2-farm/lessons/4-migrate-your-plant-to-the-cloud/code/pi) เจเจพเจ [code/virtual-device](../../../../../2-farm/lessons/4-migrate-your-plant-to-the-cloud/code/virtual-device) เจซเฉเจฒเจกเจฐ เจตเจฟเฉฑเจ เจฒเฉฑเจญ เจธเจเจฆเฉ เจนเฉเฅค

๐ เจคเฉเจนเจพเจกเจพ เจฎเจฟเฉฑเจเฉ เจจเจฎเฉ เจธเฉเจเจธเจฐ เจชเฉเจฐเฉเจเจฐเจพเจฎ เจคเฉเจนเจพเจกเฉ IoT เจนเฉฑเจฌ เจจเจพเจฒ เจเฉเฉ เจเจฟเจ เจนเฉ!

---

**เจเจธเจตเฉเจเจคเฉ**:  
เจเจน เจฆเจธเจคเจพเจตเฉเจเจผ AI เจเจจเฉเจตเจพเจฆ เจธเฉเจตเจพ [Co-op Translator](https://github.com/Azure/co-op-translator) เจฆเฉ เจตเจฐเจคเฉเจ เจเจฐเจเฉ เจเจจเฉเจตเจพเจฆ เจเฉเจคเจพ เจเจฟเจ เจนเฉเฅค เจนเจพเจฒเจพเจเจเจฟ เจเจธเฉเจ เจธเจนเฉเจเจค เจฒเจ เจฏเจคเจจเจธเจผเฉเจฒ เจนเจพเจ, เจเจฟเจฐเจชเจพ เจเจฐเจเฉ เจงเจฟเจเจจ เจฆเจฟเจ เจเจฟ เจธเจตเฉเจเจพเจฒเจฟเจค เจเจจเฉเจตเจพเจฆเจพเจ เจตเจฟเฉฑเจ เจเจฒเจคเฉเจเจ เจเจพเจ เจเจธเฉเฉฑเจคเฉเจเจ เจนเฉ เจธเจเจฆเฉเจเจ เจนเจจเฅค เจฎเฉเจฒ เจฆเจธเจคเจพเจตเฉเจเจผ เจจเฉเฉฐ เจเจธเจฆเฉ เจฎเฉเจฒ เจญเจพเจธเจผเจพ เจตเจฟเฉฑเจ เจเจงเจฟเจเจพเจฐเจค เจธเจฐเฉเจค เจฎเฉฐเจจเจฟเจ เจเจพเจฃเจพ เจเจพเจนเฉเจฆเจพ เจนเฉเฅค เจฎเจนเฉฑเจคเจตเจชเฉเจฐเจจ เจเจพเจฃเจเจพเจฐเฉ เจฒเจ, เจชเฉเจธเจผเฉเจตเจฐ เจฎเจจเฉเฉฑเจเฉ เจเจจเฉเจตเจพเจฆ เจฆเฉ เจธเจฟเจซเจพเจฐเจธเจผ เจเฉเจคเฉ เจเจพเจเจฆเฉ เจนเฉเฅค เจเจธ เจเจจเฉเจตเจพเจฆ เจฆเฉ เจตเจฐเจคเฉเจ เจคเฉเจ เจชเฉเจฆเจพ เจนเฉเจฃ เจตเจพเจฒเฉ เจเจฟเจธเฉ เจตเฉ เจเจฒเจคเจซเจนเจฟเจฎเฉ เจเจพเจ เจเจฒเจค เจตเจฟเจเจเจฟเจ เจฒเจ เจเจธเฉเจ เจเจผเจฟเฉฐเจฎเฉเจตเจพเจฐ เจจเจนเฉเจ เจนเจพเจเฅค