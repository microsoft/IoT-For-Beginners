<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "0ac0afcfb40cb5970ef4cb74f01c32e9",
  "translation_date": "2025-08-27T00:17:59+00:00",
  "source_file": "6-consumer/lessons/1-speech-recognition/pi-audio.md",
  "language_code": "ru"
}
-->
# –ó–∞—Ö–≤–∞—Ç –∞—É–¥–∏–æ - Raspberry Pi

–í —ç—Ç–æ–π —á–∞—Å—Ç–∏ —É—Ä–æ–∫–∞ –≤—ã –Ω–∞–ø–∏—à–µ—Ç–µ –∫–æ–¥ –¥–ª—è –∑–∞—Ö–≤–∞—Ç–∞ –∞—É–¥–∏–æ –Ω–∞ –≤–∞—à–µ–º Raspberry Pi. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞—Ö–≤–∞—Ç–æ–º –∞—É–¥–∏–æ –±—É–¥–µ—Ç –æ—Å—É—â–µ—Å—Ç–≤–ª—è—Ç—å—Å—è —Å –ø–æ–º–æ—â—å—é –∫–Ω–æ–ø–∫–∏.

## –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ

–î–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞—Ö–≤–∞—Ç–æ–º –∞—É–¥–∏–æ Raspberry Pi —Ç—Ä–µ–±—É–µ—Ç—Å—è –∫–Ω–æ–ø–∫–∞.

–ö–Ω–æ–ø–∫–∞, –∫–æ—Ç–æ—Ä—É—é –≤—ã –±—É–¥–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, ‚Äî —ç—Ç–æ –∫–Ω–æ–ø–∫–∞ Grove. –≠—Ç–æ —Ü–∏—Ñ—Ä–æ–≤–æ–π –¥–∞—Ç—á–∏–∫, –∫–æ—Ç–æ—Ä—ã–π –≤–∫–ª—é—á–∞–µ—Ç –∏–ª–∏ –≤—ã–∫–ª—é—á–∞–µ—Ç —Å–∏–≥–Ω–∞–ª. –≠—Ç–∏ –∫–Ω–æ–ø–∫–∏ –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Ç–∞–∫, —á—Ç–æ–±—ã –æ–Ω–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–ª–∏ –≤—ã—Å–æ–∫–∏–π —Å–∏–≥–Ω–∞–ª –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∏ –Ω–∏–∑–∫–∏–π, –∫–æ–≥–¥–∞ –Ω–µ –Ω–∞–∂–∞—Ç—ã, –∏–ª–∏ –Ω–∞–æ–±–æ—Ä–æ—Ç ‚Äî –Ω–∏–∑–∫–∏–π –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∏ –≤—ã—Å–æ–∫–∏–π, –∫–æ–≥–¥–∞ –Ω–µ –Ω–∞–∂–∞—Ç—ã.

–ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –º–∏–∫—Ä–æ—Ñ–æ–Ω ReSpeaker 2-Mics Pi HAT, —Ç–æ –ø–æ–¥–∫–ª—é—á–∞—Ç—å –∫–Ω–æ–ø–∫—É –Ω–µ –Ω—É–∂–Ω–æ, —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∞ —É–∂–µ –≤—Å—Ç—Ä–æ–µ–Ω–∞ –≤ —ç—Ç–æ—Ç –º–æ–¥—É–ª—å. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —Ä–∞–∑–¥–µ–ª—É.

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏

–ö–Ω–æ–ø–∫–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∞ –∫ –±–∞–∑–æ–≤–æ–º—É –º–æ–¥—É–ª—é Grove.

#### –ó–∞–¥–∞—á–∞ - –ø–æ–¥–∫–ª—é—á–∏—Ç—å –∫–Ω–æ–ø–∫—É

![–ö–Ω–æ–ø–∫–∞ Grove](../../../../../translated_images/grove-button.a70cfbb809a8563681003250cf5b06d68cdcc68624f9e2f493d5a534ae2da1e5.ru.png)

1. –í—Å—Ç–∞–≤—å—Ç–µ –æ–¥–∏–Ω –∫–æ–Ω–µ—Ü –∫–∞–±–µ–ª—è Grove –≤ —Ä–∞–∑—ä–µ–º –Ω–∞ –º–æ–¥—É–ª–µ –∫–Ω–æ–ø–∫–∏. –û–Ω –≤—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –æ–¥–Ω–æ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏.

1. –° –≤—ã–∫–ª—é—á–µ–Ω–Ω—ã–º Raspberry Pi –ø–æ–¥–∫–ª—é—á–∏—Ç–µ –¥—Ä—É–≥–æ–π –∫–æ–Ω–µ—Ü –∫–∞–±–µ–ª—è Grove –∫ —Ü–∏—Ñ—Ä–æ–≤–æ–º—É —Ä–∞–∑—ä–µ–º—É, –æ–±–æ–∑–Ω–∞—á–µ–Ω–Ω–æ–º—É –∫–∞–∫ **D5**, –Ω–∞ –±–∞–∑–æ–≤–æ–º –º–æ–¥—É–ª–µ Grove, –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω–æ–º –∫ Pi. –≠—Ç–æ—Ç —Ä–∞–∑—ä–µ–º ‚Äî –≤—Ç–æ—Ä–æ–π —Å–ª–µ–≤–∞ –≤ —Ä—è–¥—É —Ä–∞–∑—ä–µ–º–æ–≤ —Ä—è–¥–æ–º —Å GPIO-–ø–∏–Ω–∞–º–∏.

![–ö–Ω–æ–ø–∫–∞ Grove, –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω–∞—è –∫ —Ä–∞–∑—ä–µ–º—É D5](../../../../../translated_images/pi-button.c7a1a4f55943341ce1baf1057658e9a205804d4131d258e820c93f951df0abf3.ru.png)

## –ó–∞—Ö–≤–∞—Ç –∞—É–¥–∏–æ

–í—ã –º–æ–∂–µ—Ç–µ –∑–∞—Ö–≤–∞—Ç—ã–≤–∞—Ç—å –∞—É–¥–∏–æ —Å –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞, –∏—Å–ø–æ–ª—å–∑—É—è –∫–æ–¥ –Ω–∞ Python.

### –ó–∞–¥–∞—á–∞ - –∑–∞—Ö–≤–∞—Ç –∞—É–¥–∏–æ

1. –í–∫–ª—é—á–∏—Ç–µ Pi –∏ –¥–æ–∂–¥–∏—Ç–µ—Å—å –µ–≥–æ –∑–∞–≥—Ä—É–∑–∫–∏.

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ VS Code, –ª–∏–±–æ –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –Ω–∞ Pi, –ª–∏–±–æ –ø–æ–¥–∫–ª—é—á–∏–≤—à–∏—Å—å —á–µ—Ä–µ–∑ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ Remote SSH.

1. –ü–∞–∫–µ—Ç PyAudio –¥–ª—è Pip —Å–æ–¥–µ—Ä–∂–∏—Ç —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∑–∞–ø–∏—Å–∏ –∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –∞—É–¥–∏–æ. –≠—Ç–æ—Ç –ø–∞–∫–µ—Ç –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –∞—É–¥–∏–æ–±–∏–±–ª–∏–æ—Ç–µ–∫, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞—Ä–∞–Ω–µ–µ. –í—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –¥–ª—è –∏—Ö —É—Å—Ç–∞–Ω–æ–≤–∫–∏:

    ```sh
    sudo apt update
    sudo apt install libportaudio0 libportaudio2 libportaudiocpp0 portaudio19-dev libasound2-plugins --yes 
    ```

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–∞–∫–µ—Ç PyAudio –¥–ª—è Pip.

    ```sh
    pip3 install pyaudio
    ```

1. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é –ø–∞–ø–∫—É —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º `smart-timer` –∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ –Ω–µ–µ —Ñ–∞–π–ª —Å –∏–º–µ–Ω–µ–º `app.py`.

1. –î–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –∏–º–ø–æ—Ä—Ç—ã –≤ –Ω–∞—á–∞–ª–æ —ç—Ç–æ–≥–æ —Ñ–∞–π–ª–∞:

    ```python
    import io
    import pyaudio
    import time
    import wave
    
    from grove.factory import Factory
    ```

    –≠—Ç–æ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –º–æ–¥—É–ª—å `pyaudio`, —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –º–æ–¥—É–ª–∏ Python –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å WAV-—Ñ–∞–π–ª–∞–º–∏, –∞ —Ç–∞–∫–∂–µ –º–æ–¥—É–ª—å `grove.factory` –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ `Factory` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª–∞—Å—Å–∞ –∫–Ω–æ–ø–∫–∏.

1. –ù–∏–∂–µ –¥–æ–±–∞–≤—å—Ç–µ –∫–æ–¥ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–Ω–æ–ø–∫–∏ Grove.

    –ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ ReSpeaker 2-Mics Pi HAT, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ª–µ–¥—É—é—â–∏–π –∫–æ–¥:

    ```python
    # The button on the ReSpeaker 2-Mics Pi HAT
    button = Factory.getButton("GPIO-LOW", 17)
    ```

    –≠—Ç–æ—Ç –∫–æ–¥ —Å–æ–∑–¥–∞–µ—Ç –∫–Ω–æ–ø–∫—É –Ω–∞ –ø–æ—Ä—Ç—É **D17**, –∫ –∫–æ—Ç–æ—Ä–æ–º—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ –Ω–∞ ReSpeaker 2-Mics Pi HAT. –≠—Ç–∞ –∫–Ω–æ–ø–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫—É –Ω–∏–∑–∫–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞ –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏.

    –ï—Å–ª–∏ –≤—ã –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ ReSpeaker 2-Mics Pi HAT, –∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –∫–Ω–æ–ø–∫—É Grove, –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—É—é –∫ –±–∞–∑–æ–≤–æ–º—É –º–æ–¥—É–ª—é, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ—Ç –∫–æ–¥:

    ```python
    button = Factory.getButton("GPIO-HIGH", 5)
    ```

    –≠—Ç–æ—Ç –∫–æ–¥ —Å–æ–∑–¥–∞–µ—Ç –∫–Ω–æ–ø–∫—É –Ω–∞ –ø–æ—Ä—Ç—É **D5**, –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—É—é –Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫—É –≤—ã—Å–æ–∫–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞ –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏.

1. –ù–∏–∂–µ —Å–æ–∑–¥–∞–π—Ç–µ —ç–∫–∑–µ–º–ø–ª—è—Ä –∫–ª–∞—Å—Å–∞ PyAudio –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∞—É–¥–∏–æ:

    ```python
    audio = pyaudio.PyAudio()
    ```

1. –£–∫–∞–∂–∏—Ç–µ –Ω–æ–º–µ—Ä –∞–ø–ø–∞—Ä–∞—Ç–Ω–æ–π –∫–∞—Ä—Ç—ã –¥–ª—è –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ –∏ –¥–∏–Ω–∞–º–∏–∫–∞. –≠—Ç–æ –±—É–¥–µ—Ç –Ω–æ–º–µ—Ä –∫–∞—Ä—Ç—ã, –∫–æ—Ç–æ—Ä—ã–π –≤—ã –Ω–∞—à–ª–∏, –∑–∞–ø—É—Å—Ç–∏–≤ –∫–æ–º–∞–Ω–¥—ã `arecord -l` –∏ `aplay -l` —Ä–∞–Ω–µ–µ –≤ —ç—Ç–æ–º —É—Ä–æ–∫–µ.

    ```python
    microphone_card_number = <microphone card number>
    speaker_card_number = <speaker card number>
    ```

    –ó–∞–º–µ–Ω–∏—Ç–µ `<microphone card number>` –Ω–∞ –Ω–æ–º–µ—Ä –∫–∞—Ä—Ç—ã –≤–∞—à–µ–≥–æ –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞.

    –ó–∞–º–µ–Ω–∏—Ç–µ `<speaker card number>` –Ω–∞ –Ω–æ–º–µ—Ä –∫–∞—Ä—Ç—ã –≤–∞—à–µ–≥–æ –¥–∏–Ω–∞–º–∏–∫–∞, —Ç–æ—Ç –∂–µ –Ω–æ–º–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –≤—ã —É–∫–∞–∑–∞–ª–∏ –≤ —Ñ–∞–π–ª–µ `alsa.conf`.

1. –ù–∏–∂–µ —É–∫–∞–∂–∏—Ç–µ —á–∞—Å—Ç–æ—Ç—É –¥–∏—Å–∫—Ä–µ—Ç–∏–∑–∞—Ü–∏–∏ –¥–ª—è –∑–∞—Ö–≤–∞—Ç–∞ –∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –∞—É–¥–∏–æ. –í–æ–∑–º–æ–∂–Ω–æ, –≤–∞–º –ø—Ä–∏–¥–µ—Ç—Å—è –∏–∑–º–µ–Ω–∏—Ç—å —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è.

    ```python
    rate = 48000 #48KHz
    ```

    –ï—Å–ª–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∫–æ–¥–∞ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ –æ—à–∏–±–∫–∏, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å —á–∞—Å—Ç–æ—Ç–æ–π –¥–∏—Å–∫—Ä–µ—Ç–∏–∑–∞—Ü–∏–∏, –∏–∑–º–µ–Ω–∏—Ç–µ —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞ `44100` –∏–ª–∏ `16000`. –ß–µ–º –≤—ã—à–µ –∑–Ω–∞—á–µ–Ω–∏–µ, —Ç–µ–º –ª—É—á—à–µ –∫–∞—á–µ—Å—Ç–≤–æ –∑–≤—É–∫–∞.

1. –ù–∏–∂–µ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º `capture_audio`. –û–Ω–∞ –±—É–¥–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å—Å—è –¥–ª—è –∑–∞—Ö–≤–∞—Ç–∞ –∞—É–¥–∏–æ —Å –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞:

    ```python
    def capture_audio():
    ```

1. –í–Ω—É—Ç—Ä–∏ —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –¥–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–π –∫–æ–¥ –¥–ª—è –∑–∞—Ö–≤–∞—Ç–∞ –∞—É–¥–∏–æ:

    ```python
    stream = audio.open(format = pyaudio.paInt16,
                        rate = rate,
                        channels = 1, 
                        input_device_index = microphone_card_number,
                        input = True,
                        frames_per_buffer = 4096)

    frames = []

    while button.is_pressed():
        frames.append(stream.read(4096))

    stream.stop_stream()
    stream.close()
    ```

    –≠—Ç–æ—Ç –∫–æ–¥ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –≤—Ö–æ–¥–Ω–æ–π –∞—É–¥–∏–æ–ø–æ—Ç–æ–∫ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –æ–±—ä–µ–∫—Ç–∞ PyAudio. –ü–æ—Ç–æ–∫ –±—É–¥–µ—Ç –∑–∞—Ö–≤–∞—Ç—ã–≤–∞—Ç—å –∞—É–¥–∏–æ —Å –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ —Å —á–∞—Å—Ç–æ—Ç–æ–π 16 –∫–ì—Ü, –∑–∞–ø–∏—Å—ã–≤–∞—è –µ–≥–æ –≤ –±—É—Ñ–µ—Ä—ã —Ä–∞–∑–º–µ—Ä–æ–º 4096 –±–∞–π—Ç.

    –ó–∞—Ç–µ–º –∫–æ–¥ –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ü–∏–∫–ª, –ø–æ–∫–∞ –∫–Ω–æ–ø–∫–∞ Grove –Ω–∞–∂–∞—Ç–∞, —Å—á–∏—Ç—ã–≤–∞—è —ç—Ç–∏ –±—É—Ñ–µ—Ä—ã –ø–æ 4096 –±–∞–π—Ç –≤ –º–∞—Å—Å–∏–≤ –∫–∞–∂–¥—ã–π —Ä–∞–∑.

    > üíÅ –ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö, –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã—Ö –º–µ—Ç–æ–¥—É `open`, –º–æ–∂–Ω–æ –ø—Ä–æ—á–∏—Ç–∞—Ç—å –≤ [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ PyAudio](https://people.csail.mit.edu/hubert/pyaudio/docs/).

    –ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –∫–Ω–æ–ø–∫–∞ –æ—Ç–ø—É—â–µ–Ω–∞, –ø–æ—Ç–æ–∫ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∏ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è.

1. –î–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–π –∫–æ–¥ –≤ –∫–æ–Ω–µ—Ü —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏:

    ```python
    wav_buffer = io.BytesIO()
    with wave.open(wav_buffer, 'wb') as wavefile:
        wavefile.setnchannels(1)
        wavefile.setsampwidth(audio.get_sample_size(pyaudio.paInt16))
        wavefile.setframerate(rate)
        wavefile.writeframes(b''.join(frames))
        wav_buffer.seek(0)

    return wav_buffer
    ```

    –≠—Ç–æ—Ç –∫–æ–¥ —Å–æ–∑–¥–∞–µ—Ç –±–∏–Ω–∞—Ä–Ω—ã–π –±—É—Ñ–µ—Ä –∏ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤—Å–µ –∑–∞—Ö–≤–∞—á–µ–Ω–Ω–æ–µ –∞—É–¥–∏–æ –≤ –Ω–µ–≥–æ –∫–∞–∫ [WAV-—Ñ–∞–π–ª](https://wikipedia.org/wiki/WAV). –≠—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Å–ø–æ—Å–æ–± –∑–∞–ø–∏—Å–∏ –Ω–µ—Å–∂–∞—Ç–æ–≥–æ –∞—É–¥–∏–æ –≤ —Ñ–∞–π–ª. –ó–∞—Ç–µ–º —ç—Ç–æ—Ç –±—É—Ñ–µ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è.

1. –î–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â—É—é —Ñ—É–Ω–∫—Ü–∏—é `play_audio` –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –∞—É–¥–∏–æ–±—É—Ñ–µ—Ä–∞:

    ```python
    def play_audio(buffer):
        stream = audio.open(format = pyaudio.paInt16,
                            rate = rate,
                            channels = 1,
                            output_device_index = speaker_card_number,
                            output = True)
    
        with wave.open(buffer, 'rb') as wf:
            data = wf.readframes(4096)
    
            while len(data) > 0:
                stream.write(data)
                data = wf.readframes(4096)
    
            stream.close()
    ```

    –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –¥—Ä—É–≥–æ–π –∞—É–¥–∏–æ–ø–æ—Ç–æ–∫, –Ω–∞ —ç—Ç–æ—Ç —Ä–∞–∑ –¥–ª—è –≤—ã–≤–æ–¥–∞ ‚Äî –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –∞—É–¥–∏–æ. –û–Ω–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–µ –∂–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, —á—Ç–æ –∏ –≤—Ö–æ–¥–Ω–æ–π –ø–æ—Ç–æ–∫. –ë—É—Ñ–µ—Ä –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ WAV-—Ñ–∞–π–ª –∏ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ –≤—ã—Ö–æ–¥–Ω–æ–π –ø–æ—Ç–æ–∫ –∫—É—Å–∫–∞–º–∏ –ø–æ 4096 –±–∞–π—Ç, –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥—è –∞—É–¥–∏–æ. –ó–∞—Ç–µ–º –ø–æ—Ç–æ–∫ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è.

1. –î–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–π –∫–æ–¥ –Ω–∏–∂–µ —Ñ—É–Ω–∫—Ü–∏–∏ `capture_audio`, —á—Ç–æ–±—ã –≤—ã–ø–æ–ª–Ω—è—Ç—å —Ü–∏–∫–ª –¥–æ –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏. –ü–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏ –∞—É–¥–∏–æ –∑–∞—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç—Å—è, –∞ –∑–∞—Ç–µ–º –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è.

    ```python
    while True:
        while not button.is_pressed():
            time.sleep(.1)
        
        buffer = capture_audio()
        play_audio(buffer)
    ```

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–¥. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –∏ –≥–æ–≤–æ—Ä–∏—Ç–µ –≤ –º–∏–∫—Ä–æ—Ñ–æ–Ω. –û—Ç–ø—É—Å—Ç–∏—Ç–µ –∫–Ω–æ–ø–∫—É, –∫–æ–≥–¥–∞ –∑–∞–∫–æ–Ω—á–∏—Ç–µ, –∏ –≤—ã —É—Å–ª—ã—à–∏—Ç–µ –∑–∞–ø–∏—Å—å.

    –í—ã –º–æ–∂–µ—Ç–µ –ø–æ–ª—É—á–∏—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –æ—à–∏–±–∫–∏ ALSA –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ PyAudio. –≠—Ç–æ —Å–≤—è–∑–∞–Ω–æ —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π Pi –¥–ª—è –∞—É–¥–∏–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤, –∫–æ—Ç–æ—Ä—ã—Ö —É –≤–∞—Å –Ω–µ—Ç. –≠—Ç–∏ –æ—à–∏–±–∫–∏ –º–æ–∂–Ω–æ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å.

    ```output
    pi@raspberrypi:~/smart-timer $ python3 app.py 
    ALSA lib pcm.c:2565:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.front
    ALSA lib pcm.c:2565:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.rear
    ALSA lib pcm.c:2565:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.center_lfe
    ALSA lib pcm.c:2565:(snd_pcm_open_noupdate) Unknown PCM cards.pcm.side
    ```

    –ï—Å–ª–∏ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ —Å–ª–µ–¥—É—é—â—É—é –æ—à–∏–±–∫—É:

    ```output
    OSError: [Errno -9997] Invalid sample rate
    ```

    –∏–∑–º–µ–Ω–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ `rate` –Ω–∞ 44100 –∏–ª–∏ 16000.

> üíÅ –í—ã –º–æ–∂–µ—Ç–µ –Ω–∞–π—Ç–∏ —ç—Ç–æ—Ç –∫–æ–¥ –≤ –ø–∞–ø–∫–µ [code-record/pi](../../../../../6-consumer/lessons/1-speech-recognition/code-record/pi).

üòÄ –í–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –∑–∞–ø–∏—Å–∏ –∞—É–¥–∏–æ —É—Å–ø–µ—à–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç!

---

**–û—Ç–∫–∞–∑ –æ—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏**:  
–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –±—ã–ª –ø–µ—Ä–µ–≤–µ–¥–µ–Ω —Å –ø–æ–º–æ—â—å—é —Å–µ—Ä–≤–∏—Å–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–µ—Ä–µ–≤–æ–¥–∞ [Co-op Translator](https://github.com/Azure/co-op-translator). –ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –Ω–∞—à–∏ —É—Å–∏–ª–∏—è –ø–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—é —Ç–æ—á–Ω–æ—Å—Ç–∏, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–µ—Ä–µ–≤–æ–¥—ã –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –æ—à–∏–±–∫–∏ –∏–ª–∏ –Ω–µ—Ç–æ—á–Ω–æ—Å—Ç–∏. –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –Ω–∞ –µ–≥–æ —Ä–æ–¥–Ω–æ–º —è–∑—ã–∫–µ —Å–ª–µ–¥—É–µ—Ç —Å—á–∏—Ç–∞—Ç—å –∞–≤—Ç–æ—Ä–∏—Ç–µ—Ç–Ω—ã–º –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º. –î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥ —á–µ–ª–æ–≤–µ–∫–æ–º. –ú—ã –Ω–µ –Ω–µ—Å–µ–º –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∑–∞ –ª—é–±—ã–µ –Ω–µ–¥–æ—Ä–∞–∑—É–º–µ–Ω–∏—è –∏–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏, –≤–æ–∑–Ω–∏–∫—à–∏–µ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω–æ–≥–æ –ø–µ—Ä–µ–≤–æ–¥–∞.