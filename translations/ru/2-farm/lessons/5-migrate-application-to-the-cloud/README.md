<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "5f2d2f4a5a023c93ab34a0cc5b47c0c4",
  "translation_date": "2025-08-26T22:31:24+00:00",
  "source_file": "2-farm/lessons/5-migrate-application-to-the-cloud/README.md",
  "language_code": "ru"
}
-->
# –ü–µ—Ä–µ–Ω–æ—Å –ª–æ–≥–∏–∫–∏ –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ –æ–±–ª–∞–∫–æ

![–°–∫–µ—Ç—á–Ω–æ—É—Ç —Å –æ–±–∑–æ—Ä–æ–º —ç—Ç–æ–≥–æ —É—Ä–æ–∫–∞](../../../../../translated_images/lesson-9.dfe99c8e891f48e179724520da9f5794392cf9a625079281ccdcbf09bd85e1b6.ru.jpg)

> –°–∫–µ—Ç—á–Ω–æ—É—Ç –æ—Ç [Nitya Narasimhan](https://github.com/nitya). –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –µ–≥–æ –≤ –±–æ–ª—å—à–µ–º —Ä–∞–∑–º–µ—Ä–µ.

–≠—Ç–æ—Ç —É—Ä–æ–∫ –±—ã–ª —á–∞—Å—Ç—å—é [–ü—Ä–æ–µ–∫—Ç–∞ 2 –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö –≤ IoT - —Å–µ—Ä–∏—è –æ —Ü–∏—Ñ—Ä–æ–≤–æ–º —Å–µ–ª—å—Å–∫–æ–º —Ö–æ–∑—è–π—Å—Ç–≤–µ](https://youtube.com/playlist?list=PLmsFUfdnGr3yCutmcVg6eAUEfsGiFXgcx) –æ—Ç [Microsoft Reactor](https://developer.microsoft.com/reactor/?WT.mc_id=academic-17441-jabenn).

[![–£–ø—Ä–∞–≤–ª—è–π—Ç–µ –≤–∞—à–∏–º IoT-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ–º —Å –ø–æ–º–æ—â—å—é —Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æless-–∫–æ–¥–∞](https://img.youtube.com/vi/VVZDcs5u1_I/0.jpg)](https://youtu.be/VVZDcs5u1_I)

## –í–∏–∫—Ç–æ—Ä–∏–Ω–∞ –ø–µ—Ä–µ–¥ –ª–µ–∫—Ü–∏–µ–π

[–í–∏–∫—Ç–æ—Ä–∏–Ω–∞ –ø–µ—Ä–µ–¥ –ª–µ–∫—Ü–∏–µ–π](https://black-meadow-040d15503.1.azurestaticapps.net/quiz/17)

## –í–≤–µ–¥–µ–Ω–∏–µ

–í –ø—Ä–æ—à–ª–æ–º —É—Ä–æ–∫–µ –≤—ã —É–∑–Ω–∞–ª–∏, –∫–∞–∫ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤–ª–∞–∂–Ω–æ—Å—Ç–∏ –ø–æ—á–≤—ã –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–ª–µ –≤–∞—à–µ–≥–æ —Ä–∞—Å—Ç–µ–Ω–∏—è –∫ –æ–±–ª–∞—á–Ω–æ–º—É IoT-—Å–µ—Ä–≤–∏—Å—É. –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥ ‚Äî –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–Ω—ã–π –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π —É–ø—Ä–∞–≤–ª—è–µ—Ç –≤—Ä–µ–º–µ–Ω–µ–º —Ä–∞–±–æ—Ç—ã —Ä–µ–ª–µ, –≤ –æ–±–ª–∞–∫–æ. –í —ç—Ç–æ–º —É—Ä–æ–∫–µ –≤—ã —É–∑–Ω–∞–µ—Ç–µ, –∫–∞–∫ —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å —Å –ø–æ–º–æ—â—å—é —Å–µ—Ä–≤–µ—Äless-—Ñ—É–Ω–∫—Ü–∏–π.

–í —ç—Ç–æ–º —É—Ä–æ–∫–µ –º—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º:

* [–ß—Ç–æ —Ç–∞–∫–æ–µ —Å–µ—Ä–≤–µ—Äless?](../../../../../2-farm/lessons/5-migrate-application-to-the-cloud)
* [–°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä–≤–µ—Äless-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è](../../../../../2-farm/lessons/5-migrate-application-to-the-cloud)
* [–°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä–∞ —Å–æ–±—ã—Ç–∏–π IoT Hub](../../../../../2-farm/lessons/5-migrate-application-to-the-cloud)
* [–û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ –ø—Ä—è–º—ã–µ –º–µ—Ç–æ–¥—ã –∏–∑ —Å–µ—Ä–≤–µ—Äless-–∫–æ–¥–∞](../../../../../2-farm/lessons/5-migrate-application-to-the-cloud)
* [–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–µ—Äless-–∫–æ–¥–∞ –≤ –æ–±–ª–∞–∫–µ](../../../../../2-farm/lessons/5-migrate-application-to-the-cloud)

## –ß—Ç–æ —Ç–∞–∫–æ–µ —Å–µ—Ä–≤–µ—Äless?

–°–µ—Ä–≤–µ—Äless, –∏–ª–∏ —Å–µ—Ä–≤–µ—Äless-–≤—ã—á–∏—Å–ª–µ–Ω–∏—è, –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–µ–±–æ–ª—å—à–∏—Ö –±–ª–æ–∫–æ–≤ –∫–æ–¥–∞, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ –æ–±–ª–∞–∫–µ –≤ –æ—Ç–≤–µ—Ç –Ω–∞ —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è. –ö–æ–≥–¥–∞ —Å–æ–±—ã—Ç–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –≤–∞—à –∫–æ–¥ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∏ –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ —Å–æ–±—ã—Ç–∏–∏. –≠—Ç–∏ —Å–æ–±—ã—Ç–∏—è –º–æ–≥—É—Ç –±—ã—Ç—å –≤—ã–∑–≤–∞–Ω—ã —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏, –≤–∫–ª—é—á–∞—è –≤–µ–±-–∑–∞–ø—Ä–æ—Å—ã, —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –æ—á–µ—Ä–µ–¥–∏, –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏—è, –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ IoT-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ –≤ IoT-—Å–µ—Ä–≤–∏—Å.

![–°–æ–±—ã—Ç–∏—è, –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º—ã–µ –∏–∑ IoT-—Å–µ—Ä–≤–∏—Å–∞ –≤ —Å–µ—Ä–≤–µ—Äless-—Å–µ—Ä–≤–∏—Å, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏](../../../../../translated_images/iot-messages-to-serverless.0194da1cc0732bb7d0f823aed3fce54735c6b1ad3bf36089804d8aaefc0a774f.ru.png)

> üíÅ –ï—Å–ª–∏ –≤—ã —Ä–∞–Ω—å—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ —Ç—Ä–∏–≥–≥–µ—Ä—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, –≤—ã –º–æ–∂–µ—Ç–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å —ç—Ç–æ –∫–∞–∫ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ–µ —è–≤–ª–µ–Ω–∏–µ: –∫–æ–¥ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ –æ—Ç–≤–µ—Ç –Ω–∞ —Å–æ–±—ã—Ç–∏–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏.

![–ö–æ–≥–¥–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Å–æ–±—ã—Ç–∏–π –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ, —Å–µ—Ä–≤–µ—Äless-—Å–µ—Ä–≤–∏—Å –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è, —á—Ç–æ–±—ã –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –∏—Ö –≤—Å–µ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ](../../../../../translated_images/serverless-scaling.f8c769adf0413fd17be1af4f07ff63016b347e2ff869be6c4abb211f9e93909d.ru.png)

–í–∞—à –∫–æ–¥ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ç–æ–≥–¥–∞, –∫–æ–≥–¥–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å–æ–±—ã—Ç–∏–µ, –≤ –æ—Å—Ç–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –æ–Ω –Ω–µ –∞–∫—Ç–∏–≤–µ–Ω. –°–æ–±—ã—Ç–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –≤–∞—à –∫–æ–¥ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è. –≠—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–µ—Ä–≤–µ—Äless –æ—á–µ–Ω—å –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã–º ‚Äî –µ—Å–ª–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Å–æ–±—ã—Ç–∏–π –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ, –æ–±–ª–∞—á–Ω—ã–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä –º–æ–∂–µ—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤–∞—à—É —Ñ—É–Ω–∫—Ü–∏—é —Å—Ç–æ–ª—å–∫–æ —Ä–∞–∑, —Å–∫–æ–ª—å–∫–æ –Ω—É–∂–Ω–æ, –Ω–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö. –ù–µ–¥–æ—Å—Ç–∞—Ç–æ–∫ –≤ —Ç–æ–º, —á—Ç–æ –µ—Å–ª–∏ –≤–∞–º –Ω—É–∂–Ω–æ –¥–µ–ª–∏—Ç—å—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –º–µ–∂–¥—É —Å–æ–±—ã—Ç–∏—è–º–∏, –µ—ë –Ω—É–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å, –Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö, –∞ –Ω–µ –≤ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏.

–í–∞—à –∫–æ–¥ –ø–∏—à–µ—Ç—Å—è –≤ –≤–∏–¥–µ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ —Å–æ–±—ã—Ç–∏–∏ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞. –î–ª—è –Ω–∞–ø–∏—Å–∞–Ω–∏—è —Å–µ—Ä–≤–µ—Äless-—Ñ—É–Ω–∫—Ü–∏–π –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —à–∏—Ä–æ–∫–∏–π —Å–ø–µ–∫—Ç—Ä —è–∑—ã–∫–æ–≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è.

> üéì –°–µ—Ä–≤–µ—Äless —Ç–∞–∫–∂–µ –Ω–∞–∑—ã–≤–∞—é—Ç "–§—É–Ω–∫—Ü–∏–∏ –∫–∞–∫ —É—Å–ª—É–≥–∞" (FaaS), —Ç–∞–∫ –∫–∞–∫ –∫–∞–∂–¥—ã–π —Ç—Ä–∏–≥–≥–µ—Ä —Å–æ–±—ã—Ç–∏—è —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è –∫–∞–∫ —Ñ—É–Ω–∫—Ü–∏—è –≤ –∫–æ–¥–µ.

–ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –Ω–∞–∑–≤–∞–Ω–∏–µ, —Å–µ—Ä–≤–µ—Äless –≤—Å—ë –∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–µ—Ä–≤–µ—Ä—ã. –ù–∞–∑–≤–∞–Ω–∏–µ —Å–≤—è–∑–∞–Ω–æ —Å —Ç–µ–º, —á—Ç–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É –Ω–µ –Ω—É–∂–Ω–æ –∑–∞–±–æ—Ç–∏—Ç—å—Å—è –æ —Å–µ—Ä–≤–µ—Ä–∞—Ö, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–¥–∞, ‚Äî –≤—Å—ë, —á—Ç–æ –≤–∞–∂–Ω–æ, —ç—Ç–æ —Ç–æ, —á—Ç–æ –∫–æ–¥ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ –æ—Ç–≤–µ—Ç –Ω–∞ —Å–æ–±—ã—Ç–∏–µ. –û–±–ª–∞—á–Ω—ã–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä —É–ø—Ä–∞–≤–ª—è–µ—Ç —Å–µ—Ä–≤–µ—Äless-**—Å—Ä–µ–¥–æ–π –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**, –∫–æ—Ç–æ—Ä–∞—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å–µ—Ä–≤–µ—Ä—ã, —Å–µ—Ç—å, —Ö—Ä–∞–Ω–∏–ª–∏—â–µ, –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä, –ø–∞–º—è—Ç—å –∏ –≤—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ, —á—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤–∞—à–µ–≥–æ –∫–æ–¥–∞. –í —ç—Ç–æ–π –º–æ–¥–µ–ª–∏ –≤—ã –Ω–µ –ø–ª–∞—Ç–∏—Ç–µ –∑–∞ —Å–µ—Ä–≤–µ—Ä—ã, —Ç–∞–∫ –∫–∞–∫ –∏—Ö –Ω–µ—Ç. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –≤—ã –ø–ª–∞—Ç–∏—Ç–µ –∑–∞ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤–∞—à–µ–≥–æ –∫–æ–¥–∞ –∏ –æ–±—ä—ë–º –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–π –ø–∞–º—è—Ç–∏.

> üí∞ –°–µ—Ä–≤–µ—Äless ‚Äî –æ–¥–∏–Ω –∏–∑ —Å–∞–º—ã—Ö –¥–µ—à—ë–≤—ã—Ö —Å–ø–æ—Å–æ–±–æ–≤ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–¥–∞ –≤ –æ–±–ª–∞–∫–µ. –ù–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞ –º–æ–º–µ–Ω—Ç –Ω–∞–ø–∏—Å–∞–Ω–∏—è –æ–¥–∏–Ω –∏–∑ –æ–±–ª–∞—á–Ω—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—Å–µ–º –≤–∞—à–∏–º —Å–µ—Ä–≤–µ—Äless-—Ñ—É–Ω–∫—Ü–∏—è–º –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –¥–æ 1 000 000 —Ä–∞–∑ –≤ –º–µ—Å—è—Ü –±–µ—Å–ø–ª–∞—Ç–Ω–æ, –∞ –∑–∞—Ç–µ–º –≤–∑–∏–º–∞–µ—Ç $0,20 –∑–∞ –∫–∞–∂–¥—ã–µ 1 000 000 –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–π. –ö–æ–≥–¥–∞ –≤–∞—à –∫–æ–¥ –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è, –≤—ã –Ω–∏—á–µ–≥–æ –Ω–µ –ø–ª–∞—Ç–∏—Ç–µ.

–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ IoT —Å–µ—Ä–≤–µ—Äless-–º–æ–¥–µ–ª—å –∏–¥–µ–∞–ª—å–Ω–∞. –í—ã –º–æ–∂–µ—Ç–µ –Ω–∞–ø–∏—Å–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤ –æ—Ç–≤–µ—Ç –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è, –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ª—é–±—ã–º IoT-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ–º, –ø–æ–¥–∫–ª—é—á—ë–Ω–Ω—ã–º –∫ –≤–∞—à–µ–º—É –æ–±–ª–∞—á–Ω–æ–º—É IoT-—Å–µ—Ä–≤–∏—Å—É. –í–∞—à –∫–æ–¥ –±—É–¥–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –≤—Å–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è, –Ω–æ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è —Ç–æ–ª—å–∫–æ —Ç–æ–≥–¥–∞, –∫–æ–≥–¥–∞ —ç—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ.

‚úÖ –í—Å–ø–æ–º–Ω–∏—Ç–µ –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –≤—ã –ø–∏—Å–∞–ª–∏ –∫–∞–∫ —Å–µ—Ä–≤–µ—Ä–Ω—ã–π –∫–æ–¥ –¥–ª—è –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π —á–µ—Ä–µ–∑ MQTT. –ö–∞–∫, –ø–æ –≤–∞—à–µ–º—É –º–Ω–µ–Ω–∏—é, –æ–Ω –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤ –æ–±–ª–∞–∫–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–µ—Ä–≤–µ—Äless? –ö–∞–∫ –≤—ã –¥—É–º–∞–µ—Ç–µ, –∫–∞–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω—É–∂–Ω–æ –≤–Ω–µ—Å—Ç–∏ –≤ –∫–æ–¥, —á—Ç–æ–±—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Å–µ—Ä–≤–µ—Äless-–≤—ã—á–∏—Å–ª–µ–Ω–∏—è?

> üíÅ –°–µ—Ä–≤–µ—Äless-–º–æ–¥–µ–ª—å —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –∏ –Ω–∞ –¥—Ä—É–≥–∏–µ –æ–±–ª–∞—á–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã, –ø–æ–º–∏–º–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–¥–∞. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤ –æ–±–ª–∞–∫–µ –¥–æ—Å—Ç—É–ø–Ω—ã —Å–µ—Ä–≤–µ—Äless-–±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —Å –º–æ–¥–µ–ª—å—é –æ–ø–ª–∞—Ç—ã –∑–∞ –∑–∞–ø—Ä–æ—Å—ã, —Ç–∞–∫–∏–µ –∫–∞–∫ –≤—ã–±–æ—Ä–∫–∞ –∏–ª–∏ –≤—Å—Ç–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö, –æ–±—ã—á–Ω–æ —Å —É—á—ë—Ç–æ–º –æ–±—ä—ë–º–∞ —Ä–∞–±–æ—Ç—ã, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–≥–æ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤—ã–±–æ—Ä–∫–∞ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ –ø–æ –ø–µ—Ä–≤–∏—á–Ω–æ–º—É –∫–ª—é—á—É –±—É–¥–µ—Ç —Å—Ç–æ–∏—Ç—å –º–µ–Ω—å—à–µ, —á–µ–º —Å–ª–æ–∂–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è —Å –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ–º –º–Ω–æ–∂–µ—Å—Ç–≤–∞ —Ç–∞–±–ª–∏—Ü –∏ –≤–æ–∑–≤—Ä–∞—Ç–æ–º —Ç—ã—Å—è—á —Å—Ç—Ä–æ–∫.

## –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä–≤–µ—Äless-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–°–µ—Ä–≤–∏—Å —Å–µ—Ä–≤–µ—Äless-–≤—ã—á–∏—Å–ª–µ–Ω–∏–π –æ—Ç Microsoft –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è Azure Functions.

![–õ–æ–≥–æ—Ç–∏–ø Azure Functions](../../../../../translated_images/azure-functions-logo.1cfc8e3204c9c44aaf80fcf406fc8544d80d7f00f8d3e8ed6fed764563e17564.ru.png)

–ö–æ—Ä–æ—Ç–∫–æ–µ –≤–∏–¥–µ–æ –Ω–∏–∂–µ –¥–∞—ë—Ç –æ–±–∑–æ—Ä Azure Functions.

[![–í–∏–¥–µ–æ–æ–±–∑–æ—Ä Azure Functions](https://img.youtube.com/vi/8-jz5f_JyEQ/0.jpg)](https://www.youtube.com/watch?v=8-jz5f_JyEQ)

> üé• –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—ã—à–µ, —á—Ç–æ–±—ã –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤–∏–¥–µ–æ.

‚úÖ –ù–∞–π–¥–∏—Ç–µ –≤—Ä–µ–º—è, —á—Ç–æ–±—ã –∏–∑—É—á–∏—Ç—å –æ–±–∑–æ—Ä Azure Functions –≤ [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Microsoft Azure Functions](https://docs.microsoft.com/azure/azure-functions/functions-overview?WT.mc_id=academic-17441-jabenn).

–î–ª—è –Ω–∞–ø–∏—Å–∞–Ω–∏—è Azure Functions –≤—ã –Ω–∞—á–∏–Ω–∞–µ—Ç–µ —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Azure Functions –Ω–∞ –≤—ã–±—Ä–∞–Ω–Ω–æ–º –≤–∞–º–∏ —è–∑—ã–∫–µ. Azure Functions –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç Python, JavaScript, TypeScript, C#, F#, Java –∏ Powershell. –í —ç—Ç–æ–º —É—Ä–æ–∫–µ –≤—ã –Ω–∞—É—á–∏—Ç–µ—Å—å –ø–∏—Å–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Azure Functions –Ω–∞ Python.

> üíÅ Azure Functions —Ç–∞–∫–∂–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–∏—Å–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–∞ –ª—é–±–æ–º —è–∑—ã–∫–µ, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–µ–º HTTP-–∑–∞–ø—Ä–æ—Å—ã, –≤–∫–ª—é—á–∞—è —Ç–∞–∫–∏–µ —Å—Ç–∞—Ä—ã–µ —è–∑—ã–∫–∏, –∫–∞–∫ COBOL.

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π —Å–æ—Å—Ç–æ—è—Ç –∏–∑ –æ–¥–Ω–æ–≥–æ –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö *—Ç—Ä–∏–≥–≥–µ—Ä–æ–≤* ‚Äî —Ñ—É–Ω–∫—Ü–∏–π, –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ–∞–≥–∏—Ä—É—é—Ç –Ω–∞ —Å–æ–±—ã—Ç–∏—è. –í –æ–¥–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ —Ñ—É–Ω–∫—Ü–∏–π –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–±—â—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–º —Ñ–∞–π–ª–µ –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ IoT Hub, –∏ –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ —Å–º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Ö –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏ –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏–π.

### –ó–∞–¥–∞—á–∞ ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ Azure Functions

> –ù–∞ –º–æ–º–µ–Ω—Ç –Ω–∞–ø–∏—Å–∞–Ω–∏—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Azure Functions –Ω–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –ø—Ä–æ–µ–∫—Ç—ã –Ω–∞ Python –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞—Ö —Å Apple Silicon. –í–∞–º –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Mac —Å –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–º Intel, –ü–ö —Å Windows –∏–ª–∏ –ü–ö —Å Linux.

–û–¥–Ω–æ–π –∏–∑ –∑–∞–º–µ—á–∞—Ç–µ–ª—å–Ω—ã—Ö –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π Azure Functions —è–≤–ª—è–µ—Ç—Å—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏—Ö –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è. –¢–æ –∂–µ —Å–∞–º–æ–µ —Å—Ä–µ–¥–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –æ–±–ª–∞–∫–µ, –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω–∞ –Ω–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–∏—Å–∞—Ç—å –∫–æ–¥, —Ä–µ–∞–≥–∏—Ä—É—é—â–∏–π –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è IoT, –∏ –∑–∞–ø—É—Å–∫–∞—Ç—å –µ–≥–æ –ª–æ–∫–∞–ª—å–Ω–æ. –í—ã –¥–∞–∂–µ –º–æ–∂–µ—Ç–µ –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å –≤–∞—à –∫–æ–¥ –≤–æ –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π. –ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –≤—ã –±—É–¥–µ—Ç–µ –¥–æ–≤–æ–ª—å–Ω—ã —Å–≤–æ–∏–º –∫–æ–¥–æ–º, –µ–≥–æ –º–æ–∂–Ω–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –≤ –æ–±–ª–∞–∫–µ.

–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã Azure Functions –¥–æ—Å—Ç—É–ø–Ω—ã –≤ –≤–∏–¥–µ CLI, –∏–∑–≤–µ—Å—Ç–Ω–æ–≥–æ –∫–∞–∫ Azure Functions Core Tools.

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Azure Functions Core Tools, —Å–ª–µ–¥—É—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –≤ [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Azure Functions Core Tools](https://docs.microsoft.com/azure/azure-functions/functions-run-local?WT.mc_id=academic-17441-jabenn).

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ Azure Functions –¥–ª—è VS Code. –≠—Ç–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è, –æ—Ç–ª–∞–¥–∫–∏ –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è Azure Functions. –û–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π –ø–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é Azure Functions](https://marketplace.visualstudio.com/items?WT.mc_id=academic-17441-jabenn&itemName=ms-azuretools.vscode-azurefunctions) –¥–ª—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ —ç—Ç–æ–≥–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –≤ VS Code.

–ü—Ä–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Azure Functions –≤ –æ–±–ª–∞–∫–µ –µ–º—É –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –Ω–µ–±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±–ª–∞—á–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ç–∞–∫–∏—Ö –≤–µ—â–µ–π, –∫–∞–∫ —Ñ–∞–π–ª—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ —Ñ–∞–π–ª—ã –∂—É—Ä–Ω–∞–ª–æ–≤. –ö–æ–≥–¥–∞ –≤—ã –∑–∞–ø—É—Å–∫–∞–µ—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π –ª–æ–∫–∞–ª—å–Ω–æ, –æ–Ω–æ –≤—Å—ë —Ä–∞–≤–Ω–æ –¥–æ–ª–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ –æ–±–ª–∞—á–Ω–æ–º—É —Ö—Ä–∞–Ω–∏–ª–∏—â—É, –Ω–æ –≤–º–µ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –æ–±–ª–∞—á–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç–º—É–ª—è—Ç–æ—Ä —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –ø–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏–µ–º [Azurite](https://github.com/Azure/Azurite). –û–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ, –Ω–æ –≤–µ–¥—ë—Ç —Å–µ–±—è –∫–∞–∫ –æ–±–ª–∞—á–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ.

> üéì –í Azure —Ö—Ä–∞–Ω–∏–ª–∏—â–µ, –∫–æ—Ç–æ—Ä–æ–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Azure Functions, –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è Azure Storage Account. –≠—Ç–∏ –∞–∫–∫–∞—É–Ω—Ç—ã –º–æ–≥—É—Ç —Ö—Ä–∞–Ω–∏—Ç—å —Ñ–∞–π–ª—ã, –±–ª–æ–±—ã, –¥–∞–Ω–Ω—ã–µ –≤ —Ç–∞–±–ª–∏—Ü–∞—Ö –∏–ª–∏ –¥–∞–Ω–Ω—ã–µ –≤ –æ—á–µ—Ä–µ–¥—è—Ö. –û–¥–∏–Ω –∞–∫–∫–∞—É–Ω—Ç —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, —Ç–∞–∫–∏—Ö –∫–∞–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π –∏ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.

1. Azurite ‚Äî —ç—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ Node.js, –ø–æ—ç—Ç–æ–º—É –≤–∞–º –Ω—É–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Node.js. –í—ã –º–æ–∂–µ—Ç–µ –Ω–∞–π—Ç–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∑–∞–≥—Ä—É–∑–∫–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –Ω–∞ [–≤–µ–±-—Å–∞–π—Ç–µ Node.js](https://nodejs.org/). –ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Mac, –≤—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –µ–≥–æ —á–µ—Ä–µ–∑ [Homebrew](https://formulae.brew.sh/formula/node).

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Azurite —Å –ø–æ–º–æ—â—å—é —Å–ª–µ–¥—É—é—â–µ–π –∫–æ–º–∞–Ω–¥—ã (`npm` ‚Äî —ç—Ç–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤–º–µ—Å—Ç–µ —Å Node.js):

    ```sh
    npm install -g azurite
    ```

1. –°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É —Å –∏–º–µ–Ω–µ–º `azurite` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Azurite –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö:

    ```sh
    mkdir azurite
    ```

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Azurite, –ø–µ—Ä–µ–¥–∞–≤ –µ–º—É —ç—Ç—É –Ω–æ–≤—É—é –ø–∞–ø–∫—É:

    ```sh
    azurite --location azurite
    ```

    –≠–º—É–ª—è—Ç–æ—Ä —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ Azurite –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –∏ –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Å—Ä–µ–¥—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π.

    ```output
    ‚ûú  ~ azurite --location azurite  
    Azurite Blob service is starting at http://127.0.0.1:10000
    Azurite Blob service is successfully listening at http://127.0.0.1:10000
    Azurite Queue service is starting at http://127.0.0.1:10001
    Azurite Queue service is successfully listening at http://127.0.0.1:10001
    Azurite Table service is starting at http://127.0.0.1:10002
    Azurite Table service is successfully listening at http://127.0.0.1:10002
    ```

### –ó–∞–¥–∞—á–∞ ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ Azure Functions

CLI Azure Functions –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π.

1. –°–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É –¥–ª—è –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –Ω–µ—ë. –ù–∞–∑–æ–≤–∏—Ç–µ –µ—ë `soil-moisture-trigger`.

    ```sh
    mkdir soil-moisture-trigger
    cd soil-moisture-trigger
    ```

1. –°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ Python –≤–Ω—É—Ç—Ä–∏ —ç—Ç–æ–π –ø–∞–ø–∫–∏:

    ```sh
    python3 -m venv .venv
    ```

1. –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:

    * –ù–∞ Windows:
        * –ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Command Prompt –∏–ª–∏ Command Prompt —á–µ—Ä–µ–∑ Windows Terminal, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

            ```cmd
            .venv\Scripts\activate.bat
            ```

        * –ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ PowerShell, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

            ```powershell
            .\.venv\Scripts\Activate.ps1
            ```

    * –ù–∞ macOS –∏–ª–∏ Linux –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

        ```cmd
        source ./.venv/bin/activate
        ```

    > üíÅ –≠—Ç–∏ –∫–æ–º–∞–Ω–¥—ã –¥–æ–ª–∂–Ω—ã –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –∏–∑ —Ç–æ–≥–æ –∂–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è, –≥–¥–µ –≤—ã —Å–æ–∑–¥–∞–ª–∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ. –í–∞–º –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –Ω—É–∂–Ω–æ –∑–∞—Ö–æ–¥–∏—Ç—å –≤ –ø–∞–ø–∫—É `.venv`, –≤—ã –≤—Å–µ–≥–¥–∞ –¥–æ–ª–∂–Ω—ã –≤—ã–ø–æ–ª–Ω—è—Ç—å –∫–æ–º–∞–Ω–¥—É –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –∏ –ª—é–±—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–∞–∫–µ—Ç–æ–≤ –∏–ª–∏ –∑–∞–ø—É—Å–∫–∞ –∫–æ–¥–∞ –∏–∑ –ø–∞–ø–∫–∏, –≥–¥–µ –≤—ã —Å–æ–∑–¥–∞–ª–∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ.

1. –í—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â—É—é –∫–æ–º–∞–Ω–¥—É, —á—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π –≤ —ç—Ç–æ–π –ø–∞–ø–∫–µ:

    ```sh
    func init --worker-runtime python soil-moisture-trigger
    ```

    –≠—Ç–æ —Å–æ–∑–¥–∞—Å—Ç —Ç—Ä–∏ —Ñ–∞–π–ª–∞ –≤ —Ç–µ–∫—É—â–µ–π –ø–∞–ø–∫–µ:

    * `host.json` ‚Äî —ç—Ç–æ—Ç JSON-–¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π. –í–∞–º –Ω–µ –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –∏–∑–º–µ–Ω—è—Ç—å —ç—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.
    * `local.settings.json` ‚Äî —ç—Ç–æ—Ç JSON-–¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–∏ –ª–æ–∫–∞–ª—å–Ω–æ–º –∑–∞–ø—É—Å–∫–µ, —Ç–∞–∫–∏–µ –∫–∞–∫ —Å—Ç—Ä–æ–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –≤–∞—à–µ–º—É IoT Hub. –≠—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω—ã–µ –∏ –Ω–µ –¥–æ–ª–∂–Ω—ã –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –≤ —Å–∏—Å—Ç–µ–º—É –∫–æ–Ω—Ç—Ä–æ–ª—è –≤–µ—Ä—Å–∏–π. –ü—Ä–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ –æ–±–ª–∞–∫–µ —ç—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞—é—Ç—Å—è, –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –≤–∞—à–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –≠—Ç–æ –±—É–¥–µ—Ç —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–æ –ø–æ–∑–∂–µ –≤ —ç—Ç–æ–º —É—Ä–æ–∫–µ.
    * `requirements.txt` ‚Äî —ç—Ç–æ [—Ñ–∞–π–ª —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π Pip](https://pip.pypa.io/en/stable/user_guide/#requirements-files), –∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–∞–∫–µ—Ç—ã Pip, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–ª—è —Ä–∞–±–æ—Ç—ã –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π.

1. –§–∞–π–ª `local.settings.json` —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫—É –¥–ª—è –∞–∫–∫–∞—É–Ω—Ç–∞ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —ç—Ç–æ –ø—É—Å—Ç–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞, –ø–æ—ç—Ç–æ–º—É –µ—ë –Ω—É–∂–Ω–æ –∑–∞–¥–∞—Ç—å. –ß—Ç–æ–±—ã –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –ª–æ–∫–∞–ª—å–Ω–æ–º—É —ç–º—É–ª—è—Ç–æ—Ä—É —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ Azurite, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

    ```json
    "AzureWebJobsStorage": "UseDevelopmentStorage=true",
    ```

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞–∫–µ—Ç—ã Pip, –∏—Å–ø–æ–ª—å–∑—É—è —Ñ–∞–π–ª —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π:

    ```sh
    pip install -r requirements.txt
    ```

    > üíÅ –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞–∫–µ—Ç—ã Pip –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ —ç—Ç–æ–º —Ñ–∞–π–ª–µ, —á—Ç–æ–±—ã –ø—Ä–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π –≤ –æ–±–ª–∞–∫–µ —Å—Ä–µ–¥–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–æ–≥–ª–∞ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫—É –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤.

1. –ß—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –≤—Å—ë –ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –≤—ã –º–æ–∂–µ—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å—Ä–µ–¥—É –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π. –í—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â—É—é –∫–æ–º–∞–Ω–¥—É:

    ```sh
    func start
    ```

    –í—ã —É–≤–∏–¥–∏—Ç–µ, –∫–∞–∫ —Å—Ä–µ–¥–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∏ —Å–æ–æ–±—â–∞–µ—Ç, —á—Ç–æ –Ω–µ –Ω–∞—à–ª–∞ –Ω–∏–∫–∞–∫–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π (—Ç—Ä–∏–≥–≥–µ—Ä–æ–≤).

    ```output
    (.venv) ‚ûú  soil-moisture-trigger func start
    Found Python version 3.9.1 (python3).
    
    Azure Functions Core Tools
    Core Tools Version:       3.0.3442 Commit hash: 6bfab24b2743f8421475d996402c398d2fe4a9e0  (64-bit)
    Function Runtime Version: 3.0.15417.0
    
    [2021-05-05T01:24:46.795Z] No job functions found.
    ```
> ‚ö†Ô∏è –ï—Å–ª–∏ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç –±—Ä–∞–Ω–¥–º–∞—É—ç—Ä–∞, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ –¥–æ—Å—Ç—É–ø, —Ç–∞–∫ –∫–∞–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é `func` –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏–º–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —á–∏—Ç–∞—Ç—å –∏ –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ –≤–∞—à—É —Å–µ—Ç—å.
> ‚ö†Ô∏è –ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ macOS, –≤ –≤—ã–≤–æ–¥–µ –º–æ–≥—É—Ç –ø–æ—è–≤–ª—è—Ç—å—Å—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è:
>
> ```output
    > (.venv) ‚ûú  soil-moisture-trigger func start
    > Found Python version 3.9.1 (python3).
    >
    > Azure Functions Core Tools
    > Core Tools Version:       3.0.3442 Commit hash: 6bfab24b2743f8421475d996402c398d2fe4a9e0  (64-bit)
    > Function Runtime Version: 3.0.15417.0
    >
    > [2021-06-16T08:18:28.315Z] Cannot create directory for shared memory usage: /dev/shm/AzureFunctions
    > [2021-06-16T08:18:28.316Z] System.IO.FileSystem: Access to the path '/dev/shm/AzureFunctions' is denied. Operation not permitted.
    > [2021-06-16T08:18:30.361Z] No job functions found.
    > ```
>
> –í—ã –º–æ–∂–µ—Ç–µ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏—Ö, –µ—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Functions –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏. –ö–∞–∫ —É–ø–æ–º—è–Ω—É—Ç–æ –≤ [—ç—Ç–æ–º –≤–æ–ø—Ä–æ—Å–µ –Ω–∞ Microsoft Docs Q&A](https://docs.microsoft.com/answers/questions/396617/azure-functions-core-tools-error-osx-devshmazurefu.html?WT.mc_id=academic-17441-jabenn), –∏—Ö –º–æ–∂–Ω–æ –Ω–µ —É—á–∏—Ç—ã–≤–∞—Ç—å.

1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Functions, –Ω–∞–∂–∞–≤ `ctrl+c`.

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ–∫—É—â—É—é –ø–∞–ø–∫—É –≤ VS Code, –ª–∏–±–æ –∑–∞–ø—É—Å—Ç–∏–≤ VS Code –∏ –æ—Ç–∫—Ä—ã–≤ —ç—Ç—É –ø–∞–ø–∫—É, –ª–∏–±–æ –≤—ã–ø–æ–ª–Ω–∏–≤ —Å–ª–µ–¥—É—é—â—É—é –∫–æ–º–∞–Ω–¥—É:

    ```sh
    code .
    ```

    VS Code –æ–±–Ω–∞—Ä—É–∂–∏—Ç –≤–∞—à –ø—Ä–æ–µ–∫—Ç Functions –∏ –ø–æ–∫–∞–∂–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ:

    ```output
    Detected an Azure Functions Project in folder "soil-moisture-trigger" that may have been created outside of
    VS Code. Initialize for optimal use with VS Code?
    ```

    ![–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ](../../../../../translated_images/vscode-azure-functions-init-notification.bd19b49229963edb5311fb3a79445ea469424759d2917ee2f2eb6f92d65d5086.ru.png)

    –í—ã–±–µ—Ä–∏—Ç–µ **Yes** –≤ —ç—Ç–æ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–∏.

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è —Å—Ä–µ–¥–∞ Python –∑–∞–ø—É—â–µ–Ω–∞ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ VS Code. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∑–∞–≤–µ—Ä—à–∏—Ç–µ –µ—ë –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ.

## –°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä–∞ —Å–æ–±—ã—Ç–∏–π IoT Hub

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Functions —è–≤–ª—è–µ—Ç—Å—è –æ–±–æ–ª–æ—á–∫–æ–π –¥–ª—è –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ –∫–æ–¥–∞. –ß—Ç–æ–±—ã —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Å–æ–±—ã—Ç–∏—è IoT Hub, –≤—ã –º–æ–∂–µ—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å —Ç—Ä–∏–≥–≥–µ—Ä IoT Hub –≤ —ç—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ. –≠—Ç–æ—Ç —Ç—Ä–∏–≥–≥–µ—Ä –¥–æ–ª–∂–µ–Ω –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –ø–æ—Ç–æ–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π, –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º—ã—Ö –≤ IoT Hub, –∏ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –Ω–∏—Ö. –î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —ç—Ç–æ–≥–æ –ø–æ—Ç–æ–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –≤–∞—à —Ç—Ä–∏–≥–≥–µ—Ä –¥–æ–ª–∂–µ–Ω –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ *—Å–æ–≤–º–µ—Å—Ç–∏–º–æ–º—É —Å Event Hub –∫–æ–Ω–µ—á–Ω–æ–º—É –ø—É–Ω–∫—Ç—É* IoT Hub.

IoT Hub –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ –¥—Ä—É–≥–æ–π —Å–ª—É–∂–±–µ Azure –ø–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏–µ–º Azure Event Hubs. Event Hubs ‚Äî —ç—Ç–æ —Å–ª—É–∂–±–∞, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∏ –ø–æ–ª—É—á–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è, –∞ IoT Hub —Ä–∞—Å—à–∏—Ä—è–µ—Ç –µ—ë, –¥–æ–±–∞–≤–ª—è—è —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è IoT-—É—Å—Ç—Ä–æ–π—Å—Ç–≤. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –¥–ª—è —á—Ç–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ IoT Hub –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è —Ç–∞–∫ –∂–µ, –∫–∞–∫ –µ—Å–ª–∏ –±—ã –≤—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ Event Hubs.

‚úÖ –ò–∑—É—á–∏—Ç–µ: –ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ –æ–±–∑–æ—Ä Event Hubs –≤ [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Azure Event Hubs](https://docs.microsoft.com/azure/event-hubs/event-hubs-about?WT.mc_id=academic-17441-jabenn). –ö–∞–∫ –±–∞–∑–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ Event Hubs —Å—Ä–∞–≤–Ω–∏–≤–∞—é—Ç—Å—è —Å IoT Hub?

–î–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è IoT-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –∫ IoT Hub –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á, –∫–æ—Ç–æ—Ä—ã–π –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ —Ç–æ–ª—å–∫–æ —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –º–æ–≥—É—Ç –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è. –¢–æ –∂–µ —Å–∞–º–æ–µ –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∏ –∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—é –¥–ª—è —á—Ç–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π: –≤–∞—à–µ–º—É –∫–æ–¥—É –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è —Å—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è, —Å–æ–¥–µ—Ä–∂–∞—â–∞—è —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –∏ –¥–∞–Ω–Ω—ã–µ –æ IoT Hub.

> üíÅ –°—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –∫–æ—Ç–æ—Ä—É—é –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ, –∏–º–µ–µ—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è **iothubowner**, —á—Ç–æ –¥–∞—ë—Ç –ª—é–±–æ–º—É –∫–æ–¥—É, –∏—Å–ø–æ–ª—å–∑—É—é—â–µ–º—É –µ—ë, –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ IoT Hub. –í –∏–¥–µ–∞–ª–µ —Å–ª–µ–¥—É–µ—Ç –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è —Å –º–∏–Ω–∏–º–∞–ª—å–Ω–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º —É—Ä–æ–≤–Ω–µ–º —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π. –≠—Ç–æ –±—É–¥–µ—Ç —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–æ –≤ —Å–ª–µ–¥—É—é—â–µ–º —É—Ä–æ–∫–µ.

–ü–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Ç—Ä–∏–≥–≥–µ—Ä–∞ –∫–æ–¥ –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –±—É–¥–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å—Å—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è, –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–≥–æ –≤ IoT Hub, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ç–æ–≥–æ, –∫–∞–∫–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –µ–≥–æ –æ—Ç–ø—Ä–∞–≤–∏–ª–æ. –°–æ–æ–±—â–µ–Ω–∏–µ –±—É–¥–µ—Ç –ø–µ—Ä–µ–¥–∞–Ω–æ –≤ —Ñ—É–Ω–∫—Ü–∏—é –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞.

### –ó–∞–¥–∞—á–∞ ‚Äî –ø–æ–ª—É—á–∏—Ç—å —Å—Ç—Ä–æ–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ–≥–æ —Å Event Hub –∫–æ–Ω–µ—á–Ω–æ–≥–æ –ø—É–Ω–∫—Ç–∞

1. –í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ VS Code –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â—É—é –∫–æ–º–∞–Ω–¥—É, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Å—Ç—Ä–æ–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ–≥–æ —Å Event Hub –∫–æ–Ω–µ—á–Ω–æ–≥–æ –ø—É–Ω–∫—Ç–∞ IoT Hub:

    ```sh
    az iot hub connection-string show --default-eventhub \
                                      --output table \
                                      --hub-name <hub_name>
    ```

    –ó–∞–º–µ–Ω–∏—Ç–µ `<hub_name>` –Ω–∞ –∏–º—è, –∫–æ—Ç–æ—Ä–æ–µ –≤—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –¥–ª—è –≤–∞—à–µ–≥–æ IoT Hub.

1. –í VS Code –æ—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `local.settings.json`. –î–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ —Å–µ–∫—Ü–∏—é `Values`:

    ```json
    "IOT_HUB_CONNECTION_STRING": "<connection string>"
    ```

    –ó–∞–º–µ–Ω–∏—Ç–µ `<connection string>` –Ω–∞ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —à–∞–≥–∞. –í–∞–º –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å –∑–∞–ø—è—Ç—É—é –ø–æ—Å–ª–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–π —Å—Ç—Ä–æ–∫–∏, —á—Ç–æ–±—ã —ç—Ç–æ –±—ã–ª –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π JSON.

### –ó–∞–¥–∞—á–∞ ‚Äî —Å–æ–∑–¥–∞—Ç—å —Ç—Ä–∏–≥–≥–µ—Ä —Å–æ–±—ã—Ç–∏–π

–¢–µ–ø–µ—Ä—å –≤—ã –≥–æ—Ç–æ–≤—ã —Å–æ–∑–¥–∞—Ç—å —Ç—Ä–∏–≥–≥–µ—Ä —Å–æ–±—ã—Ç–∏–π.

1. –í —Ç–µ—Ä–º–∏–Ω–∞–ª–µ VS Code –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â—É—é –∫–æ–º–∞–Ω–¥—É –∏–∑ –ø–∞–ø–∫–∏ `soil-moisture-trigger`:

    ```sh
    func new --name iot-hub-trigger --template "Azure Event Hub trigger"
    ```

    –≠—Ç–æ —Å–æ–∑–¥–∞—Å—Ç –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é —Å –∏–º–µ–Ω–µ–º `iot-hub-trigger`. –¢—Ä–∏–≥–≥–µ—Ä –ø–æ–¥–∫–ª—é—á–∏—Ç—Å—è –∫ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ–º—É —Å Event Hub –∫–æ–Ω–µ—á–Ω–æ–º—É –ø—É–Ω–∫—Ç—É IoT Hub, —Ç–∞–∫ –∫–∞–∫ —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–æ–≥–æ —Ç—Ä–∏–≥–≥–µ—Ä–∞ –¥–ª—è IoT Hub –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç.

–≠—Ç–æ —Å–æ–∑–¥–∞—Å—Ç –ø–∞–ø–∫—É –≤–Ω—É—Ç—Ä–∏ –ø–∞–ø–∫–∏ `soil-moisture-trigger` —Å –∏–º–µ–Ω–µ–º `iot-hub-trigger`, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é. –í —ç—Ç–æ–π –ø–∞–ø–∫–µ –±—É–¥—É—Ç —Å–ª–µ–¥—É—é—â–∏–µ —Ñ–∞–π–ª—ã:

* `__init__.py` ‚Äî —ç—Ç–æ —Ñ–∞–π–ª –∫–æ–¥–∞ Python, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π —Ç—Ä–∏–≥–≥–µ—Ä, —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ —Å–æ–≥–ª–∞—à–µ–Ω–∏—è –æ–± –∏–º–µ–Ω–∞—Ö —Ñ–∞–π–ª–æ–≤ Python, —á—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å —ç—Ç—É –ø–∞–ø–∫—É –º–æ–¥—É–ª–µ–º Python.

    –≠—Ç–æ—Ç —Ñ–∞–π–ª –±—É–¥–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–π –∫–æ–¥:

    ```python
    import logging

    import azure.functions as func


    def main(event: func.EventHubEvent):
        logging.info('Python EventHub trigger processed an event: %s',
                    event.get_body().decode('utf-8'))
    ```

    –û—Å–Ω–æ–≤–æ–π —Ç—Ä–∏–≥–≥–µ—Ä–∞ —è–≤–ª—è–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è `main`. –ò–º–µ–Ω–Ω–æ —ç—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π –∏–∑ IoT Hub. –£ —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –µ—Å—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä `event`, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç –æ–±—ä–µ–∫—Ç `EventHubEvent`. –ö–∞–∂–¥—ã–π —Ä–∞–∑, –∫–æ–≥–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ IoT Hub, —ç—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Å –ø–µ—Ä–µ–¥–∞—á–µ–π —ç—Ç–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –∫–∞—á–µ—Å—Ç–≤–µ `event`, –∞ —Ç–∞–∫–∂–µ —Å–≤–æ–π—Å—Ç–≤, –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã—Ö –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è–º, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –≤–∏–¥–µ–ª–∏ –≤ –ø—Ä–æ—à–ª–æ–º —É—Ä–æ–∫–µ.

    –û—Å–Ω–æ–≤–Ω–∞—è —á–∞—Å—Ç—å —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ –≤ –∂—É—Ä–Ω–∞–ª.

* `function.json` ‚Äî —ç—Ç–æ—Ç —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –¥–ª—è —Ç—Ä–∏–≥–≥–µ—Ä–∞. –û—Å–Ω–æ–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å–µ–∫—Ü–∏–∏ `bindings`. Binding ‚Äî —ç—Ç–æ —Ç–µ—Ä–º–∏–Ω –¥–ª—è –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –º–µ–∂–¥—É Azure Functions –∏ –¥—Ä—É–≥–∏–º–∏ —Å–ª—É–∂–±–∞–º–∏ Azure. –£ —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –µ—Å—Ç—å –≤—Ö–æ–¥–Ω–æ–π binding –¥–ª—è Event Hub ‚Äî –æ–Ω–∞ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ Event Hub –∏ –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ.

    > üíÅ –í—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—ã—Ö–æ–¥–Ω—ã–µ bindings, —á—Ç–æ–±—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–±–æ—Ç—ã —Ñ—É–Ω–∫—Ü–∏–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–ª—Å—è –≤ –¥—Ä—É–≥—É—é —Å–ª—É–∂–±—É. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤—ã –º–æ–∂–µ—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å –≤—ã—Ö–æ–¥–Ω–æ–π binding –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, –∏ —Å–æ–±—ã—Ç–∏–µ IoT Hub –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏ –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—Å—Ç–∞–≤–ª–µ–Ω–æ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö.

    ‚úÖ –ò–∑—É—á–∏—Ç–µ: –ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ –æ bindings –≤ [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Azure Functions –æ —Ç—Ä–∏–≥–≥–µ—Ä–∞—Ö –∏ bindings](https://docs.microsoft.com/azure/azure-functions/functions-triggers-bindings?WT.mc_id=academic-17441-jabenn&tabs=python).

    –°–µ–∫—Ü–∏—è `bindings` –≤–∫–ª—é—á–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –¥–ª—è binding. –ò–Ω—Ç–µ—Ä–µ—Å—É—é—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è:

  * `"type": "eventHubTrigger"` ‚Äî —É–∫–∞–∑—ã–≤–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏–∏, —á—Ç–æ –æ–Ω–∞ –¥–æ–ª–∂–Ω–∞ —Å–ª—É—à–∞—Ç—å —Å–æ–±—ã—Ç–∏—è –∏–∑ Event Hub
  * `"name": "events"` ‚Äî –∏–º—è –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –¥–ª—è —Å–æ–±—ã—Ç–∏–π Event Hub. –≠—Ç–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∏–º–µ–Ω–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `main` –≤ –∫–æ–¥–µ Python.
  * `"direction": "in"` ‚Äî —ç—Ç–æ –≤—Ö–æ–¥–Ω–æ–π binding, –¥–∞–Ω–Ω—ã–µ –∏–∑ Event Hub –ø–æ—Å—Ç—É–ø–∞—é—Ç –≤ —Ñ—É–Ω–∫—Ü–∏—é
  * `"connection": ""` ‚Äî –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∏–º—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —á—Ç–µ–Ω–∏—è —Å—Ç—Ä–æ–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è. –ü—Ä–∏ –ª–æ–∫–∞–ª—å–Ω–æ–º –∑–∞–ø—É—Å–∫–µ —ç—Ç–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –±—É–¥–µ—Ç –ø—Ä–æ—á–∏—Ç–∞–Ω–∞ –∏–∑ —Ñ–∞–π–ª–∞ `local.settings.json`.

    > üíÅ –°—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –Ω–µ –º–æ–∂–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –≤ —Ñ–∞–π–ª–µ `function.json`, –æ–Ω–∞ –¥–æ–ª–∂–Ω–∞ —Å—á–∏—Ç—ã–≤–∞—Ç—å—Å—è –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫. –≠—Ç–æ —Å–¥–µ–ª–∞–Ω–æ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —Å–ª—É—á–∞–π–Ω–æ–≥–æ —Ä–∞—Å–∫—Ä—ã—Ç–∏—è —Å—Ç—Ä–æ–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è.

1. –ò–∑-–∑–∞ [–æ—à–∏–±–∫–∏ –≤ —à–∞–±–ª–æ–Ω–µ Azure Functions](https://github.com/Azure/azure-functions-templates/issues/1250) –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—è `cardinality` –≤ `function.json` –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ. –û–±–Ω–æ–≤–∏—Ç–µ —ç—Ç–æ –ø–æ–ª–µ —Å `many` –Ω–∞ `one`:

    ```json
    "cardinality": "one",
    ```

1. –û–±–Ω–æ–≤–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ `"connection"` –≤ —Ñ–∞–π–ª–µ `function.json`, —á—Ç–æ–±—ã –æ–Ω–æ —É–∫–∞–∑—ã–≤–∞–ª–æ –Ω–∞ –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –¥–æ–±–∞–≤–ª–µ–Ω–Ω–æ–µ –≤ —Ñ–∞–π–ª `local.settings.json`:

    ```json
    "connection": "IOT_HUB_CONNECTION_STRING",
    ```

    > üíÅ –ü–æ–º–Ω–∏—Ç–µ ‚Äî —ç—Ç–æ –¥–æ–ª–∂–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫—É, –∞ –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ñ–∞–∫—Ç–∏—á–µ—Å–∫—É—é —Å—Ç—Ä–æ–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è.

1. –°—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Å–æ–¥–µ—Ä–∂–∏—Ç –∑–Ω–∞—á–µ–Ω–∏–µ `eventHubName`, –ø–æ—ç—Ç–æ–º—É –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è —ç—Ç–æ–≥–æ –ø–æ–ª—è –≤ —Ñ–∞–π–ª–µ `function.json` –Ω—É–∂–Ω–æ –æ—á–∏—Å—Ç–∏—Ç—å. –û–±–Ω–æ–≤–∏—Ç–µ —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞ –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É:

    ```json
    "eventHubName": "",
    ```

### –ó–∞–¥–∞—á–∞ ‚Äî –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç—Ä–∏–≥–≥–µ—Ä —Å–æ–±—ã—Ç–∏–π

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –º–æ–Ω–∏—Ç–æ—Ä —Å–æ–±—ã—Ç–∏–π IoT Hub –Ω–µ –∑–∞–ø—É—â–µ–Ω. –ï—Å–ª–∏ –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º Functions, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Functions –Ω–µ —Å–º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏—è.

    > üíÅ –ù–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –º–æ–≥—É—Ç –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ –∫–æ–Ω–µ—á–Ω—ã–º –ø—É–Ω–∫—Ç–∞–º IoT Hub, –∏—Å–ø–æ–ª—å–∑—É—è —Ä–∞–∑–Ω—ã–µ *–≥—Ä—É–ø–ø—ã –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π*. –≠—Ç–æ –±—É–¥–µ—Ç —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–æ –≤ —Å–ª–µ–¥—É—é—â–µ–º —É—Ä–æ–∫–µ.

1. –ß—Ç–æ–±—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Functions, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â—É—é –∫–æ–º–∞–Ω–¥—É –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ VS Code:

    ```sh
    func start
    ```

    –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Functions –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –∏ –æ–±–Ω–∞—Ä—É–∂–∏—Ç —Ñ—É–Ω–∫—Ü–∏—é `iot-hub-trigger`. –û–Ω–æ –Ω–∞—á–Ω—ë—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –≤—Å–µ —Å–æ–±—ã—Ç–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –≤ IoT Hub –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–Ω—å.

    ```output
    (.venv) ‚ûú  soil-moisture-trigger func start
    Found Python version 3.9.1 (python3).
    
    Azure Functions Core Tools
    Core Tools Version:       3.0.3442 Commit hash: 6bfab24b2743f8421475d996402c398d2fe4a9e0  (64-bit)
    Function Runtime Version: 3.0.15417.0
    
    Functions:
    
            iot-hub-trigger: eventHubTrigger
    
    For detailed output, run func with --verbose flag.
    [2021-05-05T02:44:07.517Z] Worker process started and initialized.
    [2021-05-05T02:44:09.202Z] Executing 'Functions.iot-hub-trigger' (Reason='(null)', Id=802803a5-eae9-4401-a1f4-176631456ce4)
    [2021-05-05T02:44:09.205Z] Trigger Details: PartitionId: 0, Offset: 1011240-1011632, EnqueueTimeUtc: 2021-05-04T19:04:04.2030000Z-2021-05-04T19:04:04.3900000Z, SequenceNumber: 2546-2547, Count: 2
    [2021-05-05T02:44:09.352Z] Python EventHub trigger processed an event: {"soil_moisture":628}
    [2021-05-05T02:44:09.354Z] Python EventHub trigger processed an event: {"soil_moisture":624}
    [2021-05-05T02:44:09.395Z] Executed 'Functions.iot-hub-trigger' (Succeeded, Id=802803a5-eae9-4401-a1f4-176631456ce4, Duration=245ms)
    ```

    –ö–∞–∂–¥—ã–π –≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ –±—É–¥–µ—Ç –æ–∫—Ä—É–∂—ë–Ω –±–ª–æ–∫–∞–º–∏ `Executing 'Functions.iot-hub-trigger'`/`Executed 'Functions.iot-hub-trigger'` –≤ –≤—ã–≤–æ–¥–µ, —á—Ç–æ–±—ã –≤—ã –º–æ–≥–ª–∏ –≤–∏–¥–µ—Ç—å, —Å–∫–æ–ª—å–∫–æ —Å–æ–æ–±—â–µ–Ω–∏–π –±—ã–ª–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ –≤ –∫–∞–∂–¥–æ–º –≤—ã–∑–æ–≤–µ —Ñ—É–Ω–∫—Ü–∏–∏.

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∞—à–µ IoT-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ —Ä–∞–±–æ—Ç–∞–µ—Ç. –í—ã —É–≤–∏–¥–∏—Ç–µ –Ω–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ –≤–ª–∞–∂–Ω–æ—Å—Ç–∏ –ø–æ—á–≤—ã, –ø–æ—è–≤–ª—è—é—â–∏–µ—Å—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ Functions.

1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Functions. –í—ã —É–≤–∏–¥–∏—Ç–µ, —á—Ç–æ –æ–Ω–æ –±–æ–ª—å—à–µ –Ω–µ –±—É–¥–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è, –∞ —Ç–æ–ª—å–∫–æ –Ω–æ–≤—ã–µ.

> üíÅ VS Code —Ç–∞–∫–∂–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ—Ç–ª–∞–¥–∫—É –≤–∞—à–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π. –í—ã –º–æ–∂–µ—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–æ—á–∫–∏ –æ—Å—Ç–∞–Ω–æ–≤–∞, —â—ë–ª–∫–Ω—É–≤ –Ω–∞ –≥—Ä–∞–Ω–∏—Ü–µ —Ä—è–¥–æ–º —Å –Ω–∞—á–∞–ª–æ–º —Å—Ç—Ä–æ–∫–∏ –∫–æ–¥–∞, –∏–ª–∏ –ø–æ—Å—Ç–∞–≤–∏–≤ –∫—É—Ä—Å–æ—Ä –Ω–∞ —Å—Ç—Ä–æ–∫—É –∫–æ–¥–∞ –∏ –≤—ã–±—Ä–∞–≤ *Run -> Toggle breakpoint*, –∏–ª–∏ –Ω–∞–∂–∞–≤ `F9`. –í—ã –º–æ–∂–µ—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å –æ—Ç–ª–∞–¥—á–∏–∫, –≤—ã–±—Ä–∞–≤ *Run -> Start debugging*, –Ω–∞–∂–∞–≤ `F5`, –∏–ª–∏ –≤—ã–±—Ä–∞–≤ –ø–∞–Ω–µ–ª—å *Run and debug* –∏ –Ω–∞–∂–∞–≤ –∫–Ω–æ–ø–∫—É **Start debugging**. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –≤—ã —Å–º–æ–∂–µ—Ç–µ —É–≤–∏–¥–µ—Ç—å –¥–µ—Ç–∞–ª–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º—ã—Ö —Å–æ–±—ã—Ç–∏–π.

#### –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

* –ï—Å–ª–∏ –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ —Å–ª–µ–¥—É—é—â—É—é –æ—à–∏–±–∫—É:

    ```output
    The listener for function 'Functions.iot-hub-trigger' was unable to start. Microsoft.WindowsAzure.Storage: Connection refused. System.Net.Http: Connection refused. System.Private.CoreLib: Connection refused.
    ```

    –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –∑–∞–ø—É—â–µ–Ω –ª–∏ Azurite, –∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ `AzureWebJobsStorage` –≤ —Ñ–∞–π–ª–µ `local.settings.json` –Ω–∞ `UseDevelopmentStorage=true`.

* –ï—Å–ª–∏ –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ —Å–ª–µ–¥—É—é—â—É—é –æ—à–∏–±–∫—É:

    ```output
    System.Private.CoreLib: Exception while executing function: Functions.iot-hub-trigger. System.Private.CoreLib: Result: Failure Exception: AttributeError: 'list' object has no attribute 'get_body'
    ```

    –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—ã —É—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ `cardinality` –≤ —Ñ–∞–π–ª–µ `function.json` –Ω–∞ `one`.

* –ï—Å–ª–∏ –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ —Å–ª–µ–¥—É—é—â—É—é –æ—à–∏–±–∫—É:

    ```output
    Azure.Messaging.EventHubs: The path to an Event Hub may be specified as part of the connection string or as a separate value, but not both.  Please verify that your connection string does not have the `EntityPath` token if you are passing an explicit Event Hub name. (Parameter 'connectionString').
    ```

    –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—ã —É—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ `eventHubName` –≤ —Ñ–∞–π–ª–µ `function.json` –Ω–∞ –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É.

## –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –º–µ—Ç–æ–¥–æ–≤ –Ω–∞–ø—Ä—è–º—É—é –∏–∑ —Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ –∫–æ–¥–∞

–î–æ —Å–∏—Ö –ø–æ—Ä –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Functions —Å–ª—É—à–∞–ª–æ —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ IoT Hub, –∏—Å–ø–æ–ª—å–∑—É—è —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π —Å Event Hub –∫–æ–Ω–µ—á–Ω—ã–π –ø—É–Ω–∫—Ç. –¢–µ–ø–µ—Ä—å –≤–∞–º –Ω—É–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∫–æ–º–∞–Ω–¥—ã –Ω–∞ IoT-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ. –≠—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –¥—Ä—É–≥–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ IoT Hub —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º *Registry Manager*. Registry Manager ‚Äî —ç—Ç–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∏–¥–µ—Ç—å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –≤ IoT Hub –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å –Ω–∏–º–∏, –æ—Ç–ø—Ä–∞–≤–ª—è—è —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ –æ–±–ª–∞–∫–∞ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ, –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –º–µ—Ç–æ–¥–æ–≤ –Ω–∞–ø—Ä—è–º—É—é –∏–ª–∏ –æ–±–Ω–æ–≤–ª—è—è –¥–≤–æ–π–Ω–∏–∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞. –í—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏, –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–ª–∏ —É–¥–∞–ª–µ–Ω–∏—è IoT-—É—Å—Ç—Ä–æ–π—Å—Ç–≤ –∏–∑ IoT Hub.

–î–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Registry Manager –≤–∞–º –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è —Å—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è.

### –ó–∞–¥–∞—á–∞ ‚Äî –ø–æ–ª—É—á–∏—Ç—å —Å—Ç—Ä–æ–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è Registry Manager

1. –ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Å—Ç—Ä–æ–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â—É—é –∫–æ–º–∞–Ω–¥—É:

    ```sh
    az iot hub connection-string show --policy-name service \
                                      --output table \
                                      --hub-name <hub_name>
    ```

    –ó–∞–º–µ–Ω–∏—Ç–µ `<hub_name>` –Ω–∞ –∏–º—è, –∫–æ—Ç–æ—Ä–æ–µ –≤—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –¥–ª—è –≤–∞—à–µ–≥–æ IoT Hub.

    –°—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç—Å—è –¥–ª—è –ø–æ–ª–∏—Ç–∏–∫–∏ *ServiceConnect* —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `--policy-name service`. –ü—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ —Å—Ç—Ä–æ–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤—ã –º–æ–∂–µ—Ç–µ —É–∫–∞–∑–∞—Ç—å, –∫–∞–∫–∏–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –æ–Ω–∞ –±—É–¥–µ—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å. –ü–æ–ª–∏—Ç–∏–∫–∞ ServiceConnect –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∞—à–µ–º—É –∫–æ–¥—É –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞ IoT-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞.

    ‚úÖ –ò–∑—É—á–∏—Ç–µ: –ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ –æ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø–æ–ª–∏—Ç–∏–∫–∞—Ö –≤ [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è—Ö IoT Hub](https://docs.microsoft.com/azure/iot-hub/iot-hub-devguide-security#iot-hub-permissions?WT.mc_id=academic-17441-jabenn)

1. –í VS Code –æ—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `local.settings.json`. –î–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ —Å–µ–∫—Ü–∏—é `Values`:

    ```json
    "REGISTRY_MANAGER_CONNECTION_STRING": "<connection string>"
    ```

    –ó–∞–º–µ–Ω–∏—Ç–µ `<connection string>` –Ω–∞ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —à–∞–≥–∞. –í–∞–º –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å –∑–∞–ø—è—Ç—É—é –ø–æ—Å–ª–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–π —Å—Ç—Ä–æ–∫–∏, —á—Ç–æ–±—ã —ç—Ç–æ –±—ã–ª –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π JSON.

### –ó–∞–¥–∞—á–∞ ‚Äî –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –º–µ—Ç–æ–¥–∞ –Ω–∞–ø—Ä—è–º—É—é –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ

1. SDK –¥–ª—è Registry Manager –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ –ø–∞–∫–µ—Ç Pip. –î–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä–æ–∫—É –≤ —Ñ–∞–π–ª `requirements.txt`, —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç —ç—Ç–æ–≥–æ –ø–∞–∫–µ—Ç–∞:

    ```sh
    azure-iot-hub
    ```

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ VS Code –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è —Å—Ä–µ–¥–∞, –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â—É—é –∫–æ–º–∞–Ω–¥—É –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø–∞–∫–µ—Ç–æ–≤ Pip:

    ```sh
    pip install -r requirements.txt
    ```

1. –î–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –∏–º–ø–æ—Ä—Ç—ã –≤ —Ñ–∞–π–ª `__init__.py`:

    ```python
    import json
    import os
    from azure.iot.hub import IoTHubRegistryManager
    from azure.iot.hub.models import CloudToDeviceMethod
    ```

    –≠—Ç–æ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç —Å–∏—Å—Ç–µ–º–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏, –∞ —Ç–∞–∫–∂–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å Registry Manager –∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –º–µ—Ç–æ–¥–æ–≤ –Ω–∞–ø—Ä—è–º—É—é.

1. –£–¥–∞–ª–∏—Ç–µ –∫–æ–¥ –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏ `main`, –Ω–æ –æ—Å—Ç–∞–≤—å—Ç–µ —Å–∞–º—É —Ñ—É–Ω–∫—Ü–∏—é.

1. –í —Ñ—É–Ω–∫—Ü–∏–∏ `main` –¥–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–π –∫–æ–¥:

    ```python
    body = json.loads(event.get_body().decode('utf-8'))
    device_id = event.iothub_metadata['connection-device-id']

    logging.info(f'Received message: {body} from {device_id}')
    ```

    –≠—Ç–æ—Ç –∫–æ–¥ –∏–∑–≤–ª–µ–∫–∞–µ—Ç —Ç–µ–ª–æ —Å–æ–±—ã—Ç–∏—è, –∫–æ—Ç–æ—Ä–æ–µ —Å–æ–¥–µ—Ä–∂–∏—Ç JSON-—Å–æ–æ–±—â–µ–Ω–∏–µ, –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–µ IoT-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ–º.

    –ó–∞—Ç–µ–º –æ–Ω –ø–æ–ª—É—á–∞–µ—Ç –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –∏–∑ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–π, –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã—Ö —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º. –¢–µ–ª–æ —Å–æ–±—ã—Ç–∏—è —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ, –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–µ –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏, –∞ —Å–ª–æ–≤–∞—Ä—å `iothub_metadata` —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–≤–æ–π—Å—Ç–≤–∞, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ IoT Hub, —Ç–∞–∫–∏–µ –∫–∞–∫ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞-–æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è –∏ –≤—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è.

    –≠—Ç–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ –∂—É—Ä–Ω–∞–ª. –í—ã —É–≤–∏–¥–∏—Ç–µ —ç—Ç–∏ –∑–∞–ø–∏—Å–∏ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –ø—Ä–∏ –ª–æ–∫–∞–ª—å–Ω–æ–º –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Functions.

1. –ù–∏–∂–µ –¥–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–π –∫–æ–¥:

    ```python
    soil_moisture = body['soil_moisture']

    if soil_moisture > 450:
        direct_method = CloudToDeviceMethod(method_name='relay_on', payload='{}')
    else:
        direct_method = CloudToDeviceMethod(method_name='relay_off', payload='{}')
    ```

    –≠—Ç–æ—Ç –∫–æ–¥ –ø–æ–ª—É—á–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –≤–ª–∞–∂–Ω–æ—Å—Ç–∏ –ø–æ—á–≤—ã –∏–∑ —Å–æ–æ–±—â–µ–Ω–∏—è. –ó–∞—Ç–µ–º –æ–Ω –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–ª–∞–∂–Ω–æ—Å—Ç—å –ø–æ—á–≤—ã –∏, –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∑–Ω–∞—á–µ–Ω–∏—è, —Å–æ–∑–¥–∞—ë—Ç –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π –∫–ª–∞—Å—Å –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –º–µ—Ç–æ–¥–∞ –Ω–∞–ø—Ä—è–º—É—é `relay_on` –∏–ª–∏ `relay_off`. –ó–∞–ø—Ä–æ—Å –º–µ—Ç–æ–¥–∞ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –ø–æ–ª–µ–∑–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏, –ø–æ—ç—Ç–æ–º—É –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø—É—Å—Ç–æ–π JSON-–¥–æ–∫—É–º–µ–Ω—Ç.

1. –ù–∏–∂–µ –¥–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–π –∫–æ–¥:

    ```python
    logging.info(f'Sending direct method request for {direct_method.method_name} for device {device_id}')

    registry_manager_connection_string = os.environ['REGISTRY_MANAGER_CONNECTION_STRING']
    registry_manager = IoTHubRegistryManager(registry_manager_connection_string)
    ```
–≠—Ç–æ—Ç –∫–æ–¥ –∑–∞–≥—Ä—É–∂–∞–µ—Ç `REGISTRY_MANAGER_CONNECTION_STRING` –∏–∑ —Ñ–∞–π–ª–∞ `local.settings.json`. –ó–Ω–∞—á–µ–Ω–∏—è –∏–∑ —ç—Ç–æ–≥–æ —Ñ–∞–π–ª–∞ –¥–æ—Å—Ç—É–ø–Ω—ã –∫–∞–∫ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è, –∏ –∏—Ö –º–æ–∂–Ω–æ —Å—á–∏—Ç–∞—Ç—å —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ `os.environ`, –∫–æ—Ç–æ—Ä–∞—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ª–æ–≤–∞—Ä—å –≤—Å–µ—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è.

> üíÅ –ö–æ–≥–¥–∞ —ç—Ç–æ—Ç –∫–æ–¥ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –≤ –æ–±–ª–∞–∫–µ, –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ —Ñ–∞–π–ª–∞ `local.settings.json` —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –∫–∞–∫ *Application Settings* (–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è), –∏ –∏—Ö –º–æ–∂–Ω–æ —Å—á–∏—Ç–∞—Ç—å –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è.

–ó–∞—Ç–µ–º –∫–æ–¥ —Å–æ–∑–¥–∞–µ—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞ Registry Manager, –∏—Å–ø–æ–ª—å–∑—É—è —Å—Ç—Ä–æ–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è.

1. –î–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–π –∫–æ–¥ –Ω–∏–∂–µ:

    ```python
    registry_manager.invoke_device_method(device_id, direct_method)

    logging.info('Direct method request sent!')
    ```

    –≠—Ç–æ—Ç –∫–æ–¥ —É–∫–∞–∑—ã–≤–∞–µ—Ç –º–µ–Ω–µ–¥–∂–µ—Ä—É —Ä–µ–µ—Å—Ç—Ä–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –º–µ—Ç–æ–¥–∞ –Ω–∞–ø—Ä—è–º—É—é —É—Å—Ç—Ä–æ–π—Å—Ç–≤—É, –∫–æ—Ç–æ—Ä–æ–µ –æ—Ç–ø—Ä–∞–≤–∏–ª–æ —Ç–µ–ª–µ–º–µ—Ç—Ä–∏—é.

    > üíÅ –í –≤–µ—Ä—Å–∏—è—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã —Å–æ–∑–¥–∞–≤–∞–ª–∏ –≤ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —É—Ä–æ–∫–∞—Ö —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º MQTT, –∫–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ–ª–µ –æ—Ç–ø—Ä–∞–≤–ª—è–ª–∏—Å—å –≤—Å–µ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º. –ö–æ–¥ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–ª, —á—Ç–æ —É –≤–∞—Å –±—É–¥–µ—Ç —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ. –≠—Ç–∞ –≤–µ—Ä—Å–∏—è –∫–æ–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –º–µ—Ç–æ–¥–∞ —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ–º—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤—É, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –Ω–∞–±–æ—Ä–∞–º–∏ –¥–∞—Ç—á–∏–∫–æ–≤ –≤–ª–∞–∂–Ω–æ—Å—Ç–∏ –∏ —Ä–µ–ª–µ, –æ—Ç–ø—Ä–∞–≤–ª—è—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤—É.

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Functions –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∞—à–µ IoT-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ. –í—ã —É–≤–∏–¥–∏—Ç–µ, –∫–∞–∫ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è, –∞ –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –º–µ—Ç–æ–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è. –ü–µ—Ä–µ–º–µ—â–∞–π—Ç–µ –¥–∞—Ç—á–∏–∫ –≤–ª–∞–∂–Ω–æ—Å—Ç–∏ –ø–æ—á–≤—ã –≤–Ω—É—Ç—Ä—å –∏ –Ω–∞—Ä—É–∂—É –ø–æ—á–≤—ã, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏–π –∏ –≤–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–ª–µ.

> üíÅ –í—ã –º–æ–∂–µ—Ç–µ –Ω–∞–π—Ç–∏ —ç—Ç–æ—Ç –∫–æ–¥ –≤ –ø–∞–ø–∫–µ [code/functions](../../../../../2-farm/lessons/5-migrate-application-to-the-cloud/code/functions).

## –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–ª–µ—Å—Å-–∫–æ–¥–∞ –≤ –æ–±–ª–∞–∫–µ

–í–∞—à –∫–æ–¥ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ, –ø–æ—ç—Ç–æ–º—É —Å–ª–µ–¥—É—é—â–∏–º —à–∞–≥–æ–º –±—É–¥–µ—Ç —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Functions –≤ –æ–±–ª–∞–∫–µ.

### –ó–∞–¥–∞—á–∞ - —Å–æ–∑–¥–∞–Ω–∏–µ –æ–±–ª–∞—á–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤

–í–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Functions –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–æ –≤ —Ä–µ—Å—É—Ä—Å–µ Functions App –≤ Azure, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ –≥—Ä—É–ø–ø—ã —Ä–µ—Å—É—Ä—Å–æ–≤, —Å–æ–∑–¥–∞–Ω–Ω–æ–π –¥–ª—è –≤–∞—à–µ–≥–æ IoT Hub. –í–∞–º —Ç–∞–∫–∂–µ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è —É—á–µ—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å —Ö—Ä–∞–Ω–∏–ª–∏—â–∞, —Å–æ–∑–¥–∞–Ω–Ω–∞—è –≤ Azure, —á—Ç–æ–±—ã –∑–∞–º–µ–Ω–∏—Ç—å —ç–º—É–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ, —Ä–∞–±–æ—Ç–∞—é—â–µ–µ –ª–æ–∫–∞–ª—å–Ω–æ.

1. –í—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â—É—é –∫–æ–º–∞–Ω–¥—É –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞:

    ```sh
    az storage account create --resource-group soil-moisture-sensor \
                              --sku Standard_LRS \
                              --name <storage_name> 
    ```

    –ó–∞–º–µ–Ω–∏—Ç–µ `<storage_name>` –Ω–∞ –∏–º—è –¥–ª—è –≤–∞—à–µ–π —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞. –≠—Ç–æ –∏–º—è –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º –≤ –≥–ª–æ–±–∞–ª—å–Ω–æ–º –º–∞—Å—à—Ç–∞–±–µ, —Ç–∞–∫ –∫–∞–∫ –æ–Ω–æ —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é URL-–∞–¥—Ä–µ—Å–∞, –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞. –í—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å—Ç—Ä–æ—á–Ω—ã–µ –±—É–∫–≤—ã –∏ —Ü–∏—Ñ—Ä—ã, –±–µ–∑ –¥—Ä—É–≥–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤, –∏ –¥–ª–∏–Ω–∞ –∏–º–µ–Ω–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∞ 24 —Å–∏–º–≤–æ–ª–∞–º–∏. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ `sms` –∏ –¥–æ–±–∞–≤—å—Ç–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä, –Ω–∞–ø—Ä–∏–º–µ—Ä —Å–ª—É—á–∞–π–Ω—ã–µ —Å–ª–æ–≤–∞ –∏–ª–∏ –≤–∞—à–µ –∏–º—è.

    –ü–∞—Ä–∞–º–µ—Ç—Ä `--sku Standard_LRS` –≤—ã–±–∏—Ä–∞–µ—Ç —É—Ä–æ–≤–µ–Ω—å —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—è —Å–∞–º—ã–π –¥–µ—à–µ–≤—ã–π –æ–±—â–∏–π –∞–∫–∫–∞—É–Ω—Ç. –ë–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –Ω–µ—Ç, –∏ –≤—ã –ø–ª–∞—Ç–∏—Ç–µ –∑–∞ —Ç–æ, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ. –ó–∞—Ç—Ä–∞—Ç—ã –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –Ω–∏–∑–∫–∏–µ, —Å —Å–∞–º–æ–π –¥–æ—Ä–æ–≥–æ–π –ø–∞–º—è—Ç—å—é –º–µ–Ω–µ–µ 0,05 –¥–æ–ª–ª–∞—Ä–∞ –°–®–ê –≤ –º–µ—Å—è—Ü –∑–∞ –≥–∏–≥–∞–±–∞–π—Ç.

    ‚úÖ –û–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å —Ü–µ–Ω–∞–º–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ [—Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ Azure](https://azure.microsoft.com/pricing/details/storage/?WT.mc_id=academic-17441-jabenn).

1. –í—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â—É—é –∫–æ–º–∞–Ω–¥—É –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Functions:

    ```sh
    az functionapp create --resource-group soil-moisture-sensor \
                          --runtime python \
                          --functions-version 3 \
                          --os-type Linux \
                          --consumption-plan-location <location> \
                          --storage-account <storage_name> \
                          --name <functions_app_name>
    ```

    –ó–∞–º–µ–Ω–∏—Ç–µ `<location>` –Ω–∞ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –≤—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –≥—Ä—É–ø–ø—ã —Ä–µ—Å—É—Ä—Å–æ–≤ –≤ –ø—Ä–µ–¥—ã–¥—É—â–µ–º —É—Ä–æ–∫–µ.

    –ó–∞–º–µ–Ω–∏—Ç–µ `<storage_name>` –Ω–∞ –∏–º—è —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞, —Å–æ–∑–¥–∞–Ω–Ω–æ–π –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–µ–º —à–∞–≥–µ.

    –ó–∞–º–µ–Ω–∏—Ç–µ `<functions_app_name>` –Ω–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∏–º—è –¥–ª—è –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Functions. –≠—Ç–æ –∏–º—è –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º –≤ –≥–ª–æ–±–∞–ª—å–Ω–æ–º –º–∞—Å—à—Ç–∞–±–µ, —Ç–∞–∫ –∫–∞–∫ –æ–Ω–æ —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é URL-–∞–¥—Ä–µ—Å–∞, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é Functions. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ `soil-moisture-sensor-` –∏ –¥–æ–±–∞–≤—å—Ç–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä, –Ω–∞–ø—Ä–∏–º–µ—Ä —Å–ª—É—á–∞–π–Ω—ã–µ —Å–ª–æ–≤–∞ –∏–ª–∏ –≤–∞—à–µ –∏–º—è.

    –ü–∞—Ä–∞–º–µ—Ç—Ä `--functions-version 3` —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤–µ—Ä—Å–∏—é Azure Functions. –í–µ—Ä—Å–∏—è 3 —è–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω–µ–π.

    –ü–∞—Ä–∞–º–µ—Ç—Ä `--os-type Linux` —É–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ä–µ–¥–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è Functions –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Linux –≤ –∫–∞—á–µ—Å—Ç–≤–µ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è —ç—Ç–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π. Functions –º–æ–≥—É—Ç —Ä–∞–∑–º–µ—â–∞—Ç—å—Å—è –Ω–∞ Linux –∏–ª–∏ Windows –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ —è–∑—ã–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ Python –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ Linux.

### –ó–∞–¥–∞—á–∞ - –∑–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–ü—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Functions –≤—ã —Å–æ—Ö—Ä–∞–Ω—è–ª–∏ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ —Ñ–∞–π–ª–µ `local.settings.json` –¥–ª—è —Å—Ç—Ä–æ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –≤–∞—à–µ–º—É IoT Hub. –≠—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–ø–∏—Å–∞—Ç—å –≤ Application Settings –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Functions –≤ Azure, —á—Ç–æ–±—ã –∏—Ö –º–æ–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–∞—à –∫–æ–¥.

> üéì –§–∞–π–ª `local.settings.json` –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, –∏ –µ–≥–æ –Ω–µ —Å–ª–µ–¥—É–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å –≤ —Å–∏—Å—Ç–µ–º—É –∫–æ–Ω—Ç—Ä–æ–ª—è –≤–µ—Ä—Å–∏–π, —Ç–∞–∫—É—é –∫–∞–∫ GitHub. –ü—Ä–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–∏ –≤ –æ–±–ª–∞–∫–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è Application Settings. Application Settings ‚Äî —ç—Ç–æ –ø–∞—Ä—ã –∫–ª—é—á/–∑–Ω–∞—á–µ–Ω–∏–µ, —Ä–∞–∑–º–µ—â–µ–Ω–Ω—ã–µ –≤ –æ–±–ª–∞–∫–µ, –∫–æ—Ç–æ—Ä—ã–µ —Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –ª–∏–±–æ –≤ –≤–∞—à–µ–º –∫–æ–¥–µ, –ª–∏–±–æ —Å—Ä–µ–¥–æ–π –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –≤–∞—à–µ–≥–æ –∫–æ–¥–∞ –∫ IoT Hub.

1. –í—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â—É—é –∫–æ–º–∞–Ω–¥—É, —á—Ç–æ–±—ã —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫—É `IOT_HUB_CONNECTION_STRING` –≤ Application Settings –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Functions:

    ```sh
    az functionapp config appsettings set --resource-group soil-moisture-sensor \
                                          --name <functions_app_name> \
                                          --settings "IOT_HUB_CONNECTION_STRING=<connection string>"
    ```

    –ó–∞–º–µ–Ω–∏—Ç–µ `<functions_app_name>` –Ω–∞ –∏–º—è, –∫–æ—Ç–æ—Ä–æ–µ –≤—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –¥–ª—è –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Functions.

    –ó–∞–º–µ–Ω–∏—Ç–µ `<connection string>` –Ω–∞ –∑–Ω–∞—á–µ–Ω–∏–µ `IOT_HUB_CONNECTION_STRING` –∏–∑ –≤–∞—à–µ–≥–æ —Ñ–∞–π–ª–∞ `local.settings.json`.

1. –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ —à–∞–≥ –≤—ã—à–µ, –Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ `REGISTRY_MANAGER_CONNECTION_STRING` –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –≤–∞—à–µ–≥–æ —Ñ–∞–π–ª–∞ `local.settings.json`.

–ö–æ–≥–¥–∞ –≤—ã –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —ç—Ç–∏ –∫–æ–º–∞–Ω–¥—ã, –æ–Ω–∏ —Ç–∞–∫–∂–µ –≤—ã–≤–µ–¥—É—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö Application Settings –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Functions. –í—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ, —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤–∞—à–∏ –∑–Ω–∞—á–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ.

> üíÅ –í—ã —É–≤–∏–¥–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ, —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ –¥–ª—è `AzureWebJobsStorage`. –í –≤–∞—à–µ–º —Ñ–∞–π–ª–µ `local.settings.json` —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ –±—ã–ª–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —ç–º—É–ª—è—Ç–æ—Ä–∞ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞. –ö–æ–≥–¥–∞ –≤—ã —Å–æ–∑–¥–∞–µ—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Functions, –≤—ã –ø–µ—Ä–µ–¥–∞–µ—Ç–µ —É—á–µ—Ç–Ω—É—é –∑–∞–ø–∏—Å—å —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞, –∏ —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

### –ó–∞–¥–∞—á–∞ - —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Functions –≤ –æ–±–ª–∞–∫–µ

–¢–µ–ø–µ—Ä—å, –∫–æ–≥–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Functions –≥–æ—Ç–æ–≤–æ, –≤–∞—à –∫–æ–¥ –º–æ–∂–Ω–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å.

1. –í—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â—É—é –∫–æ–º–∞–Ω–¥—É –∏–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ VS Code, —á—Ç–æ–±—ã –æ–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Functions:

    ```sh
    func azure functionapp publish <functions_app_name>
    ```

    –ó–∞–º–µ–Ω–∏—Ç–µ `<functions_app_name>` –Ω–∞ –∏–º—è, –∫–æ—Ç–æ—Ä–æ–µ –≤—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –¥–ª—è –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Functions.

–ö–æ–¥ –±—É–¥–µ—Ç —É–ø–∞–∫–æ–≤–∞–Ω –∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Functions, –≥–¥–µ –æ–Ω –±—É–¥–µ—Ç —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç –∏ –∑–∞–ø—É—â–µ–Ω. –ë—É–¥–µ—Ç –º–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞ –≤ –∫–æ–Ω—Å–æ–ª—å, –∑–∞–∫–∞–Ω—á–∏–≤–∞—é—â–µ–≥–æ—Å—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –∏ —Å–ø–∏—Å–∫–æ–º —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π. –í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ —Å–ø–∏—Å–æ–∫ –±—É–¥–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ç—Ä–∏–≥–≥–µ—Ä.

```output
Deployment successful.
Remote build succeeded!
Syncing triggers...
Functions in soil-moisture-sensor:
    iot-hub-trigger - [eventHubTrigger]
```

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∞—à–µ IoT-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ —Ä–∞–±–æ—Ç–∞–µ—Ç. –ò–∑–º–µ–Ω—è–π—Ç–µ —É—Ä–æ–≤–µ–Ω—å –≤–ª–∞–∂–Ω–æ—Å—Ç–∏, —Ä–µ–≥—É–ª–∏—Ä—É—è –≤–ª–∞–∂–Ω–æ—Å—Ç—å –ø–æ—á–≤—ã –∏–ª–∏ –ø–µ—Ä–µ–º–µ—â–∞—è –¥–∞—Ç—á–∏–∫ –≤–Ω—É—Ç—Ä—å –∏ –Ω–∞—Ä—É–∂—É –ø–æ—á–≤—ã. –í—ã —É–≤–∏–¥–∏—Ç–µ, –∫–∞–∫ —Ä–µ–ª–µ –≤–∫–ª—é—á–∞–µ—Ç—Å—è –∏ –≤—ã–∫–ª—é—á–∞–µ—Ç—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–ª–∞–∂–Ω–æ—Å—Ç–∏ –ø–æ—á–≤—ã.

---

## üöÄ –ó–∞–¥–∞–Ω–∏–µ

–í –ø—Ä–µ–¥—ã–¥—É—â–µ–º —É—Ä–æ–∫–µ –≤—ã —É–ø—Ä–∞–≤–ª—è–ª–∏ –≤—Ä–µ–º–µ–Ω–µ–º —Ä–∞–±–æ—Ç—ã —Ä–µ–ª–µ, –æ—Ç–ø–∏—Å—ã–≤–∞—è—Å—å –æ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π MQTT, –ø–æ–∫–∞ —Ä–µ–ª–µ –±—ã–ª–æ –≤–∫–ª—é—á–µ–Ω–æ, –∏ –≤ —Ç–µ—á–µ–Ω–∏–µ –∫–æ—Ä–æ—Ç–∫–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –ø–æ—Å–ª–µ –µ–≥–æ –≤—ã–∫–ª—é—á–µ–Ω–∏—è. –ó–¥–µ—Å—å –≤—ã –Ω–µ –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ—Ç –º–µ—Ç–æ–¥ ‚Äî –≤—ã –Ω–µ –º–æ–∂–µ—Ç–µ –æ—Ç–ø–∏—Å–∞—Ç—å—Å—è –æ—Ç —Ç—Ä–∏–≥–≥–µ—Ä–∞ IoT Hub.

–ü–æ–¥—É–º–∞–π—Ç–µ –æ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å–ø–æ—Å–æ–±–∞—Ö, –∫–æ—Ç–æ—Ä—ã–º–∏ –≤—ã –º–æ–≥–ª–∏ –±—ã —Å–ø—Ä–∞–≤–∏—Ç—å—Å—è —Å —ç—Ç–∏–º –≤ –≤–∞—à–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ Functions.

## –í–∏–∫—Ç–æ—Ä–∏–Ω–∞ –ø–æ—Å–ª–µ –ª–µ–∫—Ü–∏–∏

[–í–∏–∫—Ç–æ—Ä–∏–Ω–∞ –ø–æ—Å–ª–µ –ª–µ–∫—Ü–∏–∏](https://black-meadow-040d15503.1.azurestaticapps.net/quiz/18)

## –û–±–∑–æ—Ä –∏ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ–µ –∏–∑—É—á–µ–Ω–∏–µ

* –û–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å —Å–µ—Ä–≤–µ—Ä–ª–µ—Å—Å-–≤—ã—á–∏—Å–ª–µ–Ω–∏—è–º–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ [Serverless Computing –≤ –í–∏–∫–∏–ø–µ–¥–∏–∏](https://wikipedia.org/wiki/Serverless_computing).
* –ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ –æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–∏ —Å–µ—Ä–≤–µ—Ä–ª–µ—Å—Å –≤ Azure, –≤–∫–ª—é—á–∞—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã, –≤ [–ø–æ—Å—Ç–µ –±–ª–æ–≥–∞ Azure "Go serverless for your IoT needs"](https://azure.microsoft.com/blog/go-serverless-for-your-iot-needs/?WT.mc_id=academic-17441-jabenn).
* –£–∑–Ω–∞–π—Ç–µ –±–æ–ª—å—à–µ –æ–± Azure Functions –Ω–∞ [YouTube-–∫–∞–Ω–∞–ª–µ Azure Functions](https://www.youtube.com/c/AzureFunctions).

## –ó–∞–¥–∞–Ω–∏–µ

[–î–æ–±–∞–≤—å—Ç–µ —Ä—É—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–ª–µ](assignment.md)

---

**–û—Ç–∫–∞–∑ –æ—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏**:  
–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –±—ã–ª –ø–µ—Ä–µ–≤–µ–¥–µ–Ω —Å –ø–æ–º–æ—â—å—é —Å–µ—Ä–≤–∏—Å–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–µ—Ä–µ–≤–æ–¥–∞ [Co-op Translator](https://github.com/Azure/co-op-translator). –ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –Ω–∞—à–∏ —É—Å–∏–ª–∏—è –æ–±–µ—Å–ø–µ—á–∏—Ç—å —Ç–æ—á–Ω–æ—Å—Ç—å, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–µ—Ä–µ–≤–æ–¥—ã –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –æ—à–∏–±–∫–∏ –∏–ª–∏ –Ω–µ—Ç–æ—á–Ω–æ—Å—Ç–∏. –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –Ω–∞ –µ–≥–æ —Ä–æ–¥–Ω–æ–º —è–∑—ã–∫–µ —Å–ª–µ–¥—É–µ—Ç —Å—á–∏—Ç–∞—Ç—å –∞–≤—Ç–æ—Ä–∏—Ç–µ—Ç–Ω—ã–º –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º. –î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥ —á–µ–ª–æ–≤–µ–∫–æ–º. –ú—ã –Ω–µ –Ω–µ—Å–µ–º –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∑–∞ –ª—é–±—ã–µ –Ω–µ–¥–æ—Ä–∞–∑—É–º–µ–Ω–∏—è –∏–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏, –≤–æ–∑–Ω–∏–∫—à–∏–µ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω–æ–≥–æ –ø–µ—Ä–µ–≤–æ–¥–∞.