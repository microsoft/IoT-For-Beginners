# åˆ¶ä½œå¤œç¯ - åˆ©ç”¨è™šæ‹Ÿ IOT ç¡¬ä»¶

åœ¨è¿™éƒ¨åˆ†è¯¾ç¨‹é‡Œï¼Œä½ å°†å‘è™šæ‹Ÿ IOT ç¡¬ä»¶æ·»åŠ å…‰ä¼ æ„Ÿå™¨ã€‚

## è™šæ‹Ÿç¡¬ä»¶

åˆ¶ä½œå¤œç¯éœ€è¦åœ¨ CounterFit åº”ç”¨ç¨‹åºä¸­æ·»åŠ ä¸€ä¸ªä¼ æ„Ÿå™¨ã€‚

è¿™å°±æ˜¯ **å…‰ä¼ æ„Ÿå™¨**ã€‚ åœ¨å®é™…çš„ IOT è®¾å¤‡ä¸­ï¼Œå®ƒæ˜¯å¯å°†å…‰è½¬æ¢ä¸ºç”µä¿¡å·çš„ [å…‰ç”µäºŒæç®¡](https://wikipedia.org/wiki/Photodiode)ã€‚ å…‰ä¼ æ„Ÿå™¨æ˜¯æ¨¡æ‹Ÿä¿¡å·ä¼ æ„Ÿå™¨ï¼Œå¯æ„ŸçŸ¥å…‰çš„å¼ºåº¦å¹¶å‘é€å¯¹åº”æ•°å€¼ï¼Œä½†å…¶å¹¶ä½¿ç”¨ä»»ä½•æ ‡å‡†æµ‹é‡å•ä½ï¼Œå¦‚[lux](https://wikipedia.org/wiki/Lux)ã€‚

### æ·»åŠ ä¼ æ„Ÿå™¨åˆ° CounterFit

è¦ä½¿ç”¨è™šæ‹Ÿå…‰ä¼ æ„Ÿå™¨ï¼Œéœ€å°†å…¶æ·»åŠ åˆ° CounterFit åº”ç”¨ç¨‹åºä¸­

#### ä»»åŠ¡ - åœ¨ CounterFit ä¸­æ·»åŠ ä¼ æ„Ÿå™¨

åœ¨ CounterFit åº”ç”¨ç¨‹åºä¸­æ·»åŠ ä¼ æ„Ÿå™¨ã€‚

1. è¯·ç¡®ä¿ CounterFit web åº”ç”¨æ¥ç€ä¸Šä¸€éƒ¨åˆ†çš„ä»»åŠ¡ç»§ç»­è¿è¡Œã€‚å¦åˆ™ï¼Œé‡å¯appã€‚

1. æ·»åŠ å…‰ä¼ æ„Ÿå™¨:

    1. åœ¨ *Sensors* çª—æ ¼çš„ *Create sensor* æ¡†ä¸­ï¼Œä¸‹æ‹‰ *Sensor type* å¹¶é€‰æ‹© *light*

    1. å°† *Units* è®¾ç½®ä¸º *NoUnits*

    1. ç¡®ä¿*Pin* è®¾ç½®ä¸º *0*

    1. ç‚¹å‡» **Add** æŒ‰é’®åœ¨ *pin 0* æ·»åŠ å…‰ä¼ æ„Ÿå™¨

    ![å…‰ä¼ æ„Ÿå™¨è®¾ç½®](../../../images/counterfit-create-light-sensor.png)

    The light sensor will be created and appear in the sensors list.

    ![æˆåŠŸæ·»åŠ å…‰ä¼ æ„Ÿå™¨](../../../images/counterfit-light-sensor.png)

## å¯¹å…‰ä¼ æ„Ÿå™¨è¿›è¡Œç¼–ç¨‹

è¯¥è®¾å¤‡ç°åœ¨å¯ä½œä¸ºå†…ç½®å…‰ä¼ æ„Ÿå™¨ç¼–ç¨‹ä½¿ç”¨ã€‚

### ä»»åŠ¡ - å¯¹å…‰ä¼ æ„Ÿå™¨è¿›è¡Œç¼–ç¨‹

å¯¹è®¾å¤‡è¿›è¡Œç¼–ç¨‹ã€‚

1. åœ¨ VS Code ä¸­æ‰“å¼€ä¸Šä¸€éƒ¨åˆ†åˆ›å»ºçš„å¤œç¯é¡¹ç›®ã€‚å¦‚æœ‰å¿…è¦ï¼Œé‡å¯ç»ˆç«¯ä»¥ç¡®ä¿å®ƒä½¿ç”¨è™šæ‹Ÿç¯å¢ƒè¿è¡Œã€‚

1. æ‰“å¼€ `app.py`

1. å°†ä»¥ä¸‹ä»£ç æ·»åŠ åˆ° `app.py` ä¸­çš„ `import` å…³é”®å­—åä»¥æ·»åŠ ä¾èµ–åº“ã€‚

    ```python
    import time
    from counterfit_shims_grove.grove_light_sensor_v1_2 import GroveLightSensor
    ```

    `import time` è¯­å¥æ·»åŠ äº† Pythonçš„ `time` æ¨¡å—ï¼Œæ­¤æ¨¡å—å°†åœ¨åç»­ä»£ç ä¸­ä½¿ç”¨ã€‚

    `from counterfit_shims_grove.grove_light_sensor_v1_2 import GroveLightSensor` è¯­å¥ä» CounterFit Grove shim Python åº“å¯¼å…¥  `GroveLightSensor` æ¨¡å—ã€‚å…¶ä½œç”¨æ˜¯åœ¨ CounterFit åº”ç”¨ä¸­ä¸å…‰ä¼ æ„Ÿå™¨äº¤äº’ã€‚

1. å°†ä»¥ä¸‹ä»£ç æ·»åŠ åˆ°ä»£ç åº•éƒ¨ï¼Œä»¥åˆå§‹åŒ–ç®¡ç†å…‰ä¼ æ„Ÿå™¨çš„å®ä¾‹ï¼š

    ```python
    light_sensor = GroveLightSensor(0)
    ```

    `light_sensor = GroveLightSensor(0)` è¯­å¥åˆ›å»º `GroveLightSensor` å®ä¾‹ - å¹¶å°†å…‰ä¼ æ„Ÿå™¨è¿æ¥åˆ° CounterFit Grove çš„å¼•è„š **0** ä¸Šã€‚

1. åœ¨ä»¥ä¸Šä»£ç åæ·»åŠ ä¸€ä¸ªæ— é™å¾ªç¯ï¼Œä»¥è½®è¯¢å…‰ä¼ æ„Ÿå™¨å€¼å¹¶åœ¨æ§åˆ¶å°æ˜¾ç¤ºï¼š

    ```python
    while True:
        light = light_sensor.light
        print('Light level:', light)
    ```

    ä½¿ç”¨ `GroveLightSensor` ç±»ä¸­çš„ `light` å±æ€§è·å–å½“å‰å…‰çº¿å¼ºåº¦ã€‚è¯¥å±æ€§ä»å¼•è„šè¯»å–æ¨¡æ‹Ÿä¿¡å·å€¼ï¼Œæ­¤å€¼å°†è¢«åœ¨æ§åˆ¶å°æ˜¾ç¤ºã€‚

1. é‰´äºå…‰çº¿å¼ºåº¦æ— éœ€æŒç»­è·å–ï¼Œå¯åœ¨ `while` å¾ªç¯ç»“å°¾å¤„æ·»åŠ  1 ç§’çš„ç¡çœ ã€‚ç¡çœ å¯é™ä½è®¾å¤‡åŠŸè€—ã€‚

    ```python
    time.sleep(1)
    ```

1. åœ¨ VS ç»ˆç«¯è¿è¡Œ Python ç¨‹åºï¼š

    ```sh
    python3 app.py
    ```

    å…‰çº¿å€¼å°†è¾“å‡ºåˆ°æ§åˆ¶å°ã€‚æ­¤å€¼åˆå§‹ä¸º 0ã€‚

1. åœ¨ CounterFit åº”ç”¨ä¸­å¯ä¿®æ”¹å…‰ä¼ æ„Ÿçš„å€¼ã€‚å¯é€šè¿‡å¦‚ä¸‹æ–¹æ³•ï¼š

    * åœ¨å…‰ä¼ æ„Ÿå™¨çš„ *Value* æ¡†ä¸­è¾“å…¥æ‰€éœ€æ•°å€¼ï¼Œç„¶åç‚¹å‡» **Set** æŒ‰é’®ã€‚è¯¥æ•°å€¼å°†è¢«ä¼ æ„Ÿå™¨è¿”å›ã€‚

    * ç‚¹å‡» *Random* é€‰é¡¹, åœ¨ *Min* å’Œ *Max* ä¸­åˆ†åˆ«è¾“å…¥æ•°å€¼ï¼Œç„¶åç‚¹å‡» **Set** æŒ‰é’®ã€‚æ¯æ¬¡çš„ä¼ æ„Ÿå™¨æ•°å€¼å°†åœ¨ *Min* and *Max* ä¹‹é—´æ³¢åŠ¨ã€‚

	è®¾ç½®çš„å€¼å°†åœ¨æ§åˆ¶å°æ˜¾ç¤ºã€‚é€šè¿‡é€‰æ‹© *Value* æˆ– *Random* æ–¹å¼æ¥æ”¹å˜æ•°å€¼ã€‚

    ```output
    (.venv) âœ  GroveTest python3 app.py 
    Light level: 143
    Light level: 244
    Light level: 246
    Light level: 253
    ```

> ğŸ’ ä½ å¯ä»¥åœ¨ [code-sensor/virtual-device](code-sensor/virtual-device) æ–‡ä»¶å¤¹ä¸­æ‰¾åˆ°æ­¤ä»£ç ã€‚

ğŸ˜€ ä½ çš„å¤œç¯ç¨‹åºå¾ˆæˆåŠŸï¼
